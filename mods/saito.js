let mySource = document.currentScript.src;
let sscript = document.getElementById("saito");

let data = null;
let options = null;
let bundle = null;

if (typeof(Storage) !== "undefined") {

  data = localStorage.getItem("options");
  if (data) { options = JSON.parse(data); }
  if (options) { bundle = options.bundle; }

  
  if (bundle != null && bundle != "") {

    document.body.removeChild(sscript);

    let sscript2 = document.createElement('script');
    sscript2.onload = function () { };
    sscript2.src = bundle;
    document.body.appendChild(sscript2);

    throw new Error('Exiting before we load bad javascript...!');
  }
}

!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=676)}([function(e,t,a){var r=a(4),n=a(31),i=a(21),s=a(22),o=a(32),c=function(e,t,a){var l,u,d,p,h=e&c.F,f=e&c.G,m=e&c.S,g=e&c.P,b=e&c.B,y=f?r:m?r[t]||(r[t]={}):(r[t]||{}).prototype,v=f?n:n[t]||(n[t]={}),_=v.prototype||(v.prototype={});for(l in f&&(a=t),a)d=((u=!h&&y&&void 0!==y[l])?y:a)[l],p=b&&u?o(d,r):g&&"function"==typeof d?o(Function.call,d):d,y&&s(y,l,d,e&c.U),v[l]!=d&&i(v,l,p),g&&_[l]!=d&&(_[l]=d)};r.core=n,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},function(e,t,a){var r=a(9),n=r.Buffer;function i(e,t){for(var a in e)t[a]=e[a]}function s(e,t,a){return n(e,t,a)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s),i(n,s),s.from=function(e,t,a){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,a)},s.alloc=function(e,t,a){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=n(e);return void 0!==t?"string"==typeof a?r.fill(t,a):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,a){var r=a(7);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){var a=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=a)},function(e,t,a){var r=t;r.block=a(880),r.blockchain=a(881),r.browser=a(882),r.burnfee=a(884),r.connection=a(885),r.crypto=a(886),r.goldenticket=a(1014),r.key=a(1015),r.keychain=a(1016),r.miner=a(1095),r.modules=a(1096),r.mempool=a(1097),r.network=a(1098),r.path=a(1100),r.peer=a(1101),r.storage=a(425),r.shashmap=a(1123),r.slip=a(1124),r.storage=a(425),r.transaction=a(1125),r.wallet=a(1126)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,a){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}function i(e,t,a){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(a=t,t=10),this._init(e||0,t||10,a||"be"))}var s;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{s=a(924).Buffer}catch(e){}function o(e,t,a){for(var r=0,n=Math.min(e.length,a),i=t;i<n;i++){var s=e.charCodeAt(i)-48;r<<=4,r|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return r}function c(e,t,a,r){for(var n=0,i=Math.min(e.length,a),s=t;s<i;s++){var o=e.charCodeAt(s)-48;n*=r,n+=o>=49?o-49+10:o>=17?o-17+10:o}return n}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,a){if("number"==typeof e)return this._initNumber(e,t,a);if("object"==typeof e)return this._initArray(e,t,a);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&n++,16===t?this._parseHex(e,n):this._parseBase(e,t,n),"-"===e[0]&&(this.negative=1),this.strip(),"le"===a&&this._initArray(this.toArray(),t,a)},i.prototype._initNumber=function(e,t,a){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===a&&this._initArray(this.toArray(),t,a)},i.prototype._initArray=function(e,t,a){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s,o=0;if("be"===a)for(n=e.length-1,i=0;n>=0;n-=3)s=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[i]|=s<<o&67108863,this.words[i+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);else if("le"===a)for(n=0,i=0;n<e.length;n+=3)s=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[i]|=s<<o&67108863,this.words[i+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);return this.strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r,n,i=0;for(a=e.length-6,r=0;a>=t;a-=6)n=o(e,a,a+6),this.words[r]|=n<<i&67108863,this.words[r+1]|=n>>>26-i&4194303,(i+=24)>=26&&(i-=26,r++);a+6!==t&&(n=o(e,t,a+6),this.words[r]|=n<<i&67108863,this.words[r+1]|=n>>>26-i&4194303),this.strip()},i.prototype._parseBase=function(e,t,a){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=t)r++;r--,n=n/t|0;for(var i=e.length-a,s=i%r,o=Math.min(i,i-s)+a,l=0,u=a;u<o;u+=r)l=c(e,u,u+r,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=c(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(e,t,a){a.negative=t.negative^e.negative;var r=e.length+t.length|0;a.length=r,r=r-1|0;var n=0|e.words[0],i=0|t.words[0],s=n*i,o=67108863&s,c=s/67108864|0;a.words[0]=o;for(var l=1;l<r;l++){for(var u=c>>>26,d=67108863&c,p=Math.min(l,t.length-1),h=Math.max(0,l-e.length+1);h<=p;h++){var f=l-h|0;u+=(s=(n=0|e.words[f])*(i=0|t.words[h])+d)/67108864|0,d=67108863&s}a.words[l]=0|d,c=0|u}return 0!==c?a.words[l]=0|c:a.length--,a.strip()}i.prototype.toString=function(e,t){var a;if(t=0|t||1,16===(e=e||10)||"hex"===e){a="";for(var n=0,i=0,s=0;s<this.length;s++){var o=this.words[s],c=(16777215&(o<<n|i)).toString(16);a=0!==(i=o>>>24-n&16777215)||s!==this.length-1?l[6-c.length]+c+a:c+a,(n+=2)>=26&&(n-=26,s--)}for(0!==i&&(a=i.toString(16)+a);a.length%t!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}if(e===(0|e)&&e>=2&&e<=36){var p=u[e],h=d[e];a="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modn(h).toString(e);a=(f=f.idivn(h)).isZero()?m+a:l[p-m.length]+m+a}for(this.isZero()&&(a="0"+a);a.length%t!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return r(void 0!==s),this.toArrayLike(s,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,a){var n=this.byteLength(),i=a||Math.max(1,n);r(n<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var s,o,c="le"===t,l=new e(i),u=this.clone();if(c){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),l[o]=s;for(;o<i;o++)l[o]=0}else{for(o=0;o<i-n;o++)l[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),l[i-o-1]=s}return l},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,a=0;return t>=4096&&(a+=13,t>>>=13),t>=64&&(a+=7,t>>>=7),t>=8&&(a+=4,t>>>=4),t>=2&&(a+=2,t>>>=2),a+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,a=0;return 0==(8191&t)&&(a+=13,t>>>=13),0==(127&t)&&(a+=7,t>>>=7),0==(15&t)&&(a+=4,t>>>=4),0==(3&t)&&(a+=2,t>>>=2),0==(1&t)&&a++,a},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var a=this._zeroBits(this.words[t]);if(e+=a,26!==a)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var a=0;a<t.length;a++)this.words[a]=this.words[a]&e.words[a];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,a;this.length>e.length?(t=this,a=e):(t=e,a=this);for(var r=0;r<a.length;r++)this.words[r]=t.words[r]^a.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),a=e%26;this._expand(t),a>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return a>0&&(this.words[n]=~this.words[n]&67108863>>26-a),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var a=e/26|0,n=e%26;return this._expand(a+1),this.words[a]=t?this.words[a]|1<<n:this.words[a]&~(1<<n),this.strip()},i.prototype.iadd=function(e){var t,a,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(a=this,r=e):(a=e,r=this);for(var n=0,i=0;i<r.length;i++)t=(0|a.words[i])+(0|r.words[i])+n,this.words[i]=67108863&t,n=t>>>26;for(;0!==n&&i<a.length;i++)t=(0|a.words[i])+n,this.words[i]=67108863&t,n=t>>>26;if(this.length=a.length,0!==n)this.words[this.length]=n,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var a,r,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(a=this,r=e):(a=e,r=this);for(var i=0,s=0;s<r.length;s++)i=(t=(0|a.words[s])-(0|r.words[s])+i)>>26,this.words[s]=67108863&t;for(;0!==i&&s<a.length;s++)i=(t=(0|a.words[s])+i)>>26,this.words[s]=67108863&t;if(0===i&&s<a.length&&a!==this)for(;s<a.length;s++)this.words[s]=a.words[s];return this.length=Math.max(this.length,s),a!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var h=function(e,t,a){var r,n,i,s=e.words,o=t.words,c=a.words,l=0,u=0|s[0],d=8191&u,p=u>>>13,h=0|s[1],f=8191&h,m=h>>>13,g=0|s[2],b=8191&g,y=g>>>13,v=0|s[3],_=8191&v,w=v>>>13,x=0|s[4],k=8191&x,S=x>>>13,P=0|s[5],E=8191&P,C=P>>>13,A=0|s[6],M=8191&A,T=A>>>13,j=0|s[7],O=8191&j,D=j>>>13,I=0|s[8],R=8191&I,B=I>>>13,q=0|s[9],L=8191&q,N=q>>>13,F=0|o[0],U=8191&F,$=F>>>13,z=0|o[1],H=8191&z,G=z>>>13,K=0|o[2],W=8191&K,V=K>>>13,Y=0|o[3],J=8191&Y,X=Y>>>13,Q=0|o[4],Z=8191&Q,ee=Q>>>13,te=0|o[5],ae=8191&te,re=te>>>13,ne=0|o[6],ie=8191&ne,se=ne>>>13,oe=0|o[7],ce=8191&oe,le=oe>>>13,ue=0|o[8],de=8191&ue,pe=ue>>>13,he=0|o[9],fe=8191&he,me=he>>>13;a.negative=e.negative^t.negative,a.length=19;var ge=(l+(r=Math.imul(d,U))|0)+((8191&(n=(n=Math.imul(d,$))+Math.imul(p,U)|0))<<13)|0;l=((i=Math.imul(p,$))+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(f,U),n=(n=Math.imul(f,$))+Math.imul(m,U)|0,i=Math.imul(m,$);var be=(l+(r=r+Math.imul(d,H)|0)|0)+((8191&(n=(n=n+Math.imul(d,G)|0)+Math.imul(p,H)|0))<<13)|0;l=((i=i+Math.imul(p,G)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,U),n=(n=Math.imul(b,$))+Math.imul(y,U)|0,i=Math.imul(y,$),r=r+Math.imul(f,H)|0,n=(n=n+Math.imul(f,G)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,G)|0;var ye=(l+(r=r+Math.imul(d,W)|0)|0)+((8191&(n=(n=n+Math.imul(d,V)|0)+Math.imul(p,W)|0))<<13)|0;l=((i=i+Math.imul(p,V)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(_,U),n=(n=Math.imul(_,$))+Math.imul(w,U)|0,i=Math.imul(w,$),r=r+Math.imul(b,H)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(y,H)|0,i=i+Math.imul(y,G)|0,r=r+Math.imul(f,W)|0,n=(n=n+Math.imul(f,V)|0)+Math.imul(m,W)|0,i=i+Math.imul(m,V)|0;var ve=(l+(r=r+Math.imul(d,J)|0)|0)+((8191&(n=(n=n+Math.imul(d,X)|0)+Math.imul(p,J)|0))<<13)|0;l=((i=i+Math.imul(p,X)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(k,U),n=(n=Math.imul(k,$))+Math.imul(S,U)|0,i=Math.imul(S,$),r=r+Math.imul(_,H)|0,n=(n=n+Math.imul(_,G)|0)+Math.imul(w,H)|0,i=i+Math.imul(w,G)|0,r=r+Math.imul(b,W)|0,n=(n=n+Math.imul(b,V)|0)+Math.imul(y,W)|0,i=i+Math.imul(y,V)|0,r=r+Math.imul(f,J)|0,n=(n=n+Math.imul(f,X)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,X)|0;var _e=(l+(r=r+Math.imul(d,Z)|0)|0)+((8191&(n=(n=n+Math.imul(d,ee)|0)+Math.imul(p,Z)|0))<<13)|0;l=((i=i+Math.imul(p,ee)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(E,U),n=(n=Math.imul(E,$))+Math.imul(C,U)|0,i=Math.imul(C,$),r=r+Math.imul(k,H)|0,n=(n=n+Math.imul(k,G)|0)+Math.imul(S,H)|0,i=i+Math.imul(S,G)|0,r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,V)|0)+Math.imul(w,W)|0,i=i+Math.imul(w,V)|0,r=r+Math.imul(b,J)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(y,J)|0,i=i+Math.imul(y,X)|0,r=r+Math.imul(f,Z)|0,n=(n=n+Math.imul(f,ee)|0)+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0;var we=(l+(r=r+Math.imul(d,ae)|0)|0)+((8191&(n=(n=n+Math.imul(d,re)|0)+Math.imul(p,ae)|0))<<13)|0;l=((i=i+Math.imul(p,re)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(M,U),n=(n=Math.imul(M,$))+Math.imul(T,U)|0,i=Math.imul(T,$),r=r+Math.imul(E,H)|0,n=(n=n+Math.imul(E,G)|0)+Math.imul(C,H)|0,i=i+Math.imul(C,G)|0,r=r+Math.imul(k,W)|0,n=(n=n+Math.imul(k,V)|0)+Math.imul(S,W)|0,i=i+Math.imul(S,V)|0,r=r+Math.imul(_,J)|0,n=(n=n+Math.imul(_,X)|0)+Math.imul(w,J)|0,i=i+Math.imul(w,X)|0,r=r+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,ee)|0)+Math.imul(y,Z)|0,i=i+Math.imul(y,ee)|0,r=r+Math.imul(f,ae)|0,n=(n=n+Math.imul(f,re)|0)+Math.imul(m,ae)|0,i=i+Math.imul(m,re)|0;var xe=(l+(r=r+Math.imul(d,ie)|0)|0)+((8191&(n=(n=n+Math.imul(d,se)|0)+Math.imul(p,ie)|0))<<13)|0;l=((i=i+Math.imul(p,se)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(O,U),n=(n=Math.imul(O,$))+Math.imul(D,U)|0,i=Math.imul(D,$),r=r+Math.imul(M,H)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(T,H)|0,i=i+Math.imul(T,G)|0,r=r+Math.imul(E,W)|0,n=(n=n+Math.imul(E,V)|0)+Math.imul(C,W)|0,i=i+Math.imul(C,V)|0,r=r+Math.imul(k,J)|0,n=(n=n+Math.imul(k,X)|0)+Math.imul(S,J)|0,i=i+Math.imul(S,X)|0,r=r+Math.imul(_,Z)|0,n=(n=n+Math.imul(_,ee)|0)+Math.imul(w,Z)|0,i=i+Math.imul(w,ee)|0,r=r+Math.imul(b,ae)|0,n=(n=n+Math.imul(b,re)|0)+Math.imul(y,ae)|0,i=i+Math.imul(y,re)|0,r=r+Math.imul(f,ie)|0,n=(n=n+Math.imul(f,se)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,se)|0;var ke=(l+(r=r+Math.imul(d,ce)|0)|0)+((8191&(n=(n=n+Math.imul(d,le)|0)+Math.imul(p,ce)|0))<<13)|0;l=((i=i+Math.imul(p,le)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(R,U),n=(n=Math.imul(R,$))+Math.imul(B,U)|0,i=Math.imul(B,$),r=r+Math.imul(O,H)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(D,H)|0,i=i+Math.imul(D,G)|0,r=r+Math.imul(M,W)|0,n=(n=n+Math.imul(M,V)|0)+Math.imul(T,W)|0,i=i+Math.imul(T,V)|0,r=r+Math.imul(E,J)|0,n=(n=n+Math.imul(E,X)|0)+Math.imul(C,J)|0,i=i+Math.imul(C,X)|0,r=r+Math.imul(k,Z)|0,n=(n=n+Math.imul(k,ee)|0)+Math.imul(S,Z)|0,i=i+Math.imul(S,ee)|0,r=r+Math.imul(_,ae)|0,n=(n=n+Math.imul(_,re)|0)+Math.imul(w,ae)|0,i=i+Math.imul(w,re)|0,r=r+Math.imul(b,ie)|0,n=(n=n+Math.imul(b,se)|0)+Math.imul(y,ie)|0,i=i+Math.imul(y,se)|0,r=r+Math.imul(f,ce)|0,n=(n=n+Math.imul(f,le)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,le)|0;var Se=(l+(r=r+Math.imul(d,de)|0)|0)+((8191&(n=(n=n+Math.imul(d,pe)|0)+Math.imul(p,de)|0))<<13)|0;l=((i=i+Math.imul(p,pe)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(L,U),n=(n=Math.imul(L,$))+Math.imul(N,U)|0,i=Math.imul(N,$),r=r+Math.imul(R,H)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(B,H)|0,i=i+Math.imul(B,G)|0,r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,V)|0)+Math.imul(D,W)|0,i=i+Math.imul(D,V)|0,r=r+Math.imul(M,J)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,X)|0,r=r+Math.imul(E,Z)|0,n=(n=n+Math.imul(E,ee)|0)+Math.imul(C,Z)|0,i=i+Math.imul(C,ee)|0,r=r+Math.imul(k,ae)|0,n=(n=n+Math.imul(k,re)|0)+Math.imul(S,ae)|0,i=i+Math.imul(S,re)|0,r=r+Math.imul(_,ie)|0,n=(n=n+Math.imul(_,se)|0)+Math.imul(w,ie)|0,i=i+Math.imul(w,se)|0,r=r+Math.imul(b,ce)|0,n=(n=n+Math.imul(b,le)|0)+Math.imul(y,ce)|0,i=i+Math.imul(y,le)|0,r=r+Math.imul(f,de)|0,n=(n=n+Math.imul(f,pe)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,pe)|0;var Pe=(l+(r=r+Math.imul(d,fe)|0)|0)+((8191&(n=(n=n+Math.imul(d,me)|0)+Math.imul(p,fe)|0))<<13)|0;l=((i=i+Math.imul(p,me)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(L,H),n=(n=Math.imul(L,G))+Math.imul(N,H)|0,i=Math.imul(N,G),r=r+Math.imul(R,W)|0,n=(n=n+Math.imul(R,V)|0)+Math.imul(B,W)|0,i=i+Math.imul(B,V)|0,r=r+Math.imul(O,J)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(D,J)|0,i=i+Math.imul(D,X)|0,r=r+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,ee)|0)+Math.imul(T,Z)|0,i=i+Math.imul(T,ee)|0,r=r+Math.imul(E,ae)|0,n=(n=n+Math.imul(E,re)|0)+Math.imul(C,ae)|0,i=i+Math.imul(C,re)|0,r=r+Math.imul(k,ie)|0,n=(n=n+Math.imul(k,se)|0)+Math.imul(S,ie)|0,i=i+Math.imul(S,se)|0,r=r+Math.imul(_,ce)|0,n=(n=n+Math.imul(_,le)|0)+Math.imul(w,ce)|0,i=i+Math.imul(w,le)|0,r=r+Math.imul(b,de)|0,n=(n=n+Math.imul(b,pe)|0)+Math.imul(y,de)|0,i=i+Math.imul(y,pe)|0;var Ee=(l+(r=r+Math.imul(f,fe)|0)|0)+((8191&(n=(n=n+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;l=((i=i+Math.imul(m,me)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(L,W),n=(n=Math.imul(L,V))+Math.imul(N,W)|0,i=Math.imul(N,V),r=r+Math.imul(R,J)|0,n=(n=n+Math.imul(R,X)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,X)|0,r=r+Math.imul(O,Z)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(D,Z)|0,i=i+Math.imul(D,ee)|0,r=r+Math.imul(M,ae)|0,n=(n=n+Math.imul(M,re)|0)+Math.imul(T,ae)|0,i=i+Math.imul(T,re)|0,r=r+Math.imul(E,ie)|0,n=(n=n+Math.imul(E,se)|0)+Math.imul(C,ie)|0,i=i+Math.imul(C,se)|0,r=r+Math.imul(k,ce)|0,n=(n=n+Math.imul(k,le)|0)+Math.imul(S,ce)|0,i=i+Math.imul(S,le)|0,r=r+Math.imul(_,de)|0,n=(n=n+Math.imul(_,pe)|0)+Math.imul(w,de)|0,i=i+Math.imul(w,pe)|0;var Ce=(l+(r=r+Math.imul(b,fe)|0)|0)+((8191&(n=(n=n+Math.imul(b,me)|0)+Math.imul(y,fe)|0))<<13)|0;l=((i=i+Math.imul(y,me)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,J),n=(n=Math.imul(L,X))+Math.imul(N,J)|0,i=Math.imul(N,X),r=r+Math.imul(R,Z)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(B,Z)|0,i=i+Math.imul(B,ee)|0,r=r+Math.imul(O,ae)|0,n=(n=n+Math.imul(O,re)|0)+Math.imul(D,ae)|0,i=i+Math.imul(D,re)|0,r=r+Math.imul(M,ie)|0,n=(n=n+Math.imul(M,se)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,se)|0,r=r+Math.imul(E,ce)|0,n=(n=n+Math.imul(E,le)|0)+Math.imul(C,ce)|0,i=i+Math.imul(C,le)|0,r=r+Math.imul(k,de)|0,n=(n=n+Math.imul(k,pe)|0)+Math.imul(S,de)|0,i=i+Math.imul(S,pe)|0;var Ae=(l+(r=r+Math.imul(_,fe)|0)|0)+((8191&(n=(n=n+Math.imul(_,me)|0)+Math.imul(w,fe)|0))<<13)|0;l=((i=i+Math.imul(w,me)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,Z),n=(n=Math.imul(L,ee))+Math.imul(N,Z)|0,i=Math.imul(N,ee),r=r+Math.imul(R,ae)|0,n=(n=n+Math.imul(R,re)|0)+Math.imul(B,ae)|0,i=i+Math.imul(B,re)|0,r=r+Math.imul(O,ie)|0,n=(n=n+Math.imul(O,se)|0)+Math.imul(D,ie)|0,i=i+Math.imul(D,se)|0,r=r+Math.imul(M,ce)|0,n=(n=n+Math.imul(M,le)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,le)|0,r=r+Math.imul(E,de)|0,n=(n=n+Math.imul(E,pe)|0)+Math.imul(C,de)|0,i=i+Math.imul(C,pe)|0;var Me=(l+(r=r+Math.imul(k,fe)|0)|0)+((8191&(n=(n=n+Math.imul(k,me)|0)+Math.imul(S,fe)|0))<<13)|0;l=((i=i+Math.imul(S,me)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(L,ae),n=(n=Math.imul(L,re))+Math.imul(N,ae)|0,i=Math.imul(N,re),r=r+Math.imul(R,ie)|0,n=(n=n+Math.imul(R,se)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,se)|0,r=r+Math.imul(O,ce)|0,n=(n=n+Math.imul(O,le)|0)+Math.imul(D,ce)|0,i=i+Math.imul(D,le)|0,r=r+Math.imul(M,de)|0,n=(n=n+Math.imul(M,pe)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,pe)|0;var Te=(l+(r=r+Math.imul(E,fe)|0)|0)+((8191&(n=(n=n+Math.imul(E,me)|0)+Math.imul(C,fe)|0))<<13)|0;l=((i=i+Math.imul(C,me)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,ie),n=(n=Math.imul(L,se))+Math.imul(N,ie)|0,i=Math.imul(N,se),r=r+Math.imul(R,ce)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,le)|0,r=r+Math.imul(O,de)|0,n=(n=n+Math.imul(O,pe)|0)+Math.imul(D,de)|0,i=i+Math.imul(D,pe)|0;var je=(l+(r=r+Math.imul(M,fe)|0)|0)+((8191&(n=(n=n+Math.imul(M,me)|0)+Math.imul(T,fe)|0))<<13)|0;l=((i=i+Math.imul(T,me)|0)+(n>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(L,ce),n=(n=Math.imul(L,le))+Math.imul(N,ce)|0,i=Math.imul(N,le),r=r+Math.imul(R,de)|0,n=(n=n+Math.imul(R,pe)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,pe)|0;var Oe=(l+(r=r+Math.imul(O,fe)|0)|0)+((8191&(n=(n=n+Math.imul(O,me)|0)+Math.imul(D,fe)|0))<<13)|0;l=((i=i+Math.imul(D,me)|0)+(n>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,de),n=(n=Math.imul(L,pe))+Math.imul(N,de)|0,i=Math.imul(N,pe);var De=(l+(r=r+Math.imul(R,fe)|0)|0)+((8191&(n=(n=n+Math.imul(R,me)|0)+Math.imul(B,fe)|0))<<13)|0;l=((i=i+Math.imul(B,me)|0)+(n>>>13)|0)+(De>>>26)|0,De&=67108863;var Ie=(l+(r=Math.imul(L,fe))|0)+((8191&(n=(n=Math.imul(L,me))+Math.imul(N,fe)|0))<<13)|0;return l=((i=Math.imul(N,me))+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,c[0]=ge,c[1]=be,c[2]=ye,c[3]=ve,c[4]=_e,c[5]=we,c[6]=xe,c[7]=ke,c[8]=Se,c[9]=Pe,c[10]=Ee,c[11]=Ce,c[12]=Ae,c[13]=Me,c[14]=Te,c[15]=je,c[16]=Oe,c[17]=De,c[18]=Ie,0!==l&&(c[19]=l,a.length++),a};function f(e,t,a){return(new m).mulp(e,t,a)}function m(e,t){this.x=e,this.y=t}Math.imul||(h=p),i.prototype.mulTo=function(e,t){var a=this.length+e.length;return 10===this.length&&10===e.length?h(this,e,t):a<63?p(this,e,t):a<1024?function(e,t,a){a.negative=t.negative^e.negative,a.length=e.length+t.length;for(var r=0,n=0,i=0;i<a.length-1;i++){var s=n;n=0;for(var o=67108863&r,c=Math.min(i,t.length-1),l=Math.max(0,i-e.length+1);l<=c;l++){var u=i-l,d=(0|e.words[u])*(0|t.words[l]),p=67108863&d;o=67108863&(p=p+o|0),n+=(s=(s=s+(d/67108864|0)|0)+(p>>>26)|0)>>>26,s&=67108863}a.words[i]=o,r=s,s=n}return 0!==r?a.words[i]=r:a.length--,a.strip()}(this,e,t):f(this,e,t)},m.prototype.makeRBT=function(e){for(var t=new Array(e),a=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,a,e);return t},m.prototype.revBin=function(e,t,a){if(0===e||e===a-1)return e;for(var r=0,n=0;n<t;n++)r|=(1&e)<<t-n-1,e>>=1;return r},m.prototype.permute=function(e,t,a,r,n,i){for(var s=0;s<i;s++)r[s]=t[e[s]],n[s]=a[e[s]]},m.prototype.transform=function(e,t,a,r,n,i){this.permute(i,e,t,a,r,n);for(var s=1;s<n;s<<=1)for(var o=s<<1,c=Math.cos(2*Math.PI/o),l=Math.sin(2*Math.PI/o),u=0;u<n;u+=o)for(var d=c,p=l,h=0;h<s;h++){var f=a[u+h],m=r[u+h],g=a[u+h+s],b=r[u+h+s],y=d*g-p*b;b=d*b+p*g,g=y,a[u+h]=f+g,r[u+h]=m+b,a[u+h+s]=f-g,r[u+h+s]=m-b,h!==o&&(y=c*d-l*p,p=c*p+l*d,d=y)}},m.prototype.guessLen13b=function(e,t){var a=1|Math.max(t,e),r=1&a,n=0;for(a=a/2|0;a;a>>>=1)n++;return 1<<n+1+r},m.prototype.conjugate=function(e,t,a){if(!(a<=1))for(var r=0;r<a/2;r++){var n=e[r];e[r]=e[a-r-1],e[a-r-1]=n,n=t[r],t[r]=-t[a-r-1],t[a-r-1]=-n}},m.prototype.normalize13b=function(e,t){for(var a=0,r=0;r<t/2;r++){var n=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+a;e[r]=67108863&n,a=n<67108864?0:n/67108864|0}return e},m.prototype.convert13b=function(e,t,a,n){for(var i=0,s=0;s<t;s++)i+=0|e[s],a[2*s]=8191&i,i>>>=13,a[2*s+1]=8191&i,i>>>=13;for(s=2*t;s<n;++s)a[s]=0;r(0===i),r(0==(-8192&i))},m.prototype.stub=function(e){for(var t=new Array(e),a=0;a<e;a++)t[a]=0;return t},m.prototype.mulp=function(e,t,a){var r=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(r),i=this.stub(r),s=new Array(r),o=new Array(r),c=new Array(r),l=new Array(r),u=new Array(r),d=new Array(r),p=a.words;p.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,l,r),this.transform(s,i,o,c,r,n),this.transform(l,i,u,d,r,n);for(var h=0;h<r;h++){var f=o[h]*u[h]-c[h]*d[h];c[h]=o[h]*d[h]+c[h]*u[h],o[h]=f}return this.conjugate(o,c,r),this.transform(o,c,p,i,r,n),this.conjugate(p,i,r),this.normalize13b(p,r),a.negative=e.negative^t.negative,a.length=e.length+t.length,a.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),f(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,a=0;a<this.length;a++){var n=(0|this.words[a])*e,i=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=i>>>26,this.words[a]=67108863&i}return 0!==t&&(this.words[a]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),a=0;a<t.length;a++){var r=a/26|0,n=a%26;t[a]=(e.words[r]&1<<n)>>>n}return t}(e);if(0===t.length)return new i(1);for(var a=this,r=0;r<t.length&&0===t[r];r++,a=a.sqr());if(++r<t.length)for(var n=a.sqr();r<t.length;r++,n=n.sqr())0!==t[r]&&(a=a.mul(n));return a},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,a=e%26,n=(e-a)/26,i=67108863>>>26-a<<26-a;if(0!==a){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&i,c=(0|this.words[t])-o<<a;this.words[t]=c|s,s=o>>>26-a}s&&(this.words[t]=s,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,a){var n;r("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var i=e%26,s=Math.min((e-i)/26,this.length),o=67108863^67108863>>>i<<i,c=a;if(n-=s,n=Math.max(0,n),c){for(var l=0;l<s;l++)c.words[l]=this.words[l];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,l=0;l<this.length;l++)this.words[l]=this.words[l+s];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=n);l--){var d=0|this.words[l];this.words[l]=u<<26-i|d>>>i,u=d&o}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,a){return r(0===this.negative),this.iushrn(e,t,a)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,a=(e-t)/26,n=1<<t;return!(this.length<=a)&&!!(this.words[a]&n)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,a=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=a)return this;if(0!==t&&a++,this.length=Math.min(a,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,a){var n,i,s=e.length+a;this._expand(s);var o=0;for(n=0;n<e.length;n++){i=(0|this.words[n+a])+o;var c=(0|e.words[n])*t;o=((i-=67108863&c)>>26)-(c/67108864|0),this.words[n+a]=67108863&i}for(;n<this.length-a;n++)o=(i=(0|this.words[n+a])+o)>>26,this.words[n+a]=67108863&i;if(0===o)return this.strip();for(r(-1===o),o=0,n=0;n<this.length;n++)o=(i=-(0|this.words[n])+o)>>26,this.words[n]=67108863&i;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var a=(this.length,e.length),r=this.clone(),n=e,s=0|n.words[n.length-1];0!==(a=26-this._countBits(s))&&(n=n.ushln(a),r.iushln(a),s=0|n.words[n.length-1]);var o,c=r.length-n.length;if("mod"!==t){(o=new i(null)).length=c+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=r.clone()._ishlnsubmul(n,1,c);0===u.negative&&(r=u,o&&(o.words[c]=1));for(var d=c-1;d>=0;d--){var p=67108864*(0|r.words[n.length+d])+(0|r.words[n.length+d-1]);for(p=Math.min(p/s|0,67108863),r._ishlnsubmul(n,p,d);0!==r.negative;)p--,r.negative=0,r._ishlnsubmul(n,1,d),r.isZero()||(r.negative^=1);o&&(o.words[d]=p)}return o&&o.strip(),r.strip(),"div"!==t&&0!==a&&r.iushrn(a),{div:o||null,mod:r}},i.prototype.divmod=function(e,t,a){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(n=o.div.neg()),"div"!==t&&(s=o.mod.neg(),a&&0!==s.negative&&s.iadd(e)),{div:n,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),a&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var n,s,o},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var a=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),n=e.andln(1),i=a.cmp(r);return i<0||1===n&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,a=0,n=this.length-1;n>=0;n--)a=(t*a+(0|this.words[n]))%e;return a},i.prototype.idivn=function(e){r(e<=67108863);for(var t=0,a=this.length-1;a>=0;a--){var n=(0|this.words[a])+67108864*t;this.words[a]=n/e|0,t=n%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,a=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new i(1),s=new i(0),o=new i(0),c=new i(1),l=0;t.isEven()&&a.isEven();)t.iushrn(1),a.iushrn(1),++l;for(var u=a.clone(),d=t.clone();!t.isZero();){for(var p=0,h=1;0==(t.words[0]&h)&&p<26;++p,h<<=1);if(p>0)for(t.iushrn(p);p-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(u),s.isub(d)),n.iushrn(1),s.iushrn(1);for(var f=0,m=1;0==(a.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(a.iushrn(f);f-- >0;)(o.isOdd()||c.isOdd())&&(o.iadd(u),c.isub(d)),o.iushrn(1),c.iushrn(1);t.cmp(a)>=0?(t.isub(a),n.isub(o),s.isub(c)):(a.isub(t),o.isub(n),c.isub(s))}return{a:o,b:c,gcd:a.iushln(l)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,a=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,s=new i(1),o=new i(0),c=a.clone();t.cmpn(1)>0&&a.cmpn(1)>0;){for(var l=0,u=1;0==(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,p=1;0==(a.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(a.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);t.cmp(a)>=0?(t.isub(a),s.isub(o)):(a.isub(t),o.isub(s))}return(n=0===t.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(e),n},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),a=e.clone();t.negative=0,a.negative=0;for(var r=0;t.isEven()&&a.isEven();r++)t.iushrn(1),a.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;a.isEven();)a.iushrn(1);var n=t.cmp(a);if(n<0){var i=t;t=a,a=i}else if(0===n||0===a.cmpn(1))break;t.isub(a)}return a.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,a=(e-t)/26,n=1<<t;if(this.length<=a)return this._expand(a+1),this.words[a]|=n,this;for(var i=n,s=a;0!==i&&s<this.length;s++){var o=0|this.words[s];i=(o+=i)>>>26,o&=67108863,this.words[s]=o}return 0!==i&&(this.words[s]=i,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,a=e<0;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;if(this.strip(),this.length>1)t=1;else{a&&(e=-e),r(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,a=this.length-1;a>=0;a--){var r=0|this.words[a],n=0|e.words[a];if(r!==n){r<n?t=-1:r>n&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new x(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,a=e;do{this.split(a,this.tmp),t=(a=(a=this.imulK(a)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:a.ucmp(this.p);return 0===r?(a.words[0]=0,a.length=1):r>0?a.isub(this.p):a.strip(),a},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},n(y,b),y.prototype.split=function(e,t){for(var a=Math.min(e.length,9),r=0;r<a;r++)t.words[r]=e.words[r];if(t.length=a,e.length<=9)return e.words[0]=0,void(e.length=1);var n=e.words[9];for(t.words[t.length++]=4194303&n,r=10;r<e.length;r++){var i=0|e.words[r];e.words[r-10]=(4194303&i)<<4|n>>>22,n=i}n>>>=22,e.words[r-10]=n,0===n&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,a=0;a<e.length;a++){var r=0|e.words[a];t+=977*r,e.words[a]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(v,b),n(_,b),n(w,b),w.prototype.imulK=function(e){for(var t=0,a=0;a<e.length;a++){var r=19*(0|e.words[a])+t,n=67108863&r;r>>>=26,e.words[a]=n,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new v;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new w}return g[e]=t,t},x.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var a=e.add(t);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var a=e.iadd(t);return a.cmp(this.m)>=0&&a.isub(this.m),a},x.prototype.sub=function(e,t){this._verify2(e,t);var a=e.sub(t);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var a=e.isub(t);return a.cmpn(0)<0&&a.iadd(this.m),a},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var a=this.m.add(new i(1)).iushrn(2);return this.pow(e,a)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);r(!n.isZero());var o=new i(1).toRed(this),c=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,n),p=this.pow(e,n.addn(1).iushrn(1)),h=this.pow(e,n),f=s;0!==h.cmp(o);){for(var m=h,g=0;0!==m.cmp(o);g++)m=m.redSqr();r(g<f);var b=this.pow(d,new i(1).iushln(f-g-1));p=p.redMul(b),d=b.redSqr(),h=h.redMul(d),f=g}return p},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var a=new Array(16);a[0]=new i(1).toRed(this),a[1]=e;for(var r=2;r<a.length;r++)a[r]=this.mul(a[r-1],e);var n=a[0],s=0,o=0,c=t.bitLength()%26;for(0===c&&(c=26),r=t.length-1;r>=0;r--){for(var l=t.words[r],u=c-1;u>=0;u--){var d=l>>u&1;n!==a[0]&&(n=this.sqr(n)),0!==d||0!==s?(s<<=1,s|=d,(4===++o||0===r&&0===u)&&(n=this.mul(n,a[s]),o=0,s=0)):o=0}c=26}return n},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new k(e)},n(k,x),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var a=e.imul(t),r=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=a.isub(r).iushrn(this.shift),i=n;return n.cmp(this.m)>=0?i=n.isub(this.m):n.cmpn(0)<0&&(i=n.iadd(this.m)),i._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var a=e.mul(t),r=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=a.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,a(89)(e))},function(e,t,a){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=a(887),n=a(888),i=a(889);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,a){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,a);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,a)}function l(e,t,a,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,a,r){if(t.byteLength,a<0||t.byteLength<a)throw new RangeError("'offset' is out of bounds");if(t.byteLength<a+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===a&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,a):new Uint8Array(t,a,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t);return e}(e,t,a,r):"string"==typeof t?function(e,t,a){"string"==typeof a&&""!==a||(a="utf8");if(!c.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,a),n=(e=o(e,r)).write(t,a);n!==r&&(e=e.slice(0,n));return e}(e,t,a):function(e,t){if(c.isBuffer(t)){var a=0|h(t.length);return 0===(e=o(e,a)).length||t.copy(e,0,0,a),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?o(e,0):p(e,t);if("Buffer"===t.type&&i(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(u(t),e=o(e,t<0?0:0|h(t)),!c.TYPED_ARRAY_SUPPORT)for(var a=0;a<t;++a)e[a]=0;return e}function p(e,t){var a=t.length<0?0:0|h(t.length);e=o(e,a);for(var r=0;r<a;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function f(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var a=e.length;if(0===a)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return a;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*a;case"hex":return a>>>1;case"base64":return U(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,a){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===a||a>this.length)&&(a=this.length),a<=0)return"";if((a>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return M(this,t,a);case"utf8":case"utf-8":return E(this,t,a);case"ascii":return C(this,t,a);case"latin1":case"binary":return A(this,t,a);case"base64":return P(this,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,a);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,a){var r=e[t];e[t]=e[a],e[a]=r}function b(e,t,a,r,n){if(0===e.length)return-1;if("string"==typeof a?(r=a,a=0):a>2147483647?a=2147483647:a<-2147483648&&(a=-2147483648),a=+a,isNaN(a)&&(a=n?0:e.length-1),a<0&&(a=e.length+a),a>=e.length){if(n)return-1;a=e.length-1}else if(a<0){if(!n)return-1;a=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:y(e,t,a,r,n);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,a):Uint8Array.prototype.lastIndexOf.call(e,t,a):y(e,[t],a,r,n);throw new TypeError("val must be string, number or Buffer")}function y(e,t,a,r,n){var i,s=1,o=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,c/=2,a/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){var u=-1;for(i=a;i<o;i++)if(l(e,i)===l(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===c)return u*s}else-1!==u&&(i-=i-u),u=-1}else for(a+c>o&&(a=o-c),i=a;i>=0;i--){for(var d=!0,p=0;p<c;p++)if(l(e,i+p)!==l(t,p)){d=!1;break}if(d)return i}return-1}function v(e,t,a,r){a=Number(a)||0;var n=e.length-a;r?(r=Number(r))>n&&(r=n):r=n;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var s=0;s<r;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[a+s]=o}return s}function _(e,t,a,r){return $(F(t,e.length-a),e,a,r)}function w(e,t,a,r){return $(function(e){for(var t=[],a=0;a<e.length;++a)t.push(255&e.charCodeAt(a));return t}(t),e,a,r)}function x(e,t,a,r){return w(e,t,a,r)}function k(e,t,a,r){return $(U(t),e,a,r)}function S(e,t,a,r){return $(function(e,t){for(var a,r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)a=e.charCodeAt(s),r=a>>8,n=a%256,i.push(n),i.push(r);return i}(t,e.length-a),e,a,r)}function P(e,t,a){return 0===t&&a===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,a))}function E(e,t,a){a=Math.min(e.length,a);for(var r=[],n=t;n<a;){var i,s,o,c,l=e[n],u=null,d=l>239?4:l>223?3:l>191?2:1;if(n+d<=a)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(i=e[n+1]))&&(c=(31&l)<<6|63&i)>127&&(u=c);break;case 3:i=e[n+1],s=e[n+2],128==(192&i)&&128==(192&s)&&(c=(15&l)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:i=e[n+1],s=e[n+2],o=e[n+3],128==(192&i)&&128==(192&s)&&128==(192&o)&&(c=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&o)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),n+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var a="",r=0;for(;r<t;)a+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return a}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,a){return l(null,e,t,a)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,a){return function(e,t,a,r){return u(t),t<=0?o(e,t):void 0!==a?"string"==typeof r?o(e,t).fill(a,r):o(e,t).fill(a):o(e,t)}(null,e,t,a)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var a=e.length,r=t.length,n=0,i=Math.min(a,r);n<i;++n)if(e[n]!==t[n]){a=e[n],r=t[n];break}return a<r?-1:r<a?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var a;if(void 0===t)for(t=0,a=0;a<e.length;++a)t+=e[a].length;var r=c.allocUnsafe(t),n=0;for(a=0;a<e.length;++a){var s=e[a];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,n),n+=s.length}return r},c.byteLength=f,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):m.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",a=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,a).match(/.{2}/g).join(" "),this.length>a&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,a,r,n){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===a&&(a=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||a>e.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=a)return 0;if(r>=n)return-1;if(t>=a)return 1;if(this===e)return 0;for(var i=(n>>>=0)-(r>>>=0),s=(a>>>=0)-(t>>>=0),o=Math.min(i,s),l=this.slice(r,n),u=e.slice(t,a),d=0;d<o;++d)if(l[d]!==u[d]){i=l[d],s=u[d];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,a){return-1!==this.indexOf(e,t,a)},c.prototype.indexOf=function(e,t,a){return b(this,e,t,a,!0)},c.prototype.lastIndexOf=function(e,t,a){return b(this,e,t,a,!1)},c.prototype.write=function(e,t,a,r){if(void 0===t)r="utf8",a=this.length,t=0;else if(void 0===a&&"string"==typeof t)r=t,a=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(a)?(a|=0,void 0===r&&(r="utf8")):(r=a,a=void 0)}var n=this.length-t;if((void 0===a||a>n)&&(a=n),e.length>0&&(a<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return v(this,e,t,a);case"utf8":case"utf-8":return _(this,e,t,a);case"ascii":return w(this,e,t,a);case"latin1":case"binary":return x(this,e,t,a);case"base64":return k(this,e,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,a);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(e,t,a){var r="";a=Math.min(e.length,a);for(var n=t;n<a;++n)r+=String.fromCharCode(127&e[n]);return r}function A(e,t,a){var r="";a=Math.min(e.length,a);for(var n=t;n<a;++n)r+=String.fromCharCode(e[n]);return r}function M(e,t,a){var r=e.length;(!t||t<0)&&(t=0),(!a||a<0||a>r)&&(a=r);for(var n="",i=t;i<a;++i)n+=N(e[i]);return n}function T(e,t,a){for(var r=e.slice(t,a),n="",i=0;i<r.length;i+=2)n+=String.fromCharCode(r[i]+256*r[i+1]);return n}function j(e,t,a){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>a)throw new RangeError("Trying to access beyond buffer length")}function O(e,t,a,r,n,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<i)throw new RangeError('"value" argument is out of bounds');if(a+r>e.length)throw new RangeError("Index out of range")}function D(e,t,a,r){t<0&&(t=65535+t+1);for(var n=0,i=Math.min(e.length-a,2);n<i;++n)e[a+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function I(e,t,a,r){t<0&&(t=4294967295+t+1);for(var n=0,i=Math.min(e.length-a,4);n<i;++n)e[a+n]=t>>>8*(r?n:3-n)&255}function R(e,t,a,r,n,i){if(a+r>e.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function B(e,t,a,r,i){return i||R(e,0,a,4),n.write(e,t,a,r,23,4),a+4}function q(e,t,a,r,i){return i||R(e,0,a,8),n.write(e,t,a,r,52,8),a+8}c.prototype.slice=function(e,t){var a,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(a=this.subarray(e,t)).__proto__=c.prototype;else{var n=t-e;a=new c(n,void 0);for(var i=0;i<n;++i)a[i]=this[i+e]}return a},c.prototype.readUIntLE=function(e,t,a){e|=0,t|=0,a||j(e,t,this.length);for(var r=this[e],n=1,i=0;++i<t&&(n*=256);)r+=this[e+i]*n;return r},c.prototype.readUIntBE=function(e,t,a){e|=0,t|=0,a||j(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},c.prototype.readUInt8=function(e,t){return t||j(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||j(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||j(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,a){e|=0,t|=0,a||j(e,t,this.length);for(var r=this[e],n=1,i=0;++i<t&&(n*=256);)r+=this[e+i]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,a){e|=0,t|=0,a||j(e,t,this.length);for(var r=t,n=1,i=this[e+--r];r>0&&(n*=256);)i+=this[e+--r]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||j(e,2,this.length);var a=this[e]|this[e+1]<<8;return 32768&a?4294901760|a:a},c.prototype.readInt16BE=function(e,t){t||j(e,2,this.length);var a=this[e+1]|this[e]<<8;return 32768&a?4294901760|a:a},c.prototype.readInt32LE=function(e,t){return t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||j(e,4,this.length),n.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||j(e,4,this.length),n.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||j(e,8,this.length),n.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||j(e,8,this.length),n.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,a,r){(e=+e,t|=0,a|=0,r)||O(this,e,t,a,Math.pow(2,8*a)-1,0);var n=1,i=0;for(this[t]=255&e;++i<a&&(n*=256);)this[t+i]=e/n&255;return t+a},c.prototype.writeUIntBE=function(e,t,a,r){(e=+e,t|=0,a|=0,r)||O(this,e,t,a,Math.pow(2,8*a)-1,0);var n=a-1,i=1;for(this[t+n]=255&e;--n>=0&&(i*=256);)this[t+n]=e/i&255;return t+a},c.prototype.writeUInt8=function(e,t,a){return e=+e,t|=0,a||O(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,a){return e=+e,t|=0,a||O(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,a){return e=+e,t|=0,a||O(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,a){return e=+e,t|=0,a||O(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,a){return e=+e,t|=0,a||O(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,a,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*a-1);O(this,e,t,a,n-1,-n)}var i=0,s=1,o=0;for(this[t]=255&e;++i<a&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+a},c.prototype.writeIntBE=function(e,t,a,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*a-1);O(this,e,t,a,n-1,-n)}var i=a-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+a},c.prototype.writeInt8=function(e,t,a){return e=+e,t|=0,a||O(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,a){return e=+e,t|=0,a||O(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,a){return e=+e,t|=0,a||O(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,a){return e=+e,t|=0,a||O(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,a){return e=+e,t|=0,a||O(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,a){return B(this,e,t,!0,a)},c.prototype.writeFloatBE=function(e,t,a){return B(this,e,t,!1,a)},c.prototype.writeDoubleLE=function(e,t,a){return q(this,e,t,!0,a)},c.prototype.writeDoubleBE=function(e,t,a){return q(this,e,t,!1,a)},c.prototype.copy=function(e,t,a,r){if(a||(a=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<a&&(r=a),r===a)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-a&&(r=e.length-t+a);var n,i=r-a;if(this===e&&a<t&&t<r)for(n=i-1;n>=0;--n)e[n+t]=this[n+a];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(n=0;n<i;++n)e[n+t]=this[n+a];else Uint8Array.prototype.set.call(e,this.subarray(a,a+i),t);return i},c.prototype.fill=function(e,t,a,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,a=this.length):"string"==typeof a&&(r=a,a=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<a)throw new RangeError("Out of range index");if(a<=t)return this;var i;if(t>>>=0,a=void 0===a?this.length:a>>>0,e||(e=0),"number"==typeof e)for(i=t;i<a;++i)this[i]=e;else{var s=c.isBuffer(e)?e:F(new c(e,r).toString()),o=s.length;for(i=0;i<a-t;++i)this[i+t]=s[i%o]}return this};var L=/[^+\/0-9A-Za-z-_]/g;function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var a;t=t||1/0;for(var r=e.length,n=null,i=[],s=0;s<r;++s){if((a=e.charCodeAt(s))>55295&&a<57344){if(!n){if(a>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}n=a;continue}if(a<56320){(t-=3)>-1&&i.push(239,191,189),n=a;continue}a=65536+(n-55296<<10|a-56320)}else n&&(t-=3)>-1&&i.push(239,191,189);if(n=null,a<128){if((t-=1)<0)break;i.push(a)}else if(a<2048){if((t-=2)<0)break;i.push(a>>6|192,63&a|128)}else if(a<65536){if((t-=3)<0)break;i.push(a>>12|224,a>>6&63|128,63&a|128)}else{if(!(a<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}}return i}function U(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,a,r){for(var n=0;n<r&&!(n+a>=t.length||n>=e.length);++n)t[n+a]=e[n];return n}}).call(this,a(17))},function(e,t,a){var r=a(82)("wks"),n=a(54),i=a(4).Symbol,s="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=s&&i[e]||(s?i:n)("Symbol."+e))}).store=r},function(e,t,a){var r=a(34),n=Math.min;e.exports=function(e){return e>0?n(r(e),9007199254740991):0}},function(e,t){var a,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(a===setTimeout)return setTimeout(e,0);if((a===i||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a="function"==typeof setTimeout?setTimeout:i}catch(e){a=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,l=[],u=!1,d=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&h())}function h(){if(!u){var e=o(p);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];l.push(new f(e,t)),1!==l.length||u||o(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=m,n.addListener=m,n.once=m,n.off=m,n.removeListener=m,n.removeAllListeners=m,n.emit=m,n.prependListener=m,n.prependOnceListener=m,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,a){e.exports=!a(6)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,a){var r=a(3),n=a(312),i=a(36),s=Object.defineProperty;t.f=a(13)?Object.defineProperty:function(e,t,a){if(r(e),t=i(t,!0),r(a),n)try{return s(e,t,a)}catch(e){}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(e[t]=a.value),e}},function(e,t,a){(function(t){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a(398);var s=a(19),o=(a(1017),function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.dirname="",this.appname="",this.name="",this.slug="",this.link="",this.events=[],this.alerts=0,this.categories="",this.db_tables=[],this.default_html=0,this.browser_active=0}var a,r,o,c,l,u,d,p,h,f,m,g;return a=e,(r=[{key:"onlyOnActiveBrowser",value:function(e){return function(){if(this.app.BROWSER&&this.browser_active){var t=e.apply(this,arguments);return t}}}},{key:"onlyInBrowser",value:function(e){return function(){if(this.app.BROWSER){var t=e.apply(this,arguments);return t}}}},{key:"onlyOnServer",value:function(e){return function(){if(!this.app.BROWSER){var t=e.apply(this,arguments);return t}}}},{key:"installModule",value:(g=n(regeneratorRuntime.mark((function e(a){var r,n,i,o,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.app.BROWSER){e.next=2;break}return e.abrupt("return");case 2:if(r="".concat(t,"/../../mods/").concat(this.dirname,"/sql"),n=a.storage.returnFileSystem(),i=encodeURI(this.returnSlug()),null==n){e.next=24;break}if(!n.existsSync(s.normalize(r))){e.next=24;break}o=n.readdirSync(r).sort(),c=0;case 9:if(!(c<o.length)){e.next=24;break}return e.prev=10,l=s.join(r,o[c]),u=n.readFileSync(l,"utf8"),console.log("Creating database for: "+i),e.next=16,a.storage.executeDatabase(u,{},i);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),console.log(e.t0);case 21:c++,e.next=9;break;case 24:case"end":return e.stop()}}),e,this,[[10,18]])}))),function(e){return g.apply(this,arguments)})},{key:"initialize",value:(m=n(regeneratorRuntime.mark((function e(a){var r,n,i,o,c,l,u,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=function(e){a.connection.on(d.events[e],(function(t){d.receiveEvent(d.events[e],t)}))},n=0;n<this.events.length;n++)r(n);if(i="".concat(t,"/../../mods/").concat(this.dirname,"/sql"),null!=(o=a.storage.returnFileSystem())&&o.existsSync(s.normalize(i)))for(c=o.readdirSync(i),l=0;l<c.length;l++)u=(u=c[l].slice(0,-4)).replace(/\d+$/,""),this.db_tables.push(u);""==this.appname&&(this.appname=this.name);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"initializeHTML",value:function(e){}},{key:"attachEvents",value:function(e){}},{key:"render",value:function(e){}},{key:"onConfirmation",value:(f=n(regeneratorRuntime.mark((function e(t,a,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t,a,r){return f.apply(this,arguments)})},{key:"onNewBlock",value:function(e,t){}},{key:"onChainReorganization",value:function(e,t,a,r){}},{key:"onConnectionUnstable",value:function(e){}},{key:"onConnectionStable",value:function(e){}},{key:"onWalletReset",value:function(){}},{key:"onPeerHandshakeComplete",value:function(e,t){}},{key:"onConnectionStable",value:function(e,t){}},{key:"onConnectionUnstable",value:function(e,t){}},{key:"shouldAffixCallbackToModule",value:function(e){return e==this.name?1:0}},{key:"webServer",value:function(e,a,r){var n="".concat(t,"/../../mods/").concat(this.dirname,"/web"),i=e.storage.returnFileSystem();null!=i&&(i.existsSync(n)?a.use("/"+encodeURI(this.returnSlug()),r.static(n)):this.default_html&&a.use("/"+encodeURI(this.returnSlug()),r.static(t+"/../../lib/templates/html")))}},{key:"updateBlockchainSync",value:function(e,t,a){}},{key:"respondTo",value:function(){return null}},{key:"receiveEvent",value:function(e,t){}},{key:"sendEvent",value:function(e,t){this.app.connection.emit(e,t)}},{key:"handlePeerRequest",value:(h=n(regeneratorRuntime.mark((function e(t,a,r){var n,i,s,o,c,l,u,d,p,h,f,m,g,b,y,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=v.length>3&&void 0!==v[3]?v[3]:null,i=0;case 2:if(!(i<this.db_tables.length)){e.next=28;break}if(s=this.name.toLowerCase()+" load "+this.db_tables[i],a.request!==s){e.next=25;break}if(o=a.data.select,c=a.data.dbname,l=a.data.tablename,u=a.data.where,/^[a-z"`'=_*()\.\n\t\r ,0-9A-Z]+$/.test(o)){e.next=11;break}return e.abrupt("return");case 11:if(/^[a-z"`'=_()\. ,0-9A-Z]+$/.test(c)){e.next=13;break}return e.abrupt("return");case 13:if(/^[a-z"`'=_()\. ,0-9A-Z]+$/.test(l)){e.next=15;break}return e.abrupt("return");case 15:return d="SELECT ".concat(o," FROM ").concat(l),""!=u&&(d+=" WHERE ".concat(u)),p={},e.next=20,this.app.storage.queryDatabase(d,p,a.data.dbname);case 20:h=e.sent,(f={}).err="",f.rows=h,n(f);case 25:i++,e.next=2;break;case 28:if("rawSQL"!=a.request){e.next=40;break}if(a.data.module!=this.name){e.next=40;break}return m=a.data.sql,g={},e.next=34,this.app.storage.queryDatabase(m,g,a.data.dbname);case 34:return b=e.sent,(y={}).err="",y.rows=b,n(y),e.abrupt("return");case 40:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return h.apply(this,arguments)})},{key:"sendPeerDatabaseRequest",value:(p=n(regeneratorRuntime.mark((function e(t,a){var r,n,i,s,o,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>2&&void 0!==c[2]?c[2]:"",n=c.length>3&&void 0!==c[3]?c[3]:"",i=c.length>4&&void 0!==c[4]?c[4]:null,s=c.length>5&&void 0!==c[5]?c[5]:null,(o={}).request=t+" load "+a,o.data={},o.data.dbname=t,o.data.tablename=a,o.data.select=r,o.data.where=n,null==i?this.app.network.sendRequestWithCallback(o.request,o.data,(function(e){console.log("callback data1: "+JSON.stringify(e)),s(e)})):i.sendRequestWithCallback(o.request,o.data,(function(e){console.log("callback data2: "+JSON.stringify(e)),s(e)}));case 12:case"end":return e.stop()}}),e,this)}))),function(e,t){return p.apply(this,arguments)})},{key:"sendPeerDatabaseRequestWithFilter",value:(d=n(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:"",a=s.length>1&&void 0!==s[1]?s[1]:"",r=s.length>2&&void 0!==s[2]?s[2]:null,n=s.length>3&&void 0!==s[3]?s[3]:null,""!=a){e.next=6;break}return e.abrupt("return");case 6:if(""!=t){e.next=8;break}return e.abrupt("return");case 8:(i={}).request="rawSQL",i.data={},i.data.sql=a,i.data.module=t,i.data.dbname=t.toLowerCase(),this.sendPeerRequestWithFilter((function(){return i}),r,n);case 15:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"sendPeerRequestWithServiceFilter",value:(u=n(regeneratorRuntime.mark((function e(t,a){var r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.length>2&&void 0!==n[2]?n[2]:function(e){},this.sendPeerRequestWithFilter((function(){return a}),r,(function(e){if(e.peer.services)for(var a=0;a<e.peer.services.length;a++)if(e.peer.services[a].service===t)return 1}));case 2:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"sendPeerRequestWithFilter",value:(l=n(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:null,a=o.length>1&&void 0!==o[1]?o[1]:null,r=o.length>2&&void 0!==o[2]?o[2]:null,null!=(n=t())){e.next=6;break}return e.abrupt("return");case 6:if(i=[],null==r)i=this.app.network.peers;else for(s=0;s<this.app.network.peers.length;s++)r(this.app.network.peers[s])&&i.push(this.app.network.peers[s]);if(0!=i.length){e.next=10;break}return e.abrupt("return");case 10:i.forEach((function(e){e.sendRequestWithCallback(n.request,n.data,(function(e){null!=a&&a(e)}))}));case 11:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"sendPeerDatabaseRequestRaw",value:(c=n(regeneratorRuntime.mark((function e(t,a){var r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=i.length>2&&void 0!==i[2]?i[2]:null,(n={}).request="rawSQL",n.data={},n.data.sql=a,n.data.dbname=t,n.data.module=this.name,this.app.network.sendRequestWithCallback(n.request,n.data,(function(e){r(e)}));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"returnSlug",value:function(){return""!=this.slug||(this.appname?this.slug=this.appname.toLowerCase():this.slug=this.name.toLowerCase(),this.slug=this.slug.replace(/\t/g,"_")),this.slug}},{key:"returnLink",value:function(){return""!=this.link||(this.link="/"+this.returnSlug()),this.link}},{key:"returnServices",value:function(){return[]}},{key:"handleUrlParams",value:function(e){}},{key:"showAlert",value:function(){this.alerts++;try{var e="#"+this.returnSlug()+" > .redicon";document.querySelector(e).style.display="block"}catch(e){}}}])&&i(a.prototype,r),o&&i(a,o),e}());e.exports=o}).call(this,"/")},function(e,t,a){var r=a(37);e.exports=function(e){return Object(r(e))}},function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(e){"object"==typeof window&&(a=window)}e.exports=a},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,a){(function(e){function a(e,t){for(var a=0,r=e.length-1;r>=0;r--){var n=e[r];"."===n?e.splice(r,1):".."===n?(e.splice(r,1),a++):a&&(e.splice(r,1),a--)}if(t)for(;a--;a)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var a=[],r=0;r<e.length;r++)t(e[r],r,e)&&a.push(e[r]);return a}t.resolve=function(){for(var t="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,n="/"===s.charAt(0))}return(n?"/":"")+(t=a(r(t.split("/"),(function(e){return!!e})),!n).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),s="/"===n(e,-1);return(e=a(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,a){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var a=e.length-1;a>=0&&""===e[a];a--);return t>a?[]:e.slice(t,a-t+1)}e=t.resolve(e).substr(1),a=t.resolve(a).substr(1);for(var n=r(e.split("/")),i=r(a.split("/")),s=Math.min(n.length,i.length),o=s,c=0;c<s;c++)if(n[c]!==i[c]){o=c;break}var l=[];for(c=o;c<n.length;c++)l.push("..");return(l=l.concat(i.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),a=47===t,r=-1,n=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!n){r=i;break}}else n=!1;return-1===r?a?"/":".":a&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var a=function(e){"string"!=typeof e&&(e+="");var t,a=0,r=-1,n=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!n){a=t+1;break}}else-1===r&&(n=!1,r=t+1);return-1===r?"":e.slice(a,r)}(e);return t&&a.substr(-1*t.length)===t&&(a=a.substr(0,a.length-t.length)),a},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,a=0,r=-1,n=!0,i=0,s=e.length-1;s>=0;--s){var o=e.charCodeAt(s);if(47!==o)-1===r&&(n=!1,r=s+1),46===o?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!n){a=s+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===a+1?"":e.slice(t,r)};var n="b"==="ab".substr(-1)?function(e,t,a){return e.substr(t,a)}:function(e,t,a){return t<0&&(t=e.length+t),e.substr(t,a)}}).call(this,a(12))},function(e,t){function a(e,t){if(!e)throw new Error(t||"Assertion failed")}e.exports=a,a.equal=function(e,t,a){if(e!=t)throw new Error(a||"Assertion failed: "+e+" != "+t)}},function(e,t,a){var r=a(14),n=a(53);e.exports=a(13)?function(e,t,a){return r.f(e,t,n(1,a))}:function(e,t,a){return e[t]=a,e}},function(e,t,a){var r=a(4),n=a(21),i=a(24),s=a(54)("src"),o=a(680),c=(""+o).split("toString");a(31).inspectSource=function(e){return o.call(e)},(e.exports=function(e,t,a,o){var l="function"==typeof a;l&&(i(a,"name")||n(a,"name",t)),e[t]!==a&&(l&&(i(a,s)||n(a,s,e[t]?""+e[t]:c.join(String(t)))),e===r?e[t]=a:o?e[t]?e[t]=a:n(e,t,a):(delete e[t],n(e,t,a)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[s]||o.call(this)}))},function(e,t,a){var r=a(0),n=a(6),i=a(37),s=/"/g,o=function(e,t,a,r){var n=String(i(e)),o="<"+t;return""!==a&&(o+=" "+a+'="'+String(r).replace(s,"&quot;")+'"'),o+">"+n+"</"+t+">"};e.exports=function(e,t){var a={};a[e]=t(o),r(r.P+r.F*n((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3})),"String",a)}},function(e,t){var a={}.hasOwnProperty;e.exports=function(e,t){return a.call(e,t)}},function(e,t,a){var r=a(83),n=a(37);e.exports=function(e){return r(n(e))}},function(e,t,a){var r=a(84),n=a(53),i=a(25),s=a(36),o=a(24),c=a(312),l=Object.getOwnPropertyDescriptor;t.f=a(13)?l:function(e,t){if(e=i(e),t=s(t,!0),c)try{return l(e,t)}catch(e){}if(o(e,t))return n(!r.f.call(e,t),e[t])}},function(e,t,a){var r=a(24),n=a(16),i=a(138)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=n(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?s:null}},function(e,t,a){"use strict";var r=t,n=a(46),i=a(20),s=a(119);r.assert=i,r.toArray=s.toArray,r.zero2=s.zero2,r.toHex=s.toHex,r.encode=s.encode,r.getNAF=function(e,t,a){var r=new Array(Math.max(e.bitLength(),a)+1);r.fill(0);for(var n=1<<t+1,i=e.clone(),s=0;s<r.length;s++){var o,c=i.andln(n-1);i.isOdd()?(o=c>(n>>1)-1?(n>>1)-c:c,i.isubn(o)):o=0,r[s]=o,i.iushrn(1)}return r},r.getJSF=function(e,t){var a=[[],[]];e=e.clone(),t=t.clone();for(var r=0,n=0;e.cmpn(-r)>0||t.cmpn(-n)>0;){var i,s,o,c=e.andln(3)+r&3,l=t.andln(3)+n&3;if(3===c&&(c=-1),3===l&&(l=-1),0==(1&c))i=0;else i=3!==(o=e.andln(7)+r&7)&&5!==o||2!==l?c:-c;if(a[0].push(i),0==(1&l))s=0;else s=3!==(o=t.andln(7)+n&7)&&5!==o||2!==c?l:-l;a[1].push(s),2*r===i+1&&(r=1-r),2*n===s+1&&(n=1-n),e.iushrn(1),t.iushrn(1)}return a},r.cachedProperty=function(e,t,a){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=a.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new n(e,"hex","le")}},function(e,t,a){"use strict";var r=t,n=a(8),i=a(20),s=a(119);r.assert=i,r.toArray=s.toArray,r.zero2=s.zero2,r.toHex=s.toHex,r.encode=s.encode,r.getNAF=function(e,t,a){var r=new Array(Math.max(e.bitLength(),a)+1);r.fill(0);for(var n=1<<t+1,i=e.clone(),s=0;s<r.length;s++){var o,c=i.andln(n-1);i.isOdd()?(o=c>(n>>1)-1?(n>>1)-c:c,i.isubn(o)):o=0,r[s]=o,i.iushrn(1)}return r},r.getJSF=function(e,t){var a=[[],[]];e=e.clone(),t=t.clone();for(var r=0,n=0;e.cmpn(-r)>0||t.cmpn(-n)>0;){var i,s,o,c=e.andln(3)+r&3,l=t.andln(3)+n&3;if(3===c&&(c=-1),3===l&&(l=-1),0==(1&c))i=0;else i=3!==(o=e.andln(7)+r&7)&&5!==o||2!==l?c:-c;if(a[0].push(i),0==(1&l))s=0;else s=3!==(o=t.andln(7)+n&7)&&5!==o||2!==c?l:-l;a[1].push(s),2*r===i+1&&(r=1-r),2*n===s+1&&(n=1-n),e.iushrn(1),t.iushrn(1)}return a},r.cachedProperty=function(e,t,a){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=a.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new n(e,"hex","le")}},function(e,t,a){"use strict";var r=t,n=a(8),i=a(20),s=a(119);r.assert=i,r.toArray=s.toArray,r.zero2=s.zero2,r.toHex=s.toHex,r.encode=s.encode,r.getNAF=function(e,t,a){var r=new Array(Math.max(e.bitLength(),a)+1);r.fill(0);for(var n=1<<t+1,i=e.clone(),s=0;s<r.length;s++){var o,c=i.andln(n-1);i.isOdd()?(o=c>(n>>1)-1?(n>>1)-c:c,i.isubn(o)):o=0,r[s]=o,i.iushrn(1)}return r},r.getJSF=function(e,t){var a=[[],[]];e=e.clone(),t=t.clone();for(var r=0,n=0;e.cmpn(-r)>0||t.cmpn(-n)>0;){var i,s,o,c=e.andln(3)+r&3,l=t.andln(3)+n&3;if(3===c&&(c=-1),3===l&&(l=-1),0==(1&c))i=0;else i=3!==(o=e.andln(7)+r&7)&&5!==o||2!==l?c:-c;if(a[0].push(i),0==(1&l))s=0;else s=3!==(o=t.andln(7)+n&7)&&5!==o||2!==c?l:-l;a[1].push(s),2*r===i+1&&(r=1-r),2*n===s+1&&(n=1-n),e.iushrn(1),t.iushrn(1)}return a},r.cachedProperty=function(e,t,a){var r="_"+t;e.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=a.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new n(e,"hex","le")}},function(e,t){var a=e.exports={version:"2.6.10"};"number"==typeof __e&&(__e=a)},function(e,t,a){var r=a(18);e.exports=function(e,t,a){if(r(e),void 0===t)return e;switch(a){case 1:return function(a){return e.call(t,a)};case 2:return function(a,r){return e.call(t,a,r)};case 3:return function(a,r,n){return e.call(t,a,r,n)}}return function(){return e.apply(t,arguments)}}},function(e,t){var a={}.toString;e.exports=function(e){return a.call(e).slice(8,-1)}},function(e,t){var a=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:a)(e)}},function(e,t,a){"use strict";var r=a(6);e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},function(e,t,a){var r=a(7);e.exports=function(e,t){if(!r(e))return e;var a,n;if(t&&"function"==typeof(a=e.toString)&&!r(n=a.call(e)))return n;if("function"==typeof(a=e.valueOf)&&!r(n=a.call(e)))return n;if(!t&&"function"==typeof(a=e.toString)&&!r(n=a.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,a){var r=a(0),n=a(31),i=a(6);e.exports=function(e,t){var a=(n.Object||{})[e]||Object[e],s={};s[e]=t(a),r(r.S+r.F*i((function(){a(1)})),"Object",s)}},function(e,t,a){var r=a(32),n=a(83),i=a(16),s=a(11),o=a(154);e.exports=function(e,t){var a=1==e,c=2==e,l=3==e,u=4==e,d=6==e,p=5==e||d,h=t||o;return function(t,o,f){for(var m,g,b=i(t),y=n(b),v=r(o,f,3),_=s(y.length),w=0,x=a?h(t,_):c?h(t,0):void 0;_>w;w++)if((p||w in y)&&(g=v(m=y[w],w,b),e))if(a)x[w]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:x.push(m)}else if(u)return!1;return d?-1:l||u?u:x}}},function(e,t,a){var r;!function(n){"use strict";var i,s="[big.js] ",o=s+"Invalid ",c=o+"decimal places",l={},u=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function d(e,t,a,r){var n=e.c,i=e.e+t+1;if(i<n.length){if(1===a)r=n[i]>=5;else if(2===a)r=n[i]>5||5==n[i]&&(r||i<0||void 0!==n[i+1]||1&n[i-1]);else if(3===a)r=r||!!n[0];else if(r=!1,0!==a)throw Error("[big.js] Invalid rounding mode");if(i<1)n.length=1,r?(e.e=-t,n[0]=1):n[0]=e.e=0;else{if(n.length=i--,r)for(;++n[i]>9;)n[i]=0,i--||(++e.e,n.unshift(1));for(i=n.length;!n[--i];)n.pop()}}else if(a<0||a>3||a!==~~a)throw Error("[big.js] Invalid rounding mode");return e}function p(e,t,a,r){var n,i,s=e.constructor,l=!e.c[0];if(void 0!==a){if(a!==~~a||a<(3==t)||a>1e6)throw Error(3==t?o+"precision":c);for(a=r-(e=new s(e)).e,e.c.length>++r&&d(e,a,s.RM),2==t&&(r=e.e+a+1);e.c.length<r;)e.c.push(0)}if(n=e.e,a=(i=e.c.join("")).length,2!=t&&(1==t||3==t&&r<=n||n<=s.NE||n>=s.PE))i=i.charAt(0)+(a>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>a)for(n-=a;n--;)i+="0";else n<a&&(i=i.slice(0,n)+"."+i.slice(n));else a>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&(!l||4==t)?"-"+i:i}l.abs=function(){var e=new this.constructor(this);return e.s=1,e},l.cmp=function(e){var t,a=this,r=a.c,n=(e=new a.constructor(e)).c,i=a.s,s=e.s,o=a.e,c=e.e;if(!r[0]||!n[0])return r[0]?i:n[0]?-s:0;if(i!=s)return i;if(t=i<0,o!=c)return o>c^t?1:-1;for(s=(o=r.length)<(c=n.length)?o:c,i=-1;++i<s;)if(r[i]!=n[i])return r[i]>n[i]^t?1:-1;return o==c?0:o>c^t?1:-1},l.div=function(e){var t=this,a=t.constructor,r=t.c,n=(e=new a(e)).c,i=t.s==e.s?1:-1,s=a.DP;if(s!==~~s||s<0||s>1e6)throw Error(c);if(!n[0])throw Error("[big.js] Division by zero");if(!r[0])return new a(0*i);var o,l,u,p,h,f=n.slice(),m=o=n.length,g=r.length,b=r.slice(0,o),y=b.length,v=e,_=v.c=[],w=0,x=s+(v.e=t.e-e.e)+1;for(v.s=i,i=x<0?0:x,f.unshift(0);y++<o;)b.push(0);do{for(u=0;u<10;u++){if(o!=(y=b.length))p=o>y?1:-1;else for(h=-1,p=0;++h<o;)if(n[h]!=b[h]){p=n[h]>b[h]?1:-1;break}if(!(p<0))break;for(l=y==o?n:f;y;){if(b[--y]<l[y]){for(h=y;h&&!b[--h];)b[h]=9;--b[h],b[y]+=10}b[y]-=l[y]}for(;!b[0];)b.shift()}_[w++]=p?u:++u,b[0]&&p?b[y]=r[m]||0:b=[r[m]]}while((m++<g||void 0!==b[0])&&i--);return _[0]||1==w||(_.shift(),v.e--),w>x&&d(v,s,a.RM,void 0!==b[0]),v},l.eq=function(e){return!this.cmp(e)},l.gt=function(e){return this.cmp(e)>0},l.gte=function(e){return this.cmp(e)>-1},l.lt=function(e){return this.cmp(e)<0},l.lte=function(e){return this.cmp(e)<1},l.minus=l.sub=function(e){var t,a,r,n,i=this,s=i.constructor,o=i.s,c=(e=new s(e)).s;if(o!=c)return e.s=-c,i.plus(e);var l=i.c.slice(),u=i.e,d=e.c,p=e.e;if(!l[0]||!d[0])return d[0]?(e.s=-c,e):new s(l[0]?i:0);if(o=u-p){for((n=o<0)?(o=-o,r=l):(p=u,r=d),r.reverse(),c=o;c--;)r.push(0);r.reverse()}else for(a=((n=l.length<d.length)?l:d).length,o=c=0;c<a;c++)if(l[c]!=d[c]){n=l[c]<d[c];break}if(n&&(r=l,l=d,d=r,e.s=-e.s),(c=(a=d.length)-(t=l.length))>0)for(;c--;)l[t++]=0;for(c=t;a>o;){if(l[--a]<d[a]){for(t=a;t&&!l[--t];)l[t]=9;--l[t],l[a]+=10}l[a]-=d[a]}for(;0===l[--c];)l.pop();for(;0===l[0];)l.shift(),--p;return l[0]||(e.s=1,l=[p=0]),e.c=l,e.e=p,e},l.mod=function(e){var t,a=this,r=a.constructor,n=a.s,i=(e=new r(e)).s;if(!e.c[0])throw Error("[big.js] Division by zero");return a.s=e.s=1,t=1==e.cmp(a),a.s=n,e.s=i,t?new r(a):(n=r.DP,i=r.RM,r.DP=r.RM=0,a=a.div(e),r.DP=n,r.RM=i,this.minus(a.times(e)))},l.plus=l.add=function(e){var t,a=this,r=a.constructor,n=a.s,i=(e=new r(e)).s;if(n!=i)return e.s=-i,a.minus(e);var s=a.e,o=a.c,c=e.e,l=e.c;if(!o[0]||!l[0])return l[0]?e:new r(o[0]?a:0*n);if(o=o.slice(),n=s-c){for(n>0?(c=s,t=l):(n=-n,t=o),t.reverse();n--;)t.push(0);t.reverse()}for(o.length-l.length<0&&(t=l,l=o,o=t),n=l.length,i=0;n;o[n]%=10)i=(o[--n]=o[n]+l[n]+i)/10|0;for(i&&(o.unshift(i),++c),n=o.length;0===o[--n];)o.pop();return e.c=o,e.e=c,e},l.pow=function(e){var t=this,a=new t.constructor(1),r=a,n=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(o+"exponent");for(n&&(e=-e);1&e&&(r=r.times(t)),e>>=1;)t=t.times(t);return n?a.div(r):r},l.round=function(e,t){var a=this.constructor;if(void 0===e)e=0;else if(e!==~~e||e<-1e6||e>1e6)throw Error(c);return d(new a(this),e,void 0===t?a.RM:t)},l.sqrt=function(){var e,t,a,r=this,n=r.constructor,i=r.s,o=r.e,c=new n(.5);if(!r.c[0])return new n(r);if(i<0)throw Error(s+"No square root");0===(i=Math.sqrt(r+""))||i===1/0?((t=r.c.join("")).length+o&1||(t+="0"),o=((o+1)/2|0)-(o<0||1&o),e=new n(((i=Math.sqrt(t))==1/0?"1e":(i=i.toExponential()).slice(0,i.indexOf("e")+1))+o)):e=new n(i),o=e.e+(n.DP+=4);do{a=e,e=c.times(a.plus(r.div(a)))}while(a.c.slice(0,o).join("")!==e.c.slice(0,o).join(""));return d(e,n.DP-=4,n.RM)},l.times=l.mul=function(e){var t,a=this,r=a.constructor,n=a.c,i=(e=new r(e)).c,s=n.length,o=i.length,c=a.e,l=e.e;if(e.s=a.s==e.s?1:-1,!n[0]||!i[0])return new r(0*e.s);for(e.e=c+l,s<o&&(t=n,n=i,i=t,l=s,s=o,o=l),t=new Array(l=s+o);l--;)t[l]=0;for(c=o;c--;){for(o=0,l=s+c;l>c;)o=t[l]+i[c]*n[l-c-1]+o,t[l--]=o%10,o=o/10|0;t[l]=(t[l]+o)%10}for(o?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e},l.toExponential=function(e){return p(this,1,e,e)},l.toFixed=function(e){return p(this,2,e,this.e+e)},l.toPrecision=function(e){return p(this,3,e,e-1)},l.toString=function(){return p(this)},l.valueOf=l.toJSON=function(){return p(this,4)},(i=function e(){function t(a){var r=this;if(!(r instanceof t))return void 0===a?e():new t(a);a instanceof t?(r.s=a.s,r.e=a.e,r.c=a.c.slice()):function(e,t){var a,r,n;if(0===t&&1/t<0)t="-0";else if(!u.test(t+=""))throw Error(o+"number");e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(a=t.indexOf("."))>-1&&(t=t.replace(".",""));(r=t.search(/e/i))>0?(a<0&&(a=r),a+=+t.slice(r+1),t=t.substring(0,r)):a<0&&(a=t.length);for(n=t.length,r=0;r<n&&"0"==t.charAt(r);)++r;if(r==n)e.c=[e.e=0];else{for(;n>0&&"0"==t.charAt(--n););for(e.e=a-r-1,e.c=[],a=0;r<=n;)e.c[a++]=+t.charAt(r++)}}(r,a),r.constructor=t}return t.prototype=l,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.version="5.2.2",t}()).default=i.Big=i,void 0===(r=function(){return i}.call(t,a,t,e))||(e.exports=r)}()},function(e,t,a){"use strict";var r=a(20),n=a(1);function i(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function s(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function o(e){return 1===e.length?"0"+e:e}function c(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=n,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var a=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)a.push(parseInt(e[n]+e[n+1],16))}else for(var r=0,n=0;n<e.length;n++){var s=e.charCodeAt(n);s<128?a[r++]=s:s<2048?(a[r++]=s>>6|192,a[r++]=63&s|128):i(e,n)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++n)),a[r++]=s>>18|240,a[r++]=s>>12&63|128,a[r++]=s>>6&63|128,a[r++]=63&s|128):(a[r++]=s>>12|224,a[r++]=s>>6&63|128,a[r++]=63&s|128)}else for(n=0;n<e.length;n++)a[n]=0|e[n];return a},t.toHex=function(e){for(var t="",a=0;a<e.length;a++)t+=o(e[a].toString(16));return t},t.htonl=s,t.toHex32=function(e,t){for(var a="",r=0;r<e.length;r++){var n=e[r];"little"===t&&(n=s(n)),a+=c(n.toString(16))}return a},t.zero2=o,t.zero8=c,t.join32=function(e,t,a,n){var i=a-t;r(i%4==0);for(var s=new Array(i/4),o=0,c=t;o<s.length;o++,c+=4){var l;l="big"===n?e[c]<<24|e[c+1]<<16|e[c+2]<<8|e[c+3]:e[c+3]<<24|e[c+2]<<16|e[c+1]<<8|e[c],s[o]=l>>>0}return s},t.split32=function(e,t){for(var a=new Array(4*e.length),r=0,n=0;r<e.length;r++,n+=4){var i=e[r];"big"===t?(a[n]=i>>>24,a[n+1]=i>>>16&255,a[n+2]=i>>>8&255,a[n+3]=255&i):(a[n+3]=i>>>24,a[n+2]=i>>>16&255,a[n+1]=i>>>8&255,a[n]=255&i)}return a},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,a){return e+t+a>>>0},t.sum32_4=function(e,t,a,r){return e+t+a+r>>>0},t.sum32_5=function(e,t,a,r,n){return e+t+a+r+n>>>0},t.sum64=function(e,t,a,r){var n=e[t],i=r+e[t+1]>>>0,s=(i<r?1:0)+a+n;e[t]=s>>>0,e[t+1]=i},t.sum64_hi=function(e,t,a,r){return(t+r>>>0<t?1:0)+e+a>>>0},t.sum64_lo=function(e,t,a,r){return t+r>>>0},t.sum64_4_hi=function(e,t,a,r,n,i,s,o){var c=0,l=t;return c+=(l=l+r>>>0)<t?1:0,c+=(l=l+i>>>0)<i?1:0,e+a+n+s+(c+=(l=l+o>>>0)<o?1:0)>>>0},t.sum64_4_lo=function(e,t,a,r,n,i,s,o){return t+r+i+o>>>0},t.sum64_5_hi=function(e,t,a,r,n,i,s,o,c,l){var u=0,d=t;return u+=(d=d+r>>>0)<t?1:0,u+=(d=d+i>>>0)<i?1:0,u+=(d=d+o>>>0)<o?1:0,e+a+n+s+c+(u+=(d=d+l>>>0)<l?1:0)>>>0},t.sum64_5_lo=function(e,t,a,r,n,i,s,o,c,l){return t+r+i+o+l>>>0},t.rotr64_hi=function(e,t,a){return(t<<32-a|e>>>a)>>>0},t.rotr64_lo=function(e,t,a){return(e<<32-a|t>>>a)>>>0},t.shr64_hi=function(e,t,a){return e>>>a},t.shr64_lo=function(e,t,a){return(e<<32-a|t>>>a)>>>0}},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(1130),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.closebox=!0}var t,a,i;return t=e,(a=[{key:"render",value:function(e,t){document.querySelector(".saito-overlay-backdrop")||e.browser.addElementToDom(n(this.closebox))}},{key:"attachEvents",value:function(e,t){}},{key:"showOverlay",value:function(e,t,a){var r=this,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.render(e,t);var i=this,s=document.querySelector(".saito-overlay"),o=document.querySelector(".saito-overlay-backdrop"),c=document.querySelector(".saito-overlay-closebox");s.innerHTML=c?c.outerHTML+a:a,s.style.display="block",o.style.display="block",o.onclick=function(e){i.hideOverlay(n)},(c=document.querySelector(".saito-overlay-closebox"))&&(c.style.display="block",c.onclick=function(e){r.hideOverlay(n)})}},{key:"hideOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.querySelector(".saito-overlay"),a=document.querySelector(".saito-overlay-backdrop"),r=document.querySelector(".saito-overlay-closebox");t.style.display="none",a.style.display="none",r&&(r.style.display="none"),null!=e&&e()}}])&&r(t.prototype,a),i&&r(t,i),e}();e.exports=i},function(e,t,a){"use strict";if(a(13)){var r=a(48),n=a(4),i=a(6),s=a(0),o=a(111),c=a(162),l=a(32),u=a(60),d=a(53),p=a(21),h=a(62),f=a(34),m=a(11),g=a(340),b=a(56),y=a(36),v=a(24),_=a(70),w=a(7),x=a(16),k=a(151),S=a(57),P=a(27),E=a(58).f,C=a(153),A=a(54),M=a(10),T=a(39),j=a(101),O=a(86),D=a(156),I=a(72),R=a(106),B=a(59),q=a(155),L=a(329),N=a(14),F=a(26),U=N.f,$=F.f,z=n.RangeError,H=n.TypeError,G=n.Uint8Array,K=Array.prototype,W=c.ArrayBuffer,V=c.DataView,Y=T(0),J=T(2),X=T(3),Q=T(4),Z=T(5),ee=T(6),te=j(!0),ae=j(!1),re=D.values,ne=D.keys,ie=D.entries,se=K.lastIndexOf,oe=K.reduce,ce=K.reduceRight,le=K.join,ue=K.sort,de=K.slice,pe=K.toString,he=K.toLocaleString,fe=M("iterator"),me=M("toStringTag"),ge=A("typed_constructor"),be=A("def_constructor"),ye=o.CONSTR,ve=o.TYPED,_e=o.VIEW,we=T(1,(function(e,t){return Ee(O(e,e[be]),t)})),xe=i((function(){return 1===new G(new Uint16Array([1]).buffer)[0]})),ke=!!G&&!!G.prototype.set&&i((function(){new G(1).set({})})),Se=function(e,t){var a=f(e);if(a<0||a%t)throw z("Wrong offset!");return a},Pe=function(e){if(w(e)&&ve in e)return e;throw H(e+" is not a typed array!")},Ee=function(e,t){if(!w(e)||!(ge in e))throw H("It is not a typed array constructor!");return new e(t)},Ce=function(e,t){return Ae(O(e,e[be]),t)},Ae=function(e,t){for(var a=0,r=t.length,n=Ee(e,r);r>a;)n[a]=t[a++];return n},Me=function(e,t,a){U(e,t,{get:function(){return this._d[a]}})},Te=function(e){var t,a,r,n,i,s,o=x(e),c=arguments.length,u=c>1?arguments[1]:void 0,d=void 0!==u,p=C(o);if(null!=p&&!k(p)){for(s=p.call(o),r=[],t=0;!(i=s.next()).done;t++)r.push(i.value);o=r}for(d&&c>2&&(u=l(u,arguments[2],2)),t=0,a=m(o.length),n=Ee(this,a);a>t;t++)n[t]=d?u(o[t],t):o[t];return n},je=function(){for(var e=0,t=arguments.length,a=Ee(this,t);t>e;)a[e]=arguments[e++];return a},Oe=!!G&&i((function(){he.call(new G(1))})),De=function(){return he.apply(Oe?de.call(Pe(this)):Pe(this),arguments)},Ie={copyWithin:function(e,t){return L.call(Pe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return Q(Pe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return q.apply(Pe(this),arguments)},filter:function(e){return Ce(this,J(Pe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return Z(Pe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return ee(Pe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){Y(Pe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ae(Pe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return te(Pe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return le.apply(Pe(this),arguments)},lastIndexOf:function(e){return se.apply(Pe(this),arguments)},map:function(e){return we(Pe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return oe.apply(Pe(this),arguments)},reduceRight:function(e){return ce.apply(Pe(this),arguments)},reverse:function(){for(var e,t=Pe(this).length,a=Math.floor(t/2),r=0;r<a;)e=this[r],this[r++]=this[--t],this[t]=e;return this},some:function(e){return X(Pe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return ue.call(Pe(this),e)},subarray:function(e,t){var a=Pe(this),r=a.length,n=b(e,r);return new(O(a,a[be]))(a.buffer,a.byteOffset+n*a.BYTES_PER_ELEMENT,m((void 0===t?r:b(t,r))-n))}},Re=function(e,t){return Ce(this,de.call(Pe(this),e,t))},Be=function(e){Pe(this);var t=Se(arguments[1],1),a=this.length,r=x(e),n=m(r.length),i=0;if(n+t>a)throw z("Wrong length!");for(;i<n;)this[t+i]=r[i++]},qe={entries:function(){return ie.call(Pe(this))},keys:function(){return ne.call(Pe(this))},values:function(){return re.call(Pe(this))}},Le=function(e,t){return w(e)&&e[ve]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ne=function(e,t){return Le(e,t=y(t,!0))?d(2,e[t]):$(e,t)},Fe=function(e,t,a){return!(Le(e,t=y(t,!0))&&w(a)&&v(a,"value"))||v(a,"get")||v(a,"set")||a.configurable||v(a,"writable")&&!a.writable||v(a,"enumerable")&&!a.enumerable?U(e,t,a):(e[t]=a.value,e)};ye||(F.f=Ne,N.f=Fe),s(s.S+s.F*!ye,"Object",{getOwnPropertyDescriptor:Ne,defineProperty:Fe}),i((function(){pe.call({})}))&&(pe=he=function(){return le.call(this)});var Ue=h({},Ie);h(Ue,qe),p(Ue,fe,qe.values),h(Ue,{slice:Re,set:Be,constructor:function(){},toString:pe,toLocaleString:De}),Me(Ue,"buffer","b"),Me(Ue,"byteOffset","o"),Me(Ue,"byteLength","l"),Me(Ue,"length","e"),U(Ue,me,{get:function(){return this[ve]}}),e.exports=function(e,t,a,c){var l=e+((c=!!c)?"Clamped":"")+"Array",d="get"+e,h="set"+e,f=n[l],b=f||{},y=f&&P(f),v=!f||!o.ABV,x={},k=f&&f.prototype,C=function(e,a){U(e,a,{get:function(){return function(e,a){var r=e._d;return r.v[d](a*t+r.o,xe)}(this,a)},set:function(e){return function(e,a,r){var n=e._d;c&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),n.v[h](a*t+n.o,r,xe)}(this,a,e)},enumerable:!0})};v?(f=a((function(e,a,r,n){u(e,f,l,"_d");var i,s,o,c,d=0,h=0;if(w(a)){if(!(a instanceof W||"ArrayBuffer"==(c=_(a))||"SharedArrayBuffer"==c))return ve in a?Ae(f,a):Te.call(f,a);i=a,h=Se(r,t);var b=a.byteLength;if(void 0===n){if(b%t)throw z("Wrong length!");if((s=b-h)<0)throw z("Wrong length!")}else if((s=m(n)*t)+h>b)throw z("Wrong length!");o=s/t}else o=g(a),i=new W(s=o*t);for(p(e,"_d",{b:i,o:h,l:s,e:o,v:new V(i)});d<o;)C(e,d++)})),k=f.prototype=S(Ue),p(k,"constructor",f)):i((function(){f(1)}))&&i((function(){new f(-1)}))&&R((function(e){new f,new f(null),new f(1.5),new f(e)}),!0)||(f=a((function(e,a,r,n){var i;return u(e,f,l),w(a)?a instanceof W||"ArrayBuffer"==(i=_(a))||"SharedArrayBuffer"==i?void 0!==n?new b(a,Se(r,t),n):void 0!==r?new b(a,Se(r,t)):new b(a):ve in a?Ae(f,a):Te.call(f,a):new b(g(a))})),Y(y!==Function.prototype?E(b).concat(E(y)):E(b),(function(e){e in f||p(f,e,b[e])})),f.prototype=k,r||(k.constructor=f));var A=k[fe],M=!!A&&("values"==A.name||null==A.name),T=qe.values;p(f,ge,!0),p(k,ve,l),p(k,_e,!0),p(k,be,f),(c?new f(1)[me]==l:me in k)||U(k,me,{get:function(){return l}}),x[l]=f,s(s.G+s.W+s.F*(f!=b),x),s(s.S,l,{BYTES_PER_ELEMENT:t}),s(s.S+s.F*i((function(){b.of.call(f,1)})),l,{from:Te,of:je}),"BYTES_PER_ELEMENT"in k||p(k,"BYTES_PER_ELEMENT",t),s(s.P,l,Ie),B(l),s(s.P+s.F*ke,l,{set:Be}),s(s.P+s.F*!M,l,qe),r||k.toString==pe||(k.toString=pe),s(s.P+s.F*i((function(){new f(1).slice()})),l,{slice:Re}),s(s.P+s.F*(i((function(){return[1,2].toLocaleString()!=new f([1,2]).toLocaleString()}))||!i((function(){k.toLocaleString.call([1,2])}))),l,{toLocaleString:De}),I[l]=M?A:T,r||M||p(k,fe,T)}}else e.exports=function(){}},function(e,t,a){var r=a(335),n=a(0),i=a(82)("metadata"),s=i.store||(i.store=new(a(338))),o=function(e,t,a){var n=s.get(e);if(!n){if(!a)return;s.set(e,n=new r)}var i=n.get(t);if(!i){if(!a)return;n.set(t,i=new r)}return i};e.exports={store:s,map:o,has:function(e,t,a){var r=o(t,a,!1);return void 0!==r&&r.has(e)},get:function(e,t,a){var r=o(t,a,!1);return void 0===r?void 0:r.get(e)},set:function(e,t,a,r){o(a,r,!0).set(e,t)},keys:function(e,t){var a=o(e,t,!1),r=[];return a&&a.forEach((function(e,t){r.push(t)})),r},key:function(e){return void 0===e||"symbol"==typeof e?e:String(e)},exp:function(e){n(n.S,"Reflect",e)}}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}}},function(e,t,a){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}function i(e,t,a){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(a=t,t=10),this._init(e||0,t||10,a||"be"))}var s;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{s=a(939).Buffer}catch(e){}function o(e,t,a){for(var r=0,n=Math.min(e.length,a),i=t;i<n;i++){var s=e.charCodeAt(i)-48;r<<=4,r|=s>=49&&s<=54?s-49+10:s>=17&&s<=22?s-17+10:15&s}return r}function c(e,t,a,r){for(var n=0,i=Math.min(e.length,a),s=t;s<i;s++){var o=e.charCodeAt(s)-48;n*=r,n+=o>=49?o-49+10:o>=17?o-17+10:o}return n}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,a){if("number"==typeof e)return this._initNumber(e,t,a);if("object"==typeof e)return this._initArray(e,t,a);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&n++,16===t?this._parseHex(e,n):this._parseBase(e,t,n),"-"===e[0]&&(this.negative=1),this.strip(),"le"===a&&this._initArray(this.toArray(),t,a)},i.prototype._initNumber=function(e,t,a){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===a&&this._initArray(this.toArray(),t,a)},i.prototype._initArray=function(e,t,a){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s,o=0;if("be"===a)for(n=e.length-1,i=0;n>=0;n-=3)s=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[i]|=s<<o&67108863,this.words[i+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);else if("le"===a)for(n=0,i=0;n<e.length;n+=3)s=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[i]|=s<<o&67108863,this.words[i+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);return this.strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r,n,i=0;for(a=e.length-6,r=0;a>=t;a-=6)n=o(e,a,a+6),this.words[r]|=n<<i&67108863,this.words[r+1]|=n>>>26-i&4194303,(i+=24)>=26&&(i-=26,r++);a+6!==t&&(n=o(e,t,a+6),this.words[r]|=n<<i&67108863,this.words[r+1]|=n>>>26-i&4194303),this.strip()},i.prototype._parseBase=function(e,t,a){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=t)r++;r--,n=n/t|0;for(var i=e.length-a,s=i%r,o=Math.min(i,i-s)+a,l=0,u=a;u<o;u+=r)l=c(e,u,u+r,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=c(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(e,t,a){a.negative=t.negative^e.negative;var r=e.length+t.length|0;a.length=r,r=r-1|0;var n=0|e.words[0],i=0|t.words[0],s=n*i,o=67108863&s,c=s/67108864|0;a.words[0]=o;for(var l=1;l<r;l++){for(var u=c>>>26,d=67108863&c,p=Math.min(l,t.length-1),h=Math.max(0,l-e.length+1);h<=p;h++){var f=l-h|0;u+=(s=(n=0|e.words[f])*(i=0|t.words[h])+d)/67108864|0,d=67108863&s}a.words[l]=0|d,c=0|u}return 0!==c?a.words[l]=0|c:a.length--,a.strip()}i.prototype.toString=function(e,t){var a;if(t=0|t||1,16===(e=e||10)||"hex"===e){a="";for(var n=0,i=0,s=0;s<this.length;s++){var o=this.words[s],c=(16777215&(o<<n|i)).toString(16);a=0!==(i=o>>>24-n&16777215)||s!==this.length-1?l[6-c.length]+c+a:c+a,(n+=2)>=26&&(n-=26,s--)}for(0!==i&&(a=i.toString(16)+a);a.length%t!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}if(e===(0|e)&&e>=2&&e<=36){var p=u[e],h=d[e];a="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modn(h).toString(e);a=(f=f.idivn(h)).isZero()?m+a:l[p-m.length]+m+a}for(this.isZero()&&(a="0"+a);a.length%t!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return r(void 0!==s),this.toArrayLike(s,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,a){var n=this.byteLength(),i=a||Math.max(1,n);r(n<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var s,o,c="le"===t,l=new e(i),u=this.clone();if(c){for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),l[o]=s;for(;o<i;o++)l[o]=0}else{for(o=0;o<i-n;o++)l[o]=0;for(o=0;!u.isZero();o++)s=u.andln(255),u.iushrn(8),l[i-o-1]=s}return l},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,a=0;return t>=4096&&(a+=13,t>>>=13),t>=64&&(a+=7,t>>>=7),t>=8&&(a+=4,t>>>=4),t>=2&&(a+=2,t>>>=2),a+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,a=0;return 0==(8191&t)&&(a+=13,t>>>=13),0==(127&t)&&(a+=7,t>>>=7),0==(15&t)&&(a+=4,t>>>=4),0==(3&t)&&(a+=2,t>>>=2),0==(1&t)&&a++,a},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var a=this._zeroBits(this.words[t]);if(e+=a,26!==a)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var a=0;a<t.length;a++)this.words[a]=this.words[a]&e.words[a];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,a;this.length>e.length?(t=this,a=e):(t=e,a=this);for(var r=0;r<a.length;r++)this.words[r]=t.words[r]^a.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),a=e%26;this._expand(t),a>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return a>0&&(this.words[n]=~this.words[n]&67108863>>26-a),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var a=e/26|0,n=e%26;return this._expand(a+1),this.words[a]=t?this.words[a]|1<<n:this.words[a]&~(1<<n),this.strip()},i.prototype.iadd=function(e){var t,a,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(a=this,r=e):(a=e,r=this);for(var n=0,i=0;i<r.length;i++)t=(0|a.words[i])+(0|r.words[i])+n,this.words[i]=67108863&t,n=t>>>26;for(;0!==n&&i<a.length;i++)t=(0|a.words[i])+n,this.words[i]=67108863&t,n=t>>>26;if(this.length=a.length,0!==n)this.words[this.length]=n,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var a,r,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(a=this,r=e):(a=e,r=this);for(var i=0,s=0;s<r.length;s++)i=(t=(0|a.words[s])-(0|r.words[s])+i)>>26,this.words[s]=67108863&t;for(;0!==i&&s<a.length;s++)i=(t=(0|a.words[s])+i)>>26,this.words[s]=67108863&t;if(0===i&&s<a.length&&a!==this)for(;s<a.length;s++)this.words[s]=a.words[s];return this.length=Math.max(this.length,s),a!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var h=function(e,t,a){var r,n,i,s=e.words,o=t.words,c=a.words,l=0,u=0|s[0],d=8191&u,p=u>>>13,h=0|s[1],f=8191&h,m=h>>>13,g=0|s[2],b=8191&g,y=g>>>13,v=0|s[3],_=8191&v,w=v>>>13,x=0|s[4],k=8191&x,S=x>>>13,P=0|s[5],E=8191&P,C=P>>>13,A=0|s[6],M=8191&A,T=A>>>13,j=0|s[7],O=8191&j,D=j>>>13,I=0|s[8],R=8191&I,B=I>>>13,q=0|s[9],L=8191&q,N=q>>>13,F=0|o[0],U=8191&F,$=F>>>13,z=0|o[1],H=8191&z,G=z>>>13,K=0|o[2],W=8191&K,V=K>>>13,Y=0|o[3],J=8191&Y,X=Y>>>13,Q=0|o[4],Z=8191&Q,ee=Q>>>13,te=0|o[5],ae=8191&te,re=te>>>13,ne=0|o[6],ie=8191&ne,se=ne>>>13,oe=0|o[7],ce=8191&oe,le=oe>>>13,ue=0|o[8],de=8191&ue,pe=ue>>>13,he=0|o[9],fe=8191&he,me=he>>>13;a.negative=e.negative^t.negative,a.length=19;var ge=(l+(r=Math.imul(d,U))|0)+((8191&(n=(n=Math.imul(d,$))+Math.imul(p,U)|0))<<13)|0;l=((i=Math.imul(p,$))+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(f,U),n=(n=Math.imul(f,$))+Math.imul(m,U)|0,i=Math.imul(m,$);var be=(l+(r=r+Math.imul(d,H)|0)|0)+((8191&(n=(n=n+Math.imul(d,G)|0)+Math.imul(p,H)|0))<<13)|0;l=((i=i+Math.imul(p,G)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,U),n=(n=Math.imul(b,$))+Math.imul(y,U)|0,i=Math.imul(y,$),r=r+Math.imul(f,H)|0,n=(n=n+Math.imul(f,G)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,G)|0;var ye=(l+(r=r+Math.imul(d,W)|0)|0)+((8191&(n=(n=n+Math.imul(d,V)|0)+Math.imul(p,W)|0))<<13)|0;l=((i=i+Math.imul(p,V)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(_,U),n=(n=Math.imul(_,$))+Math.imul(w,U)|0,i=Math.imul(w,$),r=r+Math.imul(b,H)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(y,H)|0,i=i+Math.imul(y,G)|0,r=r+Math.imul(f,W)|0,n=(n=n+Math.imul(f,V)|0)+Math.imul(m,W)|0,i=i+Math.imul(m,V)|0;var ve=(l+(r=r+Math.imul(d,J)|0)|0)+((8191&(n=(n=n+Math.imul(d,X)|0)+Math.imul(p,J)|0))<<13)|0;l=((i=i+Math.imul(p,X)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(k,U),n=(n=Math.imul(k,$))+Math.imul(S,U)|0,i=Math.imul(S,$),r=r+Math.imul(_,H)|0,n=(n=n+Math.imul(_,G)|0)+Math.imul(w,H)|0,i=i+Math.imul(w,G)|0,r=r+Math.imul(b,W)|0,n=(n=n+Math.imul(b,V)|0)+Math.imul(y,W)|0,i=i+Math.imul(y,V)|0,r=r+Math.imul(f,J)|0,n=(n=n+Math.imul(f,X)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,X)|0;var _e=(l+(r=r+Math.imul(d,Z)|0)|0)+((8191&(n=(n=n+Math.imul(d,ee)|0)+Math.imul(p,Z)|0))<<13)|0;l=((i=i+Math.imul(p,ee)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(E,U),n=(n=Math.imul(E,$))+Math.imul(C,U)|0,i=Math.imul(C,$),r=r+Math.imul(k,H)|0,n=(n=n+Math.imul(k,G)|0)+Math.imul(S,H)|0,i=i+Math.imul(S,G)|0,r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,V)|0)+Math.imul(w,W)|0,i=i+Math.imul(w,V)|0,r=r+Math.imul(b,J)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(y,J)|0,i=i+Math.imul(y,X)|0,r=r+Math.imul(f,Z)|0,n=(n=n+Math.imul(f,ee)|0)+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0;var we=(l+(r=r+Math.imul(d,ae)|0)|0)+((8191&(n=(n=n+Math.imul(d,re)|0)+Math.imul(p,ae)|0))<<13)|0;l=((i=i+Math.imul(p,re)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(M,U),n=(n=Math.imul(M,$))+Math.imul(T,U)|0,i=Math.imul(T,$),r=r+Math.imul(E,H)|0,n=(n=n+Math.imul(E,G)|0)+Math.imul(C,H)|0,i=i+Math.imul(C,G)|0,r=r+Math.imul(k,W)|0,n=(n=n+Math.imul(k,V)|0)+Math.imul(S,W)|0,i=i+Math.imul(S,V)|0,r=r+Math.imul(_,J)|0,n=(n=n+Math.imul(_,X)|0)+Math.imul(w,J)|0,i=i+Math.imul(w,X)|0,r=r+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,ee)|0)+Math.imul(y,Z)|0,i=i+Math.imul(y,ee)|0,r=r+Math.imul(f,ae)|0,n=(n=n+Math.imul(f,re)|0)+Math.imul(m,ae)|0,i=i+Math.imul(m,re)|0;var xe=(l+(r=r+Math.imul(d,ie)|0)|0)+((8191&(n=(n=n+Math.imul(d,se)|0)+Math.imul(p,ie)|0))<<13)|0;l=((i=i+Math.imul(p,se)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(O,U),n=(n=Math.imul(O,$))+Math.imul(D,U)|0,i=Math.imul(D,$),r=r+Math.imul(M,H)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(T,H)|0,i=i+Math.imul(T,G)|0,r=r+Math.imul(E,W)|0,n=(n=n+Math.imul(E,V)|0)+Math.imul(C,W)|0,i=i+Math.imul(C,V)|0,r=r+Math.imul(k,J)|0,n=(n=n+Math.imul(k,X)|0)+Math.imul(S,J)|0,i=i+Math.imul(S,X)|0,r=r+Math.imul(_,Z)|0,n=(n=n+Math.imul(_,ee)|0)+Math.imul(w,Z)|0,i=i+Math.imul(w,ee)|0,r=r+Math.imul(b,ae)|0,n=(n=n+Math.imul(b,re)|0)+Math.imul(y,ae)|0,i=i+Math.imul(y,re)|0,r=r+Math.imul(f,ie)|0,n=(n=n+Math.imul(f,se)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,se)|0;var ke=(l+(r=r+Math.imul(d,ce)|0)|0)+((8191&(n=(n=n+Math.imul(d,le)|0)+Math.imul(p,ce)|0))<<13)|0;l=((i=i+Math.imul(p,le)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(R,U),n=(n=Math.imul(R,$))+Math.imul(B,U)|0,i=Math.imul(B,$),r=r+Math.imul(O,H)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(D,H)|0,i=i+Math.imul(D,G)|0,r=r+Math.imul(M,W)|0,n=(n=n+Math.imul(M,V)|0)+Math.imul(T,W)|0,i=i+Math.imul(T,V)|0,r=r+Math.imul(E,J)|0,n=(n=n+Math.imul(E,X)|0)+Math.imul(C,J)|0,i=i+Math.imul(C,X)|0,r=r+Math.imul(k,Z)|0,n=(n=n+Math.imul(k,ee)|0)+Math.imul(S,Z)|0,i=i+Math.imul(S,ee)|0,r=r+Math.imul(_,ae)|0,n=(n=n+Math.imul(_,re)|0)+Math.imul(w,ae)|0,i=i+Math.imul(w,re)|0,r=r+Math.imul(b,ie)|0,n=(n=n+Math.imul(b,se)|0)+Math.imul(y,ie)|0,i=i+Math.imul(y,se)|0,r=r+Math.imul(f,ce)|0,n=(n=n+Math.imul(f,le)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,le)|0;var Se=(l+(r=r+Math.imul(d,de)|0)|0)+((8191&(n=(n=n+Math.imul(d,pe)|0)+Math.imul(p,de)|0))<<13)|0;l=((i=i+Math.imul(p,pe)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(L,U),n=(n=Math.imul(L,$))+Math.imul(N,U)|0,i=Math.imul(N,$),r=r+Math.imul(R,H)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(B,H)|0,i=i+Math.imul(B,G)|0,r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,V)|0)+Math.imul(D,W)|0,i=i+Math.imul(D,V)|0,r=r+Math.imul(M,J)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,X)|0,r=r+Math.imul(E,Z)|0,n=(n=n+Math.imul(E,ee)|0)+Math.imul(C,Z)|0,i=i+Math.imul(C,ee)|0,r=r+Math.imul(k,ae)|0,n=(n=n+Math.imul(k,re)|0)+Math.imul(S,ae)|0,i=i+Math.imul(S,re)|0,r=r+Math.imul(_,ie)|0,n=(n=n+Math.imul(_,se)|0)+Math.imul(w,ie)|0,i=i+Math.imul(w,se)|0,r=r+Math.imul(b,ce)|0,n=(n=n+Math.imul(b,le)|0)+Math.imul(y,ce)|0,i=i+Math.imul(y,le)|0,r=r+Math.imul(f,de)|0,n=(n=n+Math.imul(f,pe)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,pe)|0;var Pe=(l+(r=r+Math.imul(d,fe)|0)|0)+((8191&(n=(n=n+Math.imul(d,me)|0)+Math.imul(p,fe)|0))<<13)|0;l=((i=i+Math.imul(p,me)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(L,H),n=(n=Math.imul(L,G))+Math.imul(N,H)|0,i=Math.imul(N,G),r=r+Math.imul(R,W)|0,n=(n=n+Math.imul(R,V)|0)+Math.imul(B,W)|0,i=i+Math.imul(B,V)|0,r=r+Math.imul(O,J)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(D,J)|0,i=i+Math.imul(D,X)|0,r=r+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,ee)|0)+Math.imul(T,Z)|0,i=i+Math.imul(T,ee)|0,r=r+Math.imul(E,ae)|0,n=(n=n+Math.imul(E,re)|0)+Math.imul(C,ae)|0,i=i+Math.imul(C,re)|0,r=r+Math.imul(k,ie)|0,n=(n=n+Math.imul(k,se)|0)+Math.imul(S,ie)|0,i=i+Math.imul(S,se)|0,r=r+Math.imul(_,ce)|0,n=(n=n+Math.imul(_,le)|0)+Math.imul(w,ce)|0,i=i+Math.imul(w,le)|0,r=r+Math.imul(b,de)|0,n=(n=n+Math.imul(b,pe)|0)+Math.imul(y,de)|0,i=i+Math.imul(y,pe)|0;var Ee=(l+(r=r+Math.imul(f,fe)|0)|0)+((8191&(n=(n=n+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;l=((i=i+Math.imul(m,me)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(L,W),n=(n=Math.imul(L,V))+Math.imul(N,W)|0,i=Math.imul(N,V),r=r+Math.imul(R,J)|0,n=(n=n+Math.imul(R,X)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,X)|0,r=r+Math.imul(O,Z)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(D,Z)|0,i=i+Math.imul(D,ee)|0,r=r+Math.imul(M,ae)|0,n=(n=n+Math.imul(M,re)|0)+Math.imul(T,ae)|0,i=i+Math.imul(T,re)|0,r=r+Math.imul(E,ie)|0,n=(n=n+Math.imul(E,se)|0)+Math.imul(C,ie)|0,i=i+Math.imul(C,se)|0,r=r+Math.imul(k,ce)|0,n=(n=n+Math.imul(k,le)|0)+Math.imul(S,ce)|0,i=i+Math.imul(S,le)|0,r=r+Math.imul(_,de)|0,n=(n=n+Math.imul(_,pe)|0)+Math.imul(w,de)|0,i=i+Math.imul(w,pe)|0;var Ce=(l+(r=r+Math.imul(b,fe)|0)|0)+((8191&(n=(n=n+Math.imul(b,me)|0)+Math.imul(y,fe)|0))<<13)|0;l=((i=i+Math.imul(y,me)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,J),n=(n=Math.imul(L,X))+Math.imul(N,J)|0,i=Math.imul(N,X),r=r+Math.imul(R,Z)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(B,Z)|0,i=i+Math.imul(B,ee)|0,r=r+Math.imul(O,ae)|0,n=(n=n+Math.imul(O,re)|0)+Math.imul(D,ae)|0,i=i+Math.imul(D,re)|0,r=r+Math.imul(M,ie)|0,n=(n=n+Math.imul(M,se)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,se)|0,r=r+Math.imul(E,ce)|0,n=(n=n+Math.imul(E,le)|0)+Math.imul(C,ce)|0,i=i+Math.imul(C,le)|0,r=r+Math.imul(k,de)|0,n=(n=n+Math.imul(k,pe)|0)+Math.imul(S,de)|0,i=i+Math.imul(S,pe)|0;var Ae=(l+(r=r+Math.imul(_,fe)|0)|0)+((8191&(n=(n=n+Math.imul(_,me)|0)+Math.imul(w,fe)|0))<<13)|0;l=((i=i+Math.imul(w,me)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,Z),n=(n=Math.imul(L,ee))+Math.imul(N,Z)|0,i=Math.imul(N,ee),r=r+Math.imul(R,ae)|0,n=(n=n+Math.imul(R,re)|0)+Math.imul(B,ae)|0,i=i+Math.imul(B,re)|0,r=r+Math.imul(O,ie)|0,n=(n=n+Math.imul(O,se)|0)+Math.imul(D,ie)|0,i=i+Math.imul(D,se)|0,r=r+Math.imul(M,ce)|0,n=(n=n+Math.imul(M,le)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,le)|0,r=r+Math.imul(E,de)|0,n=(n=n+Math.imul(E,pe)|0)+Math.imul(C,de)|0,i=i+Math.imul(C,pe)|0;var Me=(l+(r=r+Math.imul(k,fe)|0)|0)+((8191&(n=(n=n+Math.imul(k,me)|0)+Math.imul(S,fe)|0))<<13)|0;l=((i=i+Math.imul(S,me)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(L,ae),n=(n=Math.imul(L,re))+Math.imul(N,ae)|0,i=Math.imul(N,re),r=r+Math.imul(R,ie)|0,n=(n=n+Math.imul(R,se)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,se)|0,r=r+Math.imul(O,ce)|0,n=(n=n+Math.imul(O,le)|0)+Math.imul(D,ce)|0,i=i+Math.imul(D,le)|0,r=r+Math.imul(M,de)|0,n=(n=n+Math.imul(M,pe)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,pe)|0;var Te=(l+(r=r+Math.imul(E,fe)|0)|0)+((8191&(n=(n=n+Math.imul(E,me)|0)+Math.imul(C,fe)|0))<<13)|0;l=((i=i+Math.imul(C,me)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,ie),n=(n=Math.imul(L,se))+Math.imul(N,ie)|0,i=Math.imul(N,se),r=r+Math.imul(R,ce)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,le)|0,r=r+Math.imul(O,de)|0,n=(n=n+Math.imul(O,pe)|0)+Math.imul(D,de)|0,i=i+Math.imul(D,pe)|0;var je=(l+(r=r+Math.imul(M,fe)|0)|0)+((8191&(n=(n=n+Math.imul(M,me)|0)+Math.imul(T,fe)|0))<<13)|0;l=((i=i+Math.imul(T,me)|0)+(n>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(L,ce),n=(n=Math.imul(L,le))+Math.imul(N,ce)|0,i=Math.imul(N,le),r=r+Math.imul(R,de)|0,n=(n=n+Math.imul(R,pe)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,pe)|0;var Oe=(l+(r=r+Math.imul(O,fe)|0)|0)+((8191&(n=(n=n+Math.imul(O,me)|0)+Math.imul(D,fe)|0))<<13)|0;l=((i=i+Math.imul(D,me)|0)+(n>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,de),n=(n=Math.imul(L,pe))+Math.imul(N,de)|0,i=Math.imul(N,pe);var De=(l+(r=r+Math.imul(R,fe)|0)|0)+((8191&(n=(n=n+Math.imul(R,me)|0)+Math.imul(B,fe)|0))<<13)|0;l=((i=i+Math.imul(B,me)|0)+(n>>>13)|0)+(De>>>26)|0,De&=67108863;var Ie=(l+(r=Math.imul(L,fe))|0)+((8191&(n=(n=Math.imul(L,me))+Math.imul(N,fe)|0))<<13)|0;return l=((i=Math.imul(N,me))+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,c[0]=ge,c[1]=be,c[2]=ye,c[3]=ve,c[4]=_e,c[5]=we,c[6]=xe,c[7]=ke,c[8]=Se,c[9]=Pe,c[10]=Ee,c[11]=Ce,c[12]=Ae,c[13]=Me,c[14]=Te,c[15]=je,c[16]=Oe,c[17]=De,c[18]=Ie,0!==l&&(c[19]=l,a.length++),a};function f(e,t,a){return(new m).mulp(e,t,a)}function m(e,t){this.x=e,this.y=t}Math.imul||(h=p),i.prototype.mulTo=function(e,t){var a=this.length+e.length;return 10===this.length&&10===e.length?h(this,e,t):a<63?p(this,e,t):a<1024?function(e,t,a){a.negative=t.negative^e.negative,a.length=e.length+t.length;for(var r=0,n=0,i=0;i<a.length-1;i++){var s=n;n=0;for(var o=67108863&r,c=Math.min(i,t.length-1),l=Math.max(0,i-e.length+1);l<=c;l++){var u=i-l,d=(0|e.words[u])*(0|t.words[l]),p=67108863&d;o=67108863&(p=p+o|0),n+=(s=(s=s+(d/67108864|0)|0)+(p>>>26)|0)>>>26,s&=67108863}a.words[i]=o,r=s,s=n}return 0!==r?a.words[i]=r:a.length--,a.strip()}(this,e,t):f(this,e,t)},m.prototype.makeRBT=function(e){for(var t=new Array(e),a=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,a,e);return t},m.prototype.revBin=function(e,t,a){if(0===e||e===a-1)return e;for(var r=0,n=0;n<t;n++)r|=(1&e)<<t-n-1,e>>=1;return r},m.prototype.permute=function(e,t,a,r,n,i){for(var s=0;s<i;s++)r[s]=t[e[s]],n[s]=a[e[s]]},m.prototype.transform=function(e,t,a,r,n,i){this.permute(i,e,t,a,r,n);for(var s=1;s<n;s<<=1)for(var o=s<<1,c=Math.cos(2*Math.PI/o),l=Math.sin(2*Math.PI/o),u=0;u<n;u+=o)for(var d=c,p=l,h=0;h<s;h++){var f=a[u+h],m=r[u+h],g=a[u+h+s],b=r[u+h+s],y=d*g-p*b;b=d*b+p*g,g=y,a[u+h]=f+g,r[u+h]=m+b,a[u+h+s]=f-g,r[u+h+s]=m-b,h!==o&&(y=c*d-l*p,p=c*p+l*d,d=y)}},m.prototype.guessLen13b=function(e,t){var a=1|Math.max(t,e),r=1&a,n=0;for(a=a/2|0;a;a>>>=1)n++;return 1<<n+1+r},m.prototype.conjugate=function(e,t,a){if(!(a<=1))for(var r=0;r<a/2;r++){var n=e[r];e[r]=e[a-r-1],e[a-r-1]=n,n=t[r],t[r]=-t[a-r-1],t[a-r-1]=-n}},m.prototype.normalize13b=function(e,t){for(var a=0,r=0;r<t/2;r++){var n=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+a;e[r]=67108863&n,a=n<67108864?0:n/67108864|0}return e},m.prototype.convert13b=function(e,t,a,n){for(var i=0,s=0;s<t;s++)i+=0|e[s],a[2*s]=8191&i,i>>>=13,a[2*s+1]=8191&i,i>>>=13;for(s=2*t;s<n;++s)a[s]=0;r(0===i),r(0==(-8192&i))},m.prototype.stub=function(e){for(var t=new Array(e),a=0;a<e;a++)t[a]=0;return t},m.prototype.mulp=function(e,t,a){var r=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(r),i=this.stub(r),s=new Array(r),o=new Array(r),c=new Array(r),l=new Array(r),u=new Array(r),d=new Array(r),p=a.words;p.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,l,r),this.transform(s,i,o,c,r,n),this.transform(l,i,u,d,r,n);for(var h=0;h<r;h++){var f=o[h]*u[h]-c[h]*d[h];c[h]=o[h]*d[h]+c[h]*u[h],o[h]=f}return this.conjugate(o,c,r),this.transform(o,c,p,i,r,n),this.conjugate(p,i,r),this.normalize13b(p,r),a.negative=e.negative^t.negative,a.length=e.length+t.length,a.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),f(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,a=0;a<this.length;a++){var n=(0|this.words[a])*e,i=(67108863&n)+(67108863&t);t>>=26,t+=n/67108864|0,t+=i>>>26,this.words[a]=67108863&i}return 0!==t&&(this.words[a]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),a=0;a<t.length;a++){var r=a/26|0,n=a%26;t[a]=(e.words[r]&1<<n)>>>n}return t}(e);if(0===t.length)return new i(1);for(var a=this,r=0;r<t.length&&0===t[r];r++,a=a.sqr());if(++r<t.length)for(var n=a.sqr();r<t.length;r++,n=n.sqr())0!==t[r]&&(a=a.mul(n));return a},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,a=e%26,n=(e-a)/26,i=67108863>>>26-a<<26-a;if(0!==a){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&i,c=(0|this.words[t])-o<<a;this.words[t]=c|s,s=o>>>26-a}s&&(this.words[t]=s,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,a){var n;r("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var i=e%26,s=Math.min((e-i)/26,this.length),o=67108863^67108863>>>i<<i,c=a;if(n-=s,n=Math.max(0,n),c){for(var l=0;l<s;l++)c.words[l]=this.words[l];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,l=0;l<this.length;l++)this.words[l]=this.words[l+s];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=n);l--){var d=0|this.words[l];this.words[l]=u<<26-i|d>>>i,u=d&o}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,a){return r(0===this.negative),this.iushrn(e,t,a)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,a=(e-t)/26,n=1<<t;return!(this.length<=a)&&!!(this.words[a]&n)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,a=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=a)return this;if(0!==t&&a++,this.length=Math.min(a,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,a){var n,i,s=e.length+a;this._expand(s);var o=0;for(n=0;n<e.length;n++){i=(0|this.words[n+a])+o;var c=(0|e.words[n])*t;o=((i-=67108863&c)>>26)-(c/67108864|0),this.words[n+a]=67108863&i}for(;n<this.length-a;n++)o=(i=(0|this.words[n+a])+o)>>26,this.words[n+a]=67108863&i;if(0===o)return this.strip();for(r(-1===o),o=0,n=0;n<this.length;n++)o=(i=-(0|this.words[n])+o)>>26,this.words[n]=67108863&i;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var a=(this.length,e.length),r=this.clone(),n=e,s=0|n.words[n.length-1];0!==(a=26-this._countBits(s))&&(n=n.ushln(a),r.iushln(a),s=0|n.words[n.length-1]);var o,c=r.length-n.length;if("mod"!==t){(o=new i(null)).length=c+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=r.clone()._ishlnsubmul(n,1,c);0===u.negative&&(r=u,o&&(o.words[c]=1));for(var d=c-1;d>=0;d--){var p=67108864*(0|r.words[n.length+d])+(0|r.words[n.length+d-1]);for(p=Math.min(p/s|0,67108863),r._ishlnsubmul(n,p,d);0!==r.negative;)p--,r.negative=0,r._ishlnsubmul(n,1,d),r.isZero()||(r.negative^=1);o&&(o.words[d]=p)}return o&&o.strip(),r.strip(),"div"!==t&&0!==a&&r.iushrn(a),{div:o||null,mod:r}},i.prototype.divmod=function(e,t,a){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(n=o.div.neg()),"div"!==t&&(s=o.mod.neg(),a&&0!==s.negative&&s.iadd(e)),{div:n,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),a&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t);var n,s,o},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var a=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),n=e.andln(1),i=a.cmp(r);return i<0||1===n&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,a=0,n=this.length-1;n>=0;n--)a=(t*a+(0|this.words[n]))%e;return a},i.prototype.idivn=function(e){r(e<=67108863);for(var t=0,a=this.length-1;a>=0;a--){var n=(0|this.words[a])+67108864*t;this.words[a]=n/e|0,t=n%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,a=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new i(1),s=new i(0),o=new i(0),c=new i(1),l=0;t.isEven()&&a.isEven();)t.iushrn(1),a.iushrn(1),++l;for(var u=a.clone(),d=t.clone();!t.isZero();){for(var p=0,h=1;0==(t.words[0]&h)&&p<26;++p,h<<=1);if(p>0)for(t.iushrn(p);p-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(u),s.isub(d)),n.iushrn(1),s.iushrn(1);for(var f=0,m=1;0==(a.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(a.iushrn(f);f-- >0;)(o.isOdd()||c.isOdd())&&(o.iadd(u),c.isub(d)),o.iushrn(1),c.iushrn(1);t.cmp(a)>=0?(t.isub(a),n.isub(o),s.isub(c)):(a.isub(t),o.isub(n),c.isub(s))}return{a:o,b:c,gcd:a.iushln(l)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,a=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,s=new i(1),o=new i(0),c=a.clone();t.cmpn(1)>0&&a.cmpn(1)>0;){for(var l=0,u=1;0==(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,p=1;0==(a.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(a.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);t.cmp(a)>=0?(t.isub(a),s.isub(o)):(a.isub(t),o.isub(s))}return(n=0===t.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(e),n},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),a=e.clone();t.negative=0,a.negative=0;for(var r=0;t.isEven()&&a.isEven();r++)t.iushrn(1),a.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;a.isEven();)a.iushrn(1);var n=t.cmp(a);if(n<0){var i=t;t=a,a=i}else if(0===n||0===a.cmpn(1))break;t.isub(a)}return a.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,a=(e-t)/26,n=1<<t;if(this.length<=a)return this._expand(a+1),this.words[a]|=n,this;for(var i=n,s=a;0!==i&&s<this.length;s++){var o=0|this.words[s];i=(o+=i)>>>26,o&=67108863,this.words[s]=o}return 0!==i&&(this.words[s]=i,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,a=e<0;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;if(this.strip(),this.length>1)t=1;else{a&&(e=-e),r(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,a=this.length-1;a>=0;a--){var r=0|this.words[a],n=0|e.words[a];if(r!==n){r<n?t=-1:r>n&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new x(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function x(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){x.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,a=e;do{this.split(a,this.tmp),t=(a=(a=this.imulK(a)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:a.ucmp(this.p);return 0===r?(a.words[0]=0,a.length=1):r>0?a.isub(this.p):void 0!==a.strip?a.strip():a._strip(),a},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},n(y,b),y.prototype.split=function(e,t){for(var a=Math.min(e.length,9),r=0;r<a;r++)t.words[r]=e.words[r];if(t.length=a,e.length<=9)return e.words[0]=0,void(e.length=1);var n=e.words[9];for(t.words[t.length++]=4194303&n,r=10;r<e.length;r++){var i=0|e.words[r];e.words[r-10]=(4194303&i)<<4|n>>>22,n=i}n>>>=22,e.words[r-10]=n,0===n&&e.length>10?e.length-=10:e.length-=9},y.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,a=0;a<e.length;a++){var r=0|e.words[a];t+=977*r,e.words[a]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(v,b),n(_,b),n(w,b),w.prototype.imulK=function(e){for(var t=0,a=0;a<e.length;a++){var r=19*(0|e.words[a])+t,n=67108863&r;r>>>=26,e.words[a]=n,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new y;else if("p224"===e)t=new v;else if("p192"===e)t=new _;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new w}return g[e]=t,t},x.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},x.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},x.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},x.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},x.prototype.add=function(e,t){this._verify2(e,t);var a=e.add(t);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},x.prototype.iadd=function(e,t){this._verify2(e,t);var a=e.iadd(t);return a.cmp(this.m)>=0&&a.isub(this.m),a},x.prototype.sub=function(e,t){this._verify2(e,t);var a=e.sub(t);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},x.prototype.isub=function(e,t){this._verify2(e,t);var a=e.isub(t);return a.cmpn(0)<0&&a.iadd(this.m),a},x.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},x.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},x.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},x.prototype.isqr=function(e){return this.imul(e,e.clone())},x.prototype.sqr=function(e){return this.mul(e,e)},x.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var a=this.m.add(new i(1)).iushrn(2);return this.pow(e,a)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);r(!n.isZero());var o=new i(1).toRed(this),c=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,n),p=this.pow(e,n.addn(1).iushrn(1)),h=this.pow(e,n),f=s;0!==h.cmp(o);){for(var m=h,g=0;0!==m.cmp(o);g++)m=m.redSqr();r(g<f);var b=this.pow(d,new i(1).iushln(f-g-1));p=p.redMul(b),d=b.redSqr(),h=h.redMul(d),f=g}return p},x.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},x.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var a=new Array(16);a[0]=new i(1).toRed(this),a[1]=e;for(var r=2;r<a.length;r++)a[r]=this.mul(a[r-1],e);var n=a[0],s=0,o=0,c=t.bitLength()%26;for(0===c&&(c=26),r=t.length-1;r>=0;r--){for(var l=t.words[r],u=c-1;u>=0;u--){var d=l>>u&1;n!==a[0]&&(n=this.sqr(n)),0!==d||0!==s?(s<<=1,s|=d,(4===++o||0===r&&0===u)&&(n=this.mul(n,a[s]),o=0,s=0)):o=0}c=26}return n},x.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},x.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new k(e)},n(k,x),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var a=e.imul(t),r=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=a.isub(r).iushrn(this.shift),i=n;return n.cmp(this.m)>=0?i=n.isub(this.m):n.cmpn(0)<0&&(i=n.iadd(this.m)),i._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var a=e.mul(t),r=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=a.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,a(89)(e))},function(e,t,a){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function o(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function c(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function s(e){o(i,r,n,s,c,"next",e)}function c(e){o(i,r,n,s,c,"throw",e)}s(void 0)}))}}function l(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,a){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=m(e);if(t){var n=m(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return h(this,a)}}function h(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=a(15),b=a(5),y=a(1144),v=a(1146),_=a(1148),w=a(1151),x=a(433),k=a(1156),S=a(1158),P=a(1160),E=a(1162),C=a(1164),A=a(1166),M=a(1169),T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(q,e);var a,r,s,o,g,T,j,O,D,I,R,B=p(q);function q(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,q),(t=B.call(this,e)).name="Game",t.game={},t.moves=[],t.commands=[],t.initializeQueueCommandsExecuted=0,t.game_state_pre_move="",t.crypto_transfer_manager=new M(e),t.useHUD=1,t.useCardfan=0,t.useCardbox=0,t.useClock=0,t.useMenu=0,t.useOverlay=0,t.useObserver=0,t.useLog=0,t.lock_interface=0,t.lock_interface_step="",t.lock_interface_tx="",t.confirm_moves=0,t.confirm_this_move=0,t.interface=0,t.relay_moves_offchain_if_possible=1,t.initialize_game_offchain_if_possible=1,t.next_move_onchain_only=0,t.hud=new _(e),t.clock=new y(e),t.log=new v(e),t.overlay=new x(e),t.cardfan=new S(e),t.cardbox=new k(e),t.menu=new w(e),t.hammer=A,t.sizer=C,t.hexgrid=new P,t.observer=new E,t.clock_timer=null,t.menus=[],t.minPlayers=2,t.maxPlayers=2,t.lang="en",t.gameboardWidth=5100,t.screenRatio=1,t.screenSize={width:null,height:null},t.gameboardZoom=1,t.gameboardMobileZoom=1,t.publisher_message="",t.time={},t.time.last_received=0,t.time.last_sent=0,t.secureroll_rnums=[],t.secureroll_hash="",t.observer_mode=0,t.old_discards={},t.old_removed={},t.old_cards={},t.old_crypt=[],t.old_keys=[],t.old_hand=[],t.gaming_active=0,t.initialize_game_run=0,t.changeable_callback=function(e){};var a=f(t);return t.cardbox_callback=function(e){a.changeable_callback(e)},h(t,f(t))}return a=q,(r=[{key:"displayModal",value:(R=c(regeneratorRuntime.mark((function e(t){var a,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"",e.next=3,salert("".concat(t,": ").concat(a));case 3:case"end":return e.stop()}}),e)}))),function(e){return R.apply(this,arguments)})},{key:"preloadImages",value:(I=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return I.apply(this,arguments)})},{key:"initializeHTML",value:function(e){if(0!=this.browser_active){if(1==this.initialize_game_run)return 0;try{var t=window.location.hash;if(""!=t){var a=e.browser.parseHash(t),r=e.modules.returnModule("Arcade");if(r){var n=a.gid,i=a.bid,s=a.tid,o=a.lm;msg={},msg.game_id=n,msg.bid=i,msg.tid=s,msg.last_move=o,msg.player="",msg.module=this.name;var c=e.crypto.stringToBase64(JSON.stringify(msg));if(this.game.id!=n)return void r.observeGame(c,o)}}window.location.hash="#",window.location.hash=e.browser.initializeHash("#gid=".concat(this.game.id,"&bid=1&tid=1&lm=0"),t,{})}catch(e){}this.game.options&&this.game.options.clock&&(0==this.game.options.clock?(this.game.clock_limit=0,this.useClock=0):(0==this.game.clock_spent&&(this.game.clock_limit=60*parseInt(this.game.options.clock)*1e3),this.useClock=1)),1==this.useHUD&&(this.hud.render(e,this),this.hud.attachEvents(e,this)),1==this.useClock&&(this.clock.render(e,this),this.clock.attachEvents(e,this)),1!=this.useObserver&&0!=this.game.player||(this.observer.render(e,this),this.observer.attachEvents(e,this)),null!=this.app.options&&null!=this.app.options.gameprefs&&(null!=this.app.options.gameprefs.lang&&(this.lang=this.app.options.gameprefs.lang),null!=this.app.options.gameprefs.interface&&(this.interface=this.app.options.gameprefs.interface))}}},{key:"attachEvents",value:function(e){0!=this.browser_active&&1!=this.initialize_game_run&&1==this.useHUD&&this.hud.attachEvents(e,this)}},{key:"attachCardEvents",value:function(e){1==this.useHUD&&this.hud.attachCardEvents(e,this)}},{key:"respondTo",value:function(e){if("arcade-games"==e){var t={};return t.img="/"+this.returnSlug()+"/img/arcade.jpg",t.render=this.renderArcade,t.attachEvents=this.attachEventsArcade,t}return null}},{key:"renderArcade",value:function(e,t){}},{key:"attachEventsArcade",value:function(e,t){}},{key:"onConfirmation",value:(D=c(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o,c,l,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.returnMessage(),s=n.modules.returnModule(i.module),0!=r){e.next=32;break}if(o=0,"undefined"!=s.game&&null!=s.game&&""!=s.game&&null!=s.game||""==i.game_id||(s.game=s.loadGame(i.game_id)),this.app.options)for(c=0;c<this.app.options.games;c++)this.app.options.games[c].id&&this.app.options.games[c].id.length<25&&(this.app.options.games.splice(c,1),c--);if(!a.isTo(n.wallet.returnPublicKey())||"accept"!=i.request){e.next=13;break}return o=1,e.next=11,s.receiveAcceptRequest(t,a,r,n);case 11:l=e.sent,console.log("and done with: "+l);case 13:if(u=i.game_id,!n.options.games){e.next=32;break}d=0;case 16:if(!(d<n.options.games.length)){e.next=32;break}if(u!=n.options.games[d].id){e.next=29;break}if(following_game=1,!a.isTo(n.wallet.returnPublicKey())){e.next=23;break}0==o&&(s.isFutureMove(a.transaction.from[0].add,i)?s.addFutureMove(a):s.isUnprocessedMove(a.transaction.from[0].add,i)&&s.addNextMove(a)),e.next=29;break;case 23:if(1!=n.options.games[d].observer_mode){e.next=29;break}if("game"===i.request){e.next=26;break}return e.abrupt("return");case 26:s.game.id!=u&&(console.log("2. Loading Game ID: "+u),s.loadGame(u)),s.isFutureMove(a.transaction.from[0].add,i)?(console.log("Processing Future Move"),s.addFutureMove(a)):s.isUnprocessedMove(a.transaction.from[0].add,i)&&(console.log("Processing Next Move"),s.addNextMove(a));case 29:d++,e.next=16;break;case 32:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r){return D.apply(this,arguments)})},{key:"isFutureMove",value:function(e,t){return t.game_id!==this.game.id||parseInt(t.step.game)<=parseInt(this.game.step.game)+1||t.step.game<=this.game.step.players[e]+1?0:t.step.game>this.game.step.game+1||t.step.game>this.game.step.players[e]+1||1==this.gaming_active?1:0}},{key:"isPastMove",value:function(e,t){return t.game_id!==this.game.id?0:parseInt(t.step.game)<=parseInt(this.game.step.game)&&parseInt(t.step.game)<=parseInt(this.game.step.players[e])?1:0}},{key:"isUnprocessedMove",value:function(e,t){return t.game_id!==this.game.id?0:parseInt(t.step.game)==this.game.step.game+1||parseInt(t.step.game)==this.game.step.players[e]+1||this.game.step.players[e]&&t.step.game>this.game.step.players[e]&&t.step.game<this.game.step.game?1:0}},{key:"createSorryAcceptedTransaction",value:function(e,t){var a=this.app.wallet.createUnsignedTransactionWithDefaultFee(e);return a.msg.module=this.name,a.msg.request="sorry",a.msg.game_id=t,a=this.app.wallet.signTransaction(a)}},{key:"receiveSorryAcceptedTransaction",value:function(e,t,a,r){}},{key:"createAcceptTransaction",value:function(e){for(var t=e.players,a=e.ts,r=e.players_needed,i=e.players_sigs,s=e.id,o=e.options,c=this.app.wallet.createUnsignedTransactionWithDefaultFee(),l=0;l<t.length;l++)c.transaction.to.push(new b.slip(t[l],0));return c.msg.ts=a,c.msg.module=this.name,c.msg.request="accept",c.msg.game_id=s,c.msg.options=o,c.msg.players=t,c.msg.players_needed=r,c.msg.players_sigs=[].concat(n(i),[this.app.crypto.signMessage("invite_game_".concat(a),this.app.wallet.returnPrivateKey())]),c.msg.originator=c.transaction.from[0].add,c=this.app.wallet.signTransaction(c)}},{key:"receiveInviteRequest",value:function(e,t,a,r){var n=t.returnMessage(),i=t.transaction.sig,s={},o=1;if(""!=n.game_id&&(i=n.game_id),""!=n.options&&(s=n.options),""!=n.invite_sig&&n.invite_sig,n.players_needed>1&&(o=n.players_needed),t.isTo(r.wallet.returnPublicKey())){if(null==this.app.options.games&&(this.app.options.games=[]),null!=this.app.options.games)for(var c=0;c<this.app.options.games.length;c++)if(this.app.options.games[c].id==i)return;var l=0,u=0,d=0;if(""!=n.accept_sig){var p="create_game_"+t.msg.ts;r.crypto.verifyMessage(p,n.accept_sig,this.app.wallet.returnPublicKey())&&(l=1,u=1)}if(""!=n.invite_sig){var h="invite_game_"+t.msg.ts;r.crypto.verifyMessage(h,n.invite_sig,this.app.wallet.returnPublicKey())&&(l=1)}if(""!=n.invite_sig){var f="invite_game_"+t.msg.ts;r.crypto.verifyMessage(f,n.invite_sig,t.transaction.from[0].add)&&(d=1)}if(1==l){this.loadGame(i);for(var m=0;m<t.transaction.from.length;m++)this.addPlayer(t.transaction.from[m].add);for(var g=0;g<t.transaction.to.length;g++)this.addPlayer(t.transaction.to[g].add);for(var b=0;b<this.game.players.length;b++)this.game.players[b]==this.app.wallet.returnPublicKey()&&(this.game.accepted[b]=1);if(this.game.players_needed=o,1==d)for(var y=0;y<this.game.players.length;y++)this.game.players[y]==t.transaction.from[0].add&&(this.game.accepted[y]=1);this.game.module=n.module,this.game.options=s,this.game.id=i,this.game.accept=1,this.game.players_sigs=n.players_sigs,this.saveGame(i),this.game.ts=n.ts,console.log("\n\n\nWHAT IS THE GID: "+i),console.log("WHAT IS THE TS: "+this.game.ts),console.log("PLAYERS NEEDED: "+this.game.players_needed),console.log("PLAYERS SIGS: "+this.game.players_sigs),console.log("PLAYERS ON INVITE: "+this.game.players),console.log("ACCEPTS ON INVITE: "+this.game.accepted),console.log("OPTIONS: "+JSON.stringify(this.game.options)),console.log("GAMES: ",this.app.options.games)}if(1==u){var v=this.createAcceptTransaction(this.game);r.network.propagateTransaction(v)}}}},{key:"receiveAcceptRequest",value:(O=c(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o,c,l,u,d,p,h,f,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.returnMessage(),s=i.game_id,i.originator,this.loadGame(s),!(i.players_needed>i.players.length)){e.next=8;break}return console.log("ACCEPT REQUEST RECEIVED -- but not enough players in accepted transaction.... aborting"),this.game.halted=0,e.abrupt("return",0);case 8:if(i.players.includes(n.wallet.returnPublicKey())){e.next=12;break}return console.log("ACCEPT REQUEST RECEIVED -- but not for a game with us in it!"),this.game.halted=0,e.abrupt("return",0);case 12:o="invite_game_"+i.ts,i.players.length,i.players_sigs.length,c=0;case 16:if(!(c<i.players.length)){e.next=24;break}if(n.crypto.verifyMessage(o,i.players_sigs[c],i.players[c])){e.next=21;break}return console.log("PLAYER SIGS do not verify for all players, aborting game acceptance"),this.game.halted=0,e.abrupt("return",0);case 21:c++,e.next=16;break;case 24:if(1!=this.game.over){e.next=27;break}return this.game.halted=0,e.abrupt("return",0);case 27:for(this.gaming_active=1,this.game.options=i.options,this.game.module=i.module,"enable"===this.game.options.observer&&(this.game.observer_mode=1,this.observer_mode=1,this.game.saveGameState=1),l=0;l<i.players.length;l++)this.addPlayer(i.players[l]);if(this.saveGame(s),console.log("game accepted and initial save!"),0==this.game.players_set){for(u=[],d=0;d<this.game.players.length;d++)u.push(this.app.crypto.hash(this.game.players[d]+this.game.id)),this.game.keys.push(this.game.players[d]);for(u.sort(),p=[],h=0;h<u.length;h++)for(f=0;f<this.game.players.length;f++)u[h]===this.app.crypto.hash(this.game.players[f]+this.game.id)&&p.push(this.game.players[f]);for(this.game.players=p,m=0;m<u.length;m++)u[m]===this.app.crypto.hash(this.app.wallet.returnPublicKey()+this.game.id)&&(this.game.player=m+1);for(g=0;g<this.game.players.length;g++)this.game.step.players[this.game.players[g]]=1;this.saveGamePreference(s+"_sharekey",n.crypto.generateRandomNumber()),console.log("!!!!!!!!!!!!!!!!!!!!"),console.log("!!!!!!!!!!!!!!!!!!!!"),console.log("!!!!!!!!!!!!!!!!!!!!"),console.log("My Public Key: "+this.app.wallet.returnPublicKey()),console.log("My Position: "+this.game.player),console.log("My Share Key: "+this.loadGamePreference(s+"_sharekey")),console.log("ALL KEYS: "+JSON.stringify(this.game.players)),console.log("saving with id: "+s),console.log("!!!!!!!!!!!!!!!!!!!!"),console.log("!!!!!!!!!!!!!!!!!!!!"),console.log("!!!!!!!!!!!!!!!!!!!!"),this.game.players_set=1,this.saveGame(s),this.gaming_active=0,this.initializeGameFeeder(s),this.processFutureMoves()}return e.abrupt("return",s);case 36:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r){return O.apply(this,arguments)})},{key:"initialize",value:function(e){if(this.initializeQueueCommands(),0!=this.browser_active){$(".gameboard").height();var t=$(".gameboard").width();this.screenRatio=t/this.gameboardWidth,this.loadGame(),""===this.game.dice&&(this.game.dice=e.crypto.hash(this.game.id)),this.game.clock_spent,this.time.last_received=(new Date).getTime(),this.time.last_sent=(new Date).getTime(),this.initializeGameFeeder(this.game.id)}}},{key:"removeEventsFromBoard",value:function(){}},{key:"initializeGame",value:function(){""==this.game.dice&&(this.initializeDice(),this.queue.push("READY"),this.saveGame(this.game.id))}},{key:"initializeGameFeeder",value:(j=c(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.game&&this.game.id!==t&&this.loadGame(t),this.initializeHTML(this.app),this.attachEvents(this.app),1!=this.game.initialize_game_run||1!=this.initialize_game_run){e.next=7;break}return e.abrupt("return",0);case 7:this.game.initialize_game_run=1,this.initialize_game_run=1;case 9:return this.initializeGame(t),this.game.step.game<2&&(console.log("saving in initializegamefeeder"),this.saveGame(this.game.id)),this.startQueue(),this.gaming_active=0,e.abrupt("return",1);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return j.apply(this,arguments)})},{key:"startQueue",value:function(){this.runQueue(),1!=this.gaming_active&&this.processFutureMoves()}},{key:"runQueue",value:function(){var e=1,a=0,r=0,n="";if(this.game_state_pre_move=JSON.parse(JSON.stringify(this.game)),this.game.queue.length>0)for(;this.game.queue.length>0&&1==e;){a++,r=this.game.queue.length,n=this.game.queue[this.game.queue.length-1],a>=100&&(console.log("ENDLESS QUEUE LOOPING"),t.exit());var i=this.game.queue.length-1,s=this.game.queue[i].split("\t");this.time.last_received=(new Date).getTime();for(var o=0;o<this.commands.length;o++)if(0===this.commands[o](this,s))return 0;if(r==this.game.queue.length&&1==e&&n===this.game.queue[this.game.queue.length-1]&&(e=this.handleGameLoop()),0==e)return this.processFutureMoves(),0}}},{key:"addNextMove",value:function(e){var t=e.returnMessage();if(1==this.game.halted||1==this.gaming_active)return null!=this.game.future&&"undefined"!=this.game.future&&null!=this.game.future||(this.game.future=[]),this.game.id===t.game_id&&this.game.future.push(JSON.stringify(e.transaction)),this.saveFutureMoves(this.game.id),void(this.gaming_active=0);if(t.last_move>0){this.game.step.ts=t.last_move,this.game.step.bid=t.last_bid,this.game.step.tid=t.last_tid;try{window.location.hash="#gid=".concat(this.game.id,"&bid=").concat(this.game.step.bid,"&tid=").concat(this.game.step.tid,"&lm=").concat(this.game.step.ts)}catch(e){console.log("ERROR updating hash in observer mode")}}else window.location.hash="#gid=".concat(this.game.id,"&bid=0&tid=0&lm=").concat((new Date).getTime());if(null==t.turn&&(t.turn=[]),null==t.step&&(t.step={}),this.game.step.players[e.transaction.from[0].add]=t.step.game,t.step.game>this.game.step.game&&(this.game.step.game=t.step.game),0==this.game.player&&(console.log("OBSERVER MODE executing step: "+JSON.stringify(t.step)),t.game_state.deck)){if(t.game_state.deck.length>0)if(console.log("DECK SENT: "+JSON.stringify(t.game_state.deck)),this.game.player_decks);else if(this.game.player_decks=[],this.game.player_decks.length<this.game.players)for(var a=0;a<this.game.players.length;a++)this.game.player_decks.push={},this.game.player_decks[a].deck=[];for(var r=0;r<t.game_state.deck.length;r++)this.game.deck[r]=t.game_state.deck[r];if(t.sharekey){for(var n=0,i=0;i<this.game.players.length;i++)this.game.players[i]===e.transaction.from[0].add&&(n=i);var s=t.sharekey;if(s)for(var o=0;o<t.game_state.deck.length;o++){for(;this.game.player_decks.length<=n;)this.game.player_decks.push({}),this.game.player_decks[this.game.player_decks.length-1].deck=[];for(;this.game.player_decks[n].deck.length<=o;)this.game.player_decks[n].deck.push({});this.game.player_decks[n].deck[o].hand=JSON.parse(this.app.crypto.hexToString(this.app.crypto.decodeXOR(t.game_state.deck[o].hand,s))),this.game.player_decks[n].deck[o].keys=JSON.parse(this.app.crypto.hexToString(this.app.crypto.decodeXOR(t.game_state.deck[o].keys,s)))}}}if(null!=this.game.queue){for(var c=0;c<t.turn.length;c++)this.game.queue.push(t.turn[c]);this.saveFutureMoves(this.game.id),this.saveGame(this.game.id),this.runQueue(),this.processFutureMoves(),this.gaming_active=0}}},{key:"addFutureMove",value:function(e){if(this.game.future.includes(JSON.stringify(e.transaction))||(this.game.future.push(JSON.stringify(e.transaction)),this.saveFutureMoves(this.game.id)),0==this.game.player)try{this.observer.showNextMoveButton()}catch(e){}}},{key:"processFutureMoves",value:function(){if(console.log("function: executing process future moves."),0!=this.game.player){if(1==this.gaming_active)return 0;if(1==this.game.halted)return 0}for(var e=0,t=this.game.future.length,a=0,r=0,n=0,i="",s=t,o=0;t>0&&1!=this.gaming_active&&1!=this.game.halted&&0==e&&o<s;){r++,n=this.game.queue.length,i=this.game.queue[this.game.queue.length-1],a=0;for(var c=0;c<t;c++){var l=new b.transaction(JSON.parse(this.game.future[c])),u=l.returnMessage();this.isUnprocessedMove(this.game.player,u)?(this.game.future.splice(c,1),o++,this.addNextMove(l),a=1):this.isFutureMove(this.game.player,u)?a=1:(this.game.future.splice(c,1),a=1,c--),t=this.game.future.length}t=this.game.future.length,0!=a&&0!=this.game.future.length||(e=1),n==this.game.queue.length&&i==this.game.queue[this.game.queue.length-1]&&0!=r&&(e=1)}}},{key:"handleGameLoop",value:function(){return 0}},{key:"removePlayer",value:function(e){if(""!==e){for(var t=0;t<this.game.players.length;t++)this.game.players[t]===e&&(this.game.players.splice(t,1),this.game.accepted.splice(t,1));for(var a=0;a<this.game.opponents.length;a++)this.game.opponents[a]===e&&this.game.opponents.splice(a,1)}}},{key:"addPlayer",value:function(e){if(""!==e){for(var t=0;t<this.game.players.length;t++)if(this.game.players[t]===e)return;this.game.players.push(e),this.game.accepted.push(0),this.app.wallet.returnPublicKey()!==e&&this.game.opponents.push(e)}}},{key:"receiveGameoverRequest",value:function(e,t,a,r){var n=t.returnMessage(),i=n.game_id,s=n.module,o=r.modules.returnModule(s),c=this.loadGame(i);c&&o.game.players.includes(t.transaction.from[0].add)&&(c.over=1,this.saveGame(i),o.game.queue.push("GAMEOVER\t"),o.runQueue(n),o.gaming_active=0)}},{key:"tieGame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.resignGame(e,1)}},{key:"resignGame",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.loadGame(t),n=this.app.wallet.createUnsignedTransactionWithDefaultFee();if(n.transaction.to=r.players.map((function(e){return new b.slip(e)})),0==r.over){var i=r.winner,s=r.module;i=r.players.find((function(t){return t!=e.app.wallet.returnPublicKey()})),this.game.winner>0&&(i=this.game.players[this.game.winner-1]),1==a&&(i=""),r.over=1,r.last_block=this.app.blockchain.last_bid,this.saveGame(r.id),n.msg={request:"gameover",game_id:r.id,winner:i,module:s,reason:""},n=this.app.wallet.signTransaction(n),this.app.network.propagateTransaction(n)}}},{key:"saveFutureMoves",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!==e){if(this.app.options&&this.app.options.games)for(var t=0;t<this.app.options.games.length;t++)this.app.options.games[t].id===this.game.id&&(this.app.options.games[t].future=this.game.future);this.app.storage.saveOptions()}}},{key:"saveGame",value:(T=c(regeneratorRuntime.mark((function e(a){var r,n,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.app.options&&(this.app.options.games||(this.app.options=Object.assign({games:[],gameprefs:{random:this.app.crypto.generateKeys()}},this.app.options))),void 0===a&&(a=this.app.crypto.hash(Math.random())),null==a){e.next=22;break}if(!this.app.options){e.next=22;break}if(!this.app.options.games){e.next=22;break}r=0;case 6:if(!(r<this.app.options.games.length)){e.next=22;break}if(this.app.options.games[r].id!==a){e.next=19;break}if(null!=this.game){e.next=11;break}return console.log("Saving Game Error: safety catch 1"),e.abrupt("return");case 11:if(this.game.id==a){e.next=14;break}return console.log("Saving Game Error: safety catch 2"),e.abrupt("return");case 14:for(this.game.ts=(new Date).getTime(),n=0;n<this.app.options.games[r].future.length;n++){for(i=0,s=0;s<this.game.future.length;s++)this.app.options.games[r].future[n]===this.game.future[s]&&(i=1);0==i&&this.game.future.push(this.app.options.games[r].future[n])}return this.app.options.games[r]=JSON.parse(JSON.stringify(this.game)),this.app.storage.saveOptions(),e.abrupt("return",new Promise((function(e,t){setTimeout((function(){e(1)}),1e3)})));case 19:r++,e.next=6;break;case 22:return this.game.id===a?this.app.options.games.push(this.game):this.game=this.newGame(a),this.game.id.length<25&&this.game.players_needed>1&&t.exit(),this.app.storage.saveOptions(),e.abrupt("return",new Promise((function(e,t){setTimeout((function(){e(1)}),1e3)})));case 26:case"end":return e.stop()}}),e,this)}))),function(e){return T.apply(this,arguments)})},{key:"deleteGamePreference",value:function(e){return this.app.options&&this.app.options.gameprefs&&this.app.options.gameprefs[e]&&delete this.app.options.gameprefs[e],null}},{key:"loadGamePreference",value:function(e){return this.app.options&&this.app.options.gameprefs?this.app.options.gameprefs[e]:null}},{key:"saveGamePreference",value:function(e,t){null==this.app.options.games&&(this.app.options.games=[]),null==this.app.options.gameprefs&&(this.app.options.gameprefs={},this.app.options.gameprefs.random=this.app.crypto.generateKeys()),this.app.options.gameprefs[e]=t,this.app.storage.saveOptions()}},{key:"loadGame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==this.app.options.games&&(this.app.options.games=[]),null==this.app.options.gameprefs&&(this.app.options.gameprefs={},this.app.options.gameprefs.random=this.app.crypto.generateKeys()),null==e){for(var t=0,a=0;a<this.app.options.games.length;a++)this.app.options.games[a].ts>this.app.options.games[t].ts&&(t=a);e=null==this.app.options.games||0==this.app.options.games.length?null:this.app.options.games[t].id}if(null!=e)for(var r=0;r<this.app.options.games.length;r++)if(this.app.options.games[r].id===e)return this.game=JSON.parse(JSON.stringify(this.app.options.games[r])),this.game;return this.game=this.newGame(e),this.saveGame(e),this.game}},{key:"newGame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e&&(e=Math.random().toString());var t={};return t.id=e,t.confirms_needed=[],t.crypto="",t.player=1,t.players=[],t.keys=[],t.players_needed=1,t.accepted=[],t.players_set=0,t.target=1,t.invitation=1,t.initializing=1,t.initialize_game_run=0,t.accept=0,t.over=0,t.winner=0,t.module="",t.originator="",t.ts=(new Date).getTime(),t.last_block=0,t.options={},t.options.ver=1,t.invite_sig="",t.future=[],t.halted=0,t.lock_interface=0,t.saveGameState=0,t.clock_spent=0,t.clock_limit=0,t.step={},t.step.game=1,t.step.players={},t.step.ts=0,t.queue=[],t.turn=[],t.opponents=[],t.deck=[],t.pool=[],t.dice="",t.status="",t.log=[],t}},{key:"rollDice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.game.dice=this.app.crypto.hash(this.game.dice);var a=parseInt(this.game.dice.slice(0,12),16)%e;if(null==t)return a+1;t(a+1)}},{key:"initializeDice",value:function(){""===this.game.dice&&(this.game.dice=this.app.crypto.hash(this.game.id))}},{key:"scale",value:function(e){return Math.floor(this.screenRatio*e)}},{key:"shuffleArray",value:function(e){var t,a,r;for(r=e.length-1;r>0;r--)t=Math.floor(Math.random()*(r+1)),a=e[r],e[r]=e[t],e[t]=a;return e}},{key:"returnNextPlayer",value:function(e){var t=parseInt(e)+1;return t>this.game.players.length?1:t}},{key:"shuffleDeck",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],a=[],r=this.game.deck[e-1].crypt,n=this.game.deck[e-1].keys,i=this.game.deck[e-1].crypt.length,s=i,o=0;o<i;o++){var c=this.rollDice(s)-1;t.push(r[c]),a.push(n[c]),r.splice(c,1),n.splice(c,1),s--}this.game.deck[e-1].crypt=t,this.game.deck[e-1].keys=a}},{key:"sendMessage",value:(g=c(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s,o,c,l,u,d,p,h,f,m,g,y=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:"game",a=y.length>1&&void 0!==y[1]?y[1]:{},y.length>2&&void 0!==y[2]&&y[2],1!=this.confirm_moves||1!=this.confirm_this_move){e.next=12;break}if(!(this.game.turn.length>0)){e.next=12;break}return e.next=7,sconfirm("Submit this move?");case 7:if(e.sent){e.next=11;break}return window.location.reload(),e.abrupt("return");case 11:this.confirm_this_move=0;case 12:if(this.time.last_sent=(new Date).getTime(),!(this.time.last_sent>this.time.last_received+1e3)){e.next=22;break}if(this.game.clock_spent+=this.time.last_sent-this.time.last_received,r=this.game.clock_limit-this.game.clock_spent,this.clock.displayTime(r),!(r<0&&this.game.clock_limit>0)){e.next=21;break}this.resignGame();try{this.displayModal("<span>The Game is Over</span> - <span>Player "+this.game.player+" loses by timeout</span>"),this.updateStatus("<span>The Game is Over</span> - <span>Player "+this.game.player+" loses by timeout</span>"),this.updateLog("<span>The Game is Over</span> - <span>Player "+this.game.player+" loses by timeout</span>")}catch(e){}return e.abrupt("return",0);case 21:this.stopClock();case 22:if(0!=this.game.player){e.next=24;break}return e.abrupt("return");case 24:if(null!=this.game.opponents){e.next=26;break}return e.abrupt("return");case 26:for(n=0,i=0;i<this.game.turn.length;i++)"READY"==this.game.turn[i]&&(n=1);if(s=this,o={},(c={}).game=this.game.step.game,"game"==t&&(c.game++,o.request="game"),1==this.game.saveGameState&&(0==this.observer_mode&&(this.game.turn.push("OBSERVER\t"+this.game.player+"\t1"),this.game.turn.push("SETVAR\tsaveGameState\t1")),o.game_state=this.returnPreMoveGameState(),o.sharekey=this.loadGamePreference(this.game.id+"_sharekey")),"SAITO"!==s.game.crypto&&""!==s.game.crypto)for(l=this.app.wallet.returnCryptoModuleByTicker(s.game.crypto),u=this.app.wallet.returnPublicKey(),l&&(u=l.returnAddress()),d=0;d<this.game.players.length;d++)this.game.players[d]==this.app.wallet.returnPublicKey()&&this.game.keys[d]!==u&&this.game.turn.push("CRYPTOKEY\t"+this.app.wallet.returnPublicKey()+"\t"+u+"\t"+this.app.crypto.signMessage(u,this.app.wallet.returnPrivateKey()));else for(p=this.app.wallet.returnPublicKey(),h=0;h<this.game.players.length;h++)this.game.players[h]==this.app.wallet.returnPublicKey()&&this.game.keys[h]!==p&&this.game.turn.push("CRYPTOKEY\t"+p+"\t"+p+"\t"+this.app.crypto.signMessage(p,this.app.wallet.returnPrivateKey()));if(o.turn=this.game.turn,o.module=this.name,o.game_id=this.game.id,o.player=this.game.player,o.step=c,o.extra=a,null!=(f=this.app.wallet.createUnsignedTransactionWithDefaultFee(this.app.wallet.returnPublicKey(),0))){e.next=44;break}return e.abrupt("return");case 44:for(m=0;m<this.game.opponents.length;m++)f.transaction.to.push(new b.slip(this.game.opponents[m],0));f.msg=o,f=this.app.wallet.signTransaction(f),s.app.wallet.wallet.pending.push(JSON.stringify(f.transaction)),s.app.wallet.saveWallet(),s.saveGame(s.game.id),this.relay_moves_offchain_if_possible&&0==n&&("game"!==f.msg.request&&1!=this.initialize_game_offchain_if_possible||null==(g=this.app.modules.returnModule("Relay"))||0!=s.game.initializing&&1!=s.initialize_game_offchain_if_possible||g.sendRelayMessage(this.game.players,"game relay gamemove",f)),s.app.network.propagateTransactionWithCallback(f,(function(e){}));case 52:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"handlePeerRequest",value:(o=c(regeneratorRuntime.mark((function e(t,a,r){var n,i,s,o,c,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>3&&void 0!==l[3]?l[3]:null,0!=t.BROWSER){e.next=3;break}return e.abrupt("return");case 3:return i=this,e.next=6,u(m(q.prototype),"handlePeerRequest",this).call(this,t,a,r,n);case 6:if("game relay gamemove"!==a.request){e.next=34;break}if(null==a.data){e.next=34;break}if(s=new b.transaction(a.data.transaction),o=s.returnMessage(),i.doesGameExistLocally(o.game_id)){e.next=13;break}return console.log("Game does not exist locally. Not processing HPR message: waiting for on-chain"),e.abrupt("return");case 13:if(o.module!=this.name){e.next=34;break}if(i.game&&i.game.id==o.game_id||""==o.game_id){e.next=32;break}c=0;case 16:if(!(c<o.turn.length)){e.next=32;break}if(!(o.turn[c].indexOf("FLIP")>-1)){e.next=20;break}return console.log("ERROR: game does not exist but off-chain flip creation received. Waiting for on-chain confirmation"),e.abrupt("return");case 20:if(!(o.turn[c].indexOf("DECK")>-1)){e.next=23;break}return console.log("ERROR: game does not exist but off-chain deck creation received. Waiting for on-chain confirmation"),e.abrupt("return");case 23:if(!(o.turn[c].indexOf("ISSUEKEYS")>-1)){e.next=26;break}return console.log("ERROR: game does not exist but off-chain issuekeys request received. Waiting for on-chain confirmation"),e.abrupt("return");case 26:if(!(o.turn[c].indexOf("RESOLVE")>-1)){e.next=29;break}return console.log("ERROR: game does not exist but off-chain resolve request received. Waiting for on-chain confirmation"),e.abrupt("return");case 29:c++,e.next=16;break;case 32:i.game&&i.game.id==o.game_id||""==o.game_id||(i.game=i.loadGame(o.game_id),i.runQueue()),i.isFutureMove(s.transaction.from[0].add,o)?i.addFutureMove(s):i.isUnprocessedMove(s.transaction.from[0].add,o)&&i.addNextMove(s);case 34:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return o.apply(this,arguments)})},{key:"addPool",value:function(){var e=this.game.pool.length;this.resetPool(e)}},{key:"addDeck",value:function(){var e=this.game.deck.length;this.resetDeck(e)}},{key:"resetPool",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.game.pool[e]={},this.game.pool[e].cards={},this.game.pool[e].crypt=[],this.game.pool[e].keys=[],this.game.pool[e].hand=[],this.game.pool[e].decrypted=0}},{key:"resetDeck",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.game.deck[e]={},this.game.deck[e].cards={},this.game.deck[e].crypt=[],this.game.deck[e].keys=[],this.game.deck[e].hand=[],this.game.deck[e].xor="",this.game.deck[e].discards={},this.game.deck[e].removed={}}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(1!=this.lock_interface||0!=t)if(this.game.status=e,this.useHUD)this.hud.updateStatus(e);else try{if(1==this.browser_active){var a=document.getElementById("status");a.innerHTML=e}}catch(e){console.log("Error Updating Log: ignoring")}}},{key:"updateLog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e&&(this.game.log.includes(e)||(this.game.log.unshift(e),this.game.log.length>t&&(this.game.log_length>t||this.game.log.splice(t)))),this.log.updateLog(e,this.addLogCardEvents.bind(this),a)}},{key:"returnPreMoveGameState",value:function(){for(var e=JSON.parse(JSON.stringify(this.game_state_pre_move)),t=this.loadGamePreference(this.game.id+"_sharekey"),a=0;a<e.deck.length;a++)t?(e.deck[a].hand=this.app.crypto.encodeXOR(this.app.crypto.stringToHex(JSON.stringify(e.deck[a].hand)),t),e.deck[a].keys=this.app.crypto.encodeXOR(this.app.crypto.stringToHex(JSON.stringify(e.deck[a].keys)),t)):(e.deck[a].keys=[],e.deck[a].hand=[]);return e}},{key:"returnGameState",value:function(){for(var e=JSON.parse(JSON.stringify(this.game)),t=this.loadGamePreference(this.game.id+"_sharekey"),a=0;a<e.deck.length;a++)t?(e.deck[a].hand=this.app.crypto.encodeXOR(this.app.crypto.stringToHex(JSON.stringify(e.deck[a].hand)),t),e.deck[a].keys=this.app.crypto.encodeXOR(this.app.crypto.stringToHex(JSON.stringify(e.deck[a].keys)),t)):(e.deck[a].keys=[],e.deck[a].hand=[]);return e}},{key:"returnGameOptionsHTML",value:function(){return""}},{key:"returnFormattedGameOptions",value:function(e){return e}},{key:"returnGameRowOptionsHTML",value:function(e){var t="";for(var a in e)"clock"==a&&e[a],t+='<span class="game-option">'+a+": "+e[a]+"</span>, ";return t=t.slice(0,-2)}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"removeMove",value:function(){return this.moves.pop()}},{key:"endTurn",value:function(){var e={};this.game.turn=this.moves,this.moves=[],this.sendMessage("game",e)}},{key:"returnCardList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";for(i=0;i<e.length;i++)t+=this.returnCardItem(e[i]);return'<div class="status-cardbox" id="status-cardbox">'.concat(t,"</div>")}},{key:"returnCardItem",value:function(e){for(var t=0;t<this.game.deck.length;t++)if(null!=this.game.deck[t].cards[e])return'<div id="'.concat(e.replace(/ /g,""),'" class="card cardbox-hud cardbox-hud-status">').concat(this.returnCardImage(e),"</div>");return'<li class="card showcard" id="'+e+'">'+this.game.deck[0].cards[e].name+"</li>"}},{key:"returnCardImage",value:function(e){for(var t=null,a=0;null==t&&a<this.game.deck.length;a++)null==(t=this.game.deck[a].cards[e])&&(t=this.game.deck[a].discards[e]),null==t&&(t=this.game.deck[a].removed[e]);return null==t?'<div class="noncard">'+e+"</div>":'<img class="cardimg showcard" id="'.concat(e,'" src="/').concat(this.returnSlug(),"/img/").concat(t.img,'" />')}},{key:"returnDiscardedCards",value:function(e){var t={};for(var a in e=parseInt(e-1),this.game.deck[e].discards)t[a]=this.game.deck[0].cards[a],delete this.game.deck[0].cards[a];return this.game.deck[0].discards={},t}},{key:"showCard",value:function(e){var t=this.returnCardImage(e),a=this.app.browser.isMobileBrowser(navigator.userAgent)?"".concat(t,'\n        <div id="cardbox-exit-background">\n          <div class="cardbox-exit" id="cardbox-exit">×</div>\n        </div>'):t;$("#cardbox").html(a),$("#cardbox").show()}},{key:"showPlayableCard",value:function(e){var t=this.returnCardImage(e),a=this.app.browser.isMobileBrowser(navigator.userAgent)?"".concat(t,'\n      <div id="cardbox-exit-background">\n        <div class="cardbox-exit" id="cardbox-exit">×</div>\n      </div>\n      <div class="cardbox_menu_playcard cardbox_menu_btn" id="cardbox_menu_playcard">\n        PLAY\n      </div>'):t;$("#cardbox").html(a),$("#cardbox").show()}},{key:"hideCard",value:function(){$("#cardbox").hide()}},{key:"updateStatusAndListCards",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;html='\n      <div class="status-message">\n        '.concat(e,"\n      </div>\n      ").concat(this.returnCardList(t),"\n    "),this.updateStatus(html),this.addShowCardEvents(a)}},{key:"addShowCardEvents",value:function(e){this.changeable_callback=e,this.hud.attachCardEvents(this.app,this)}},{key:"addLogCardEvents",value:function(){var e=this;if(!this.app.browser.isMobileBrowser(navigator.userAgent))try{$(".logcard").off(),$(".logcard").mouseover((function(){var t=$(this).attr("id");e.showCard(t)})).mouseout((function(){var t=$(this).attr("id");e.hideCard(t)}))}catch(e){}}},{key:"removeCardFromHand",value:function(e){for(var t=0;t<this.game.deck.length;t++)for(i=0;i<this.game.deck[t].hand.length;i++)this.game.deck[t].hand[i]===e&&this.game.deck[t].hand.splice(i,1)}},{key:"returnGameOptionsHTML",value:function(){return'\n      <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n    '}},{key:"returnPlayersBoxArray",value:function(){var e=[];return 2==this.game.players.length&&(e=[1,4]),3==this.game.players.length&&(e=[1,3,5]),4==this.game.players.length&&(e=[1,3,4,5]),5==this.game.players.length&&(e=[1,2,3,5,6]),6==this.game.players.length&&(e=[1,2,3,4,5,6]),e}},{key:"returnViewBoxArray",value:function(){var e=[];return 2==this.game.players.length&&(e=[3,5]),3==this.game.players.length&&(e=[3,4,5]),4==this.game.players.length&&(e=[2,3,5,6]),5==this.game.players.length&&(e=[2,3,4,5,6]),e}},{key:"playerAcknowledgeNotice",value:function(e,t){var a='<div class="status-message acknowledge-message">'+e+"</div><ul>";a+='<li class="textchoice" id="confirmit">I understand...</li>',a+="</ul></p>",this.updateStatus(a);try{var r=document.querySelector(".hud-header");r&&(document.querySelector("#confirmit").style.width=r.style.width)}catch(e){}return document.getElementById("confirmit").onclick=function(e){t()},0}},{key:"playerTurn",value:function(){}},{key:"addPublickeyConfirm",value:function(e,t){this.game.tmp_confirms_received+=parseInt(t),this.game.tmp_confirms_players.push(e)}},{key:"resetConfirmsNeeded",value:function(e){this.game.confirms_needed=[],this.game.confirms_received=0,this.game.confirms_players=[],this.game.tmp_confirms_received=0,this.game.tmp_confirms_players=[];for(var t=0;t<this.game.players.length;t++)e.includes(t+1)?this.game.confirms_needed[t]=1:this.game.confirms_needed[t]=0}},{key:"returnPlayerName",value:function(e){return this.game.players[e-1].substring(0,11)}},{key:"endGame",value:function(e,t){if(this.game.over=1,this.game.winner=e,this.game.winner==this.game.player&&(this.game.over=0,this.resignGame()),1==this.browser_active)try{this.displayModal("<span>The Game is Over</span> - <span>"+e.toUpperCase()+"</span> <span>wins by</span> <span>"+t+"<span>"),this.updateStatus("<span>The Game is Over</span> - <span>"+e.toUpperCase()+"</span> <span>wins by</span> <span>"+t+"<span>")}catch(e){}}},{key:"formatStatusHeader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a='<i class="fa fa-arrow-left" id="back_button"></i>';return'\n    <div class="status-header">\n      '.concat(t?a:"",'\n      <div style="text-align: center;">\n        ').concat(e,"\n      </div>\n    </div>\n    ")}},{key:"startClock",value:function(){var e=this;clearInterval(this.clock_timer),this.clock_timer=setInterval((function(){var t=(new Date).getTime(),a=e.game.clock_limit-(t-e.time.last_received)-e.game.clock_spent;e.clock.displayTime(a)}),1e3)}},{key:"stopClock",value:function(){clearInterval(this.clock_timer)}},{key:"lockInterface",value:function(){this.lock_interface=1,this.lock_interface_step=this.game.queue[this.game.queue.length-1]}},{key:"unlockInterface",value:function(){this.lock_interface=0}},{key:"mayUnlockInterface",value:function(){return this.lock_interface_step===this.game.queue[this.game.queue.length-1]?1:0}},{key:"initializeQueueCommands",value:function(){var e=this;this.commands.push((function(e,t){return"SETVAR"===t[0]&&(t[1]&&(t[3]?t[4]?e.game[t[1]][t[2]][t[3]]=t[4]:e.game[t[1]][t[2]]=t[3]:t[2]&&(e.game[t[1]]=t[2])),e.game.queue.splice(e.game.queue.length-1,1)),1})),this.commands.push((function(e,t){return"NOTIFY"!==t[0]&&"notify"!==t[0]||(e.updateLog(t[1]),e.game.queue.splice(e.game.queue.length-1,1)),1})),this.commands.push((function(e,t){return"STATUS"!==t[0]&&"status"!==t[0]||(e.updateStatus(t[1]),e.game.queue.splice(e.game.queue.length-1,1)),1})),this.commands.push((function(e,t){if("ACKNOWLEDGE"===t[0]){var a=t[1];e.game.halted=1;var r=e.game.id;return e.saveGame(e.game.id),e.playerAcknowledgeNotice(a,(function(){return e.game.id!=r&&(e.game=e.loadGame(r)),e.updateStatus(" acknowledged..."),e.game.queue.splice(e.game.queue.length-1,1),e.game.halted=0,e.saveGame(e.game.id),0==e.runQueue()&&e.processFutureMoves(),0})),0}return 1})),this.commands.push((function(e,t){return"GAMEOVER"===t[0]?(1==e.browser_active&&e.updateLog("Player has Quit the Game"),0):1})),this.commands.push((function(e,t){if("OBSERVER"===t[0]){var a={game_id:e.game.id,player:e.app.wallet.returnPublicKey(),module:e.game.module};e.app.crypto.stringToBase64(JSON.stringify(a)),e.observer_mode=1,e.game.saveGameState=1,e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(e,t){if("PLAY"===t[0]){var a=[];if("all"===t[1])for(var r=0;r<e.game.players.length;r++)a.push(r+1);else try{a=t[1].isArray()?t[1]:[t[1]]}catch(e){a=t[1]}for(var n=1,i=0;i<e.game.confirms_needed.length;i++)1==e.game.confirms_needed[i]&&(n=0);1==n&&e.resetConfirmsNeeded(a);for(var s=0;s<a.length;s++)e.game.player==parseInt(a[s])&&1==e.game.confirms_needed[a[s]-1]&&e.playerTurn();return 0}return 1})),this.commands.push((function(e,t){if("RESOLVE"===t[0]){if(!t[1]){if(e.game.queue.length-1==0)return e.game.queue=[],1;var a=e.game.queue.length-2;return"RESOLVE"===e.game.queue[a]?(e.game.queue.splice(e.game.queue.length-1,1),1):a<=0?(e.game.queue=[],1):(e.game.queue.splice(a,2),1)}for(var r=0;r<e.game.players.length;r++)e.game.players[r]===t[1]&&(e.game.confirms_needed[r]=0);e.app.wallet.returnPublicKey()===t[1]&&e.unlockInterface();for(var n=1,i=0;i<e.game.confirms_needed.length;i++)1==e.game.confirms_needed[i]&&(n=0);for(var s="Players still to move: <ul>",o=0,c=0;c<e.game.confirms_needed.length;c++)1==e.game.confirms_needed[c]&&(s+='<li class="option">'+e.returnPlayerName(c+1)+"</li>"),e.game.player==c+1&&(o=e.game.confirms_needed[c]);if(s+="</ul>",0==o&&e.updateStatus(s),1==n){if(e.game.queue.length-1==0)return e.game.queue=[],1;var l=e.game.queue.length-2;return"RESOLVE"===e.game.queue[l]?(e.game.queue.splice(e.game.queue.length-1,1),1):l<=0?(e.game.queue=[],1):(e.game.queue.splice(l,2),1)}return e.game.queue.splice(e.game.queue.length-1,1),1}return 1})),this.commands.push((function(e,t){if("READY"==t[0]&&(e.game.initializing=0,e.game.queue.splice(e.game.queue.length-1,1),e.saveGame(e.game.id),e.app.modules.isModuleActive("Arcade"))){var a=e.app.modules.returnModule("Arcade");null==a.initialization_timer&&(console.log("We seem to have loaded into a READY process while viewing the arcade, but our game is not waiting for the initialization screen, so we should check and show that launch screen."),a.launchGame(e.game.id))}return 1})),this.commands.push((function(e,t){return"SHUFFLE"===t[0]&&(e.shuffleDeck(parseInt(t[1])),e.game.queue.splice(e.game.queue.length-1,1)),1})),this.commands.push((function(e,t){if("RESOLVEDEAL"===t[0]){var a=t[1],r=t[2],n=t[3];if(e.game.player==r)for(var i=0;i<n;i++){var s=e.game.deck[a-1].crypt[i];null!=e.game.deck[a-1].keys[i]&&(s=e.app.crypto.decodeXOR(s,e.game.deck[a-1].keys[i])),s=e.app.crypto.hexToString(s),e.game.deck[a-1].hand.includes(s)||e.game.deck[a-1].hand.push(s)}if(e.game.queue.length-1==0)e.game.queue=[];else{var o=e.game.queue.length-2;o<=0?e.game.queue=[]:e.game.queue.splice(o,2)}if(0==e.game.player)return 0==e.game.issued_keys_deleted&&(e.game.issued_keys_deleted=1),1;0==e.game.issued_keys_deleted&&(e.game.deck[a-1].keys=e.game.deck[a-1].keys.splice(n,e.game.deck[a-1].keys.length-n),e.game.deck[a-1].crypt=e.game.deck[a-1].crypt.splice(n,e.game.deck[a-1].crypt.length-n),e.game.issued_keys_deleted=1)}return 1})),this.commands.push((function(e,t){if("RESOLVEFLIP"===t[0]){for(var a=t[1],r=t[2],n=t[3],i=e.game.opponents.length+1;e.game.pool.length<n;)e.addPool();if(0==e.game.pool[n-1].crypt.length){e.game.pool[n-1].cards=e.game.deck[a-1].cards;for(var s=0;s<r;s++){e.game.pool[n-1].crypt.push(e.game.deck[a-1].crypt[s]);for(var o=0;o<i;o++)e.game.pool[n-1].keys.push([])}}var c=e.game.queue.length-1;e.game.queue.splice(e.game.queue.length-1,1);for(var l=0;l<r;l++){var u=e.game.pool[n-1].crypt[0+l],d=e.game.queue[c-1-l];e.game.pool[n-1].keys[0+l].push(d),null==d||(u=e.app.crypto.decodeXOR(u,d)),e.game.pool[n-1].crypt[0+l]=u}if(e.game.queue.splice(c-r,r),e.game.pool[n-1].decrypted++,e.game.pool[n-1].decrypted==i){for(var p=0;p<r;p++)e.game.pool[n-1].hand.push(e.app.crypto.hexToString(e.game.pool[n-1].crypt[0])),e.game.pool[n-1].crypt.splice(0,1);e.game.deck[a-1].keys=e.game.deck[a-1].keys.splice(r,e.game.deck[a-1].keys.length-r),e.game.deck[a-1].crypt=e.game.deck[a-1].crypt.splice(r,e.game.deck[a-1].crypt.length-r)}}return 1})),this.commands.push((function(e,t){if("DEAL"===t[0]){var a=parseInt(t[1]),r=parseInt(t[2]),n=parseInt(t[3]);e.game.issued_keys_deleted=0;var i=e.game.opponents.length+1;if(1==i)e.game.queue.push("RESOLVEDEAL\t"+a+"\t"+r+"\t"+n);else{e.game.queue.push("RESOLVEDEAL\t"+a+"\t"+r+"\t"+n);for(var s=1;s<i+1;s++)s!=r&&e.game.queue.push("REQUESTKEYS\t"+a+"\t"+s+"\t"+r+"\t"+n)}}return 1})),this.commands.push((function(t,a){if("SAFEDEAL"===a[0]){t.game.queue.splice(t.game.queue.length-1,1);var r=parseInt(a[1]),n=parseInt(a[2]),i=parseInt(a[3]);if(t.game.deck[r-1].crypt.length>=i)e.game.queue.push("DEAL\t"+r+"\t"+n+"\t"+i);else{e.game.queue.push("DEAL\t"+r+"\t"+n+"\t"+i);var s={};for(var o in e.game.deck[r-1].discards)s[o]=e.game.deck[r-1].cards[o],delete e.game.deck[r-1].cards[o];if(e.game.deck[r-1].discards={},Object.keys(s).length<=0)e.updateLog("skipping deal - no cards available and no discards for reshuffling");else{e.game.queue.push("SHUFFLE\t"+r),e.game.queue.push("DECKRESTORE\t"+r);for(var c=e.game.players.length;c>=1;c--)e.game.queue.push("DECKENCRYPT\t"+r+"\t"+c);for(var l=e.game.players.length;l>=1;l--)e.game.queue.push("DECKXOR\t"+r+"\t"+l);e.game.queue.push("DECK\t"+r+"\t"+JSON.stringify(s)),e.game.queue.push("DECKBACKUP\t"+r),e.updateLog("notify\tshuffling discards back into deck...")}}}return 1})),this.commands.push((function(e,t){if("REQUESTKEYS"===t[0]){var a=parseInt(t[1]),r=parseInt(t[2]),n=parseInt(t[3]),i=parseInt(t[4]);if(e.game.deck[a-1].keys.length<i&&(i=e.game.deck[a-1].keys.length),e.game.player==r){e.game.turn=[],e.addMove("RESOLVE");for(var s=0;s<i;s++)e.addMove(e.game.deck[a-1].keys[s]);e.addMove("ISSUEKEYS\t"+a+"\t"+r+"\t"+n+"\t"+i+"\t"+e.game.deck[a-1].keys.length),e.endTurn()}return 0}return 1})),this.commands.push((function(e,t){if("ISSUEKEYS"===t[0]){var a=parseInt(t[1]),r=(parseInt(t[2]),parseInt(t[3])),n=parseInt(t[4]),i=parseInt(t[5]),s=e.game.queue.length-1-n;e.game.queue.splice(e.game.queue.length-1,1);var o=e.game.deck[a-1].crypt.length;if(e.game.player==r&&o==i)for(var c=0;c<n;c++)null!=e.game.queue[s+c]&&(e.game.deck[a-1].crypt[c]=e.app.crypto.decodeXOR(e.game.deck[a-1].crypt[c],e.game.queue[s+c]));e.game.queue.splice(s,n)}return 1})),this.commands.push((function(e,t){if("DECKBACKUP"===t[0]){var a=parseInt(t[1]);e.old_discards=e.game.deck[a-1].discards,e.old_removed=e.game.deck[a-1].removed,e.old_cards={},e.old_crypt=[],e.old_keys=[],e.old_hand=[];for(var r=0;r<e.game.deck[a-1].crypt.length;r++)e.old_crypt[r]=e.game.deck[a-1].crypt[r],e.old_keys[r]=e.game.deck[a-1].keys[r];for(var n in e.game.deck[a-1].cards)e.old_cards[n]=e.game.deck[a-1].cards[n];for(var i=0;i<e.game.deck[a-1].hand.length;i++)e.old_hand[i]=e.game.deck[a-1].hand[i];e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(e,t){if("DECKRESTORE"===t[0]){for(var a=t[1],r=e.old_crypt.length-1;r>=0;r--)e.game.deck[a-1].crypt.unshift(e.old_crypt[r]),e.game.deck[a-1].keys.unshift(e.old_keys[r]);for(var n in e.old_cards)e.game.deck[a-1].cards[n]=e.old_cards[n];for(var i=e.old_hand.length-1;i>=0;i--)e.game.deck[a-1].hand.unshift(e.old_hand[i]);e.game.deck[a-1].removed=e.old_removed,e.game.deck[a-1].discards=e.old_discards,e.old_removed={},e.old_discards={},e.old_cards={},e.old_crypt=[],e.old_keys=[],e.old_hand=[],e.game.queue.splice(e.game.queue.length-1,1)}})),this.commands.push((function(e,t){if("CARDS"===t[0]){var a=parseInt(t[1]),r=e.game.queue.length-1;console.log(e.game.queue),e.game.queue.splice(e.game.queue.length-1,1),null==e.game.deck[a-1]&&(console.log("INIT ERROR: needing to create this deck"),console.log("deckidx: "+a),console.log("DECK: "+JSON.stringify(e.game.deck)));for(var n=0;n<parseInt(t[2]);n++)0!=e.game.player&&(e.game.deck[a-1].crypt[parseInt(t[2])-1-n]=e.game.queue[r-1-n]),e.game.queue.splice(r-1-n,1)}return 1})),this.commands.push((function(e,t){if("POOL"===t[0]){var a=t[1];for(e.resetPool(a-1);e.game.pool.length<a;)e.addPool();e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(e,t){if("FLIPRESET"===t[0]){for(var a=t[1];e.game.pool.length<a;)e.addPool();e.game.pool[a-1].crypt=[],e.game.pool[a-1].keys=[],e.game.pool[a-1].decrypted=0,e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(e,t){if("FLIPCARD"===t[0]){var a=t[1],r=t[2],n=t[3];if(parseInt(t[4])!=e.game.player)return 0;for(;e.game.pool.length<n;)e.addPool();e.game.turn=[],e.game.turn.push("RESOLVE");for(var i=0;i<r&&i<e.game.deck[a-1].crypt.length;i++)e.game.turn.push(e.game.deck[a-1].keys[i]);return e.game.turn.push("RESOLVEFLIP\t"+a+"\t"+r+"\t"+n),e.sendMessage("game",{}),0}return 1})),this.commands.push((function(e,t){return"OBSERVER_CHECKPOINT"===t[0]&&0==e.game.player?(e.game.halted=1,e.saveGame(e.game.id),0):1})),this.commands.push((function(e,t){if("DECK"===t[0]){var a=parseInt(t[1]),r=JSON.parse(t[2]),n=a-1;for(e.resetDeck(a-1);e.game.deck.length<a;)e.addDeck();e.game.deck[a-1].cards=r;var i=0;for(var s in e.game.deck[n].cards)e.game.deck[n].crypt[i]=e.app.crypto.stringToHex(s),i++;e.game.queue.splice(e.game.queue.length-1,1)}return 1})),this.commands.push((function(t,a){if("DECKANDENCRYPT"===a[0]){var r=parseInt(a[1]),n=parseInt(a[2]),i=JSON.parse(a[3]);for(t.resetDeck(r-1);t.game.deck.length<r;)t.addDeck();t.game.deck[r-1].cards=i;var s=0;for(var o in t.game.deck[r-1].cards)t.game.deck[r-1].crypt[s]=t.app.crypto.stringToHex(o),s++;t.game.queue.splice(t.game.queue.length-1,1);for(var c=n;c>0;c--)e.game.queue.push("DECKENCRYPT\t"+r+"\t"+c);for(var l=n;l>0;l--)e.game.queue.push("DECKXOR\t"+r+"\t"+l)}return 1})),this.commands.push((function(e,t){if("DECKXOR"===t[0]){var a=t[1];if(t[2]!=e.game.player)return 0;""==e.game.deck[a-1].xor&&(e.game.deck[a-1].xor=e.app.crypto.hash(Math.random()));for(var r=0;r<e.game.deck[a-1].crypt.length;r++)e.game.deck[a-1].crypt[r]=e.app.crypto.encodeXOR(e.game.deck[a-1].crypt[r],e.game.deck[a-1].xor),e.game.deck[a-1].keys[r]=e.app.crypto.generateKeys();e.game.deck[a-1].crypt=e.shuffleArray(e.game.deck[a-1].crypt),e.game.turn=[],e.game.turn.push("RESOLVE");for(var n=0;n<e.game.deck[a-1].crypt.length;n++)e.game.turn.push(e.game.deck[a-1].crypt[n]);return e.game.turn.push("CARDS\t"+a+"\t"+e.game.deck[a-1].crypt.length),e.sendMessage("game",{}),0}return 1})),this.commands.push((function(t,a){if("DECKFLUSH"===a[0]){var r=parseInt(a[1]);"discards"==a[2]&&(e.game.deck[r].discards={}),e.game.queue.splice(qe,1)}return 1})),this.commands.push((function(e,t){if("DECKENCRYPT"===t[0]){var a=t[1];if(e.game.player==t[2]){for(var r=0;r<e.game.deck[a-1].crypt.length;r++)e.game.deck[a-1].crypt[r]=e.app.crypto.decodeXOR(e.game.deck[a-1].crypt[r],e.game.deck[a-1].xor),e.game.deck[a-1].crypt[r]=e.app.crypto.encodeXOR(e.game.deck[a-1].crypt[r],e.game.deck[a-1].keys[r]);e.game.turn=[],e.game.turn.push("RESOLVE");for(var n=0;n<e.game.deck[a-1].crypt.length;n++)e.game.turn.push(e.game.deck[a-1].crypt[n]);e.game.turn.push("CARDS\t"+a+"\t"+e.game.deck[a-1].crypt.length),e.sendMessage("game",{})}return 0}return 1})),this.commands.push((function(e,t){null!==t[0]&&"null"!=t[0]||(console.log("REMOVING NULL ENTRY"),e.game.queue.splice(e.game.queue.length-1,1))})),this.commands.push((function(t,a){if("SEND"===a[0]){var r=a[1],n=a[2],i=a[3],s=a[4],o=t.game.crypto;if(a[5]&&(o=a[5]),!e.app.wallet.isOurPreferredCryptoAddress(r,o))return t.game.queue.splice(t.game.queue.length-1,1),1;for(var c="",l="",u=0;u<t.game.players.length;u++)t.game.players[u]===r&&(c=t.game.keys[u]),t.game.players[u]===n&&(l=t.game.keys[u]);var d=t.game.id;return t.saveGame(t.game.id),t.game.halted=1,t.crypto_transfer_manager.send(e.app,e,[c],[l],[i],s,o,(function(){return t.app.wallet.sendPayment([c],[l],[i],s,(function(e){return t.game.id!=d&&(t.game=t.loadGame(d)),t.updateLog("payments issued..."),t.game.queue.splice(t.game.queue.length-1,1),t.game.halted=0,t.saveGame(t.game.id),0==t.runQueue()&&t.processFutureMoves(),0}),o),0})),0}return 1})),this.commands.push((function(e,t){if("CRYPTOKEY"===t[0]){var a=t[1],r=t[2],n=t[3];if(e.app.crypto.verifyMessage(r,n,a))for(var i=0;i<e.game.keys.length;i++)e.game.players[i]===a&&(e.game.keys[i]=r);return e.game.queue.splice(e.game.queue.length-1,1),1}return 1})),this.commands.push((function(t,a){if("RECEIVE"===a[0]){var r=a[1],n=a[2],i=a[3],s=a[4],o=t.game.crypto;a[5]&&(o=a[5]);for(var c="",l="",u=0;u<t.game.players.length;u++)t.game.players[u]===r&&(c=t.game.keys[u]),t.game.players[u]===n&&(l=t.game.keys[u]);var d=t.game.id;return t.saveGame(t.game.id),t.game.halted=1,t.crypto_transfer_manager.receive(e.app,e,[r],[n],[i],s,o,(function(){return t.app.wallet.receivePayment([c],[l],[i],s,(function(e){return t.crypto_transfer_manager.hideOverlay(),t.game.id!=d&&(t.game=t.loadGame(d)),t.updateLog("payments issued..."),t.game.queue.splice(t.game.queue.length-1,1),t.game.halted=0,t.saveGame(t.game.id),0==t.runQueue()&&t.processFutureMoves(),0}),o),0})),0}})),this.commands.push((function(e,t){if("BALANCE"===t[0]){t[1];var a=t[2];e.saveGame(e.game.id),e.game.halted=1;var r=e.game.id;return e.app.wallet.returnBalance(sender,(function(t){return e.game.id!=r&&(e.game=e.loadGame(r)),e.updateStatus(" balance adequate ... "),e.game.queue.splice(e.game.queue.length-1,1),e.game.halted=0,e.saveGame(e.game.id),0==e.runQueue()&&e.processFutureMoves(),0}),a),0}return 1}))}},{key:"doesGameExistLocally",value:function(e){if(this.app.options&&this.app.options.games)for(var t=0;t<this.app.options.games.length;t++)if(this.app.options.games[t].id===e)return 1;return 0}},{key:"returnShortGameOptionsArray",value:function(e){var t=[];for(var a in e)if(""!=e[a]){var r=1;"clock"==a&&0==e[a]&&(r=0),"observer"==a&&"enable"!=e[a]&&(r=0),"game-wizard-players-select"==a&&(r=0),"gamename"==a&&(r=0),1==r&&(t[a]=e[a])}return t}}])&&l(a.prototype,r),s&&l(a,s),q}(g);e.exports=T}).call(this,a(12))},function(e,t){e.exports=!1},function(e,t,a){var r=a(54)("meta"),n=a(7),i=a(24),s=a(14).f,o=0,c=Object.isExtensible||function(){return!0},l=!a(6)((function(){return c(Object.preventExtensions({}))})),u=function(e){s(e,r,{value:{i:"O"+ ++o,w:{}}})},d=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,r)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[r].i},getWeak:function(e,t){if(!i(e,r)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[r].w},onFreeze:function(e){return l&&d.NEED&&c(e)&&!i(e,r)&&u(e),e}}},function(e,t,a){var r=a(10)("unscopables"),n=Array.prototype;null==n[r]&&a(21)(n,r,{}),e.exports=function(e){n[r][e]=!0}},function(e,t,a){"use strict";var r,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,a){return Function.prototype.apply.call(e,t,a)};r=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(a,r){function n(){void 0!==i&&e.removeListener("error",i),a([].slice.call(arguments))}var i;"error"!==t&&(i=function(a){e.removeListener(t,n),r(a)},e.once("error",i)),e.once(t,n)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var c=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function d(e,t,a,r){var n,i,s,o;if(l(a),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,a.listener?a.listener:a),i=e._events),s=i[t]),void 0===s)s=i[t]=a,++e._eventsCount;else if("function"==typeof s?s=i[t]=r?[a,s]:[s,a]:r?s.unshift(a):s.push(a),(n=u(e))>0&&s.length>n&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,o=c,console&&console.warn&&console.warn(o)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,a){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:a},n=p.bind(r);return n.listener=a,r.wrapFn=n,n}function f(e,t,a){var r=e._events;if(void 0===r)return[];var n=r[t];return void 0===n?[]:"function"==typeof n?a?[n.listener||n]:[n]:a?function(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}(n):g(n,n.length)}function m(e){var t=this._events;if(void 0!==t){var a=t[e];if("function"==typeof a)return 1;if(void 0!==a)return a.length}return 0}function g(e,t){for(var a=new Array(t),r=0;r<t;++r)a[r]=e[r];return a}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],a=1;a<arguments.length;a++)t.push(arguments[a]);var r="error"===e,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var c=n[e];if(void 0===c)return!1;if("function"==typeof c)i(c,this,t);else{var l=c.length,u=g(c,l);for(a=0;a<l;++a)i(u[a],this,t)}return!0},o.prototype.addListener=function(e,t){return d(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return d(this,e,t,!0)},o.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var a,r,n,i,s;if(l(t),void 0===(r=this._events))return this;if(void 0===(a=r[e]))return this;if(a===t||a.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,a.listener||t));else if("function"!=typeof a){for(n=-1,i=a.length-1;i>=0;i--)if(a[i]===t||a[i].listener===t){s=a[i].listener,n=i;break}if(n<0)return this;0===n?a.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(a,n),1===a.length&&(r[e]=a[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,a,r;if(void 0===(a=this._events))return this;if(void 0===a.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==a[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete a[e]),this;if(0===arguments.length){var n,i=Object.keys(a);for(r=0;r<i.length;++r)"removeListener"!==(n=i[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=a[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return f(this,e,!0)},o.prototype.rawListeners=function(e){return f(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},o.prototype.listenerCount=m,o.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,a){var r=a(2).Buffer,n=a(349).Transform,i=a(75).StringDecoder;function s(e){n.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}a(1)(s,n),s.prototype.update=function(e,t,a){"string"==typeof e&&(e=r.from(e,t));var n=this._update(e);return this.hashMode?this:(a&&(n=this._toString(n,a)),n)},s.prototype.setAutoPadding=function(){},s.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},s.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},s.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},s.prototype._transform=function(e,t,a){var r;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(e){r=e}finally{a(r)}},s.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(e){t=e}e(t)},s.prototype._finalOrDigest=function(e){var t=this.__final()||r.alloc(0);return e&&(t=this._toString(t,e,!0)),t},s.prototype._toString=function(e,t,a){if(this._decoder||(this._decoder=new i(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var r=this._decoder.write(e);return a&&(r+=this._decoder.end()),r},e.exports=s},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var a=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++a+r).toString(36))}},function(e,t,a){var r=a(314),n=a(139);e.exports=Object.keys||function(e){return r(e,n)}},function(e,t,a){var r=a(34),n=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?n(e+t,0):i(e,t)}},function(e,t,a){var r=a(3),n=a(315),i=a(139),s=a(138)("IE_PROTO"),o=function(){},c=function(){var e,t=a(136)("iframe"),r=i.length;for(t.style.display="none",a(140).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;r--;)delete c.prototype[i[r]];return c()};e.exports=Object.create||function(e,t){var a;return null!==e?(o.prototype=r(e),a=new o,o.prototype=null,a[s]=e):a=c(),void 0===t?a:n(a,t)}},function(e,t,a){var r=a(314),n=a(139).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},function(e,t,a){"use strict";var r=a(4),n=a(14),i=a(13),s=a(10)("species");e.exports=function(e){var t=r[e];i&&t&&!t[s]&&n.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,a,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(a+": incorrect invocation!");return e}},function(e,t,a){var r=a(32),n=a(327),i=a(151),s=a(3),o=a(11),c=a(153),l={},u={};(t=e.exports=function(e,t,a,d,p){var h,f,m,g,b=p?function(){return e}:c(e),y=r(a,d,t?2:1),v=0;if("function"!=typeof b)throw TypeError(e+" is not iterable!");if(i(b)){for(h=o(e.length);h>v;v++)if((g=t?y(s(f=e[v])[0],f[1]):y(e[v]))===l||g===u)return g}else for(m=b.call(e);!(f=m.next()).done;)if((g=n(m,y,f.value,t))===l||g===u)return g}).BREAK=l,t.RETURN=u},function(e,t,a){var r=a(22);e.exports=function(e,t,a){for(var n in t)r(e,n,t[n],a);return e}},function(e,t,a){var r=a(7);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,a){"use strict";var r=a(116),n=Object.keys||function(e){var t=[];for(var a in e)t.push(a);return t};e.exports=d;var i=a(87);i.inherits=a(1);var s=a(350),o=a(165);i.inherits(d,s);for(var c=n(o.prototype),l=0;l<c.length;l++){var u=c[l];d.prototype[u]||(d.prototype[u]=o.prototype[u])}function d(e){if(!(this instanceof d))return new d(e);s.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t,a){var r;function n(e){this.rand=e}if(e.exports=function(e){return r||(r=new n(null)),r.generate(e)},e.exports.Rand=n,n.prototype.generate=function(e){return this._rand(e)},n.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),a=0;a<t.length;a++)t[a]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(n.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var i=a(925);if("function"!=typeof i.randomBytes)throw new Error("Not supported");n.prototype._rand=function(e){return i.randomBytes(e)}}catch(e){}},function(e,t,a){var r=t;r.utils=a(41),r.common=a(90),r.sha=a(943),r.ripemd=a(947),r.hmac=a(948),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(e,t){var a=a||function(e,t){var a={},r=a.lib={},n=r.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var a=new e;return t&&a.mixIn(t),a.hasOwnProperty("init")||(a.init=function(){a.$super.init.apply(this,arguments)}),a.init.prototype=a,a.$super=this,a},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),i=r.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||o).stringify(this)},concat:function(e){var t=this.words,a=e.words,r=this.sigBytes,n=e.sigBytes;if(this.clamp(),r%4)for(var i=0;i<n;i++){var s=a[i>>>2]>>>24-i%4*8&255;t[r+i>>>2]|=s<<24-(r+i)%4*8}else if(a.length>65535)for(i=0;i<n;i+=4)t[r+i>>>2]=a[i>>>2];else t.push.apply(t,a);return this.sigBytes+=n,this},clamp:function(){var t=this.words,a=this.sigBytes;t[a>>>2]&=4294967295<<32-a%4*8,t.length=e.ceil(a/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var a=[],r=0;r<t;r+=4)a.push(4294967296*e.random()|0);return new i.init(a,t)}}),s=a.enc={},o=s.Hex={stringify:function(e){for(var t=e.words,a=e.sigBytes,r=[],n=0;n<a;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push((i>>>4).toString(16)),r.push((15&i).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r+=2)a[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new i.init(a,t/2)}},c=s.Latin1={stringify:function(e){for(var t=e.words,a=e.sigBytes,r=[],n=0;n<a;n++){var i=t[n>>>2]>>>24-n%4*8&255;r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r++)a[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new i.init(a,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(c.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return c.parse(unescape(encodeURIComponent(e)))}},u=r.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var a=this._data,r=a.words,n=a.sigBytes,s=this.blockSize,o=n/(4*s),c=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*s,l=e.min(4*c,n);if(c){for(var u=0;u<c;u+=s)this._doProcessBlock(r,u);var d=r.splice(0,c);a.sigBytes-=l}return new i.init(d,l)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),d=(r.Hasher=u.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,a){return new e.init(a).finalize(t)}},_createHmacHelper:function(e){return function(t,a){return new d.HMAC.init(e,a).finalize(t)}}}),a.algo={});return a}(Math);t.CryptoJS=a},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,a){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d(e);if(t){var n=d(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=a(1131),h=a(1132),f=a(1133),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(m,e);var t,a,r,n,u,h=l(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=h.call(this,e)).name="SaitoHeader UIComponent",t.app=e,e.BROWSER&&(t.sideMenu=new f(e)),t.initialize(e),t}return t=m,(a=[{key:"initialize",value:function(e){var t=this;o(d(m.prototype),"initialize",this).call(this,e),e.connection.on("update_balance",(function(a){t.renderCrypto(e,t)})),e.connection.on("update_identifier",(function(a){t.renderUsername(e,t)})),e.connection.on("update_email",(function(a){t.sideMenu.render(e,t)})),e.connection.on("set_preferred_crypto",(function(a){t.renderCrypto(e,t)}))}},{key:"updateIdentifier",value:function(e){try{var t=this.app.keys.returnIdentifierByPublicKey(e.wallet.returnPublicKey());t==e.wallet.returnPublicKey()||""==t||(document.getElementById("header-username").innerHTML=t)}catch(e){}}},{key:"loadBalance",value:(u=i(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.returnBalance();case 3:a=e.sent,a+=" "+t.ticker,document.querySelector("#crypto-option-".concat(t.name)).innerHTML=a,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),function(e){return u.apply(this,arguments)})},{key:"render",value:function(e,t){try{if(null==t)return;document.getElementById("saito-header")||e.browser.addElementToDom(p(e)),this.renderPhoto(e,t),this.renderUsername(e,t),this.renderCrypto(e,t),this.sideMenu.render(e,t),this.attachEvents(e,t)}catch(e){}}},{key:"renderCrypto",value:(n=i(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.app.wallet.returnAvailableCryptos(),a=this.app.wallet.returnPreferredCrypto(),e.next=5,this.app.wallet.returnPreferredCrypto().returnAddress();case 5:for(document.getElementById("profile-public-key").innerHTML=e.sent,document.querySelector("#header-token-select").innerHTML="",console.log("renderCrypto",document.querySelector("#header-token-select").innerHTML),r='<option id="crypto-option-'.concat(a.name,'" value="').concat(a.ticker,'">Loading...</option>'),this.app.browser.addElementToElement(r,document.querySelector("#header-token-select")),this.loadBalance(a),n=0;n<t.length;n++)(i=t[n]).name!=a.name&&(s='<option id="crypto-option-'.concat(i.name,'" value="').concat(i.ticker,'">Loading...</option>'),this.app.browser.addElementToElement(s,document.querySelector("#header-token-select")),this.loadBalance(t[n]));this.app.browser.addElementToElement('<option id="crypto-option-add-new" value="add-new">install new crypto...</option>',document.querySelector("#header-token-select")),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,this,[[0,16]])}))),function(){return n.apply(this,arguments)})},{key:"renderPhoto",value:function(e,t){try{document.getElementById("header-profile-photo").src=e.keys.returnIdenticon(e.wallet.returnPublicKey())}catch(e){}}},{key:"renderUsername",value:function(e,t){try{var a=e.keys.returnIdentifierByPublicKey(e.wallet.returnPublicKey());""!=a&&a!=e.wallet.returnPublicKey()||(a="Anonymous Account"),document.getElementById("header-username").innerHTML=a}catch(e){}}},{key:"receiveEvent",value:function(e,t){}},{key:"attachEvents",value:function(e,t){var a=this;if(document){for(var r=0,n=0,s=0;s<e.modules.mods.length;s++)"Email"==e.modules.mods[s].name&&1==e.modules.mods[s].browser_active&&(r=1),"QRScanner"==e.modules.mods[s].name&&(n=1);document.querySelectorAll("#header-logo-link").forEach((function(t){t.onclick=function(t){var a=e.modules.returnActiveModule();a?e.browser.logMatomoEvent("Navigation","".concat(a.name,"HeaderNavigationClick"),"HeaderLogoHomepageLink"):(e.browser.logMatomoEvent("Navigation","UnknownModuleHeaderNavigationClick","HeaderLogoHomepageLink"),console.log("Error: No active module"))}})),document.querySelectorAll("#profile-public-key").forEach((function(e,t){e.onmouseup=function(){if(window.getSelection().toString()===e.innerHTML&&"copied..."!=e.innerHTML){document.execCommand("copy");var t=e.innerHTML;e.innerHTML="Copied",setTimeout((function(){e.innerHTML=t}),300)}}})),document.querySelectorAll("#header-token-select").forEach((function(t,r){t.onchange=function(r){if("add-new"!==t.value)e.wallet.setPreferredCrypto(t.value);else{var n=a.app.wallet.returnPreferredCrypto();document.querySelector("#header-token-select").value=n.name;var i=e.modules.returnModule("AppStore");i?i.openAppstoreOverlay({search:"",category:"Cryptocurrency",featured:1}):salert("We cannot install additional cryptocurrencies without AppStore installed!")}}})),document.getElementById("header-dropdown-scan-qr")&&(document.getElementById("header-dropdown-scan-qr").onclick=function(){1==n?e.modules.returnModule("QRScanner").startScanner():salert("QR Scanner not installed or disabled")}),document.getElementById("header-dropdown-my-profile")&&(document.getElementById("header-dropdown-my-profile").onclick=function(){if(1==r)for(var e=document.getElementsByClassName("email-apps-item"),t=0;t<e.length;t++)"Profile"===e[t].innerHTML&&e[t].click();else window.location="/wallet/#page=email_appspace&subpage=Profile"}),document.getElementById("header-dropdown-add-contacts")&&(document.getElementById("header-dropdown-add-contacts").onclick=function(){var t=e.modules.returnModule("Tutorial");t&&t.inviteFriendsModal()}),document.getElementById("header-dropdown-reset-wallet")&&(document.getElementById("header-dropdown-reset-wallet").onclick=function(){e.wallet.resetWallet()}),document.getElementById("header-dropdown-backup-wallet")&&(document.getElementById("header-dropdown-backup-wallet").onclick=function(){e.wallet.backupWallet()}),document.getElementById("header-dropdown-settings")&&(document.getElementById("header-dropdown-settings").onclick=function(){if(1==r)for(var e=document.getElementsByClassName("email-apps-item"),t=0;t<e.length;t++)"Settings"===e[t].innerHTML&&e[t].click();else window.location="/wallet/#page=email_appspace&subpage=Settings"}),document.getElementById("header-dropdown-restore-wallet")&&(document.getElementById("header-dropdown-restore-wallet").onclick=function(){var t=i(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("saito-header-file-input").addEventListener("change",(function(t){t.target.files[0];var a=t.target.files[0],r=new FileReader;r.onloadend=function(){var t;t=r.result;try{var a=JSON.parse(t);e.options=a,e.blockchain.resetBlockchain(),e.modules.returnModule("Arcade").onResetWallet(),e.storage.saveOptions(),salert("Restoration Complete ... click to reload Saito"),window.location.reload()}catch(e){salert("Error decrypting wallet file. Password incorrect")}},r.readAsBinaryString(a)})),document.querySelector("#saito-header-file-input").click();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),document.querySelector(".manage-account")&&(document.querySelector(".manage-account").onclick=function(){window.location="/wallet/#page=email_appspace&subpage=Settings"})}}}])&&s(t.prototype,a),r&&s(t,r),m}(h);e.exports=m},function(e,t,a){var r=a(14).f,n=a(24),i=a(10)("toStringTag");e.exports=function(e,t,a){e&&!n(e=a?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,a){var r=a(33),n=a(10)("toStringTag"),i="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,a,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(a=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),n))?a:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,a){var r=a(0),n=a(37),i=a(6),s=a(142),o="["+s+"]",c=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),u=function(e,t,a){var n={},o=i((function(){return!!s[e]()||"​"!="​"[e]()})),c=n[e]=o?t(d):s[e];a&&(n[a]=c),r(r.P+r.F*o,"String",n)},d=u.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};e.exports=u},function(e,t){e.exports={}},function(e,t,a){"use strict";(function(t,r){var n=a(2).Buffer,i=t.crypto||t.msCrypto;i&&i.getRandomValues?e.exports=function(e,t){if(e>4294967295)throw new RangeError("requested too many random bytes");var a=n.allocUnsafe(e);if(e>0)if(e>65536)for(var s=0;s<e;s+=65536)i.getRandomValues(a.slice(s,s+65536));else i.getRandomValues(a);if("function"==typeof t)return r.nextTick((function(){t(null,a)}));return a}:e.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,a(17),a(12))},function(e,t,a){"use strict";var r=a(1),n=a(163),i=a(166),s=a(167),o=a(52);function c(e){o.call(this,"digest"),this._hash=e}r(c,o),c.prototype._update=function(e){this._hash.update(e)},c.prototype._final=function(){return this._hash.digest()},e.exports=function(e){return"md5"===(e=e.toLowerCase())?new n:"rmd160"===e||"ripemd160"===e?new i:new c(s(e))}},function(e,t,a){"use strict";var r=a(2).Buffer,n=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=u,this.end=d,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,a=function(e,t,a){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==a?a:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2==0){var a=e.toString("utf16le",t);if(a){var r=a.charCodeAt(a.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],a.slice(0,-1)}return a}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var a=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,a)}return t}function u(e,t){var a=(e.length-t)%3;return 0===a?e.toString("base64",t):(this.lastNeed=3-a,this.lastTotal=3,1===a?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-a))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,a;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";a=this.lastNeed,this.lastNeed=0}else a=0;return a<e.length?t?t+this.text(e,a):this.text(e,a):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},i.prototype.text=function(e,t){var a=function(e,t,a){var r=t.length-1;if(r<a)return 0;var n=s(t[r]);if(n>=0)return n>0&&(e.lastNeed=n-1),n;if(--r<a||-2===n)return 0;if((n=s(t[r]))>=0)return n>0&&(e.lastNeed=n-2),n;if(--r<a||-2===n)return 0;if((n=s(t[r]))>=0)return n>0&&(2===n?n=0:e.lastNeed=n-3),n;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=a;var r=e.length-(a-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,a){var r=a(2).Buffer;function n(e,t){this._block=r.alloc(e),this._finalSize=t,this._blockSize=e,this._len=0}n.prototype.update=function(e,t){"string"==typeof e&&(t=t||"utf8",e=r.from(e,t));for(var a=this._block,n=this._blockSize,i=e.length,s=this._len,o=0;o<i;){for(var c=s%n,l=Math.min(i-o,n-c),u=0;u<l;u++)a[c+u]=e[o+u];o+=l,(s+=l)%n==0&&this._update(a)}return this._len+=i,this},n.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=8*this._len;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var r=(4294967295&a)>>>0,n=(a-r)/4294967296;this._block.writeUInt32BE(n,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},n.prototype._update=function(){throw new Error("_update must be implemented by subclass")},e.exports=n},function(e,t,a){"use strict";var r={};function n(e,t,a){a||(a=Error);var n=function(e){var a,r;function n(a,r,n){return e.call(this,function(e,a,r){return"string"==typeof t?t:t(e,a,r)}(a,r,n))||this}return r=e,(a=n).prototype=Object.create(r.prototype),a.prototype.constructor=a,a.__proto__=r,n}(a);n.prototype.name=a.name,n.prototype.code=e,r[e]=n}function i(e,t){if(Array.isArray(e)){var a=e.length;return e=e.map((function(e){return String(e)})),a>2?"one of ".concat(t," ").concat(e.slice(0,a-1).join(", "),", or ")+e[a-1]:2===a?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,a){var r,n,s,o;if("string"==typeof t&&(n="not ",t.substr(!s||s<0?0:+s,n.length)===n)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,a){return(void 0===a||a>e.length)&&(a=e.length),e.substring(a-t.length,a)===t}(e," argument"))o="The ".concat(e," ").concat(r," ").concat(i(t,"type"));else{var c=function(e,t,a){return"number"!=typeof a&&(a=0),!(a+t.length>e.length)&&-1!==e.indexOf(t,a)}(e,".")?"property":"argument";o='The "'.concat(e,'" ').concat(c," ").concat(r," ").concat(i(t,"type"))}return o+=". Received type ".concat(typeof a)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.codes=r},function(e,t,a){"use strict";(function(t){var r=Object.keys||function(e){var t=[];for(var a in e)t.push(a);return t};e.exports=l;var n=a(374),i=a(378);a(45)(l,n);for(var s=r(i.prototype),o=0;o<s.length;o++){var c=s[o];l.prototype[c]||(l.prototype[c]=i.prototype[c])}function l(e){if(!(this instanceof l))return new l(e);n.call(this,e),i.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||t.nextTick(d,this)}function d(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this,a(12))},function(e,t,a){"use strict";function r(e,t,a){var r=a?" !== ":" === ",n=a?" || ":" && ",i=a?"!":"",s=a?"":"!";switch(e){case"null":return t+r+"null";case"array":return i+"Array.isArray("+t+")";case"object":return"("+i+t+n+"typeof "+t+r+'"object"'+n+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+r+'"number"'+n+s+"("+t+" % 1)"+n+t+r+t+")";default:return"typeof "+t+r+'"'+e+'"'}}e.exports={copy:function(e,t){for(var a in t=t||{},e)t[a]=e[a];return t},checkDataType:r,checkDataTypes:function(e,t){switch(e.length){case 1:return r(e[0],t,!0);default:var a="",n=i(e);for(var s in n.array&&n.object&&(a=n.null?"(":"(!"+t+" || ",a+="typeof "+t+' !== "object")',delete n.null,delete n.array,delete n.object),n.number&&delete n.integer,n)a+=(a?" && ":"")+r(s,t,!0);return a}},coerceToTypes:function(e,t){if(Array.isArray(t)){for(var a=[],r=0;r<t.length;r++){var i=t[r];(n[i]||"array"===e&&"array"===i)&&(a[a.length]=i)}if(a.length)return a}else{if(n[t])return[t];if("array"===e&&"array"===t)return["array"]}},toHash:i,getProperty:c,escapeQuotes:l,equal:a(183),ucs2length:a(1036),varOccurences:function(e,t){t+="[^0-9]";var a=e.match(new RegExp(t,"g"));return a?a.length:0},varReplace:function(e,t,a){return t+="([^0-9])",a=a.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),a+"$1")},cleanUpCode:function(e){return e.replace(u,"").replace(d,"").replace(p,"if (!($1))")},finalCleanUpCode:function(e,t){var a=e.match(h);a&&2==a.length&&(e=t?e.replace(m,"").replace(g,"return data;"):e.replace(f,"").replace("return errors === 0;","validate.errors = null; return true;"));return(a=e.match(b))&&3===a.length?e.replace(y,""):e},schemaHasRules:function(e,t){if("boolean"==typeof e)return!e;for(var a in e)if(t[a])return!0},schemaHasRulesExcept:function(e,t,a){if("boolean"==typeof e)return!e&&"not"!=a;for(var r in e)if(r!=a&&t[r])return!0},schemaUnknownRules:function(e,t){if("boolean"==typeof e)return;for(var a in e)if(!t[a])return a},toQuotedString:v,getPathExpr:function(e,t,a,r){return x(e,a?"'/' + "+t+(r?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):r?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'")},getPath:function(e,t,a){var r=v(a?"/"+k(t):c(t));return x(e,r)},getData:function(e,t,a){var r,n,i,s;if(""===e)return"rootData";if("/"==e[0]){if(!_.test(e))throw new Error("Invalid JSON-pointer: "+e);n=e,i="rootData"}else{if(!(s=e.match(w)))throw new Error("Invalid JSON-pointer: "+e);if(r=+s[1],"#"==(n=s[2])){if(r>=t)throw new Error("Cannot access property/index "+r+" levels up, current level is "+t);return a[t-r]}if(r>t)throw new Error("Cannot access data "+r+" levels up, current level is "+t);if(i="data"+(t-r||""),!n)return i}for(var o=i,l=n.split("/"),u=0;u<l.length;u++){var d=l[u];d&&(i+=c(S(d)),o+=" && "+i)}return o},unescapeFragment:function(e){return S(decodeURIComponent(e))},unescapeJsonPointer:S,escapeFragment:function(e){return encodeURIComponent(k(e))},escapeJsonPointer:k};var n=i(["string","number","integer","boolean","null"]);function i(e){for(var t={},a=0;a<e.length;a++)t[e[a]]=!0;return t}var s=/^[a-z$_][a-z$_0-9]*$/i,o=/'|\\/g;function c(e){return"number"==typeof e?"["+e+"]":s.test(e)?"."+e:"['"+l(e)+"']"}function l(e){return e.replace(o,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}var u=/else\s*{\s*}/g,d=/if\s*\([^)]+\)\s*\{\s*\}(?!\s*else)/g,p=/if\s*\(([^)]+)\)\s*\{\s*\}\s*else(?!\s*if)/g;var h=/[^v.]errors/g,f=/var errors = 0;|var vErrors = null;|validate.errors = vErrors;/g,m=/var errors = 0;|var vErrors = null;/g,g=/if \(errors === 0\) return data;\s*else throw new ValidationError\(vErrors\);/,b=/[^A-Za-z_$]rootData[^A-Za-z0-9_$]/g,y=/if \(rootData === undefined\) rootData = data;/;function v(e){return"'"+l(e)+"'"}var _=/^\/(?:[^~]|~0|~1)*$/,w=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function x(e,t){return'""'==e?t:(e+" + "+t).replace(/' \+ '/g,"")}function k(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function S(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}},function(e,t,a){var r,n=a(1110),i=a(417),s=a(1111),o=a(1112),c=a(1113);"undefined"!=typeof ArrayBuffer&&(r=a(1114));var l="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),u="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),d=l||u;t.protocol=3;var p=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},h=n(p),f={type:"error",data:"parser error"},m=a(1115);function g(e,t,a){for(var r=new Array(e.length),n=o(e.length,a),i=function(e,a,n){t(a,(function(t,a){r[e]=a,n(t,r)}))},s=0;s<e.length;s++)i(s,e[s],n)}t.encodePacket=function(e,a,r,n){"function"==typeof a&&(n=a,a=!1),"function"==typeof r&&(n=r,r=null);var i=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!=typeof ArrayBuffer&&i instanceof ArrayBuffer)return function(e,a,r){if(!a)return t.encodeBase64Packet(e,r);var n=e.data,i=new Uint8Array(n),s=new Uint8Array(1+n.byteLength);s[0]=p[e.type];for(var o=0;o<i.length;o++)s[o+1]=i[o];return r(s.buffer)}(e,a,n);if(void 0!==m&&i instanceof m)return function(e,a,r){if(!a)return t.encodeBase64Packet(e,r);if(d)return function(e,a,r){if(!a)return t.encodeBase64Packet(e,r);var n=new FileReader;return n.onload=function(){t.encodePacket({type:e.type,data:n.result},a,!0,r)},n.readAsArrayBuffer(e.data)}(e,a,r);var n=new Uint8Array(1);n[0]=p[e.type];var i=new m([n.buffer,e.data]);return r(i)}(e,a,n);if(i&&i.base64)return function(e,a){var r="b"+t.packets[e.type]+e.data.data;return a(r)}(e,n);var s=p[e.type];return void 0!==e.data&&(s+=r?c.encode(String(e.data),{strict:!1}):String(e.data)),n(""+s)},t.encodeBase64Packet=function(e,a){var r,n="b"+t.packets[e.type];if(void 0!==m&&e.data instanceof m){var i=new FileReader;return i.onload=function(){var e=i.result.split(",")[1];a(n+e)},i.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),o=new Array(s.length),c=0;c<s.length;c++)o[c]=s[c];r=String.fromCharCode.apply(null,o)}return n+=btoa(r),a(n)},t.decodePacket=function(e,a,r){if(void 0===e)return f;if("string"==typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),a);if(r&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return f;var n=e.charAt(0);return Number(n)==n&&h[n]?e.length>1?{type:h[n],data:e.substring(1)}:{type:h[n]}:f}n=new Uint8Array(e)[0];var i=s(e,1);return m&&"blob"===a&&(i=new m([i])),{type:h[n],data:i}},t.decodeBase64Packet=function(e,t){var a=h[e.charAt(0)];if(!r)return{type:a,data:{base64:!0,data:e.substr(1)}};var n=r.decode(e.substr(1));return"blob"===t&&m&&(n=new m([n])),{type:a,data:n}},t.encodePayload=function(e,a,r){"function"==typeof a&&(r=a,a=null);var n=i(e);if(a&&n)return m&&!d?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");g(e,(function(e,r){t.encodePacket(e,!!n&&a,!1,(function(e){r(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))}))},t.decodePayload=function(e,a,r){if("string"!=typeof e)return t.decodePayloadAsBinary(e,a,r);var n;if("function"==typeof a&&(r=a,a=null),""===e)return r(f,0,1);for(var i,s,o="",c=0,l=e.length;c<l;c++){var u=e.charAt(c);if(":"===u){if(""===o||o!=(i=Number(o)))return r(f,0,1);if(o!=(s=e.substr(c+1,i)).length)return r(f,0,1);if(s.length){if(n=t.decodePacket(s,a,!1),f.type===n.type&&f.data===n.data)return r(f,0,1);if(!1===r(n,c+i,l))return}c+=i,o=""}else o+=u}return""!==o?r(f,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,a){if(!e.length)return a(new ArrayBuffer(0));g(e,(function(e,a){t.encodePacket(e,!0,!0,(function(e){return a(null,e)}))}),(function(e,t){var r=t.reduce((function(e,t){var a;return e+(a="string"==typeof t?t.length:t.byteLength).toString().length+a+2}),0),n=new Uint8Array(r),i=0;return t.forEach((function(e){var t="string"==typeof e,a=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);a=r.buffer}n[i++]=t?0:1;var o=a.byteLength.toString();for(s=0;s<o.length;s++)n[i++]=parseInt(o[s]);n[i++]=255;for(r=new Uint8Array(a),s=0;s<r.length;s++)n[i++]=r[s]})),a(n.buffer)}))},t.encodePayloadAsBlob=function(e,a){g(e,(function(e,a){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"==typeof e){for(var r=new Uint8Array(e.length),n=0;n<e.length;n++)r[n]=e.charCodeAt(n);e=r.buffer,t[0]=0}var i=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(i.length+1);for(n=0;n<i.length;n++)s[n]=parseInt(i[n]);if(s[i.length]=255,m){var o=new m([t.buffer,s.buffer,e]);a(null,o)}}))}),(function(e,t){return a(new m(t))}))},t.decodePayloadAsBinary=function(e,a,r){"function"==typeof a&&(r=a,a=null);for(var n=e,i=[];n.byteLength>0;){for(var o=new Uint8Array(n),c=0===o[0],l="",u=1;255!==o[u];u++){if(l.length>310)return r(f,0,1);l+=o[u]}n=s(n,2+l.length),l=parseInt(l);var d=s(n,0,l);if(c)try{d=String.fromCharCode.apply(null,new Uint8Array(d))}catch(e){var p=new Uint8Array(d);d="";for(u=0;u<p.length;u++)d+=String.fromCharCode(p[u])}i.push(d),n=s(n,l)}var h=i.length;i.forEach((function(e,n){r(t.decodePacket(e,a,!0),n,h)}))}},function(e,t){const a=/[&<>"']/,r=/[&<>"']/g,n=/[<>"']|&(?!#?\w+;)/,i=/[<>"']|&(?!#?\w+;)/g,s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o=e=>s[e];const c=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function l(e){return e.replace(c,(e,t)=>"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):"")}const u=/(^|[^\[])\^/g;const d=/[^\w:]/g,p=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;const h={},f=/^[^:]+:\/*[^/]*$/,m=/^([^:]+:)[\s\S]*$/,g=/^([^:]+:\/*[^/]*)[\s\S]*$/;function b(e,t){h[" "+e]||(f.test(e)?h[" "+e]=e+"/":h[" "+e]=y(e,"/",!0));const a=-1===(e=h[" "+e]).indexOf(":");return"//"===t.substring(0,2)?a?t:e.replace(m,"$1")+t:"/"===t.charAt(0)?a?t:e.replace(g,"$1")+t:e+t}function y(e,t,a){const r=e.length;if(0===r)return"";let n=0;for(;n<r;){const i=e.charAt(r-n-1);if(i!==t||a){if(i===t||!a)break;n++}else n++}return e.substr(0,r-n)}e.exports={escape:function(e,t){if(t){if(a.test(e))return e.replace(r,o)}else if(n.test(e))return e.replace(i,o);return e},unescape:l,edit:function(e,t){e=e.source||e,t=t||"";const a={replace:(t,r)=>(r=(r=r.source||r).replace(u,"$1"),e=e.replace(t,r),a),getRegex:()=>new RegExp(e,t)};return a},cleanUrl:function(e,t,a){if(e){let e;try{e=decodeURIComponent(l(a)).replace(d,"").toLowerCase()}catch(e){return null}if(0===e.indexOf("javascript:")||0===e.indexOf("vbscript:")||0===e.indexOf("data:"))return null}t&&!p.test(a)&&(a=b(t,a));try{a=encodeURI(a).replace(/%25/g,"%")}catch(e){return null}return a},resolveUrl:b,noopTest:{exec:function(){}},merge:function(e){let t,a,r=1;for(;r<arguments.length;r++)for(a in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},splitCells:function(e,t){const a=e.replace(/\|/g,(e,t,a)=>{let r=!1,n=t;for(;--n>=0&&"\\"===a[n];)r=!r;return r?"|":" |"}).split(/ \|/);let r=0;if(a.length>t)a.splice(t);else for(;a.length<t;)a.push("");for(;r<a.length;r++)a[r]=a[r].trim().replace(/\\\|/g,"|");return a},rtrim:y,findClosingBracket:function(e,t){if(-1===e.indexOf(t[1]))return-1;const a=e.length;let r=0,n=0;for(;n<a;n++)if("\\"===e[n])n++;else if(e[n]===t[0])r++;else if(e[n]===t[1]&&(r--,r<0))return n;return-1},checkSanitizeDeprecation:function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}}},function(e,t,a){var r=a(31),n=a(4),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:a(48)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,a){var r=a(33);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,a){"use strict";var r=a(3);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,a){var r=a(3),n=a(18),i=a(10)("species");e.exports=function(e,t){var a,s=r(e).constructor;return void 0===s||null==(a=r(s)[i])?t:n(a)}},function(e,t,a){(function(e){function a(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===a(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===a(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===a(e)},t.isError=function(e){return"[object Error]"===a(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,a(9).Buffer)},function(e,t,a){(function(t){e.exports=function(e,a){for(var r=Math.min(e.length,a.length),n=new t(r),i=0;i<r;++i)n[i]=e[i]^a[i];return n}}).call(this,a(9).Buffer)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,a){"use strict";var r=a(41),n=a(20);function i(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=i,i.prototype.update=function(e,t){if(e=r.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var a=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-a,e.length),0===this.pending.length&&(this.pending=null),e=r.join32(e,0,e.length-a,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},i.prototype.digest=function(e){return this.update(this._pad()),n(null===this.pending),this._digest(e)},i.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,a=t-(e+this.padLength)%t,r=new Array(a+this.padLength);r[0]=128;for(var n=1;n<a;n++)r[n]=0;if(e<<=3,"big"===this.endian){for(var i=8;i<this.padLength;i++)r[n++]=0;r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=e>>>24&255,r[n++]=e>>>16&255,r[n++]=e>>>8&255,r[n++]=255&e}else for(r[n++]=255&e,r[n++]=e>>>8&255,r[n++]=e>>>16&255,r[n++]=e>>>24&255,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,i=8;i<this.padLength;i++)r[n++]=0;return r}},function(e,t,a){"use strict";const r=a(1),n=a(178).Reporter,i=a(176).Buffer;function s(e,t){n.call(this,t),i.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function o(e,t){if(Array.isArray(e))this.length=0,this.value=e.map((function(e){return o.isEncoderBuffer(e)||(e=new o(e,t)),this.length+=e.length,e}),this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=i.byteLength(e);else{if(!i.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}r(s,n),t.DecoderBuffer=s,s.isDecoderBuffer=function(e){if(e instanceof s)return!0;return"object"==typeof e&&i.isBuffer(e.base)&&"DecoderBuffer"===e.constructor.name&&"number"==typeof e.offset&&"number"==typeof e.length&&"function"==typeof e.save&&"function"==typeof e.restore&&"function"==typeof e.isEmpty&&"function"==typeof e.readUInt8&&"function"==typeof e.skip&&"function"==typeof e.raw},s.prototype.save=function(){return{offset:this.offset,reporter:n.prototype.save.call(this)}},s.prototype.restore=function(e){const t=new s(this.base);return t.offset=e.offset,t.length=this.offset,this.offset=e.offset,n.prototype.restore.call(this,e.reporter),t},s.prototype.isEmpty=function(){return this.offset===this.length},s.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},s.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");const a=new s(this.base);return a._reporterState=this._reporterState,a.offset=this.offset,a.length=this.offset+e,this.offset+=e,a},s.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},t.EncoderBuffer=o,o.isEncoderBuffer=function(e){if(e instanceof o)return!0;return"object"==typeof e&&"EncoderBuffer"===e.constructor.name&&"number"==typeof e.length&&"function"==typeof e.join},o.prototype.join=function(e,t){return e||(e=i.alloc(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach((function(a){a.join(e,t),t+=a.length})):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):i.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e}},function(e,t,a){(function(r){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=a(1104)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var a=this.useColors;if(e[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+e[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!a)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))})),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())}).call(this,a(12))},function(e,t,a){var r=a(1129),n=a(194),i=a(94),s=a(424);e.exports={datetime_formatter:r,drag_element:n,hammer:s,el_parser:i}},function(e,t){e.exports=elParser=function(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}},function(e,t,a){var r=a(201),n=a(202),i=a(42),s=a(203);e.exports=AppStoreAppspace={render:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.overlay=new i(e,t),t.overlay.render(e,t),t.overlay.attachEvents(e,t),t.overlay.showOverlay(e,t,r());var o="";""!=a.category&&null!=a.category&&(o=' WHERE categories LIKE "%'+a.category.replace(/\W/,"")+'%"'),""!=a.search&&null!=a.search&&(""==o?o=" WHERE ":o+=" AND ",o+=' (name LIKE "%'+a.search.replace(/\W/,"")+'%" OR description LIKE "%'+a.search.replace(/\W/,"")+'%" OR version LIKE "%'+a.search+'%")'),""!=a.version&&null!=a.version&&(""==o?o=" WHERE ":o+=" AND ",o+=' version = "'+a.version+'"');var c=0;1==a.featured&&(c=1),""==o?o=" WHERE ":o+=" AND ",o+=1==c?" featured = 1":" (featured = 1 OR featured = 0) ",console.log("SELECT name, description, version, image, publickey, unixtime, bid, bsh FROM modules "+o);var l="SELECT name, description, version, image, publickey, unixtime, bid, bsh FROM modules "+o;console.log("Fetching: "+(new Date).getTime()),t.sendPeerDatabaseRequestWithFilter("AppStore",l,(function(t){try{document.querySelector(".appstore-overlay-grid").innerHTML=""}catch(e){}if(console.log("Fetched: "+(new Date).getTime()),null!=t.rows){var a=[];if(e.options.modules)for(var r=0;r<e.options.modules.length;r++)a.push(e.options.modules[r].name);for(var i=0;i<t.rows.length;i++)(a.includes(t.rows[i].name)||"name"==t.rows[i].name||"Unknown"==t.rows[i].name)&&(t.rows.splice(i,1),i--);try{document.querySelector(".appstore-overlay-grid").innerHTML="";for(var o=0;o<t.rows.length;o++)e.browser.addElementToDom(n(e,t.rows[o]),"appstore-overlay-grid");Array.from(document.getElementsByClassName("appstore-overlay-app")).forEach((function(t){t.onclick=function(t){for(var a=t.currentTarget,r=null,n=0;n<a.childNodes.length;n++)"appstore-overlay-app-image"==a.childNodes[n].className&&(r=a.childNodes[n].style.background);var i=JSON.parse(e.crypto.base64ToString(t.currentTarget.id)),o={};o.module=i,o.image=r,s.render(e,o),s.attachEvents(e,o)}}))}catch(e){console.log("error in appstore callback")}}}))},attachEvents:function(e,t){search_self=this,Array.from(document.getElementsByClassName("appstore-app-install-btn")).forEach((function(t){t.onclick=function(t){var a=JSON.parse(e.crypto.base64ToString(t.currentTarget.id));data.module=a,s.render(e,data),s.attachEvents(e,data)}})),document.getElementById("appstore-search-box").addEventListener("focus",(function(e){e.currentTarget.placeholder="",e.currentTarget.value=""})),document.getElementById("appstore-search-box").addEventListener("keypress",(function(a){if(13===(a.which||a.keyCode)){try{document.querySelector(".appstore-overlay-grid").innerHTML='<div class="game-loader-spinner loader" id="game-loader-spinner"></div>'}catch(e){}var r={search:a.currentTarget.value,category:"",featured:0};search_self.render(e,t,r),search_self.attachEvents(e,t)}}))}}},function(e,t){e.exports=ArcadeContainerTemplate=function(e,t){return'\n    <div class="header-shim" style=""></div>\n    <div id="arcade-container" class="arcade-container"></div>\n  '}},function(e,t){function a(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1},getDefaults:a,changeDefaults:function(t){e.exports.defaults=t}}},function(e,t,a){var r=a(244),n=a(129);a(236),a(238),a(239);e.exports=ChatRoom={render:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null!=a?t.active_group=a:a=t.active_group,t.renderMode="chatroom",document.getElementById("chat-main").innerHTML="",e.browser.addElementToDom(r(a),"chat-main");var i=document.querySelector("#input.chat-room-input");for(null==i||i.value;a.txs.length>100;)a.txs.shift();for(var s=t.createMessageBlocks(a),o=document.getElementById("chat-room-content-".concat(a.id)),c=0;c<s.length;c++){var l=n(e,t,a,s[c]);if(c==s.length-1){var u="first_comment_sig";s[c].length>0&&(u=e.crypto.hash(s[c][0].transaction.sig));try{document.getElementById("chat-message-set-".concat(u)).destroy()}catch(e){}l=n(e,t,a,s[c]),o.innerHTML+=l}else o.innerHTML+=l}console.log("scrolling to the bottom!"),this.scrollToBottom(a.id)},attachEvents:function(e,t){var a=document.getElementById("input"),r=a.getAttribute("data-id");a.addEventListener("keypress",(function(n){if((13==n.which||13==n.keyCode)&&!n.shiftKey){if(n.preventDefault(),""==a.value)return;var i=t.createMessage(r,a.value);t.sendMessage(e,i),t.receiveMessage(e,i,"chatroom"),a.value="",document.querySelector("#input.chat-room-input").focus(),document.querySelector("#input.chat-room-input").select()}})),document.getElementById("back-button").onclick=function(a){t.renderMode="main",t.render(e,"main")},document.getElementById("back-button").ontouch=function(a){t.renderMode="main",t.render(e,"main")},document.querySelector(".chat-room-submit-button").onclick=function(n){if(n.preventDefault(),""!=a.value){e.browser.logMatomoEvent("Chat","ArcadeChatSendMessage","OnClick");var i=t.createMessage(r,a.value);t.sendMessage(e,i),t.receiveMessage(e,i,"chatroom"),a.value=""}},document.querySelector(".chat-room-submit-button").ontouch=function(n){if(n.preventDefault(),""!=a.value){e.browser.logMatomoEvent("Chat","ArcadeChatSendMessage","OnTouch");var i=t.createMessage(r,a.value);t.sendMessage(e,i),t.receiveMessage(e,i,"chatroom"),a.value=""}}},addMessage:function(e,t,a,r){e.modules.returnModule("Chat").receiveMessage(e,r,"chatroom");for(var n=0;n<t.groups.length;n++)t.groups[n].id===a&&(this.render(e,t,t.groups[n]),this.attachEvents(e,t),this.scrollToBottom(a))},scrollToBottom:function(e){var t=document.getElementById("chat-room-content-".concat(e));t&&(t.scrollTop=t.scrollHeight)}}},function(e,t,a){var r=a(518),n=a(520);function i(t,a){return delete e.exports[t],e.exports[t]=a,a}e.exports={Parser:r,Tokenizer:a(519),ElementType:a(100),DomHandler:n,get FeedHandler(){return i("FeedHandler",a(1223))},get Stream(){return i("Stream",a(1237))},get WritableStream(){return i("WritableStream",a(527))},get ProxyHandler(){return i("ProxyHandler",a(1239))},get DomUtils(){return i("DomUtils",a(522))},get CollectingHandler(){return i("CollectingHandler",a(1240))},DefaultHandler:n,get RssHandler(){return i("RssHandler",this.FeedHandler)},parseDOM:function(e,t){var a=new n(t);return new r(a,t).end(e),a.dom},parseFeed:function(t,a){var n=new e.exports.FeedHandler(a);return new r(n,a).end(t),n.dom},createDomStream:function(e,t,a){var i=new n(e,t,a);return new r(i,t)},EVENTS:{attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0}}},function(e,t){e.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",Doctype:"doctype",isTag:function(e){return"tag"===e.type||"script"===e.type||"style"===e.type}}},function(e,t,a){var r=a(25),n=a(11),i=a(56);e.exports=function(e){return function(t,a,s){var o,c=r(t),l=n(c.length),u=i(s,l);if(e&&a!=a){for(;l>u;)if((o=c[u++])!=o)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===a)return e||u||0;return!e&&-1}}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,a){var r=a(33);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,a){var r=a(34),n=a(37);e.exports=function(e){return function(t,a){var i,s,o=String(n(t)),c=r(a),l=o.length;return c<0||c>=l?e?"":void 0:(i=o.charCodeAt(c))<55296||i>56319||c+1===l||(s=o.charCodeAt(c+1))<56320||s>57343?e?o.charAt(c):i:e?o.slice(c,c+2):s-56320+(i-55296<<10)+65536}}},function(e,t,a){var r=a(7),n=a(33),i=a(10)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==n(e))}},function(e,t,a){var r=a(10)("iterator"),n=!1;try{var i=[7][r]();i.return=function(){n=!0},Array.from(i,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var a=!1;try{var i=[7],s=i[r]();s.next=function(){return{done:a=!0}},i[r]=function(){return s},e(i)}catch(e){}return a}},function(e,t,a){"use strict";var r=a(70),n=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"==typeof a){var i=a.call(e,t);if("object"!=typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},function(e,t,a){"use strict";a(331);var r=a(22),n=a(21),i=a(6),s=a(37),o=a(10),c=a(157),l=o("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();e.exports=function(e,t,a){var p=o(e),h=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),f=h?!i((function(){var t=!1,a=/a/;return a.exec=function(){return t=!0,null},"split"===e&&(a.constructor={},a.constructor[l]=function(){return a}),a[p](""),!t})):void 0;if(!h||!f||"replace"===e&&!u||"split"===e&&!d){var m=/./[p],g=a(s,p,""[e],(function(e,t,a,r,n){return t.exec===c?h&&!n?{done:!0,value:m.call(t,a,r)}:{done:!0,value:e.call(a,t,r)}:{done:!1}})),b=g[0],y=g[1];r(String.prototype,e,b),n(RegExp.prototype,p,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}}},function(e,t,a){var r=a(4).navigator;e.exports=r&&r.userAgent||""},function(e,t,a){"use strict";var r=a(4),n=a(0),i=a(22),s=a(62),o=a(49),c=a(61),l=a(60),u=a(7),d=a(6),p=a(106),h=a(69),f=a(143);e.exports=function(e,t,a,m,g,b){var y=r[e],v=y,_=g?"set":"add",w=v&&v.prototype,x={},k=function(e){var t=w[e];i(w,e,"delete"==e||"has"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,a){return t.call(this,0===e?0:e,a),this})};if("function"==typeof v&&(b||w.forEach&&!d((function(){(new v).entries().next()})))){var S=new v,P=S[_](b?{}:-0,1)!=S,E=d((function(){S.has(1)})),C=p((function(e){new v(e)})),A=!b&&d((function(){for(var e=new v,t=5;t--;)e[_](t,t);return!e.has(-0)}));C||((v=t((function(t,a){l(t,v,e);var r=f(new y,t,v);return null!=a&&c(a,g,r[_],r),r}))).prototype=w,w.constructor=v),(E||A)&&(k("delete"),k("has"),g&&k("get")),(A||P)&&k(_),b&&w.clear&&delete w.clear}else v=m.getConstructor(t,e,g,_),s(v.prototype,a),o.NEED=!0;return h(v,e),x[e]=v,n(n.G+n.W+n.F*(v!=y),x),b||m.setStrong(v,e,g),v}},function(e,t,a){for(var r,n=a(4),i=a(21),s=a(54),o=s("typed_array"),c=s("view"),l=!(!n.ArrayBuffer||!n.DataView),u=l,d=0,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");d<9;)(r=n[p[d++]])?(i(r.prototype,o,!0),i(r.prototype,c,!0)):u=!1;e.exports={ABV:l,CONSTR:u,TYPED:o,VIEW:c}},function(e,t,a){"use strict";e.exports=a(48)||!a(6)((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete a(4)[e]}))},function(e,t,a){"use strict";var r=a(0);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,a){"use strict";var r=a(0),n=a(18),i=a(32),s=a(61);e.exports=function(e){r(r.S,e,{from:function(e){var t,a,r,o,c=arguments[1];return n(this),(t=void 0!==c)&&n(c),null==e?new this:(a=[],t?(r=0,o=i(c,arguments[2],2),s(e,!1,(function(e){a.push(o(e,r++))}))):s(e,!1,a.push,a),new this(a))}})}},function(e,t,a){"use strict";t.randomBytes=t.rng=t.pseudoRandomBytes=t.prng=a(73),t.createHash=t.Hash=a(74),t.createHmac=t.Hmac=a(357);var r=a(906),n=Object.keys(r),i=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(n);t.getHashes=function(){return i};var s=a(360);t.pbkdf2=s.pbkdf2,t.pbkdf2Sync=s.pbkdf2Sync;var o=a(908);t.Cipher=o.Cipher,t.createCipher=o.createCipher,t.Cipheriv=o.Cipheriv,t.createCipheriv=o.createCipheriv,t.Decipher=o.Decipher,t.createDecipher=o.createDecipher,t.Decipheriv=o.Decipheriv,t.createDecipheriv=o.createDecipheriv,t.getCiphers=o.getCiphers,t.listCiphers=o.listCiphers;var c=a(923);t.DiffieHellmanGroup=c.DiffieHellmanGroup,t.createDiffieHellmanGroup=c.createDiffieHellmanGroup,t.getDiffieHellman=c.getDiffieHellman,t.createDiffieHellman=c.createDiffieHellman,t.DiffieHellman=c.DiffieHellman;var l=a(928);t.createSign=l.createSign,t.Sign=l.Sign,t.createVerify=l.createVerify,t.Verify=l.Verify,t.createECDH=a(967);var u=a(980);t.publicEncrypt=u.publicEncrypt,t.privateEncrypt=u.privateEncrypt,t.publicDecrypt=u.publicDecrypt,t.privateDecrypt=u.privateDecrypt;var d=a(983);t.randomFill=d.randomFill,t.randomFillSync=d.randomFillSync,t.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},t.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},function(e,t,a){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,a,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,s,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,a)}));case 3:return t.nextTick((function(){e.call(null,a,r)}));case 4:return t.nextTick((function(){e.call(null,a,r,n)}));default:for(i=new Array(o-1),s=0;s<i.length;)i[s++]=arguments[s];return t.nextTick((function(){e.apply(null,i)}))}}}:e.exports=t}).call(this,a(12))},function(e,t,a){var r=a(2).Buffer;function n(e){r.isBuffer(e)||(e=r.from(e));for(var t=e.length/4|0,a=new Array(t),n=0;n<t;n++)a[n]=e.readUInt32BE(4*n);return a}function i(e){for(;0<e.length;e++)e[0]=0}function s(e,t,a,r,n){for(var i,s,o,c,l=a[0],u=a[1],d=a[2],p=a[3],h=e[0]^t[0],f=e[1]^t[1],m=e[2]^t[2],g=e[3]^t[3],b=4,y=1;y<n;y++)i=l[h>>>24]^u[f>>>16&255]^d[m>>>8&255]^p[255&g]^t[b++],s=l[f>>>24]^u[m>>>16&255]^d[g>>>8&255]^p[255&h]^t[b++],o=l[m>>>24]^u[g>>>16&255]^d[h>>>8&255]^p[255&f]^t[b++],c=l[g>>>24]^u[h>>>16&255]^d[f>>>8&255]^p[255&m]^t[b++],h=i,f=s,m=o,g=c;return i=(r[h>>>24]<<24|r[f>>>16&255]<<16|r[m>>>8&255]<<8|r[255&g])^t[b++],s=(r[f>>>24]<<24|r[m>>>16&255]<<16|r[g>>>8&255]<<8|r[255&h])^t[b++],o=(r[m>>>24]<<24|r[g>>>16&255]<<16|r[h>>>8&255]<<8|r[255&f])^t[b++],c=(r[g>>>24]<<24|r[h>>>16&255]<<16|r[f>>>8&255]<<8|r[255&m])^t[b++],[i>>>=0,s>>>=0,o>>>=0,c>>>=0]}var o=[0,1,2,4,8,16,32,64,128,27,54],c=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var a=[],r=[],n=[[],[],[],[]],i=[[],[],[],[]],s=0,o=0,c=0;c<256;++c){var l=o^o<<1^o<<2^o<<3^o<<4;l=l>>>8^255&l^99,a[s]=l,r[l]=s;var u=e[s],d=e[u],p=e[d],h=257*e[l]^16843008*l;n[0][s]=h<<24|h>>>8,n[1][s]=h<<16|h>>>16,n[2][s]=h<<8|h>>>24,n[3][s]=h,h=16843009*p^65537*d^257*u^16843008*s,i[0][l]=h<<24|h>>>8,i[1][l]=h<<16|h>>>16,i[2][l]=h<<8|h>>>24,i[3][l]=h,0===s?s=o=1:(s=u^e[e[e[p^u]]],o^=e[e[o]])}return{SBOX:a,INV_SBOX:r,SUB_MIX:n,INV_SUB_MIX:i}}();function l(e){this._key=n(e),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var e=this._key,t=e.length,a=t+6,r=4*(a+1),n=[],i=0;i<t;i++)n[i]=e[i];for(i=t;i<r;i++){var s=n[i-1];i%t==0?(s=s<<8|s>>>24,s=c.SBOX[s>>>24]<<24|c.SBOX[s>>>16&255]<<16|c.SBOX[s>>>8&255]<<8|c.SBOX[255&s],s^=o[i/t|0]<<24):t>6&&i%t==4&&(s=c.SBOX[s>>>24]<<24|c.SBOX[s>>>16&255]<<16|c.SBOX[s>>>8&255]<<8|c.SBOX[255&s]),n[i]=n[i-t]^s}for(var l=[],u=0;u<r;u++){var d=r-u,p=n[d-(u%4?0:4)];l[u]=u<4||d<=4?p:c.INV_SUB_MIX[0][c.SBOX[p>>>24]]^c.INV_SUB_MIX[1][c.SBOX[p>>>16&255]]^c.INV_SUB_MIX[2][c.SBOX[p>>>8&255]]^c.INV_SUB_MIX[3][c.SBOX[255&p]]}this._nRounds=a,this._keySchedule=n,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(e){return s(e=n(e),this._keySchedule,c.SUB_MIX,c.SBOX,this._nRounds)},l.prototype.encryptBlock=function(e){var t=this.encryptBlockRaw(e),a=r.allocUnsafe(16);return a.writeUInt32BE(t[0],0),a.writeUInt32BE(t[1],4),a.writeUInt32BE(t[2],8),a.writeUInt32BE(t[3],12),a},l.prototype.decryptBlock=function(e){var t=(e=n(e))[1];e[1]=e[3],e[3]=t;var a=s(e,this._invKeySchedule,c.INV_SUB_MIX,c.INV_SBOX,this._nRounds),i=r.allocUnsafe(16);return i.writeUInt32BE(a[0],0),i.writeUInt32BE(a[3],4),i.writeUInt32BE(a[2],8),i.writeUInt32BE(a[1],12),i},l.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},e.exports.AES=l},function(e,t,a){var r=a(2).Buffer,n=a(163);e.exports=function(e,t,a,i){if(r.isBuffer(e)||(e=r.from(e,"binary")),t&&(r.isBuffer(t)||(t=r.from(t,"binary")),8!==t.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=a/8,o=r.alloc(s),c=r.alloc(i||0),l=r.alloc(0);s>0||i>0;){var u=new n;u.update(l),u.update(e),t&&u.update(t),l=u.digest();var d=0;if(s>0){var p=o.length-s;d=Math.min(s,l.length),l.copy(o,p,0,d),s-=d}if(d<l.length&&i>0){var h=c.length-i,f=Math.min(i,l.length-d);l.copy(c,h,d,d+f),i-=f}}return l.fill(0),{key:o,iv:c}}},function(e,t,a){"use strict";var r=t;function n(e){return 1===e.length?"0"+e:e}function i(e){for(var t="",a=0;a<e.length;a++)t+=n(e[a].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var a=[];if("string"!=typeof e){for(var r=0;r<e.length;r++)a[r]=0|e[r];return a}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(r=0;r<e.length;r+=2)a.push(parseInt(e[r]+e[r+1],16))}else for(r=0;r<e.length;r++){var n=e.charCodeAt(r),i=n>>8,s=255&n;i?a.push(i,s):a.push(s)}return a},r.zero2=n,r.toHex=i,r.encode=function(e,t){return"hex"===t?i(e):e}},function(e,t,a){"use strict";var r=a(46),n=a(28),i=n.getNAF,s=n.getJSF,o=n.assert;function c(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var a=this.n&&this.p.div(this.n);!a||a.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){o(e.precomputed);var a=e._getDoubles(),r=i(t,1,this._bitLength),n=(1<<a.step+1)-(a.step%2==0?2:1);n/=3;for(var s=[],c=0;c<r.length;c+=a.step){var l=0;for(t=c+a.step-1;t>=c;t--)l=(l<<1)+r[t];s.push(l)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),p=n;p>0;p--){for(c=0;c<s.length;c++){(l=s[c])===p?d=d.mixedAdd(a.points[c]):l===-p&&(d=d.mixedAdd(a.points[c].neg()))}u=u.add(d)}return u.toP()},c.prototype._wnafMul=function(e,t){var a=4,r=e._getNAFPoints(a);a=r.wnd;for(var n=r.points,s=i(t,a,this._bitLength),c=this.jpoint(null,null,null),l=s.length-1;l>=0;l--){for(t=0;l>=0&&0===s[l];l--)t++;if(l>=0&&t++,c=c.dblp(t),l<0)break;var u=s[l];o(0!==u),c="affine"===e.type?u>0?c.mixedAdd(n[u-1>>1]):c.mixedAdd(n[-u-1>>1].neg()):u>0?c.add(n[u-1>>1]):c.add(n[-u-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,a,r,n){for(var o=this._wnafT1,c=this._wnafT2,l=this._wnafT3,u=0,d=0;d<r;d++){var p=(P=t[d])._getNAFPoints(e);o[d]=p.wnd,c[d]=p.points}for(d=r-1;d>=1;d-=2){var h=d-1,f=d;if(1===o[h]&&1===o[f]){var m=[t[h],null,null,t[f]];0===t[h].y.cmp(t[f].y)?(m[1]=t[h].add(t[f]),m[2]=t[h].toJ().mixedAdd(t[f].neg())):0===t[h].y.cmp(t[f].y.redNeg())?(m[1]=t[h].toJ().mixedAdd(t[f]),m[2]=t[h].add(t[f].neg())):(m[1]=t[h].toJ().mixedAdd(t[f]),m[2]=t[h].toJ().mixedAdd(t[f].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],b=s(a[h],a[f]);u=Math.max(b[0].length,u),l[h]=new Array(u),l[f]=new Array(u);for(var y=0;y<u;y++){var v=0|b[0][y],_=0|b[1][y];l[h][y]=g[3*(v+1)+(_+1)],l[f][y]=0,c[h]=m}}else l[h]=i(a[h],o[h],this._bitLength),l[f]=i(a[f],o[f],this._bitLength),u=Math.max(l[h].length,u),u=Math.max(l[f].length,u)}var w=this.jpoint(null,null,null),x=this._wnafT4;for(d=u;d>=0;d--){for(var k=0;d>=0;){var S=!0;for(y=0;y<r;y++)x[y]=0|l[y][d],0!==x[y]&&(S=!1);if(!S)break;k++,d--}if(d>=0&&k++,w=w.dblp(k),d<0)break;for(y=0;y<r;y++){var P,E=x[y];0!==E&&(E>0?P=c[y][E-1>>1]:E<0&&(P=c[y][-E-1>>1].neg()),w="affine"===P.type?w.mixedAdd(P):w.add(P))}}for(d=0;d<r;d++)c[d]=null;return n?w:w.toP()},c.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=n.toArray(e,t);var a=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*a)return 6===e[0]?o(e[e.length-1]%2==0):7===e[0]&&o(e[e.length-1]%2==1),this.point(e.slice(1,1+a),e.slice(1+a,1+2*a));if((2===e[0]||3===e[0])&&e.length-1===a)return this.pointFromX(e.slice(1,1+a),3===e[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),a=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return n.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],r=this,n=0;n<t;n+=e){for(var i=0;i<e;i++)r=r.dbl();a.push(r)}return{step:e,points:a}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],a=(1<<e)-1,r=1===a?null:this.dbl(),n=1;n<a;n++)t[n]=t[n-1].add(r);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,a=0;a<e;a++)t=t.dbl();return t}},function(e,t,a){var r=a(957),n=a(964),i=a(965),s=a(169),o=a(360),c=a(2).Buffer;function l(e){var t;"object"!=typeof e||c.isBuffer(e)||(t=e.passphrase,e=e.key),"string"==typeof e&&(e=c.from(e));var a,l,u=i(e,t),d=u.tag,p=u.data;switch(d){case"CERTIFICATE":l=r.certificate.decode(p,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=r.PublicKey.decode(p,"der")),a=l.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=r.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+a)}case"ENCRYPTED PRIVATE KEY":p=function(e,t){var a=e.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),i=n[e.algorithm.decrypt.cipher.algo.join(".")],l=e.algorithm.decrypt.cipher.iv,u=e.subjectPrivateKey,d=parseInt(i.split("-")[1],10)/8,p=o.pbkdf2Sync(t,a,r,d,"sha1"),h=s.createDecipheriv(i,p,l),f=[];return f.push(h.update(u)),f.push(h.final()),c.concat(f)}(p=r.EncryptedPrivateKey.decode(p,"der"),t);case"PRIVATE KEY":switch(a=(l=r.PrivateKey.decode(p,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:r.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=r.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+a)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(p,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(p,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(p,"der")};case"EC PRIVATE KEY":return{curve:(p=r.ECPrivateKey.decode(p,"der")).parameters.value,privateKey:p.privateKey};default:throw new Error("unknown key type "+d)}}e.exports=l,l.signature=r.signature},function(e,t,a){"use strict";var r=a(8),n=a(29),i=n.getNAF,s=n.getJSF,o=n.assert;function c(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var a=this.n&&this.p.div(this.n);!a||a.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){o(e.precomputed);var a=e._getDoubles(),r=i(t,1,this._bitLength),n=(1<<a.step+1)-(a.step%2==0?2:1);n/=3;for(var s=[],c=0;c<r.length;c+=a.step){var l=0;for(t=c+a.step-1;t>=c;t--)l=(l<<1)+r[t];s.push(l)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),p=n;p>0;p--){for(c=0;c<s.length;c++){(l=s[c])===p?d=d.mixedAdd(a.points[c]):l===-p&&(d=d.mixedAdd(a.points[c].neg()))}u=u.add(d)}return u.toP()},c.prototype._wnafMul=function(e,t){var a=4,r=e._getNAFPoints(a);a=r.wnd;for(var n=r.points,s=i(t,a,this._bitLength),c=this.jpoint(null,null,null),l=s.length-1;l>=0;l--){for(t=0;l>=0&&0===s[l];l--)t++;if(l>=0&&t++,c=c.dblp(t),l<0)break;var u=s[l];o(0!==u),c="affine"===e.type?u>0?c.mixedAdd(n[u-1>>1]):c.mixedAdd(n[-u-1>>1].neg()):u>0?c.add(n[u-1>>1]):c.add(n[-u-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,a,r,n){for(var o=this._wnafT1,c=this._wnafT2,l=this._wnafT3,u=0,d=0;d<r;d++){var p=(P=t[d])._getNAFPoints(e);o[d]=p.wnd,c[d]=p.points}for(d=r-1;d>=1;d-=2){var h=d-1,f=d;if(1===o[h]&&1===o[f]){var m=[t[h],null,null,t[f]];0===t[h].y.cmp(t[f].y)?(m[1]=t[h].add(t[f]),m[2]=t[h].toJ().mixedAdd(t[f].neg())):0===t[h].y.cmp(t[f].y.redNeg())?(m[1]=t[h].toJ().mixedAdd(t[f]),m[2]=t[h].add(t[f].neg())):(m[1]=t[h].toJ().mixedAdd(t[f]),m[2]=t[h].toJ().mixedAdd(t[f].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],b=s(a[h],a[f]);u=Math.max(b[0].length,u),l[h]=new Array(u),l[f]=new Array(u);for(var y=0;y<u;y++){var v=0|b[0][y],_=0|b[1][y];l[h][y]=g[3*(v+1)+(_+1)],l[f][y]=0,c[h]=m}}else l[h]=i(a[h],o[h],this._bitLength),l[f]=i(a[f],o[f],this._bitLength),u=Math.max(l[h].length,u),u=Math.max(l[f].length,u)}var w=this.jpoint(null,null,null),x=this._wnafT4;for(d=u;d>=0;d--){for(var k=0;d>=0;){var S=!0;for(y=0;y<r;y++)x[y]=0|l[y][d],0!==x[y]&&(S=!1);if(!S)break;k++,d--}if(d>=0&&k++,w=w.dblp(k),d<0)break;for(y=0;y<r;y++){var P,E=x[y];0!==E&&(E>0?P=c[y][E-1>>1]:E<0&&(P=c[y][-E-1>>1].neg()),w="affine"===P.type?w.mixedAdd(P):w.add(P))}}for(d=0;d<r;d++)c[d]=null;return n?w:w.toP()},c.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=n.toArray(e,t);var a=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*a)return 6===e[0]?o(e[e.length-1]%2==0):7===e[0]&&o(e[e.length-1]%2==1),this.point(e.slice(1,1+a),e.slice(1+a,1+2*a));if((2===e[0]||3===e[0])&&e.length-1===a)return this.pointFromX(e.slice(1,1+a),3===e[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),a=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return n.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],r=this,n=0;n<t;n+=e){for(var i=0;i<e;i++)r=r.dbl();a.push(r)}return{step:e,points:a}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],a=(1<<e)-1,r=1===a?null:this.dbl(),n=1;n<a;n++)t[n]=t[n-1].add(r);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,a=0;a<e;a++)t=t.dbl();return t}},function(e,t,a){"use strict";var r=a(8),n=a(30),i=n.getNAF,s=n.getJSF,o=n.assert;function c(e,t){this.type=e,this.p=new r(t.p,16),this.red=t.prime?r.red(t.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=t.n&&new r(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var a=this.n&&this.p.div(this.n);!a||a.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){o(e.precomputed);var a=e._getDoubles(),r=i(t,1,this._bitLength),n=(1<<a.step+1)-(a.step%2==0?2:1);n/=3;for(var s=[],c=0;c<r.length;c+=a.step){var l=0;for(t=c+a.step-1;t>=c;t--)l=(l<<1)+r[t];s.push(l)}for(var u=this.jpoint(null,null,null),d=this.jpoint(null,null,null),p=n;p>0;p--){for(c=0;c<s.length;c++){(l=s[c])===p?d=d.mixedAdd(a.points[c]):l===-p&&(d=d.mixedAdd(a.points[c].neg()))}u=u.add(d)}return u.toP()},c.prototype._wnafMul=function(e,t){var a=4,r=e._getNAFPoints(a);a=r.wnd;for(var n=r.points,s=i(t,a,this._bitLength),c=this.jpoint(null,null,null),l=s.length-1;l>=0;l--){for(t=0;l>=0&&0===s[l];l--)t++;if(l>=0&&t++,c=c.dblp(t),l<0)break;var u=s[l];o(0!==u),c="affine"===e.type?u>0?c.mixedAdd(n[u-1>>1]):c.mixedAdd(n[-u-1>>1].neg()):u>0?c.add(n[u-1>>1]):c.add(n[-u-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,a,r,n){for(var o=this._wnafT1,c=this._wnafT2,l=this._wnafT3,u=0,d=0;d<r;d++){var p=(P=t[d])._getNAFPoints(e);o[d]=p.wnd,c[d]=p.points}for(d=r-1;d>=1;d-=2){var h=d-1,f=d;if(1===o[h]&&1===o[f]){var m=[t[h],null,null,t[f]];0===t[h].y.cmp(t[f].y)?(m[1]=t[h].add(t[f]),m[2]=t[h].toJ().mixedAdd(t[f].neg())):0===t[h].y.cmp(t[f].y.redNeg())?(m[1]=t[h].toJ().mixedAdd(t[f]),m[2]=t[h].add(t[f].neg())):(m[1]=t[h].toJ().mixedAdd(t[f]),m[2]=t[h].toJ().mixedAdd(t[f].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],b=s(a[h],a[f]);u=Math.max(b[0].length,u),l[h]=new Array(u),l[f]=new Array(u);for(var y=0;y<u;y++){var v=0|b[0][y],_=0|b[1][y];l[h][y]=g[3*(v+1)+(_+1)],l[f][y]=0,c[h]=m}}else l[h]=i(a[h],o[h],this._bitLength),l[f]=i(a[f],o[f],this._bitLength),u=Math.max(l[h].length,u),u=Math.max(l[f].length,u)}var w=this.jpoint(null,null,null),x=this._wnafT4;for(d=u;d>=0;d--){for(var k=0;d>=0;){var S=!0;for(y=0;y<r;y++)x[y]=0|l[y][d],0!==x[y]&&(S=!1);if(!S)break;k++,d--}if(d>=0&&k++,w=w.dblp(k),d<0)break;for(y=0;y<r;y++){var P,E=x[y];0!==E&&(E>0?P=c[y][E-1>>1]:E<0&&(P=c[y][-E-1>>1].neg()),w="affine"===P.type?w.mixedAdd(P):w.add(P))}}for(d=0;d<r;d++)c[d]=null;return n?w:w.toP()},c.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=n.toArray(e,t);var a=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*a)return 6===e[0]?o(e[e.length-1]%2==0):7===e[0]&&o(e[e.length-1]%2==1),this.point(e.slice(1,1+a),e.slice(1+a,1+2*a));if((2===e[0]||3===e[0])&&e.length-1===a)return this.pointFromX(e.slice(1,1+a),3===e[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(e){return this.encode(e,!0)},l.prototype._encode=function(e){var t=this.curve.p.byteLength(),a=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray("be",t))},l.prototype.encode=function(e,t){return n.encode(this._encode(t),e)},l.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},l.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},l.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],r=this,n=0;n<t;n+=e){for(var i=0;i<e;i++)r=r.dbl();a.push(r)}return{step:e,points:a}},l.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],a=(1<<e)-1,r=1===a?null:this.dbl(),n=1;n<a;n++)t[n]=t[n-1].add(r);return{wnd:e,points:t}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(e){for(var t=this,a=0;a<e;a++)t=t.dbl();return t}},function(e,t){t.encode=function(e){var t="";for(var a in e)e.hasOwnProperty(a)&&(t.length&&(t+="&"),t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t},t.decode=function(e){for(var t={},a=e.split("&"),r=0,n=a.length;r<n;r++){var i=a[r].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}},function(e,t){e.exports=function(e,t){var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}},function(e,t,a){(function(r){function n(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=a(1116)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var a=this.useColors;if(e[0]=(a?"%c":"")+this.namespace+(a?" %c":" ")+e[0]+(a?"%c ":" ")+"+"+t.humanize(this.diff),!a)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))})),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=n,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(n())}).call(this,a(12))},function(e,t){e.exports=ArcadeInviteTemplate=function(e,t,r,n){console.log(JSON.stringify(r.returnMessage()));var i="open-invite",s=0;if(r.isMine&&(i="my-invite"),r.msg&&(r.msg.options["game-wizard-players-select"]<=r.msg.players.length&&(s=1),r.msg.players_needed<=r.msg.players.length&&(s=1)),e.options&&e.options.games)for(var o=0;o<e.options.games.length;o++)1==e.options.games[o].initializing&&(s=0);r.msg.players_needed>4||r.msg.players_needed;var c='<div class="playerInfo" style="">';if(r.msg.players.length>r.msg.players_needed)for(var l=0;l<r.msg.players.length;l++){var u=e.keys.returnIdenticon(r.msg.players[l]);c+='<div class="player-slot tip id-'.concat(r.msg.players[l],'"><img class="identicon" src="').concat(u,'"><div class="tiptext">').concat(e.browser.returnAddressHTML(r.msg.players[l]),"</div></div>")}else for(var d=0;d<r.msg.players_needed;d++){if(!(d<4)){c+='<div style="color:#f5f5f59c;margin-left:0.2em;" class="player-slot-ellipsis fas fa-ellipsis-h"></div>';break}if(d<r.msg.players.length){var p=e.keys.returnIdenticon(r.msg.players[d]);c+='<div class="player-slot tip id-'.concat(r.msg.players[d],'"><img class="identicon" src="').concat(p,'"><div class="tiptext">').concat(e.browser.returnAddressHTML(r.msg.players[d]),"</div></div>")}else c+='<div class="player-slot identicon-empty"></div>'}if(c+="</div>",document.getElementById("invite-".concat(r.transaction.sig)))return"";var h='\n    <div id="invite-'.concat(r.transaction.sig,'" class="arcade-tile i_').concat(n," ").concat(i,'" style="background-image: url(/').concat(r.msg.game,'/img/arcade.jpg);">\n      <div class="invite-tile-wrapper">\n        <div class="game-inset-img" style="background-image: url(/').concat(r.msg.game,'/img/arcade.jpg);"></div>\n        <div class="invite-col-2">\n          <div class="gameName">').concat(r.msg.game,'</div>\n          <div class="gamePlayers">').concat(c,'</div>\n        </div>\n        <div class="gameShortDescription">').concat(a(e,r),'</div>\n\t<div class="gameButtons">\n    ');return r.isMine?(1==s&&(h+='<button data-sig="'.concat(r.transaction.sig,'" data-cmd="continue" class="button invite-tile-button">CONTINUE</button>')),h+='<button data-sig="'.concat(r.transaction.sig,'" data-cmd="cancel" class="button invite-tile-button">CANCEL</button>')):1==s?(h+='<button data-sig="'.concat(r.transaction.sig,'" data-cmd="continue" class="button invite-tile-button">WATCH</button>'),h+='<button data-sig="'.concat(r.transaction.sig,'" data-cmd="cancel" class="button invite-tile-button">CANCEL</button>')):h+='<button data-sig="'.concat(r.transaction.sig,'" data-cmd="join" class="button invite-tile-button invite-tile-button-join">JOIN</button>'),h+="\n        </div>\n      </div>\n    </div>\n    "};var a=function(e,t){var a="";if(t.msg){var r=e.modules.returnModule(t.msg.game);if(r){var n=r.returnShortGameOptionsArray(t.msg.options);for(var i in n){a+='<div class="gameShortDescriptionRow"><div class="gameShortDescriptionKey">'.concat(i,': </div><div class="gameShortDescriptionValue">').concat(n[i],"</div></div>")}}}return a}},function(e,t,a){var r=a(220),n=a(221);e.exports=ArcadeGameDetails={render:function(e,t,a){var i=e.modules.returnModule(a.msg.game);document.getElementById("background-shim")||e.browser.addElementToDom('<div id="background-shim" class="background-shim" style=""><div id="background-shim-cover" class="background-shim-cover"></div></div>'),t.overlay.showOverlay(e,t,r(e,t,a),(function(){document.querySelector(".background-shim").destroy()})),t.meta_overlay=new n(e,i),t.meta_overlay.render(e,i),t.meta_overlay.attachEvents(e,i);var s="/"+i.returnSlug()+"/img/arcade.jpg";document.querySelector(".game-image").src=s,document.querySelector(".background-shim").style.backgroundImage="url("+s+")",document.querySelector(".game-wizard-advanced-options-overlay").style.display="none",document.querySelector(".game-wizard-options-toggle").onclick=function(a){t.meta_overlay.showOverlay(e,i,i.returnGameOptionsHTML()),document.querySelector(".game-wizard-advanced-options-overlay").style.display="block";try{document.getElementById("game-wizard-advanced-return-btn")&&(document.querySelector(".game-wizard-advanced-return-btn").onclick=function(e){document.getElementById("game-wizard-advanced-options-overlay").style.display="none"})}catch(e){}},i.publisher_message&&(document.querySelector(".game-wizard-publisher-message").innerHTML='<span style="font-weight:bold">NOTE: </span>'.concat(i.publisher_message)),document.querySelector(".game-wizard-title").innerHTML=i.name,document.querySelector(".game-wizard-description").innerHTML=i.description,setTimeout((function(){document.querySelector(".game-wizard-players-select").innerHTML="";for(var e=i.minPlayers;e<=i.maxPlayers;e++){var t=document.createElement("option");t.text=e+" player",t.value=e,document.querySelector(".game-wizard-players-select").add(t)}}),100);var o=document.querySelector(".game-wizard-advanced-box"),c=document.querySelector(".game-overlay"),l=document.querySelector(".game-overlay-backdrop"),u=document.querySelector(".game-wizard-advanced-options-overlay");u.appendChild(c),u.appendChild(l),o&&u.appendChild(o)},attachEvents:function(e,t){document.getElementById("game-invite-btn").addEventListener("click",(function(a){try{var r=function(){var e={};return document.querySelectorAll("form input, form select").forEach((function(t){"checkbox"==t.type?t.checked&&(e[t.name]=1):e[t.name]=t.value})),e}();e.browser.logMatomoEvent("Arcade","ArcadeCreateNewInvite",r.gamename);var n=e.modules.returnModule(r.gamename),i={name:n.name,slug:n.returnSlug(),options:n.returnFormattedGameOptions(r),options_html:n.returnGameRowOptionsHTML(r),players_needed:document.querySelector(".game-wizard-players-select").value};if(1==document.querySelector(".game-wizard-players-select").value)return void t.launchSinglePlayerGame(e,data,i);t.overlay.hideOverlay(),document.getElementById("background-shim").destroy();var s=t.createOpenTransaction(i);t.app.network.propagateTransaction(s),t.renderArcadeMain(e,t)}catch(e){alert("error: "+e)}return!1}))}}},function(e,t,a){var r=a(235),n=a(1181);e.exports=ChatBoxMessageBlockTemplate=function(e,t,a,i){var s="",o="",c="",l=(new Date).getTime(),u="others",d="",p=0;if(2==a.members.length?(s=a.members[0]!=e.wallet.returnPublicKey()?a.members[0]:a.members[1],publickey=s):(s=a.id,publickey=a.members[0]),o=e.keys.returnIdenticon(s),c=e.keys.returnIdenticonColor(s),keyHTML=e.browser.returnAddressHTML(s),0==i.length)return"";for(var h=[],f="",m=0;m<i.length;m++){var g=i[m];0==m&&(d=e.crypto.hash(g.transaction.sig)),"others"==u&&g.transaction.from[0].add==e.wallet.returnPublicKey()&&(u="myself");var b=g.returnMessage();document.getElementById(g.transaction.sig)||h.includes(g.transaction.sig)||(f+=r(e,t,b.message,g.transaction.sig,u),l=g.transaction.ts,publickey=g.transaction.from[0].add,o=e.keys.returnIdenticon(publickey),c=e.keys.returnIdenticonColor(publickey),keyHTML=e.browser.returnAddressHTML(publickey),h.push(g.transaction.sig),p++)}var y=t.app.browser.formatDate(l);return 0==p?"":'\n    <div class="chat-message-set chat-message-set-'.concat(u," chat-message-set-").concat(d,'" id="chat-message-set-').concat(d,'">\n      <img src="').concat(o,'" class="chat-room-message-identicon"/>\n      <div class="chat-message-set-content chat-message-set-content-').concat(u,'">\n        <div class="chat-message-header">\n              <p class="chat-message-author">').concat(keyHTML,'</p>\n              <p class="chat-message-timestamp">').concat(y.hours,":").concat(y.minutes,'</p>\n        </div>\n        <div class="chat-box-message-container chat-box-message-container-').concat(u,'" style="border-color:').concat(c,';">\n          ').concat(n.emojify(f),"\n        </div>\n      </div>\n    </div>\n  ")}},function(e,t,a){var r=a(253),n=a(255),i=a(259),s=a(261);a(263);e.exports=EmailHeader={render:function(e,t){switch(t.header=this,e.browser.parseHash(window.location.hash).page){case"email_list":r.render(e,t),r.attachEvents(e,t);break;case"email_detail":n.render(e,t),n.attachEvents(e,t);break;case"email_form":i.render(e,t),i.attachEvents(e,t);break;case"email_appspace":case"crypto_page":s.render(e,t),s.attachEvents(e,t)}t.cacheAndRenderPreferredCryptoBalance()},attachEvents:function(e,t){var a=document.getElementById("email-bars-icon");a&&a.addEventListener("click",(function(e){var t=document.querySelector("#mobile.email-bars-menu");t.style.display="block"==t.style.display?"none":"block"})),document.querySelectorAll("#email-form-back-button").forEach((function(e,t){e.onclick=function(){window.history.back()}}))}}},function(e,t){e.exports=EmailListTemplate=function(){return'\n      <div class="email-list"></div>\n  '}},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}var i=a(5),s=a(42),o=a(288),c=a(289);e.exports=PostView={render:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.overlay=new s(e,t),t.overlay.render(e,t),t.overlay.attachEvents(e,t),t.comments=[];var n='SELECT id, tx FROM posts WHERE thread_id = "'.concat(r,'" ORDER BY ts ASC');t.sendPeerDatabaseRequestWithFilter("Post",n,(function(n){if(n&&n.rows){for(var s=0;s<n.rows.length;s++){for(var o=1,c=new i.transaction(JSON.parse(n.rows[s].tx)),l=c.returnMessage(),u=0;u<t.comments.length;u++)t.comments[u].transaction.sig==c.transaction.sig&&(o=0);if(c.transaction.sig==r){o=0;try{document.getElementById("post-view-parent-comment").innerHTML=l.comment;var d=document.getElementById("post-view-gallery"),p="";if(l.images.length>0){for(var h=0;h<c.msg.images.length;h++)p+='<img class="post-view-gallery-image" src="'.concat(c.msg.images[h],'" />');d.innerHTML=p,d.style.display="block"}}catch(e){console.log("error showing comment or gallery")}}1==o&&(c.originalSig=n.rows[s].id,t.comments.push(c))}for(var f=0;f<t.comments.length;f++)a.addComment(e,t,t.comments[f]);a.attachEvents(e,t,r)}})),t.overlay.showOverlay(e,t,o(e,t,r),(function(){}))},rerender:function(e,t,a){},attachEvents:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";document.querySelector(".post-submit-btn").onclick=function(n){var i=document.querySelector(".post-view-textarea").innerHTML;if(document.querySelector(".post-view-textarea").innerHTML="",""!=i){var s=t.createCommentTransaction(r,i);e.network.propagateTransaction(s),s.children=0,t.comments.push(s),a.addComment(e,t,s),a.attachEvents(e,t,r)}},document.querySelectorAll(".post-view-edit").forEach((function(n){n.onclick=function(i){console.log("********* post-view-edit onclick ********");var s=n.getAttribute("data-id");document.querySelectorAll(".post-view-parent-comment").forEach((function(n){if(n.getAttribute("data-id")===s&&"edit"!=n.getAttribute("mode")){n.setAttribute("mode","edit");var i='\n                <textarea data-id="'.concat(s,'" id="textedit-field-').concat(s,'">').concat(n.innerHTML,'</textarea>\n                <button id="edit-button-').concat(s,'" data-id="').concat(s,'" type="button" class="comment-edit-button" value="Edit Post">edit comment</button>\n              ');n.innerHTML=i,document.getElementById("edit-button-".concat(s)).onclick=function(i){for(var o=document.querySelector("#textedit-field-".concat(s)).value,c=null,l=0;l<t.posts.length;l++)t.posts[l].transaction.sig===s&&(c=t.posts[l]);var u=t.createEditPostTransaction(c.msg.title,o,c.msg.link,c.msg.forum,c.msg.images,s);e.network.propagateTransaction(u);for(var d=0;d<t.posts.length;d++)t.posts[d].transaction.sig===s&&(u.children=t.posts[d].children,t.posts[d]=u);n.setAttribute("mode","read"),n.innerHTML=o,document.querySelectorAll(".post-view-parent-comment, .post-view-edit").forEach((function(e){e.setAttribute("data-id",u.transaction.sig)})),a.attachEvents(e,t,r)}}}))}}));try{document.querySelectorAll(".post-view-comment-edit").forEach((function(a){a.onclick=function(r){var n=a.getAttribute("data-id");document.querySelectorAll(".post-view-comment-text").forEach((function(a){if(a.getAttribute("data-id")===n){var r='\n                <textarea data-id="'.concat(n,'" id="textedit-field-').concat(n,'">').concat(a.innerHTML,'</textarea>\n                <button id="edit-button-').concat(n,'" data-id="').concat(n,'" type="button" class="comment-edit-button" value="Edit Comment">edit comment</button>\n              ');a.innerHTML=r,document.getElementById("edit-button-".concat(n)).onclick=function(r){var i=document.querySelector("#textedit-field-".concat(n)).value,s=t.createEditTransaction(n,i);e.network.propagateTransaction(s);for(var o=0;o<t.comments.length;o++)t.comments[o].transaction.sig===n&&(s.children=t.comments[o].children,t.comments[o]=s);for(var c=0;c<t.posts.length;c++)t.posts[c].transaction.sig===n&&(s.children=t.posts[c].children,t.comments[c]=s);a.innerHTML=i}}}))}}))}catch(e){}document.querySelector(".post-view-report").onclick=function(){var a=n(regeneratorRuntime.mark((function a(r){var n,i,s,o;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,sconfirm("Report this post or comments to the mods?");case 2:if(!a.sent){a.next=13;break}return n=document.querySelector(".post-view-report").getAttribute("data-id"),a.next=7,salert("Thank you for flagging this");case 7:for(i=0;i<t.posts.length;i++)t.posts[i].transaction.sig===n&&t.posts.splice(i,1);for(s=0;s<t.comments.length;s++)t.comments[s].transaction.sig===n&&t.comments.splice(s,1);t.render(),t.overlay.hideOverlay(),o=t.createReportTransaction(n),e.network.propagateTransaction(o);case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},addComment:function(e,t,a){e.browser.addElementToDom(c(e,t,a),"post-view-comments")}}},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}var n=a(290),i=a(42);e.exports=PostCreate={render:function(e,t){var a=this;this.new_post={},this.new_post.images=[],this.new_post.title="",this.new_post.comment="",this.new_post.link="",this.new_post.forum="",t.overlay=new i(e,t),t.overlay.render(e,t),t.overlay.attachEvents(e,t),t.overlay.showOverlay(e,t,n(),(function(){})),this.showTab("discussion"),document.querySelector(".post-create-header-discussion").onclick=function(e){a.showTab("discussion")},document.querySelector(".post-create-header-link").onclick=function(e){a.showTab("link")},document.querySelector(".post-create-header-image").onclick=function(e){a.showTab("image")},e.browser.addDragAndDropFileUploadToElement("post-create-image",(function(r){console.log(r),a.new_post.images.push(r),e.browser.addElementToDom('<div data-id="'.concat(a.new_post.images.length-1,'" class="post-create-image-preview"><img src="').concat(r,'" style="top: 0px; position: relative; float: left; height: 50px; width: auto; margin-left: auto; margin-right: auto;width: auto;" /></div>'),"post-create-image-preview-container"),a.attachEvents(e,t)}))},attachEvents:function(e,t){var a=this;document.querySelector(".post-submit-btn").onclick=function(r){if(a.new_post.title=document.querySelector(".post-create-title").value,a.new_post.comment=document.querySelector(".post-create-textarea").innerHTML,a.new_post.link=document.querySelector(".post-create-link-input").value,a.new_post.forum=document.querySelector(".post-create-forum").value,console.log("Submitted Title--\x3e"+a.new_post.title+"<---"),""!=a.new_post.title){var n=t.createPostTransaction(a.new_post.title,a.new_post.comment,a.new_post.link,a.new_post.forum,a.new_post.images);e.network.propagateTransaction(n),n.children=0,t.posts.push(n),t.render(),t.overlay.hideOverlay()}else salert("Please provide a title for your post!")},document.querySelectorAll(".post-create-image-preview").forEach((function(e){e.onclick=function(){var t,n=(t=regeneratorRuntime.mark((function t(r){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sconfirm("Do you want to delete this image?");case 2:t.sent&&(n=e.getAttribute("data-id"),e.destroy(),a.new_post.images.splice(n,1),document.querySelectorAll(".post-create-image-preview").forEach((function(e){var t=e.getAttribute("data-id");t>n&&e.setAttribute("data-id",t-1)})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}()}))},showTab:function(e){var t=".post-create-header-"+e;document.querySelectorAll(".post-create-header-item").forEach((function(e){e.classList.remove("post-create-active")})),document.querySelector(t).classList.toggle("post-create-active"),"discussion"===e&&(document.querySelector(".post-create-link").style.display="none",document.querySelector(".post-create-image").style.display="none",document.querySelector(".post-create-textarea").style.display="block"),"link"===e&&(document.querySelector(".post-create-link").style.display="block",document.querySelector(".post-create-image").style.display="none",document.querySelector(".post-create-textarea").style.display="none"),"image"===e&&(document.querySelector(".post-create-link").style.display="none",document.querySelector(".post-create-image").style.display="block",document.querySelector(".post-create-textarea").style.display="none")}}},function(e,t){e.exports=PostStyleTemplate=function(e,t){return"\n  "}},function(e,t,a){"use strict";var r=a(1205),n=a(1206);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=v,t.resolve=function(e,t){return v(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?v(e,!1,!0).resolveObject(t):t},t.format=function(e){n.isString(e)&&(e=v(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),d=["%","/","?",";","#"].concat(u),p=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=a(1207);function v(e,t,a){if(e&&n.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,a),r}i.prototype.parse=function(e,t,a){if(!n.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),o=-1!==i&&i<e.indexOf("#")?"?":"#",l=e.split(o);l[0]=l[0].replace(/\\/g,"/");var v=e=l.join(o);if(v=v.trim(),!a&&1===e.split("#").length){var _=c.exec(v);if(_)return this.path=v,this.href=v,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=s.exec(v);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,v=v.substr(w.length)}if(a||w||v.match(/^\/\/[^@\/]+@[^@\/]+/)){var k="//"===v.substr(0,2);!k||w&&g[w]||(v=v.substr(2),this.slashes=!0)}if(!g[w]&&(k||w&&!b[w])){for(var S,P,E=-1,C=0;C<p.length;C++){-1!==(A=v.indexOf(p[C]))&&(-1===E||A<E)&&(E=A)}-1!==(P=-1===E?v.lastIndexOf("@"):v.lastIndexOf("@",E))&&(S=v.slice(0,P),v=v.slice(P+1),this.auth=decodeURIComponent(S)),E=-1;for(C=0;C<d.length;C++){var A;-1!==(A=v.indexOf(d[C]))&&(-1===E||A<E)&&(E=A)}-1===E&&(E=v.length),this.host=v.slice(0,E),v=v.slice(E),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var T=this.hostname.split(/\./),j=(C=0,T.length);C<j;C++){var O=T[C];if(O&&!O.match(h)){for(var D="",I=0,R=O.length;I<R;I++)O.charCodeAt(I)>127?D+="x":D+=O[I];if(!D.match(h)){var B=T.slice(0,C),q=T.slice(C+1),L=O.match(f);L&&(B.push(L[1]),q.unshift(L[2])),q.length&&(v="/"+q.join(".")+v),this.hostname=B.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=r.toASCII(this.hostname));var N=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+N,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0]&&(v="/"+v))}if(!m[x])for(C=0,j=u.length;C<j;C++){var U=u[C];if(-1!==v.indexOf(U)){var $=encodeURIComponent(U);$===U&&($=escape(U)),v=v.split(U).join($)}}var z=v.indexOf("#");-1!==z&&(this.hash=v.substr(z),v=v.slice(0,z));var H=v.indexOf("?");if(-1!==H?(this.search=v.substr(H),this.query=v.substr(H+1),t&&(this.query=y.parse(this.query)),v=v.slice(0,H)):t&&(this.search="",this.query={}),v&&(this.pathname=v),b[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){N=this.pathname||"";var G=this.search||"";this.path=N+G}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",a=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||b[t])&&!1!==i?(i="//"+(i||""),a&&"/"!==a.charAt(0)&&(a="/"+a)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),t+i+(a=a.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(v(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(n.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var a=new i,r=Object.keys(this),s=0;s<r.length;s++){var o=r[s];a[o]=this[o]}if(a.hash=e.hash,""===e.href)return a.href=a.format(),a;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var u=c[l];"protocol"!==u&&(a[u]=e[u])}return b[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a}if(e.protocol&&e.protocol!==a.protocol){if(!b[e.protocol]){for(var d=Object.keys(e),p=0;p<d.length;p++){var h=d[p];a[h]=e[h]}return a.href=a.format(),a}if(a.protocol=e.protocol,e.host||g[e.protocol])a.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),a.pathname=f.join("/")}if(a.search=e.search,a.query=e.query,a.host=e.host||"",a.auth=e.auth,a.hostname=e.hostname||e.host,a.port=e.port,a.pathname||a.search){var m=a.pathname||"",y=a.search||"";a.path=m+y}return a.slashes=a.slashes||e.slashes,a.href=a.format(),a}var v=a.pathname&&"/"===a.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=_||v||a.host&&e.pathname,x=w,k=a.pathname&&a.pathname.split("/")||[],S=(f=e.pathname&&e.pathname.split("/")||[],a.protocol&&!b[a.protocol]);if(S&&(a.hostname="",a.port=null,a.host&&(""===k[0]?k[0]=a.host:k.unshift(a.host)),a.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),w=w&&(""===f[0]||""===k[0])),_)a.host=e.host||""===e.host?e.host:a.host,a.hostname=e.hostname||""===e.hostname?e.hostname:a.hostname,a.search=e.search,a.query=e.query,k=f;else if(f.length)k||(k=[]),k.pop(),k=k.concat(f),a.search=e.search,a.query=e.query;else if(!n.isNullOrUndefined(e.search)){if(S)a.hostname=a.host=k.shift(),(M=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=M.shift(),a.host=a.hostname=M.shift());return a.search=e.search,a.query=e.query,n.isNull(a.pathname)&&n.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a}if(!k.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var P=k.slice(-1)[0],E=(a.host||e.host||k.length>1)&&("."===P||".."===P)||""===P,C=0,A=k.length;A>=0;A--)"."===(P=k[A])?k.splice(A,1):".."===P?(k.splice(A,1),C++):C&&(k.splice(A,1),C--);if(!w&&!x)for(;C--;C)k.unshift("..");!w||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),E&&"/"!==k.join("/").substr(-1)&&k.push("");var M,T=""===k[0]||k[0]&&"/"===k[0].charAt(0);S&&(a.hostname=a.host=T?"":k.length?k.shift():"",(M=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=M.shift(),a.host=a.hostname=M.shift()));return(w=w||a.host&&k.length)&&!T&&k.unshift(""),k.length?a.pathname=k.join("/"):(a.pathname=null,a.path=null),n.isNull(a.pathname)&&n.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=e.auth||a.auth,a.slashes=a.slashes||e.slashes,a.href=a.format(),a},i.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,a){var r=a(7),n=a(4).document,i=r(n)&&r(n.createElement);e.exports=function(e){return i?n.createElement(e):{}}},function(e,t,a){var r=a(4),n=a(31),i=a(48),s=a(313),o=a(14).f;e.exports=function(e){var t=n.Symbol||(n.Symbol=i?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},function(e,t,a){var r=a(82)("keys"),n=a(54);e.exports=function(e){return r[e]||(r[e]=n(e))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,a){var r=a(4).document;e.exports=r&&r.documentElement},function(e,t,a){var r=a(7),n=a(3),i=function(e,t){if(n(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=a(32)(Function.call,a(26).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,a){return i(e,a),t?e.__proto__=a:r(e,a),e}}({},!1):void 0),check:i}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,a){var r=a(7),n=a(141).set;e.exports=function(e,t,a){var i,s=t.constructor;return s!==a&&"function"==typeof s&&(i=s.prototype)!==a.prototype&&r(i)&&n&&n(e,i),e}},function(e,t,a){"use strict";var r=a(34),n=a(37);e.exports=function(e){var t=String(n(this)),a="",i=r(e);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(a+=t);return a}},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t){var a=Math.expm1;e.exports=!a||a(10)>22025.465794806718||a(10)<22025.465794806718||-2e-17!=a(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:a},function(e,t,a){"use strict";var r=a(48),n=a(0),i=a(22),s=a(21),o=a(72),c=a(148),l=a(69),u=a(27),d=a(10)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,a,f,m,g,b){c(a,t,f);var y,v,_,w=function(e){if(!p&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new a(this,e)}}return function(){return new a(this,e)}},x=t+" Iterator",k="values"==m,S=!1,P=e.prototype,E=P[d]||P["@@iterator"]||m&&P[m],C=E||w(m),A=m?k?w("entries"):C:void 0,M="Array"==t&&P.entries||E;if(M&&(_=u(M.call(new e)))!==Object.prototype&&_.next&&(l(_,x,!0),r||"function"==typeof _[d]||s(_,d,h)),k&&E&&"values"!==E.name&&(S=!0,C=function(){return E.call(this)}),r&&!b||!p&&!S&&P[d]||s(P,d,C),o[t]=C,o[x]=h,m)if(y={values:k?C:w("values"),keys:g?C:w("keys"),entries:A},b)for(v in y)v in P||i(P,v,y[v]);else n(n.P+n.F*(p||S),t,y);return y}},function(e,t,a){"use strict";var r=a(57),n=a(53),i=a(69),s={};a(21)(s,a(10)("iterator"),(function(){return this})),e.exports=function(e,t,a){e.prototype=r(s,{next:n(1,a)}),i(e,t+" Iterator")}},function(e,t,a){var r=a(105),n=a(37);e.exports=function(e,t,a){if(r(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(n(e))}},function(e,t,a){var r=a(10)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,a){var r=a(72),n=a(10)("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[n]===e)}},function(e,t,a){"use strict";var r=a(14),n=a(53);e.exports=function(e,t,a){t in e?r.f(e,t,n(0,a)):e[t]=a}},function(e,t,a){var r=a(70),n=a(10)("iterator"),i=a(72);e.exports=a(31).getIteratorMethod=function(e){if(null!=e)return e[n]||e["@@iterator"]||i[r(e)]}},function(e,t,a){var r=a(769);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,a){"use strict";var r=a(16),n=a(56),i=a(11);e.exports=function(e){for(var t=r(this),a=i(t.length),s=arguments.length,o=n(s>1?arguments[1]:void 0,a),c=s>2?arguments[2]:void 0,l=void 0===c?a:n(c,a);l>o;)t[o++]=e;return t}},function(e,t,a){"use strict";var r=a(50),n=a(330),i=a(72),s=a(25);e.exports=a(147)(Array,"Array",(function(e,t){this._t=s(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,a=this._i++;return!e||a>=e.length?(this._t=void 0,n(1)):n(0,"keys"==t?a:"values"==t?e[a]:[a,e[a]])}),"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(e,t,a){"use strict";var r,n,i=a(85),s=RegExp.prototype.exec,o=String.prototype.replace,c=s,l=(r=/a/,n=/b*/g,s.call(r,"a"),s.call(n,"a"),0!==r.lastIndex||0!==n.lastIndex),u=void 0!==/()??/.exec("")[1];(l||u)&&(c=function(e){var t,a,r,n,c=this;return u&&(a=new RegExp("^"+c.source+"$(?!\\s)",i.call(c))),l&&(t=c.lastIndex),r=s.call(c,e),l&&r&&(c.lastIndex=c.global?r.index+r[0].length:t),u&&r&&r.length>1&&o.call(r[0],a,(function(){for(n=1;n<arguments.length-2;n++)void 0===arguments[n]&&(r[n]=void 0)})),r}),e.exports=c},function(e,t,a){"use strict";var r=a(104)(!0);e.exports=function(e,t,a){return t+(a?r(e,t).length:1)}},function(e,t,a){var r,n,i,s=a(32),o=a(320),c=a(140),l=a(136),u=a(4),d=u.process,p=u.setImmediate,h=u.clearImmediate,f=u.MessageChannel,m=u.Dispatch,g=0,b={},y=function(){var e=+this;if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},v=function(e){y.call(e.data)};p&&h||(p=function(e){for(var t=[],a=1;arguments.length>a;)t.push(arguments[a++]);return b[++g]=function(){o("function"==typeof e?e:Function(e),t)},r(g),g},h=function(e){delete b[e]},"process"==a(33)(d)?r=function(e){d.nextTick(s(y,e,1))}:m&&m.now?r=function(e){m.now(s(y,e,1))}:f?(i=(n=new f).port2,n.port1.onmessage=v,r=s(i.postMessage,i,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(r=function(e){u.postMessage(e+"","*")},u.addEventListener("message",v,!1)):r="onreadystatechange"in l("script")?function(e){c.appendChild(l("script")).onreadystatechange=function(){c.removeChild(this),y.call(e)}}:function(e){setTimeout(s(y,e,1),0)}),e.exports={set:p,clear:h}},function(e,t,a){var r=a(4),n=a(159).set,i=r.MutationObserver||r.WebKitMutationObserver,s=r.process,o=r.Promise,c="process"==a(33)(s);e.exports=function(){var e,t,a,l=function(){var r,n;for(c&&(r=s.domain)&&r.exit();e;){n=e.fn,e=e.next;try{n()}catch(r){throw e?a():t=void 0,r}}t=void 0,r&&r.enter()};if(c)a=function(){s.nextTick(l)};else if(!i||r.navigator&&r.navigator.standalone)if(o&&o.resolve){var u=o.resolve(void 0);a=function(){u.then(l)}}else a=function(){n.call(r,l)};else{var d=!0,p=document.createTextNode("");new i(l).observe(p,{characterData:!0}),a=function(){p.data=d=!d}}return function(r){var n={fn:r,next:void 0};t&&(t.next=n),e||(e=n,a()),t=n}}},function(e,t,a){"use strict";var r=a(18);function n(e){var t,a;this.promise=new e((function(e,r){if(void 0!==t||void 0!==a)throw TypeError("Bad Promise constructor");t=e,a=r})),this.resolve=r(t),this.reject=r(a)}e.exports.f=function(e){return new n(e)}},function(e,t,a){"use strict";var r=a(4),n=a(13),i=a(48),s=a(111),o=a(21),c=a(62),l=a(6),u=a(60),d=a(34),p=a(11),h=a(340),f=a(58).f,m=a(14).f,g=a(155),b=a(69),y=r.ArrayBuffer,v=r.DataView,_=r.Math,w=r.RangeError,x=r.Infinity,k=y,S=_.abs,P=_.pow,E=_.floor,C=_.log,A=_.LN2,M=n?"_b":"buffer",T=n?"_l":"byteLength",j=n?"_o":"byteOffset";function O(e,t,a){var r,n,i,s=new Array(a),o=8*a-t-1,c=(1<<o)-1,l=c>>1,u=23===t?P(2,-24)-P(2,-77):0,d=0,p=e<0||0===e&&1/e<0?1:0;for((e=S(e))!=e||e===x?(n=e!=e?1:0,r=c):(r=E(C(e)/A),e*(i=P(2,-r))<1&&(r--,i*=2),(e+=r+l>=1?u/i:u*P(2,1-l))*i>=2&&(r++,i/=2),r+l>=c?(n=0,r=c):r+l>=1?(n=(e*i-1)*P(2,t),r+=l):(n=e*P(2,l-1)*P(2,t),r=0));t>=8;s[d++]=255&n,n/=256,t-=8);for(r=r<<t|n,o+=t;o>0;s[d++]=255&r,r/=256,o-=8);return s[--d]|=128*p,s}function D(e,t,a){var r,n=8*a-t-1,i=(1<<n)-1,s=i>>1,o=n-7,c=a-1,l=e[c--],u=127&l;for(l>>=7;o>0;u=256*u+e[c],c--,o-=8);for(r=u&(1<<-o)-1,u>>=-o,o+=t;o>0;r=256*r+e[c],c--,o-=8);if(0===u)u=1-s;else{if(u===i)return r?NaN:l?-x:x;r+=P(2,t),u-=s}return(l?-1:1)*r*P(2,u-t)}function I(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function R(e){return[255&e]}function B(e){return[255&e,e>>8&255]}function q(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function L(e){return O(e,52,8)}function N(e){return O(e,23,4)}function F(e,t,a){m(e.prototype,t,{get:function(){return this[a]}})}function U(e,t,a,r){var n=h(+a);if(n+t>e[T])throw w("Wrong index!");var i=e[M]._b,s=n+e[j],o=i.slice(s,s+t);return r?o:o.reverse()}function $(e,t,a,r,n,i){var s=h(+a);if(s+t>e[T])throw w("Wrong index!");for(var o=e[M]._b,c=s+e[j],l=r(+n),u=0;u<t;u++)o[c+u]=l[i?u:t-u-1]}if(s.ABV){if(!l((function(){y(1)}))||!l((function(){new y(-1)}))||l((function(){return new y,new y(1.5),new y(NaN),"ArrayBuffer"!=y.name}))){for(var z,H=(y=function(e){return u(this,y),new k(h(e))}).prototype=k.prototype,G=f(k),K=0;G.length>K;)(z=G[K++])in y||o(y,z,k[z]);i||(H.constructor=y)}var W=new v(new y(2)),V=v.prototype.setInt8;W.setInt8(0,2147483648),W.setInt8(1,2147483649),!W.getInt8(0)&&W.getInt8(1)||c(v.prototype,{setInt8:function(e,t){V.call(this,e,t<<24>>24)},setUint8:function(e,t){V.call(this,e,t<<24>>24)}},!0)}else y=function(e){u(this,y,"ArrayBuffer");var t=h(e);this._b=g.call(new Array(t),0),this[T]=t},v=function(e,t,a){u(this,v,"DataView"),u(e,y,"DataView");var r=e[T],n=d(t);if(n<0||n>r)throw w("Wrong offset!");if(n+(a=void 0===a?r-n:p(a))>r)throw w("Wrong length!");this[M]=e,this[j]=n,this[T]=a},n&&(F(y,"byteLength","_l"),F(v,"buffer","_b"),F(v,"byteLength","_l"),F(v,"byteOffset","_o")),c(v.prototype,{getInt8:function(e){return U(this,1,e)[0]<<24>>24},getUint8:function(e){return U(this,1,e)[0]},getInt16:function(e){var t=U(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=U(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return I(U(this,4,e,arguments[1]))},getUint32:function(e){return I(U(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return D(U(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return D(U(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){$(this,1,e,R,t)},setUint8:function(e,t){$(this,1,e,R,t)},setInt16:function(e,t){$(this,2,e,B,t,arguments[2])},setUint16:function(e,t){$(this,2,e,B,t,arguments[2])},setInt32:function(e,t){$(this,4,e,q,t,arguments[2])},setUint32:function(e,t){$(this,4,e,q,t,arguments[2])},setFloat32:function(e,t){$(this,4,e,N,t,arguments[2])},setFloat64:function(e,t){$(this,8,e,L,t,arguments[2])}});b(y,"ArrayBuffer"),b(v,"DataView"),o(v.prototype,s.VIEW,!0),t.ArrayBuffer=y,t.DataView=v},function(e,t,a){"use strict";var r=a(1),n=a(348),i=a(2).Buffer,s=new Array(16);function o(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function c(e,t){return e<<t|e>>>32-t}function l(e,t,a,r,n,i,s){return c(e+(t&a|~t&r)+n+i|0,s)+t|0}function u(e,t,a,r,n,i,s){return c(e+(t&r|a&~r)+n+i|0,s)+t|0}function d(e,t,a,r,n,i,s){return c(e+(t^a^r)+n+i|0,s)+t|0}function p(e,t,a,r,n,i,s){return c(e+(a^(t|~r))+n+i|0,s)+t|0}r(o,n),o.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var a=this._a,r=this._b,n=this._c,i=this._d;a=l(a,r,n,i,e[0],3614090360,7),i=l(i,a,r,n,e[1],3905402710,12),n=l(n,i,a,r,e[2],606105819,17),r=l(r,n,i,a,e[3],3250441966,22),a=l(a,r,n,i,e[4],4118548399,7),i=l(i,a,r,n,e[5],1200080426,12),n=l(n,i,a,r,e[6],2821735955,17),r=l(r,n,i,a,e[7],4249261313,22),a=l(a,r,n,i,e[8],1770035416,7),i=l(i,a,r,n,e[9],2336552879,12),n=l(n,i,a,r,e[10],4294925233,17),r=l(r,n,i,a,e[11],2304563134,22),a=l(a,r,n,i,e[12],1804603682,7),i=l(i,a,r,n,e[13],4254626195,12),n=l(n,i,a,r,e[14],2792965006,17),a=u(a,r=l(r,n,i,a,e[15],1236535329,22),n,i,e[1],4129170786,5),i=u(i,a,r,n,e[6],3225465664,9),n=u(n,i,a,r,e[11],643717713,14),r=u(r,n,i,a,e[0],3921069994,20),a=u(a,r,n,i,e[5],3593408605,5),i=u(i,a,r,n,e[10],38016083,9),n=u(n,i,a,r,e[15],3634488961,14),r=u(r,n,i,a,e[4],3889429448,20),a=u(a,r,n,i,e[9],568446438,5),i=u(i,a,r,n,e[14],3275163606,9),n=u(n,i,a,r,e[3],4107603335,14),r=u(r,n,i,a,e[8],1163531501,20),a=u(a,r,n,i,e[13],2850285829,5),i=u(i,a,r,n,e[2],4243563512,9),n=u(n,i,a,r,e[7],1735328473,14),a=d(a,r=u(r,n,i,a,e[12],2368359562,20),n,i,e[5],4294588738,4),i=d(i,a,r,n,e[8],2272392833,11),n=d(n,i,a,r,e[11],1839030562,16),r=d(r,n,i,a,e[14],4259657740,23),a=d(a,r,n,i,e[1],2763975236,4),i=d(i,a,r,n,e[4],1272893353,11),n=d(n,i,a,r,e[7],4139469664,16),r=d(r,n,i,a,e[10],3200236656,23),a=d(a,r,n,i,e[13],681279174,4),i=d(i,a,r,n,e[0],3936430074,11),n=d(n,i,a,r,e[3],3572445317,16),r=d(r,n,i,a,e[6],76029189,23),a=d(a,r,n,i,e[9],3654602809,4),i=d(i,a,r,n,e[12],3873151461,11),n=d(n,i,a,r,e[15],530742520,16),a=p(a,r=d(r,n,i,a,e[2],3299628645,23),n,i,e[0],4096336452,6),i=p(i,a,r,n,e[7],1126891415,10),n=p(n,i,a,r,e[14],2878612391,15),r=p(r,n,i,a,e[5],4237533241,21),a=p(a,r,n,i,e[12],1700485571,6),i=p(i,a,r,n,e[3],2399980690,10),n=p(n,i,a,r,e[10],4293915773,15),r=p(r,n,i,a,e[1],2240044497,21),a=p(a,r,n,i,e[8],1873313359,6),i=p(i,a,r,n,e[15],4264355552,10),n=p(n,i,a,r,e[6],2734768916,15),r=p(r,n,i,a,e[13],1309151649,21),a=p(a,r,n,i,e[4],4149444226,6),i=p(i,a,r,n,e[11],3174756917,10),n=p(n,i,a,r,e[2],718787259,15),r=p(r,n,i,a,e[9],3951481745,21),this._a=this._a+a|0,this._b=this._b+r|0,this._c=this._c+n|0,this._d=this._d+i|0},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=i.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},e.exports=o},function(e,t,a){(t=e.exports=a(350)).Stream=t,t.Readable=t,t.Writable=a(165),t.Duplex=a(64),t.Transform=a(354),t.PassThrough=a(896)},function(e,t,a){"use strict";(function(t,r,n){var i=a(116);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,a){var r=e.entry;e.entry=null;for(;r;){var n=r.callback;t.pendingcb--,n(a),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var o,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:i.nextTick;y.WritableState=b;var l=a(87);l.inherits=a(1);var u={deprecate:a(353)},d=a(351),p=a(2).Buffer,h=n.Uint8Array||function(){};var f,m=a(352);function g(){}function b(e,t){o=o||a(64),e=e||{};var r=t instanceof o;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,l=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(l||0===l)?l:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var a=e._writableState,r=a.sync,n=a.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(a),t)!function(e,t,a,r,n){--t.pendingcb,a?(i.nextTick(n,r),i.nextTick(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(n(r),e._writableState.errorEmitted=!0,e.emit("error",r),S(e,t))}(e,a,r,t,n);else{var s=x(a);s||a.corked||a.bufferProcessing||!a.bufferedRequest||w(e,a),r?c(_,e,a,s,n):_(e,a,s,n)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function y(e){if(o=o||a(64),!(f.call(y,this)||this instanceof o))return new y(e);this._writableState=new b(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function v(e,t,a,r,n,i,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,a?e._writev(n,t.onwrite):e._write(n,i,t.onwrite),t.sync=!1}function _(e,t,a,r){a||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),S(e,t)}function w(e,t){t.bufferProcessing=!0;var a=t.bufferedRequest;if(e._writev&&a&&a.next){var r=t.bufferedRequestCount,n=new Array(r),i=t.corkedRequestsFree;i.entry=a;for(var o=0,c=!0;a;)n[o]=a,a.isBuf||(c=!1),a=a.next,o+=1;n.allBuffers=c,v(e,t,!0,t.length,n,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;a;){var l=a.chunk,u=a.encoding,d=a.callback;if(v(e,t,!1,t.objectMode?1:l.length,l,u,d),a=a.next,t.bufferedRequestCount--,t.writing)break}null===a&&(t.lastBufferedRequest=null)}t.bufferedRequest=a,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final((function(a){t.pendingcb--,a&&e.emit("error",a),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var a=x(t);return a&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,i.nextTick(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),a}l.inherits(y,d),b.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(b.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(f=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!f.call(this,e)||this===y&&(e&&e._writableState instanceof b)}})):f=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,a){var r,n=this._writableState,s=!1,o=!n.objectMode&&(r=e,p.isBuffer(r)||r instanceof h);return o&&!p.isBuffer(e)&&(e=function(e){return p.from(e)}(e)),"function"==typeof t&&(a=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof a&&(a=g),n.ended?function(e,t){var a=new Error("write after end");e.emit("error",a),i.nextTick(t,a)}(this,a):(o||function(e,t,a,r){var n=!0,s=!1;return null===a?s=new TypeError("May not write null values to stream"):"string"==typeof a||void 0===a||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),i.nextTick(r,s),n=!1),n}(this,n,e,a))&&(n.pendingcb++,s=function(e,t,a,r,n,i){if(!a){var s=function(e,t,a){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=p.from(t,a));return t}(t,r,n);r!==s&&(a=!0,n="buffer",r=s)}var o=t.objectMode?1:r.length;t.length+=o;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:n,isBuf:a,callback:i,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,o,r,n,i);return c}(this,n,o,e,t,a)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||w(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,a){a(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,a){var r=this._writableState;"function"==typeof e?(a=e,e=null,t=null):"function"==typeof t&&(a=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,a){t.ending=!0,S(e,t),a&&(t.finished?i.nextTick(a):e.once("finish",a));t.ended=!0,e.writable=!1}(this,r,a)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,a(12),a(894).setImmediate,a(17))},function(e,t,a){"use strict";var r=a(9).Buffer,n=a(1),i=a(348),s=new Array(16),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],c=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0];function h(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function f(e,t){return e<<t|e>>>32-t}function m(e,t,a,r,n,i,s,o){return f(e+(t^a^r)+i+s|0,o)+n|0}function g(e,t,a,r,n,i,s,o){return f(e+(t&a|~t&r)+i+s|0,o)+n|0}function b(e,t,a,r,n,i,s,o){return f(e+((t|~a)^r)+i+s|0,o)+n|0}function y(e,t,a,r,n,i,s,o){return f(e+(t&r|a&~r)+i+s|0,o)+n|0}function v(e,t,a,r,n,i,s,o){return f(e+(t^(a|~r))+i+s|0,o)+n|0}n(h,i),h.prototype._update=function(){for(var e=s,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var a=0|this._a,r=0|this._b,n=0|this._c,i=0|this._d,h=0|this._e,_=0|this._a,w=0|this._b,x=0|this._c,k=0|this._d,S=0|this._e,P=0;P<80;P+=1){var E,C;P<16?(E=m(a,r,n,i,h,e[o[P]],d[0],l[P]),C=v(_,w,x,k,S,e[c[P]],p[0],u[P])):P<32?(E=g(a,r,n,i,h,e[o[P]],d[1],l[P]),C=y(_,w,x,k,S,e[c[P]],p[1],u[P])):P<48?(E=b(a,r,n,i,h,e[o[P]],d[2],l[P]),C=b(_,w,x,k,S,e[c[P]],p[2],u[P])):P<64?(E=y(a,r,n,i,h,e[o[P]],d[3],l[P]),C=g(_,w,x,k,S,e[c[P]],p[3],u[P])):(E=v(a,r,n,i,h,e[o[P]],d[4],l[P]),C=m(_,w,x,k,S,e[c[P]],p[4],u[P])),a=h,h=i,i=f(n,10),n=r,r=E,_=S,S=k,k=f(x,10),x=w,w=C}var A=this._b+n+k|0;this._b=this._c+i+S|0,this._c=this._d+h+_|0,this._d=this._e+a+w|0,this._e=this._a+r+x|0,this._a=A},h.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=r.alloc?r.alloc(20):new r(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},e.exports=h},function(e,t,a){(t=e.exports=function(e){e=e.toLowerCase();var a=t[e];if(!a)throw new Error(e+" is not supported (we accept pull requests)");return new a}).sha=a(901),t.sha1=a(902),t.sha224=a(903),t.sha256=a(355),t.sha384=a(904),t.sha512=a(356)},function(e,t,a){"use strict";var r=a(20);function n(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}e.exports=n,n.prototype._init=function(){},n.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},n.prototype._buffer=function(e,t){for(var a=Math.min(this.buffer.length-this.bufferOff,e.length-t),r=0;r<a;r++)this.buffer[this.bufferOff+r]=e[t+r];return this.bufferOff+=a,a},n.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},n.prototype._updateEncrypt=function(e){var t=0,a=0,r=(this.bufferOff+e.length)/this.blockSize|0,n=new Array(r*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(a+=this._flushBuffer(n,a)));for(var i=e.length-(e.length-t)%this.blockSize;t<i;t+=this.blockSize)this._update(e,t,n,a),a+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return n},n.prototype._updateDecrypt=function(e){for(var t=0,a=0,r=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,n=new Array(r*this.blockSize);r>0;r--)t+=this._buffer(e,t),a+=this._flushBuffer(n,a);return t+=this._buffer(e,t),n},n.prototype.final=function(e){var t,a;return e&&(t=this.update(e)),a="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(a):a},n.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},n.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},n.prototype._unpad=function(e){return e},n.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)}},function(e,t,a){var r=a(913),n=a(921),i=a(369);t.createCipher=t.Cipher=r.createCipher,t.createCipheriv=t.Cipheriv=r.createCipheriv,t.createDecipher=t.Decipher=n.createDecipher,t.createDecipheriv=t.Decipheriv=n.createDecipheriv,t.listCiphers=t.getCiphers=function(){return Object.keys(i)}},function(e,t,a){var r={ECB:a(914),CBC:a(915),CFB:a(916),CFB8:a(917),CFB1:a(918),OFB:a(919),CTR:a(367),GCM:a(367)},n=a(369);for(var i in n)n[i].module=r[n[i].mode];e.exports=n},function(e,t,a){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var r=a(9),n=r.Buffer;function i(e,t){for(var a in e)t[a]=e[a]}function s(e,t,a){return n(e,t,a)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,t),t.Buffer=s),s.prototype=Object.create(n.prototype),i(n,s),s.from=function(e,t,a){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,a)},s.alloc=function(e,t,a){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=n(e);return void 0!==t?"string"==typeof a?r.fill(t,a):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,a){"use strict";var r=a(77).codes.ERR_STREAM_PREMATURE_CLOSE;function n(){}e.exports=function e(t,a,i){if("function"==typeof a)return e(t,null,a);a||(a={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];e.apply(this,r)}}}(i||n);var s=a.readable||!1!==a.readable&&t.readable,o=a.writable||!1!==a.writable&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){o=!1,l=!0,s||i.call(t)},d=t._readableState&&t._readableState.endEmitted,p=function(){s=!1,d=!0,o||i.call(t)},h=function(e){i.call(t,e)},f=function(){var e;return s&&!d?(t._readableState&&t._readableState.ended||(e=new r),i.call(t,e)):o&&!l?(t._writableState&&t._writableState.ended||(e=new r),i.call(t,e)):void 0},m=function(){t.req.on("finish",u)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?o&&!t._writableState&&(t.on("end",c),t.on("close",c)):(t.on("complete",u),t.on("abort",f),t.req?m():t.on("request",m)),t.on("end",p),t.on("finish",u),!1!==a.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",m),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",f)}}},function(e,t,a){(function(t){var r=a(8),n=a(73);function i(e,a){var n=function(e){var t=s(e);return{blinder:t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed(),unblinder:t.invm(e.modulus)}}(a),i=a.modulus.byteLength(),o=(r.mont(a.modulus),new r(e).mul(n.blinder).umod(a.modulus)),c=o.toRed(r.mont(a.prime1)),l=o.toRed(r.mont(a.prime2)),u=a.coefficient,d=a.prime1,p=a.prime2,h=c.redPow(a.exponent1),f=l.redPow(a.exponent2);h=h.fromRed(),f=f.fromRed();var m=h.isub(f).imul(u).umod(d);return m.imul(p),f.iadd(m),new t(f.imul(n.unblinder).umod(a.modulus).toArray(!1,i))}function s(e){for(var t=e.modulus.byteLength(),a=new r(n(t));a.cmp(e.modulus)>=0||!a.umod(e.prime1)||!a.umod(e.prime2);)a=new r(n(t));return a}e.exports=i,i.getr=s}).call(this,a(9).Buffer)},function(e,t,a){"use strict";var r,n=t,i=a(66),s=a(381),o=a(28).assert;function c(e){"short"===e.type?this.curve=new s.short(e):"edwards"===e.type?this.curve=new s.edwards(e):this.curve=new s.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var a=new c(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:a}),a}})}n.PresetCurve=c,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:i.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:i.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:i.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:i.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:i.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=a(949)}catch(e){r=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:i.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},function(e,t,a){"use strict";var r=a(66),n=a(119),i=a(20);function s(e){if(!(this instanceof s))return new s(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=n.toArray(e.entropy,e.entropyEnc||"hex"),a=n.toArray(e.nonce,e.nonceEnc||"hex"),r=n.toArray(e.pers,e.persEnc||"hex");i(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,a,r)}e.exports=s,s.prototype._init=function(e,t,a){var r=e.concat(t).concat(a);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},s.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},s.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},s.prototype.reseed=function(e,t,a,r){"string"!=typeof t&&(r=a,a=t,t=null),e=n.toArray(e,t),a=n.toArray(a,r),i(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(a||[])),this._reseed=1},s.prototype.generate=function(e,t,a,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof t&&(r=a,a=t,t=null),a&&(a=n.toArray(a,r||"hex"),this._update(a));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,e);return this._update(a),this._reseed++,n.encode(s,t)}},function(e,t,a){"use strict";(function(t){var r,n=a(9),i=n.Buffer,s={};for(r in n)n.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(s[r]=n[r]);var o=s.Buffer={};for(r in i)i.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(o[r]=i[r]);if(s.Buffer.prototype=i.prototype,o.from&&o.from!==Uint8Array.from||(o.from=function(e,t,a){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return i(e,t,a)}),o.alloc||(o.alloc=function(e,t,a){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=i(e);return t&&0!==t.length?"string"==typeof a?r.fill(t,a):r.fill(t):r.fill(0),r}),!s.kStringMaxLength)try{s.kStringMaxLength=t.binding("buffer").kStringMaxLength}catch(e){}s.constants||(s.constants={MAX_LENGTH:s.kMaxLength},s.kStringMaxLength&&(s.constants.MAX_STRING_LENGTH=s.kStringMaxLength)),e.exports=s}).call(this,a(12))},function(e,t,a){"use strict";const r=a(178).Reporter,n=a(91).EncoderBuffer,i=a(91).DecoderBuffer,s=a(20),o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],c=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o);function l(e,t,a){const r={};this._baseState=r,r.name=a,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}e.exports=l;const u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){const e=this._baseState,t={};u.forEach((function(a){t[a]=e[a]}));const a=new this.constructor(t.parent);return a._baseState=t,a},l.prototype._wrap=function(){const e=this._baseState;c.forEach((function(t){this[t]=function(){const a=new this.constructor(this);return e.children.push(a),a[t].apply(a,arguments)}}),this)},l.prototype._init=function(e){const t=this._baseState;s(null===t.parent),e.call(this),t.children=t.children.filter((function(e){return e._baseState.parent===this}),this),s.equal(t.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(e){const t=this._baseState,a=e.filter((function(e){return e instanceof this.constructor}),this);e=e.filter((function(e){return!(e instanceof this.constructor)}),this),0!==a.length&&(s(null===t.children),t.children=a,a.forEach((function(e){e._baseState.parent=this}),this)),0!==e.length&&(s(null===t.args),t.args=e,t.reverseArgs=e.map((function(e){if("object"!=typeof e||e.constructor!==Object)return e;const t={};return Object.keys(e).forEach((function(a){a==(0|a)&&(a|=0);const r=e[a];t[r]=a})),t})))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach((function(e){l.prototype[e]=function(){const t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}})),o.forEach((function(e){l.prototype[e]=function(){const t=this._baseState,a=Array.prototype.slice.call(arguments);return s(null===t.tag),t.tag=e,this._useArgs(a),this}})),l.prototype.use=function(e){s(e);const t=this._baseState;return s(null===t.use),t.use=e,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(e){const t=this._baseState;return s(null===t.default),t.default=e,t.optional=!0,this},l.prototype.explicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.explicit=e,this},l.prototype.implicit=function(e){const t=this._baseState;return s(null===t.explicit&&null===t.implicit),t.implicit=e,this},l.prototype.obj=function(){const e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},l.prototype.key=function(e){const t=this._baseState;return s(null===t.key),t.key=e,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(e){const t=this._baseState;return s(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map((function(t){return e[t]}))),this},l.prototype.contains=function(e){const t=this._baseState;return s(null===t.use),t.contains=e,this},l.prototype._decode=function(e,t){const a=this._baseState;if(null===a.parent)return e.wrapResult(a.children[0]._decode(e,t));let r,n=a.default,s=!0,o=null;if(null!==a.key&&(o=e.enterKey(a.key)),a.optional){let r=null;if(null!==a.explicit?r=a.explicit:null!==a.implicit?r=a.implicit:null!==a.tag&&(r=a.tag),null!==r||a.any){if(s=this._peekTag(e,r,a.any),e.isError(s))return s}else{const r=e.save();try{null===a.choice?this._decodeGeneric(a.tag,e,t):this._decodeChoice(e,t),s=!0}catch(e){s=!1}e.restore(r)}}if(a.obj&&s&&(r=e.enterObject()),s){if(null!==a.explicit){const t=this._decodeTag(e,a.explicit);if(e.isError(t))return t;e=t}const r=e.offset;if(null===a.use&&null===a.choice){let t;a.any&&(t=e.save());const r=this._decodeTag(e,null!==a.implicit?a.implicit:a.tag,a.any);if(e.isError(r))return r;a.any?n=e.raw(t):e=r}if(t&&t.track&&null!==a.tag&&t.track(e.path(),r,e.length,"tagged"),t&&t.track&&null!==a.tag&&t.track(e.path(),e.offset,e.length,"content"),a.any||(n=null===a.choice?this._decodeGeneric(a.tag,e,t):this._decodeChoice(e,t)),e.isError(n))return n;if(a.any||null!==a.choice||null===a.children||a.children.forEach((function(a){a._decode(e,t)})),a.contains&&("octstr"===a.tag||"bitstr"===a.tag)){const r=new i(n);n=this._getUse(a.contains,e._reporterState.obj)._decode(r,t)}}return a.obj&&s&&(n=e.leaveObject(r)),null===a.key||null===n&&!0!==s?null!==o&&e.exitKey(o):e.leaveKey(o,a.key,n),n},l.prototype._decodeGeneric=function(e,t,a){const r=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,r.args[0],a):/str$/.test(e)?this._decodeStr(t,e,a):"objid"===e&&r.args?this._decodeObjid(t,r.args[0],r.args[1],a):"objid"===e?this._decodeObjid(t,null,null,a):"gentime"===e||"utctime"===e?this._decodeTime(t,e,a):"null_"===e?this._decodeNull(t,a):"bool"===e?this._decodeBool(t,a):"objDesc"===e?this._decodeStr(t,e,a):"int"===e||"enum"===e?this._decodeInt(t,r.args&&r.args[0],a):null!==r.use?this._getUse(r.use,t._reporterState.obj)._decode(t,a):t.error("unknown tag: "+e)},l.prototype._getUse=function(e,t){const a=this._baseState;return a.useDecoder=this._use(e,t),s(null===a.useDecoder._baseState.parent),a.useDecoder=a.useDecoder._baseState.children[0],a.implicit!==a.useDecoder._baseState.implicit&&(a.useDecoder=a.useDecoder.clone(),a.useDecoder._baseState.implicit=a.implicit),a.useDecoder},l.prototype._decodeChoice=function(e,t){const a=this._baseState;let r=null,n=!1;return Object.keys(a.choice).some((function(i){const s=e.save(),o=a.choice[i];try{const a=o._decode(e,t);if(e.isError(a))return!1;r={type:i,value:a},n=!0}catch(t){return e.restore(s),!1}return!0}),this),n?r:e.error("Choice not matched")},l.prototype._createEncoderBuffer=function(e){return new n(e,this.reporter)},l.prototype._encode=function(e,t,a){const r=this._baseState;if(null!==r.default&&r.default===e)return;const n=this._encodeValue(e,t,a);return void 0===n||this._skipDefault(n,t,a)?void 0:n},l.prototype._encodeValue=function(e,t,a){const n=this._baseState;if(null===n.parent)return n.children[0]._encode(e,t||new r);let i=null;if(this.reporter=t,n.optional&&void 0===e){if(null===n.default)return;e=n.default}let s=null,o=!1;if(n.any)i=this._createEncoderBuffer(e);else if(n.choice)i=this._encodeChoice(e,t);else if(n.contains)s=this._getUse(n.contains,a)._encode(e,t),o=!0;else if(n.children)s=n.children.map((function(a){if("null_"===a._baseState.tag)return a._encode(null,t,e);if(null===a._baseState.key)return t.error("Child should have a key");const r=t.enterKey(a._baseState.key);if("object"!=typeof e)return t.error("Child expected, but input is not object");const n=a._encode(e[a._baseState.key],t,e);return t.leaveKey(r),n}),this).filter((function(e){return e})),s=this._createEncoderBuffer(s);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return t.error("Too many args for : "+n.tag);if(!Array.isArray(e))return t.error("seqof/setof, but data is not Array");const a=this.clone();a._baseState.implicit=null,s=this._createEncoderBuffer(e.map((function(a){const r=this._baseState;return this._getUse(r.args[0],e)._encode(a,t)}),a))}else null!==n.use?i=this._getUse(n.use,a)._encode(e,t):(s=this._encodePrimitive(n.tag,e),o=!0);if(!n.any&&null===n.choice){const e=null!==n.implicit?n.implicit:n.tag,a=null===n.implicit?"universal":"context";null===e?null===n.use&&t.error("Tag could be omitted only for .use()"):null===n.use&&(i=this._encodeComposite(e,o,a,s))}return null!==n.explicit&&(i=this._encodeComposite(n.explicit,!1,"context",i)),i},l.prototype._encodeChoice=function(e,t){const a=this._baseState,r=a.choice[e.type];return r||s(!1,e.type+" not found in "+JSON.stringify(Object.keys(a.choice))),r._encode(e.value,t)},l.prototype._encodePrimitive=function(e,t){const a=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&a.args)return this._encodeObjid(t,a.reverseArgs[0],a.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,a.args&&a.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},l.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},l.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)}},function(e,t,a){"use strict";const r=a(1);function n(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function i(e,t){this.path=e,this.rethrow(t)}t.Reporter=n,n.prototype.isError=function(e){return e instanceof i},n.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},n.prototype.restore=function(e){const t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},n.prototype.enterKey=function(e){return this._reporterState.path.push(e)},n.prototype.exitKey=function(e){const t=this._reporterState;t.path=t.path.slice(0,e-1)},n.prototype.leaveKey=function(e,t,a){const r=this._reporterState;this.exitKey(e),null!==r.obj&&(r.obj[t]=a)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){const e=this._reporterState,t=e.obj;return e.obj={},t},n.prototype.leaveObject=function(e){const t=this._reporterState,a=t.obj;return t.obj=e,a},n.prototype.error=function(e){let t;const a=this._reporterState,r=e instanceof i;if(t=r?e:new i(a.path.map((function(e){return"["+JSON.stringify(e)+"]"})).join(""),e.message||e,e.stack),!a.options.partial)throw t;return r||a.errors.push(t),t},n.prototype.wrapResult=function(e){const t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},r(i,Error),i.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,i),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(e,t,a){"use strict";function r(e){const t={};return Object.keys(e).forEach((function(a){(0|a)==a&&(a|=0);const r=e[a];t[r]=a})),t}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=r(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=r(t.tag)},function(e,t,a){"use strict";var r,n=t,i=a(66),s=a(392),o=a(29).assert;function c(e){"short"===e.type?this.curve=new s.short(e):"edwards"===e.type?this.curve=new s.edwards(e):this.curve=new s.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var a=new c(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:a}),a}})}n.PresetCurve=c,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:i.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:i.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:i.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:i.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:i.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=a(973)}catch(e){r=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:i.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},function(e,t,a){"use strict";var r,n=t,i=a(66),s=a(397),o=a(30).assert;function c(e){"short"===e.type?this.curve=new s.short(e):"edwards"===e.type?this.curve=new s.edwards(e):this.curve=new s.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var a=new c(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:a}),a}})}n.PresetCurve=c,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:i.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:i.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:i.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:i.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:i.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=a(1005)}catch(e){r=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:i.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},function(e,t,a){"use strict";var r=a(1035),n=a(183),i=a(79),s=a(401),o=a(1037);function c(e,t,a){var r=this._refs[a];if("string"==typeof r){if(!this._refs[r])return c.call(this,e,t,r);r=this._refs[r]}if((r=r||this._schemas[a])instanceof s)return f(r.schema,this._opts.inlineRefs)?r.schema:r.validate||this._compile(r);var n,i,o,u=l.call(this,t,a);return u&&(n=u.schema,t=u.root,o=u.baseId),n instanceof s?i=n.validate||e.call(this,n.schema,t,void 0,o):void 0!==n&&(i=f(n,this._opts.inlineRefs)?n:e.call(this,n,t,void 0,o)),i}function l(e,t){var a=r.parse(t),n=g(a),i=m(this._getId(e.schema));if(0===Object.keys(e.schema).length||n!==i){var o=y(n),c=this._refs[o];if("string"==typeof c)return u.call(this,e,c,a);if(c instanceof s)c.validate||this._compile(c),e=c;else{if(!((c=this._schemas[o])instanceof s))return;if(c.validate||this._compile(c),o==y(t))return{schema:c,root:e,baseId:i};e=c}if(!e.schema)return;i=m(this._getId(e.schema))}return p.call(this,a,i,e.schema,e)}function u(e,t,a){var r=l.call(this,e,t);if(r){var n=r.schema,i=r.baseId;e=r.root;var s=this._getId(n);return s&&(i=v(i,s)),p.call(this,a,i,n,e)}}e.exports=c,c.normalizeId=y,c.fullPath=m,c.url=v,c.ids=function(e){var t=y(this._getId(e)),a={"":t},s={"":m(t,!1)},c={},l=this;return o(e,{allKeys:!0},(function(e,t,o,u,d,p,h){if(""!==t){var f=l._getId(e),m=a[u],g=s[u]+"/"+d;if(void 0!==h&&(g+="/"+("number"==typeof h?h:i.escapeFragment(h))),"string"==typeof f){f=m=y(m?r.resolve(m,f):f);var b=l._refs[f];if("string"==typeof b&&(b=l._refs[b]),b&&b.schema){if(!n(e,b.schema))throw new Error('id "'+f+'" resolves to more than one schema')}else if(f!=y(g))if("#"==f[0]){if(c[f]&&!n(e,c[f]))throw new Error('id "'+f+'" resolves to more than one schema');c[f]=e}else l._refs[f]=g}a[t]=m,s[t]=g}})),c},c.inlineRef=f,c.schema=l;var d=i.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function p(e,t,a,r){if(e.fragment=e.fragment||"","/"==e.fragment.slice(0,1)){for(var n=e.fragment.split("/"),s=1;s<n.length;s++){var o=n[s];if(o){if(void 0===(a=a[o=i.unescapeFragment(o)]))break;var c;if(!d[o]&&((c=this._getId(a))&&(t=v(t,c)),a.$ref)){var u=v(t,a.$ref),p=l.call(this,r,u);p&&(a=p.schema,r=p.root,t=p.baseId)}}}return void 0!==a&&a!==r.schema?{schema:a,root:r,baseId:t}:void 0}}var h=i.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function f(e,t){return!1!==t&&(void 0===t||!0===t?function e(t){var a;if(Array.isArray(t)){for(var r=0;r<t.length;r++)if("object"==typeof(a=t[r])&&!e(a))return!1}else for(var n in t){if("$ref"==n)return!1;if("object"==typeof(a=t[n])&&!e(a))return!1}return!0}(e):t?function e(t){var a,r=0;if(Array.isArray(t)){for(var n=0;n<t.length;n++)if("object"==typeof(a=t[n])&&(r+=e(a)),r==1/0)return 1/0}else for(var i in t){if("$ref"==i)return 1/0;if(h[i])r++;else if("object"==typeof(a=t[i])&&(r+=e(a)+1),r==1/0)return 1/0}return r}(e)<=t:void 0)}function m(e,t){return!1!==t&&(e=y(e)),g(r.parse(e))}function g(e){return r.serialize(e).split("#")[0]+"#"}var b=/#\/?$/;function y(e){return e?e.replace(b,""):""}function v(e,t){return t=y(t),r.resolve(e,t)}},function(e,t,a){"use strict";var r=Array.isArray,n=Object.keys,i=Object.prototype.hasOwnProperty;e.exports=function e(t,a){if(t===a)return!0;if(t&&a&&"object"==typeof t&&"object"==typeof a){var s,o,c,l=r(t),u=r(a);if(l&&u){if((o=t.length)!=a.length)return!1;for(s=o;0!=s--;)if(!e(t[s],a[s]))return!1;return!0}if(l!=u)return!1;var d=t instanceof Date,p=a instanceof Date;if(d!=p)return!1;if(d&&p)return t.getTime()==a.getTime();var h=t instanceof RegExp,f=a instanceof RegExp;if(h!=f)return!1;if(h&&f)return t.toString()==a.toString();var m=n(t);if((o=m.length)!==n(a).length)return!1;for(s=o;0!=s--;)if(!i.call(a,m[s]))return!1;for(s=o;0!=s--;)if(!e(t[c=m[s]],a[c]))return!1;return!0}return t!=t&&a!=a}},function(e,t,a){"use strict";var r=a(182);function n(e,t,a){this.message=a||n.message(e,t),this.missingRef=r.url(e,t),this.missingSchema=r.normalizeId(r.fullPath(this.missingRef))}function i(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}e.exports={Validation:i((function(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0})),MissingRef:i(n)},n.message=function(e,t){return"can't resolve reference "+t+" from id "+e}},function(e,t,a){"use strict";e.exports={metaSchemaRef:function(e){var t=e._opts.defaultMeta;return"string"==typeof t?{$ref:t}:e.getSchema("http://json-schema.org/draft-07/schema")?{$ref:"http://json-schema.org/draft-07/schema"}:(console.warn("meta schema not defined"),{})}}},function(e,t,a){"use strict";var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r)return r;throw new Error("unable to locate global object")}();e.exports=t=r.fetch,t.default=r.fetch.bind(r),t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response},function(e,t,a){var r=a(92)("socket.io-parser"),n=a(188),i=a(1105),s=a(189),o=a(413);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=d;var l=t.ERROR+'"encode error"';function u(e){var a=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(a+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(a+=e.nsp+","),null!=e.id&&(a+=e.id),null!=e.data){var n=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===n)return l;a+=n}return r("encoded %j as %s",e,a),a}function d(){this.reconstructor=null}function p(e){this.reconPack=e,this.buffers=[]}function h(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,a){(r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){i.removeBlobs(e,(function(e){var a=i.deconstructPacket(e),r=u(a.packet),n=a.buffers;n.unshift(r),t(n)}))}(e,a):a([u(e)])},n(d.prototype),d.prototype.add=function(e){var a;if("string"==typeof e)a=function(e){var a=0,n={type:Number(e.charAt(0))};if(null==t.types[n.type])return h("unknown packet type "+n.type);if(t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type){for(var i=a+1;"-"!==e.charAt(++a)&&a!=e.length;);var o=e.substring(i,a);if(o!=Number(o)||"-"!==e.charAt(a))throw new Error("Illegal attachments");n.attachments=Number(o)}if("/"===e.charAt(a+1)){for(i=a+1;++a;){if(","===(l=e.charAt(a)))break;if(a===e.length)break}n.nsp=e.substring(i,a)}else n.nsp="/";var c=e.charAt(a+1);if(""!==c&&Number(c)==c){for(i=a+1;++a;){var l;if(null==(l=e.charAt(a))||Number(l)!=l){--a;break}if(a===e.length)break}n.id=Number(e.substring(i,a+1))}if(e.charAt(++a)){var u=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(a));if(!(!1!==u&&(n.type===t.ERROR||s(u))))return h("invalid payload");n.data=u}return r("decoded %s as %j",e,n),n}(e),t.BINARY_EVENT===a.type||t.BINARY_ACK===a.type?(this.reconstructor=new p(a),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",a)):this.emit("decoded",a);else{if(!o(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(a=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",a))}},d.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=i.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,a){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function a(){this.off(e,a),t.apply(this,arguments)}return a.fn=t,this.on(e,a),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var a,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<r.length;n++)if((a=r[n])===t||a.fn===t){r.splice(n,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),a=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(a){r=0;for(var n=(a=a.slice(0)).length;r<n;++r)a[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){var a={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==a.call(e)}},function(e,t,a){var r=a(1108),n=a(191);e.exports=function(e){var t=e.xdomain,a=e.xscheme,i=e.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!=typeof XDomainRequest&&!a&&i)return new XDomainRequest}catch(e){}if(!t)try{return new(n[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},function(e,t,a){var r=a(80),n=a(193);function i(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=i,n(i.prototype),i.prototype.onError=function(e,t){var a=new Error(e);return a.type="TransportError",a.description=t,this.emit("error",a),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},i.prototype.onPacket=function(e){this.emit("packet",e)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t,a){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function a(){this.off(e,a),t.apply(this,arguments)}return a.fn=t,this.on(e,a),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var a,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<r.length;n++)if((a=r[n])===t||a.fn===t){r.splice(n,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),a=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(a){r=0;for(var n=(a=a.slice(0)).length;r<n;++r)a[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t){e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var a=function(e){return(e=e||window.event).preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,o=e.clientX,c=e.clientY,document.onmouseup=n,document.onmousemove=r,!1},r=function(t){(t=t||window.event).preventDefault(),i=o-t.clientX,s=c-t.clientY,o=t.clientX,c=t.clientY,e.style.top=e.offsetTop-s+"px",e.style.left=e.offsetLeft-i+"px"},n=function(){document.onmouseup=null,document.onmousemove=null,null!=t&&t()},i=0,s=0,o=0,c=0;document.getElementById(e.id+"-header")?document.getElementById(e.id+"-header").onmousedown=a:e.onmousedown=a}catch(e){}}},function(e,t,a){var r=a(196),n=a(205);e.exports=AppStoreAppspace={render:function(e,t){document.querySelector(".email-appspace").innerHTML=n()},attachEvents:function(e,t){document.getElementById("appstore-publish-button").onclick=function(){r.render(e,t),r.attachEvents(e,t)},document.getElementById("appstore-publish-button").click()}}},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}var n=a(197),i=a(198),s=a(95);e.exports=AppStorePublish={render:function(e,t){document.querySelector(".email-appspace").innerHTML=n()},attachEvents:function(e,t){var a=this;t.data={},t.data.publish={};e.browser.addDragAndDropFileUploadToElement("appstore-publish-moddrop-inside",(function(e){this.files=[],this.files.push(e),t.data.publish.zip=e,t.data.publish.zip=t.data.publish.zip.substring(28),document.querySelector(".submit-file-btn-box").style.display="block"}),!0),document.querySelector(".appstore-browse-btn").onclick=function(a){var r={featured:1};s.render(e,t,r),s.attachEvents(e,t);try{document.querySelector(".appstore-header-featured").style.display="block"}catch(e){}},document.getElementById("appstore-publish-module").onchange=function(){var e,a=(e=regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("application/zip"===(r=this.files[0]).type){e.next=6;break}return salert("Incorrect File Type, please submit a zip file"),e.abrupt("return");case 6:(n=new FileReader).readAsDataURL(r);case 8:n.onload=function(){t.data.publish.zip=n.result,t.data.publish.zip=data.publish.zip.substring(28);try{document.querySelector(".submit-file-btn-box").style.display="block"}catch(e){alert("Error making submit button visible!")}};case 9:case"end":return e.stop()}}),e,this)})),function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))});return function(e){return a.apply(this,arguments)}}(),document.getElementById("appstore-publish-form").onsubmit=function(r){if(r.preventDefault(),t.data.publish.zip){var n=a.createPublishTX(e,t.data);e.network.propagateTransaction(n),t.uploading_application_id=e.crypto.hash(n.transaction.ts+"-"+n.transaction.sig),i.render(e,t),i.attachEvents(e,t)}else salert("Please attach a zip file of your module")}},createPublishTX:function(e,t){var a=t.publish,r=e.wallet.createUnsignedTransactionWithDefaultFee(),n=(a.name,a.description,a.zip);return r.msg={module:"AppStore",request:"submit module",module_zip:n},r=e.wallet.signTransaction(r)}}},function(e,t){e.exports=AppStorePublishTemplate=function(){return'\n    <link rel="stylesheet" href="/appstore/css/email-appspace.css" />\n\n    <div style="font-size:1.2em;margin-top:20px;">\n\n    Launch the <span style="color: var(--saito-red); cursor:pointer;" class="appstore-browse-btn">Saito Appstore</span> to install new applications. Visit our <a style="text-decoration:none" href="https://org.saito.tech/developers">developer center</a> for information on how to build applications, or use the file-uploader below to deploy them to the network:\n\n    </div>\n\n    <p></p>\n\n    <div class="appstore-publish-moddrop" id="appstore-publish-moddrop" style="display:block">\n      <div id="appstore-publish-moddrop-inside">\n       Drag-and-Drop Application ZIP\n      </div>\n    </div>\n    <form id="appstore-publish-form">\n      <label>or select zip-file from disk: <input id="appstore-publish-module" type="file" /></label>\n      <div class="submit-file-btn-box" style="display:none">\n        <button type="submit" id="submit-file-btn">SUBMIT</button>\n      </div>\n    </form>\n  '}},function(e,t,a){a(199);var r=a(200);a(42);e.exports=AppStorePublishSuccess={render:function(e,t){document.getElementById("appstore-app-install-overlay")||e.browser.addElementToDom('<div id="appstore-app-install-overlay" class="appstore-app-install-overlay"></div>'),document.querySelector(".appstore-app-install-overlay").innerHTML=r(e,data),document.querySelector(".appstore-app-install-overlay").style.display="block"},attachEvents:function(e,t){}}},function(e,t){e.exports=AppStorePublishSuccessTemplate=function(){return'\n    <div style="margin-top:10px;">\n\n    <h2>Module Submitted</h2>\n\n    <p>\n    You have uploaded your application to the Saito Network. It will take a few minutes for it to be indexed by the network and made available for you and others to install. You will receive an email once your application is indexed and ready to release.\n    </p>\n\n    <p>\n      <br/>\n    </p>\n\n    <p>\n    In the event you do not receive this email, it indicates that your application does not compile properly and there was an error indexing it. If that happens, please visit our <a href="https://org.saito.tech/developer">Saito developer center</a> for assistance. Most problems can be easily found and debugged by compiling manually on a local install. You are also always welcome to reach out to us for assistance. To return to your inbox and check to see if your application is available yet, please click the button below.\n    </p>\n\n    <p>\n      <br/>\n    </p>\n\n    <div style="text-align:center;width:100px;" class="button return-to-inbox">return to inbox</div>\n\n    </div>\n  '}},function(e,t){e.exports=AppStorePublishWaiting=function(e){return'\n\n    <div class="appstore-app-install-overlay">\n      <div class="appstore-bundler-install-notice">\n        <center class="appstore-loading-text" style="margin-bottom:20px">\n\t  Waiting for your AppStore to index your applications</Your custom Saito bundle is being compiled. Please do not leave this page.\n        </center>\n        <center><div class="loader" id="game_spinner">\n      </div>\n    </div>\n\n    <style type="text/css">\n\n    </style>\n\n  '}},function(e,t){e.exports=AppStoreAppspaceTemplate=function(e,t){return'\n  \n<div class="appstore-overlay-container">\n\n  <div class="appstore-header-featured" style="">\n    <div class="searchbox appstore-overlay-searchbox">\n        <input type="text" class="appstore-search-box" placeholder="search for apps..." id="appstore-search-box">\n    </div>\n    <div class="appstore-header-title">Install Applications:</div>\n  </div>\n\n  <div class="appstore-overlay-grid" id="appstore-overlay-grid">\n    <div class="game-loader-spinner loader" id="game-loader-spinner"></div>\n  </div>\n\n</div>\n\n  '}},function(e,t){e.exports=AppStoreOverlayAppTemplate=function(e,t){var a=e.crypto.stringToBase64(JSON.stringify({name:t.name,description:t.description,unixtime:t.unixtime,publickey:t.publickey,version:t.version,bsh:t.bsh,bid:t.bid})),r="/saito/img/dreamscape.png";""!=t.image&&(r=t.image);var n='\n\n    <div class="appstore-overlay-app" id="'.concat(a,'">\n   ');return""!=t.image?n+='    <div class="appstore-overlay-app-image" style="background: url('+t.image+');background-repeat: no-repeat; background-size: cover"></div>':n+='    <div class="appstore-overlay-app-image" style="background-image: url(\''.concat(r,"')\"></div>"),n+='\n      <div class="appstore-overlay-app-details">\n        <div class="appstore-overlay-app-title">'.concat(t.name,'</div>\n        <div class="appstore-overlay-app-author">Publisher: ').concat(e.keys.returnUsername(t.publickey),'</div>\n        <div class="appstore-overlay-app-btn" class="appstore-overlay-app-btn button">install</div>\n      </div>\n    </div>\n\n  ')}},function(e,t,a){var r=a(204);e.exports=AppstoreAppDetails={render:function(e,t){document.getElementById("appstore-app-install-overlay")||e.browser.addElementToDom('<div id="appstore-app-install-overlay" class="appstore-app-install-overlay"></div>'),document.querySelector(".appstore-app-install-overlay").innerHTML=r(e,t),document.querySelector(".appstore-app-install-overlay").style.display="block",fitty(".appstore-app-install-name")},attachEvents:function(e,t){try{document.querySelector("#email-form-back-button").onclick=function(){document.querySelector(".appstore-app-install-overlay").style.display="none",document.querySelector(".appspace-appstore-container").style.display="grid";var a=e.modules.returnModule("Email");a&&(t||(t={}),t.email=a,t.mods=a.mods,a.renderMain(e,t),a.renderSidebar(e,t))}}catch(e){}document.querySelector(".appstore-app-install-overlay").onclick=function(){document.querySelector(".appstore-app-install-overlay").style.display="none"};var a=t.module;document.querySelector(".appstore-app-install-confirm-btn").onclick=function(){document.querySelector(".appstore-app-install-overlay").onclick=function(){return!1};var t=[];t.push(a);var r=a.name;console.log("MODULE LIST IS: "+JSON.stringify(t));var n=[];if(e.options.modules){n=e.options.modules;for(var i=0;i<n.length;i++){for(var s=0,o=0;o<t.length;o++)""!=r&&t[o].name==n[i].name&&(s=1);0==s&&t.push({name:n[i].name,version:n[i].version})}if(e.options.appstore)if(""!=e.options.appstore.default){var c=e.wallet.createUnsignedTransactionWithDefaultFee(e.options.appstore.default,0);if(null==c)return;c.msg.module="AppStore",c.msg.request="request bundle",c.msg.list=t,c=e.wallet.signTransaction(c),e.network.propagateTransaction(c),document.querySelector(".appstore-app-install-overlay").innerHTML='\n            <div class="appstore-bundler-install-notice">\n              <center class="appstore-loading-text" style="margin-bottom:20px">Your custom Saito bundle is being compiled. Please do not leave this page -- estimated time to completion 60 seconds.</center>\n              <center><div class="loader" id="game_spinner"></div></center>\n            </div>\n          '}else document.querySelector(".appstore-app-install-overlay").innerHTML='\n            <div class="appstore-bundler-install-notice">\n              <center style="margin-bottom:20pxpadding:20px;">\n\t\tYour wallet does not specify an AppStore to use. Use this AppStore? \n\t        <p></p>\n\t        <div class="button" id="appstore-compile-btn">yes please</div>\n\t        <p></p>\n\t        <div class="button" id="appstore-end-compile-btn">no thanks</div>\n\t      </center>\n            </div>\n          ',document.getElementById("appstore-compile-end-btn").onclick=function(e){mod.overlay.hideOverlay()},document.getElementById("appstore-compile-btn").onclick=function(a){e.options.appstore={},e.options.appstore.default=e.network.peers[0].peer.publickey,e.storage.saveOptions();var r=e.wallet.createUnsignedTransactionWithDefaultFee(e.options.appstore.default,0);null!=r&&(r.msg.module="AppStore",r.msg.request="request bundle",r.msg.list=t,r=e.wallet.signTransaction(r),e.network.propagateTransaction(r),document.querySelector(".appstore-app-install-overlay").innerHTML='\n               <div class="appstore-bundler-install-notice">\n                 <center class="appstore-loading-text" style="margin-bottom:20px">Your custom Saito bundle is being compiled. Please do not leave this page -- estimated time to completion 60 seconds.</center>\n                 <center><div class="loader" id="game_spinner"></div></center>\n               </div>\n             ')};else document.querySelector(".appstore-app-install-overlay").innerHTML='\n          <div class="appstore-bundler-install-notice">\n            <center style="margin-bottom:20px">\n\t      Your wallet does not specify an AppStore to use. Use this AppStore? \n\t      <p></p>\n\t      <div class="button" id="appstore-compile-btn">yes, compile</div>\n\t      <p></p>\n\t      <div class="button" id="appstore-end-compile-btn">no thanks</div>\n\t    </center>\n          </div>\n        ',document.getElementById("appstore-compile-btn").onclick=function(a){e.options.appstore={},e.options.appstore.default=e.network.peers[0].peer.publickey,e.storage.saveOptions();var r=e.wallet.createUnsignedTransactionWithDefaultFee(e.options.appstore.default,0);null!=r&&(r.msg.module="AppStore",r.msg.request="request bundle",r.msg.list=t,r=e.wallet.signTransaction(r),e.network.propagateTransaction(r),document.querySelector(".appstore-app-install-overlay").innerHTML='\n             <div class="appstore-bundler-install-notice">\n               <center class="appstore-loading-text" style="margin-bottom:20px">Your custom Saito bundle is being compiled. Please do not leave this page -- estimated time to completion 60 seconds.</center>\n               <center><div class="loader" id="game_spinner"></div></center>\n             </div>\n           ')}}else alert("ERROR: your wallet does not report having modules. Please reset")}}}},function(e,t){e.exports=AppstoreAppDetailsTemplate=function(e,t){var a=new Date(t.module.unixtime),r='  \n  <div class="appstore-app-install-content">\n\n    <div class="appstore-app-install-image">\n  ';return t.image?r+="      <div style='background: ".concat(t.image,"; background-repeat: no-repeat; background-size: cover;width:100%;height:100%'></div> "):r+='      <img src="/saito/img/dreamscape.png" /> ',r+='\n      <div class="appstore-app-install-name">'.concat(t.module.name,'</div>\n    </div>\n\n    <div class="appstore-app-install-left">\n\n      <div class="appstore-app-install-description">').concat(t.module.description,'</div>\n\n      <div class="appstore-app-istall-details grid-2">\n\n        <div>Version:</div><div class="appstore-app-install-version">').concat(t.module.version,'</div>\n\n        <div>Publisher:</div><div class="appstore-app-install-publickey">').concat(t.module.publickey,'</div>\n\n        <div>Time:</div><div class="appstore-app-install-unixtime">').concat(a.toUTCString(),'</div>\n\n      </div>\n\n    </div>\n\n    <button id="appstore-app-install-confirm-btn" class="appstore-app-install-confirm-btn">INSTALL</button>\n  \n    <div class="tip">Block Data <i class="fas fa-info-circle"></i>\n\n    <div class="tiptext">\n\n    <div class="grid-2">\n      <div>Block hash:</div>\n      <div class="appstore-app-install-bsh">').concat(t.module.bsh,'</div>\n      <div>Block ID:</div>\n      <div class="appstore-app-install-bid">').concat(t.module.bid,"</div>\n    </div>\n\n    </div>\n\n  </div>\n\n  </div>\n\n  ")}},function(e,t){e.exports=EmailAppStoreTemplate=function(){return'\n<link rel="stylesheet" href="/appstore/css/email-appspace.css" />\n<div class="appspace-appstore-container">\n\n  <h2>Deploy an Application:</h2>\n\n  <div class="appstore-apps"></div>\n  \n  <button id="appstore-publish-button">Upload New Application</button>\n\n</div>\n  '}},function(e,t,a){var r=a(207);e.exports=AppStoreBundleConfirm={render:function(e,t){document.querySelector(".loader").parentElement.innerHTML='<i style="font-size: 3em;" class="installed fas fa-check-circle"></i>',document.querySelector(".appstore-loading-text").innerHTML=r(t.bundle_appstore_publickey)},attachEvents:function(e,t){document.getElementById("confirm-bundle-install-btn").addEventListener("click",(function(a){e.options.bundle=t.appstore_bundle,e.storage.saveOptions();var r=window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/wallet";window.location=r}))}}},function(e,t){e.exports=AppStoreBundleConfirmTemplate=function(e){return"\n\n\n  The AppStore at ".concat(e,' has generated a new Saito bundle for you. Use it?\n\n  <p></p>\n\n  <button id="confirm-bundle-install-btn" class="confirm-bundle=-install-btn" name="confirm">confirm</button>\n\n</div>\n  ')}},function(e,t,a){var r=a(209),n=a(95);e.exports=AppStoreModuleIndexedConfirm={render:function(e,t){document.querySelector(".appstore-loading-text").innerHTML=r();try{document.querySelector(".loader").parentElement.innerHTML='<i style="font-size: 3em;" class="installed fas fa-check-circle"></i>'}catch(e){}},attachEvents:function(e,t){document.getElementById("confirm-appstore-visit-btn").addEventListener("click",(function(a){document.querySelector(".appstore-app-install-overlay").style.display="none";var r={search:t.uploading_application_id,featured:0};n.render(e,t,r),n.attachEvents(e,t),document.getElementById("appstore-search-box").value=t.uploading_application_id}))}}},function(e,t){e.exports=AppStoreModuleIndexedConfirmTemplate=function(e){return'\n\n  Install Application?\n\n  <p></p>\n\n  <button id="confirm-appstore-visit-btn" class="confirm-appstore-visit-btn" name="confirm">confirm</button>\n\n</div>\n  '}},function(e,t){e.exports=IndexTemplate=function(e){return"\nimport { Saito } from '../apps/core/index';\nimport mod_paths from './".concat(e,'\';\n\n// ../mods/appstore/bundler/mods/\n\nasync function init() {\n  let saito = new Saito({ mod_paths: mod_paths.mod_paths });\n  saito.BROWSER = 1;\n  await saito.init();\n  console.log("Hello!");\n}\n\ninit();\n  ')}},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}var n=a(212),i=a(96),s=a(213),o=a(215),c=a(217),l=a(1138),u=(a(128),a(127)),d=a(223),p=["arcade","observables","tournaments"];e.exports=ArcadeMain={render:function(e,t){if(1!=t.viewing_arcade_initialization_page){document.getElementById("arcade-main")&&document.getElementById("arcade-main").destroy();for(var a=0,r=0;r<t.games.length;r++)if(t.isMyGame(t.games[r],e)){t.games[r].isMine=!0;var c=t.games[a];t.games[a]=t.games[r],t.games[r]=c,a++}else t.games[r].isMine=!1;document.getElementById("arcade-container")||e.browser.addElementToDom(i(e,t)),document.querySelector(".arcade-main")||e.browser.addElementToDom(n(e,t),"arcade-container"),p.forEach((function(t,a){document.querySelector("#tab-button-"+t).onclick=function(){e.browser.logMatomoEvent("Arcade","ArcadeTabNavigationClick",t),p.forEach((function(e,a){e===t?(document.querySelector("#"+e+"-hero").classList.remove("arcade-tab-hidden"),document.querySelector("#tab-button-"+e).classList.add("active-tab-button")):(document.querySelector("#"+e+"-hero").classList.add("arcade-tab-hidden"),document.querySelector("#tab-button-"+e).classList.remove("active-tab-button"))}))}})),document.querySelector(".arcade-hero")&&(t.games.forEach((function(a,r){e.browser.addElementToElement(u(e,t,a,r),document.querySelector(".arcade-hero"))})),t.observer.forEach((function(a,r){e.browser.addElementToElement(d(e,t,a,r,e.crypto.stringToBase64(JSON.stringify(a))),document.querySelector(".observables-hero"))}))),document.querySelectorAll(".observe-game-btn").forEach((function(a,r){a.onclick=function(a){var r=a.currentTarget.getAttribute("data-gameobj");"watch"!==a.currentTarget.getAttribute("data-cmd")||h.observeGame(e,t,r)}}));var h=this;if(t.games.forEach((function(a,r){try{document.querySelectorAll("#invite-".concat(a.transaction.sig," .invite-tile-button")).forEach((function(a,r){a.onclick=function(a){var r=a.currentTarget.getAttribute("data-sig"),n=a.currentTarget.getAttribute("data-cmd");e.browser.logMatomoEvent("Arcade","ArcadeAcceptInviteButtonClick",n),"delete"!==n?"cancel"!==n?"join"!==n?"continue"!==n||h.continueGame(e,t,r):h.joinGame(e,t,r):h.cancelGame(e,t,r):h.deleteGame(e,t,r)}}))}catch(e){}})),s.render(e,t),o.render(e,t),0==t.games.length)new l(e).render(e,t,"arcade","arcade-hero");e.browser.addIdentifiersToDom();try{0==e.browser.isSupportedBrowser(navigator.userAgent)&&(document.querySelector(".alert-banner").style.display="block")}catch(e){}}},attachEvents:function(e,t){},joinGame:function(e,t,a){return(n=regeneratorRuntime.mark((function r(){var n,i,s,o,l,u,d,p,h,f,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=null,t.games.forEach((function(e){e.transaction.sig===a&&(n=e)})),n){r.next=5;break}return console.log("ERR: game not found"),r.abrupt("return");case 5:if(r.prev=5,i=n.msg,""==(s=i.options).crypto){r.next=28;break}if(s.crypto==e.wallet.returnPreferredCryptoTicker()){r.next=14;break}return salert("This game requires "+s.crypto+" crypto to play!"),r.abrupt("return");case 14:if(confirm("This game requires "+s.crypto+" crypto to play. OK?")){r.next=17;break}return r.abrupt("return");case 17:if(!(parseFloat(s.stake)>0)){r.next=28;break}return o=e.wallet.returnPreferredCrypto(s.crypto).returnAddress(),r.next=21,e.wallet.returnPreferredCryptoBalances([o],null,s.crypto);case 21:for(l=r.sent,u=0,d=0;d<l.length;d++)l.address==o&&l.balance>=s.stake&&(u=1);if(1==u){r.next=28;break}return salert("You do not have enough "+s.crypto+"! Balance: 0"),r.abrupt("return");case 28:r.next=33;break;case 30:r.prev=30,r.t0=r.catch(5),console.log("ERROR checking if crypto-required: "+r.t0);case 33:if(p=parseInt(n.msg.players_needed),h=n.msg.players.length,!(p>h+1)){r.next=41;break}return f=t.createJoinTransaction(n),e.network.propagateTransaction(f),t.joinGameOnOpenList(f),salert("Joining game! Please wait a moment"),r.abrupt("return");case 41:if(n.transaction.from[0].add!=e.wallet.returnPublicKey()){r.next=46;break}n.returnMessage().players.length>1&&salert("You created this game! Waiting for enough players to join we can start..."),r.next=62;break;case 46:if(!e.options.games){r.next=61;break}if(-1==(m=e.options.games.find((function(e){return e.id==a})))||!m){r.next=61;break}if(1!=m.initializing){r.next=56;break}return salert("Accepted Game! It may take a minute for your browser to update -- please be patient!"),c.render(e,data),c.attachEvents(e,data),r.abrupt("return");case 56:return m.ts=(new Date).getTime(),m.initialize_game_run=0,e.storage.saveOptions(),window.location="/"+m.module.toLowerCase(),r.abrupt("return");case 61:t.sendPeerRequestWithFilter((function(){var e={request:"rawSQL",data:{}};return e.data.module="Arcade",e.data.sql='SELECT is_game_already_accepted FROM games WHERE game_id = "'.concat(a,'"'),e.data.game_id=a,e}),(function(a){if(null!=a.rows)if(a.rows.length>0){if(1==a.rows[0].game_still_open||0==a.rows[0].game_still_open&&p>2){var r=n.transaction;Object.assign({msg:{players_array:null}},r),salert("Game accepted - please wait");var i=t.createAcceptTransaction(n);return t.app.network.propagateTransaction(i),c.render(e,t),void c.attachEvents(e,t)}salert("Sorry, this game has been accepted already!")}else salert("Sorry, this game has already been accepted!");else console.log("ERROR 458103: cannot fetch information on whether game already accepted!")}));case 62:case"end":return r.stop()}}),r,null,[[5,30]])})),function(){var e=this,t=arguments;return new Promise((function(a,i){var s=n.apply(e,t);function o(e){r(s,a,i,o,c,"next",e)}function c(e){r(s,a,i,o,c,"throw",e)}o(void 0)}))})();var n},continueGame:function(e,t,a){var r=e.options.games.find((function(e){return e.id==a}));if(-1!=r&&r)return 1==r.initializing?(salert("Accepted Game! It may take a minute for your browser to update -- please be patient!"),c.render(e,data),void c.attachEvents(e,data)):(r.ts=(new Date).getTime(),r.initialize_game_run=0,e.storage.saveOptions(),void(window.location="/"+r.module.toLowerCase()))},cancelGame:function(e,t,a){var r=a,n="",i=[];if(e.options.games)for(var s=0;s<e.options.games.length;s++)void 0!==e.options.games[s].transaction?n=e.options.games[s].transaction.sig:void 0!==e.options.games[s].id&&(n=e.options.games[s].id),n==r&&(e.options.games[s].over=1,i=e.options.games[s].players,e.options.games.splice(s,1),e.storage.saveOptions());for(var o=e.wallet.createUnsignedTransactionWithDefaultFee(),c=e.wallet.returnPublicKey(),l=0;l<i.length;l++)i[l]!=c&&o.transaction.to.push(e.wallet.createSlip(i[l]));var u={sig:r,status:"close",request:"close",winner:i[0]==c?i[1]:i[0],module:"Arcade"};o.msg=u,o=e.wallet.signTransaction(o),e.network.propagateTransaction(o),this.removeGameFromList(r)},deleteGame:function(e,t,a){if(salert("Delete game id: ".concat(a)),e.options.games){e.options.games;for(var r=0;r<e.options.games.length;r++)if(e.options.games[r].id==a){var n=e.options.games[r];if(0==n.over)e.modules.returnModule(n.module).resignGame(a);else e.options.games[r].over=1,e.options.games[r].last_block=e.blockchain.last_bid,e.storage.saveOptions()}this.removeGameFromList(a)}},observeGame:function(e,t,a){console.log("ABOUT TO JOIN GAME"),t.observeGame(a)},removeGameFromList:function(e){document.getElementById("arcade-hero").removeChild(document.getElementById("invite-".concat(e)))}}},function(e,t,a){a(127);e.exports=ArcadeMainTemplate=function(e,t){return'\n    <div id="arcade-main" class="arcade-main">\n\n      <div class="alert-banner">\n        <div class="alert-icon">&#9888;</div>\n        <div class="alert-body">\n\t  <div class="alert-title">Warning</div>\n \t  <div class="alert-notice">Saito requires a standards-compliant browser: yours may freeze <a href="#" style="text-decoration:none">click for details</a></div>\n        </div>\n      </div>\n\n      <div id="arcade-tab-buttons">\n        <div id="tab-button-arcade" class="tab-button active-tab-button"><span>Invites</span></div>\n        <div id="tab-button-observables" class="tab-button"><span>Watch</span></div>\n        <div id="tab-button-tournaments" class="tab-button"><span>Tournaments</span></div>\n      </div>\n      <div id="arcade-tabs">\n        <div id="arcade-hero" class="arcade-hero">\n        </div>\n        <div id="observables-hero" class="observables-hero arcade-tab-hidden">\n        </div>\n        <div id="tournaments-hero" class="tournaments-hero arcade-tab-hidden">\n          coming soon\n        </div>\n      </div>\n      <div id="arcade-sub" class="arcade-sub">\n      </div>\n    </div>\n  '}},function(e,t,a){var r=a(214);e.exports=ArcadePosts={render:function(e,t){document.querySelector(".arcade-posts")||e.browser.addElementToDom(r(),"arcade-sub"),e.modules.respondTo("arcade-posts").forEach((function(t){null!=t&&t.respondTo("arcade-posts").render(e,t)}))},attachEvents:function(e,t){e.modules.respondTo("arcade-posts").forEach((function(t){null!=t&&t.respondTo("arcade-posts").attachEvents(e,t)}))}}},function(e,t){e.exports=ArcadePostsTemplate=function(){return'\n    <div class="arcade-posts">\n      <div id="arcade-posts-add" class="arcade-posts-add"><i id="arcade-posts-insert-add-contact" class="icon-med fas fa-plus"></i></div>\n      <div id="arcade-posts"></div>\n    </div>\n  '}},function(e,t,a){var r=a(216);e.exports=ArcadeInfobox={render:function(e,t){document.querySelector(".arcade-infobox")||e.browser.addElementToDom(r(),"arcade-sub"),e.modules.respondTo("arcade-infobox").forEach((function(a){var r=a.respondTo("arcade-infobox");r.render(e,t),r.attachEvents(e,t)}))},attachEvents:function(e,t){}}},function(e,t){e.exports=ArcadeInfoboxTemplate=function(){return'\n    <div id="arcade-infobox" class="arcade-infobox">\n    </div>\n  '}},function(e,t,a){var r=a(218),n=a(219);e.exports=GameLoader={render:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.viewing_arcade_initialization_page=1,document.getElementById("arcade-main").innerHTML=""!=a?n(a):r()},attachEvents:function(e,t){try{document.querySelector(".start-game-btn").addEventListener("click",(function(t){for(var a=t.currentTarget.id,r=0;r<e.options.games.length;r++)if(e.options.games[r].id==a){e.browser.logMatomoEvent("Arcade","StartGameClick",e.options.games[r].module),e.options.games[r].ts=(new Date).getTime(),e.options.games[r].initialize_game_run=0,e.storage.saveOptions();for(var n=0;n<e.modules.mods.length;n++)if(e.modules.mods[n].name==e.options.games[r].module)return void(window.location="/"+e.modules.mods[n].returnSlug());break}}))}catch(e){}}}},function(e,t){e.exports=GameLoaderTemplate=function(){return'  \n    <div id="arcade-initialize-game-container" class="arcade-initialize-game-container">\n      <center><div id="game-loader-title" class="game-loader-title">Your Game is Initializing</div></center>\n      <div class="game-loader-spinner loader" id="game-loader-spinner"></div>\n    </div>\n  '}},function(e,t){e.exports=GameLoaderTemplate=function(e){return' \n      <div class="arcade-initialize-game-container">\n        <center>Your game is ready to start!</center>\n        <button class="start-game-btn" id="'.concat(e,'">start game</button>\n      </div>\n  ')}},function(e,t){e.exports=ArcadeGameDetailsTemplate=function(e,t,a){return'\n    <div class="game-wizard">\n      <form id="game-wizard-form" class="game-wizard-form">\n\n\t<div class="game-wizard-header">\n          <div class="game-wizard-image"><img class="game-image" src="/imperium/img/arcade.jpg"/></div>\n\t  <div class="game-wizard-intro">\n\t    <input type="hidden" name="gamename" value="'.concat(a.msg.game,'" />\n            <div class="game-wizard-title">Red Imperium</div>\n            <div class="game-wizard-description">Red Imperium is a multi-player space exploration and conquest simulator. Each player controls a unique faction vying for political control of the galaxy in the waning days of a dying Empire.</div>\n\t  </div>\n\t</div>\n        \n\n\t<div class="game-wizard-controls">\n\n          <div id="game-wizard-players" class="game-wizard-players">\n            <select class="game-wizard-players-select" name="game-wizard-players-select">\n            </select>\n\t    <div class="game-wizard-options-toggle"><span class="game-wizard-options-toggle-text">advanced options...</span></div>\n          </div>\n\n\t  <div id="game-wizard-invite" class="game-wizard-invite">\t\n            <button type="button" id="game-invite-btn" class="game-invite-btn">Create New Game</button>\n\t  </div>\n\n\t</div>\n\n        <div id="game-wizard-publisher-message" class="game-wizard-publisher-message"></div>\n\n        <div id="game-wizard-advanced-options-overlay" class="game-wizard-advanced-options-overlay"></div>\n\n      </form>\n    </div>\n')}},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(222),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}var t,a,i;return t=e,(a=[{key:"render",value:function(e,t){document.querySelector(".game-overlay-backdrop")||e.browser.addElementToDom(n(),"game-wizard-advanced-options-overlay");var a=document.querySelector(".game-overlay");a.style.display="none",a.innerHTML=t.returnGameOptionsHTML()}},{key:"attachEvents",value:function(e,t){}},{key:"showOverlay",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.render(e,t);var n=this,i=document.querySelector(".game-overlay"),s=document.querySelector(".game-overlay-backdrop");i.innerHTML=a,i.style.display="block",s.style.display="block",s.style.opacity=1,s.style.backgroundColor="#111",s.onclick=function(e){n.hideOverlay(r)}}},{key:"hideOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.querySelector(".game-overlay"),a=document.querySelector(".game-overlay-backdrop");t.style.display="none",a.style.display="none",null!=e&&e()}}])&&r(t.prototype,a),i&&r(t,i),e}();e.exports=i},function(e,t){e.exports=AdvancedOverlayTemplate=function(){return'  \n    <div id="game-overlay" class="game-overlay"></div>\n    <div id="game-overlay-backdrop" class="game-overlay-backdrop"></div>\n  '}},function(e,t){e.exports=ArcadeObserveTemplate=function(e,t,r,n,i){var s='<div class="playerInfo" style="grid-template-columns: repeat('.concat(r.players_array.split("_").length,', 1fr);">'),o=(new Date).getTime(),c=e.browser.formatDate(o);return r.players_array.split("_").forEach((function(t){var a=e.keys.returnIdenticon(t);s+='<div class="player-slot tip id-'.concat(t,'"><img class="identicon" src="').concat(a,'"><div class="tiptext">').concat(e.browser.returnAddressHTML(t),"</div></div>")})),s+="</div>",'\n    <div id="invite-'.concat(r.game_id,'" class="arcade-tile" style="background-image: url(/').concat(r.module,'/img/arcade.jpg);">\n      <div class="invite-tile-wrapper">\n        <div class="game-inset-img" style="background-image: url(/').concat(r.module,'/img/arcade.jpg);"></div>\n        <div class="invite-col-2">\n          <div class="gameName" style="font-size:0.9em">').concat(c.day," ").concat(c.month," ").concat(c.year,"</div>\n          ").concat(s,'\n        </div>\n        <div class="gameShortDescription">').concat(a(e,r),'</div>\n\t<div class="gameButtons">\n          <button data-sig="').concat(r.game_id,'" data-gameobj="').concat(i,'" data-cmd="watch" class="button observe-game-btn">WATCH</button>\n        </div>\n      </div>\n    </div>\n    ')};var a=function(e,t){var a="";if(t.msg){var r=e.modules.returnModule(t.msg.game);if(r){var n=r.returnShortGameOptionsArray(t.msg.options);for(var i in n){a+='<div class="gameShortDescriptionRow"><div class="gameShortDescriptionKey">'.concat(i,': </div><div class="gameShortDescriptionValue">').concat(n[i],"</div></div>")}}}return a}},function(e,t,a){var r=a(5),n=a(225),i=(a(226),a(42),a(429)),s=a(128),o=a(96);e.exports=ArcadeSidebar={render:function(e,t){document.getElementById("arcade-container")||e.browser.addElementToDom(o()),document.querySelector(".arcade-sidebar")||e.browser.addElementToDom(n(),"arcade-container"),e.modules.respondTo("email-chat").forEach((function(t){null!=t&&t.respondTo("email-chat").render(e,t)}));var a=document.querySelector(".arcade-apps");e.modules.respondTo("arcade-games").forEach((function(e){var t=e.name;document.getElementById(e.name)||(a.innerHTML+='<li class="arcade-navigator-item" id="'.concat(e.name,'">').concat(t,"</li>"))}))},attachEvents:function(e,t){document.getElementById("games-add-game")&&(null!=e.modules.returnModule("AppStore")&&(document.getElementById("games-add-game").onclick=function(){var t=e.modules.returnModule("AppStore");if(t){t.openAppstoreOverlay({search:"",category:"Entertainment",featured:1})}}),Array.from(document.getElementsByClassName("arcade-navigator-item")).forEach((function(a){a.addEventListener("click",(function(a){var n=a.currentTarget.id;e.browser.logMatomoEvent("Arcade","ArcadeSidebarInviteCreateClick",n);var o=function(){var a=new r.transaction;a.msg.game=n,s.render(e,t,a),s.attachEvents(e,t,a)};if(""==e.keys.returnIdentifierByPublicKey(e.wallet.returnPublicKey())&&1!=e.options.wallet.anonymous)return t.modal_register_username=new i(e,o),t.modal_register_username.render(e,t),void t.modal_register_username.attachEvents(e,t);o()}))})),e.modules.respondTo("email-chat").forEach((function(a){a.respondTo("email-chat").attachEvents(e,t)})))}}},function(e,t){e.exports=ArcadeSidebarTemplate=function(){return'\n  <div class="arcade-sidebar" id="arcade-sidebar">\n    <div class="arcade-controls">\n      <div class="arcade-bars-menu">\n        <div class="arcade-navigator-bars-menu register-username-check">\n          <div class="arcade-sidebar-active-games-header" style="display:flex; align-items:center;justify-content: space-between">\n            <h2>Games</h2>\n            <i id="games-add-game" class="icon-med fas fa-plus"></i>\n          </div>\n          <div class="arcade-apps-wrapper">\n            <ul class="arcade-apps" id="arcade-apps"></ul>\n          </div>\n        </div>\n    </div>\n  </div>\n  <div id="email-chat" class="email-chat"></div>\n  '}},function(e,t){e.exports=ArcadeGamesFullListOverlayTemplate=function(e,t){var a='\n    <div id="installed-games" class="installed-games">\';\n       <h1>Installed Games</h1>\n       <div class="return-to-arcade" id="return-to-arcade"><i class="icon-large fas fa-times-circle"></i></div>\n       <div class="start-game-list">\n  ';return e.modules.respondTo("arcade-games").forEach((function(e){var t="/"+e.slug+"/img/arcade.jpg",r="Players: ",n=e.minPlayers,i=e.maxPlayers;r+=n==i?n:n+"-"+i,a+='<div class="arcade-game-list-item" data-game="'.concat(e.name,'">\n         <div class="arcade-game-list-image" style="background-image: url(').concat(t,');"></div>\n         <div class="arcade-gema-list-details">\n           <div class="arcade-game-list-title"><h4>').concat(e.name,'</h4></div>\n           <div class="arcade-game-list-type">').concat(e.type,'</h4></div>\n           <div class="arcade-game-list-players">').concat(r,"</h4></div>\n         </div>\n       </div>")})),gamemod_url="/saito/img/dreamscape.png",a+='<div class="arcade-game-list-item" data-game="Install New Game">\n        <div class="arcade-game-list-image" style="background-image: url('.concat(gamemod_url,');"></div>\n        <div class="arcade-gema-list-details">\n          <div class="arcade-game-list-title"><h4>Install New Game</h4></div>\n          <div class="arcade-game-list-type">Saito Appstore</h4></div>\n          <div class="arcade-game-list-players">1 - 6</h4></div>\n        </div>\n        </div>'),a+="\n       </div>\n     </div>\n  "}},function(e,t){var a="zPwFAUi2S3AAUwhAxX19UAAUUisrrw9QtMTpwAC6w3fK",r={transaction:{id:9,from:[{add:a,bid:0,tid:0,sid:0,bsh:"",amt:"0",type:0,lc:1}],to:[{add:a,bid:0,tid:0,sid:0,bsh:"",amt:"0",type:0,lc:1},{add:a,bid:0,tid:0,sid:1,bsh:"",amt:"0",type:0,lc:1}],ts:1605090741941,sig:"2msmS9EjCrMeromNHpy4Yv8br3JT8wbFrmoGownu2ctvJRghLor6kz2DCmGT3sAwVwVEJJNBjTtwbgVXYFumHeHM",ver:1,path:[{from:a,to:"ySSjMVrEqbtAAtcob5ZWDC2hZQ5Cj6zSC4Q4t1myosGd",sig:"66ZAocz6VMwxpwhVA2h3vdMjgpQ5myTnm5kAJXLnXSvCbb912DWpzR19j1TqHr9CRejgahu5nBRSSwjS4aKSNLbf"}],r:1,type:0,m:"eyJ0cyI6MTYwNTA5MDc0MTg5MiwibW9kdWxlIjoiQXJjYWRlIiwicmVxdWVzdCI6Im9wZW4iLCJnYW1lIjoiQ2hlc3MiLCJvcHRpb25zIjp7ImNvbG9yIjoiYmxhY2siLCJjbG9jayI6IjAifSwib3B0aW9uc19odG1sIjoiPHNwYW4gY2xhc3M9XCJnYW1lLW9wdGlvblwiPmNvbG9yOiBibGFjazwvc3Bhbj4sIDxzcGFuIGNsYXNzPVwiZ2FtZS1vcHRpb25cIj5jbG9jazogMDwvc3Bhbj4iLCJwbGF5ZXJzX25lZWRlZCI6MiwicGxheWVycyI6WyJ6UHdGQVVpMlMzQUFVd2hBeFgxOVVBQVVVaXNycnc5UXRNVHB3QUM2dzNmSyJdLCJwbGF5ZXJzX3NpZ3MiOlsiNHpxb0trdDc1R2JOQ0Y5ck5hZjhNN3lCUFJCWm4xWkRmZDh0dFBxRnB6SzUyanRNVll4WFBiSnJUQk5Nd0Rybmtib251aW9KQndacTlVWGVlUG84dEE5bSJdfQ==",ps:0},fees_total:"",work_available_to_me:"",work_available_to_creator:"",work_cumulative:"0.0",msg:{ts:1605090741892,module:"Arcade",request:"open",game:"Chess",options:{color:"black",clock:"0"},options_html:'<span class="game-option">color: black</span>, <span class="game-option">clock: 0</span>',players_needed:2,players:[a],players_sigs:["4zqoKkt75GbNCF9rNaf8M7yBPRBZn1ZDfd8ttPqFpzK52jtMVYxXPbJrTBNMwDrnkbonuioJBwZq9UXeePo8tA9m"]},dmsg:"",size:1277,is_valid:1,atr_trapdoor:"00000000000000000000000000000000000000000000",atr_rebroadcasting_limit:10};e.exports=getMockGames=function(e){for(var t=[],n=Math.floor(40*Math.random()),i=0;i<n;i++)t.push(JSON.parse(JSON.stringify(r)));return t.forEach((function(t,r){var n,i;t.transaction.sig=function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=a.length,n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*r));return t}(1),t.msg.game=(n=["Wordblocks","Chess","Twilight","Poker","Imperium"])[Math.floor(Math.random()*n.length)],t.msg.players_needed=(i=[2,4,6,8])[Math.floor(Math.random()*i.length)],t.msg.players[0]=function(e){return Math.floor(2*Math.random())?a:e.wallet.returnPublicKey()}(e)})),t}},function(e,t,a){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(1142),s=a(42),o=a(5),c={NEWSLETTER:0,PRIVATESALE:1,REGISTEREMAIL:2,BACKUP:3},l=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};r(this,e),this.app=t,this.callback=a,this.mode=null}var t,a,l;return t=e,(a=[{key:"render",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.NEWSLETTER;this.mode=a,this.modal_overlay_email=new s(e),this.modal_overlay_email.render(e,t),this.modal_overlay_email.attachEvents(e,t),document.querySelector(".add-user")||this.modal_overlay_email.showOverlay(e,t,i(a,c))}},{key:"attachEvents",value:function(e,t){var a=this;document.querySelector(".tutorial-skip").onclick=function(){a.modal_overlay_email.hideOverlay()},document.querySelector("#registry-input").onclick=function(){document.querySelector("#registry-input").setAttribute("placeholder","")},document.querySelector("#backup-email-button").onclick=function(){var r=document.querySelector("#registry-input").value,n=document.querySelector("#signup")&&document.querySelector("#signup").checked;if(a.mode===c.NEWSLETTER)a.doNewsletterSignup(e,t,r);else if(a.mode===c.PRIVATESALE)a.doPrivateSaleSignup(e,t,r,n);else if(a.mode===c.REGISTEREMAIL)a.doRegisterEmail(e,t,r,n);else{if(a.mode!==c.BACKUP)throw"No such mode: "+a.mode;a.doEmailBackup(e,t,r,n)}a.modal_overlay_email.hideOverlay(),salert("Thanks for signing up!")}}},{key:"validateEmail",value:function(e){return!(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())||"email@domain.com"===e)||(salert("Invalid email address!"),!1)}},{key:"sendServiceRequest",value:function(e,t){tx=new o.transaction,tx.msg={key:this.app.wallet.returnPublicKey(),email:e,time:Date.now()},this.app.modules.returnActiveModule().sendPeerRequestWithServiceFilter("emailcollector",{request:t,data:tx},(function(e){document.querySelector(".arcade-sidebar-done").innerHTML="",e.forEach((function(e){void 0===e.label&&void 0===e.icon||(document.querySelector(".arcade-sidebar-done").innerHTML+=RewardsSidebarRow(e.label,e.icon,e.count))}))}))}},{key:"doRegisterEmail",value:function(e,t,a,r){this.validateEmail(a)&&(e.keys.updateEmail(e.wallet.returnPublicKey(),a),r&&this.doNewsletterSignup(e,t,a),window.location.reload())}},{key:"doEmailBackup",value:function(e,t,a,r){this.validateEmail(a)&&(e.keys.updateEmail(e.wallet.returnPublicKey(),a),r&&this.doNewsletterSignup(e,t,a))}},{key:"doPrivateSaleSignup",value:function(e,t,a,r){this.validateEmail(a)&&(this.sendServiceRequest(a,"public sale signup"),r&&this.doNewsletterSignup(e,t,a))}},{key:"doNewsletterSignup",value:function(e,t,a){this.validateEmail(a)&&this.sendServiceRequest(a,"newsletter signup")}}])&&n(t.prototype,a),l&&n(t,l),e}();l.MODES=c,e.exports=l},function(e,t,a){var r=a(230),n=a(233);e.exports=EmailChat={render:function(e,t){t.renderMode="email",r.render(e,t),r.attachEvents(e,t),n.render(e,t),n.attachEvents(e,t)},attachEvents:function(e,t){},showChatBox:function(e,t,a){t.renderMode="email",n.showChatBox(e,t,a)}}},function(e,t,a){var r=a(231),n=a(232),i=a(435);e.exports=ChatSidebar={render:function(e,t){t.modal_add_user=new i(e),document.querySelector(".chat-header")||e.browser.addElementToDom(r(),"email-chat");for(var a=0;a<t.groups.length;a++)document.getElementById(t.groups[a].id)||e.browser.addElementToDom(n(e,t.groups[a]),"chat-list")},attachEvents:function(e,t){document.querySelectorAll(".chat-row").forEach((function(a){a.onclick=function(a){t.mute_community_chat=0;try{var r=document.querySelector("#".concat(a.currentTarget.id," .chat-group-name")).innerHTML;e.browser.logMatomoEvent("Chat","ArcadeSidebarChatOpenedClick",r)}catch(a){e.browser.logMatomoEvent("Chat","ArcadeSidebarChatOpenedClick","unknownChat")}t.openChatBox(a.currentTarget.id)}})),document.getElementById("email-chat-add-contact").onclick=function(a){t.modal_add_user.render(e,t),t.modal_add_user.attachEvents(e,t)}}}},function(e,t){e.exports=ChatSidebarTemplate=function(){return'\n      <div class="chat-header">\n        <h2>Chat</h2>\n        <div id="online-count" class="online-count"></div>\n        <i id="email-chat-add-contact" class="icon-med fas fa-plus"></i>\n      </div>\n      <div id="chat-list" class="chat-list"></div>\n  '}},function(e,t){e.exports=ChatSidebarContactTemplate=function(e,t){var a=e.browser.formatDate((new Date).getTime()),r="";0==t.txs.length?r="New Chat Room":r=t.txs[t.txs.length-1].returnMessage().message;return'\n    <div id="'.concat(t.id,'" class="chat-row">\n      <img class="chat-row-image" src="').concat(e.keys.returnIdenticon(t.members[0]),'">\n      <div class="chat-content">\n          <div class="chat-group-name">').concat(t.name,'</div>\n          <div id="chat-last-message-').concat(t.id,'" class="chat-last-message">').concat(r,'</div>\n      </div>\n      <div style="display; grid;">\n        <div class="chat-last-message-timestamp">').concat(a.hours,":").concat(a.minutes,"</div>\n      </div>\n    </div>\n  ")}},function(e,t,a){function r(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}var i=a(234),s=a(129),o=a(236),c=a(238),l=a(239);e.exports=ChatBox={render:function(e,t){var a=this;document.querySelectorAll(".chat-box").forEach((function(r){for(var n=r.getAttribute("data-id"),i=-1,o=document.getElementById("chat-box-main-".concat(n)),c=0;c<t.groups.length;c++)t.groups[c].id==n&&(i=c);if(-1!=i){for(0==t.groups[i].txs.length&&(o.innerHTML='<p id="chat-box-default-message-'.concat(n,'" style="text-align:center">No messages in this group :(</p>'));t.groups[i].txs.length>100;)t.groups[i].txs.shift();for(var l=t.createMessageBlocks(t.groups[i]),u=0;u<l.length;u++){var d=s(e,t,t.groups[i],l[u]);if(u==l.length-1){var p="first_comment_sig";l[u].length>0&&(p=e.crypto.hash(l[u][0].transaction.sig));try{document.getElementById("chat-message-set-".concat(p)).destroy()}catch(e){}d=s(e,t,t.groups[i],l[u]),o.innerHTML+=d}else o.innerHTML+=d}document.querySelectorAll("img.img-prev").forEach((function(e){e.addEventListener("click",window.imgPop(e))})),a.scrollToBottom(n)}else alert("could not find chat group...")}))},attachDragAndDropEvents:function(e,t,a){document.querySelectorAll("#".concat(e)).forEach((function(e){t.browser.addDragAndDropFileUploadToElement(e.id,(function(r){var n=e.id.split("chat-box-main-")[1],i=document.createElement("img");if(i.classList.add("img-prev"),i.src=r,i.outerHTML.length>a.max_msg_size)salert("Image too large: 220kb max");else{var s=a.createMessage(n,i.outerHTML);a.sendMessage(t,s),a.receiveMessage(t,s)}}),!1)}))},attachEvents:function(e,t){document.querySelectorAll(".chat-box").forEach((function(a){var r=a.getAttribute("data-id"),n=document.getElementById("chat-box-new-message-input-".concat(r));n.addEventListener("keypress",(function(a){if((13==a.which||13==a.keyCode)&&!a.shiftKey){if(a.preventDefault(),""==n.value)return;e.browser.logMatomoEvent("Chat","ArcadeChatSendMessage","PressedEnter");var i=t.createMessage(r,n.value);t.sendMessage(e,i),t.receiveMessage(e,i),n.value=""}}))})),document.querySelectorAll(".chat-room-submit-button").forEach((function(a){a.ontouch=function(a){var r=a.currentTarget.id.split("chat-room-submit-button-")[1],n=document.getElementById("chat-box-new-message-input-".concat(r));if(""!=n.value){var i=t.createMessage(r,n.value);e.modules.returnModule("Chat").sendMessage(e,i),e.modules.returnModule("Chat").receiveMessage(e,i),n.value=""}},a.onclick=function(a){var r=a.currentTarget.id.split("chat-room-submit-button-")[1],n=document.getElementById("chat-box-new-message-input-".concat(r));if(""!=n.value){var i=t.createMessage(r,n.value);e.modules.returnModule("Chat").sendMessage(e,i),e.modules.returnModule("Chat").receiveMessage(e,i),n.value=""}}})),document.querySelectorAll(".chat-box-header").forEach((function(e){e.ontouch=function(e){var t=e.currentTarget.id.split("chat-box-header-")[1],a=document.getElementById("chat-box-".concat(t)),r=document.getElementById("chat-box-header-".concat(t));(0==a.style.left&&0==a.style.top||(r.style.cursor="unset",a.classList.contains("min-chat")))&&(a.classList.toggle("chat-box-hide"),a.classList.toggle("min-chat"),a.classList.contains("min-chat"),a.style.bottom=0,e.stopPropagation(),e.preventDefault())},e.onclick=function(e){var t=e.currentTarget.id.split("chat-box-header-")[1],a=document.getElementById("chat-box-".concat(t)),r=document.getElementById("chat-box-header-".concat(t));(0==a.style.left&&0==a.style.top||(r.style.cursor="unset",a.classList.contains("min-chat")))&&(a.classList.toggle("chat-box-hide"),a.classList.toggle("min-chat"),a.classList.contains("min-chat"),a.style.bottom=0,e.stopPropagation(),e.preventDefault())}})),document.querySelectorAll(".chat-box-close").forEach((function(e){var a=t.returnCommunityChat();e.ontouch=function(e){var r=e.currentTarget.id.split("chat-box-close-")[1];r==a.id&&(t.mute_community_chat=1),e.stopPropagation();var n=document.getElementById("chat-box-".concat(r));n.parentNode.removeChild(n)},e.onclick=function(e){var r=e.currentTarget.id.split("chat-box-close-")[1];r==a.id&&(t.mute_community_chat=1),e.stopPropagation();var n=document.getElementById("chat-box-".concat(r));n.parentNode.removeChild(n)}})),document.querySelectorAll(".chat-box").forEach((function(t){var a=t.id.split("chat-box-")[1];e.browser.makeDraggable(t.id,"chat-box-header-".concat(a),(function(){}))}))},showChatBox:function(e,t,a){for(var r=0,n=0,s=0;s<t.groups.length;s++)document.getElementById("chat-box-".concat(t.groups[s].id))&&(r++,n+=document.getElementById("chat-box-".concat(t.groups[s].id)).getBoundingClientRect().width);0==r?document.querySelector(".chat-box")||(e.browser.addElementToDom(i(a)),this.attachDragAndDropEvents("chat-box-main-".concat(a.id),e,t)):(document.getElementById("chat-box-".concat(a.id))||(e.browser.addElementToDom(i(a)),this.attachDragAndDropEvents("chat-box-main-".concat(a.id),e,t)),document.getElementById("chat-box-".concat(a.id)).style.right=n+20*r+"px");this.attachEvents(e,t)},addMessage:function(e,t,a){e.modules.returnModule("Chat").receiveMessage(e,a),this.addTXToDOM(e,t,a)},addTXToDOM:function(e,t,a){var r=Object.assign({},a.returnMessage(),{type:"myself"});this.addMessageToDOM(e,t,r)},addMessageToDOM:function(e,t,a){try{if(document.getElementById(a.sig))return;var n=Object.assign({},a,{keyHTML:e.browser.returnAddressHTML(a.publickey),identicon:e.keys.returnIdenticon(a.publickey),identicon_color:e.keys.returnIdenticonColor(a.publickey)}),i=document.getElementById("chat-box-main-".concat(n.group_id));if(console.log("MBL: "+this.message_blocks.length),this.message_blocks.length>0){var o=Object.assign({messages:[]},this.message_blocks[this.message_blocks.length-1]);if(Object.assign({},o.messages[o.messages.length-1]).publickey==n.publickey)o=Object.assign({},o,{last_message_timestamp:n.timestamp,last_message_sig:n.sig,messages:[].concat(r(o.messages),[n]),type:e.wallet.returnPublicKey()==n.publickey?"myself":"others"}),i.removeChild(i.lastElementChild),i.innerHTML+=s(o,t),this.message_blocks[this.message_blocks.length-1]=o;else{var c=Object.assign({},{publickey:n.publickey,group_id:n.group_id,last_message_timestamp:n.timestamp,last_message_sig:n.sig,keyHTML:n.keyHTML,identicon:n.identicon,identicon_color:n.identicon_color,type:e.wallet.returnPublicKey()==n.publickey?"myself":"others",messages:[n]});this.message_blocks.push(c),i.innerHTML+=s(c,t)}}else{console.log("Here!");var l=Object.assign({},{publickey:n.publickey,group_id:n.group_id,last_message_timestamp:n.timestamp,last_message_sig:n.sig,keyHTML:n.keyHTML,identicon:n.identicon,identicon_color:n.identicon_color,type:e.wallet.returnPublicKey()==n.publickey?"myself":"others",messages:[n]});this.message_blocks.push(l),i.innerHTML+=s(l,t)}document.querySelectorAll(".img-prev").forEach((function(e){e.addEventListener("click",window.imgPop(e))})),this.scrollToBottom(n.group_id)}catch(e){console.log("Error @ chat-box.js | addMessageToDOM\n ERROR: "+e)}},createMessageBlocks:function(e,t,a){for(var r=0,n=[],i=[],s=a.txs,o="";r<s.length;)0==n.length?(s[r].transaction.from[0].add!=o&&""!=o&&n.push(i),i.push(s[r]),o=s[r].transaction.from[0].add):s[r].transaction.from[0].add==o?i.push(s[r]):(n.push(i),(i=[]).push(s[r]),o=s[r].transaction.from[0].add),r++;return n.push(i),n},formatMessage:function(e){return e=l(e,{target:{url:"_self"}}),e=o(e),e=c(e,{allowedTags:["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","img","marquee","pre"],allowedAttributes:{div:["class","id"],a:["href","name","target","class","id"],img:["src","class"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","cite"],allowProtocolRelative:!0,transformTags:{a:c.simpleTransform("a",{target:"_blank"})}})},removeDefaultMessage:function(e){var t=document.getElementById("chat-box-default-message-".concat(e));t&&t.parentNode.removeChild(t)},scrollToBottom:function(e){var t=document.getElementById("chat-box-main-".concat(e));t&&(t.scrollTop=t.scrollHeight)}}},function(e,t){e.exports=ChatBoxTemplate=function(e){return'\n      <div data-id="'.concat(e.id,'" id="chat-box-').concat(e.id,'" class="chat-box">\n\t<div id="chat-box-header-').concat(e.id,'" class="chat-box-header">\n          <span><h2 class="chat-box-header-title">').concat(e.name,'</h2></span>\n          <span class="chat-box-close" id="chat-box-close-').concat(e.id,'" style="justify-self:end;font-size: 0.75em">&#x2715</span>\n\t</div>\n\t<div id="chat-box-main-').concat(e.id,'" class="chat-box-main"></div>\n\t<div id="chat-box-input-').concat(e.id,'" class="chat-box-input">\n          <textarea class="chat-box-new-message-input" id="chat-box-new-message-input-').concat(e.id,'"></textarea>\n          <div class="chat-room-submit-button" id="chat-room-submit-button-').concat(e.id,'"><i class="icon-small fas fa-arrow-circle-right"></i></div>\n        </div>\n      </div>\n  ')}},function(e,t){e.exports=ChatMessageTemplate=function(e,t,a,r,n){a=t.formatMessage(a);try{for(var i=a.match(/<a href="([^"]*)/)[1],s=0,o=[".apng",".gif",".ico",".cur",".jpg",".jpeg",".jfif",".pjpeg",".pjp",".png",".svg"];s<o.length;s++){var c=o[s];if(i.toLowerCase().includes(c))return'\n        <div id="'.concat(r,'" class="chat-room-message chat-room-message-').concat(n,'">\n          <div class="chat-message-text">').concat(a,'</div>\n        </div>\n        <div id="').concat(r,'" class="chat-room-message chat-room-message-').concat(n,'">\n          <div class="chat-message-text">\n              <img class="img-prev" src="').concat(i,'">\n          </div>\n        </div>')}}catch(e){}return'\n    <div id="'.concat(r,'" class="chat-room-message chat-room-message-').concat(n,'">\n      <div class="chat-message-text">').concat(a,"</div>\n    </div>\n  ")}},function(e,t,a){const r=a(1185),n=a(1186),i=a(237),s=a(439),o=a(438),c=a(437),{merge:l,checkSanitizeDeprecation:u,escape:d}=a(81),{getDefaults:p,changeDefaults:h,defaults:f}=a(97);function m(e,t,a){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(a||"function"==typeof t){a||(a=t,t=null),t=l({},m.defaults,t||{}),u(t);const i=t.highlight;let s,o,c=0;try{s=r.lex(e,t)}catch(e){return a(e)}o=s.length;const d=function(e){if(e)return t.highlight=i,a(e);let r;try{r=n.parse(s,t)}catch(t){e=t}return t.highlight=i,e?a(e):a(null,r)};if(!i||i.length<3)return d();if(delete t.highlight,!o)return d();for(;c<s.length;c++)!function(e){"code"!==e.type?--o||d():i(e.text,e.lang,(function(t,a){return t?d(t):null==a||a===e.text?--o||d():(e.text=a,e.escaped=!0,void(--o||d()))}))}(s[c])}else try{return t=l({},m.defaults,t||{}),u(t),n.parse(r.lex(e,t),t)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",(t||m.defaults).silent)return"<p>An error occurred:</p><pre>"+d(e.message+"",!0)+"</pre>";throw e}}m.options=m.setOptions=function(e){return l(m.defaults,e),h(m.defaults),m},m.getDefaults=p,m.defaults=f,m.Parser=n,m.parser=n.parse,m.Renderer=i,m.TextRenderer=s,m.Lexer=r,m.lexer=r.lex,m.InlineLexer=o,m.inlineLexer=o.output,m.Slugger=c,m.parse=m,e.exports=m},function(e,t,a){const{defaults:r}=a(97),{cleanUrl:n,escape:i}=a(81);e.exports=class{constructor(e){this.options=e||r}code(e,t,a){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const t=this.options.highlight(e,r);null!=t&&t!==e&&(a=!0,e=t)}return r?'<pre><code class="'+this.options.langPrefix+i(r,!0)+'">'+(a?e:i(e,!0))+"</code></pre>\n":"<pre><code>"+(a?e:i(e,!0))+"</code></pre>"}blockquote(e){return"<blockquote>\n"+e+"</blockquote>\n"}html(e){return e}heading(e,t,a,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(a)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"}hr(){return this.options.xhtml?"<hr/>\n":"<hr>\n"}list(e,t,a){const r=t?"ol":"ul";return"<"+r+(t&&1!==a?' start="'+a+'"':"")+">\n"+e+"</"+r+">\n"}listitem(e){return"<li>"+e+"</li>\n"}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+"</p>\n"}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"}tablerow(e){return"<tr>\n"+e+"</tr>\n"}tablecell(e,t){const a=t.header?"th":"td";return(t.align?"<"+a+' align="'+t.align+'">':"<"+a+">")+e+"</"+a+">\n"}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,a){if(null===(e=n(this.options.sanitize,this.options.baseUrl,e)))return a;let r='<a href="'+i(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+a+"</a>",r}image(e,t,a){if(null===(e=n(this.options.sanitize,this.options.baseUrl,e)))return a;let r='<img src="'+e+'" alt="'+a+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}}},function(e,t,a){"use strict";(function(a){var r,n,i,s;function o(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s=function(){return function e(t,a,r){function n(s,o){if(!a[s]){if(!t[s]){if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=a[s]={exports:{}};t[s][0].call(l.exports,(function(e){return n(t[s][1][e]||e)}),l,l.exports,e,t,a,r)}return a[s].exports}for(var i=!1,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(e,t,a){a.byteLength=function(e){var t=l(e),a=t[0],r=t[1];return 3*(a+r)/4-r},a.toByteArray=function(e){var t,a,r=l(e),s=r[0],o=r[1],c=new i(function(e,t,a){return 3*(t+a)/4-a}(0,s,o)),u=0,d=o>0?s-4:s;for(a=0;a<d;a+=4)t=n[e.charCodeAt(a)]<<18|n[e.charCodeAt(a+1)]<<12|n[e.charCodeAt(a+2)]<<6|n[e.charCodeAt(a+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;return 2===o&&(t=n[e.charCodeAt(a)]<<2|n[e.charCodeAt(a+1)]>>4,c[u++]=255&t),1===o&&(t=n[e.charCodeAt(a)]<<10|n[e.charCodeAt(a+1)]<<4|n[e.charCodeAt(a+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t),c},a.fromByteArray=function(e){for(var t,a=e.length,n=a%3,i=[],s=0,o=a-n;s<o;s+=16383)i.push(u(e,s,s+16383>o?o:s+16383));return 1===n?(t=e[a-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[a-2]<<8)+e[a-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),i.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=s.length;o<c;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=e.indexOf("=");return-1===a&&(a=t),[a,a===t?0:4-a%4]}function u(e,t,a){for(var n,i,s=[],o=t;o<a;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[(i=n)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},{}],2:[function(e,t,a){},{}],3:[function(e,t,a){(function(t){var r=e("base64-js"),n=e("ieee754");function i(e){if(e>2147483647)throw new RangeError('The value "'+e+'" is invalid for option "size"');var a=new Uint8Array(e);return a.__proto__=t.prototype,a}function t(e,t,a){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,a)}function s(e,a,r){if("string"==typeof e)return function(e,a){if("string"==typeof a&&""!==a||(a="utf8"),!t.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var r=0|p(e,a),n=i(r),s=n.write(e,a);return s!==r&&(n=n.slice(0,s)),n}(e,a);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(e));if(L(e,ArrayBuffer)||e&&L(e.buffer,ArrayBuffer))return function(e,a,r){if(a<0||e.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<a+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return(n=void 0===a&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,a):new Uint8Array(e,a,r)).__proto__=t.prototype,n}(e,a,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return t.from(n,a,r);var s=function(e){if(t.isBuffer(e)){var a=0|d(e.length),r=i(a);return 0===r.length||e.copy(r,0,0,a),r}return void 0!==e.length?"number"!=typeof e.length||N(e.length)?i(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return t.from(e[Symbol.toPrimitive]("string"),a,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+l(e))}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return o(e),i(e<0?0:0|d(e))}function u(e){for(var t=e.length<0?0:0|d(e.length),a=i(t),r=0;r<t;r+=1)a[r]=255&e[r];return a}function d(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|e}function p(e,a){if(t.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||L(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+l(e));var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(a){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(e).length;default:if(i)return n?-1:R(e).length;a=(""+a).toLowerCase(),i=!0}}function h(e,t,a){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===a||a>this.length)&&(a=this.length),a<=0)return"";if((a>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,a);case"utf8":case"utf-8":return S(this,t,a);case"ascii":return P(this,t,a);case"latin1":case"binary":return E(this,t,a);case"base64":return k(this,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,a);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function f(e,t,a){var r=e[t];e[t]=e[a],e[a]=r}function m(e,a,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),N(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof a&&(a=t.from(a,n)),t.isBuffer(a))return 0===a.length?-1:g(e,a,r,n,i);if("number"==typeof a)return a&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,a,r):Uint8Array.prototype.lastIndexOf.call(e,a,r):g(e,[a],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,a,r,n){var i,s=1,o=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,c/=2,a/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){var u=-1;for(i=a;i<o;i++)if(l(e,i)===l(t,-1===u?0:i-u)){if(-1===u&&(u=i),i-u+1===c)return u*s}else-1!==u&&(i-=i-u),u=-1}else for(a+c>o&&(a=o-c),i=a;i>=0;i--){for(var d=!0,p=0;p<c;p++)if(l(e,i+p)!==l(t,p)){d=!1;break}if(d)return i}return-1}function b(e,t,a,r){a=Number(a)||0;var n=e.length-a;r?(r=Number(r))>n&&(r=n):r=n;var i=t.length;r>i/2&&(r=i/2);for(var s=0;s<r;++s){var o=parseInt(t.substr(2*s,2),16);if(N(o))return s;e[a+s]=o}return s}function y(e,t,a,r){return q(R(t,e.length-a),e,a,r)}function v(e,t,a,r){return q(function(e){for(var t=[],a=0;a<e.length;++a)t.push(255&e.charCodeAt(a));return t}(t),e,a,r)}function _(e,t,a,r){return v(e,t,a,r)}function w(e,t,a,r){return q(B(t),e,a,r)}function x(e,t,a,r){return q(function(e,t){for(var a,r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)a=e.charCodeAt(s),r=a>>8,n=a%256,i.push(n),i.push(r);return i}(t,e.length-a),e,a,r)}function k(e,t,a){return 0===t&&a===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,a))}function S(e,t,a){a=Math.min(e.length,a);for(var r=[],n=t;n<a;){var i,s,o,c,l=e[n],u=null,d=l>239?4:l>223?3:l>191?2:1;if(n+d<=a)switch(d){case 1:l<128&&(u=l);break;case 2:128==(192&(i=e[n+1]))&&(c=(31&l)<<6|63&i)>127&&(u=c);break;case 3:i=e[n+1],s=e[n+2],128==(192&i)&&128==(192&s)&&(c=(15&l)<<12|(63&i)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:i=e[n+1],s=e[n+2],o=e[n+3],128==(192&i)&&128==(192&s)&&128==(192&o)&&(c=(15&l)<<18|(63&i)<<12|(63&s)<<6|63&o)>65535&&c<1114112&&(u=c)}null===u?(u=65533,d=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),n+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var a="",r=0;r<t;)a+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return a}(r)}function P(e,t,a){var r="";a=Math.min(e.length,a);for(var n=t;n<a;++n)r+=String.fromCharCode(127&e[n]);return r}function E(e,t,a){var r="";a=Math.min(e.length,a);for(var n=t;n<a;++n)r+=String.fromCharCode(e[n]);return r}function C(e,t,a){var r,n=e.length;(!t||t<0)&&(t=0),(!a||a<0||a>n)&&(a=n);for(var i="",s=t;s<a;++s)i+=(r=e[s])<16?"0"+r.toString(16):r.toString(16);return i}function A(e,t,a){for(var r=e.slice(t,a),n="",i=0;i<r.length;i+=2)n+=String.fromCharCode(r[i]+256*r[i+1]);return n}function M(e,t,a){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>a)throw new RangeError("Trying to access beyond buffer length")}function T(e,a,r,n,i,s){if(!t.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>i||a<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function j(e,t,a,r,n,i){if(a+r>e.length)throw new RangeError("Index out of range");if(a<0)throw new RangeError("Index out of range")}function O(e,t,a,r,i){return t=+t,a>>>=0,i||j(e,0,a,4),n.write(e,t,a,r,23,4),a+4}function D(e,t,a,r,i){return t=+t,a>>>=0,i||j(e,0,a,8),n.write(e,t,a,r,52,8),a+8}a.Buffer=t,a.SlowBuffer=function(e){return+e!=e&&(e=0),t.alloc(+e)},a.INSPECT_MAX_BYTES=50,a.kMaxLength=2147483647,t.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),t.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(t.prototype,"parent",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.buffer}}),Object.defineProperty(t.prototype,"offset",{enumerable:!0,get:function(){if(t.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),t.poolSize=8192,t.from=function(e,t,a){return s(e,t,a)},t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.alloc=function(e,t,a){return function(e,t,a){return o(e),e<=0?i(e):void 0!==t?"string"==typeof a?i(e).fill(t,a):i(e).fill(t):i(e)}(e,t,a)},t.allocUnsafe=function(e){return c(e)},t.allocUnsafeSlow=function(e){return c(e)},t.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==t.prototype},t.compare=function(e,a){if(L(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),L(a,Uint8Array)&&(a=t.from(a,a.offset,a.byteLength)),!t.isBuffer(e)||!t.isBuffer(a))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===a)return 0;for(var r=e.length,n=a.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==a[i]){r=e[i],n=a[i];break}return r<n?-1:n<r?1:0},t.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,a){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return t.alloc(0);var r;if(void 0===a)for(a=0,r=0;r<e.length;++r)a+=e[r].length;var n=t.allocUnsafe(a),i=0;for(r=0;r<e.length;++r){var s=e[r];if(L(s,Uint8Array)&&(s=t.from(s)),!t.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},t.byteLength=p,t.prototype._isBuffer=!0,t.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},t.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},t.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},t.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):h.apply(this,arguments)},t.prototype.toLocaleString=t.prototype.toString,t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===t.compare(this,e)},t.prototype.inspect=function(){var e="",t=a.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},t.prototype.compare=function(e,a,r,n,i){if(L(e,Uint8Array)&&(e=t.from(e,e.offset,e.byteLength)),!t.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+l(e));if(void 0===a&&(a=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),a<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&a>=r)return 0;if(n>=i)return-1;if(a>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(a>>>=0),c=Math.min(s,o),u=this.slice(n,i),d=e.slice(a,r),p=0;p<c;++p)if(u[p]!==d[p]){s=u[p],o=d[p];break}return s<o?-1:o<s?1:0},t.prototype.includes=function(e,t,a){return-1!==this.indexOf(e,t,a)},t.prototype.indexOf=function(e,t,a){return m(this,e,t,a,!0)},t.prototype.lastIndexOf=function(e,t,a){return m(this,e,t,a,!1)},t.prototype.write=function(e,t,a,r){if(void 0===t)r="utf8",a=this.length,t=0;else if(void 0===a&&"string"==typeof t)r=t,a=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(a)?(a>>>=0,void 0===r&&(r="utf8")):(r=a,a=void 0)}var n=this.length-t;if((void 0===a||a>n)&&(a=n),e.length>0&&(a<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return b(this,e,t,a);case"utf8":case"utf-8":return y(this,e,t,a);case"ascii":return v(this,e,t,a);case"latin1":case"binary":return _(this,e,t,a);case"base64":return w(this,e,t,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,a);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function(e,a){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(a=void 0===a?r:~~a)<0?(a+=r)<0&&(a=0):a>r&&(a=r),a<e&&(a=e);var n=this.subarray(e,a);return n.__proto__=t.prototype,n},t.prototype.readUIntLE=function(e,t,a){e>>>=0,t>>>=0,a||M(e,t,this.length);for(var r=this[e],n=1,i=0;++i<t&&(n*=256);)r+=this[e+i]*n;return r},t.prototype.readUIntBE=function(e,t,a){e>>>=0,t>>>=0,a||M(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},t.prototype.readUInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),this[e]},t.prototype.readUInt16LE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]|this[e+1]<<8},t.prototype.readUInt16BE=function(e,t){return e>>>=0,t||M(e,2,this.length),this[e]<<8|this[e+1]},t.prototype.readUInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},t.prototype.readUInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},t.prototype.readIntLE=function(e,t,a){e>>>=0,t>>>=0,a||M(e,t,this.length);for(var r=this[e],n=1,i=0;++i<t&&(n*=256);)r+=this[e+i]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},t.prototype.readIntBE=function(e,t,a){e>>>=0,t>>>=0,a||M(e,t,this.length);for(var r=t,n=1,i=this[e+--r];r>0&&(n*=256);)i+=this[e+--r]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},t.prototype.readInt8=function(e,t){return e>>>=0,t||M(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},t.prototype.readInt16LE=function(e,t){e>>>=0,t||M(e,2,this.length);var a=this[e]|this[e+1]<<8;return 32768&a?4294901760|a:a},t.prototype.readInt16BE=function(e,t){e>>>=0,t||M(e,2,this.length);var a=this[e+1]|this[e]<<8;return 32768&a?4294901760|a:a},t.prototype.readInt32LE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},t.prototype.readInt32BE=function(e,t){return e>>>=0,t||M(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},t.prototype.readFloatLE=function(e,t){return e>>>=0,t||M(e,4,this.length),n.read(this,e,!0,23,4)},t.prototype.readFloatBE=function(e,t){return e>>>=0,t||M(e,4,this.length),n.read(this,e,!1,23,4)},t.prototype.readDoubleLE=function(e,t){return e>>>=0,t||M(e,8,this.length),n.read(this,e,!0,52,8)},t.prototype.readDoubleBE=function(e,t){return e>>>=0,t||M(e,8,this.length),n.read(this,e,!1,52,8)},t.prototype.writeUIntLE=function(e,t,a,r){e=+e,t>>>=0,a>>>=0,r||T(this,e,t,a,Math.pow(2,8*a)-1,0);var n=1,i=0;for(this[t]=255&e;++i<a&&(n*=256);)this[t+i]=e/n&255;return t+a},t.prototype.writeUIntBE=function(e,t,a,r){e=+e,t>>>=0,a>>>=0,r||T(this,e,t,a,Math.pow(2,8*a)-1,0);var n=a-1,i=1;for(this[t+n]=255&e;--n>=0&&(i*=256);)this[t+n]=e/i&255;return t+a},t.prototype.writeUInt8=function(e,t,a){return e=+e,t>>>=0,a||T(this,e,t,1,255,0),this[t]=255&e,t+1},t.prototype.writeUInt16LE=function(e,t,a){return e=+e,t>>>=0,a||T(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeUInt16BE=function(e,t,a){return e=+e,t>>>=0,a||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeUInt32LE=function(e,t,a){return e=+e,t>>>=0,a||T(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},t.prototype.writeUInt32BE=function(e,t,a){return e=+e,t>>>=0,a||T(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeIntLE=function(e,t,a,r){if(e=+e,t>>>=0,!r){var n=Math.pow(2,8*a-1);T(this,e,t,a,n-1,-n)}var i=0,s=1,o=0;for(this[t]=255&e;++i<a&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+a},t.prototype.writeIntBE=function(e,t,a,r){if(e=+e,t>>>=0,!r){var n=Math.pow(2,8*a-1);T(this,e,t,a,n-1,-n)}var i=a-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+a},t.prototype.writeInt8=function(e,t,a){return e=+e,t>>>=0,a||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},t.prototype.writeInt16LE=function(e,t,a){return e=+e,t>>>=0,a||T(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},t.prototype.writeInt16BE=function(e,t,a){return e=+e,t>>>=0,a||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},t.prototype.writeInt32LE=function(e,t,a){return e=+e,t>>>=0,a||T(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},t.prototype.writeInt32BE=function(e,t,a){return e=+e,t>>>=0,a||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},t.prototype.writeFloatLE=function(e,t,a){return O(this,e,t,!0,a)},t.prototype.writeFloatBE=function(e,t,a){return O(this,e,t,!1,a)},t.prototype.writeDoubleLE=function(e,t,a){return D(this,e,t,!0,a)},t.prototype.writeDoubleBE=function(e,t,a){return D(this,e,t,!1,a)},t.prototype.copy=function(e,a,r,n){if(!t.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),a>=e.length&&(a=e.length),a||(a=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(a<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-a<n-r&&(n=e.length-a+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(a,r,n);else if(this===e&&r<a&&a<n)for(var s=i-1;s>=0;--s)e[s+a]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),a);return i},t.prototype.fill=function(e,a,r,n){if("string"==typeof e){if("string"==typeof a?(n=a,a=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!t.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e&&(e&=255);if(a<0||this.length<a||this.length<r)throw new RangeError("Out of range index");if(r<=a)return this;var s;if(a>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=a;s<r;++s)this[s]=e;else{var o=t.isBuffer(e)?e:t.from(e,n),c=o.length;if(0===c)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-a;++s)this[s+a]=o[s%c]}return this};var I=/[^+/0-9A-Za-z-_]/g;function R(e,t){var a;t=t||1/0;for(var r=e.length,n=null,i=[],s=0;s<r;++s){if((a=e.charCodeAt(s))>55295&&a<57344){if(!n){if(a>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}n=a;continue}if(a<56320){(t-=3)>-1&&i.push(239,191,189),n=a;continue}a=65536+(n-55296<<10|a-56320)}else n&&(t-=3)>-1&&i.push(239,191,189);if(n=null,a<128){if((t-=1)<0)break;i.push(a)}else if(a<2048){if((t-=2)<0)break;i.push(a>>6|192,63&a|128)}else if(a<65536){if((t-=3)<0)break;i.push(a>>12|224,a>>6&63|128,63&a|128)}else{if(!(a<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(a>>18|240,a>>12&63|128,a>>6&63|128,63&a|128)}}return i}function B(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(I,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,a,r){for(var n=0;n<r&&!(n+a>=t.length||n>=e.length);++n)t[n+a]=e[n];return n}function L(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function N(e){return e!=e}}).call(this,e("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:32}],4:[function(e,t,a){t.exports={elementNames:{altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},attributeNames:{definitionurl:"definitionURL",attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"}}},{}],5:[function(e,t,a){var r=e("domelementtype"),n=e("entities"),i=e("./foreignNames.json");i.elementNames.__proto__=null,i.attributeNames.__proto__=null;var s={__proto__:null,style:!0,script:!0,xmp:!0,iframe:!0,noembed:!0,noframes:!0,plaintext:!0,noscript:!0},o={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},c=t.exports=function(e,t){Array.isArray(e)||e.cheerio||(e=[e]),t=t||{};for(var a="",n=0;n<e.length;n++){var i=e[n];"root"===i.type?a+=c(i.children,t):r.isTag(i)?a+=u(i,t):i.type===r.Directive?a+=d(i):i.type===r.Comment?a+=f(i):i.type===r.CDATA?a+=h(i):a+=p(i,t)}return a},l=["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"];function u(e,t){"foreign"===t.xmlMode&&(e.name=i.elementNames[e.name]||e.name,e.parent&&l.indexOf(e.parent.name)>=0&&(t=Object.assign({},t,{xmlMode:!1}))),!t.xmlMode&&["svg","math"].indexOf(e.name)>=0&&(t=Object.assign({},t,{xmlMode:"foreign"}));var a="<"+e.name,r=function(e,t){if(e){var a,r="";for(var s in e)a=e[s],r&&(r+=" "),"foreign"===t.xmlMode&&(s=i.attributeNames[s]||s),r+=s,(null!==a&&""!==a||t.xmlMode)&&(r+='="'+(t.decodeEntities?n.encodeXML(a):a.replace(/\"/g,"&quot;"))+'"');return r}}(e.attribs,t);return r&&(a+=" "+r),!t.xmlMode||e.children&&0!==e.children.length?(a+=">",e.children&&(a+=c(e.children,t)),o[e.name]&&!t.xmlMode||(a+="</"+e.name+">")):a+="/>",a}function d(e){return"<"+e.data+">"}function p(e,t){var a=e.data||"";return!t.decodeEntities||e.parent&&e.parent.name in s||(a=n.encodeXML(a)),a}function h(e){return"<![CDATA["+e.children[0].data+"]]>"}function f(e){return"\x3c!--"+e.data+"--\x3e"}},{"./foreignNames.json":4,domelementtype:6,entities:20}],6:[function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.isTag=function(e){return"tag"===e.type||"script"===e.type||"style"===e.type},a.Text="text",a.Directive="directive",a.Comment="comment",a.Script="script",a.Style="style",a.Tag="tag",a.CDATA="cdata",a.Doctype="doctype"},{}],7:[function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var r=e("./node");a.Node=r.Node,a.Element=r.Element,a.DataNode=r.DataNode,a.NodeWithChildren=r.NodeWithChildren;var n=/\s+/g,i={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1},s=function(){function e(e,t,a){this.dom=[],this._done=!1,this._tagStack=[],this._lastNode=null,this._parser=null,"function"==typeof t&&(a=t,t=i),"object"===l(e)&&(t=e,e=void 0),this._callback=e||null,this._options=t||i,this._elementCB=a||null}return e.prototype.onparserinit=function(e){this._parser=e},e.prototype.onreset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._lastNode=null,this._parser=this._parser||null},e.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this._lastNode=null;var e=this._tagStack.pop();e&&this._parser&&(this._options.withEndIndices&&(e.endIndex=this._parser.endIndex),this._elementCB&&this._elementCB(e))},e.prototype.onopentag=function(e,t){var a=new r.Element(e,t);this.addNode(a),this._tagStack.push(a)},e.prototype.ontext=function(e){var t=this._options.normalizeWhitespace,a=this._lastNode;if(a&&"text"===a.type)t?a.data=(a.data+e).replace(n," "):a.data+=e;else{t&&(e=e.replace(n," "));var i=new r.DataNode("text",e);this.addNode(i),this._lastNode=i}},e.prototype.oncomment=function(e){if(this._lastNode&&"comment"===this._lastNode.type)this._lastNode.data+=e;else{var t=new r.DataNode("comment",e);this.addNode(t),this._lastNode=t}},e.prototype.oncommentend=function(){this._lastNode=null},e.prototype.oncdatastart=function(){var e=new r.DataNode("text",""),t=new r.NodeWithChildren("cdata",[e]);this.addNode(t),e.parent=t,this._lastNode=e},e.prototype.oncdataend=function(){this._lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var a=new r.ProcessingInstruction(e,t);this.addNode(a)},e.prototype.handleCallback=function(e){if("function"==typeof this._callback)this._callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this._tagStack[this._tagStack.length-1],a=t?t.children:this.dom,r=a[a.length-1];this._parser&&(this._options.withStartIndices&&(e.startIndex=this._parser.startIndex),this._options.withEndIndices&&(e.endIndex=this._parser.endIndex)),a.push(e),r&&(e.prev=r,r.next=e),t&&(e.parent=t),this._lastNode=null},e.prototype.addDataNode=function(e){this.addNode(e),this._lastNode=e},e}();a.DomHandler=s,a.default=s},{"./node":8}],8:[function(e,t,a){var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)});Object.defineProperty(a,"__esModule",{value:!0});var i=new Map([["tag",1],["script",1],["style",1],["directive",1],["text",3],["cdata",4],["comment",8]]),s=function(){function e(e){this.type=e,this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"nodeType",{get:function(){return i.get(this.type)||1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent||null},set:function(e){this.parent=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev||null},set:function(e){this.prev=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next||null},set:function(e){this.next=e},enumerable:!0,configurable:!0}),e}();a.Node=s;var o=function(e){function t(t,a){var r=e.call(this,t)||this;return r.data=a,r}return n(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!0,configurable:!0}),t}(s);a.DataNode=o;var c=function(e){function t(t,a){var r=e.call(this,"directive",a)||this;return r.name=t,r}return n(t,e),t}(o);a.ProcessingInstruction=c;var l=function(e){function t(t,a){var r=e.call(this,t)||this;return r.children=a,r}return n(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){return this.children[0]||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children[this.children.length-1]||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!0,configurable:!0}),t}(s);a.NodeWithChildren=l;var u=function(e){function t(t,a){var r=e.call(this,"script"===t?"script":"style"===t?"style":"tag",[])||this;return r.name=t,r.attribs=a,r.attribs=a,r}return n(t,e),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!0,configurable:!0}),t}(l);a.Element=u},{}],9:[function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var r=e("./tagtypes");function n(e,t){var a=[],n=[];if(e===t)return 0;for(var i=r.hasChildren(e)?e:e.parent;i;)a.unshift(i),i=i.parent;for(i=r.hasChildren(t)?t:t.parent;i;)n.unshift(i),i=i.parent;for(var s=0;a[s]===n[s];)s++;if(0===s)return 1;var o=a[s-1],c=o.children,l=a[s],u=n[s];return c.indexOf(l)>c.indexOf(u)?o===t?20:4:o===e?10:2}a.removeSubsets=function(e){for(var t=e.length;--t>=0;){var a=e[t];if(t>0&&e.lastIndexOf(a,t-1)>=0)e.splice(t,1);else for(var r=a.parent;r;r=r.parent)if(e.indexOf(r)>-1){e.splice(t,1);break}}return e},a.compareDocumentPosition=n,a.uniqueSort=function(e){return(e=e.filter((function(e,t,a){return!a.includes(e,t+1)}))).sort((function(e,t){var a=n(e,t);return 2&a?-1:4&a?1:0})),e}},{"./tagtypes":15}],10:[function(e,t,a){function r(e){for(var t in e)a.hasOwnProperty(t)||(a[t]=e[t])}Object.defineProperty(a,"__esModule",{value:!0}),r(e("./stringify")),r(e("./traversal")),r(e("./manipulation")),r(e("./querying")),r(e("./legacy")),r(e("./helpers")),r(e("./tagtypes"))},{"./helpers":9,"./legacy":11,"./manipulation":12,"./querying":13,"./stringify":14,"./tagtypes":15,"./traversal":16}],11:[function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var r=e("./querying"),n=e("./tagtypes");function i(e){return"text"===e.type}var s={tag_name:function(e){return"function"==typeof e?function(t){return n.isTag(t)&&e(t.name)}:"*"===e?n.isTag:function(t){return n.isTag(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return i(t)&&e(t.data)}:function(t){return i(t)&&t.data===e}}};function o(e,t){return"function"==typeof t?function(a){return n.isTag(a)&&t(a.attribs[e])}:function(a){return n.isTag(a)&&a.attribs[e]===t}}function c(e,t){return function(a){return e(a)||t(a)}}function l(e){var t=Object.keys(e).map((function(t){var a=e[t];return t in s?s[t](a):o(t,a)}));return 0===t.length?null:t.reduce(c)}a.testElement=function(e,t){var a=l(e);return!a||a(t)},a.getElements=function(e,t,a,n){void 0===n&&(n=1/0);var i=l(e);return i?r.filter(i,t,a,n):[]},a.getElementById=function(e,t,a){return void 0===a&&(a=!0),Array.isArray(t)||(t=[t]),r.findOne(o("id",e),t,a)},a.getElementsByTagName=function(e,t,a,n){return void 0===n&&(n=1/0),r.filter(s.tag_name(e),t,a,n)},a.getElementsByTagType=function(e,t,a,n){return void 0===a&&(a=!0),void 0===n&&(n=1/0),r.filter(s.tag_type(e),t,a,n)}},{"./querying":13,"./tagtypes":15}],12:[function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.removeElement=function(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}},a.replaceElement=function(e,t){var a=t.prev=e.prev;a&&(a.next=t);var r=t.next=e.next;r&&(r.prev=t);var n=t.parent=e.parent;if(n){var i=n.children;i[i.lastIndexOf(e)]=t}},a.appendChild=function(e,t){if(t.parent=e,1!==e.children.push(t)){var a=e.children[e.children.length-2];a.next=t,t.prev=a,t.next=null}},a.append=function(e,t){var a=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=a,r){if(r.prev=t,a){var n=a.children;n.splice(n.lastIndexOf(r),0,t)}}else a&&a.children.push(t)},a.prepend=function(e,t){var a=e.parent;if(a){var r=a.children;r.splice(r.lastIndexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=a,t.prev=e.prev,t.next=e,e.prev=t}},{}],13:[function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var r=e("./tagtypes");function n(e,t,a,i){for(var s=[],o=0,c=t;o<c.length;o++){var l=c[o];if(e(l)&&(s.push(l),--i<=0))break;if(a&&r.hasChildren(l)&&l.children.length>0){var u=n(e,l.children,a,i);if(s.push.apply(s,u),(i-=u.length)<=0)break}}return s}a.filter=function(e,t,a,r){return void 0===a&&(a=!0),void 0===r&&(r=1/0),Array.isArray(t)||(t=[t]),n(e,t,a,r)},a.find=n,a.findOneChild=function(e,t){return t.find(e)},a.findOne=function e(t,a,n){void 0===n&&(n=!0);for(var i=null,s=0;s<a.length&&!i;s++){var o=a[s];r.isTag(o)&&(t(o)?i=o:n&&o.children.length>0&&(i=e(t,o.children)))}return i},a.existsOne=function e(t,a){return a.some((function(a){return r.isTag(a)&&(t(a)||a.children.length>0&&e(t,a.children))}))},a.findAll=function(e,t){for(var a,n,i=[],s=t.filter(r.isTag);n=s.shift();){var o=null===(a=n.children)||void 0===a?void 0:a.filter(r.isTag);o&&o.length>0&&s.unshift.apply(s,o),e(n)&&i.push(n)}return i}},{"./tagtypes":15}],14:[function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});var n=e("./tagtypes"),i=r(e("dom-serializer"));function s(e,t){return i.default(e,t)}a.getOuterHTML=s,a.getInnerHTML=function(e,t){return n.hasChildren(e)?e.children.map((function(e){return s(e,t)})).join(""):""},a.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):n.isTag(t)?"br"===t.name?"\n":e(t.children):n.isCDATA(t)?e(t.children):n.isText(t)?t.data:""}},{"./tagtypes":15,"dom-serializer":5}],15:[function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var r=e("domelementtype");a.isTag=function(e){return r.isTag(e)},a.isCDATA=function(e){return"cdata"===e.type},a.isText=function(e){return"text"===e.type},a.isComment=function(e){return"comment"===e.type},a.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")}},{domelementtype:6}],16:[function(e,t,a){function r(e){return e.children||null}function n(e){return e.parent||null}Object.defineProperty(a,"__esModule",{value:!0}),a.getChildren=r,a.getParent=n,a.getSiblings=function(e){var t=n(e);return t?r(t):[e]},a.getAttributeValue=function(e,t){var a;return null===(a=e.attribs)||void 0===a?void 0:a[t]},a.hasAttrib=function(e,t){return!!e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},a.getName=function(e){return e.name}},{}],17:[function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});var n=r(e("./maps/entities.json")),i=r(e("./maps/legacy.json")),s=r(e("./maps/xml.json")),o=r(e("./decode_codepoint"));function c(e){var t=Object.keys(e).join("|"),a=u(e),r=new RegExp("&(?:"+(t+="|#[xX][\\da-fA-F]+|#\\d+")+");","g");return function(e){return String(e).replace(r,a)}}a.decodeXML=c(s.default),a.decodeHTMLStrict=c(n.default);var l=function(e,t){return e<t?1:-1};function u(e){return function(t){if("#"===t.charAt(1)){var a=t.charAt(2);return"X"===a||"x"===a?o.default(parseInt(t.substr(3),16)):o.default(parseInt(t.substr(2),10))}return e[t.slice(1,-1)]}}a.decodeHTML=function(){for(var e=Object.keys(i.default).sort(l),t=Object.keys(n.default).sort(l),a=0,r=0;a<t.length;a++)e[r]===t[a]?(t[a]+=";?",r++):t[a]+=";";var s=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),o=u(n.default);function c(e){return";"!==e.substr(-1)&&(e+=";"),o(e)}return function(e){return String(e).replace(s,c)}}()},{"./decode_codepoint":18,"./maps/entities.json":22,"./maps/legacy.json":23,"./maps/xml.json":24}],18:[function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});var n=r(e("./maps/decode.json"));a.default=function(e){if(e>=55296&&e<=57343||e>1114111)return"�";e in n.default&&(e=n.default[e]);var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)}},{"./maps/decode.json":21}],19:[function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});var n=c(r(e("./maps/xml.json")).default),i=l(n);a.encodeXML=p(n,i);var s=c(r(e("./maps/entities.json")).default),o=l(s);function c(e){return Object.keys(e).sort().reduce((function(t,a){return t[e[a]]="&"+a+";",t}),{})}function l(e){for(var t=[],a=[],r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];1===i.length?t.push("\\"+i):a.push(i)}t.sort();for(var s=0;s<t.length-1;s++){for(var o=s;o<t.length-1&&t[o].charCodeAt(1)+1===t[o+1].charCodeAt(1);)o+=1;var c=1+o-s;c<3||t.splice(s,c,t[s]+"-"+t[o])}return a.unshift("["+t.join("")+"]"),new RegExp(a.join("|"),"g")}a.encodeHTML=p(s,o);var u=/(?:[\x80-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g;function d(e){return"&#x"+e.codePointAt(0).toString(16).toUpperCase()+";"}function p(e,t){return function(a){return a.replace(t,(function(t){return e[t]})).replace(u,d)}}var h=l(n);a.escape=function(e){return e.replace(h,d).replace(u,d)}},{"./maps/entities.json":22,"./maps/xml.json":24}],20:[function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var r=e("./decode"),n=e("./encode");a.decode=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTML)(e)},a.decodeStrict=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTMLStrict)(e)},a.encode=function(e,t){return(!t||t<=0?n.encodeXML:n.encodeHTML)(e)};var i=e("./encode");a.encodeXML=i.encodeXML,a.encodeHTML=i.encodeHTML,a.escape=i.escape,a.encodeHTML4=i.encodeHTML,a.encodeHTML5=i.encodeHTML;var s=e("./decode");a.decodeXML=s.decodeXML,a.decodeHTML=s.decodeHTML,a.decodeHTMLStrict=s.decodeHTMLStrict,a.decodeHTML4=s.decodeHTML,a.decodeHTML5=s.decodeHTML,a.decodeHTML4Strict=s.decodeHTMLStrict,a.decodeHTML5Strict=s.decodeHTMLStrict,a.decodeXMLStrict=s.decodeXML},{"./decode":17,"./encode":19}],21:[function(e,t,a){t.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}},{}],22:[function(e,t,a){t.exports={Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",amp:"&",AMP:"&",andand:"⩕",And:"⩓",and:"∧",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angmsd:"∡",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",apacir:"⩯",ap:"≈",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",barwed:"⌅",Barwed:"⌆",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",because:"∵",Because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxdl:"┐",boxdL:"╕",boxDl:"╖",boxDL:"╗",boxdr:"┌",boxdR:"╒",boxDr:"╓",boxDR:"╔",boxh:"─",boxH:"═",boxhd:"┬",boxHd:"╤",boxhD:"╥",boxHD:"╦",boxhu:"┴",boxHu:"╧",boxhU:"╨",boxHU:"╩",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxul:"┘",boxuL:"╛",boxUl:"╜",boxUL:"╝",boxur:"└",boxuR:"╘",boxUr:"╙",boxUR:"╚",boxv:"│",boxV:"║",boxvh:"┼",boxvH:"╪",boxVh:"╫",boxVH:"╬",boxvl:"┤",boxvL:"╡",boxVl:"╢",boxVL:"╣",boxvr:"├",boxvR:"╞",boxVr:"╟",boxVR:"╠",bprime:"‵",breve:"˘",Breve:"˘",brvbar:"¦",bscr:"𝒷",Bscr:"ℬ",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsolb:"⧅",bsol:"\\",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",capand:"⩄",capbrcup:"⩉",capcap:"⩋",cap:"∩",Cap:"⋒",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",centerdot:"·",CenterDot:"·",cfr:"𝔠",Cfr:"ℭ",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cir:"○",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",colon:":",Colon:"∷",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",conint:"∮",Conint:"∯",ContourIntegral:"∮",copf:"𝕔",Copf:"ℂ",coprod:"∐",Coproduct:"∐",copy:"©",COPY:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",cross:"✗",Cross:"⨯",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",cupbrcap:"⩈",cupcap:"⩆",CupCap:"≍",cup:"∪",Cup:"⋓",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",dagger:"†",Dagger:"‡",daleth:"ℸ",darr:"↓",Darr:"↡",dArr:"⇓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",ddagger:"‡",ddarr:"⇊",DD:"ⅅ",dd:"ⅆ",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",diamond:"⋄",Diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrowBar:"⤓",downarrow:"↓",DownArrow:"↓",Downarrow:"⇓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVectorBar:"⥖",DownLeftVector:"↽",DownRightTeeVector:"⥟",DownRightVectorBar:"⥗",DownRightVector:"⇁",DownTeeArrow:"↧",DownTee:"⊤",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",Ecirc:"Ê",ecirc:"ê",ecir:"≖",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",edot:"ė",eDot:"≑",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp13:" ",emsp14:" ",emsp:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",escr:"ℯ",Escr:"ℰ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",exponentiale:"ⅇ",ExponentialE:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",forall:"∀",ForAll:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",fscr:"𝒻",Fscr:"ℱ",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",ge:"≥",gE:"≧",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",gescc:"⪩",ges:"⩾",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",gg:"≫",Gg:"⋙",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gla:"⪥",gl:"≷",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gne:"⪈",gnE:"≩",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",gtcc:"⪧",gtcir:"⩺",gt:">",GT:">",Gt:"≫",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",harrcir:"⥈",harr:"↔",hArr:"⇔",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",hfr:"𝔥",Hfr:"ℌ",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",hopf:"𝕙",Hopf:"ℍ",horbar:"―",HorizontalLine:"─",hscr:"𝒽",Hscr:"ℋ",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",ifr:"𝔦",Ifr:"ℑ",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",Im:"ℑ",imof:"⊷",imped:"Ƶ",Implies:"⇒",incare:"℅",in:"∈",infin:"∞",infintie:"⧝",inodot:"ı",intcal:"⊺",int:"∫",Int:"∬",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",iscr:"𝒾",Iscr:"ℐ",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",lang:"⟨",Lang:"⟪",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",larrb:"⇤",larrbfs:"⤟",larr:"←",Larr:"↞",lArr:"⇐",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",latail:"⤙",lAtail:"⤛",lat:"⪫",late:"⪭",lates:"⪭︀",lbarr:"⤌",lBarr:"⤎",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",le:"≤",lE:"≦",LeftAngleBracket:"⟨",LeftArrowBar:"⇤",leftarrow:"←",LeftArrow:"←",Leftarrow:"⇐",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVectorBar:"⥙",LeftDownVector:"⇃",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",leftrightarrow:"↔",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTeeArrow:"↤",LeftTee:"⊣",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangleBar:"⧏",LeftTriangle:"⊲",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVectorBar:"⥘",LeftUpVector:"↿",LeftVectorBar:"⥒",LeftVector:"↼",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",lescc:"⪨",les:"⩽",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",llarr:"⇇",ll:"≪",Ll:"⋘",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoustache:"⎰",lmoust:"⎰",lnap:"⪉",lnapprox:"⪉",lne:"⪇",lnE:"≨",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",longleftarrow:"⟵",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftrightarrow:"⟷",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longmapsto:"⟼",longrightarrow:"⟶",LongRightArrow:"⟶",Longrightarrow:"⟹",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",lscr:"𝓁",Lscr:"ℒ",lsh:"↰",Lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",ltcc:"⪦",ltcir:"⩹",lt:"<",LT:"<",Lt:"≪",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",midast:"*",midcir:"⫰",mid:"∣",middot:"·",minusb:"⊟",minus:"−",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",mscr:"𝓂",Mscr:"ℳ",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natural:"♮",naturals:"ℕ",natur:"♮",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",nearhk:"⤤",nearr:"↗",neArr:"⇗",nearrow:"↗",ne:"≠",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nharr:"↮",nhArr:"⇎",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlarr:"↚",nlArr:"⇍",nldr:"‥",nlE:"≦̸",nle:"≰",nleftarrow:"↚",nLeftarrow:"⇍",nleftrightarrow:"↮",nLeftrightarrow:"⇎",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",nopf:"𝕟",Nopf:"ℕ",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangleBar:"⧏̸",NotLeftTriangle:"⋪",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangleBar:"⧐̸",NotRightTriangle:"⋫",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",nparallel:"∦",npar:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",nprec:"⊀",npreceq:"⪯̸",npre:"⪯̸",nrarrc:"⤳̸",nrarr:"↛",nrArr:"⇏",nrarrw:"↝̸",nrightarrow:"↛",nRightarrow:"⇏",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nvdash:"⊬",nvDash:"⊭",nVdash:"⊮",nVDash:"⊯",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwarr:"↖",nwArr:"⇖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",Ocirc:"Ô",ocirc:"ô",ocir:"⊚",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",orarr:"↻",Or:"⩔",or:"∨",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",otimesas:"⨶",Otimes:"⨷",otimes:"⊗",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",para:"¶",parallel:"∥",par:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plus:"+",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",popf:"𝕡",Popf:"ℙ",pound:"£",prap:"⪷",Pr:"⪻",pr:"≺",prcue:"≼",precapprox:"⪷",prec:"≺",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",pre:"⪯",prE:"⪳",precsim:"≾",prime:"′",Prime:"″",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportional:"∝",Proportion:"∷",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",qopf:"𝕢",Qopf:"ℚ",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",quot:'"',QUOT:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",rang:"⟩",Rang:"⟫",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarr:"→",Rarr:"↠",rArr:"⇒",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",ratail:"⤚",rAtail:"⤜",ratio:"∶",rationals:"ℚ",rbarr:"⤍",rBarr:"⤏",RBarr:"⤐",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",Re:"ℜ",rect:"▭",reg:"®",REG:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",rfr:"𝔯",Rfr:"ℜ",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrowBar:"⇥",rightarrow:"→",RightArrow:"→",Rightarrow:"⇒",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVectorBar:"⥕",RightDownVector:"⇂",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTeeArrow:"↦",RightTee:"⊢",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangleBar:"⧐",RightTriangle:"⊳",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVectorBar:"⥔",RightUpVector:"↾",RightVectorBar:"⥓",RightVector:"⇀",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoustache:"⎱",rmoust:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",ropf:"𝕣",Ropf:"ℝ",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",rscr:"𝓇",Rscr:"ℛ",rsh:"↱",Rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",scap:"⪸",Scaron:"Š",scaron:"š",Sc:"⪼",sc:"≻",sccue:"≽",sce:"⪰",scE:"⪴",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdotb:"⊡",sdot:"⋅",sdote:"⩦",searhk:"⤥",searr:"↘",seArr:"⇘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",solbar:"⌿",solb:"⧄",sol:"/",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",square:"□",Square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squ:"□",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",sub:"⊂",Sub:"⋐",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",subset:"⊂",Subset:"⋐",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succapprox:"⪸",succ:"≻",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",sum:"∑",Sum:"∑",sung:"♪",sup1:"¹",sup2:"²",sup3:"³",sup:"⊃",Sup:"⋑",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",supset:"⊃",Supset:"⋑",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swarr:"↙",swArr:"⇙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",therefore:"∴",Therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",ThinSpace:" ",thinsp:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",tilde:"˜",Tilde:"∼",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",timesbar:"⨱",timesb:"⊠",times:"×",timesd:"⨰",tint:"∭",toea:"⤨",topbot:"⌶",topcir:"⫱",top:"⊤",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",trade:"™",TRADE:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",uarr:"↑",Uarr:"↟",uArr:"⇑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrowBar:"⤒",uparrow:"↑",UpArrow:"↑",Uparrow:"⇑",UpArrowDownArrow:"⇅",updownarrow:"↕",UpDownArrow:"↕",Updownarrow:"⇕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",upsi:"υ",Upsi:"ϒ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTeeArrow:"↥",UpTee:"⊥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",varr:"↕",vArr:"⇕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",vBar:"⫨",Vbar:"⫫",vBarv:"⫩",Vcy:"В",vcy:"в",vdash:"⊢",vDash:"⊨",Vdash:"⊩",VDash:"⊫",Vdashl:"⫦",veebar:"⊻",vee:"∨",Vee:"⋁",veeeq:"≚",vellip:"⋮",verbar:"|",Verbar:"‖",vert:"|",Vert:"‖",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",wedge:"∧",Wedge:"⋀",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xharr:"⟷",xhArr:"⟺",Xi:"Ξ",xi:"ξ",xlarr:"⟵",xlArr:"⟸",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrarr:"⟶",xrArr:"⟹",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",yuml:"ÿ",Yuml:"Ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",zfr:"𝔷",Zfr:"ℨ",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",zopf:"𝕫",Zopf:"ℤ",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}},{}],23:[function(e,t,a){t.exports={Aacute:"Á",aacute:"á",Acirc:"Â",acirc:"â",acute:"´",AElig:"Æ",aelig:"æ",Agrave:"À",agrave:"à",amp:"&",AMP:"&",Aring:"Å",aring:"å",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",brvbar:"¦",Ccedil:"Ç",ccedil:"ç",cedil:"¸",cent:"¢",copy:"©",COPY:"©",curren:"¤",deg:"°",divide:"÷",Eacute:"É",eacute:"é",Ecirc:"Ê",ecirc:"ê",Egrave:"È",egrave:"è",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",frac12:"½",frac14:"¼",frac34:"¾",gt:">",GT:">",Iacute:"Í",iacute:"í",Icirc:"Î",icirc:"î",iexcl:"¡",Igrave:"Ì",igrave:"ì",iquest:"¿",Iuml:"Ï",iuml:"ï",laquo:"«",lt:"<",LT:"<",macr:"¯",micro:"µ",middot:"·",nbsp:" ",not:"¬",Ntilde:"Ñ",ntilde:"ñ",Oacute:"Ó",oacute:"ó",Ocirc:"Ô",ocirc:"ô",Ograve:"Ò",ograve:"ò",ordf:"ª",ordm:"º",Oslash:"Ø",oslash:"ø",Otilde:"Õ",otilde:"õ",Ouml:"Ö",ouml:"ö",para:"¶",plusmn:"±",pound:"£",quot:'"',QUOT:'"',raquo:"»",reg:"®",REG:"®",sect:"§",shy:"­",sup1:"¹",sup2:"²",sup3:"³",szlig:"ß",THORN:"Þ",thorn:"þ",times:"×",Uacute:"Ú",uacute:"ú",Ucirc:"Û",ucirc:"û",Ugrave:"Ù",ugrave:"ù",uml:"¨",Uuml:"Ü",uuml:"ü",Yacute:"Ý",yacute:"ý",yen:"¥",yuml:"ÿ"}},{}],24:[function(e,t,a){t.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}},{}],25:[function(e,t,a){var r=Object.create||function(e){var t=function(){};return t.prototype=e,new t},n=Object.keys||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return a},i=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function s(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0;var o,c=10;try{var u={};Object.defineProperty&&Object.defineProperty(u,"x",{value:0}),o=0===u.x}catch(e){o=!1}function d(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function p(e,t,a){if(t)e.call(a);else for(var r=e.length,n=x(e,r),i=0;i<r;++i)n[i].call(a)}function h(e,t,a,r){if(t)e.call(a,r);else for(var n=e.length,i=x(e,n),s=0;s<n;++s)i[s].call(a,r)}function f(e,t,a,r,n){if(t)e.call(a,r,n);else for(var i=e.length,s=x(e,i),o=0;o<i;++o)s[o].call(a,r,n)}function m(e,t,a,r,n,i){if(t)e.call(a,r,n,i);else for(var s=e.length,o=x(e,s),c=0;c<s;++c)o[c].call(a,r,n,i)}function g(e,t,a,r){if(t)e.apply(a,r);else for(var n=e.length,i=x(e,n),s=0;s<n;++s)i[s].apply(a,r)}function b(e,t,a,n){var i,s,o;if("function"!=typeof a)throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,a.listener?a.listener:a),s=e._events),o=s[t]):(s=e._events=r(null),e._eventsCount=0),o){if("function"==typeof o?o=s[t]=n?[a,o]:[o,a]:n?o.unshift(a):o.push(a),!o.warned&&(i=d(e))&&i>0&&o.length>i){o.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+o.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=o.length,"object"===("undefined"==typeof console?"undefined":l(console))&&console.warn&&console.warn("%s: %s",c.name,c.message)}}else o=s[t]=a,++e._eventsCount;return e}function y(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function v(e,t,a){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:a},n=i.call(y,r);return n.listener=a,r.wrapFn=n,n}function _(e,t,a){var r=e._events;if(!r)return[];var n=r[t];return n?"function"==typeof n?a?[n.listener||n]:[n]:a?function(e){for(var t=new Array(e.length),a=0;a<t.length;++a)t[a]=e[a].listener||e[a];return t}(n):x(n,n.length):[]}function w(e){var t=this._events;if(t){var a=t[e];if("function"==typeof a)return 1;if(a)return a.length}return 0}function x(e,t){for(var a=new Array(t),r=0;r<t;++r)a[r]=e[r];return a}o?Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');c=e}}):s.defaultMaxListeners=c,s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return d(this)},s.prototype.emit=function(e){var t,a,r,n,i,s,o="error"===e;if(s=this._events)o=o&&null==s.error;else if(!o)return!1;if(o){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var c=new Error('Unhandled "error" event. ('+t+")");throw c.context=t,c}if(!(a=s[e]))return!1;var l="function"==typeof a;switch(r=arguments.length){case 1:p(a,l,this);break;case 2:h(a,l,this,arguments[1]);break;case 3:f(a,l,this,arguments[1],arguments[2]);break;case 4:m(a,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(n=new Array(r-1),i=1;i<r;i++)n[i-1]=arguments[i];g(a,l,this,n)}return!0},s.prototype.addListener=function(e,t){return b(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return b(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,v(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,v(this,e,t)),this},s.prototype.removeListener=function(e,t){var a,n,i,s,o;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(a=n[e]))return this;if(a===t||a.listener===t)0==--this._eventsCount?this._events=r(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,a.listener||t));else if("function"!=typeof a){for(i=-1,s=a.length-1;s>=0;s--)if(a[s]===t||a[s].listener===t){o=a[s].listener,i=s;break}if(i<0)return this;0===i?a.shift():function(e,t){for(var a=t,r=a+1,n=e.length;r<n;a+=1,r+=1)e[a]=e[r];e.pop()}(a,i),1===a.length&&(n[e]=a[0]),n.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.removeAllListeners=function(e){var t,a,i;if(!(a=this._events))return this;if(!a.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):a[e]&&(0==--this._eventsCount?this._events=r(null):delete a[e]),this;if(0===arguments.length){var s,o=n(a);for(i=0;i<o.length;++i)"removeListener"!==(s=o[i])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(t=a[e]))this.removeListener(e,t);else if(t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},s.prototype.listeners=function(e){return _(this,e,!0)},s.prototype.rawListeners=function(e){return _(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):w.call(e,t)},s.prototype.listenerCount=w,s.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],26:[function(e,t,a){var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});var s=function(e){function t(t){void 0===t&&(t={});var a=e.call(this,(function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];a.events.push([e].concat(r)),a._cbs[e]&&(t=a._cbs)[e].apply(t,r)}))||this;return a._cbs=t,a.events=[],a}return n(t,e),t.prototype.onreset=function(){this.events=[],this._cbs.onreset&&this._cbs.onreset()},t.prototype.restart=function(){var e;this._cbs.onreset&&this._cbs.onreset();for(var t=0;t<this.events.length;t++){var a=this.events[t],r=a[0],n=a.slice(1);this._cbs[r]&&(e=this._cbs)[r].apply(e,n)}},t}(i(e("./MultiplexHandler")).default);a.CollectingHandler=s},{"./MultiplexHandler":28}],27:[function(e,t,a){var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(a,"__esModule",{value:!0});var o=i(e("domhandler")),c=s(e("domutils")),u=e("./Parser"),d=function(e){function t(t,a){return"object"===l(t)&&null!==t&&(a=t=void 0),e.call(this,t,a)||this}return n(t,e),t.prototype.onend=function(){var e={},t=h(b,this.dom);if(t)if("feed"===t.name){var a=t.children;e.type="atom",g(e,"id","id",a),g(e,"title","title",a);var r=m("href",h("link",a));r&&(e.link=r),g(e,"description","subtitle",a),(n=f("updated",a))&&(e.updated=new Date(n)),g(e,"author","email",a,!0),e.items=p("entry",a).map((function(e){var t={},a=e.children;g(t,"id","id",a),g(t,"title","title",a);var r=m("href",h("link",a));r&&(t.link=r);var n=f("summary",a)||f("content",a);n&&(t.description=n);var i=f("updated",a);return i&&(t.pubDate=new Date(i)),t}))}else{var n;a=h("channel",t.children).children,e.type=t.name.substr(0,3),e.id="",g(e,"title","title",a),g(e,"link","link",a),g(e,"description","description",a),(n=f("lastBuildDate",a))&&(e.updated=new Date(n)),g(e,"author","managingEditor",a,!0),e.items=p("item",t.children).map((function(e){var t={},a=e.children;g(t,"id","guid",a),g(t,"title","title",a),g(t,"link","link",a),g(t,"description","description",a);var r=f("pubDate",a);return r&&(t.pubDate=new Date(r)),t}))}this.feed=e,this.handleCallback(t?null:Error("couldn't find root of feed"))},t}(o.default);function p(e,t){return c.getElementsByTagName(e,t,!0)}function h(e,t){return c.getElementsByTagName(e,t,!0,1)[0]}function f(e,t,a){return void 0===a&&(a=!1),c.getText(c.getElementsByTagName(e,t,a,1)).trim()}function m(e,t){return t?t.attribs[e]:null}function g(e,t,a,r,n){void 0===n&&(n=!1);var i=f(a,r,n);i&&(e[t]=i)}function b(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}a.FeedHandler=d;var y={xmlMode:!0};a.parseFeed=function(e,t){void 0===t&&(t=y);var a=new d(t);return new u.Parser(a,t).end(e),a.feed}},{"./Parser":29,domhandler:7,domutils:10}],28:[function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e){this._func=e}return e.prototype.onattribute=function(e,t){this._func("onattribute",e,t)},e.prototype.oncdatastart=function(){this._func("oncdatastart")},e.prototype.oncdataend=function(){this._func("oncdataend")},e.prototype.ontext=function(e){this._func("ontext",e)},e.prototype.onprocessinginstruction=function(e,t){this._func("onprocessinginstruction",e,t)},e.prototype.oncomment=function(e){this._func("oncomment",e)},e.prototype.oncommentend=function(){this._func("oncommentend")},e.prototype.onclosetag=function(e){this._func("onclosetag",e)},e.prototype.onopentag=function(e,t){this._func("onopentag",e,t)},e.prototype.onopentagname=function(e){this._func("onopentagname",e)},e.prototype.onerror=function(e){this._func("onerror",e)},e.prototype.onend=function(){this._func("onend")},e.prototype.onparserinit=function(e){this._func("onparserinit",e)},e.prototype.onreset=function(){this._func("onreset")},e}();a.default=r},{}],29:[function(e,t,a){var r,n=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});var s=i(e("./Tokenizer")),o=e("events"),c=new Set(["input","option","optgroup","select","button","datalist","textarea"]),l=new Set(["p"]),u={tr:new Set(["tr","th","td"]),th:new Set(["th"]),td:new Set(["thead","th","td"]),body:new Set(["head","link","script"]),li:new Set(["li"]),p:l,h1:l,h2:l,h3:l,h4:l,h5:l,h6:l,select:c,input:c,output:c,button:c,datalist:c,textarea:c,option:new Set(["option"]),optgroup:new Set(["optgroup","option"]),dd:new Set(["dt","dd"]),dt:new Set(["dt","dd"]),address:l,article:l,aside:l,blockquote:l,details:l,div:l,dl:l,fieldset:l,figcaption:l,figure:l,footer:l,form:l,header:l,hr:l,main:l,nav:l,ol:l,pre:l,section:l,table:l,ul:l,rt:new Set(["rt","rp"]),rp:new Set(["rt","rp"]),tbody:new Set(["thead","tbody"]),tfoot:new Set(["thead","tbody"])},d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),p=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),f=/\s|\//,m=function(e){function t(a,r){var n=e.call(this)||this;return n._tagname="",n._attribname="",n._attribvalue="",n._attribs=null,n._stack=[],n._foreignContext=[],n.startIndex=0,n.endIndex=null,n.parseChunk=t.prototype.write,n.done=t.prototype.end,n._options=r||{},n._cbs=a||{},n._tagname="",n._attribname="",n._attribvalue="",n._attribs=null,n._stack=[],n._foreignContext=[],n.startIndex=0,n.endIndex=null,n._lowerCaseTagNames="lowerCaseTags"in n._options?!!n._options.lowerCaseTags:!n._options.xmlMode,n._lowerCaseAttributeNames="lowerCaseAttributeNames"in n._options?!!n._options.lowerCaseAttributeNames:!n._options.xmlMode,n._tokenizer=new(n._options.Tokenizer||s.default)(n._options,n),n._cbs.onparserinit&&n._cbs.onparserinit(n),n}return n(t,e),t.prototype._updatePosition=function(e){null===this.endIndex?this._tokenizer._sectionStart<=e?this.startIndex=0:this.startIndex=this._tokenizer._sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this._tokenizer.getAbsoluteIndex()},t.prototype.ontext=function(e){this._updatePosition(1),this.endIndex--,this._cbs.ontext&&this._cbs.ontext(e)},t.prototype.onopentagname=function(e){if(this._lowerCaseTagNames&&(e=e.toLowerCase()),this._tagname=e,!this._options.xmlMode&&Object.prototype.hasOwnProperty.call(u,e))for(var t=void 0;u[e].has(t=this._stack[this._stack.length-1]);this.onclosetag(t));!this._options.xmlMode&&d.has(e)||(this._stack.push(e),p.has(e)?this._foreignContext.push(!0):h.has(e)&&this._foreignContext.push(!1)),this._cbs.onopentagname&&this._cbs.onopentagname(e),this._cbs.onopentag&&(this._attribs={})},t.prototype.onopentagend=function(){this._updatePosition(1),this._attribs&&(this._cbs.onopentag&&this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),!this._options.xmlMode&&this._cbs.onclosetag&&d.has(this._tagname)&&this._cbs.onclosetag(this._tagname),this._tagname=""},t.prototype.onclosetag=function(e){if(this._updatePosition(1),this._lowerCaseTagNames&&(e=e.toLowerCase()),(p.has(e)||h.has(e))&&this._foreignContext.pop(),!this._stack.length||!this._options.xmlMode&&d.has(e))this._options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this._closeCurrentTag());else{var t=this._stack.lastIndexOf(e);if(-1!==t)if(this._cbs.onclosetag)for(t=this._stack.length-t;t--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=t;else"p"!==e||this._options.xmlMode||(this.onopentagname(e),this._closeCurrentTag())}},t.prototype.onselfclosingtag=function(){this._options.xmlMode||this._options.recognizeSelfClosing||this._foreignContext[this._foreignContext.length-1]?this._closeCurrentTag():this.onopentagend()},t.prototype._closeCurrentTag=function(){var e=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===e&&(this._cbs.onclosetag&&this._cbs.onclosetag(e),this._stack.pop())},t.prototype.onattribname=function(e){this._lowerCaseAttributeNames&&(e=e.toLowerCase()),this._attribname=e},t.prototype.onattribdata=function(e){this._attribvalue+=e},t.prototype.onattribend=function(){this._cbs.onattribute&&this._cbs.onattribute(this._attribname,this._attribvalue),this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue=""},t.prototype._getInstructionName=function(e){var t=e.search(f),a=t<0?e:e.substr(0,t);return this._lowerCaseTagNames&&(a=a.toLowerCase()),a},t.prototype.ondeclaration=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("!"+t,"!"+e)}},t.prototype.onprocessinginstruction=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("?"+t,"?"+e)}},t.prototype.oncomment=function(e){this._updatePosition(4),this._cbs.oncomment&&this._cbs.oncomment(e),this._cbs.oncommentend&&this._cbs.oncommentend()},t.prototype.oncdata=function(e){this._updatePosition(1),this._options.xmlMode||this._options.recognizeCDATA?(this._cbs.oncdatastart&&this._cbs.oncdatastart(),this._cbs.ontext&&this._cbs.ontext(e),this._cbs.oncdataend&&this._cbs.oncdataend()):this.oncomment("[CDATA["+e+"]]")},t.prototype.onerror=function(e){this._cbs.onerror&&this._cbs.onerror(e)},t.prototype.onend=function(){if(this._cbs.onclosetag)for(var e=this._stack.length;e>0;this._cbs.onclosetag(this._stack[--e]));this._cbs.onend&&this._cbs.onend()},t.prototype.reset=function(){this._cbs.onreset&&this._cbs.onreset(),this._tokenizer.reset(),this._tagname="",this._attribname="",this._attribs=null,this._stack=[],this._cbs.onparserinit&&this._cbs.onparserinit(this)},t.prototype.parseComplete=function(e){this.reset(),this.end(e)},t.prototype.write=function(e){this._tokenizer.write(e)},t.prototype.end=function(e){this._tokenizer.end(e)},t.prototype.pause=function(){this._tokenizer.pause()},t.prototype.resume=function(){this._tokenizer.resume()},t}(o.EventEmitter);a.Parser=m},{"./Tokenizer":30,events:25}],30:[function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0});var n=r(e("entities/lib/decode_codepoint")),i=r(e("entities/lib/maps/entities.json")),s=r(e("entities/lib/maps/legacy.json")),o=r(e("entities/lib/maps/xml.json"));function c(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function l(e,t,a){var r=e.toLowerCase();return e===r?function(e,n){n===r?e._state=t:(e._state=a,e._index--)}:function(n,i){i===r||i===e?n._state=t:(n._state=a,n._index--)}}function u(e,t){var a=e.toLowerCase();return function(r,n){n===a||n===e?r._state=t:(r._state=3,r._index--)}}var d=l("C",23,16),p=l("D",24,16),h=l("A",25,16),f=l("T",26,16),m=l("A",27,16),g=u("R",34),b=u("I",35),y=u("P",36),v=u("T",37),_=l("R",39,1),w=l("I",40,1),x=l("P",41,1),k=l("T",42,1),S=u("Y",44),P=u("L",45),E=u("E",46),C=l("Y",48,1),A=l("L",49,1),M=l("E",50,1),T=l("#",52,53),j=l("X",55,54),O=function(){function e(e,t){this._state=1,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=1,this._special=1,this._running=!0,this._ended=!1,this._cbs=t,this._xmlMode=!(!e||!e.xmlMode),this._decodeEntities=!(!e||!e.decodeEntities)}return e.prototype.reset=function(){this._state=1,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=1,this._special=1,this._running=!0,this._ended=!1},e.prototype._stateText=function(e){"<"===e?(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._state=2,this._sectionStart=this._index):this._decodeEntities&&1===this._special&&"&"===e&&(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._baseState=1,this._state=51,this._sectionStart=this._index)},e.prototype._stateBeforeTagName=function(e){"/"===e?this._state=5:"<"===e?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===e||1!==this._special||c(e)?this._state=1:"!"===e?(this._state=15,this._sectionStart=this._index+1):"?"===e?(this._state=17,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==e&&"S"!==e?3:31,this._sectionStart=this._index)},e.prototype._stateInTagName=function(e){("/"===e||">"===e||c(e))&&(this._emitToken("onopentagname"),this._state=8,this._index--)},e.prototype._stateBeforeClosingTagName=function(e){c(e)||(">"===e?this._state=1:1!==this._special?"s"===e||"S"===e?this._state=32:(this._state=1,this._index--):(this._state=6,this._sectionStart=this._index))},e.prototype._stateInClosingTagName=function(e){(">"===e||c(e))&&(this._emitToken("onclosetag"),this._state=7,this._index--)},e.prototype._stateAfterClosingTagName=function(e){">"===e&&(this._state=1,this._sectionStart=this._index+1)},e.prototype._stateBeforeAttributeName=function(e){">"===e?(this._cbs.onopentagend(),this._state=1,this._sectionStart=this._index+1):"/"===e?this._state=4:c(e)||(this._state=9,this._sectionStart=this._index)},e.prototype._stateInSelfClosingTag=function(e){">"===e?(this._cbs.onselfclosingtag(),this._state=1,this._sectionStart=this._index+1):c(e)||(this._state=8,this._index--)},e.prototype._stateInAttributeName=function(e){("="===e||"/"===e||">"===e||c(e))&&(this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=10,this._index--)},e.prototype._stateAfterAttributeName=function(e){"="===e?this._state=11:"/"===e||">"===e?(this._cbs.onattribend(),this._state=8,this._index--):c(e)||(this._cbs.onattribend(),this._state=9,this._sectionStart=this._index)},e.prototype._stateBeforeAttributeValue=function(e){'"'===e?(this._state=12,this._sectionStart=this._index+1):"'"===e?(this._state=13,this._sectionStart=this._index+1):c(e)||(this._state=14,this._sectionStart=this._index,this._index--)},e.prototype._stateInAttributeValueDoubleQuotes=function(e){'"'===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=8):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=51,this._sectionStart=this._index)},e.prototype._stateInAttributeValueSingleQuotes=function(e){"'"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=8):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=51,this._sectionStart=this._index)},e.prototype._stateInAttributeValueNoQuotes=function(e){c(e)||">"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=8,this._index--):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=51,this._sectionStart=this._index)},e.prototype._stateBeforeDeclaration=function(e){this._state="["===e?22:"-"===e?18:16},e.prototype._stateInDeclaration=function(e){">"===e&&(this._cbs.ondeclaration(this._getSection()),this._state=1,this._sectionStart=this._index+1)},e.prototype._stateInProcessingInstruction=function(e){">"===e&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=1,this._sectionStart=this._index+1)},e.prototype._stateBeforeComment=function(e){"-"===e?(this._state=19,this._sectionStart=this._index+1):this._state=16},e.prototype._stateInComment=function(e){"-"===e&&(this._state=20)},e.prototype._stateAfterComment1=function(e){this._state="-"===e?21:19},e.prototype._stateAfterComment2=function(e){">"===e?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=1,this._sectionStart=this._index+1):"-"!==e&&(this._state=19)},e.prototype._stateBeforeCdata6=function(e){"["===e?(this._state=28,this._sectionStart=this._index+1):(this._state=16,this._index--)},e.prototype._stateInCdata=function(e){"]"===e&&(this._state=29)},e.prototype._stateAfterCdata1=function(e){this._state="]"===e?30:28},e.prototype._stateAfterCdata2=function(e){">"===e?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=1,this._sectionStart=this._index+1):"]"!==e&&(this._state=28)},e.prototype._stateBeforeSpecial=function(e){"c"===e||"C"===e?this._state=33:"t"===e||"T"===e?this._state=43:(this._state=3,this._index--)},e.prototype._stateBeforeSpecialEnd=function(e){2!==this._special||"c"!==e&&"C"!==e?3!==this._special||"t"!==e&&"T"!==e?this._state=1:this._state=47:this._state=38},e.prototype._stateBeforeScript5=function(e){("/"===e||">"===e||c(e))&&(this._special=2),this._state=3,this._index--},e.prototype._stateAfterScript5=function(e){">"===e||c(e)?(this._special=1,this._state=6,this._sectionStart=this._index-6,this._index--):this._state=1},e.prototype._stateBeforeStyle4=function(e){("/"===e||">"===e||c(e))&&(this._special=3),this._state=3,this._index--},e.prototype._stateAfterStyle4=function(e){">"===e||c(e)?(this._special=1,this._state=6,this._sectionStart=this._index-5,this._index--):this._state=1},e.prototype._parseNamedEntityStrict=function(){if(this._sectionStart+1<this._index){var e=this._buffer.substring(this._sectionStart+1,this._index),t=this._xmlMode?o.default:i.default;Object.prototype.hasOwnProperty.call(t,e)&&(this._emitPartial(t[e]),this._sectionStart=this._index+1)}},e.prototype._parseLegacyEntity=function(){var e=this._sectionStart+1,t=this._index-e;for(t>6&&(t=6);t>=2;){var a=this._buffer.substr(e,t);if(Object.prototype.hasOwnProperty.call(s.default,a))return this._emitPartial(s.default[a]),void(this._sectionStart+=t+1);t--}},e.prototype._stateInNamedEntity=function(e){";"===e?(this._parseNamedEntityStrict(),this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):(e<"a"||e>"z")&&(e<"A"||e>"Z")&&(e<"0"||e>"9")&&(this._xmlMode||this._sectionStart+1===this._index||(1!==this._baseState?"="!==e&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--)},e.prototype._decodeNumericEntity=function(e,t){var a=this._sectionStart+e;if(a!==this._index){var r=this._buffer.substring(a,this._index),i=parseInt(r,t);this._emitPartial(n.default(i)),this._sectionStart=this._index}else this._sectionStart--;this._state=this._baseState},e.prototype._stateInNumericEntity=function(e){";"===e?(this._decodeNumericEntity(2,10),this._sectionStart++):(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--)},e.prototype._stateInHexEntity=function(e){";"===e?(this._decodeNumericEntity(3,16),this._sectionStart++):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,16),this._index--)},e.prototype._cleanup=function(){this._sectionStart<0?(this._buffer="",this._bufferOffset+=this._index,this._index=0):this._running&&(1===this._state?(this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._buffer="",this._bufferOffset+=this._index,this._index=0):this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=this._sectionStart,this._bufferOffset+=this._sectionStart),this._sectionStart=0)},e.prototype.write=function(e){this._ended&&this._cbs.onerror(Error(".write() after done!")),this._buffer+=e,this._parse()},e.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var e=this._buffer.charAt(this._index);1===this._state?this._stateText(e):12===this._state?this._stateInAttributeValueDoubleQuotes(e):9===this._state?this._stateInAttributeName(e):19===this._state?this._stateInComment(e):8===this._state?this._stateBeforeAttributeName(e):3===this._state?this._stateInTagName(e):6===this._state?this._stateInClosingTagName(e):2===this._state?this._stateBeforeTagName(e):10===this._state?this._stateAfterAttributeName(e):13===this._state?this._stateInAttributeValueSingleQuotes(e):11===this._state?this._stateBeforeAttributeValue(e):5===this._state?this._stateBeforeClosingTagName(e):7===this._state?this._stateAfterClosingTagName(e):31===this._state?this._stateBeforeSpecial(e):20===this._state?this._stateAfterComment1(e):14===this._state?this._stateInAttributeValueNoQuotes(e):4===this._state?this._stateInSelfClosingTag(e):16===this._state?this._stateInDeclaration(e):15===this._state?this._stateBeforeDeclaration(e):21===this._state?this._stateAfterComment2(e):18===this._state?this._stateBeforeComment(e):32===this._state?this._stateBeforeSpecialEnd(e):38===this._state?_(this,e):39===this._state?w(this,e):40===this._state?x(this,e):33===this._state?g(this,e):34===this._state?b(this,e):35===this._state?y(this,e):36===this._state?v(this,e):37===this._state?this._stateBeforeScript5(e):41===this._state?k(this,e):42===this._state?this._stateAfterScript5(e):43===this._state?S(this,e):28===this._state?this._stateInCdata(e):44===this._state?P(this,e):45===this._state?E(this,e):46===this._state?this._stateBeforeStyle4(e):47===this._state?C(this,e):48===this._state?A(this,e):49===this._state?M(this,e):50===this._state?this._stateAfterStyle4(e):17===this._state?this._stateInProcessingInstruction(e):53===this._state?this._stateInNamedEntity(e):22===this._state?d(this,e):51===this._state?T(this,e):23===this._state?p(this,e):24===this._state?h(this,e):29===this._state?this._stateAfterCdata1(e):30===this._state?this._stateAfterCdata2(e):25===this._state?f(this,e):26===this._state?m(this,e):27===this._state?this._stateBeforeCdata6(e):55===this._state?this._stateInHexEntity(e):54===this._state?this._stateInNumericEntity(e):52===this._state?j(this,e):this._cbs.onerror(Error("unknown _state"),this._state),this._index++}this._cleanup()},e.prototype.pause=function(){this._running=!1},e.prototype.resume=function(){this._running=!0,this._index<this._buffer.length&&this._parse(),this._ended&&this._finish()},e.prototype.end=function(e){this._ended&&this._cbs.onerror(Error(".end() after done!")),e&&this.write(e),this._ended=!0,this._running&&this._finish()},e.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData(),this._cbs.onend()},e.prototype._handleTrailingData=function(){var e=this._buffer.substr(this._sectionStart);28===this._state||29===this._state||30===this._state?this._cbs.oncdata(e):19===this._state||20===this._state||21===this._state?this._cbs.oncomment(e):53!==this._state||this._xmlMode?54!==this._state||this._xmlMode?55!==this._state||this._xmlMode?3!==this._state&&8!==this._state&&11!==this._state&&10!==this._state&&9!==this._state&&13!==this._state&&12!==this._state&&14!==this._state&&6!==this._state&&this._cbs.ontext(e):(this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._parseLegacyEntity(),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData()))},e.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index},e.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)},e.prototype._emitToken=function(e){this._cbs[e](this._getSection()),this._sectionStart=-1},e.prototype._emitPartial=function(e){1!==this._baseState?this._cbs.onattribdata(e):this._cbs.ontext(e)},e}();a.default=O},{"entities/lib/decode_codepoint":18,"entities/lib/maps/entities.json":22,"entities/lib/maps/legacy.json":23,"entities/lib/maps/xml.json":24}],31:[function(e,t,a){function r(e){for(var t in e)a.hasOwnProperty(t)||(a[t]=e[t])}var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(a,"__esModule",{value:!0});var i=e("./Parser");a.Parser=i.Parser;var s=e("domhandler");a.DomHandler=s.DomHandler,a.DefaultHandler=s.DomHandler,a.parseDOM=function(e,t){var a=new s.DomHandler(void 0,t);return new i.Parser(a,t).end(e),a.dom},a.createDomStream=function(e,t,a){var r=new s.DomHandler(e,t,a);return new i.Parser(r,t)};var o=e("./Tokenizer");a.Tokenizer=o.default;var c=n(e("domelementtype"));a.ElementType=c,a.EVENTS={attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0},r(e("./FeedHandler")),r(e("./WritableStream")),r(e("./CollectingHandler"));var l=n(e("domutils"));a.DomUtils=l;var u=e("./FeedHandler");a.RssHandler=u.FeedHandler},{"./CollectingHandler":26,"./FeedHandler":27,"./Parser":29,"./Tokenizer":30,"./WritableStream":2,domelementtype:6,domhandler:7,domutils:10}],32:[function(e,t,a){a.read=function(e,t,a,r,n){var i,s,o=8*n-r-1,c=(1<<o)-1,l=c>>1,u=-7,d=a?n-1:0,p=a?-1:1,h=e[t+d];for(d+=p,i=h&(1<<-u)-1,h>>=-u,u+=o;u>0;i=256*i+e[t+d],d+=p,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=p,u-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=l}return(h?-1:1)*s*Math.pow(2,i-r)},a.write=function(e,t,a,r,n,i){var s,o,c,l=8*i-n-1,u=(1<<l)-1,d=u>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(o=0,s=u):s+d>=1?(o=(t*c-1)*Math.pow(2,n),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,n),s=0));n>=8;e[a+h]=255&o,h+=f,o/=256,n-=8);for(s=s<<n|o,l+=n;l>0;e[a+h]=255&s,h+=f,s/=256,l-=8);e[a+h-f]|=128*m}},{}],33:[function(e,t,a){var r=e("./_getNative")(e("./_root"),"DataView");t.exports=r},{"./_getNative":93,"./_root":130}],34:[function(e,t,a){var r=e("./_hashClear"),n=e("./_hashDelete"),i=e("./_hashGet"),s=e("./_hashHas"),o=e("./_hashSet");function c(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=n,c.prototype.get=i,c.prototype.has=s,c.prototype.set=o,t.exports=c},{"./_hashClear":100,"./_hashDelete":101,"./_hashGet":102,"./_hashHas":103,"./_hashSet":104}],35:[function(e,t,a){var r=e("./_listCacheClear"),n=e("./_listCacheDelete"),i=e("./_listCacheGet"),s=e("./_listCacheHas"),o=e("./_listCacheSet");function c(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=n,c.prototype.get=i,c.prototype.has=s,c.prototype.set=o,t.exports=c},{"./_listCacheClear":113,"./_listCacheDelete":114,"./_listCacheGet":115,"./_listCacheHas":116,"./_listCacheSet":117}],36:[function(e,t,a){var r=e("./_getNative")(e("./_root"),"Map");t.exports=r},{"./_getNative":93,"./_root":130}],37:[function(e,t,a){var r=e("./_mapCacheClear"),n=e("./_mapCacheDelete"),i=e("./_mapCacheGet"),s=e("./_mapCacheHas"),o=e("./_mapCacheSet");function c(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1])}}c.prototype.clear=r,c.prototype.delete=n,c.prototype.get=i,c.prototype.has=s,c.prototype.set=o,t.exports=c},{"./_mapCacheClear":118,"./_mapCacheDelete":119,"./_mapCacheGet":120,"./_mapCacheHas":121,"./_mapCacheSet":122}],38:[function(e,t,a){var r=e("./_getNative")(e("./_root"),"Promise");t.exports=r},{"./_getNative":93,"./_root":130}],39:[function(e,t,a){var r=e("./_getNative")(e("./_root"),"Set");t.exports=r},{"./_getNative":93,"./_root":130}],40:[function(e,t,a){var r=e("./_ListCache"),n=e("./_stackClear"),i=e("./_stackDelete"),s=e("./_stackGet"),o=e("./_stackHas"),c=e("./_stackSet");function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=o,l.prototype.set=c,t.exports=l},{"./_ListCache":35,"./_stackClear":134,"./_stackDelete":135,"./_stackGet":136,"./_stackHas":137,"./_stackSet":138}],41:[function(e,t,a){var r=e("./_root").Symbol;t.exports=r},{"./_root":130}],42:[function(e,t,a){var r=e("./_root").Uint8Array;t.exports=r},{"./_root":130}],43:[function(e,t,a){var r=e("./_getNative")(e("./_root"),"WeakMap");t.exports=r},{"./_getNative":93,"./_root":130}],44:[function(e,t,a){t.exports=function(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}},{}],45:[function(e,t,a){t.exports=function(e,t){for(var a=-1,r=null==e?0:e.length;++a<r&&!1!==t(e[a],a,e););return e}},{}],46:[function(e,t,a){t.exports=function(e,t){for(var a=-1,r=null==e?0:e.length,n=0,i=[];++a<r;){var s=e[a];t(s,a,e)&&(i[n++]=s)}return i}},{}],47:[function(e,t,a){var r=e("./_baseTimes"),n=e("./isArguments"),i=e("./isArray"),s=e("./isBuffer"),o=e("./_isIndex"),c=e("./isTypedArray"),l=Object.prototype.hasOwnProperty;t.exports=function(e,t){var a=i(e),u=!a&&n(e),d=!a&&!u&&s(e),p=!a&&!u&&!d&&c(e),h=a||u||d||p,f=h?r(e.length,String):[],m=f.length;for(var g in e)!t&&!l.call(e,g)||h&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||o(g,m))||f.push(g);return f}},{"./_baseTimes":72,"./_isIndex":108,"./isArguments":145,"./isArray":146,"./isBuffer":149,"./isTypedArray":159}],48:[function(e,t,a){t.exports=function(e,t){for(var a=-1,r=null==e?0:e.length,n=Array(r);++a<r;)n[a]=t(e[a],a,e);return n}},{}],49:[function(e,t,a){t.exports=function(e,t){for(var a=-1,r=t.length,n=e.length;++a<r;)e[n+a]=t[a];return e}},{}],50:[function(e,t,a){var r=e("./_baseAssignValue"),n=e("./eq");t.exports=function(e,t,a){(void 0!==a&&!n(e[t],a)||void 0===a&&!(t in e))&&r(e,t,a)}},{"./_baseAssignValue":55,"./eq":142}],51:[function(e,t,a){var r=e("./_baseAssignValue"),n=e("./eq"),i=Object.prototype.hasOwnProperty;t.exports=function(e,t,a){var s=e[t];i.call(e,t)&&n(s,a)&&(void 0!==a||t in e)||r(e,t,a)}},{"./_baseAssignValue":55,"./eq":142}],52:[function(e,t,a){var r=e("./eq");t.exports=function(e,t){for(var a=e.length;a--;)if(r(e[a][0],t))return a;return-1}},{"./eq":142}],53:[function(e,t,a){var r=e("./_copyObject"),n=e("./keys");t.exports=function(e,t){return e&&r(t,n(t),e)}},{"./_copyObject":82,"./keys":160}],54:[function(e,t,a){var r=e("./_copyObject"),n=e("./keysIn");t.exports=function(e,t){return e&&r(t,n(t),e)}},{"./_copyObject":82,"./keysIn":161}],55:[function(e,t,a){var r=e("./_defineProperty");t.exports=function(e,t,a){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}},{"./_defineProperty":88}],56:[function(e,t,a){var r=e("./_Stack"),n=e("./_arrayEach"),i=e("./_assignValue"),s=e("./_baseAssign"),o=e("./_baseAssignIn"),c=e("./_cloneBuffer"),l=e("./_copyArray"),u=e("./_copySymbols"),d=e("./_copySymbolsIn"),p=e("./_getAllKeys"),h=e("./_getAllKeysIn"),f=e("./_getTag"),m=e("./_initCloneArray"),g=e("./_initCloneByTag"),b=e("./_initCloneObject"),y=e("./isArray"),v=e("./isBuffer"),_=e("./isMap"),w=e("./isObject"),x=e("./isSet"),k=e("./keys"),S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1,t.exports=function e(t,a,P,E,C,A){var M,T=1&a,j=2&a,O=4&a;if(P&&(M=C?P(t,E,C,A):P(t)),void 0!==M)return M;if(!w(t))return t;var D=y(t);if(D){if(M=m(t),!T)return l(t,M)}else{var I=f(t),R="[object Function]"==I||"[object GeneratorFunction]"==I;if(v(t))return c(t,T);if("[object Object]"==I||"[object Arguments]"==I||R&&!C){if(M=j||R?{}:b(t),!T)return j?d(t,o(M,t)):u(t,s(M,t))}else{if(!S[I])return C?t:{};M=g(t,I,T)}}A||(A=new r);var B=A.get(t);if(B)return B;A.set(t,M),x(t)?t.forEach((function(r){M.add(e(r,a,P,r,t,A))})):_(t)&&t.forEach((function(r,n){M.set(n,e(r,a,P,n,t,A))}));var q=O?j?h:p:j?keysIn:k,L=D?void 0:q(t);return n(L||t,(function(r,n){L&&(r=t[n=r]),i(M,n,e(r,a,P,n,t,A))})),M}},{"./_Stack":40,"./_arrayEach":45,"./_assignValue":51,"./_baseAssign":53,"./_baseAssignIn":54,"./_cloneBuffer":76,"./_copyArray":81,"./_copySymbols":83,"./_copySymbolsIn":84,"./_getAllKeys":90,"./_getAllKeysIn":91,"./_getTag":98,"./_initCloneArray":105,"./_initCloneByTag":106,"./_initCloneObject":107,"./isArray":146,"./isBuffer":149,"./isMap":152,"./isObject":153,"./isSet":156,"./keys":160}],57:[function(e,t,a){var r=e("./isObject"),n=Object.create,i=function(){function e(){}return function(t){if(!r(t))return{};if(n)return n(t);e.prototype=t;var a=new e;return e.prototype=void 0,a}}();t.exports=i},{"./isObject":153}],58:[function(e,t,a){var r=e("./_createBaseFor")();t.exports=r},{"./_createBaseFor":87}],59:[function(e,t,a){var r=e("./_arrayPush"),n=e("./isArray");t.exports=function(e,t,a){var i=t(e);return n(e)?i:r(i,a(e))}},{"./_arrayPush":49,"./isArray":146}],60:[function(e,t,a){var r=e("./_Symbol"),n=e("./_getRawTag"),i=e("./_objectToString"),s=r?r.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?n(e):i(e)}},{"./_Symbol":41,"./_getRawTag":95,"./_objectToString":127}],61:[function(e,t,a){var r=e("./_baseGetTag"),n=e("./isObjectLike");t.exports=function(e){return n(e)&&"[object Arguments]"==r(e)}},{"./_baseGetTag":60,"./isObjectLike":154}],62:[function(e,t,a){var r=e("./_getTag"),n=e("./isObjectLike");t.exports=function(e){return n(e)&&"[object Map]"==r(e)}},{"./_getTag":98,"./isObjectLike":154}],63:[function(e,t,a){var r=e("./isFunction"),n=e("./_isMasked"),i=e("./isObject"),s=e("./_toSource"),o=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!i(e)||n(e))&&(r(e)?p:o).test(s(e))}},{"./_isMasked":111,"./_toSource":139,"./isFunction":150,"./isObject":153}],64:[function(e,t,a){var r=e("./_getTag"),n=e("./isObjectLike");t.exports=function(e){return n(e)&&"[object Set]"==r(e)}},{"./_getTag":98,"./isObjectLike":154}],65:[function(e,t,a){var r=e("./_baseGetTag"),n=e("./isLength"),i=e("./isObjectLike"),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,t.exports=function(e){return i(e)&&n(e.length)&&!!s[r(e)]}},{"./_baseGetTag":60,"./isLength":151,"./isObjectLike":154}],66:[function(e,t,a){var r=e("./_isPrototype"),n=e("./_nativeKeys"),i=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return n(e);var t=[];for(var a in Object(e))i.call(e,a)&&"constructor"!=a&&t.push(a);return t}},{"./_isPrototype":112,"./_nativeKeys":124}],67:[function(e,t,a){var r=e("./isObject"),n=e("./_isPrototype"),i=e("./_nativeKeysIn"),s=Object.prototype.hasOwnProperty;t.exports=function(e){if(!r(e))return i(e);var t=n(e),a=[];for(var o in e)("constructor"!=o||!t&&s.call(e,o))&&a.push(o);return a}},{"./_isPrototype":112,"./_nativeKeysIn":125,"./isObject":153}],68:[function(e,t,a){var r=e("./_Stack"),n=e("./_assignMergeValue"),i=e("./_baseFor"),s=e("./_baseMergeDeep"),o=e("./isObject"),c=e("./keysIn"),l=e("./_safeGet");t.exports=function e(t,a,u,d,p){t!==a&&i(a,(function(i,c){if(p||(p=new r),o(i))s(t,a,c,u,e,d,p);else{var h=d?d(l(t,c),i,c+"",t,a,p):void 0;void 0===h&&(h=i),n(t,c,h)}}),c)}},{"./_Stack":40,"./_assignMergeValue":50,"./_baseFor":58,"./_baseMergeDeep":69,"./_safeGet":131,"./isObject":153,"./keysIn":161}],69:[function(e,t,a){var r=e("./_assignMergeValue"),n=e("./_cloneBuffer"),i=e("./_cloneTypedArray"),s=e("./_copyArray"),o=e("./_initCloneObject"),c=e("./isArguments"),l=e("./isArray"),u=e("./isArrayLikeObject"),d=e("./isBuffer"),p=e("./isFunction"),h=e("./isObject"),f=e("./isPlainObject"),m=e("./isTypedArray"),g=e("./_safeGet"),b=e("./toPlainObject");t.exports=function(e,t,a,y,v,_,w){var x=g(e,a),k=g(t,a),S=w.get(k);if(S)r(e,a,S);else{var P=_?_(x,k,a+"",e,t,w):void 0,E=void 0===P;if(E){var C=l(k),A=!C&&d(k),M=!C&&!A&&m(k);P=k,C||A||M?l(x)?P=x:u(x)?P=s(x):A?(E=!1,P=n(k,!0)):M?(E=!1,P=i(k,!0)):P=[]:f(k)||c(k)?(P=x,c(x)?P=b(x):h(x)&&!p(x)||(P=o(k))):E=!1}E&&(w.set(k,P),v(P,k,y,_,w),w.delete(k)),r(e,a,P)}}},{"./_assignMergeValue":50,"./_cloneBuffer":76,"./_cloneTypedArray":80,"./_copyArray":81,"./_initCloneObject":107,"./_safeGet":131,"./isArguments":145,"./isArray":146,"./isArrayLikeObject":148,"./isBuffer":149,"./isFunction":150,"./isObject":153,"./isPlainObject":155,"./isTypedArray":159,"./toPlainObject":165}],70:[function(e,t,a){var r=e("./identity"),n=e("./_overRest"),i=e("./_setToString");t.exports=function(e,t){return i(n(e,t,r),e+"")}},{"./_overRest":129,"./_setToString":132,"./identity":144}],71:[function(e,t,a){var r=e("./constant"),n=e("./_defineProperty"),i=e("./identity"),s=n?function(e,t){return n(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:i;t.exports=s},{"./_defineProperty":88,"./constant":141,"./identity":144}],72:[function(e,t,a){t.exports=function(e,t){for(var a=-1,r=Array(e);++a<e;)r[a]=t(a);return r}},{}],73:[function(e,t,a){var r=e("./_Symbol"),n=e("./_arrayMap"),i=e("./isArray"),s=e("./isSymbol"),o=r?r.prototype:void 0,c=o?o.toString:void 0;t.exports=function e(t){if("string"==typeof t)return t;if(i(t))return n(t,e)+"";if(s(t))return c?c.call(t):"";var a=t+"";return"0"==a&&1/t==-1/0?"-0":a}},{"./_Symbol":41,"./_arrayMap":48,"./isArray":146,"./isSymbol":158}],74:[function(e,t,a){t.exports=function(e){return function(t){return e(t)}}},{}],75:[function(e,t,a){var r=e("./_Uint8Array");t.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},{"./_Uint8Array":42}],76:[function(e,t,a){var r=e("./_root"),n="object"==l(a)&&a&&!a.nodeType&&a,i=n&&"object"==l(t)&&t&&!t.nodeType&&t,s=i&&i.exports===n?r.Buffer:void 0,o=s?s.allocUnsafe:void 0;t.exports=function(e,t){if(t)return e.slice();var a=e.length,r=o?o(a):new e.constructor(a);return e.copy(r),r}},{"./_root":130}],77:[function(e,t,a){var r=e("./_cloneArrayBuffer");t.exports=function(e,t){var a=t?r(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.byteLength)}},{"./_cloneArrayBuffer":75}],78:[function(e,t,a){var r=/\w*$/;t.exports=function(e){var t=new e.constructor(e.source,r.exec(e));return t.lastIndex=e.lastIndex,t}},{}],79:[function(e,t,a){var r=e("./_Symbol"),n=r?r.prototype:void 0,i=n?n.valueOf:void 0;t.exports=function(e){return i?Object(i.call(e)):{}}},{"./_Symbol":41}],80:[function(e,t,a){var r=e("./_cloneArrayBuffer");t.exports=function(e,t){var a=t?r(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}},{"./_cloneArrayBuffer":75}],81:[function(e,t,a){t.exports=function(e,t){var a=-1,r=e.length;for(t||(t=Array(r));++a<r;)t[a]=e[a];return t}},{}],82:[function(e,t,a){var r=e("./_assignValue"),n=e("./_baseAssignValue");t.exports=function(e,t,a,i){var s=!a;a||(a={});for(var o=-1,c=t.length;++o<c;){var l=t[o],u=i?i(a[l],e[l],l,a,e):void 0;void 0===u&&(u=e[l]),s?n(a,l,u):r(a,l,u)}return a}},{"./_assignValue":51,"./_baseAssignValue":55}],83:[function(e,t,a){var r=e("./_copyObject"),n=e("./_getSymbols");t.exports=function(e,t){return r(e,n(e),t)}},{"./_copyObject":82,"./_getSymbols":96}],84:[function(e,t,a){var r=e("./_copyObject"),n=e("./_getSymbolsIn");t.exports=function(e,t){return r(e,n(e),t)}},{"./_copyObject":82,"./_getSymbolsIn":97}],85:[function(e,t,a){var r=e("./_root")["__core-js_shared__"];t.exports=r},{"./_root":130}],86:[function(e,t,a){var r=e("./_baseRest"),n=e("./_isIterateeCall");t.exports=function(e){return r((function(t,a){var r=-1,i=a.length,s=i>1?a[i-1]:void 0,o=i>2?a[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,o&&n(a[0],a[1],o)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var c=a[r];c&&e(t,c,r,s)}return t}))}},{"./_baseRest":70,"./_isIterateeCall":109}],87:[function(e,t,a){t.exports=function(e){return function(t,a,r){for(var n=-1,i=Object(t),s=r(t),o=s.length;o--;){var c=s[e?o:++n];if(!1===a(i[c],c,i))break}return t}}},{}],88:[function(e,t,a){var r=e("./_getNative"),n=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=n},{"./_getNative":93}],89:[function(e,t,r){(function(e){var a="object"==l(e)&&e&&e.Object===Object&&e;t.exports=a}).call(this,void 0!==a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],90:[function(e,t,a){var r=e("./_baseGetAllKeys"),n=e("./_getSymbols"),i=e("./keys");t.exports=function(e){return r(e,i,n)}},{"./_baseGetAllKeys":59,"./_getSymbols":96,"./keys":160}],91:[function(e,t,a){var r=e("./_baseGetAllKeys"),n=e("./_getSymbolsIn"),i=e("./keysIn");t.exports=function(e){return r(e,i,n)}},{"./_baseGetAllKeys":59,"./_getSymbolsIn":97,"./keysIn":161}],92:[function(e,t,a){var r=e("./_isKeyable");t.exports=function(e,t){var a=e.__data__;return r(t)?a["string"==typeof t?"string":"hash"]:a.map}},{"./_isKeyable":110}],93:[function(e,t,a){var r=e("./_baseIsNative"),n=e("./_getValue");t.exports=function(e,t){var a=n(e,t);return r(a)?a:void 0}},{"./_baseIsNative":63,"./_getValue":99}],94:[function(e,t,a){var r=e("./_overArg")(Object.getPrototypeOf,Object);t.exports=r},{"./_overArg":128}],95:[function(e,t,a){var r=e("./_Symbol"),n=Object.prototype,i=n.hasOwnProperty,s=n.toString,o=r?r.toStringTag:void 0;t.exports=function(e){var t=i.call(e,o),a=e[o];try{e[o]=void 0;var r=!0}catch(e){}var n=s.call(e);return r&&(t?e[o]=a:delete e[o]),n}},{"./_Symbol":41}],96:[function(e,t,a){var r=e("./_arrayFilter"),n=e("./stubArray"),i=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,o=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return i.call(e,t)})))}:n;t.exports=o},{"./_arrayFilter":46,"./stubArray":163}],97:[function(e,t,a){var r=e("./_arrayPush"),n=e("./_getPrototype"),i=e("./_getSymbols"),s=e("./stubArray"),o=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,i(e)),e=n(e);return t}:s;t.exports=o},{"./_arrayPush":49,"./_getPrototype":94,"./_getSymbols":96,"./stubArray":163}],98:[function(e,t,a){var r=e("./_DataView"),n=e("./_Map"),i=e("./_Promise"),s=e("./_Set"),o=e("./_WeakMap"),c=e("./_baseGetTag"),l=e("./_toSource"),u=l(r),d=l(n),p=l(i),h=l(s),f=l(o),m=c;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||n&&"[object Map]"!=m(new n)||i&&"[object Promise]"!=m(i.resolve())||s&&"[object Set]"!=m(new s)||o&&"[object WeakMap]"!=m(new o))&&(m=function(e){var t=c(e),a="[object Object]"==t?e.constructor:void 0,r=a?l(a):"";if(r)switch(r){case u:return"[object DataView]";case d:return"[object Map]";case p:return"[object Promise]";case h:return"[object Set]";case f:return"[object WeakMap]"}return t}),t.exports=m},{"./_DataView":33,"./_Map":36,"./_Promise":38,"./_Set":39,"./_WeakMap":43,"./_baseGetTag":60,"./_toSource":139}],99:[function(e,t,a){t.exports=function(e,t){return null==e?void 0:e[t]}},{}],100:[function(e,t,a){var r=e("./_nativeCreate");t.exports=function(){this.__data__=r?r(null):{},this.size=0}},{"./_nativeCreate":123}],101:[function(e,t,a){t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},{}],102:[function(e,t,a){var r=e("./_nativeCreate"),n=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(r){var a=t[e];return"__lodash_hash_undefined__"===a?void 0:a}return n.call(t,e)?t[e]:void 0}},{"./_nativeCreate":123}],103:[function(e,t,a){var r=e("./_nativeCreate"),n=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:n.call(t,e)}},{"./_nativeCreate":123}],104:[function(e,t,a){var r=e("./_nativeCreate");t.exports=function(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},{"./_nativeCreate":123}],105:[function(e,t,a){var r=Object.prototype.hasOwnProperty;t.exports=function(e){var t=e.length,a=new e.constructor(t);return t&&"string"==typeof e[0]&&r.call(e,"index")&&(a.index=e.index,a.input=e.input),a}},{}],106:[function(e,t,a){var r=e("./_cloneArrayBuffer"),n=e("./_cloneDataView"),i=e("./_cloneRegExp"),s=e("./_cloneSymbol"),o=e("./_cloneTypedArray");t.exports=function(e,t,a){var c=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new c(+e);case"[object DataView]":return n(e,a);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return o(e,a);case"[object Map]":return new c;case"[object Number]":case"[object String]":return new c(e);case"[object RegExp]":return i(e);case"[object Set]":return new c;case"[object Symbol]":return s(e)}}},{"./_cloneArrayBuffer":75,"./_cloneDataView":77,"./_cloneRegExp":78,"./_cloneSymbol":79,"./_cloneTypedArray":80}],107:[function(e,t,a){var r=e("./_baseCreate"),n=e("./_getPrototype"),i=e("./_isPrototype");t.exports=function(e){return"function"!=typeof e.constructor||i(e)?{}:r(n(e))}},{"./_baseCreate":57,"./_getPrototype":94,"./_isPrototype":112}],108:[function(e,t,a){var r=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var a=l(e);return!!(t=null==t?9007199254740991:t)&&("number"==a||"symbol"!=a&&r.test(e))&&e>-1&&e%1==0&&e<t}},{}],109:[function(e,t,a){var r=e("./eq"),n=e("./isArrayLike"),i=e("./_isIndex"),s=e("./isObject");t.exports=function(e,t,a){if(!s(a))return!1;var o=l(t);return!!("number"==o?n(a)&&i(t,a.length):"string"==o&&t in a)&&r(a[t],e)}},{"./_isIndex":108,"./eq":142,"./isArrayLike":147,"./isObject":153}],110:[function(e,t,a){t.exports=function(e){var t=l(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},{}],111:[function(e,t,a){var r,n=e("./_coreJsData"),i=(r=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(e){return!!i&&i in e}},{"./_coreJsData":85}],112:[function(e,t,a){var r=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},{}],113:[function(e,t,a){t.exports=function(){this.__data__=[],this.size=0}},{}],114:[function(e,t,a){var r=e("./_assocIndexOf"),n=Array.prototype.splice;t.exports=function(e){var t=this.__data__,a=r(t,e);return!(a<0||(a==t.length-1?t.pop():n.call(t,a,1),--this.size,0))}},{"./_assocIndexOf":52}],115:[function(e,t,a){var r=e("./_assocIndexOf");t.exports=function(e){var t=this.__data__,a=r(t,e);return a<0?void 0:t[a][1]}},{"./_assocIndexOf":52}],116:[function(e,t,a){var r=e("./_assocIndexOf");t.exports=function(e){return r(this.__data__,e)>-1}},{"./_assocIndexOf":52}],117:[function(e,t,a){var r=e("./_assocIndexOf");t.exports=function(e,t){var a=this.__data__,n=r(a,e);return n<0?(++this.size,a.push([e,t])):a[n][1]=t,this}},{"./_assocIndexOf":52}],118:[function(e,t,a){var r=e("./_Hash"),n=e("./_ListCache"),i=e("./_Map");t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(i||n),string:new r}}},{"./_Hash":34,"./_ListCache":35,"./_Map":36}],119:[function(e,t,a){var r=e("./_getMapData");t.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},{"./_getMapData":92}],120:[function(e,t,a){var r=e("./_getMapData");t.exports=function(e){return r(this,e).get(e)}},{"./_getMapData":92}],121:[function(e,t,a){var r=e("./_getMapData");t.exports=function(e){return r(this,e).has(e)}},{"./_getMapData":92}],122:[function(e,t,a){var r=e("./_getMapData");t.exports=function(e,t){var a=r(this,e),n=a.size;return a.set(e,t),this.size+=a.size==n?0:1,this}},{"./_getMapData":92}],123:[function(e,t,a){var r=e("./_getNative")(Object,"create");t.exports=r},{"./_getNative":93}],124:[function(e,t,a){var r=e("./_overArg")(Object.keys,Object);t.exports=r},{"./_overArg":128}],125:[function(e,t,a){t.exports=function(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}},{}],126:[function(e,t,a){var r=e("./_freeGlobal"),n="object"==l(a)&&a&&!a.nodeType&&a,i=n&&"object"==l(t)&&t&&!t.nodeType&&t,s=i&&i.exports===n&&r.process,o=function(){try{var e=i&&i.require&&i.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=o},{"./_freeGlobal":89}],127:[function(e,t,a){var r=Object.prototype.toString;t.exports=function(e){return r.call(e)}},{}],128:[function(e,t,a){t.exports=function(e,t){return function(a){return e(t(a))}}},{}],129:[function(e,t,a){var r=e("./_apply"),n=Math.max;t.exports=function(e,t,a){return t=n(void 0===t?e.length-1:t,0),function(){for(var i=arguments,s=-1,o=n(i.length-t,0),c=Array(o);++s<o;)c[s]=i[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=i[s];return l[t]=a(c),r(e,this,l)}}},{"./_apply":44}],130:[function(e,t,a){var r=e("./_freeGlobal"),n="object"==("undefined"==typeof self?"undefined":l(self))&&self&&self.Object===Object&&self,i=r||n||Function("return this")();t.exports=i},{"./_freeGlobal":89}],131:[function(e,t,a){t.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},{}],132:[function(e,t,a){var r=e("./_baseSetToString"),n=e("./_shortOut")(r);t.exports=n},{"./_baseSetToString":71,"./_shortOut":133}],133:[function(e,t,a){var r=Date.now;t.exports=function(e){var t=0,a=0;return function(){var n=r(),i=16-(n-a);if(a=n,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},{}],134:[function(e,t,a){var r=e("./_ListCache");t.exports=function(){this.__data__=new r,this.size=0}},{"./_ListCache":35}],135:[function(e,t,a){t.exports=function(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a}},{}],136:[function(e,t,a){t.exports=function(e){return this.__data__.get(e)}},{}],137:[function(e,t,a){t.exports=function(e){return this.__data__.has(e)}},{}],138:[function(e,t,a){var r=e("./_ListCache"),n=e("./_Map"),i=e("./_MapCache");t.exports=function(e,t){var a=this.__data__;if(a instanceof r){var s=a.__data__;if(!n||s.length<199)return s.push([e,t]),this.size=++a.size,this;a=this.__data__=new i(s)}return a.set(e,t),this.size=a.size,this}},{"./_ListCache":35,"./_Map":36,"./_MapCache":37}],139:[function(e,t,a){var r=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},{}],140:[function(e,t,a){var r=e("./_baseClone");t.exports=function(e){return r(e,5)}},{"./_baseClone":56}],141:[function(e,t,a){t.exports=function(e){return function(){return e}}},{}],142:[function(e,t,a){t.exports=function(e,t){return e===t||e!=e&&t!=t}},{}],143:[function(e,t,a){var r=e("./toString"),n=/[\\^$.*+?()[\]{}|]/g,i=RegExp(n.source);t.exports=function(e){return(e=r(e))&&i.test(e)?e.replace(n,"\\$&"):e}},{"./toString":166}],144:[function(e,t,a){t.exports=function(e){return e}},{}],145:[function(e,t,a){var r=e("./_baseIsArguments"),n=e("./isObjectLike"),i=Object.prototype,s=i.hasOwnProperty,o=i.propertyIsEnumerable,c=r(function(){return arguments}())?r:function(e){return n(e)&&s.call(e,"callee")&&!o.call(e,"callee")};t.exports=c},{"./_baseIsArguments":61,"./isObjectLike":154}],146:[function(e,t,a){var r=Array.isArray;t.exports=r},{}],147:[function(e,t,a){var r=e("./isFunction"),n=e("./isLength");t.exports=function(e){return null!=e&&n(e.length)&&!r(e)}},{"./isFunction":150,"./isLength":151}],148:[function(e,t,a){var r=e("./isArrayLike"),n=e("./isObjectLike");t.exports=function(e){return n(e)&&r(e)}},{"./isArrayLike":147,"./isObjectLike":154}],149:[function(e,t,a){var r=e("./_root"),n=e("./stubFalse"),i="object"==l(a)&&a&&!a.nodeType&&a,s=i&&"object"==l(t)&&t&&!t.nodeType&&t,o=s&&s.exports===i?r.Buffer:void 0,c=(o?o.isBuffer:void 0)||n;t.exports=c},{"./_root":130,"./stubFalse":164}],150:[function(e,t,a){var r=e("./_baseGetTag"),n=e("./isObject");t.exports=function(e){if(!n(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},{"./_baseGetTag":60,"./isObject":153}],151:[function(e,t,a){t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},{}],152:[function(e,t,a){var r=e("./_baseIsMap"),n=e("./_baseUnary"),i=e("./_nodeUtil"),s=i&&i.isMap,o=s?n(s):r;t.exports=o},{"./_baseIsMap":62,"./_baseUnary":74,"./_nodeUtil":126}],153:[function(e,t,a){t.exports=function(e){var t=l(e);return null!=e&&("object"==t||"function"==t)}},{}],154:[function(e,t,a){t.exports=function(e){return null!=e&&"object"==l(e)}},{}],155:[function(e,t,a){var r=e("./_baseGetTag"),n=e("./_getPrototype"),i=e("./isObjectLike"),s=Function.prototype,o=Object.prototype,c=s.toString,l=o.hasOwnProperty,u=c.call(Object);t.exports=function(e){if(!i(e)||"[object Object]"!=r(e))return!1;var t=n(e);if(null===t)return!0;var a=l.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&c.call(a)==u}},{"./_baseGetTag":60,"./_getPrototype":94,"./isObjectLike":154}],156:[function(e,t,a){var r=e("./_baseIsSet"),n=e("./_baseUnary"),i=e("./_nodeUtil"),s=i&&i.isSet,o=s?n(s):r;t.exports=o},{"./_baseIsSet":64,"./_baseUnary":74,"./_nodeUtil":126}],157:[function(e,t,a){var r=e("./_baseGetTag"),n=e("./isArray"),i=e("./isObjectLike");t.exports=function(e){return"string"==typeof e||!n(e)&&i(e)&&"[object String]"==r(e)}},{"./_baseGetTag":60,"./isArray":146,"./isObjectLike":154}],158:[function(e,t,a){var r=e("./_baseGetTag"),n=e("./isObjectLike");t.exports=function(e){return"symbol"==l(e)||n(e)&&"[object Symbol]"==r(e)}},{"./_baseGetTag":60,"./isObjectLike":154}],159:[function(e,t,a){var r=e("./_baseIsTypedArray"),n=e("./_baseUnary"),i=e("./_nodeUtil"),s=i&&i.isTypedArray,o=s?n(s):r;t.exports=o},{"./_baseIsTypedArray":65,"./_baseUnary":74,"./_nodeUtil":126}],160:[function(e,t,a){var r=e("./_arrayLikeKeys"),n=e("./_baseKeys"),i=e("./isArrayLike");t.exports=function(e){return i(e)?r(e):n(e)}},{"./_arrayLikeKeys":47,"./_baseKeys":66,"./isArrayLike":147}],161:[function(e,t,a){var r=e("./_arrayLikeKeys"),n=e("./_baseKeysIn"),i=e("./isArrayLike");t.exports=function(e){return i(e)?r(e,!0):n(e)}},{"./_arrayLikeKeys":47,"./_baseKeysIn":67,"./isArrayLike":147}],162:[function(e,t,a){var r=e("./_baseMerge"),n=e("./_createAssigner")((function(e,t,a,n){r(e,t,a,n)}));t.exports=n},{"./_baseMerge":68,"./_createAssigner":86}],163:[function(e,t,a){t.exports=function(){return[]}},{}],164:[function(e,t,a){t.exports=function(){return!1}},{}],165:[function(e,t,a){var r=e("./_copyObject"),n=e("./keysIn");t.exports=function(e){return r(e,n(e))}},{"./_copyObject":82,"./keysIn":161}],166:[function(e,t,a){var r=e("./_baseToString");t.exports=function(e){return null==e?"":r(e)}},{"./_baseToString":73}],167:[function(e,t,a){var r,n;r=this,n=function(){return function(e){function t(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function a(t){var a,r=t.exec(e.substring(m));if(r)return a=r[0],m+=a.length,a}for(var r,n,i,s,o,c=e.length,l=/^[ \t\n\r\u000c]+/,u=/^[, \t\n\r\u000c]+/,d=/^[^ \t\n\r\u000c]+/,p=/[,]+$/,h=/^\d+$/,f=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,m=0,g=[];;){if(a(u),m>=c)return g;r=a(d),n=[],","===r.slice(-1)?(r=r.replace(p,""),y()):b()}function b(){for(a(l),i="",s="in descriptor";;){if(o=e.charAt(m),"in descriptor"===s)if(t(o))i&&(n.push(i),i="",s="after descriptor");else{if(","===o)return m+=1,i&&n.push(i),void y();if("("===o)i+=o,s="in parens";else{if(""===o)return i&&n.push(i),void y();i+=o}}else if("in parens"===s)if(")"===o)i+=o,s="in descriptor";else{if(""===o)return n.push(i),void y();i+=o}else if("after descriptor"===s)if(t(o));else{if(""===o)return void y();s="in descriptor",m-=1}m+=1}}function y(){var t,a,i,s,o,c,l,u,d,p=!1,m={};for(s=0;s<n.length;s++)c=(o=n[s])[o.length-1],l=o.substring(0,o.length-1),u=parseInt(l,10),d=parseFloat(l),h.test(l)&&"w"===c?((t||a)&&(p=!0),0===u?p=!0:t=u):f.test(l)&&"x"===c?((t||a||i)&&(p=!0),d<0?p=!0:a=d):h.test(l)&&"h"===c?((i||a)&&(p=!0),0===u?p=!0:i=u):p=!0;p?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+o+"'."):(m.url=r,t&&(m.w=t),a&&(m.d=a),i&&(m.h=i),g.push(m))}}},"object"===l(t)&&t.exports?t.exports=n():r.parseSrcset=n()},{}],168:[function(e,t,a){(function(e){function t(e,t){for(var a=0,r=e.length-1;r>=0;r--){var n=e[r];"."===n?e.splice(r,1):".."===n?(e.splice(r,1),a++):a&&(e.splice(r,1),a--)}if(t)for(;a--;a)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var a=[],r=0;r<e.length;r++)t(e[r],r,e)&&a.push(e[r]);return a}a.resolve=function(){for(var a="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(a=s+"/"+a,n="/"===s.charAt(0))}return(n?"/":"")+(a=t(r(a.split("/"),(function(e){return!!e})),!n).join("/"))||"."},a.normalize=function(e){var i=a.isAbsolute(e),s="/"===n(e,-1);return(e=t(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&s&&(e+="/"),(i?"/":"")+e},a.isAbsolute=function(e){return"/"===e.charAt(0)},a.join=function(){var e=Array.prototype.slice.call(arguments,0);return a.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},a.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var a=e.length-1;a>=0&&""===e[a];a--);return t>a?[]:e.slice(t,a-t+1)}e=a.resolve(e).substr(1),t=a.resolve(t).substr(1);for(var n=r(e.split("/")),i=r(t.split("/")),s=Math.min(n.length,i.length),o=s,c=0;c<s;c++)if(n[c]!==i[c]){o=c;break}var l=[];for(c=o;c<n.length;c++)l.push("..");return(l=l.concat(i.slice(o))).join("/")},a.sep="/",a.delimiter=":",a.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),a=47===t,r=-1,n=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!n){r=i;break}}else n=!1;return-1===r?a?"/":".":a&&1===r?"/":e.slice(0,r)},a.basename=function(e,t){var a=function(e){"string"!=typeof e&&(e+="");var t,a=0,r=-1,n=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!n){a=t+1;break}}else-1===r&&(n=!1,r=t+1);return-1===r?"":e.slice(a,r)}(e);return t&&a.substr(-1*t.length)===t&&(a=a.substr(0,a.length-t.length)),a},a.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,a=0,r=-1,n=!0,i=0,s=e.length-1;s>=0;--s){var o=e.charCodeAt(s);if(47!==o)-1===r&&(n=!1,r=s+1),46===o?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!n){a=s+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===a+1?"":e.slice(t,r)};var n="b"==="ab".substr(-1)?function(e,t,a){return e.substr(t,a)}:function(e,t,a){return t<0&&(t=e.length+t),e.substr(t,a)}}).call(this,e("_process"))},{_process:193}],169:[function(e,t,a){var r;a.__esModule=!0,a.default=void 0;var n=function(e){var t,a;function r(t){var a;return(a=e.call(this,t)||this).type="atrule",a}a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var n=r.prototype;return n.append=function(){var t;this.nodes||(this.nodes=[]);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.prototype.append).call.apply(t,[this].concat(r))},n.prepend=function(){var t;this.nodes||(this.nodes=[]);for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.prototype.prepend).call.apply(t,[this].concat(r))},r}(((r=e("./container"))&&r.__esModule?r:{default:r}).default);a.default=n,t.exports=a.default},{"./container":171}],170:[function(e,t,a){var r;a.__esModule=!0,a.default=void 0;var n=function(e){var t,a;function r(t){var a;return(a=e.call(this,t)||this).type="comment",a}return a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,r}(((r=e("./node"))&&r.__esModule?r:{default:r}).default);a.default=n,t.exports=a.default},{"./node":178}],171:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r=i(e("./declaration")),n=i(e("./comment"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(t){var a,i;function o(){return t.apply(this,arguments)||this}i=t,(a=o).prototype=Object.create(i.prototype),a.prototype.constructor=a,a.__proto__=i;var c,l,u,d=o.prototype;return d.push=function(e){return e.parent=this,this.nodes.push(e),this},d.each=function(e){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;var t=this.lastEach;if(this.indexes[t]=0,this.nodes){for(var a,r;this.indexes[t]<this.nodes.length&&(a=this.indexes[t],!1!==(r=e(this.nodes[a],a)));)this.indexes[t]+=1;return delete this.indexes[t],r}},d.walk=function(e){return this.each((function(t,a){var r;try{r=e(t,a)}catch(e){if(e.postcssNode=t,e.stack&&t.source&&/\n\s{4}at /.test(e.stack)){var n=t.source;e.stack=e.stack.replace(/\n\s{4}at /,"$&"+n.input.from+":"+n.start.line+":"+n.start.column+"$&")}throw e}return!1!==r&&t.walk&&(r=t.walk(e)),r}))},d.walkDecls=function(e,t){return t?e instanceof RegExp?this.walk((function(a,r){if("decl"===a.type&&e.test(a.prop))return t(a,r)})):this.walk((function(a,r){if("decl"===a.type&&a.prop===e)return t(a,r)})):(t=e,this.walk((function(e,a){if("decl"===e.type)return t(e,a)})))},d.walkRules=function(e,t){return t?e instanceof RegExp?this.walk((function(a,r){if("rule"===a.type&&e.test(a.selector))return t(a,r)})):this.walk((function(a,r){if("rule"===a.type&&a.selector===e)return t(a,r)})):(t=e,this.walk((function(e,a){if("rule"===e.type)return t(e,a)})))},d.walkAtRules=function(e,t){return t?e instanceof RegExp?this.walk((function(a,r){if("atrule"===a.type&&e.test(a.name))return t(a,r)})):this.walk((function(a,r){if("atrule"===a.type&&a.name===e)return t(a,r)})):(t=e,this.walk((function(e,a){if("atrule"===e.type)return t(e,a)})))},d.walkComments=function(e){return this.walk((function(t,a){if("comment"===t.type)return e(t,a)}))},d.append=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var r=0,n=t;r<n.length;r++){var i=n[r],s=this.normalize(i,this.last),o=s,c=Array.isArray(o),l=0;for(o=c?o:o[Symbol.iterator]();;){var u;if(c){if(l>=o.length)break;u=o[l++]}else{if((l=o.next()).done)break;u=l.value}var d=u;this.nodes.push(d)}}return this},d.prepend=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=t=t.reverse(),n=Array.isArray(r),i=0;for(r=n?r:r[Symbol.iterator]();;){var s;if(n){if(i>=r.length)break;s=r[i++]}else{if((i=r.next()).done)break;s=i.value}var o=s,c=this.normalize(o,this.first,"prepend").reverse(),l=c,u=Array.isArray(l),d=0;for(l=u?l:l[Symbol.iterator]();;){var p;if(u){if(d>=l.length)break;p=l[d++]}else{if((d=l.next()).done)break;p=d.value}var h=p;this.nodes.unshift(h)}for(var f in this.indexes)this.indexes[f]=this.indexes[f]+c.length}return this},d.cleanRaws=function(e){if(t.prototype.cleanRaws.call(this,e),this.nodes){var a=this.nodes,r=Array.isArray(a),n=0;for(a=r?a:a[Symbol.iterator]();;){var i;if(r){if(n>=a.length)break;i=a[n++]}else{if((n=a.next()).done)break;i=n.value}i.cleanRaws(e)}}},d.insertBefore=function(e,t){var a,r=0===(e=this.index(e))&&"prepend",n=this.normalize(t,this.nodes[e],r).reverse(),i=n,s=Array.isArray(i),o=0;for(i=s?i:i[Symbol.iterator]();;){var c;if(s){if(o>=i.length)break;c=i[o++]}else{if((o=i.next()).done)break;c=o.value}var l=c;this.nodes.splice(e,0,l)}for(var u in this.indexes)e<=(a=this.indexes[u])&&(this.indexes[u]=a+n.length);return this},d.insertAfter=function(e,t){e=this.index(e);var a,r=this.normalize(t,this.nodes[e]).reverse(),n=r,i=Array.isArray(n),s=0;for(n=i?n:n[Symbol.iterator]();;){var o;if(i){if(s>=n.length)break;o=n[s++]}else{if((s=n.next()).done)break;o=s.value}var c=o;this.nodes.splice(e+1,0,c)}for(var l in this.indexes)e<(a=this.indexes[l])&&(this.indexes[l]=a+r.length);return this},d.removeChild=function(e){var t;for(var a in e=this.index(e),this.nodes[e].parent=void 0,this.nodes.splice(e,1),this.indexes)(t=this.indexes[a])>=e&&(this.indexes[a]=t-1);return this},d.removeAll=function(){var e=this.nodes,t=Array.isArray(e),a=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(a>=e.length)break;r=e[a++]}else{if((a=e.next()).done)break;r=a.value}r.parent=void 0}return this.nodes=[],this},d.replaceValues=function(e,t,a){return a||(a=t,t={}),this.walkDecls((function(r){t.props&&-1===t.props.indexOf(r.prop)||t.fast&&-1===r.value.indexOf(t.fast)||(r.value=r.value.replace(e,a))})),this},d.every=function(e){return this.nodes.every(e)},d.some=function(e){return this.nodes.some(e)},d.index=function(e){return"number"==typeof e?e:this.nodes.indexOf(e)},d.normalize=function(t,a){var i=this;if("string"==typeof t)t=function e(t){return t.map((function(t){return t.nodes&&(t.nodes=e(t.nodes)),delete t.source,t}))}(e("./parse")(t).nodes);else if(Array.isArray(t)){var s=t=t.slice(0),o=Array.isArray(s),c=0;for(s=o?s:s[Symbol.iterator]();;){var l;if(o){if(c>=s.length)break;l=s[c++]}else{if((c=s.next()).done)break;l=c.value}var u=l;u.parent&&u.parent.removeChild(u,"ignore")}}else if("root"===t.type){var d=t=t.nodes.slice(0),p=Array.isArray(d),h=0;for(d=p?d:d[Symbol.iterator]();;){var f;if(p){if(h>=d.length)break;f=d[h++]}else{if((h=d.next()).done)break;f=h.value}var m=f;m.parent&&m.parent.removeChild(m,"ignore")}}else if(t.type)t=[t];else if(t.prop){if(void 0===t.value)throw new Error("Value field is missed in node creation");"string"!=typeof t.value&&(t.value=String(t.value)),t=[new r.default(t)]}else if(t.selector)t=[new(e("./rule"))(t)];else if(t.name)t=[new(e("./at-rule"))(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new n.default(t)]}return t.map((function(e){return e.parent&&e.parent.removeChild(e),void 0===e.raws.before&&a&&void 0!==a.raws.before&&(e.raws.before=a.raws.before.replace(/[^\s]/g,"")),e.parent=i,e}))},c=o,(l=[{key:"first",get:function(){if(this.nodes)return this.nodes[0]}},{key:"last",get:function(){if(this.nodes)return this.nodes[this.nodes.length-1]}}])&&s(c.prototype,l),u&&s(c,u),o}(i(e("./node")).default);a.default=o,t.exports=a.default},{"./at-rule":169,"./comment":170,"./declaration":173,"./node":178,"./parse":179,"./rule":186}],172:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r=s(e("supports-color")),n=s(e("chalk")),i=s(e("./terminal-highlight"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t="function"==typeof Map?new Map:void 0;return(o=function(e){if(null===e||(a=e,-1===Function.toString.call(a).indexOf("[native code]")))return e;var a;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return l(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),u(r,e)})(e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t,a){return(l=c()?Reflect.construct:function(e,t,a){var r=[null];r.push.apply(r,t);var n=new(Function.bind.apply(e,r));return a&&u(n,a.prototype),n}).apply(null,arguments)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){var t,a;function s(t,a,r,n,i,o){var c;return(c=e.call(this,t)||this).name="CssSyntaxError",c.reason=t,i&&(c.file=i),n&&(c.source=n),o&&(c.plugin=o),void 0!==a&&void 0!==r&&(c.line=a,c.column=r),c.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(c),s),c}a=e,(t=s).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a;var o=s.prototype;return o.setMessage=function(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason},o.showSourceCode=function(e){var t=this;if(!this.source)return"";var a=this.source;i.default&&(void 0===e&&(e=r.default.stdout),e&&(a=(0,i.default)(a)));var s=a.split(/\r?\n/),o=Math.max(this.line-3,0),c=Math.min(this.line+2,s.length),l=String(c).length;function u(t){return e&&n.default.red?n.default.red.bold(t):t}function d(t){return e&&n.default.gray?n.default.gray(t):t}return s.slice(o,c).map((function(e,a){var r=o+1+a,n=" "+(" "+r).slice(-l)+" | ";if(r===t.line){var i=d(n.replace(/\d/g," "))+e.slice(0,t.column-1).replace(/[^\t]/g," ");return u(">")+d(n)+e+"\n "+i+u("^")}return" "+d(n)+e})).join("\n")},o.toString=function(){var e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e},s}(o(Error));a.default=p,t.exports=a.default},{"./terminal-highlight":2,chalk:2,"supports-color":2}],173:[function(e,t,a){var r;a.__esModule=!0,a.default=void 0;var n=function(e){var t,a;function r(t){var a;return(a=e.call(this,t)||this).type="decl",a}return a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,r}(((r=e("./node"))&&r.__esModule?r:{default:r}).default);a.default=n,t.exports=a.default},{"./node":178}],174:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r=s(e("path")),n=s(e("./css-syntax-error")),i=s(e("./previous-map"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=0,u=function(){function e(e,t){if(void 0===t&&(t={}),null===e||"object"===l(e)&&!e.toString)throw new Error("PostCSS received "+e+" instead of CSS string");this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(/^\w+:\/\//.test(t.from)||r.default.isAbsolute(t.from)?this.file=t.from:this.file=r.default.resolve(t.from));var a=new i.default(this.css,t);if(a.text){this.map=a;var n=a.consumer().file;!this.file&&n&&(this.file=this.mapResolve(n))}this.file||(c+=1,this.id="<input css "+c+">"),this.map&&(this.map.file=this.from)}var t,a,s,u=e.prototype;return u.error=function(e,t,a,r){var i;void 0===r&&(r={});var s=this.origin(t,a);return(i=s?new n.default(e,s.line,s.column,s.source,s.file,r.plugin):new n.default(e,t,a,this.css,this.file,r.plugin)).input={line:t,column:a,source:this.css},this.file&&(i.input.file=this.file),i},u.origin=function(e,t){if(!this.map)return!1;var a=this.map.consumer(),r=a.originalPositionFor({line:e,column:t});if(!r.source)return!1;var n={file:this.mapResolve(r.source),line:r.line,column:r.column},i=a.sourceContentFor(r.source);return i&&(n.source=i),n},u.mapResolve=function(e){return/^\w+:\/\//.test(e)?e:r.default.resolve(this.map.consumer().sourceRoot||".",e)},t=e,(a=[{key:"from",get:function(){return this.file||this.id}}])&&o(t.prototype,a),s&&o(t,s),e}();a.default=u,t.exports=a.default},{"./css-syntax-error":172,"./previous-map":182,path:168}],175:[function(e,t,a){(function(r){a.__esModule=!0,a.default=void 0;var n=u(e("./map-generator")),i=u(e("./stringify")),s=u(e("./warn-once")),o=u(e("./result")),c=u(e("./parse"));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return"object"===l(e)&&"function"==typeof e.then}var h=function(){function e(t,a,r){var n;if(this.stringified=!1,this.processed=!1,"object"===l(a)&&null!==a&&"root"===a.type)n=a;else if(a instanceof e||a instanceof o.default)n=a.root,a.map&&(void 0===r.map&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=a.map);else{var i=c.default;r.syntax&&(i=r.syntax.parse),r.parser&&(i=r.parser),i.parse&&(i=i.parse);try{n=i(a,r)}catch(e){this.error=e}}this.result=new o.default(t,n,r)}var t,a,u,h=e.prototype;return h.warnings=function(){return this.sync().warnings()},h.toString=function(){return this.css},h.then=function(e,t){return"production"!==r.env.NODE_ENV&&("from"in this.opts||(0,s.default)("Without `from` option PostCSS could generate wrong source map and will not find Browserslist config. Set it to CSS file path or to `undefined` to prevent this warning.")),this.async().then(e,t)},h.catch=function(e){return this.async().catch(e)},h.finally=function(e){return this.async().then(e,e)},h.handleError=function(e,t){try{if(this.error=e,"CssSyntaxError"!==e.name||e.plugin){if(t.postcssVersion&&"production"!==r.env.NODE_ENV){var a=t.postcssPlugin,n=t.postcssVersion,i=this.result.processor.version,s=n.split("."),o=i.split(".");(s[0]!==o[0]||parseInt(s[1])>parseInt(o[1]))&&console.error("Unknown error from PostCSS plugin. Your current PostCSS version is "+i+", but "+a+" uses "+n+". Perhaps this is the source of the error below.")}}else e.plugin=t.postcssPlugin,e.setMessage()}catch(e){console&&console.error&&console.error(e)}},h.asyncTick=function(e,t){var a=this;if(this.plugin>=this.processor.plugins.length)return this.processed=!0,e();try{var r=this.processor.plugins[this.plugin],n=this.run(r);this.plugin+=1,p(n)?n.then((function(){a.asyncTick(e,t)})).catch((function(e){a.handleError(e,r),a.processed=!0,t(e)})):this.asyncTick(e,t)}catch(e){this.processed=!0,t(e)}},h.async=function(){var e=this;return this.processed?new Promise((function(t,a){e.error?a(e.error):t(e.stringify())})):(this.processing||(this.processing=new Promise((function(t,a){if(e.error)return a(e.error);e.plugin=0,e.asyncTick(t,a)})).then((function(){return e.processed=!0,e.stringify()}))),this.processing)},h.sync=function(){if(this.processed)return this.result;if(this.processed=!0,this.processing)throw new Error("Use process(css).then(cb) to work with async plugins");if(this.error)throw this.error;var e=this.result.processor.plugins,t=Array.isArray(e),a=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(a>=e.length)break;r=e[a++]}else{if((a=e.next()).done)break;r=a.value}var n=r;if(p(this.run(n)))throw new Error("Use process(css).then(cb) to work with async plugins")}return this.result},h.run=function(e){this.result.lastPlugin=e;try{return e(this.result.root,this.result)}catch(t){throw this.handleError(t,e),t}},h.stringify=function(){if(this.stringified)return this.result;this.stringified=!0,this.sync();var e=this.result.opts,t=i.default;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);var a=new n.default(t,this.result.root,this.result.opts).generate();return this.result.css=a[0],this.result.map=a[1],this.result},t=e,(a=[{key:"processor",get:function(){return this.result.processor}},{key:"opts",get:function(){return this.result.opts}},{key:"css",get:function(){return this.stringify().css}},{key:"content",get:function(){return this.stringify().content}},{key:"map",get:function(){return this.stringify().map}},{key:"root",get:function(){return this.sync().root}},{key:"messages",get:function(){return this.sync().messages}}])&&d(t.prototype,a),u&&d(t,u),e}();a.default=h,t.exports=a.default}).call(this,e("_process"))},{"./map-generator":177,"./parse":179,"./result":184,"./stringify":188,"./warn-once":191,_process:193}],176:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r={split:function(e,t,a){for(var r=[],n="",i=!1,s=0,o=!1,c=!1,l=0;l<e.length;l++){var u=e[l];o?c?c=!1:"\\"===u?c=!0:u===o&&(o=!1):'"'===u||"'"===u?o=u:"("===u?s+=1:")"===u?s>0&&(s-=1):0===s&&-1!==t.indexOf(u)&&(i=!0),i?(""!==n&&r.push(n.trim()),n="",i=!1):n+=u}return(a||""!==n)&&r.push(n.trim()),r},space:function(e){return r.split(e,[" ","\n","\t"])},comma:function(e){return r.split(e,[","],!0)}},n=r;a.default=n,t.exports=a.default},{}],177:[function(e,t,a){(function(r){a.__esModule=!0,a.default=void 0;var n=s(e("source-map")),i=s(e("path"));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(e,t,a){this.stringify=e,this.mapOpts=a.map||{},this.root=t,this.opts=a}var t=e.prototype;return t.isMap=function(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0},t.previous=function(){var e=this;return this.previousMaps||(this.previousMaps=[],this.root.walk((function(t){if(t.source&&t.source.input.map){var a=t.source.input.map;-1===e.previousMaps.indexOf(a)&&e.previousMaps.push(a)}}))),this.previousMaps},t.isInline=function(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;var e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((function(e){return e.inline})))},t.isSourcesContent=function(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((function(e){return e.withContent()}))},t.clearAnnotation=function(){if(!1!==this.mapOpts.annotation)for(var e,t=this.root.nodes.length-1;t>=0;t--)"comment"===(e=this.root.nodes[t]).type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)},t.setSourcesContent=function(){var e=this,t={};this.root.walk((function(a){if(a.source){var r=a.source.input.from;if(r&&!t[r]){t[r]=!0;var n=e.relative(r);e.map.setSourceContent(n,a.source.input.css)}}}))},t.applyPrevMaps=function(){var e=this.previous(),t=Array.isArray(e),a=0;for(e=t?e:e[Symbol.iterator]();;){var r;if(t){if(a>=e.length)break;r=e[a++]}else{if((a=e.next()).done)break;r=a.value}var s=r,o=this.relative(s.file),c=s.root||i.default.dirname(s.file),l=void 0;!1===this.mapOpts.sourcesContent?(l=new n.default.SourceMapConsumer(s.text)).sourcesContent&&(l.sourcesContent=l.sourcesContent.map((function(){return null}))):l=s.consumer(),this.map.applySourceMap(l,o,this.relative(c))}},t.isAnnotation=function(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((function(e){return e.annotation})))},t.toBase64=function(e){return r?r.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))},t.addAnnotation=function(){var e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:this.outputFile()+".map";var t="\n";-1!==this.css.indexOf("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"},t.outputFile=function(){return this.opts.to?this.relative(this.opts.to):this.opts.from?this.relative(this.opts.from):"to.css"},t.generateMap=function(){return this.generateString(),this.isSourcesContent()&&this.setSourcesContent(),this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]},t.relative=function(e){if(0===e.indexOf("<"))return e;if(/^\w+:\/\//.test(e))return e;var t=this.opts.to?i.default.dirname(this.opts.to):".";return"string"==typeof this.mapOpts.annotation&&(t=i.default.dirname(i.default.resolve(t,this.mapOpts.annotation))),e=i.default.relative(t,e),"\\"===i.default.sep?e.replace(/\\/g,"/"):e},t.sourcePath=function(e){return this.mapOpts.from?this.mapOpts.from:this.relative(e.source.input.from)},t.generateString=function(){var e=this;this.css="",this.map=new n.default.SourceMapGenerator({file:this.outputFile()});var t,a,r=1,i=1;this.stringify(this.root,(function(n,s,o){if(e.css+=n,s&&"end"!==o&&(s.source&&s.source.start?e.map.addMapping({source:e.sourcePath(s),generated:{line:r,column:i-1},original:{line:s.source.start.line,column:s.source.start.column-1}}):e.map.addMapping({source:"<no source>",original:{line:1,column:0},generated:{line:r,column:i-1}})),(t=n.match(/\n/g))?(r+=t.length,a=n.lastIndexOf("\n"),i=n.length-a):i+=n.length,s&&"start"!==o){var c=s.parent||{raws:{}};("decl"!==s.type||s!==c.last||c.raws.semicolon)&&(s.source&&s.source.end?e.map.addMapping({source:e.sourcePath(s),generated:{line:r,column:i-2},original:{line:s.source.end.line,column:s.source.end.column-1}}):e.map.addMapping({source:"<no source>",original:{line:1,column:0},generated:{line:r,column:i-1}}))}}))},t.generate=function(){if(this.clearAnnotation(),this.isMap())return this.generateMap();var e="";return this.stringify(this.root,(function(t){e+=t})),[e]},e}();a.default=o,t.exports=a.default}).call(this,e("buffer").Buffer)},{buffer:3,path:168,"source-map":208}],178:[function(e,t,a){(function(r){a.__esModule=!0,a.default=void 0;var n=o(e("./css-syntax-error")),i=o(e("./stringifier")),s=o(e("./stringify"));function o(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e){if(void 0===e&&(e={}),this.raws={},"production"!==r.env.NODE_ENV&&"object"!==l(e)&&void 0!==e)throw new Error("PostCSS nodes constructor accepts object, not "+JSON.stringify(e));for(var t in e)this[t]=e[t]}var t=e.prototype;return t.error=function(e,t){if(void 0===t&&(t={}),this.source){var a=this.positionBy(t);return this.source.input.error(e,a.line,a.column,t)}return new n.default(e)},t.warn=function(e,t,a){var r={node:this};for(var n in a)r[n]=a[n];return e.warn(t,r)},t.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},t.toString=function(e){void 0===e&&(e=s.default),e.stringify&&(e=e.stringify);var t="";return e(this,(function(e){t+=e})),t},t.clone=function(e){void 0===e&&(e={});var t=function e(t,a){var r=new t.constructor;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n],s=l(i);"parent"===n&&"object"===s?a&&(r[n]=a):"source"===n?r[n]=i:i instanceof Array?r[n]=i.map((function(t){return e(t,r)})):("object"===s&&null!==i&&(i=e(i)),r[n]=i)}return r}(this);for(var a in e)t[a]=e[a];return t},t.cloneBefore=function(e){void 0===e&&(e={});var t=this.clone(e);return this.parent.insertBefore(this,t),t},t.cloneAfter=function(e){void 0===e&&(e={});var t=this.clone(e);return this.parent.insertAfter(this,t),t},t.replaceWith=function(){if(this.parent){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];for(var r=0,n=t;r<n.length;r++){var i=n[r];this.parent.insertBefore(this,i)}this.remove()}return this},t.next=function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e+1]}},t.prev=function(){if(this.parent){var e=this.parent.index(this);return this.parent.nodes[e-1]}},t.before=function(e){return this.parent.insertBefore(this,e),this},t.after=function(e){return this.parent.insertAfter(this,e),this},t.toJSON=function(){var e={};for(var t in this)if(this.hasOwnProperty(t)&&"parent"!==t){var a=this[t];a instanceof Array?e[t]=a.map((function(e){return"object"===l(e)&&e.toJSON?e.toJSON():e})):"object"===l(a)&&a.toJSON?e[t]=a.toJSON():e[t]=a}return e},t.raw=function(e,t){return(new i.default).raw(this,e,t)},t.root=function(){for(var e=this;e.parent;)e=e.parent;return e},t.cleanRaws=function(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between},t.positionInside=function(e){for(var t=this.toString(),a=this.source.start.column,r=this.source.start.line,n=0;n<e;n++)"\n"===t[n]?(a=1,r+=1):a+=1;return{line:r,column:a}},t.positionBy=function(e){var t=this.source.start;if(e.index)t=this.positionInside(e.index);else if(e.word){var a=this.toString().indexOf(e.word);-1!==a&&(t=this.positionInside(a))}return t},e}();a.default=c,t.exports=a.default}).call(this,e("_process"))},{"./css-syntax-error":172,"./stringifier":187,"./stringify":188,_process:193}],179:[function(e,t,a){(function(r){a.__esModule=!0,a.default=void 0;var n=s(e("./parser")),i=s(e("./input"));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t){var a=new i.default(e,t),s=new n.default(a);try{s.parse()}catch(e){throw"production"!==r.env.NODE_ENV&&"CssSyntaxError"===e.name&&t&&t.from&&(/\.scss$/i.test(t.from)?e.message+="\nYou tried to parse SCSS with the standard CSS parser; try again with the postcss-scss parser":/\.sass/i.test(t.from)?e.message+="\nYou tried to parse Sass with the standard CSS parser; try again with the postcss-sass parser":/\.less$/i.test(t.from)&&(e.message+="\nYou tried to parse Less with the standard CSS parser; try again with the postcss-less parser")),e}return s.root};a.default=o,t.exports=a.default}).call(this,e("_process"))},{"./input":174,"./parser":180,_process:193}],180:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r=l(e("./declaration")),n=l(e("./tokenize")),i=l(e("./comment")),s=l(e("./at-rule")),o=l(e("./root")),c=l(e("./rule"));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(e){this.input=e,this.root=new o.default,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{line:1,column:1}}}var t=e.prototype;return t.createTokenizer=function(){this.tokenizer=(0,n.default)(this.input)},t.parse=function(){for(var e;!this.tokenizer.endOfFile();)switch((e=this.tokenizer.nextToken())[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()},t.comment=function(e){var t=new i.default;this.init(t,e[2],e[3]),t.source.end={line:e[4],column:e[5]};var a=e[1].slice(2,-2);if(/^\s*$/.test(a))t.text="",t.raws.left=a,t.raws.right="";else{var r=a.match(/^(\s*)([^]*[^\s])(\s*)$/);t.text=r[2],t.raws.left=r[1],t.raws.right=r[3]}},t.emptyRule=function(e){var t=new c.default;this.init(t,e[2],e[3]),t.selector="",t.raws.between="",this.current=t},t.other=function(e){for(var t=!1,a=null,r=!1,n=null,i=[],s=[],o=e;o;){if(a=o[0],s.push(o),"("===a||"["===a)n||(n=o),i.push("("===a?")":"]");else if(0===i.length){if(";"===a){if(r)return void this.decl(s);break}if("{"===a)return void this.rule(s);if("}"===a){this.tokenizer.back(s.pop()),t=!0;break}":"===a&&(r=!0)}else a===i[i.length-1]&&(i.pop(),0===i.length&&(n=null));o=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),i.length>0&&this.unclosedBracket(n),t&&r){for(;s.length&&("space"===(o=s[s.length-1][0])||"comment"===o);)this.tokenizer.back(s.pop());this.decl(s)}else this.unknownWord(s)},t.rule=function(e){e.pop();var t=new c.default;this.init(t,e[0][2],e[0][3]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t},t.decl=function(e){var t=new r.default;this.init(t);var a,n=e[e.length-1];for(";"===n[0]&&(this.semicolon=!0,e.pop()),n[4]?t.source.end={line:n[4],column:n[5]}:t.source.end={line:n[2],column:n[3]};"word"!==e[0][0];)1===e.length&&this.unknownWord(e),t.raws.before+=e.shift()[1];for(t.source.start={line:e[0][2],column:e[0][3]},t.prop="";e.length;){var i=e[0][0];if(":"===i||"space"===i||"comment"===i)break;t.prop+=e.shift()[1]}for(t.raws.between="";e.length;){if(":"===(a=e.shift())[0]){t.raws.between+=a[1];break}"word"===a[0]&&/\w/.test(a[1])&&this.unknownWord([a]),t.raws.between+=a[1]}"_"!==t.prop[0]&&"*"!==t.prop[0]||(t.raws.before+=t.prop[0],t.prop=t.prop.slice(1)),t.raws.between+=this.spacesAndCommentsFromStart(e),this.precheckMissedSemicolon(e);for(var s=e.length-1;s>0;s--){if("!important"===(a=e[s])[1].toLowerCase()){t.important=!0;var o=this.stringFrom(e,s);" !important"!==(o=this.spacesFromEnd(e)+o)&&(t.raws.important=o);break}if("important"===a[1].toLowerCase()){for(var c=e.slice(0),l="",u=s;u>0;u--){var d=c[u][0];if(0===l.trim().indexOf("!")&&"space"!==d)break;l=c.pop()[1]+l}0===l.trim().indexOf("!")&&(t.important=!0,t.raws.important=l,e=c)}if("space"!==a[0]&&"comment"!==a[0])break}this.raw(t,"value",e),-1!==t.value.indexOf(":")&&this.checkMissedSemicolon(e)},t.atrule=function(e){var t,a,r=new s.default;r.name=e[1].slice(1),""===r.name&&this.unnamedAtrule(r,e),this.init(r,e[2],e[3]);for(var n=!1,i=!1,o=[];!this.tokenizer.endOfFile();){if(";"===(e=this.tokenizer.nextToken())[0]){r.source.end={line:e[2],column:e[3]},this.semicolon=!0;break}if("{"===e[0]){i=!0;break}if("}"===e[0]){if(o.length>0){for(t=o[a=o.length-1];t&&"space"===t[0];)t=o[--a];t&&(r.source.end={line:t[4],column:t[5]})}this.end(e);break}if(o.push(e),this.tokenizer.endOfFile()){n=!0;break}}r.raws.between=this.spacesAndCommentsFromEnd(o),o.length?(r.raws.afterName=this.spacesAndCommentsFromStart(o),this.raw(r,"params",o),n&&(e=o[o.length-1],r.source.end={line:e[4],column:e[5]},this.spaces=r.raws.between,r.raws.between="")):(r.raws.afterName="",r.params=""),i&&(r.nodes=[],this.current=r)},t.end=function(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end={line:e[2],column:e[3]},this.current=this.current.parent):this.unexpectedClose(e)},t.endFile=function(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces},t.freeSemicolon=function(e){if(this.spaces+=e[1],this.current.nodes){var t=this.current.nodes[this.current.nodes.length-1];t&&"rule"===t.type&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}},t.init=function(e,t,a){this.current.push(e),e.source={start:{line:t,column:a},input:this.input},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)},t.raw=function(e,t,a){for(var r,n,i,s,o=a.length,c="",l=!0,u=/^([.|#])?([\w])+/i,d=0;d<o;d+=1)"comment"!==(n=(r=a[d])[0])||"rule"!==e.type?"comment"===n||"space"===n&&d===o-1?l=!1:c+=r[1]:(s=a[d-1],i=a[d+1],"space"!==s[0]&&"space"!==i[0]&&u.test(s[1])&&u.test(i[1])?c+=r[1]:l=!1);if(!l){var p=a.reduce((function(e,t){return e+t[1]}),"");e.raws[t]={value:c,raw:p}}e[t]=c},t.spacesAndCommentsFromEnd=function(e){for(var t,a="";e.length&&("space"===(t=e[e.length-1][0])||"comment"===t);)a=e.pop()[1]+a;return a},t.spacesAndCommentsFromStart=function(e){for(var t,a="";e.length&&("space"===(t=e[0][0])||"comment"===t);)a+=e.shift()[1];return a},t.spacesFromEnd=function(e){for(var t="";e.length&&"space"===e[e.length-1][0];)t=e.pop()[1]+t;return t},t.stringFrom=function(e,t){for(var a="",r=t;r<e.length;r++)a+=e[r][1];return e.splice(t,e.length-t),a},t.colon=function(e){for(var t,a,r,n=0,i=0;i<e.length;i++){if("("===(a=(t=e[i])[0])&&(n+=1),")"===a&&(n-=1),0===n&&":"===a){if(r){if("word"===r[0]&&"progid"===r[1])continue;return i}this.doubleColon(t)}r=t}return!1},t.unclosedBracket=function(e){throw this.input.error("Unclosed bracket",e[2],e[3])},t.unknownWord=function(e){throw this.input.error("Unknown word",e[0][2],e[0][3])},t.unexpectedClose=function(e){throw this.input.error("Unexpected }",e[2],e[3])},t.unclosedBlock=function(){var e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)},t.doubleColon=function(e){throw this.input.error("Double colon",e[2],e[3])},t.unnamedAtrule=function(e,t){throw this.input.error("At-rule without name",t[2],t[3])},t.precheckMissedSemicolon=function(){},t.checkMissedSemicolon=function(e){var t=this.colon(e);if(!1!==t){for(var a,r=0,n=t-1;n>=0&&("space"===(a=e[n])[0]||2!==(r+=1));n--);throw this.input.error("Missed semicolon",a[2],a[3])}},e}();a.default=u,t.exports=a.default},{"./at-rule":169,"./comment":170,"./declaration":173,"./root":185,"./rule":186,"./tokenize":189}],181:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r=h(e("./declaration")),n=h(e("./processor")),i=h(e("./stringify")),s=h(e("./comment")),o=h(e("./at-rule")),c=h(e("./vendor")),l=h(e("./parse")),u=h(e("./list")),d=h(e("./rule")),p=h(e("./root"));function h(e){return e&&e.__esModule?e:{default:e}}function f(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return 1===t.length&&Array.isArray(t[0])&&(t=t[0]),new n.default(t)}f.plugin=function(e,t){function a(){var a=t.apply(void 0,arguments);return a.postcssPlugin=e,a.postcssVersion=(new n.default).version,a}var r;return Object.defineProperty(a,"postcss",{get:function(){return r||(r=a()),r}}),a.process=function(e,t,r){return f([a(r)]).process(e,t)},a},f.stringify=i.default,f.parse=l.default,f.vendor=c.default,f.list=u.default,f.comment=function(e){return new s.default(e)},f.atRule=function(e){return new o.default(e)},f.decl=function(e){return new r.default(e)},f.rule=function(e){return new d.default(e)},f.root=function(e){return new p.default(e)};var m=f;a.default=m,t.exports=a.default},{"./at-rule":169,"./comment":170,"./declaration":173,"./list":176,"./parse":179,"./processor":183,"./root":185,"./rule":186,"./stringify":188,"./vendor":190}],182:[function(e,t,a){(function(r){a.__esModule=!0,a.default=void 0;var n=o(e("source-map")),i=o(e("path")),s=o(e("fs"));function o(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");var a=t.map?t.map.prev:void 0,r=this.loadMap(t.from,a);r&&(this.text=r)}var t=e.prototype;return t.consumer=function(){return this.consumerCache||(this.consumerCache=new n.default.SourceMapConsumer(this.text)),this.consumerCache},t.withContent=function(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)},t.startWith=function(e,t){return!!e&&e.substr(0,t.length)===t},t.getAnnotationURL=function(e){return e.match(/\/\*\s*# sourceMappingURL=(.*)\s*\*\//)[1].trim()},t.loadAnnotation=function(e){var t=e.match(/\/\*\s*# sourceMappingURL=(.*)\s*\*\//gm);if(t&&t.length>0){var a=t[t.length-1];a&&(this.annotation=this.getAnnotationURL(a))}},t.decodeInline=function(e){var t,a="data:application/json,";if(this.startWith(e,a))return decodeURIComponent(e.substr(a.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),r?r.from(t,"base64").toString():window.atob(t);var n=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+n)},t.loadMap=function(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"==typeof t){var a=t(e);if(a&&s.default.existsSync&&s.default.existsSync(a))return s.default.readFileSync(a,"utf-8").toString().trim();throw new Error("Unable to load previous source map: "+a.toString())}if(t instanceof n.default.SourceMapConsumer)return n.default.SourceMapGenerator.fromSourceMap(t).toString();if(t instanceof n.default.SourceMapGenerator)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){var r=this.annotation;return e&&(r=i.default.join(i.default.dirname(e),r)),this.root=i.default.dirname(r),!(!s.default.existsSync||!s.default.existsSync(r))&&s.default.readFileSync(r,"utf-8").toString().trim()}},t.isMap=function(e){return"object"===l(e)&&("string"==typeof e.mappings||"string"==typeof e._mappings)},e}();a.default=c,t.exports=a.default}).call(this,e("buffer").Buffer)},{buffer:3,fs:2,path:168,"source-map":208}],183:[function(e,t,a){(function(r){a.__esModule=!0,a.default=void 0;var n,i=(n=e("./lazy-result"))&&n.__esModule?n:{default:n},s=function(){function e(e){void 0===e&&(e=[]),this.version="7.0.31",this.plugins=this.normalize(e)}var t=e.prototype;return t.use=function(e){return this.plugins=this.plugins.concat(this.normalize([e])),this},t.process=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return void 0===t&&(t={}),0===this.plugins.length&&t.parser===t.stringifier&&"production"!==r.env.NODE_ENV&&"undefined"!=typeof console&&console.warn&&console.warn("You did not set any plugins, parser, or stringifier. Right now, PostCSS does nothing. Pick plugins for your case on https://www.postcss.parts/ and use them in postcss.config.js."),new i.default(this,e,t)})),t.normalize=function(e){var t=[],a=e,n=Array.isArray(a),i=0;for(a=n?a:a[Symbol.iterator]();;){var s;if(n){if(i>=a.length)break;s=a[i++]}else{if((i=a.next()).done)break;s=i.value}var o=s;if(o.postcss&&(o=o.postcss),"object"===l(o)&&Array.isArray(o.plugins))t=t.concat(o.plugins);else if("function"==typeof o)t.push(o);else{if("object"!==l(o)||!o.parse&&!o.stringify)throw new Error(o+" is not a PostCSS plugin");if("production"!==r.env.NODE_ENV)throw new Error("PostCSS syntaxes cannot be used as plugins. Instead, please use one of the syntax/parser/stringifier options as outlined in your PostCSS runner documentation.")}}return t},e}();a.default=s,t.exports=a.default}).call(this,e("_process"))},{"./lazy-result":175,_process:193}],184:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r,n=(r=e("./warning"))&&r.__esModule?r:{default:r};function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(e,t,a){this.processor=e,this.messages=[],this.root=t,this.opts=a,this.css=void 0,this.map=void 0}var t,a,r,s=e.prototype;return s.toString=function(){return this.css},s.warn=function(e,t){void 0===t&&(t={}),t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);var a=new n.default(e,t);return this.messages.push(a),a},s.warnings=function(){return this.messages.filter((function(e){return"warning"===e.type}))},t=e,(a=[{key:"content",get:function(){return this.css}}])&&i(t.prototype,a),r&&i(t,r),e}();a.default=s,t.exports=a.default},{"./warning":192}],185:[function(e,t,a){var r;a.__esModule=!0,a.default=void 0;var n=function(t){var a,r;function n(e){var a;return(a=t.call(this,e)||this).type="root",a.nodes||(a.nodes=[]),a}r=t,(a=n).prototype=Object.create(r.prototype),a.prototype.constructor=a,a.__proto__=r;var i=n.prototype;return i.removeChild=function(e,a){var r=this.index(e);return!a&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),t.prototype.removeChild.call(this,e)},i.normalize=function(e,a,r){var n=t.prototype.normalize.call(this,e);if(a)if("prepend"===r)this.nodes.length>1?a.raws.before=this.nodes[1].raws.before:delete a.raws.before;else if(this.first!==a){var i=n,s=Array.isArray(i),o=0;for(i=s?i:i[Symbol.iterator]();;){var c;if(s){if(o>=i.length)break;c=i[o++]}else{if((o=i.next()).done)break;c=o.value}c.raws.before=a.raws.before}}return n},i.toResult=function(t){return void 0===t&&(t={}),new(e("./lazy-result"))(new(e("./processor")),this,t).stringify()},n}(((r=e("./container"))&&r.__esModule?r:{default:r}).default);a.default=n,t.exports=a.default},{"./container":171,"./lazy-result":175,"./processor":183}],186:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r=i(e("./container")),n=i(e("./list"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(e){var t,a,r,i,o;function c(t){var a;return(a=e.call(this,t)||this).type="rule",a.nodes||(a.nodes=[]),a}return a=e,(t=c).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,r=c,(i=[{key:"selectors",get:function(){return n.default.comma(this.selector)},set:function(e){var t=this.selector?this.selector.match(/,\s*/):null,a=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(a)}}])&&s(r.prototype,i),o&&s(r,o),c}(r.default);a.default=o,t.exports=a.default},{"./container":171,"./list":176}],187:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r={colon:": ",indent:"    ",beforeDecl:"\n",beforeRule:"\n",beforeOpen:" ",beforeClose:"\n",beforeComment:"\n",after:"\n",emptyBody:"",commentLeft:" ",commentRight:" ",semicolon:!1},n=function(){function e(e){this.builder=e}var t=e.prototype;return t.stringify=function(e,t){this[e.type](e,t)},t.root=function(e){this.body(e),e.raws.after&&this.builder(e.raws.after)},t.comment=function(e){var t=this.raw(e,"left","commentLeft"),a=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+a+"*/",e)},t.decl=function(e,t){var a=this.raw(e,"between","colon"),r=e.prop+a+this.rawValue(e,"value");e.important&&(r+=e.raws.important||" !important"),t&&(r+=";"),this.builder(r,e)},t.rule=function(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")},t.atrule=function(e,t){var a="@"+e.name,r=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?a+=e.raws.afterName:r&&(a+=" "),e.nodes)this.block(e,a+r);else{var n=(e.raws.between||"")+(t?";":"");this.builder(a+r+n,e)}},t.body=function(e){for(var t=e.nodes.length-1;t>0&&"comment"===e.nodes[t].type;)t-=1;for(var a=this.raw(e,"semicolon"),r=0;r<e.nodes.length;r++){var n=e.nodes[r],i=this.raw(n,"before");i&&this.builder(i),this.stringify(n,t!==r||a)}},t.block=function(e,t){var a,r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),a=this.raw(e,"after")):a=this.raw(e,"after","emptyBody"),a&&this.builder(a),this.builder("}",e,"end")},t.raw=function(e,t,a){var n;if(a||(a=t),t&&void 0!==(n=e.raws[t]))return n;var i=e.parent;if("before"===a&&(!i||"root"===i.type&&i.first===e))return"";if(!i)return r[a];var s=e.root();if(s.rawCache||(s.rawCache={}),void 0!==s.rawCache[a])return s.rawCache[a];if("before"===a||"after"===a)return this.beforeAfter(e,a);var o,c="raw"+((o=a)[0].toUpperCase()+o.slice(1));return this[c]?n=this[c](s,e):s.walk((function(e){if(void 0!==(n=e.raws[t]))return!1})),void 0===n&&(n=r[a]),s.rawCache[a]=n,n},t.rawSemicolon=function(e){var t;return e.walk((function(e){if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&void 0!==(t=e.raws.semicolon))return!1})),t},t.rawEmptyBody=function(e){var t;return e.walk((function(e){if(e.nodes&&0===e.nodes.length&&void 0!==(t=e.raws.after))return!1})),t},t.rawIndent=function(e){return e.raws.indent?e.raws.indent:(e.walk((function(a){var r=a.parent;if(r&&r!==e&&r.parent&&r.parent===e&&void 0!==a.raws.before){var n=a.raws.before.split("\n");return t=(t=n[n.length-1]).replace(/[^\s]/g,""),!1}})),t);var t},t.rawBeforeComment=function(e,t){var a;return e.walkComments((function(e){if(void 0!==e.raws.before)return-1!==(a=e.raws.before).indexOf("\n")&&(a=a.replace(/[^\n]+$/,"")),!1})),void 0===a?a=this.raw(t,null,"beforeDecl"):a&&(a=a.replace(/[^\s]/g,"")),a},t.rawBeforeDecl=function(e,t){var a;return e.walkDecls((function(e){if(void 0!==e.raws.before)return-1!==(a=e.raws.before).indexOf("\n")&&(a=a.replace(/[^\n]+$/,"")),!1})),void 0===a?a=this.raw(t,null,"beforeRule"):a&&(a=a.replace(/[^\s]/g,"")),a},t.rawBeforeRule=function(e){var t;return e.walk((function(a){if(a.nodes&&(a.parent!==e||e.first!==a)&&void 0!==a.raws.before)return-1!==(t=a.raws.before).indexOf("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/[^\s]/g,"")),t},t.rawBeforeClose=function(e){var t;return e.walk((function(e){if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return-1!==(t=e.raws.after).indexOf("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/[^\s]/g,"")),t},t.rawBeforeOpen=function(e){var t;return e.walk((function(e){if("decl"!==e.type&&void 0!==(t=e.raws.between))return!1})),t},t.rawColon=function(e){var t;return e.walkDecls((function(e){if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t},t.beforeAfter=function(e,t){var a;a="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");for(var r=e.parent,n=0;r&&"root"!==r.type;)n+=1,r=r.parent;if(-1!==a.indexOf("\n")){var i=this.raw(e,null,"indent");if(i.length)for(var s=0;s<n;s++)a+=i}return a},t.rawValue=function(e,t){var a=e[t],r=e.raws[t];return r&&r.value===a?r.raw:a},e}();a.default=n,t.exports=a.default},{}],188:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r,n=(r=e("./stringifier"))&&r.__esModule?r:{default:r},i=function(e,t){new n.default(t).stringify(e)};a.default=i,t.exports=a.default},{"./stringifier":187}],189:[function(e,t,a){a.__esModule=!0,a.default=function(e,t){void 0===t&&(t={});var a,E,C,A,M,T,j,O,D,I,R,B,q,L,N=e.css.valueOf(),F=t.ignoreErrors,U=N.length,$=-1,z=1,H=0,G=[],K=[];function W(t){throw e.error("Unclosed "+t,z,H-$)}return{back:function(e){K.push(e)},nextToken:function(e){if(K.length)return K.pop();if(!(H>=U)){var t=!!e&&e.ignoreUnclosed;switch(((a=N.charCodeAt(H))===o||a===l||a===d&&N.charCodeAt(H+1)!==o)&&($=H,z+=1),a){case o:case c:case u:case d:case l:E=H;do{E+=1,(a=N.charCodeAt(E))===o&&($=E,z+=1)}while(a===c||a===o||a===u||a===d||a===l);L=["space",N.slice(H,E)],H=E-1;break;case p:case h:case g:case b:case _:case y:case m:var V=String.fromCharCode(a);L=[V,V,z,H-$];break;case f:if(B=G.length?G.pop()[1]:"",q=N.charCodeAt(H+1),"url"===B&&q!==r&&q!==n&&q!==c&&q!==o&&q!==u&&q!==l&&q!==d){E=H;do{if(I=!1,-1===(E=N.indexOf(")",E+1))){if(F||t){E=H;break}W("bracket")}for(R=E;N.charCodeAt(R-1)===i;)R-=1,I=!I}while(I);L=["brackets",N.slice(H,E+1),z,H-$,z,E-$],H=E}else E=N.indexOf(")",H+1),T=N.slice(H,E+1),-1===E||S.test(T)?L=["(","(",z,H-$]:(L=["brackets",T,z,H-$,z,E-$],H=E);break;case r:case n:C=a===r?"'":'"',E=H;do{if(I=!1,-1===(E=N.indexOf(C,E+1))){if(F||t){E=H+1;break}W("string")}for(R=E;N.charCodeAt(R-1)===i;)R-=1,I=!I}while(I);T=N.slice(H,E+1),A=T.split("\n"),(M=A.length-1)>0?(O=z+M,D=E-A[M].length):(O=z,D=$),L=["string",N.slice(H,E+1),z,H-$,O,E-D],$=D,z=O,H=E;break;case w:x.lastIndex=H+1,x.test(N),E=0===x.lastIndex?N.length-1:x.lastIndex-2,L=["at-word",N.slice(H,E+1),z,H-$,z,E-$],H=E;break;case i:for(E=H,j=!0;N.charCodeAt(E+1)===i;)E+=1,j=!j;if(a=N.charCodeAt(E+1),j&&a!==s&&a!==c&&a!==o&&a!==u&&a!==d&&a!==l&&(E+=1,P.test(N.charAt(E)))){for(;P.test(N.charAt(E+1));)E+=1;N.charCodeAt(E+1)===c&&(E+=1)}L=["word",N.slice(H,E+1),z,H-$,z,E-$],H=E;break;default:a===s&&N.charCodeAt(H+1)===v?(0===(E=N.indexOf("*/",H+2)+1)&&(F||t?E=N.length:W("comment")),T=N.slice(H,E+1),A=T.split("\n"),(M=A.length-1)>0?(O=z+M,D=E-A[M].length):(O=z,D=$),L=["comment",T,z,H-$,O,E-D],$=D,z=O,H=E):(k.lastIndex=H+1,k.test(N),E=0===k.lastIndex?N.length-1:k.lastIndex-2,L=["word",N.slice(H,E+1),z,H-$,z,E-$],G.push(L),H=E)}return H++,L}},endOfFile:function(){return 0===K.length&&H>=U},position:function(){return H}}};var r="'".charCodeAt(0),n='"'.charCodeAt(0),i="\\".charCodeAt(0),s="/".charCodeAt(0),o="\n".charCodeAt(0),c=" ".charCodeAt(0),l="\f".charCodeAt(0),u="\t".charCodeAt(0),d="\r".charCodeAt(0),p="[".charCodeAt(0),h="]".charCodeAt(0),f="(".charCodeAt(0),m=")".charCodeAt(0),g="{".charCodeAt(0),b="}".charCodeAt(0),y=";".charCodeAt(0),v="*".charCodeAt(0),_=":".charCodeAt(0),w="@".charCodeAt(0),x=/[ \n\t\r\f{}()'"\\;/[\]#]/g,k=/[ \n\t\r\f(){}:;@!'"\\\][#]|\/(?=\*)/g,S=/.[\\/("'\n]/,P=/[a-f0-9]/i;t.exports=a.default},{}],190:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r={prefix:function(e){var t=e.match(/^(-\w+-)/);return t?t[0]:""},unprefixed:function(e){return e.replace(/^-\w+-/,"")}};a.default=r,t.exports=a.default},{}],191:[function(e,t,a){a.__esModule=!0,a.default=function(e){r[e]||(r[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))};var r={};t.exports=a.default},{}],192:[function(e,t,a){a.__esModule=!0,a.default=void 0;var r=function(){function e(e,t){if(void 0===t&&(t={}),this.type="warning",this.text=e,t.node&&t.node.source){var a=t.node.positionBy(t);this.line=a.line,this.column=a.column}for(var r in t)this[r]=t[r]}return e.prototype.toString=function(){return this.node?this.node.error(this.text,{plugin:this.plugin,index:this.index,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text},e}();a.default=r,t.exports=a.default},{}],193:[function(e,t,a){var r,n,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var l,u=[],d=!1,p=-1;function h(){d&&l&&(d=!1,l.length?u=l.concat(u):p=-1,u.length&&f())}function f(){if(!d){var e=c(h);d=!0;for(var t=u.length;t;){for(l=u,u=[];++p<t;)l&&l[p].run();p=-1,t=u.length}l=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];u.push(new m(e,t)),1!==u.length||d||c(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],194:[function(e,t,r){(function(e){!function(a){var n="object"==l(r)&&r&&!r.nodeType&&r,i="object"==l(t)&&t&&!t.nodeType&&t,s="object"==l(e)&&e;s.global!==s&&s.window!==s&&s.self!==s||(a=s);var o,c,u=2147483647,d=/^xn--/,p=/[^\x20-\x7E]/,h=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,g=String.fromCharCode;function b(e){throw new RangeError(f[e])}function y(e,t){for(var a=e.length,r=[];a--;)r[a]=t(e[a]);return r}function v(e,t){var a=e.split("@"),r="";return a.length>1&&(r=a[0]+"@",e=a[1]),r+y((e=e.replace(h,".")).split("."),t).join(".")}function _(e){for(var t,a,r=[],n=0,i=e.length;n<i;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<i?56320==(64512&(a=e.charCodeAt(n++)))?r.push(((1023&t)<<10)+(1023&a)+65536):(r.push(t),n--):r.push(t);return r}function w(e){return y(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=g(e)})).join("")}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function k(e,t,a){var r=0;for(e=a?m(e/700):e>>1,e+=m(e/t);e>455;r+=36)e=m(e/35);return m(r+36*e/(e+38))}function S(e){var t,a,r,n,i,s,o,c,l,d,p,h=[],f=e.length,g=0,y=128,v=72;for((a=e.lastIndexOf("-"))<0&&(a=0),r=0;r<a;++r)e.charCodeAt(r)>=128&&b("not-basic"),h.push(e.charCodeAt(r));for(n=a>0?a+1:0;n<f;){for(i=g,s=1,o=36;n>=f&&b("invalid-input"),((c=(p=e.charCodeAt(n++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36)>=36||c>m((u-g)/s))&&b("overflow"),g+=c*s,!(c<(l=o<=v?1:o>=v+26?26:o-v));o+=36)s>m(u/(d=36-l))&&b("overflow"),s*=d;v=k(g-i,t=h.length+1,0==i),m(g/t)>u-y&&b("overflow"),y+=m(g/t),g%=t,h.splice(g++,0,y)}return w(h)}function P(e){var t,a,r,n,i,s,o,c,l,d,p,h,f,y,v,w=[];for(h=(e=_(e)).length,t=128,a=0,i=72,s=0;s<h;++s)(p=e[s])<128&&w.push(g(p));for(r=n=w.length,n&&w.push("-");r<h;){for(o=u,s=0;s<h;++s)(p=e[s])>=t&&p<o&&(o=p);for(o-t>m((u-a)/(f=r+1))&&b("overflow"),a+=(o-t)*f,t=o,s=0;s<h;++s)if((p=e[s])<t&&++a>u&&b("overflow"),p==t){for(c=a,l=36;!(c<(d=l<=i?1:l>=i+26?26:l-i));l+=36)v=c-d,y=36-d,w.push(g(x(d+v%y,0))),c=m(v/y);w.push(g(x(c,0))),i=k(a,f,r==n),a=0,++r}++a,++t}return w.join("")}if(o={version:"1.4.1",ucs2:{decode:_,encode:w},decode:S,encode:P,toASCII:function(e){return v(e,(function(e){return p.test(e)?"xn--"+P(e):e}))},toUnicode:function(e){return v(e,(function(e){return d.test(e)?S(e.slice(4).toLowerCase()):e}))}},n&&i)if(t.exports==n)i.exports=o;else for(c in o)o.hasOwnProperty(c)&&(n[c]=o[c]);else a.punycode=o}(this)}).call(this,void 0!==a?a:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],195:[function(e,t,a){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,a,i){t=t||"&",a=a||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var d,p,h,f,m=e[u].replace(o,"%20"),g=m.indexOf(a);g>=0?(d=m.substr(0,g),p=m.substr(g+1)):(d=m,p=""),h=decodeURIComponent(d),f=decodeURIComponent(p),r(s,h)?n(s[h])?s[h].push(f):s[h]=[s[h],f]:s[h]=f}return s};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],196:[function(e,t,a){var r=function(e){switch(l(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,a,o){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"===l(e)?i(s(e),(function(s){var o=encodeURIComponent(r(s))+a;return n(e[s])?i(e[s],(function(e){return o+encodeURIComponent(r(e))})).join(t):o+encodeURIComponent(r(e[s]))})).join(t):o?encodeURIComponent(r(o))+a+encodeURIComponent(r(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var a=[],r=0;r<e.length;r++)a.push(t(e[r],r));return a}var s=Object.keys||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t}},{}],197:[function(e,t,a){a.decode=a.parse=e("./decode"),a.encode=a.stringify=e("./encode")},{"./decode":195,"./encode":196}],198:[function(e,t,a){var r=e("./util"),n=Object.prototype.hasOwnProperty,i="undefined"!=typeof Map;function s(){this._array=[],this._set=i?new Map:Object.create(null)}s.fromArray=function(e,t){for(var a=new s,r=0,n=e.length;r<n;r++)a.add(e[r],t);return a},s.prototype.size=function(){return i?this._set.size:Object.getOwnPropertyNames(this._set).length},s.prototype.add=function(e,t){var a=i?e:r.toSetString(e),s=i?this.has(e):n.call(this._set,a),o=this._array.length;s&&!t||this._array.push(e),s||(i?this._set.set(e,o):this._set[a]=o)},s.prototype.has=function(e){if(i)return this._set.has(e);var t=r.toSetString(e);return n.call(this._set,t)},s.prototype.indexOf=function(e){if(i){var t=this._set.get(e);if(t>=0)return t}else{var a=r.toSetString(e);if(n.call(this._set,a))return this._set[a]}throw new Error('"'+e+'" is not in the set.')},s.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},s.prototype.toArray=function(){return this._array.slice()},a.ArraySet=s},{"./util":207}],199:[function(e,t,a){var r=e("./base64");a.encode=function(e){var t,a="",n=function(e){return e<0?1+(-e<<1):0+(e<<1)}(e);do{t=31&n,(n>>>=5)>0&&(t|=32),a+=r.encode(t)}while(n>0);return a},a.decode=function(e,t,a){var n,i,s,o,c=e.length,l=0,u=0;do{if(t>=c)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(i=r.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1));n=!!(32&i),l+=(i&=31)<<u,u+=5}while(n);a.value=(o=(s=l)>>1,1==(1&s)?-o:o),a.rest=t}},{"./base64":200}],200:[function(e,t,a){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");a.encode=function(e){if(0<=e&&e<r.length)return r[e];throw new TypeError("Must be between 0 and 63: "+e)},a.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}},{}],201:[function(e,t,a){a.GREATEST_LOWER_BOUND=1,a.LEAST_UPPER_BOUND=2,a.search=function(e,t,r,n){if(0===t.length)return-1;var i=function e(t,r,n,i,s,o){var c=Math.floor((r-t)/2)+t,l=s(n,i[c],!0);return 0===l?c:l>0?r-c>1?e(c,r,n,i,s,o):o==a.LEAST_UPPER_BOUND?r<i.length?r:-1:c:c-t>1?e(t,c,n,i,s,o):o==a.LEAST_UPPER_BOUND?c:t<0?-1:t}(-1,t.length,e,t,r,n||a.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&0===r(t[i],t[i-1],!0);)--i;return i}},{}],202:[function(e,t,a){var r=e("./util");function n(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}n.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},n.prototype.add=function(e){var t,a,n,i,s,o;t=this._last,a=e,n=t.generatedLine,i=a.generatedLine,s=t.generatedColumn,o=a.generatedColumn,i>n||i==n&&o>=s||r.compareByGeneratedPositionsInflated(t,a)<=0?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},n.prototype.toArray=function(){return this._sorted||(this._array.sort(r.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},a.MappingList=n},{"./util":207}],203:[function(e,t,a){function r(e,t,a){var r=e[t];e[t]=e[a],e[a]=r}function n(e,t,a,i){if(a<i){var s=a-1;r(e,(u=a,d=i,Math.round(u+Math.random()*(d-u))),i);for(var o=e[i],c=a;c<i;c++)t(e[c],o)<=0&&r(e,s+=1,c);r(e,s+1,c);var l=s+1;n(e,t,a,l-1),n(e,t,l+1,i)}var u,d}a.quickSort=function(e,t){n(e,t,0,e.length-1)}},{}],204:[function(e,t,a){var r=e("./util"),n=e("./binary-search"),i=e("./array-set").ArraySet,s=e("./base64-vlq"),o=e("./quick-sort").quickSort;function c(e,t){var a=e;return"string"==typeof e&&(a=r.parseSourceMapInput(e)),null!=a.sections?new d(a,t):new l(a,t)}function l(e,t){var a=e;"string"==typeof e&&(a=r.parseSourceMapInput(e));var n=r.getArg(a,"version"),s=r.getArg(a,"sources"),o=r.getArg(a,"names",[]),c=r.getArg(a,"sourceRoot",null),l=r.getArg(a,"sourcesContent",null),u=r.getArg(a,"mappings"),d=r.getArg(a,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);c&&(c=r.normalize(c)),s=s.map(String).map(r.normalize).map((function(e){return c&&r.isAbsolute(c)&&r.isAbsolute(e)?r.relative(c,e):e})),this._names=i.fromArray(o.map(String),!0),this._sources=i.fromArray(s,!0),this._absoluteSources=this._sources.toArray().map((function(e){return r.computeSourceURL(c,e,t)})),this.sourceRoot=c,this.sourcesContent=l,this._mappings=u,this._sourceMapURL=t,this.file=d}function u(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function d(e,t){var a=e;"string"==typeof e&&(a=r.parseSourceMapInput(e));var n=r.getArg(a,"version"),s=r.getArg(a,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new i,this._names=new i;var o={line:-1,column:0};this._sections=s.map((function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var a=r.getArg(e,"offset"),n=r.getArg(a,"line"),i=r.getArg(a,"column");if(n<o.line||n===o.line&&i<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=a,{generatedOffset:{generatedLine:n+1,generatedColumn:i+1},consumer:new c(r.getArg(e,"map"),t)}}))}c.fromSourceMap=function(e,t){return l.fromSourceMap(e,t)},c.prototype._version=3,c.prototype.__generatedMappings=null,Object.defineProperty(c.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),c.prototype.__originalMappings=null,Object.defineProperty(c.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),c.prototype._charIsMappingSeparator=function(e,t){var a=e.charAt(t);return";"===a||","===a},c.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},c.GENERATED_ORDER=1,c.ORIGINAL_ORDER=2,c.GREATEST_LOWER_BOUND=1,c.LEAST_UPPER_BOUND=2,c.prototype.eachMapping=function(e,t,a){var n,i=t||null;switch(a||c.GENERATED_ORDER){case c.GENERATED_ORDER:n=this._generatedMappings;break;case c.ORIGINAL_ORDER:n=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var s=this.sourceRoot;n.map((function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:t=r.computeSourceURL(s,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}}),this).forEach(e,i)},c.prototype.allGeneratedPositionsFor=function(e){var t=r.getArg(e,"line"),a={source:r.getArg(e,"source"),originalLine:t,originalColumn:r.getArg(e,"column",0)};if(a.source=this._findSourceIndex(a.source),a.source<0)return[];var i=[],s=this._findMapping(a,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,n.LEAST_UPPER_BOUND);if(s>=0){var o=this._originalMappings[s];if(void 0===e.column)for(var c=o.originalLine;o&&o.originalLine===c;)i.push({line:r.getArg(o,"generatedLine",null),column:r.getArg(o,"generatedColumn",null),lastColumn:r.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++s];else for(var l=o.originalColumn;o&&o.originalLine===t&&o.originalColumn==l;)i.push({line:r.getArg(o,"generatedLine",null),column:r.getArg(o,"generatedColumn",null),lastColumn:r.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++s]}return i},a.SourceMapConsumer=c,l.prototype=Object.create(c.prototype),l.prototype.consumer=c,l.prototype._findSourceIndex=function(e){var t,a=e;if(null!=this.sourceRoot&&(a=r.relative(this.sourceRoot,a)),this._sources.has(a))return this._sources.indexOf(a);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},l.fromSourceMap=function(e,t){var a=Object.create(l.prototype),n=a._names=i.fromArray(e._names.toArray(),!0),s=a._sources=i.fromArray(e._sources.toArray(),!0);a.sourceRoot=e._sourceRoot,a.sourcesContent=e._generateSourcesContent(a._sources.toArray(),a.sourceRoot),a.file=e._file,a._sourceMapURL=t,a._absoluteSources=a._sources.toArray().map((function(e){return r.computeSourceURL(a.sourceRoot,e,t)}));for(var c=e._mappings.toArray().slice(),d=a.__generatedMappings=[],p=a.__originalMappings=[],h=0,f=c.length;h<f;h++){var m=c[h],g=new u;g.generatedLine=m.generatedLine,g.generatedColumn=m.generatedColumn,m.source&&(g.source=s.indexOf(m.source),g.originalLine=m.originalLine,g.originalColumn=m.originalColumn,m.name&&(g.name=n.indexOf(m.name)),p.push(g)),d.push(g)}return o(a.__originalMappings,r.compareByOriginalPositions),a},l.prototype._version=3,Object.defineProperty(l.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),l.prototype._parseMappings=function(e,t){for(var a,n,i,c,l,d=1,p=0,h=0,f=0,m=0,g=0,b=e.length,y=0,v={},_={},w=[],x=[];y<b;)if(";"===e.charAt(y))d++,y++,p=0;else if(","===e.charAt(y))y++;else{for((a=new u).generatedLine=d,c=y;c<b&&!this._charIsMappingSeparator(e,c);c++);if(i=v[n=e.slice(y,c)])y+=n.length;else{for(i=[];y<c;)s.decode(e,y,_),l=_.value,y=_.rest,i.push(l);if(2===i.length)throw new Error("Found a source, but no line and column");if(3===i.length)throw new Error("Found a source and line, but no column");v[n]=i}a.generatedColumn=p+i[0],p=a.generatedColumn,i.length>1&&(a.source=m+i[1],m+=i[1],a.originalLine=h+i[2],h=a.originalLine,a.originalLine+=1,a.originalColumn=f+i[3],f=a.originalColumn,i.length>4&&(a.name=g+i[4],g+=i[4])),x.push(a),"number"==typeof a.originalLine&&w.push(a)}o(x,r.compareByGeneratedPositionsDeflated),this.__generatedMappings=x,o(w,r.compareByOriginalPositions),this.__originalMappings=w},l.prototype._findMapping=function(e,t,a,r,i,s){if(e[a]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[a]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return n.search(e,t,i,s)},l.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var a=this._generatedMappings[e+1];if(t.generatedLine===a.generatedLine){t.lastGeneratedColumn=a.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},l.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},a=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",r.compareByGeneratedPositionsDeflated,r.getArg(e,"bias",c.GREATEST_LOWER_BOUND));if(a>=0){var n=this._generatedMappings[a];if(n.generatedLine===t.generatedLine){var i=r.getArg(n,"source",null);null!==i&&(i=this._sources.at(i),i=r.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var s=r.getArg(n,"name",null);return null!==s&&(s=this._names.at(s)),{source:i,line:r.getArg(n,"originalLine",null),column:r.getArg(n,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}},l.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some((function(e){return null==e}))},l.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var a=this._findSourceIndex(e);if(a>=0)return this.sourcesContent[a];var n,i=e;if(null!=this.sourceRoot&&(i=r.relative(this.sourceRoot,i)),null!=this.sourceRoot&&(n=r.urlParse(this.sourceRoot))){var s=i.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!n.path||"/"==n.path)&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(t)return null;throw new Error('"'+i+'" is not in the SourceMap.')},l.prototype.generatedPositionFor=function(e){var t=r.getArg(e,"source");if((t=this._findSourceIndex(t))<0)return{line:null,column:null,lastColumn:null};var a={source:t,originalLine:r.getArg(e,"line"),originalColumn:r.getArg(e,"column")},n=this._findMapping(a,this._originalMappings,"originalLine","originalColumn",r.compareByOriginalPositions,r.getArg(e,"bias",c.GREATEST_LOWER_BOUND));if(n>=0){var i=this._originalMappings[n];if(i.source===a.source)return{line:r.getArg(i,"generatedLine",null),column:r.getArg(i,"generatedColumn",null),lastColumn:r.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},a.BasicSourceMapConsumer=l,d.prototype=Object.create(c.prototype),d.prototype.constructor=c,d.prototype._version=3,Object.defineProperty(d.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var a=0;a<this._sections[t].consumer.sources.length;a++)e.push(this._sections[t].consumer.sources[a]);return e}}),d.prototype.originalPositionFor=function(e){var t={generatedLine:r.getArg(e,"line"),generatedColumn:r.getArg(e,"column")},a=n.search(t,this._sections,(function(e,t){var a=e.generatedLine-t.generatedOffset.generatedLine;return a||e.generatedColumn-t.generatedOffset.generatedColumn})),i=this._sections[a];return i?i.consumer.originalPositionFor({line:t.generatedLine-(i.generatedOffset.generatedLine-1),column:t.generatedColumn-(i.generatedOffset.generatedLine===t.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},d.prototype.hasContentsOfAllSources=function(){return this._sections.every((function(e){return e.consumer.hasContentsOfAllSources()}))},d.prototype.sourceContentFor=function(e,t){for(var a=0;a<this._sections.length;a++){var r=this._sections[a].consumer.sourceContentFor(e,!0);if(r)return r}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},d.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var a=this._sections[t];if(-1!==a.consumer._findSourceIndex(r.getArg(e,"source"))){var n=a.consumer.generatedPositionFor(e);if(n)return{line:n.line+(a.generatedOffset.generatedLine-1),column:n.column+(a.generatedOffset.generatedLine===n.line?a.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},d.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var a=0;a<this._sections.length;a++)for(var n=this._sections[a],i=n.consumer._generatedMappings,s=0;s<i.length;s++){var c=i[s],l=n.consumer._sources.at(c.source);l=r.computeSourceURL(n.consumer.sourceRoot,l,this._sourceMapURL),this._sources.add(l),l=this._sources.indexOf(l);var u=null;c.name&&(u=n.consumer._names.at(c.name),this._names.add(u),u=this._names.indexOf(u));var d={source:l,generatedLine:c.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:c.generatedColumn+(n.generatedOffset.generatedLine===c.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:c.originalLine,originalColumn:c.originalColumn,name:u};this.__generatedMappings.push(d),"number"==typeof d.originalLine&&this.__originalMappings.push(d)}o(this.__generatedMappings,r.compareByGeneratedPositionsDeflated),o(this.__originalMappings,r.compareByOriginalPositions)},a.IndexedSourceMapConsumer=d},{"./array-set":198,"./base64-vlq":199,"./binary-search":201,"./quick-sort":203,"./util":207}],205:[function(e,t,a){var r=e("./base64-vlq"),n=e("./util"),i=e("./array-set").ArraySet,s=e("./mapping-list").MappingList;function o(e){e||(e={}),this._file=n.getArg(e,"file",null),this._sourceRoot=n.getArg(e,"sourceRoot",null),this._skipValidation=n.getArg(e,"skipValidation",!1),this._sources=new i,this._names=new i,this._mappings=new s,this._sourcesContents=null}o.prototype._version=3,o.fromSourceMap=function(e){var t=e.sourceRoot,a=new o({file:e.file,sourceRoot:t});return e.eachMapping((function(e){var r={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(r.source=e.source,null!=t&&(r.source=n.relative(t,r.source)),r.original={line:e.originalLine,column:e.originalColumn},null!=e.name&&(r.name=e.name)),a.addMapping(r)})),e.sources.forEach((function(r){var i=r;null!==t&&(i=n.relative(t,r)),a._sources.has(i)||a._sources.add(i);var s=e.sourceContentFor(r);null!=s&&a.setSourceContent(r,s)})),a},o.prototype.addMapping=function(e){var t=n.getArg(e,"generated"),a=n.getArg(e,"original",null),r=n.getArg(e,"source",null),i=n.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,a,r,i),null!=r&&(r=String(r),this._sources.has(r)||this._sources.add(r)),null!=i&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=a&&a.line,originalColumn:null!=a&&a.column,source:r,name:i})},o.prototype.setSourceContent=function(e,t){var a=e;null!=this._sourceRoot&&(a=n.relative(this._sourceRoot,a)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[n.toSetString(a)]=t):this._sourcesContents&&(delete this._sourcesContents[n.toSetString(a)],0===Object.keys(this._sourcesContents).length&&(this._sourcesContents=null))},o.prototype.applySourceMap=function(e,t,a){var r=t;if(null==t){if(null==e.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');r=e.file}var s=this._sourceRoot;null!=s&&(r=n.relative(s,r));var o=new i,c=new i;this._mappings.unsortedForEach((function(t){if(t.source===r&&null!=t.originalLine){var i=e.originalPositionFor({line:t.originalLine,column:t.originalColumn});null!=i.source&&(t.source=i.source,null!=a&&(t.source=n.join(a,t.source)),null!=s&&(t.source=n.relative(s,t.source)),t.originalLine=i.line,t.originalColumn=i.column,null!=i.name&&(t.name=i.name))}var l=t.source;null==l||o.has(l)||o.add(l);var u=t.name;null==u||c.has(u)||c.add(u)}),this),this._sources=o,this._names=c,e.sources.forEach((function(t){var r=e.sourceContentFor(t);null!=r&&(null!=a&&(t=n.join(a,t)),null!=s&&(t=n.relative(s,t)),this.setSourceContent(t,r))}),this)},o.prototype._validateMapping=function(e,t,a,r){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0)||t||a||r)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&a))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:a,original:t,name:r}))},o.prototype._serializeMappings=function(){for(var e,t,a,i,s=0,o=1,c=0,l=0,u=0,d=0,p="",h=this._mappings.toArray(),f=0,m=h.length;f<m;f++){if(e="",(t=h[f]).generatedLine!==o)for(s=0;t.generatedLine!==o;)e+=";",o++;else if(f>0){if(!n.compareByGeneratedPositionsInflated(t,h[f-1]))continue;e+=","}e+=r.encode(t.generatedColumn-s),s=t.generatedColumn,null!=t.source&&(i=this._sources.indexOf(t.source),e+=r.encode(i-d),d=i,e+=r.encode(t.originalLine-1-l),l=t.originalLine-1,e+=r.encode(t.originalColumn-c),c=t.originalColumn,null!=t.name&&(a=this._names.indexOf(t.name),e+=r.encode(a-u),u=a)),p+=e}return p},o.prototype._generateSourcesContent=function(e,t){return e.map((function(e){if(!this._sourcesContents)return null;null!=t&&(e=n.relative(t,e));var a=n.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,a)?this._sourcesContents[a]:null}),this)},o.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},o.prototype.toString=function(){return JSON.stringify(this.toJSON())},a.SourceMapGenerator=o},{"./array-set":198,"./base64-vlq":199,"./mapping-list":202,"./util":207}],206:[function(e,t,a){var r=e("./source-map-generator").SourceMapGenerator,n=e("./util"),i=/(\r?\n)/,s="$$$isSourceNode$$$";function o(e,t,a,r,n){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==a?null:a,this.name=null==n?null:n,this[s]=!0,null!=r&&this.add(r)}o.fromStringWithSourceMap=function(e,t,a){var r=new o,s=e.split(i),c=0,l=function(){return e()+(e()||"");function e(){return c<s.length?s[c++]:void 0}},u=1,d=0,p=null;return t.eachMapping((function(e){if(null!==p){if(!(u<e.generatedLine)){var t=(a=s[c]||"").substr(0,e.generatedColumn-d);return s[c]=a.substr(e.generatedColumn-d),d=e.generatedColumn,h(p,t),void(p=e)}h(p,l()),u++,d=0}for(;u<e.generatedLine;)r.add(l()),u++;if(d<e.generatedColumn){var a=s[c]||"";r.add(a.substr(0,e.generatedColumn)),s[c]=a.substr(e.generatedColumn),d=e.generatedColumn}p=e}),this),c<s.length&&(p&&h(p,l()),r.add(s.splice(c).join(""))),t.sources.forEach((function(e){var i=t.sourceContentFor(e);null!=i&&(null!=a&&(e=n.join(a,e)),r.setSourceContent(e,i))})),r;function h(e,t){if(null===e||void 0===e.source)r.add(t);else{var i=a?n.join(a,e.source):e.source;r.add(new o(e.originalLine,e.originalColumn,i,t,e.name))}}},o.prototype.add=function(e){if(Array.isArray(e))e.forEach((function(e){this.add(e)}),this);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},o.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else{if(!e[s]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},o.prototype.walk=function(e){for(var t,a=0,r=this.children.length;a<r;a++)(t=this.children[a])[s]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},o.prototype.join=function(e){var t,a,r=this.children.length;if(r>0){for(t=[],a=0;a<r-1;a++)t.push(this.children[a]),t.push(e);t.push(this.children[a]),this.children=t}return this},o.prototype.replaceRight=function(e,t){var a=this.children[this.children.length-1];return a[s]?a.replaceRight(e,t):"string"==typeof a?this.children[this.children.length-1]=a.replace(e,t):this.children.push("".replace(e,t)),this},o.prototype.setSourceContent=function(e,t){this.sourceContents[n.toSetString(e)]=t},o.prototype.walkSourceContents=function(e){for(var t=0,a=this.children.length;t<a;t++)this.children[t][s]&&this.children[t].walkSourceContents(e);var r=Object.keys(this.sourceContents);for(t=0,a=r.length;t<a;t++)e(n.fromSetString(r[t]),this.sourceContents[r[t]])},o.prototype.toString=function(){var e="";return this.walk((function(t){e+=t})),e},o.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},a=new r(e),n=!1,i=null,s=null,o=null,c=null;return this.walk((function(e,r){t.code+=e,null!==r.source&&null!==r.line&&null!==r.column?(i===r.source&&s===r.line&&o===r.column&&c===r.name||a.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name}),i=r.source,s=r.line,o=r.column,c=r.name,n=!0):n&&(a.addMapping({generated:{line:t.line,column:t.column}}),i=null,n=!1);for(var l=0,u=e.length;l<u;l++)10===e.charCodeAt(l)?(t.line++,t.column=0,l+1===u?(i=null,n=!1):n&&a.addMapping({source:r.source,original:{line:r.line,column:r.column},generated:{line:t.line,column:t.column},name:r.name})):t.column++})),this.walkSourceContents((function(e,t){a.setSourceContent(e,t)})),{code:t.code,map:a}},a.SourceNode=o},{"./source-map-generator":205,"./util":207}],207:[function(e,t,a){a.getArg=function(e,t,a){if(t in e)return e[t];if(3===arguments.length)return a;throw new Error('"'+t+'" is a required argument.')};var r=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,n=/^data:.+\,.+$/;function i(e){var t=e.match(r);return t?{scheme:t[1],auth:t[2],host:t[3],port:t[4],path:t[5]}:null}function s(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function o(e){var t=e,r=i(e);if(r){if(!r.path)return e;t=r.path}for(var n,o=a.isAbsolute(t),c=t.split(/\/+/),l=0,u=c.length-1;u>=0;u--)"."===(n=c[u])?c.splice(u,1):".."===n?l++:l>0&&(""===n?(c.splice(u+1,l),l=0):(c.splice(u,2),l--));return""===(t=c.join("/"))&&(t=o?"/":"."),r?(r.path=t,s(r)):t}function c(e,t){""===e&&(e="."),""===t&&(t=".");var a=i(t),r=i(e);if(r&&(e=r.path||"/"),a&&!a.scheme)return r&&(a.scheme=r.scheme),s(a);if(a||t.match(n))return t;if(r&&!r.host&&!r.path)return r.host=t,s(r);var c="/"===t.charAt(0)?t:o(e.replace(/\/+$/,"")+"/"+t);return r?(r.path=c,s(r)):c}a.urlParse=i,a.urlGenerate=s,a.normalize=o,a.join=c,a.isAbsolute=function(e){return"/"===e.charAt(0)||r.test(e)},a.relative=function(e,t){""===e&&(e="."),e=e.replace(/\/$/,"");for(var a=0;0!==t.indexOf(e+"/");){var r=e.lastIndexOf("/");if(r<0)return t;if((e=e.slice(0,r)).match(/^([^\/]+:\/)?\/*$/))return t;++a}return Array(a+1).join("../")+t.substr(e.length+1)};var l=!("__proto__"in Object.create(null));function u(e){return e}function d(e){if(!e)return!1;var t=e.length;if(t<9)return!1;if(95!==e.charCodeAt(t-1)||95!==e.charCodeAt(t-2)||111!==e.charCodeAt(t-3)||116!==e.charCodeAt(t-4)||111!==e.charCodeAt(t-5)||114!==e.charCodeAt(t-6)||112!==e.charCodeAt(t-7)||95!==e.charCodeAt(t-8)||95!==e.charCodeAt(t-9))return!1;for(var a=t-10;a>=0;a--)if(36!==e.charCodeAt(a))return!1;return!0}function p(e,t){return e===t?0:null===e?1:null===t?-1:e>t?1:-1}a.toSetString=l?u:function(e){return d(e)?"$"+e:e},a.fromSetString=l?u:function(e){return d(e)?e.slice(1):e},a.compareByOriginalPositions=function(e,t,a){var r=p(e.source,t.source);return 0!==r||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)||a||0!=(r=e.generatedColumn-t.generatedColumn)||0!=(r=e.generatedLine-t.generatedLine)?r:p(e.name,t.name)},a.compareByGeneratedPositionsDeflated=function(e,t,a){var r=e.generatedLine-t.generatedLine;return 0!==r||0!=(r=e.generatedColumn-t.generatedColumn)||a||0!==(r=p(e.source,t.source))||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:p(e.name,t.name)},a.compareByGeneratedPositionsInflated=function(e,t){var a=e.generatedLine-t.generatedLine;return 0!==a||0!=(a=e.generatedColumn-t.generatedColumn)||0!==(a=p(e.source,t.source))||0!=(a=e.originalLine-t.originalLine)||0!=(a=e.originalColumn-t.originalColumn)?a:p(e.name,t.name)},a.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},a.computeSourceURL=function(e,t,a){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),a){var r=i(a);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var n=r.path.lastIndexOf("/");n>=0&&(r.path=r.path.substring(0,n+1))}t=c(s(r),t)}return o(t)}},{}],208:[function(e,t,a){a.SourceMapGenerator=e("./lib/source-map-generator").SourceMapGenerator,a.SourceMapConsumer=e("./lib/source-map-consumer").SourceMapConsumer,a.SourceNode=e("./lib/source-node").SourceNode},{"./lib/source-map-consumer":204,"./lib/source-map-generator":205,"./lib/source-node":206}],209:[function(e,t,a){var r=e("punycode"),n=e("./util");function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}a.parse=_,a.resolve=function(e,t){return _(e,!1,!0).resolve(t)},a.resolveObject=function(e,t){return e?_(e,!1,!0).resolveObject(t):t},a.format=function(e){return n.isString(e)&&(e=_(e)),e instanceof i?e.format():i.prototype.format.call(e)},a.Url=i;var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(u),p=["%","/","?",";","#"].concat(d),h=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,m=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=e("querystring");function _(e,t,a){if(e&&n.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,a),r}i.prototype.parse=function(e,t,a){if(!n.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+l(e));var i=e.indexOf("?"),o=-1!==i&&i<e.indexOf("#")?"?":"#",u=e.split(o);u[0]=u[0].replace(/\\/g,"/");var _=e=u.join(o);if(_=_.trim(),!a&&1===e.split("#").length){var w=c.exec(_);if(w)return this.path=_,this.href=_,this.pathname=w[1],w[2]?(this.search=w[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=s.exec(_);if(x){var k=(x=x[0]).toLowerCase();this.protocol=k,_=_.substr(x.length)}if(a||x||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===_.substr(0,2);!S||x&&b[x]||(_=_.substr(2),this.slashes=!0)}if(!b[x]&&(S||x&&!y[x])){for(var P,E,C=-1,A=0;A<h.length;A++)-1!==(M=_.indexOf(h[A]))&&(-1===C||M<C)&&(C=M);for(-1!==(E=-1===C?_.lastIndexOf("@"):_.lastIndexOf("@",C))&&(P=_.slice(0,E),_=_.slice(E+1),this.auth=decodeURIComponent(P)),C=-1,A=0;A<p.length;A++){var M;-1!==(M=_.indexOf(p[A]))&&(-1===C||M<C)&&(C=M)}-1===C&&(C=_.length),this.host=_.slice(0,C),_=_.slice(C),this.parseHost(),this.hostname=this.hostname||"";var T="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!T)for(var j=this.hostname.split(/\./),O=(A=0,j.length);A<O;A++){var D=j[A];if(D&&!D.match(f)){for(var I="",R=0,B=D.length;R<B;R++)D.charCodeAt(R)>127?I+="x":I+=D[R];if(!I.match(f)){var q=j.slice(0,A),L=j.slice(A+1),N=D.match(m);N&&(q.push(N[1]),L.unshift(N[2])),L.length&&(_="/"+L.join(".")+_),this.hostname=q.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),T||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+F,this.href+=this.host,T&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[k])for(A=0,O=d.length;A<O;A++){var $=d[A];if(-1!==_.indexOf($)){var z=encodeURIComponent($);z===$&&(z=escape($)),_=_.split($).join(z)}}var H=_.indexOf("#");-1!==H&&(this.hash=_.substr(H),_=_.slice(0,H));var G=_.indexOf("?");if(-1!==G?(this.search=_.substr(G),this.query=_.substr(G+1),t&&(this.query=v.parse(this.query)),_=_.slice(0,G)):t&&(this.search="",this.query={}),_&&(this.pathname=_),y[k]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var K=this.search||"";this.path=F+K}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",a=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=v.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),a&&"/"!==a.charAt(0)&&(a="/"+a)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),t+i+(a=a.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(_(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(n.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var a=new i,r=Object.keys(this),s=0;s<r.length;s++){var o=r[s];a[o]=this[o]}if(a.hash=e.hash,""===e.href)return a.href=a.format(),a;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),l=0;l<c.length;l++){var u=c[l];"protocol"!==u&&(a[u]=e[u])}return y[a.protocol]&&a.hostname&&!a.pathname&&(a.path=a.pathname="/"),a.href=a.format(),a}if(e.protocol&&e.protocol!==a.protocol){if(!y[e.protocol]){for(var d=Object.keys(e),p=0;p<d.length;p++){var h=d[p];a[h]=e[h]}return a.href=a.format(),a}if(a.protocol=e.protocol,e.host||b[e.protocol])a.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),a.pathname=f.join("/")}if(a.search=e.search,a.query=e.query,a.host=e.host||"",a.auth=e.auth,a.hostname=e.hostname||e.host,a.port=e.port,a.pathname||a.search){var m=a.pathname||"",g=a.search||"";a.path=m+g}return a.slashes=a.slashes||e.slashes,a.href=a.format(),a}var v=a.pathname&&"/"===a.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=_||v||a.host&&e.pathname,x=w,k=a.pathname&&a.pathname.split("/")||[],S=(f=e.pathname&&e.pathname.split("/")||[],a.protocol&&!y[a.protocol]);if(S&&(a.hostname="",a.port=null,a.host&&(""===k[0]?k[0]=a.host:k.unshift(a.host)),a.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),w=w&&(""===f[0]||""===k[0])),_)a.host=e.host||""===e.host?e.host:a.host,a.hostname=e.hostname||""===e.hostname?e.hostname:a.hostname,a.search=e.search,a.query=e.query,k=f;else if(f.length)k||(k=[]),k.pop(),k=k.concat(f),a.search=e.search,a.query=e.query;else if(!n.isNullOrUndefined(e.search))return S&&(a.hostname=a.host=k.shift(),(M=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=M.shift(),a.host=a.hostname=M.shift())),a.search=e.search,a.query=e.query,n.isNull(a.pathname)&&n.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.href=a.format(),a;if(!k.length)return a.pathname=null,a.search?a.path="/"+a.search:a.path=null,a.href=a.format(),a;for(var P=k.slice(-1)[0],E=(a.host||e.host||k.length>1)&&("."===P||".."===P)||""===P,C=0,A=k.length;A>=0;A--)"."===(P=k[A])?k.splice(A,1):".."===P?(k.splice(A,1),C++):C&&(k.splice(A,1),C--);if(!w&&!x)for(;C--;C)k.unshift("..");!w||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),E&&"/"!==k.join("/").substr(-1)&&k.push("");var M,T=""===k[0]||k[0]&&"/"===k[0].charAt(0);return S&&(a.hostname=a.host=T?"":k.length?k.shift():"",(M=!!(a.host&&a.host.indexOf("@")>0)&&a.host.split("@"))&&(a.auth=M.shift(),a.host=a.hostname=M.shift())),(w=w||a.host&&k.length)&&!T&&k.unshift(""),k.length?a.pathname=k.join("/"):(a.pathname=null,a.path=null),n.isNull(a.pathname)&&n.isNull(a.search)||(a.path=(a.pathname?a.pathname:"")+(a.search?a.search:"")),a.auth=e.auth||a.auth,a.slashes=a.slashes||e.slashes,a.href=a.format(),a},i.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":210,punycode:194,querystring:197}],210:[function(e,t,a){t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===l(e)&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],211:[function(e,t,a){var r=e("htmlparser2"),n=e("lodash/escapeRegExp"),i=e("lodash/cloneDeep"),s=e("lodash/mergeWith"),c=e("lodash/isString"),l=e("lodash/isPlainObject"),u=e("parse-srcset"),d=e("postcss"),p=e("url"),h=["img","audio","video","picture","svg","object","map","iframe","embed"],f=["script","style"];function m(e,t){e&&Object.keys(e).forEach((function(a){t(e[a],a)}))}function g(e,t){return{}.hasOwnProperty.call(e,t)}function b(e,t){var a=[];return m(e,(function(e){t(e)&&a.push(e)})),a}t.exports=v;var y=/^[^\0\t\n\f\r /<=>]+$/;function v(e,t,a){var w="",x="";function k(e,t){var a=this;this.tag=e,this.attribs=t||{},this.tagPosition=w.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){T.length&&(T[T.length-1].text+=a.text)},this.updateParentNodeMediaChildren=function(){T.length&&h.includes(this.tag)&&T[T.length-1].mediaChildren.push(this.tag)}}t?(t=Object.assign({},v.defaults,t)).parser?t.parser=Object.assign({},_,t.parser):t.parser=_:(t=v.defaults).parser=_,f.forEach((function(e){t.allowedTags&&t.allowedTags.includes(e)&&!t.allowVulnerableTags&&console.warn("\n\n⚠️ Your `allowedTags` option includes, `".concat(e,"`, which is inherently\nvulnerable to XSS attacks. Please remove it from `allowedTags`.\nOr, to disable this warning, add the `allowVulnerableTags` option\nand ensure you are accounting for this risk.\n\n"))}));var S,P,E=t.nonTextTags||["script","style","textarea","option"];t.allowedAttributes&&(S={},P={},m(t.allowedAttributes,(function(e,t){S[t]=[];var a=[];e.forEach((function(e){c(e)&&e.indexOf("*")>=0?a.push(n(e).replace(/\\\*/g,".*")):S[t].push(e)})),P[t]=new RegExp("^("+a.join("|")+")$")})));var C={};m(t.allowedClasses,(function(e,t){S&&(g(S,t)||(S[t]=[]),S[t].push("class")),C[t]=e}));var A,M,T,j,O,D,I,R={};m(t.transformTags,(function(e,t){var a;"function"==typeof e?a=e:"string"==typeof e&&(a=v.simpleTransform(e)),"*"===t?A=a:R[t]=a})),q();var B=new r.Parser({onopentag:function(e,a){if(t.enforceHtmlBoundary&&"html"===e&&q(),D)I++;else{var r=new k(e,a);T.push(r);var n,c=!1,h=!!r.text;if(g(R,e)&&(n=R[e](e,a),r.attribs=a=n.attribs,void 0!==n.text&&(r.innerText=n.text),e!==n.tagName&&(r.name=e=n.tagName,O[M]=n.tagName)),A&&(n=A(e,a),r.attribs=a=n.attribs,e!==n.tagName&&(r.name=e=n.tagName,O[M]=n.tagName)),(t.allowedTags&&-1===t.allowedTags.indexOf(e)||"recursiveEscape"===t.disallowedTagsMode&&!function(e){for(var t in e)if(g(e,t))return!1;return!0}(j))&&(c=!0,j[M]=!0,"discard"===t.disallowedTagsMode&&-1!==E.indexOf(e)&&(D=!0,I=1),j[M]=!0),M++,c){if("discard"===t.disallowedTagsMode)return;x=w,w=""}w+="<"+e,(!S||g(S,e)||S["*"])&&m(a,(function(a,n){if(y.test(n)){var c,h=!1;if(!S||g(S,e)&&-1!==S[e].indexOf(n)||S["*"]&&-1!==S["*"].indexOf(n)||g(P,e)&&P[e].test(n)||P["*"]&&P["*"].test(n))h=!0;else if(S&&S[e]){var f,v=o(S[e]);try{for(v.s();!(f=v.n()).done;){var _=f.value;if(l(_)&&_.name&&_.name===n){h=!0;var x="";if(!0===_.multiple){var k,E=o(a.split(" "));try{for(E.s();!(k=E.n()).done;){var A=k.value;-1!==_.values.indexOf(A)&&(""===x?x=A:x+=" "+A)}}catch(e){E.e(e)}finally{E.f()}}else _.values.indexOf(a)>=0&&(x=a);a=x}}}catch(e){v.e(e)}finally{v.f()}}if(h){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(n)&&N(e,a))return void delete r.attribs[n];if("iframe"===e&&"src"===n){var M=!0;try{if((c=p.parse(a,!1,!0))&&null===c.host&&null===c.protocol)M=g(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){var T=(t.allowedIframeHostnames||[]).find((function(e){return e===c.hostname})),j=(t.allowedIframeDomains||[]).find((function(e){return c.hostname===e||c.hostname.endsWith(".".concat(e))}));M=T||j}}catch(e){M=!1}if(!M)return void delete r.attribs[n]}if("srcset"===n)try{if(m(c=u(a),(function(e){N("srcset",e.url)&&(e.evil=!0)})),!(c=b(c,(function(e){return!e.evil}))).length)return void delete r.attribs[n];a=b(c,(function(e){return!e.evil})).map((function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?" ".concat(e.w,"w"):"")+(e.h?" ".concat(e.h,"h"):"")+(e.d?" ".concat(e.d,"x"):"")})).join(", "),r.attribs[n]=a}catch(e){return void delete r.attribs[n]}if("class"===n&&!(a=function(e,t){return t?(e=e.split(/\s+/)).filter((function(e){return-1!==t.indexOf(e)})).join(" "):e}(a,C[e])).length)return void delete r.attribs[n];if("style"===n)try{if(0===(a=function(e){return e.nodes[0].nodes.reduce((function(e,t){return e.push(t.prop+":"+t.value),e}),[]).join(";")}(function(e,t){if(!t)return e;var a,r=i(e),n=e.nodes[0];return(a=t[n.selector]&&t["*"]?s(i(t[n.selector]),t["*"],(function(e,t){if(Array.isArray(e))return e.concat(t)})):t[n.selector]||t["*"])&&(r.nodes[0].nodes=n.nodes.reduce(function(e){return function(t,a){return e.hasOwnProperty(a.prop)&&e[a.prop].some((function(e){return e.test(a.value)}))&&t.push(a),t}}(a),[])),r}(d.parse(e+" {"+a+"}"),t.allowedStyles))).length)return void delete r.attribs[n]}catch(e){return void delete r.attribs[n]}w+=" "+n,a&&a.length&&(w+='="'+L(a,!0)+'"')}else delete r.attribs[n]}else delete r.attribs[n]})),-1!==t.selfClosing.indexOf(e)?w+=" />":(w+=">",!r.innerText||h||t.textFilter||(w+=r.innerText)),c&&(w=x+L(w),x="")}},ontext:function(e){if(!D){var a,r=T[T.length-1];if(r&&(a=r.tag,e=void 0!==r.innerText?r.innerText:e),"discard"!==t.disallowedTagsMode||"script"!==a&&"style"!==a){var n=L(e,!1);t.textFilter?w+=t.textFilter(n,a):w+=n}else w+=e;T.length&&(T[T.length-1].text+=e)}},onclosetag:function(e){if(D){if(--I)return;D=!1}var a=T.pop();if(a){D=!!t.enforceHtmlBoundary&&"html"===e,M--;var r=j[M];if(r){if(delete j[M],"discard"===t.disallowedTagsMode)return void a.updateParentNodeText();x=w,w=""}O[M]&&(e=O[M],delete O[M]),t.exclusiveFilter&&t.exclusiveFilter(a)?w=w.substr(0,a.tagPosition):(a.updateParentNodeMediaChildren(),a.updateParentNodeText(),-1===t.selfClosing.indexOf(e)?(w+="</"+e+">",r&&(w=x+L(w),x="")):r&&(w=x,x=""))}}},t.parser);return B.write(e),B.end(),w;function q(){w="",M=0,T=[],j={},O={},D=!1,I=0}function L(e,a){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\>/g,"&gt;"),a&&(e=e.replace(/\"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/\>/g,"&gt;"),a&&(e=e.replace(/\"/g,"&quot;")),e}function N(e,a){var r=(a=(a=a.replace(/[\x00-\x20]+/g,"")).replace(/<\!\-\-.*?\-\-\>/g,"")).match(/^([a-zA-Z]+)\:/);if(!r)return!!a.match(/^[\/\\]{2}/)&&!t.allowProtocolRelative;var n=r[1].toLowerCase();return g(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(n):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(n)}}var _={decodeEntities:!0};v.defaults={allowedTags:["h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","abbr","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","iframe"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1},v.simpleTransform=function(e,t,a){return a=void 0===a||a,t=t||{},function(r,n){var i;if(a)for(i in t)n[i]=t[i];else n=t;return{tagName:e,attribs:n}}}},{htmlparser2:31,"lodash/cloneDeep":140,"lodash/escapeRegExp":143,"lodash/isPlainObject":155,"lodash/isString":157,"lodash/mergeWith":162,"parse-srcset":167,postcss:181,url:209}]},{},[211])(211)},"object"===l(t)&&void 0!==e?e.exports=s():(n=[],void 0===(i="function"==typeof(r=s)?r.apply(t,n):r)||(e.exports=i))}).call(this,a(17))},function(e,t,a){"use strict";var r=new(a(1187))(void 0,{fuzzyEmail:!1});r.tlds(["chat"],!0),Object.keys(r.__compiled__).forEach((function(e){if(r.__compiled__[e].validate){var t=r.__compiled__[e].validate;r.__compiled__[e].validate=function(a,r,n){n.re.markdownLink||(n.re.markdownLink=new RegExp(/[!&]?\[([!&]?\[.*?\)|[^\]]*?)]\((.*?)( .*?)?\)/));var i=r-e.length,s=a.match(n.re.markdownLink);if(s&&i<=s[1].length+2+s.index+1)return!1;return t(a,r,n)}}}));e.exports=function(e){var t=r.match(e);if(!t)return e;var a=[],n=0;return t.forEach((function(t){n<t.index&&a.push(e.slice(n,t.index)),a.push("["+t.text+"]("+t.url+")"),n=t.lastIndex})),n<e.length&&a.push(e.slice(n)),a.join("")}},function(e,t,a){var r=a(241),n=a(98),i=a(245);e.exports=ChatMain={render:function(e,t){0!=e.BROWSER&&(document.getElementById("chat-main")||(t.renderMode="main",e.browser.addElementToDom(i())),"main"==t.renderMode?(r.render(e,t),r.attachEvents(e,t)):(n.render(e,t),n.attachEvents(e,t)))},attachEvents:function(e,t){}}},function(e,t,a){var r=a(242),n=a(243),i=a(98),s=a(435);e.exports=ChatList={render:function(e,t){t.add_user_modal=new s,document.getElementById("chat-main").innerHTML="",e.browser.addElementToDom(r(),"chat-main"),document.querySelector(".chat-list-container").innerHTML="";for(var a=0;a<t.groups.length;a++){var i,o="",c=(new Date).getTime();t.groups[a].txs.length>0&&(o=t.groups[a].txs[t.groups[a].txs.length-1].returnMessage().message,c=t.groups[a].txs[t.groups[a].txs.length-1].transaction.ts);var l=e.browser.formatDate(c);i=l.hours+":"+l.minutes,e.browser.addElementToDom(n(t.groups[a],o,i),"chat-list-container")}},attachEvents:function(e,t){var a=this;Array.from(document.getElementsByClassName("chat-row")).forEach((function(a){a.onclick=function(a){for(var r=document.getElementById(a.currentTarget.id).getAttribute("data-id"),n=0;n<t.groups.length;n++)if(t.groups[n].id===r){var s=t.groups[n];i.render(e,t,s),i.attachEvents(e,t)}}})),document.getElementById("chat-nav-add-contact").onclick=function(){t.add_user_modal.render(e,t),t.add_user_modal.attachEvents(e,t)},e.modules.respondTo("chat-navbar").forEach((function(t){t.respondTo("chat-navbar").render(e,t),t.respondTo("chat-navbar").attachEvents(e,t)})),document.querySelector("#chat.create-button").onclick=function(){return a.toggleChatNav()}},toggleChatNav:function(){var e=document.getElementById("chat-nav");e.style.display="none"==e.style.display?"flex":"none"}}},function(e,t){e.exports=ChatListTemplate=function(){return'\n      <div id="chat-list-container" class="chat-list-container">\n      </div>\n      <button id="chat" class="create-button"><i class="fas fa-plus"></i></button>\n      <div id="chat-nav" class="chat-dropdown" style="display: none"><ul style="display: grid;grid-gap: 0.5em;" id="chat-navbar" class="chat-navbar"><li id="chat-nav-add-contact" class="chat-nav-row"><i class="fas fa-user-plus"></i>Add Contact</li></ul>\n        <div class="chat-nav-arrow"></div>\n        <div class="chat-nav-arrow" id="chat-nav-arrow-interior"></div>\n      </div>\n  '}},function(e,t){e.exports=ChatListHeaderTemplate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r='\n    <div data-id="'.concat(e.id,'" id="chat-row-').concat(e.id,'" class="chat-row">\n      <img src="/saito/img/logo-color.svg">\n      <div class="chat-content">\n        <div class="chat-group-name">').concat(e.name,'</div>\n        <div id="chat-last-message-').concat(e.id,'" class="chat-last-message">').concat(t,'</div>\n      </div>\n      <div style="display: grid;">\n        <div id="chat-last-message-timestamp-').concat(e.id,'" class="chat-last-message-timestamp">').concat(a,"</div>\n      </div>\n    </div>\n  ");return r}},function(e,t){e.exports=ChatRoomTemplate=function(e){return'\n        <div class="chat-room" id="chat-room-'.concat(e.id,'">\n\n            <div class="chat-room-header">\n\t      <i id="back-button" class="icon-med fas fa-arrow-left"></i>\n\t      <p class="chat-room-name">').concat(e.name,'</p>\n\t    </div>\n\n            <div class="chat-room-content" id="chat-room-content-').concat(e.id,'" style="max-height:100%;overflow-y: scroll;"></div>\n\n            <div class="chat-room-footer">\n              <div class="chat-room-input">\n                <textarea data-id="').concat(e.id,'" id="input" class="chat-room-input"></textarea>\n                <div class="chat-room-submit-button"><i class="icon-small fas fa-arrow-right"></i></div>\n              </div>\n\t    </div>\n\n        </div>\n    ')}},function(e,t){e.exports=ChatMainTemplate=function(){return'\n    <div id="chat-main" class="chat-main">\n    </div>\n  '}},function(e,t,a){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.Chess=function(e){var t="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",a=["1-0","0-1","1/2-1/2","*"],n={b:[16,32,17,15],w:[-16,-32,-17,-15]},i={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},s=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],o=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],c={p:0,n:1,b:2,r:3,q:4,k:5},l={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},u={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},d={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},p={w:[{square:d.a1,flag:u.QSIDE_CASTLE},{square:d.h1,flag:u.KSIDE_CASTLE}],b:[{square:d.a8,flag:u.QSIDE_CASTLE},{square:d.h8,flag:u.KSIDE_CASTLE}]},h=new Array(128),f={w:-1,b:-1},m="w",g={w:0,b:0},b=-1,y=0,v=1,_=[],w={};function x(){h=new Array(128),f={w:-1,b:-1},m="w",g={w:0,b:0},b=-1,y=0,v=1,_=[],w={},A(E())}function k(){S(t)}function S(e){var t=e.split(/\s+/),a=t[0],r=0;if(!P(e).valid)return!1;x();for(var n=0;n<a.length;n++){var i=a.charAt(n);if("/"===i)r+=8;else if(-1!=="0123456789".indexOf(i))r+=parseInt(i,10);else{var s=i<"a"?"w":"b";T({type:i.toLowerCase(),color:s},G(r)),r++}}return m=t[1],t[2].indexOf("K")>-1&&(g.w|=u.KSIDE_CASTLE),t[2].indexOf("Q")>-1&&(g.w|=u.QSIDE_CASTLE),t[2].indexOf("k")>-1&&(g.b|=u.KSIDE_CASTLE),t[2].indexOf("q")>-1&&(g.b|=u.QSIDE_CASTLE),b="-"===t[3]?-1:d[t[3]],y=parseInt(t[4],10),v=parseInt(t[5],10),A(E()),!0}function P(e){var t="No errors.",a="FEN string must contain six space-delimited fields.",r="6th field (move number) must be a positive integer.",n="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",s="3rd field (castling availability) is invalid.",o="2nd field (side to move) is invalid.",c="1st field (piece positions) does not contain 8 '/'-delimited rows.",l="1st field (piece positions) is invalid [consecutive numbers].",u="1st field (piece positions) is invalid [invalid piece].",d="1st field (piece positions) is invalid [row too large].",p=e.split(/\s+/);if(6!==p.length)return{valid:!1,error_number:1,error:a};if(isNaN(p[5])||parseInt(p[5],10)<=0)return{valid:!1,error_number:2,error:r};if(isNaN(p[4])||parseInt(p[4],10)<0)return{valid:!1,error_number:3,error:n};if(!/^(-|[abcdefgh][36])$/.test(p[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(p[2]))return{valid:!1,error_number:5,error:s};if(!/^(w|b)$/.test(p[1]))return{valid:!1,error_number:6,error:o};var h=p[0].split("/");if(8!==h.length)return{valid:!1,error_number:7,error:c};for(var f=0;f<h.length;f++){for(var m=0,g=!1,b=0;b<h[f].length;b++)if(isNaN(h[f][b])){if(!/^[prnbqkPRNBQK]$/.test(h[f][b]))return{valid:!1,error_number:9,error:u};m+=1,g=!1}else{if(g)return{valid:!1,error_number:8,error:l};m+=parseInt(h[f][b],10),g=!0}if(8!==m)return{valid:!1,error_number:10,error:d}}return{valid:!0,error_number:0,error:t}}function E(){for(var e=0,t="",a=d.a8;a<=d.h1;a++){if(null==h[a])e++;else{e>0&&(t+=e,e=0);var r=h[a].color,n=h[a].type;t+="w"===r?n.toUpperCase():n.toLowerCase()}a+1&136&&(e>0&&(t+=e),a!==d.h1&&(t+="/"),e=0,a+=8)}var i="";g.w&u.KSIDE_CASTLE&&(i+="K"),g.w&u.QSIDE_CASTLE&&(i+="Q"),g.b&u.KSIDE_CASTLE&&(i+="k"),g.b&u.QSIDE_CASTLE&&(i+="q"),i=i||"-";var s=-1===b?"-":G(b);return[t,m,i,s,y,v].join(" ")}function C(e){for(var t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(w[e[t]]=e[t+1]);return w}function A(e){_.length>0||(e!==t?(w.SetUp=e,w.FEN="1"):(delete w.SetUp,delete w.FEN))}function M(e){var t=h[d[e]];return t?{type:t.type,color:t.color}:null}function T(e,t){if(!("type"in e)||!("color"in e))return!1;if(-1==="pnbrqkPNBRQK".indexOf(e.type.toLowerCase()))return!1;if(!(t in d))return!1;var a=d[t];return h[a]={type:e.type,color:e.color},"k"===e.type&&(f[e.color]=a),A(E()),!0}function j(e,t,a,r,n){var i={color:m,from:t,to:a,flags:r,piece:e[t].type};return n&&(i.flags|=u.PROMOTION,i.promotion=n),e[a]?i.captured=e[a].type:r&u.EP_CAPTURE&&(i.captured="p"),i}function O(e){function t(e,t,a,r,n){if("p"!==e[a].type||0!==z(r)&&7!==z(r))t.push(j(e,a,r,n));else for(var i=["q","r","b","n"],s=0,o=i.length;s<o;s++)t.push(j(e,a,r,n,i[s]))}var a=[],r=m,s=K(r),o={b:1,w:6},c=d.a8,l=d.h1,p=!1,y=void 0===e||!("legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in d))return[];c=l=d[e.square],p=!0}for(var v=c;v<=l;v++)if(136&v)v+=7;else{var _=h[v];if(null!=_&&_.color===r)if("p"===_.type){var w=v+n[r][0];if(null==h[w]){t(h,a,v,w,u.NORMAL);w=v+n[r][1];o[r]===z(v)&&null==h[w]&&t(h,a,v,w,u.BIG_PAWN)}for(x=2;x<4;x++){136&(w=v+n[r][x])||(null!=h[w]&&h[w].color===s?t(h,a,v,w,u.CAPTURE):w===b&&t(h,a,v,b,u.EP_CAPTURE))}}else for(var x=0,k=i[_.type].length;x<k;x++){var S=i[_.type][x];for(w=v;!(136&(w+=S));){if(null!=h[w]){if(h[w].color===r)break;t(h,a,v,w,u.CAPTURE);break}if(t(h,a,v,w,u.NORMAL),"n"===_.type||"k"===_.type)break}}}if(!p||l===f[r]){if(g[r]&u.KSIDE_CASTLE){var P=(E=f[r])+2;null!=h[E+1]||null!=h[P]||I(s,f[r])||I(s,E+1)||I(s,P)||t(h,a,f[r],P,u.KSIDE_CASTLE)}if(g[r]&u.QSIDE_CASTLE){var E;P=(E=f[r])-2;null!=h[E-1]||null!=h[E-2]||null!=h[E-3]||I(s,f[r])||I(s,E-1)||I(s,P)||t(h,a,f[r],P,u.QSIDE_CASTLE)}}if(!y)return a;var C=[];for(v=0,k=a.length;v<k;v++)U(a[v]),R(r)||C.push(a[v]),$();return C}function D(e){var t="";if(e.flags&u.KSIDE_CASTLE)t="O-O";else if(e.flags&u.QSIDE_CASTLE)t="O-O-O";else{var a=function(e){for(var t=O(),a=e.from,r=e.to,n=e.piece,i=0,s=0,o=0,c=0,l=t.length;c<l;c++){var u=t[c].from,d=t[c].to,p=t[c].piece;n===p&&a!==u&&r===d&&(i++,z(a)===z(u)&&s++,H(a)===H(u)&&o++)}if(i>0)return s>0&&o>0?G(a):o>0?G(a).charAt(1):G(a).charAt(0);return""}(e);"p"!==e.piece&&(t+=e.piece.toUpperCase()+a),e.flags&(u.CAPTURE|u.EP_CAPTURE)&&("p"===e.piece&&(t+=G(e.from)[0]),t+="x"),t+=G(e.to),e.flags&u.PROMOTION&&(t+="="+e.promotion.toUpperCase())}return U(e),B()&&(q()?t+="#":t+="+"),$(),t}function I(e,t){for(var a=d.a8;a<=d.h1;a++)if(136&a)a+=7;else if(null!=h[a]&&h[a].color===e){var r=h[a],n=a-t,i=n+119;if(s[i]&1<<c[r.type]){if("p"===r.type){if(n>0){if("w"===r.color)return!0}else if("b"===r.color)return!0;continue}if("n"===r.type||"k"===r.type)return!0;for(var l=o[i],u=a+l,p=!1;u!==t;){if(null!=h[u]){p=!0;break}u+=l}if(!p)return!0}}return!1}function R(e){return I(K(e),f[e])}function B(){return R(m)}function q(){return B()&&0===O().length}function L(){return!B()&&0===O().length}function N(){for(var e={},t=[],a=0,r=0,n=d.a8;n<=d.h1;n++)if(r=(r+1)%2,136&n)n+=7;else{var i=h[n];i&&(e[i.type]=i.type in e?e[i.type]+1:1,"b"===i.type&&t.push(r),a++)}if(2===a)return!0;if(3===a&&(1===e.b||1===e.n))return!0;if(a===e.b+2){var s=0,o=t.length;for(n=0;n<o;n++)s+=t[n];if(0===s||s===o)return!0}return!1}function F(){for(var e=[],t={},a=!1;;){var r=$();if(!r)break;e.push(r)}for(;;){var n=E().split(" ").slice(0,4).join(" ");if(t[n]=n in t?t[n]+1:1,t[n]>=3&&(a=!0),!e.length)break;U(e.pop())}return a}function U(e){var t=m,a=K(t);if(function(e){_.push({move:e,kings:{b:f.b,w:f.w},turn:m,castling:{b:g.b,w:g.w},ep_square:b,half_moves:y,move_number:v})}(e),h[e.to]=h[e.from],h[e.from]=null,e.flags&u.EP_CAPTURE&&("b"===m?h[e.to-16]=null:h[e.to+16]=null),e.flags&u.PROMOTION&&(h[e.to]={type:e.promotion,color:t}),"k"===h[e.to].type){if(f[h[e.to].color]=e.to,e.flags&u.KSIDE_CASTLE){var r=e.to-1,n=e.to+1;h[r]=h[n],h[n]=null}else if(e.flags&u.QSIDE_CASTLE){r=e.to+1,n=e.to-2;h[r]=h[n],h[n]=null}g[t]=""}if(g[t])for(var i=0,s=p[t].length;i<s;i++)if(e.from===p[t][i].square&&g[t]&p[t][i].flag){g[t]^=p[t][i].flag;break}if(g[a])for(i=0,s=p[a].length;i<s;i++)if(e.to===p[a][i].square&&g[a]&p[a][i].flag){g[a]^=p[a][i].flag;break}b=e.flags&u.BIG_PAWN?"b"===m?e.to-16:e.to+16:-1,"p"===e.piece||e.flags&(u.CAPTURE|u.EP_CAPTURE)?y=0:y++,"b"===m&&v++,m=K(m)}function $(){var e=_.pop();if(null==e)return null;var t=e.move;f=e.kings,m=e.turn,g=e.castling,b=e.ep_square,y=e.half_moves,v=e.move_number;var a,r,n=m,i=K(m);if(h[t.from]=h[t.to],h[t.from].type=t.piece,h[t.to]=null,t.flags&u.CAPTURE)h[t.to]={type:t.captured,color:i};else if(t.flags&u.EP_CAPTURE){var s;s="b"===n?t.to-16:t.to+16,h[s]={type:"p",color:i}}t.flags&(u.KSIDE_CASTLE|u.QSIDE_CASTLE)&&(t.flags&u.KSIDE_CASTLE?(a=t.to+1,r=t.to-1):t.flags&u.QSIDE_CASTLE&&(a=t.to-2,r=t.to+1),h[a]=h[r],h[r]=null);return t}function z(e){return e>>4}function H(e){return 15&e}function G(e){var t=H(e),a=z(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(a,a+1)}function K(e){return"w"===e?"b":"w"}function W(e){var t=function e(t){var a=t instanceof Array?[]:{};for(var n in t)"object"===r(n)?a[n]=e(t[n]):a[n]=t[n];return a}(e);t.san=D(t),t.to=G(t.to),t.from=G(t.from);var a="";for(var n in u)u[n]&t.flags&&(a+=l[n]);return t.flags=a,t}function V(e){return e.replace(/^\s+|\s+$/g,"")}return S(void 0===e?t:e),{WHITE:"w",BLACK:"b",PAWN:"p",KNIGHT:"n",BISHOP:"b",ROOK:"r",QUEEN:"q",KING:"k",SQUARES:function(){for(var e=[],t=d.a8;t<=d.h1;t++)136&t?t+=7:e.push(G(t));return e}(),FLAGS:l,load:function(e){return S(e)},reset:function(){return k()},moves:function(e){for(var t=O(e),a=[],r=0,n=t.length;r<n;r++)void 0!==e&&"verbose"in e&&e.verbose?a.push(W(t[r])):a.push(D(t[r]));return a},in_check:function(){return B()},in_checkmate:function(){return q()},in_stalemate:function(){return L()},in_draw:function(){return y>=100||L()||N()||F()},insufficient_material:function(){return N()},in_threefold_repetition:function(){return F()},game_over:function(){return y>=100||q()||L()||N()||F()},validate_fen:function(e){return P(e)},fen:function(){return E()},pgn:function(e){var t="object"===r(e)&&"string"==typeof e.newline_char?e.newline_char:"\n",a="object"===r(e)&&"number"==typeof e.max_width?e.max_width:0,n=[],i=!1;for(var s in w)n.push("["+s+' "'+w[s]+'"]'+t),i=!0;i&&_.length&&n.push(t);for(var o=[];_.length>0;)o.push($());for(var c=[],l="",u=1;o.length>0;){var d=o.pop();1===u&&"b"===d.color?(l="1. ...",u++):"w"===d.color&&(l.length&&c.push(l),l=u+".",u++),l=l+" "+D(d),U(d)}if(l.length&&c.push(l),void 0!==w.Result&&c.push(w.Result),0===a)return n.join("")+c.join(" ");var p=0;for(s=0;s<c.length;s++)p+c[s].length>a&&0!==s?(" "===n[n.length-1]&&n.pop(),n.push(t),p=0):0!==s&&(n.push(" "),p++),n.push(c[s]),p+=c[s].length;return n.join("")},load_pgn:function(e,t){function s(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}function o(e){return function(e){var t,a,r,s=u.NORMAL,o=e.match(/^([NBKRQ])?([abcdefgh12345678][12345678]?)?(x)?([abcdefgh][12345678])(=?[NBRQ])?/);if("O-O-O"===e.slice(0,5))t=(a=f[m])-2,s=u.QSIDE_CASTLE;else if("O-O"===e.slice(0,3))t=(a=f[m])+2,s=u.KSIDE_CASTLE;else if(o&&o[1]){var c=o[1].toLowerCase();o[3]&&(s=u.CAPTURE),t=d[o[4]];for(var l=0,p=i[c].length;l<p;l++)for(var g=i[c][l],b=t;!(136&(b+=g));){if(y=h[b]){y.color===m&&y.type===c&&(!o[2]||G(b).indexOf(o[2])>=0)&&(a=b);break}if("n"===c||"k"===c)break}}else if(o){if(o[3]){t=d[o[4]];for(l=2;l<4;l++){136&(b=t-n[m][l])||null!=h[b]&&h[b].color===m&&G(b)[0]===o[2]&&(a=b)}s=h[t]?u.CAPTURE:u.EP_CAPTURE}else{var y,v=(t=d[e.slice(0,2)])-n[m][0];(y=h[v])&&"p"===y.type&&y.color===m?a=v:(v=t-n[m][1],(y=h[v])&&"p"===y.type&&y.color===m&&(a=v,s=u.BIG_PAWN))}o[5]&&(r=void 0===o[5][1]?o[5][0].toLowerCase():o[5][1].toLowerCase())}if(a>=0&&t>=0&&s)return j(h,a,t,s,r);e.length}(V(e))}var c="object"===r(t)&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",l=new RegExp("^(\\[(.|"+s(c)+")*\\])("+s(c)+")*1.("+s(c)+"|.)*$","g"),p=e.replace(l,"$1");"["!==p[0]&&(p=""),k();var g=function(e,t){for(var a="object"===r(t)&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",n={},i=e.split(a),s="",o="",c=0;c<i.length;c++)s=i[c].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),o=i[c].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),V(s).length>0&&(n[s]=o);return n}(p,t);for(var b in g)C([b,g[b]]);var y=e.replace(p,"").replace(new RegExp(s(c),"g")," "),v=V(y=(y=y.replace(/(\{[^}]+\})+?/g,"")).replace(/\d+\./g,"")).split(new RegExp(/\s+/));v=v.join(",").replace(/,,+/g,",").split(",");for(var _="",x=0;x<v.length-1;x++){if(null==(_=o(v[x])))return!1;U(_)}if(_=v[v.length-1],a.indexOf(_)>-1)(function(e){var t=!1;for(var a in e)t=!0;return t})(w)&&void 0===w.Result&&C(["Result",_]);else{if(null==(_=o(_)))return!1;U(_)}return!0},header:function(){return C(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=d.a8;t<=d.h1;t++){if(0===H(t)&&(e+=" "+"87654321"[z(t)]+" |"),null==h[t])e+=" . ";else{var a=h[t].type;e+=" "+("w"===h[t].color?a.toUpperCase():a.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return e+="   +------------------------+\n",e+="     a  b  c  d  e  f  g  h\n"}()},turn:function(){return m},move:function(e){var t=null,a=O();if("string"==typeof e){for(var n=0,i=a.length;n<i;n++)if(e===D(a[n])){t=a[n];break}}else if("object"===r(e))for(n=0,i=a.length;n<i;n++)if(e.from===G(a[n].from)&&e.to===G(a[n].to)&&(!("promotion"in a[n])||e.promotion===a[n].promotion)){t=a[n];break}if(!t)return null;var s=W(t);return U(t),s},undo:function(){var e=$();return e?W(e):null},clear:function(){return x()},put:function(e,t){return T(e,t)},get:function(e){return M(e)},remove:function(e){return function(e){var t=M(e);return h[d[e]]=null,t&&"k"===t.type&&(f[t.color]=-1),A(E()),t}(e)},perft:function(e){return function e(t){for(var a=O({legal:!1}),r=0,n=m,i=0,s=a.length;i<s;i++){if(U(a[i]),!R(n))if(t-1>0)r+=e(t-1);else r++;$()}return r}(e)},square_color:function(e){if(e in d){var t=d[e];return(z(t)+H(t))%2==0?"light":"dark"}return null},history:function(e){for(var t=[],a=[],r=(void 0!==e&&"verbose"in e&&e.verbose);_.length>0;)t.push($());for(;t.length>0;){var n=t.pop();r?a.push(W(n)):a.push(D(n)),U(n)}return a}}}},function(e,t){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * chessboard.js $version$
 *
 * Copyright 2013 Chris Oakman
 * Released under the MIT license
 * https://github.com/oakmac/chessboardjs/blob/master/LICENSE
 *
 * Date: $date$
 */var r="abcdefgh".split("");function n(e){if("string"!=typeof e)return!1;var t=e.split("-");return 2===t.length&&(!0===i(t[0])&&!0===i(t[1]))}function i(e){return"string"==typeof e&&-1!==e.search(/^[a-h][1-8]$/)}function s(e){if("string"!=typeof e)return!1;var t=(e=e.replace(/ .+$/,"")).split("/");if(8!==t.length)return!1;for(var a=0;a<8;a++)if(""===t[a]||t[a].length>8||-1!==t[a].search(/[^kqrbnpKQRNBP1-8]/))return!1;return!0}function o(e){if("object"!==a(e))return!1;for(var t in e)if(!0===e.hasOwnProperty(t)&&(!0!==i(t)||!0!=("string"==typeof(r=e[t])&&-1!==r.search(/^[bw][KQRNBP]$/))))return!1;var r;return!0}function c(e){if(!0!==s(e))return!1;for(var t,a=(e=e.replace(/ .+$/,"")).split("/"),n={},i=8,o=0;o<8;o++){for(var c=a[o].split(""),l=0,u=0;u<c.length;u++){if(-1!==c[u].search(/[1-8]/))l+=parseInt(c[u],10);else n[r[l]+i]=(t=c[u]).toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase(),l++}i--}return n}function l(e){if(!0!==o(e))return!1;for(var t,a,n="",i=8,s=0;s<8;s++){for(var c=0;c<8;c++){var l=r[c]+i;!0===e.hasOwnProperty(l)?n+=(t=e[l],a=void 0,"w"===(a=t.split(""))[0]?a[1].toUpperCase():a[1].toLowerCase()):n+="1"}7!==s&&(n+="/"),i--}return n=(n=(n=(n=(n=(n=(n=n.replace(/11111111/g,"8")).replace(/1111111/g,"7")).replace(/111111/g,"6")).replace(/11111/g,"5")).replace(/1111/g,"4")).replace(/111/g,"3")).replace(/11/g,"2")}var u=function(e,t){t=t||{};var u,d,p,h,f,m,g,b,y,v,_=c("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR"),w={alpha:"alpha-d2270",black:"black-3c85d",board:"board-b72b1",chessboard:"chessboard-63f37",clearfix:"clearfix-7da63",highlight1:"highlight1-32417",highlight2:"highlight2-9c5d2",notation:"notation-322f9",numeric:"numeric-fc462",piece:"piece-417db",row:"row-5277c",sparePieces:"spare-pieces-7492f",sparePiecesBottom:"spare-pieces-bottom-ae20f",sparePiecesTop:"spare-pieces-top-4028b",square:"square-55d63",white:"white-1e1d7"},x={},k=2,S="white",P={},E=!1,C={},A={};function M(){return"xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx".replace(/x/g,(function(e){return(16*Math.random()|0).toString(16)}))}function T(e){return JSON.parse(JSON.stringify(e))}function j(e){var t=e.split(".");return{major:parseInt(t[0],10),minor:parseInt(t[1],10),patch:parseInt(t[2],10)}}function O(e,r,n){if(!0===t.hasOwnProperty("showErrors")&&!1!==t.showErrors){var i="ChessBoard Error "+e+": "+r;return"console"===t.showErrors&&"object"===("undefined"==typeof console?"undefined":a(console))&&"function"==typeof console.log?(console.log(i),void(arguments.length>=2&&console.log(n))):"alert"===t.showErrors?(n&&(i+="\n\n"+JSON.stringify(n)),void window.alert(i)):void("function"==typeof t.showErrors&&t.showErrors(e,r,n))}}function D(){if("string"==typeof e){if(""===e)return window.alert("ChessBoard Error 1001: The first argument to ChessBoard() cannot be an empty string.\n\nExiting..."),!1;var t=document.getElementById(e);if(!t)return window.alert('ChessBoard Error 1002: Element with id "'+e+'" does not exist in the DOM.\n\nExiting...'),!1;u=$(t)}else if(1!==(u=$(e)).length)return window.alert("ChessBoard Error 1003: The first argument to ChessBoard() must be an ID or a single DOM node.\n\nExiting..."),!1;return window.JSON&&"function"==typeof JSON.stringify&&"function"==typeof JSON.parse?!!(a(window.$)&&$.fn&&$.fn.jquery&&!0==(r=$.fn.jquery,n="1.7.0",r=j(r),n=j(n),1e4*r.major*1e4+1e4*r.minor+r.patch>=1e4*n.major*1e4+1e4*n.minor+n.patch))||(window.alert("ChessBoard Error 1005: Unable to find a valid version of jQuery. Please include jQuery 1.7.0 or higher on the page.\n\nExiting..."),!1):(window.alert("ChessBoard Error 1004: JSON does not exist. Please include a JSON polyfill.\n\nExiting..."),!1);var r,n}function I(e){return"fast"===e||"slow"===e||parseInt(e,10)+""==e+""&&e>=0}function R(e){return"function"==typeof t.pieceTheme?t.pieceTheme(e):"string"==typeof t.pieceTheme?t.pieceTheme.replace(/{piece}/g,e):(O(8272,"Unable to build image source for cfg.pieceTheme."),"")}function B(e,t,a){var r='<img src="'+R(e)+'" ';return a&&"string"==typeof a&&(r+='id="'+a+'" '),r+='alt="" class="'+w.piece+'" data-piece="'+e+'" style="width: '+m+"px;height: "+m+"px;",!0===t&&(r+="display:none;"),r+='" />'}function q(e){var t=["wK","wQ","wR","wB","wN","wP"];"black"===e&&(t=["bK","bQ","bR","bB","bN","bP"]);for(var a="",r=0;r<t.length;r++)a+=B(t[r],!1,C[t[r]]);return a}function L(e,a,r,n){var i=$("#"+A[e]),s=i.offset(),o=$("#"+A[a]),c=o.offset(),l=M();$("body").append(B(r,!0,l));var u=$("#"+l);u.css({display:"",position:"absolute",top:s.top,left:s.left}),i.find("."+w.piece).remove();var d={duration:t.moveSpeed,complete:function(){o.append(B(r)),u.remove(),"function"==typeof n&&n()}};u.animate(c,d)}function N(e,a,r){var n=$("#"+C[e]).offset(),i=$("#"+A[a]),s=i.offset(),o=M();$("body").append(B(e,!0,o));var c=$("#"+o);c.css({display:"",position:"absolute",left:n.left,top:n.top});var l={duration:t.moveSpeed,complete:function(){i.find("."+w.piece).remove(),i.append(B(e)),c.remove(),"function"==typeof r&&r()}};c.animate(s,l)}function F(e,a,r){if(0!==e.length){!0;for(var n=0,i=0;i<e.length;i++)"clear"===e[i].type&&$("#"+A[e[i].square]+" ."+w.piece).fadeOut(t.trashSpeed,s),"add"===e[i].type&&!0!==t.sparePieces&&$("#"+A[e[i].square]).append(B(e[i].piece,!0)).find("."+w.piece).fadeIn(t.appearSpeed,s),"add"===e[i].type&&!0===t.sparePieces&&N(e[i].piece,e[i].square,s),"move"===e[i].type&&L(e[i].source,e[i].destination,e[i].piece,s)}function s(){++n===e.length&&(G(),!1,!0===t.hasOwnProperty("onMoveEnd")&&"function"==typeof t.onMoveEnd&&t.onMoveEnd(T(a),T(r)))}}function U(e,t){e=e.split("");var a=r.indexOf(e[0])+1,n=parseInt(e[1],10);t=t.split("");var i=r.indexOf(t[0])+1,s=parseInt(t[1],10),o=Math.abs(a-i),c=Math.abs(n-s);return o>=c?o:c}function z(e,t,a){for(var n=function(e){for(var t=[],a=0;a<8;a++)for(var n=0;n<8;n++){var i=r[a]+(n+1);e!==i&&t.push({square:i,distance:U(e,i)})}t.sort((function(e,t){return e.distance-t.distance}));var s=[];for(a=0;a<t.length;a++)s.push(t[a].square);return s}(a),i=0;i<n.length;i++){var s=n[i];if(!0===e.hasOwnProperty(s)&&e[s]===t)return s}return!1}function H(e,t){e=T(e),t=T(t);var a=[],r={};for(var n in t)!0===t.hasOwnProperty(n)&&!0===e.hasOwnProperty(n)&&e[n]===t[n]&&(delete e[n],delete t[n]);for(var n in t)if(!0===t.hasOwnProperty(n)){var i=z(e,t[n],n);!1!==i&&(a.push({type:"move",source:i,destination:n,piece:t[n]}),delete e[i],delete t[n],r[n]=!0)}for(var n in t)!0===t.hasOwnProperty(n)&&(a.push({type:"add",square:n,piece:t[n]}),delete t[n]);for(var n in e)!0===e.hasOwnProperty(n)&&!0!==r.hasOwnProperty(n)&&(a.push({type:"clear",square:n,piece:e[n]}),delete e[n]);return a}function G(){for(var e in d.find("."+w.piece).remove(),P)!0===P.hasOwnProperty(e)&&$("#"+A[e]).append(B(P[e]))}function K(){d.html(function(e){"black"!==e&&(e="white");var a="",n=T(r),i=8;"black"===e&&(n.reverse(),i=1);for(var s="white",o=0;o<8;o++){a+='<div class="'+w.row+'">';for(var c=0;c<8;c++){var l=n[c]+i;a+='<div class="'+w.square+" "+w[s]+" square-"+l+'" style="width: '+m+"px; height: "+m+'px" id="'+A[l]+'" data-square="'+l+'">',!0===t.showNotation&&(("white"===e&&1===i||"black"===e&&8===i)&&(a+='<div class="'+w.notation+" "+w.alpha+'">'+n[c]+"</div>"),0===c&&(a+='<div class="'+w.notation+" "+w.numeric+'">'+i+"</div>")),a+="</div>",s="white"===s?"black":"white"}a+='<div class="'+w.clearfix+'"></div></div>',s="white"===s?"black":"white","white"===e?i--:i++}return a}(S)),G(),!0===t.sparePieces&&("white"===S?(h.html(q("black")),f.html(q("white"))):(h.html(q("white")),f.html(q("black"))))}function W(e,t){for(var a in e=T(e),t)if(!0===t.hasOwnProperty(a)&&!0===e.hasOwnProperty(a)){var r=e[a];delete e[a],e[t[a]]=r}return e}function V(e){var a=T(P),r=T(e);l(a)!==l(r)&&(!0===t.hasOwnProperty("onChange")&&"function"==typeof t.onChange&&t.onChange(a,r),P=e)}function Y(e,t){for(var a in v)if(!0===v.hasOwnProperty(a)){var r=v[a];if(e>=r.left&&e<r.left+m&&t>=r.top&&t<r.top+m)return a}return"offboard"}function J(){d.find("."+w.square).removeClass(w.highlight1+" "+w.highlight2)}function X(){J();var e=T(P);delete e[y],V(e),G(),p.fadeOut(t.trashSpeed),E=!1}function Q(e,a,r,n){"function"==typeof t.onDragStart&&!1===t.onDragStart(e,a,T(P),S)||(E=!0,g=a,y=e,b="spare"===e?"offboard":e,function(){for(var e in v={},A)!0===A.hasOwnProperty(e)&&(v[e]=$("#"+A[e]).offset())}(),p.attr("src",R(a)).css({display:"",position:"absolute",left:r-m/2,top:n-m/2}),"spare"!==e&&$("#"+A[e]).addClass(w.highlight1).find("."+w.piece).css("display","none"))}function Z(e,a){p.css({left:e-m/2,top:a-m/2});var r=Y(e,a);r!==b&&(!0===i(b)&&$("#"+A[b]).removeClass(w.highlight2),!0===i(r)&&$("#"+A[r]).addClass(w.highlight2),"function"==typeof t.onDragMove&&t.onDragMove(r,b,y,g,T(P),S),b=r)}function ee(e){var a="drop";if("offboard"===e&&"snapback"===t.dropOffBoard&&(a="snapback"),"offboard"===e&&"trash"===t.dropOffBoard&&(a="trash"),!0===t.hasOwnProperty("onDrop")&&"function"==typeof t.onDrop){var r=T(P);"spare"===y&&!0===i(e)&&(r[e]=g),!0===i(y)&&"offboard"===e&&delete r[y],!0===i(y)&&!0===i(e)&&(delete r[y],r[e]=g);var n=T(P),s=t.onDrop(y,e,g,r,n,S);"snapback"!==s&&"trash"!==s||(a=s)}"snapback"===a?function(){if("spare"!==y){J();var e=$("#"+A[y]).offset(),a={duration:t.snapbackSpeed,complete:function(){G(),p.css("display","none"),!0===t.hasOwnProperty("onSnapbackEnd")&&"function"==typeof t.onSnapbackEnd&&t.onSnapbackEnd(g,y,T(P),S)}};p.animate(e,a),E=!1}else X()}():"trash"===a?X():"drop"===a&&function(e){J();var a=T(P);delete a[y],a[e]=g,V(a);var r=$("#"+A[e]).offset(),n={duration:t.snapSpeed,complete:function(){G(),p.css("display","none"),!0===t.hasOwnProperty("onSnapEnd")&&"function"==typeof t.onSnapEnd&&t.onSnapEnd(y,e,g)}};p.animate(r,n),E=!1}(e)}function te(e){e.preventDefault()}function ae(e){if(!0===t.draggable){var a=$(this).attr("data-square");!0===i(a)&&!0===P.hasOwnProperty(a)&&Q(a,P[a],e.pageX,e.pageY)}}function re(e){if(!0===t.draggable){var a=$(this).attr("data-square");!0===i(a)&&!0===P.hasOwnProperty(a)&&(e=e.originalEvent,Q(a,P[a],e.changedTouches[0].pageX,e.changedTouches[0].pageY))}}function ne(e){!0===t.sparePieces&&Q("spare",$(this).attr("data-piece"),e.pageX,e.pageY)}function ie(e){!0===t.sparePieces&&Q("spare",$(this).attr("data-piece"),(e=e.originalEvent).changedTouches[0].pageX,e.changedTouches[0].pageY)}function se(e){!0===E&&Z(e.pageX,e.pageY)}function oe(e){!0===E&&(e.preventDefault(),Z(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function ce(e){!0===E&&ee(Y(e.pageX,e.pageY))}function le(e){!0===E&&ee(Y(e.originalEvent.changedTouches[0].pageX,e.originalEvent.changedTouches[0].pageY))}function ue(e){if(!1===E&&!0===t.hasOwnProperty("onMouseoverSquare")&&"function"==typeof t.onMouseoverSquare){var a=$(e.currentTarget).attr("data-square");if(!0===i(a)){var r=!1;!0===P.hasOwnProperty(a)&&(r=P[a]),t.onMouseoverSquare(a,r,T(P),S)}}}function de(e){if(!1===E&&!0===t.hasOwnProperty("onMouseoutSquare")&&"function"==typeof t.onMouseoutSquare){var a=$(e.currentTarget).attr("data-square");if(!0===i(a)){var r=!1;!0===P.hasOwnProperty(a)&&(r=P[a]),t.onMouseoutSquare(a,r,T(P),S)}}}function pe(){$("body").on("mousedown mousemove","."+w.piece,te),d.on("mousedown","."+w.square,ae),u.on("mousedown","."+w.sparePieces+" ."+w.piece,ne),d.on("mouseenter","."+w.square,ue).on("mouseleave","."+w.square,de),!0===(navigator&&navigator.userAgent&&-1!==navigator.userAgent.search(/MSIE/))?(document.ondragstart=function(){return!1},$("body").on("mousemove",se).on("mouseup",ce)):$(window).on("mousemove",se).on("mouseup",ce),"ontouchstart"in document.documentElement==!0&&(d.on("touchstart","."+w.square,re),u.on("touchstart","."+w.sparePieces+" ."+w.piece,ie),$(window).on("touchmove",oe).on("touchend",le))}function he(){!function(){for(var e=0;e<r.length;e++)for(var t=1;t<=8;t++){var a=r[e]+t;A[a]=a+"-"+M()}var n="KQRBNP".split("");for(e=0;e<n.length;e++){var i="w"+n[e],s="b"+n[e];C[i]=i+"-"+M(),C[s]=s+"-"+M()}}(),u.html(function(){var e='<div class="'+w.chessboard+'">';return!0===t.sparePieces&&(e+='<div class="'+w.sparePieces+" "+w.sparePiecesTop+'"></div>'),e+='<div class="'+w.board+'"></div>',!0===t.sparePieces&&(e+='<div class="'+w.sparePieces+" "+w.sparePiecesBottom+'"></div>'),e+="</div>"}()),d=u.find("."+w.board),!0===t.sparePieces&&(h=u.find("."+w.sparePiecesTop),f=u.find("."+w.sparePiecesBottom));var e=M();$("body").append(B("wP",!0,e)),p=$("#"+e),k=parseInt(d.css("borderLeftWidth"),10),x.resize()}return x.clear=function(e){x.position({},e)},x.destroy=function(){u.html(""),p.remove(),u.unbind()},x.fen=function(){return x.position("fen")},x.flip=function(){return x.orientation("flip")},x.move=function(){if(0!==arguments.length){for(var e=!0,t={},a=0;a<arguments.length;a++)if(!1!==arguments[a])if(!0===n(arguments[a])){var r=arguments[a].split("-");t[r[0]]=r[1]}else O(2826,"Invalid move passed to the move method.",arguments[a]);else e=!1;var i=W(P,t);return x.position(i,e),i}},x.orientation=function(e){return 0===arguments.length?S:"white"===e||"black"===e?(S=e,K(),S):"flip"===e?(S="white"===S?"black":"white",K(),S):void O(5482,"Invalid value passed to the orientation method.",e)},x.position=function(e,t){return 0===arguments.length?T(P):"string"==typeof e&&"fen"===e.toLowerCase()?l(P):(!1!==t&&(t=!0),"string"==typeof e&&"start"===e.toLowerCase()&&(e=T(_)),!0===s(e)&&(e=c(e)),void(!0===o(e)?!0===t?(F(H(P,e),P,e),V(e)):(V(e),G()):O(6482,"Invalid value passed to the position method.",e)))},x.resize=function(){m=function(){var e=parseInt(u.width(),10);if(!e||e<=0)return 0;for(var t=e-1;t%8!=0&&t>0;)t--;return t/8}(),d.css("width",8*m+"px"),p.css({height:m,width:m}),!0===t.sparePieces&&u.find("."+w.sparePieces).css("paddingLeft",m+k+"px"),K()},x.start=function(e){x.position("start",e)},!0===D()&&1==("string"!=typeof t&&!0!==o(t)||(t={position:t}),"black"!==t.orientation&&(t.orientation="white"),S=t.orientation,!1!==t.showNotation&&(t.showNotation=!0),!0!==t.draggable&&(t.draggable=!1),"trash"!==t.dropOffBoard&&(t.dropOffBoard="snapback"),!0!==t.sparePieces&&(t.sparePieces=!1),!0===t.sparePieces&&(t.draggable=!0),(!0!==t.hasOwnProperty("pieceTheme")||"string"!=typeof t.pieceTheme&&"function"!=typeof t.pieceTheme)&&(t.pieceTheme="img/chesspieces/wikipedia/{piece}.png"),!0===t.hasOwnProperty("appearSpeed")&&!0===I(t.appearSpeed)||(t.appearSpeed=200),!0===t.hasOwnProperty("moveSpeed")&&!0===I(t.moveSpeed)||(t.moveSpeed=200),!0===t.hasOwnProperty("snapbackSpeed")&&!0===I(t.snapbackSpeed)||(t.snapbackSpeed=50),!0===t.hasOwnProperty("snapSpeed")&&!0===I(t.snapSpeed)||(t.snapSpeed=25),!0===t.hasOwnProperty("trashSpeed")&&!0===I(t.trashSpeed)||(t.trashSpeed=100),!0===t.hasOwnProperty("position")&&("start"===t.position?P=T(_):!0===s(t.position)?P=c(t.position):!0===o(t.position)?P=T(t.position):O(7263,"Invalid value passed to config.position.",t.position)),!0)&&(he(),pe()),x};u.fenToObj=c,u.objToFen=l,e.exports=u},function(e,t,a){var r=a(249),n=a(1193);e.exports=DebugAppspace={render:function(e,t){document.querySelector(".email-appspace").innerHTML=r();try{n.create(e.options,document.getElementById("email-appspace-debug"))}catch(e){console.log("error creating jsonTree: "+n)}},attachEvents:function(e,t){}}},function(e,t){e.exports=DebugAppspaceTemplate=function(){return'\n  <link rel="stylesheet" type="text/css" href="/saito/lib/jsonTree/jsonTree.css" /> \n  <h3>Wallet Configuration:</h3> \n  <div style="clear:both;padding-top:10px;padding-bottom:10px;" id="email-appspace-debug" class="email-appspace-debug"></div>\n  <div class="send-wallet-info tip">\n    <button class="sent-wallet">Send the Saito Team Your Wallet for Debug</button>\n    <i class="fas fa-info-circle"></i>\n    <div class="tiptext">This is a debug-only feature and sends your whole wallet including PRIVATE KEY.</div>\n  </div>\n  <p>\n    <textarea class="debug-message" placeholder="Please tell us who you are and why you sent this wallet."></textarea>\n  </p>\n    <hr />\n  '}},function(e,t){e.exports=WebsiteDataTemplate=function(){return'\n    <div>Latest Block Number:</div>\n    <div class="info block-number"></div>\n    <div>Latest Block Time:</div>\n    <div class="info block-time"></div>\n    '}},function(e,t,a){var r=a(252),n=a(130),i=a(265);e.exports=EmailMain={render:function(e,t){var a=document.querySelector(".email-main");a&&(a.innerHTML=r(e,t),t.main=this,n.render(e,t),i.render(e,t))},attachEvents:function(e,t){n.attachEvents(e,t),i.attachEvents(e,t)}}},function(e,t){e.exports=EmailMainTemplate=function(e,t){for(var a='\n      <div class="email-header"></div>\n      <div class="email-body"></div>\n      <button id="email" class="create-button"><i class="fas fa-plus"></i></button>\n  ',r=e.modules.respondTo("email-appspace"),n=0;n<r.length;n++){var i=r[n];null!=i&&""!=i.script&&"undefined"!==i.script&&null!=i.script&&(a+=i.script)}return a}},function(e,t,a){var r=a(254);e.exports=EmailInboxHeader={render:function(e,t){var a=e.browser.parseHash(window.location.hash).subpage;document.querySelector(".email-header").innerHTML=r(e,t,a)},attachEvents:function(e,t){document.getElementById("email-select-icon").addEventListener("click",(function(e){Array.from(document.getElementsByClassName("email-selected")).forEach((function(t){t.checked=e.currentTarget.checked}))})),document.getElementById("email-delete-icon").addEventListener("click",(function(a){var r=document.querySelector(".email-list"),n=e.browser.parseHash(window.location.hash).subpage;Array.from(document.getElementsByClassName("email-message")).forEach((function(e){if(e.children[0].checked){r.removeChild(e);var a=t.getSelectedEmail(e.id,n);t.deleteTransaction(a,n)}}))}))}}},function(e,t){e.exports=EmailInboxHeaderTemplate=function(e,t,a){return'\n    <div class="email-inbox-header-holder">\n      <div class="email-icons">\n        <input id="email-select-icon" type="checkbox">\n        <i id="email-delete-icon" class="icon-med far fa-trash-alt"></i>\n        <i id="email-bars-icon" class="icon-med fas fa-bars"></i>\n      </div>\n      <div class="email-balance"><span id="email-balance"></span><nbsp/><span id="email-token"></span></div>\n      <div class="email-box-name">'.concat(a,"</div>\n    </div>\n  ")}},function(e,t,a){a(256);var r=a(258);e.exports=EmailDetailHeader={render:function(e,t){document.querySelector(".email-header").innerHTML=r(e,t)},attachEvents:function(e,t){document.getElementById("email-delete-icon").onclick=function(a){try{var r=e.browser.parseHash(window.location.hash).selectedemail,n=e.browser.parseHash(window.location.hash).subpage,i=t.getSelectedEmail(r,n);t.deleteTransaction(i,n),window.location.hash=t.goToLocation("#page=email_list&subpage=inbox")}catch(e){salert("Error deleting email<br/>".concat(e))}},document.getElementById("email-detail-reply").onclick=function(a){var r=e.browser.parseHash(window.location.hash).selectedemail;window.location.hash=t.goToLocation("#page=email_form&original=".concat(r,"&type=reply"))},document.getElementById("email-detail-forward").onclick=function(a){var r=e.browser.parseHash(window.location.hash).selectedemail;window.location.hash=t.goToLocation("#page=email_form&original=".concat(r,"&type=fwd"))}}}},function(e,t,a){var r=a(131),n=a(257),i=a(93);e.exports=EmailList={render:function(e,t){var a;document.querySelector(".email-body").innerHTML=r();try{var s=e.browser.parseHash(window.location.hash).subpage;a=t.emails[s]}catch(e){t.locationErrorFallback("Error fetching emails.<br/>".concat(e),e)}a?a.forEach((function(e){document.querySelector(".email-list").innerHTML+=n(e,t.returnAddressHTML(e.transaction.from[0].add),i)})):t.locationErrorFallback("No emails found.","No emails found in ".concat(subpage))},attachEvents:function(e,t){Array.from(document.getElementsByClassName("email-message")).forEach((function(a){a.onclick=function(a){if("INPUT"!=a.srcElement.nodeName){var r=e.browser.parseHash(window.location.hash).subpage;window.location.hash=t.goToLocation("#page=email_detail&subpage=".concat(r,"&selectedemail=").concat(a.currentTarget.id))}}}))}}},function(e,t){e.exports=EmailListRowTemplate=function(e,t,a){var r=e.returnMessage(),n=r.message,i=r.title,s=(e.transaction.from,e.transaction.ts),o=e.transaction.sig,c=(0,a.datetime_formatter)(s),l=document.createElement("DIV");return l.innerHTML=n,n=(n=l.innerText).length>64?"".concat(n.substring(0,64),"..."):n,'\n  <div class="email-message" id="'.concat(o,'">\n      <input class="email-selected" type="checkbox">\n      <div class="email-message-content">\n          <div class="email-message-from">').concat(t,'</div>\n          <div class="email-message-title">').concat(i,'</div>\n          <div class="email-message-message">').concat(n,'</div>\n      </div>\n      <p class="email-message-timestamp">').concat(c.hours,":").concat(c.minutes,"</p>\n  </div>")}},function(e,t){e.exports=EmailDetailHeaderTempkate=function(e,t){return'\n  <div class="email-header-holder">\n    <div class="email-detail-left-options">\n      <i id="email-form-back-button" class="icon-med fas fa-arrow-left"></i>\n      <i id="email-bars-icon" class="icon-med fas fa-bars"></i>\n    </div>\n    <div class="email-detail-right-options">\n      <div class="email-icons-detail">\n        <i id="email-delete-icon" class="icon-med far fa-trash-alt"></i>\n        <i id="email-detail-reply" class="icon-med fas fa-reply"></i>\n        <i id="email-detail-forward" class="icon-med fas fa-share"></i>\n      </div>\n      <div class="email-balance-detail"><span id="email-balance"></span><nbsp/><span id="email-token"></span></div>\n    </div>\n  </div>\n  '}},function(e,t,a){var r=a(260);e.exports=EmailFormHeader={render:function(e,t){document.querySelector(".email-header").innerHTML=r(e,t)},attachEvents:function(e,t){}}},function(e,t){e.exports=EmailHeaderTemplate=function(e,t){return'\n  <div class="email-header-holder">\n    <div class="email-icons">\n      <i id="email-form-back-button" class="icon-med fas fa-arrow-left"></i>\n      <i id="email-bars-icon" class="icon-med fas fa-bars"></i>\n    </div>\n    <div class="email-balance"><span id="email-balance"></span><nbsp/><span id="email-token"></span></div>\n  </div>\n  '}},function(e,t,a){var r=a(262);e.exports=EmailAppspaceHeader={render:function(e,t){document.querySelector(".email-header").innerHTML=r(e,t)},attachEvents:function(e,t){}}},function(e,t){e.exports=EmailAppspaceHeaderTemplate=function(e,t){return'\n    <div class="email-header-holder">\n      <div class="email-detail-left-options">\n        <i id="email-form-back-button" class="icon-med fas fa-arrow-left"></i>\n        <i id="email-bars-icon" class="icon-med fas fa-bars"></i>\n      </div>\n      <div class="email-balance"><span id="email-balance"></span><nbsp/><span id="email-token"></span></div>\n    </div>\n  '}},function(e,t,a){var r=a(264);e.exports=EmailAppspaceHeader={render:function(e,t){document.querySelector(".email-header").innerHTML=r(e,t)},attachEvents:function(e,t){}}},function(e,t){e.exports=EmailCryptoAppspaceHeaderTemplate=function(e,t){return'\n  <div class="email-header-holder">\n    <div class="email-detail-left-options">\n      <i id="email-form-back-button" class="icon-med fas fa-arrow-left"></i>\n      <i id="email-bars-icon" class="icon-med fas fa-bars"></i>\n    </div>\n    <div class="email-balance"><span id="email-balance"></span><nbsp/><span id="email-token"></span></div>\n  </div>\n  '}},function(e,t,a){var r=a(266),n=a(268),i=a(270),s=a(272);a(131);e.exports=EmailBody={app:{},render:function(e,t){switch(t.body=this,e.browser.parseHash(window.location.hash).page){case"email_list":EmailList.render(e,t),EmailList.attachEvents(e,t);break;case"email_form":r.render(e,t),r.attachEvents(e,t);break;case"email_detail":n.render(e,t),n.attachEvents(e,t);break;case"email_appspace":i.render(e,t);break;case"crypto_page":s.render(e,t);break;default:t.locationErrorFallback()}},attachEvents:function(e,t){document.querySelector("#email.create-button")&&document.querySelector("#email.create-button").addEventListener("click",(function(e){window.location.hash=t.goToLocation("#page=email_form")}))}}},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}var n=a(267);e.exports=EmailForm={app:{},saito:{},emailList:{},render:function(e,t){this.app=e,this.saito=this.app;var a="",r="",i="",s=null;a=(a=e.browser.parseHash(window.location.hash).toaddress)||"";var o=e.browser.parseHash(window.location.hash).original,c=e.browser.parseHash(window.location.hash).type;o&&(s=t.getSelectedEmail(o,"inbox")),s&&"reply"==c?(a=s.transaction.from[0].add,r="Re: "+s.msg.title,i="<br /><hr /><i>Quoted Text: </i> <br />"+s.msg.message):s&&"fwd"==c&&(a=s.transaction.from[0].add,r="Fwd: ".concat(s.msg.title),i="<br/><hr/><i>Forwarded Text: </i><br/>\nForwarded from: ".concat(s.transaction.from[0].add,"\n\n").concat(s.msg.message)),document.querySelector(".email-body").innerHTML=n(a,r,i),document.querySelector(".create-button")&&document.querySelector(".create-button").classList.add("mobile-hide"),this.addData();new MediumEditor("#email-text",{placeholder:!1,buttonLabels:"fontawesome",toolbar:{allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",relativeContainer:null,standardizeSelectionStart:!1,static:!1,updateOnEmptySelection:!0,anchor:{customClassOption:null,customClassOptionText:"Button",linkValidation:!0,placeholderText:"Paste or type a link",targetCheckbox:!0,targetCheckboxText:"Open in new window"}}})},attachEvents:function(e,t){var a=this;document.querySelector(".email-submit").addEventListener("click",(function(r){return a.sendEmailTransaction(e,t)})),document.querySelector(".email-payment-btn").onclick=function(e){var t=document.querySelector(".email-payment-row");"block"!=t.style.display?t.style.display="block":t.style.display="none"}},addData:function(){document.getElementById("email-from-address").value="".concat(this.saito.wallet.returnPublicKey()," (me)")},sendEmailTransaction:function(e,t){return(a=regeneratorRuntime.mark((function a(){var r,n,i,s,o,c,l;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=document.querySelector(".email-title").value,n=document.getElementById("email-to-address").value,i=document.getElementById("email-text").innerHTML,s=document.querySelector(".email-amount"),o=0,n.indexOf(" (me)")>0&&(n=n.substring(0,n.indexOf(" (me)"))),s&&s.value>0&&(o=parseFloat(s.value)),a.next=9,t.returnPublicKey(n);case 9:if(!(c=a.sent)){a.next=24;break}if(l=e.wallet.returnBalance()>0?e.wallet.createUnsignedTransactionWithDefaultFee(c,o):e.wallet.createUnsignedTransaction(c,o,0)){a.next=15;break}return salert("Unable to send email. You appear to need more tokens"),a.abrupt("return");case 15:l.msg.module="Email",l.msg.title=r,l.msg.message=i,l=e.wallet.signAndEncryptTransaction(l),e.network.propagateTransaction(l),window.location.hash=t.goToLocation("#page=email_list&subpage=inbox"),salert("Your message has been sent"),a.next=25;break;case 24:salert("Could not find user "+n);case 25:case"end":return a.stop()}}),a)})),function(){var e=this,t=arguments;return new Promise((function(n,i){var s=a.apply(e,t);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))})();var a},verifyJSON:function(){var e=document.querySelector(".raw-message"),t=e.value;try{JSON.parse(t)}catch(t){return e.style.background="#FCC",e.style.color="red",!1}return e.style.background="#FFF",e.style.color="#000",!0}}},function(e,t){e.exports=EmailFormTemplate=function(e,t,a){return'\n  <div class="email-compose">\n  <div class="grid-2" style="grid-template-columns:6em 1fr">\n    <div>From:</div>\n    <div>\n      <input id="email-from-address" class="email-address" type="text" readonly>\n    </div>\n    <div>To:</div>\n    <div>\n      <input id="email-to-address" class="email-address" type="text" placeholder="Address" value="'.concat(e,'">\n    </div>\n    <div class="email-payment-row" style="display:none;grid-column-start: 1;grid-column-end:span 2">\n      <div class="amount-label tip">\n        SAITO:\n        <div class="tiptext" style="font-family: " visuelt-light",="" "microsoft="" yahei",="" "hiragino="" sans="" gb";"=""> Optional.</div>\n      </div>\n      <div class="amount-value">\n        <input class="email-amount" type="number" placeholder="0.0">\n      </div>  \n    </div>\n  </div>\n  \n  <div id="email-form-options" class="tip">\n    \x3c!--i class="icon-med fas fa-paperclip"></i>\n    <i class="icon-med fas fa-image"></i>\n    <i class="icon-small fas fa-dollar-sign"></i>\n    <div class="tiptext tip-left">\n      <div>\n        <i class="icon-small fas fa-dollar-sign"></i>Send Saito\n      </div>\n    </div--\x3e\n  </div>\n  <div>\n      <input class="email-title" type="text" placeholder="Subject" value="').concat(t,'">\n  </div>\n  <div id="email-text" class="email-text markdown" placeholder="Message">').concat(a,'</div>\n  </div>\n  <div>\n    <div class="email-payment-btn">include payment</div>\n    <button class="email-submit">Send</button>\n  </div>\n  ')}},function(e,t,a){var r=a(269);e.exports=EmailDetail={render:function(e,t){document.querySelector(".email-body").innerHTML=r(e,t)},attachEvents:function(e,t){}}},function(e,t){e.exports=EmailDetailTemplate=function(e,t){var a=e.browser.parseHash(window.location.hash).subpage,r=e.browser.parseHash(window.location.hash).selectedemail,n=t.getSelectedEmail(r,a);if(n){var i=n.transaction.from[0].add,s=n.transaction.to[0].add,o=n.transaction.to[0].amt,c=n.transaction.ts,l=n.returnMessage(),u=l.title,d=t.returnAddressHTML(i),p=t.returnAddressHTML(s);""!=d&&(i=d),""!=p&&(s=p);var h=e.browser.formatDate(c),f='\n      <div>\n        <div class="email-detail-addresses">\n          <div class="email-detail-address-row">\n            <p>FROM:</p>\n            <p class="email-detail-address-id">'.concat(i,'</p>\n          </div>\n          <div class="email-detail-address-row">\n            <p>TO:</p>\n            <p class="email-detail-address-id">').concat(s,"</p>\n          </div>\n      ");return s2Number(o)>0&&(f+='\n          <div class="email-detail-address-row">\n            <p>Amt:</p>\n            <p class="email-detail-ammount">'.concat(s2Number(o),"</p>\n          </div>\n\t")),f+='\n          <div>\n            <div class="email-detail-timestamp">'.concat(h.hours,":").concat(h.minutes,'</div>\n            <div class="email-detail-subject">').concat(u,'</div>\n          </div>\n        </div>\n        <div class="email-detail-message">\n          <div class="email-detail-text"><div>').concat(l.message,"</div></div>\n        </div>\n      </div>\n    ")}return'\n      <div>\n        <div class="email-detail-addresses">\n          <div>\n            <h4 class="email-detail-subject">Loading...</h4>\n          </div>\n          </div>\n        </div>\n      '}},function(e,t,a){var r=a(271);e.exports=EmailAppspace={render:function(e,t){document.querySelector(".email-body").innerHTML=r();try{var a=e.browser.parseHash(window.location.hash).subpage,n=e.modules.returnModule(a).respondTo("email-appspace");n.render(e,t),n.attachEvents&&n.attachEvents(e,t)}catch(e){t.locationErrorFallback("Error fetching module.<br/>".concat(e),e)}}}},function(e,t){e.exports=EmailAppspaceTemplate=function(){return'\n    <div class="email-appspace">\n      <center><div class="loader"></div></center>\n    </div>\n  '}},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}var i=a(273),s={app:null,rerenderCallback:function(){return n(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.rerender(s.app);case 2:case"end":return e.stop()}}),e)})))()},render:function(e,t){var a=this;return n(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a.app=e,r.prev=1,r.next=4,a.rerender(e);case 4:e.connection.removeListener("set_preferred_crypto",a.rerenderCallback),e.connection.on("set_preferred_crypto",a.rerenderCallback),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),t.locationErrorFallback("Error loading Crypto Module.<br/>".concat(r.t0),r.t0);case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},getCryptoMod:function(e){var t=e.browser.parseHash(window.location.hash).subpage;return e.modules.returnModule(t)},rerender:function(e){var t=this;return n(regeneratorRuntime.mark((function a(){var r,s,o,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=function(){var e=n(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.returnBalance();case 2:a=e.sent,document.querySelector(".crypto-container .balance").innerHTML=a;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=n(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.returnAddress();case 2:a=e.sent,document.querySelector(".crypto-container .address").innerHTML=a;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=t.getCryptoMod(e),c=e.wallet.returnPreferredCrypto(),document.querySelector(".email-body").innerHTML=i(o,c.name),r(o),s(o),document.querySelector(".crypto-container .sendbutton").onclick=function(){var a=document.querySelector(".crypto-container .howmuch").value,r=document.querySelector(".crypto-container .pubkeyto").value;try{t.getCryptoMod(e).transfer(a,r),salert("Sent!"),document.querySelector(".crypto-container .howmuch").value="",document.querySelector(".crypto-container .pubkeyto").value=""}catch(e){salert("Error sending transaction.\n{error}")}},document.querySelectorAll(".crypto-container .set-preferred").forEach((function(a,r){a.onclick=function(a){if(a.currentTarget.classList.contains("preferred"))a.currentTarget.classList.remove("preferred"),a.currentTarget.classList.add("not-preferred"),e.wallet.setPreferredCrypto("SAITO");else{a.currentTarget.classList.remove("not-preferred"),a.currentTarget.classList.add("preferred");var r=t.getCryptoMod(e);e.wallet.setPreferredCrypto(r.ticker)}}}));case 9:case"end":return a.stop()}}),a)})))()}};e.exports=s},function(e,t){e.exports=EmailCryptoAppspaceTemplate=function(e,t){var a=e.info?e.info:"",r=e.name===t?"preferred":"not-preferred";return'\n    <div class="email-appspace">\n      <div class="crypto-container">\n        <h1 class="ticker">'.concat(e.ticker,'</h1>\n        <div class="crypto-title">').concat(e.description,'</div>\n        <div class="crypto-info">').concat(a,'</div>\n        \n        <div class="grid-2 info">\n          <div>Address:</div>\n          <div class="address">loading...</div>\n          <div>Balance:</div>\n          <div class="balance">loading...</div>\n        </div>\n        <button class="set-preferred ').concat(r,'"></button>\n\n        <hr />\n\n        <h2>Transfer ').concat(e.ticker,'</h2>\n        <div class="grid-2 transfer">\n          <div>Amount:</div>\n          <div><input class="howmuch" type="text"></input></div>\n          <div>To:</div>\n          <div><input class="pubkeyto" type="text"></input></div>\n        </div>\n        <button class="sendbutton">Send</button>\n      </div>\n    </div>\n  ')}},function(e,t,a){var r=a(275),n=a(276),i=a(280);e.exports=EmailSidebar={render:function(e,t){var a=e.browser.parseHash(window.location.hash).subpage;document.querySelectorAll(".active-navigator-item").forEach((function(e,t){e.classList.remove("active-navigator-item")})),document.querySelectorAll("#email-nav-".concat(a,".email-navigator-item, #email-nav-").concat(a,".email-apps-item, #email-nav-").concat(a,".crypto-apps-item")).forEach((function(e,t){e.classList.add("active-navigator-item")})),document.querySelector(".email-controls")||(document.querySelector(".email-sidebar").innerHTML=r(),n.render(e,t),n.attachEvents(e,t),i.render(e,t),i.attachEvents(e,t))},attachEvents:function(e,t){}}},function(e,t){e.exports=EmailSidebarTemplate=function(){return'\n    <div id="email-controls" class="email-controls">\n    </div>\n    <div id="email-chat" class="email-chat">\n    </div>\n  '}},function(e,t,a){var r=a(277),n=(a(130),a(278));e.exports=EmailControls={render:function(e,t){document.querySelector(".email-controls").innerHTML=r(),n.render(e,t)},attachEvents:function(e,t){n.attachEvents(e,t),document.querySelectorAll("#email-compose-btn, #mobile-email-compose-btn").forEach((function(e,a){e.addEventListener("click",(function(e){window.location.hash=t.goToLocation("#page=email_form")}))}))}}},function(e,t){e.exports=EmailControlsTemplate=function(){return'\n      <button class="super" id="email-compose-btn">TRANSFER</button>\n      <div class="email-bars-menu">\n      </div>\n      <div id="email-loader" class="email-loader">\n        <div class="blockchain_synclabel">syncing blocks...</div>\n        <div class="blockchain_syncbox">\n          <div class="blockchain_syncbar" style="width: 100%;"></div>\n        </div>\n      </div>\n  '}},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}var n=a(279);e.exports=EmailBarsMenu={render:function(e,t){document.querySelector(".email-bars-menu").innerHTML=n();for(var a=document.querySelector(".email-apps"),i=e.modules.respondTo("email-appspace"),s=0;s<i.length;s++){var o=i[s];"MyQRCode"===o.name?a.innerHTML+='<li class="email-apps-item email-apps-item-'.concat(s,'" style="display:none" id="email-nav-').concat(o.name,'">').concat(o.name,"</li>"):a.innerHTML+='<li class="email-apps-item email-apps-item-'.concat(s,'" id="email-nav-').concat(o.name,'">').concat(o.name,"</li>")}if(e.wallet.returnAvailableCryptos().forEach(function(){var t,a=(t=regeneratorRuntime.mark((function t(a,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"Saito"!==a.name&&e.browser.addElementToDom('<li id="email-nav-'.concat(a.name,'" class="crypto-apps-item">\n          ').concat(a.ticker,"\n        </li>"),"crypto-apps");case 1:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(n,i){var s=t.apply(e,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))});return function(e,t){return a.apply(this,arguments)}}()),!document.querySelector("#mobile.email-bars-menu")){var c=document.querySelector(".email-bars-menu").innerHTML;c=c.replaceAll("email-nav-","mobile-email-nav-"),e.browser.addElementToDom('<div id="mobile" class="email-bars-menu" style="display:none;">\n        <button class="super" id="mobile-email-compose-btn">SEND</button>\n        '.concat(c,"\n      </div>"))}},attachEvents:function(e,t){document.querySelectorAll(".crypto-apps-item").forEach((function(e,a){e.onclick=function(e){var a=e.currentTarget.id.replace("email-nav-","").replace("mobile-","");window.location.hash=t.goToLocation("#page=crypto_page&subpage=".concat(a))}})),document.querySelectorAll(".email-navigator-item").forEach((function(e){e.onclick=function(e){var a=e.currentTarget.id.replace("email-nav-","").replace("mobile-","");window.location.hash=t.goToLocation("#page=email_list&subpage=".concat(a))}})),document.querySelectorAll(".email-apps-item").forEach((function(e){e.addEventListener("click",(function(e){var a=e.currentTarget.id.replace("email-nav-","").replace("mobile-","");window.location.hash=t.goToLocation("#page=email_appspace&subpage=".concat(a))}))}));var a=document.querySelector("#mobile.email-bars-menu"),r=function(){a.style.display="none"};a.removeEventListener("click",r),a.addEventListener("click",r);var n=function(e){"email-bars-icon"!==e.target.id&&(a.style.display="none")};window.removeEventListener("click",n),window.addEventListener("click",n)}}},function(e,t){e.exports=EmailBarsMenuTemplate=function(){return'\n<div class="email-navigator-bars-menu">\n  <div>\n    <ul class="email-navigator" id="email-navigator">\n      <li class="email-navigator-item active-navigator-item" id="email-nav-inbox">Inbox</li>\n      <li class="email-navigator-item" id="email-nav-sent">Sent</li>\n      \x3c!--li class="email-navigator-item" id="email-nav-trash">Trash</li--\x3e\n    </ul>\n  </div>\n  <div>\n    <ul class="email-apps" id="email-apps"></ul>\n  </div>\n  <div>\n    <ul class="crypto-apps" id="crypto-apps"></ul>\n  </div>\n  </div>\n  '}},function(e,t){e.exports=EmailChat={render:function(e,t){for(var a=e.modules.respondTo("email-chat"),r=0;r<a.length;r++)a[r].respondTo("email-chat").render(e,t)},attachEvents:function(e,t){for(var a=e.modules.respondTo("email-chat"),r=0;r<a.length;r++)a[r].respondTo("email-chat").attachEvents(e,t)}}},function(e,t){e.exports=EmailAppspaceTemplate=function(){return'\n<div class="email-appspace-encrypt">\n  <h3>Encrypt transations and messages:</h3>\n  <p>\n    Enter a private key or address to perform an onchain Diffie-Hellman key exchange and encrypt your transactions.\n  </p>\n  <br />\n  <div class="grid-2">\n    <div>Address:</div>\n    <div><input id="email-to-address" type="text" placeholder="Recipient Address"></div>\n    <div></div>\n    <div>\n      <button class="email-submit">Encrypt</button>\n    </div>\n  </div>\n</div> \n  '}},function(e,t,a){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){var t=window._paq=window._paq||[];t.push(["trackPageView"]),t.push(["enableLinkTracking"]),t.push(["enableJSErrorTracking"]),function(){t.push(["setTrackerUrl","https://saitotech.matomo.cloud/matomo.php"]),t.push(["setSiteId","2"]);var e=document,a=e.createElement("script"),r=e.getElementsByTagName("script")[0];a.type="text/javascript",a.async=!0,a.src="//cdn.matomo.cloud/saitotech.matomo.cloud/matomo.js",r.parentNode.insertBefore(a,r)}()}function i(){window.location.hostname,n(),_paq.push(["enableJSErrorTracking"])}function s(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n&&r(n)!=Number?console.log("matomo value field must be a number"):_paq&&(n?_paq.push(["trackEvent",e,t,a,n]):a?_paq.push(["trackEvent",e,t,a]):_paq.push(["trackEvent",e,t]))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;t>=0?setTimeout((function(){var t=window.Matomo;"object"!==r(t)||!0!==t.initialized||!t.trigger?e():_paq.push([e])}),t):_paq.push([e])}a.r(t),a.d(t,"addToDOM",(function(){return i})),a.d(t,"logToMatomo",(function(){return s})),a.d(t,"pushFunctionToMatomo",(function(){return o}))},function(e,t,a){var r=a(284);e.exports=MyQRCodeAppspace={render:function(e,t){document.querySelector(".email-appspace").innerHTML=r(e),this.generateQRCode(e.wallet.returnPublicKey())},attachEvents:function(e,t){},generateQRCode:function(e){return new(a(1195))(document.getElementById("qrcode"),e)}}},function(e,t){e.exports=MyQRCodeAppspaceTemplate=function(e){return'\n  <div class="email-appspace-settings">\n\n    <h3>Your QR Code:</h3>\n  \n    <p></p>\n\n    <div id="qrcode"></div>\n\n  </div>\n  '}},function(e,t,a){var r=a(286),n=a(287),i=a(132),s=a(133),o=a(134);e.exports=ArcadePosts={render:function(e,t){document.getElementById("arcade-posts-container")||e.browser.addElementToDom(r());for(var a=t.posts.length-1;a>=0;a--)this.addPost(e,t,t.posts[a]);t.renderMethod="arcade",document.getElementById("posts-stylesheet")||e.browser.addElementToDom(o())},attachEvents:function(e,t){document.querySelectorAll(".arcade-post-title, .arcade-post-comments").forEach((function(a){a.onclick=function(a){var r=a.currentTarget.id.replace("arcade-post-","");e.browser.logMatomoEvent("Posts","ArcadePostsViewClick",r);var n=a.currentTarget.getAttribute("data-id");i.render(e,t,n),i.attachEvents(e,t,n)}}));try{document.querySelector(".arcade-posts-add").onclick=function(a){s.render(e,t),s.attachEvents(e,t)}}catch(e){}},addPost:function(e,t,a){var r=1;document.querySelectorAll(".arcade-post").forEach((function(e){e.getAttribute("data-id")===a.transaction.sig&&(r=0)})),0!=r&&e.browser.prependElementToDom(n(e,t,a),document.getElementById("arcade-posts"))}}},function(e,t){e.exports=PostMainTemplate=function(e,t){return'\n  <div id="arcade-posts-container" class="arcade-posts-container">\n  </div>\n    '}},function(e,t){e.exports=PostTeaserTemplate=function(e,t,a){var r="0 comments";1==a.children&&(r="1 comment"),a.children>1&&(r=a.children+" comments");var n=a.msg.images[0];null==n&&(n="/post/img/post-logo.png"),""==n&&(n="/post/img/post-logo.png");var i=datetimeRelative(a.transaction.ts);return'\n    <div data-id="'.concat(a.transaction.sig,'" id="arcade-post" class="arcade-post">\n      <div class="arcade-post-front">\n        <div id="arcade-post-thumbnail" class="arcade-post-thumbnail" style="background-image: url(\'').concat(n,'\')"></div>\n      </div>\n      <div class="arcade-post-back">\n        <div class="arcade-post-header">\n          <div data-id="').concat(a.transaction.sig,'" id="arcade-post-title" class="arcade-post-title">').concat(a.msg.title,'</div>\n          <div id="arcade-post-ts" class="arcade-post-ts">').concat(i,'</div>\n        </div>\n        <div id="arcade-post-sublinks"  class="arcade-post-sublinks">\n          <div id="arcade-post-posted-by" class="arcade-post-posted-by">posted by </div>\n          <div id="arcade-post-user" class="arcade-post-user">').concat(e.keys.returnUsername(a.transaction.from[0].add),'</div>\n          <div data-id="').concat(a.transaction.sig,'" id="arcade-post-comments" class="arcade-post-comments">').concat(r,"</div>\n        </div>\n      </div>\n    </div>\n\n  ")}},function(e,t){e.exports=PostViewTemplate=function(e,t,a){for(var r=null,n=0;n<t.posts.length;n++)a===t.posts[n].transaction.sig&&(r=t.posts[n]);if(null!=r){var i=datetimeRelative(r.transaction.ts),s=e.keys.returnIdenticon(r.transaction.from[0].add),o=e.keys.returnUsername(r.transaction.from[0].add),c='\n  <div id="post-view-container" class="post-view-container">\n    <div id="post-view-overview" class="post-view-overview">\n      <div class="post-header">\n        <div class="post-user-avatar">\n          <img src="'.concat(s,'" class="post-view-user-identicon" />\n        </div>\n        <div class="post-details">\n          <div id="post-view-user" class="post-view-user">').concat(o,'</div>\n          <div id="post-view-ts" class="post-view-ts">').concat(i,'</div>\n        </div>\n      </div>\n      <h2 class="post-view-title">').concat(r.msg.title,"</h2>\n  ");""!=r.msg.link&&(c='\n    <div id="post-view-container" class="post-view-container">\n      <div id="post-view-overview" class="post-view-overview">\n        <div class="post-header">\n          <div class="post-user-avatar">\n            <img src="'.concat(s,'" class="post-view-user-identicon" />\n          </div>\n          <div class="post-details">\n            <div id="post-view-user" class="post-view-user">').concat(o,'</div>\n            <div id="post-view-ts" class="post-view-ts">').concat(i,'</div>\n          </div>\n        </div>\n        <h2 class="post-view-title">').concat(r.msg.title,'</h2>\n        <div id="post-view-url" class="post-view-url"><a target="_blank" href="').concat(r.msg.link,'"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n        <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd" />\n      </svg> ').concat(r.msg.link,"</a></div>\n    "));var l="";r.transaction.from[0].add===e.wallet.returnPublicKey()&&(l='<div data-id="'.concat(a,'" id="post-view-edit" class="post-view-edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n      <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />\n      <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" />\n    </svg>\n    edit</div>'));var u='<div class="post-loader-spinner loader" id="post-loader-spinner"></div>';if(r.msg.comment&&(u=r.msg.comment),c+='\n      <div data-id="'.concat(a,'" id="post-view-parent-comment" class="post-view-parent-comment">').concat(u,'</div>\n      <div class="post-view-actions">\n        ').concat(l,'\n        <div data-id="').concat(a,'" id="post-view-report" class="post-view-report"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />\n      </svg>\n      report</div>\n      </div>\n    </div>\n  '),r.msg.images.length>0){c+='<div id="post-view-gallery" class="post-view-gallery">';for(var d=0;d<r.msg.images.length;d++)c+='<img class="post-view-gallery-image" src="'.concat(r.msg.images[d],'" />');c+="</div>"}else c+='<div id="post-view-gallery" style="display:none" class="post-view-gallery"></div>';return c+='\n    <hr />\n    <div id="post-view-comments" class="post-view-comments">\n    </div>\n    <div id="post-view-leave-comment" class="post-view-leave-comment">\n      <div>Leave a comment: </div>\n      <div id="comment-create" class="post-view-textarea markdown medium-editor-element" placeholder="Your post..." contenteditable="true" spellcheck="true" data-medium-editor-element="true" role="textbox" aria-multiline="true" data-medium-editor-editor-index="1" medium-editor-index="37877e4c-7415-e298-1409-7dca41eed3b8"></div>\n      <button class="post-submit-btn">Submit</button>\n    </div>\n  </div>\n  '}}},function(e,t){e.exports=PostViewCommentTemplate=function(e,t,a){var r=a.returnMessage(),n=datetimeRelative(a.transaction.ts),i=e.keys.returnIdenticon(a.transaction.from[0].add),s=e.keys.returnUsername(a.transaction.from[0].add),o='\n  <div id="post-view-comment" class="post-view-comment">\n    <div id="post-view-comment-sublinks" class="post-view-comment-sublinks">\n      <div class="post-header">\n        <div class="post-user-avatar"><img src="'.concat(i,'" class="post-view-user-identicon" /></div>\n        <div class="post-details">\n          <div id="post-view-user" class="post-view-user">').concat(s,'</div>\n          <div id="post-view-ts" class="post-view-ts"> ').concat(n,'</div>\n        </div>\n      </div>\n      <div data-id="').concat(a.originalSig,'" id="post-view-comment-text" class="post-view-comment-text">').concat(r.comment,'</div>\n      <div class="post-view-actions">\n  ');return a.transaction.from[0].add===e.wallet.returnPublicKey()&&(o+='\n        <div data-id="'.concat(a.originalSig,'" id="post-view-comment-edit" class="post-view-comment-edit"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n        <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />\n        <path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" />\n      </svg> edit</div>\n    ')),o+='\n        <div id="post-view-report" class="post-view-report"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">\n        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />\n      </svg> report</div>\n      </div>\n    </div>\n  </div>\n  '}},function(e,t){e.exports=PostCreateTemplate=function(e,t){return'\n  <div id="post-create-container" class="post-create-container">\n    <div id="post-create-header" class="post-create-header">\n      <div id="post-create-header-link" class="post-header-active post-create-header-item post-create-header-discussion post-create-active">Discussion</div>\n      <div id="post-create-header-link" class="post-create-header-item post-create-header-image">Image</div>\n      <div id="post-create-header-link" class="post-create-header-item post-create-header-link">Link</div>\n    </div>\n\n    <div id="post-create" class="post-create">\n\n      <input type="text" class="post-create-title" name="post-create-title" placeholder="Post Title">\n\n      <div id="post-create-link" class="post-create-link">\n        <input type="text" class="post-create-link-input" name="post-create-link-input" placeholder="https://...">\n      </div>\n\n      <div id="post-create-image" class="post-create-image" name="post-create-image" tabindex="0">drag-and-drop, click or paste image</div>\n\n      <div id="post-create" class="post-create-textarea markdown medium-editor-element" placeholder="Your post..." contenteditable="true" spellcheck="true" data-medium-editor-element="true" role="textbox" aria-multiline="true" data-medium-editor-editor-index="1" medium-editor-index="37877e4c-7415-e298-1409-7dca41eed3b8"></div>\n\n      <input type="hidden" class="post-create-forum" name="post-create-forum" />\n\n      <div id="post-create-image-preview-container" class="post-create-image-preview-container">\n      </div>\n\n      <button class="post-submit-btn">Submit</button>\n\n    </div>\n  </div>\n  '}},function(e,t,a){var r=a(292),n=a(293),i=a(132),s=a(134);e.exports=PostMain={render:function(e,t){t.renderMethod="main",document.getElementById("post-container")||e.browser.addElementToDom('<div id="post-container" class="post-container"></div>'),document.querySelector(".post-main")||e.browser.addElementToDom(r(e,t),"post-container");for(var a=t.posts.length-1;a>=0;a--)this.addPost(e,t,t.posts[a]);document.getElementById("posts-stylesheet")||e.browser.addElementToDom(s())},attachEvents:function(e,t){document.querySelectorAll(".post-teaser-title").forEach((function(a){a.onclick=function(a){var r=a.currentTarget.getAttribute("data-id");i.render(e,t,r),i.attachEvents(e,t,r)}})),document.querySelectorAll(".post-teaser-comments").forEach((function(a){a.onclick=function(a){var r=a.currentTarget.getAttribute("data-id");i.render(e,t,r),i.attachEvents(e,t,r)}}))},addPost:function(e,t,a){var r=1;document.querySelectorAll(".post-teaser").forEach((function(e){e.getAttribute("data-id")===a.transaction.sig&&(r=0)})),0!=r&&e.browser.prependElementToDom(n(e,t,a),document.getElementById("post-posts"))}}},function(e,t){e.exports=PostMainTemplate=function(e,t){return'\n    <div id="post-main" class="post-main">\n      <h1 class="forum-title">Forum</h1>\n      <div id="post-headers" class="post-headers"></div>\n      <div id="post-posts" class="post-posts"></div>\n    </div>\n    '}},function(e,t){e.exports=PostTeaserTemplate=function(e,t,a){var r="0 comments";1==a.children&&(r="1 comment"),a.children>1&&(r=a.children+" comments");var n=a.img;return null==n&&(n="/post/img/post-logo.png"),""==n&&(n="/post/img/post-logo.png"),'\n    <div data-id="'.concat(a.transaction.sig,'" id="post-teaser" class="post-teaser">\n      <div class="post-teaser-front">\n        <div id="post-teaser-thumbnail" class="post-teaser-thumbnail" style="background-image: url(\'').concat(n,'\')"></div>\n      </div>\n      <div class="post-teaser-back">\n        <div  data-id="').concat(a.transaction.sig,'" id="post-teaser-title" class="post-teaser-title">').concat(a.msg.title,'</div>\n        <div id="post-teaser-sublinks"  class="post-teaser-sublinks">\n\t  <div id="post-teaser-posted-by" class="post-teaser-posted-by">posted by </div>\n\t  <div id="post-teaser-user" class="post-teaser-user">').concat(e.keys.returnUsername(a.transaction.from[0].add),'</div>\n\t  <div data-id="').concat(a.transaction.sig,'" id="post-teaser-comments" class="post-teaser-comments">').concat(r,"</div>\n        </div>\n      </div>\n    </div>\n\n  ")}},function(e,t,a){var r=a(295),n=a(133);e.exports=PostSidebar={render:function(e,t){document.getElementById("post-container")||e.browser.addElementToDom('<div id="post-container" class="post-container"></div>'),document.querySelector(".post-sidebar")||e.browser.addElementToDom(r(e,t),"post-container"),e.modules.respondTo("email-chat").forEach((function(t){null!=t&&t.respondTo("email-chat").render(e,t)})),document.querySelector(".post-sidebar-create-btn").onclick=function(a){n.render(e,t),n.attachEvents(e,t)}},attachEvents:function(e,t){e.modules.respondTo("email-chat").forEach((function(a){a.respondTo("email-chat").attachEvents(e,t)}))}}},function(e,t){e.exports=PostSidebarTemplate=function(e,t){return'\n    <div id="post-sidebar" class="post-sidebar">\n      <button class="post-sidebar-create-btn"><i class="fas fa-plus-circle"></i> New Post</button>\n      <div id="email-chat" class="email_chat"></div>\n    </div>\n    '}},function(e,t){e.exports=NewPostTemplate=function(e,t){return'\n    \n    <div class="new-post-wrapper">\n      <div class="new-post-form">\n      <div class="post-close"></div>\n      <textarea class="new-post-content" placeholder"Write your post here"></textarea>\n        <button class="new-post-btn">Post</button>\n      </div>\n    </div>\n\n    '}},function(e,t){e.exports=ShowPostTemplate=function(e,t,a){return a.author==e.wallet.returnPublicKey()?'\n    <div class="show-post-wrapper">\n      <div class="show-post-form">\n        <textarea class="show-post-content">'.concat(a.content,'</textarea>\n        <button class="show-post-update-btn">Update</button>\n      </div>\n    </div>\n    <div class="post-comments"></div>\n    '):'\n    <div class="show-post-wrapper">\n      <div class="show-post-form">\n        <div class="show-post-content">'.concat(a.content,'</div>\n      </div>\n    </div>\n    <div class="post-comments"></div>\n    ')}},function(e,t,a){var r=a(299),n=a(300);e.exports=AddContact={render:function(e,t){document.querySelector("body").innerHTML=r(t),t.header.render(e,t),t.header.attachEvents(e,t)},attachEvents:function(e,t){document.getElementById("add-contact-add-button").onclick=function(){var a=document.getElementById("add-contact-publickey").value;e.modules.returnModule("Encrypt").initiate_key_exchange(a),n.render(e,t)}}}},function(e,t){e.exports=AddContactTemplate=function(e){var t=e.publickey;return'\n    <div class="header"></div>\n    <div\n      style="\n        display: grid;\n        grid-gap: 1em;\n        justify-items: center;\n        align-items: center;\n        padding: 1em;\n        margin-top: 5em;\n      ">\n      <div style="display:grid; grid-template-columns: 5.2em auto 5.2e; width:100%">\n        <i id="back-button" class="icon-med fas fa-arrow-left"></i>\n        <h1 style="justify-self: center">Add Contact</h1>\n      </div>\n      <input id="add-contact-publickey" type="text" placeholder="Publickey" value="'.concat(t,'">\n      <button style="margin: 0; padding: 1em; width: 100%;" id="add-contact-add-button">ADD</button>\n    </div>\n  ')}},function(e,t,a){var r=a(301);e.exports=AddContact={render:function(e,t){document.querySelector("body").innerHTML=r(t),t.header.render(e,t),t.header.attachEvents(e,t)},attachEvents:function(e,t){}}},function(e,t){e.exports=AddContactCompleteTemplate=function(){return'\n    <div class="header"></div>\n    <div\n      style="\n        display: grid;\n        grid-gap: 1em;\n        justify-items: center;\n        align-items: center;\n        padding: 1em;\n        margin-top: 5em;\n      ">\n      <div style="display:grid; grid-template-columns: 5.2em auto 5.2e; width:100%">\n        <i id="back-button" class="icon-med fas fa-arrow-left"></i>\n        <h3 style="justify-self: center">Your request has been sent</h3>\n      </div>\n      <button style="margin: 0; width: 100%;padding: 1em;font-size: 1.2em;" onclick="location.href=\'/email\'"><i class="far fa-envelope"></i>Email</button>\n      <button style="margin: 0; width: 100%;padding: 1em;font-size: 1.2em;" onclick="location.href=\'/chat\'"><i class="far fa-comments"></i>Chat</button>\n    </div>\n  '}},function(e,t){e.exports=RegistryAppspaceTemplate=function(){return'\n<div class="email-appspace-registry">\n<h3>Register an human address:</h3>\n<div class="grid-2">\n  <div>Address:</div>\n  <div><input id="identifier-requested" class="identifier-requested" type="text" placeholder="Your nickname or handle (what comes before the @)"></div>\n</div>  \n<button class="registry-submit" id="registry-submit">register</button>\n  '}},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}var i=a(304),s=a(305);e.exports=RegistryModal={render:function(e,t){if(!document.getElementById("registry-modal")){var a=t.helpers.el_parser;document.querySelector("body").append(a(i()))}document.getElementById("registry-modal").style.display="block"},attachEvents:function(e,t){var a=this,r=document.getElementById("registry-modal");document.getElementById("modal-close").onclick=function(){return r.style.display="none"};var i=document.getElementById("registry-input");i.onfocus=function(){return i.placeholder=""},i.onblur=function(){return i.placeholder="Username"};var o=document.getElementById("registry-add-button");o&&(o.onclick=function(){var n=document.getElementById("registry-input").value;e.modules.returnModule("Registry").registerIdentifier(n)&&(Array.from(document.getElementsByClassName("saito-identifier")).forEach((function(e){e.innerHTML="<h3>".concat(n,"@saito</h3>")})),r.innerHTML=s(),a.attachEvents(e,t))});var c=document.getElementById("registry-email-button");c&&(c.onclick=n(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))),document.addEventListener("keydown",(function(e){"27"==e.keyCode&&(r.style.display="none")}))}}},function(e,t){e.exports=RegistryModalTemplate=function(){return'\n    <div id="registry-modal" class="modal" style="font-family: visuelt-medium;">\n      <div id="registry-modal-content" class="modal-content" style="max-width: 600px;">\n        <div style="display: grid; grid-gap: 1em">\n          <div style="display: grid; grid-template-columns: auto 1em">\n            <h1 style="color: black; margin: 0">Register Username</h1>\n            <i id="modal-close" class="close fas fa-times" style="justify-self: end;"></i>\n          </div>\n          <div style="display: grid;grid-gap: 1em;">\n            <div style="display: flex">\n              <input style="text-align: right; color: black" id="registry-input" type="text" placeholder="Username">\n              <h3 style="color: black; margin-left: 5px">@saito</h3>\n            </div>\n            <div style="display: flex;align-items: center;">\n              <button id="registry-add-button">SUBMIT</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  '}},function(e,t){e.exports=RegistrySuccessModalTemplate=function(){return'\n    \x3c!-- <div id="registry-modal" class="modal" style="font-family: visuelt-medium;"> --\x3e\n      <div id="registry-modal-content" class="modal-content" style="max-width: 800px;">\n        <div style="display: grid; grid-gap: 1em; color: black">\n          <div style="display: grid; grid-template-columns: auto 1em">\n            <h1 style="color: black; margin: 0">Registry Success!</h1>\n            <i id="modal-close" class="close fas fa-times" style="justify-self: end;"></i>\n          </div>\n          <div style="display: grid;grid-gap: 1em; color: black">\n            <p>As a thanks, have 50 SAITO on us.</p>\n            <p>To get more SAITO, provide us an email or join us on Discord and Telegram</p>\n            <div style="\n              display: grid;\n              grid-template-columns: 6fr 1fr 1fr;\n              justify-items: right;\n              align-items: center;\n              ">\n              <div class="registry-succes-email" style="display: flex;width: 100%;">\n                <input style="color: black" id="registry-input" type="text" placeholder="Email">\n                <button id="registry-email-button" style="margin: unset;margin-left: 10px;">SUBMIT</button>\n              </div>\n              <div id="registry-succes-discord">\n                <a href="https://discord.gg/HjTFh9Tfec" target="_blank">\n                  <i class="fab fa-discord" style="color: black; font-size: 2em"></i>\n                </a>\n              </div>\n              <div id="registry-succes-telegram">\n                <a href="https://t.me/SaitoIO" target="_blank">\n                  <i class="fab fa-telegram" style="color: black; font-size: 2em"></i>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    \x3c!-- </div> --\x3e\n  '}},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}var i=a(307),s=a(429),o=a(228);e.exports=SettingsAppspace={private_key_visible:0,render:function(e,t){if(document.querySelector(".email-appspace").innerHTML=i(e),document.querySelector(".settings-appspace"))for(var a=0;a<e.modules.mods.length;a++){if(null!=e.modules.mods[a].respondTo("settings-appspace"))e.modules.mods[a].respondTo("settings-appspace").render(e,t)}},attachEvents:function(e,t){try{try{if(document.querySelector(".settings-appspace"))for(var a=0;a<e.modules.mods.length;a++){if(null!=e.modules.mods[a].respondTo("settings-appspace"))e.modules.mods[a].respondTo("settings-appspace").attachEvents(e,t)}}catch(e){}try{document.getElementById("register-email-btn").onclick=function(a){t.modal_register_email=new o(e,(function(){})),t.modal_register_email.render(e,t,o.MODES.REGISTEREMAIL),t.modal_register_email.attachEvents(e,t)}}catch(e){}try{document.getElementById("register-identifier-btn").onclick=function(a){t.modal_register_username=new s(e,(function(){})),t.modal_register_username.render(e,t),t.modal_register_username.attachEvents(e,t)}}catch(e){}try{document.getElementById("privatekey").onclick=function(e){1==this.private_key_visible||(document.getElementById("privatekey").toggleClass("password"),this.private_key_visible=1)}}catch(e){}try{document.getElementById("see-password").onclick=function(e){document.getElementById("privatekey").toggleClass("password"),1==this.private_key_visible?this.private_key_visible=0:this.private_key_visible=1}}catch(e){}try{document.getElementById("trigger-appstore-btn")&&(document.getElementById("trigger-appstore-btn").onclick=function(t){var a=e.modules.returnModule("AppStore");a&&a.openAppstoreOverlay(e,a)})}catch(e){}try{Array.from(document.getElementsByClassName("modules_mods_checkbox")).forEach((function(t){t.onclick=function(){var t=n(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=parseInt(a.currentTarget.id),n=a.currentTarget,1!=a.currentTarget.checked){t.next=9;break}return t.next=5,sconfirm("Reactivate this module?");case 5:t.sent?(e.options.modules[r].active=1,e.storage.saveOptions(),window.location=window.location):window.location=window.location,t.next=13;break;case 9:return t.next=11,sconfirm("Remove this module?");case 11:t.sent?(e.options.modules[r].active=0,e.storage.saveOptions(),window.location=window.location):n.checked=!0;case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}))}catch(e){}try{document.getElementById("backup-account-btn").addEventListener("click",(function(t){e.wallet.backupWallet()}))}catch(e){}try{document.getElementById("restore-account-btn").onclick=function(){var t=n(regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:document.getElementById("file-input").addEventListener("change",(function(t){t.target.files[0];var a=t.target.files[0],r=new FileReader;r.onloadend=function(){var t="";t=r.result;try{var a=JSON.parse(t);e.options=a,e.blockchain.resetBlockchain(),e.modules.returnModule("Arcade").onResetWallet(),e.storage.saveOptions(),salert("Restoration Complete ... click to reload Saito"),window.location.reload()}catch(e){"SyntaxError"==e.name?salert("Error reading wallet file. Did you upload the correct file?"):salert("Unknown error<br/>"+e)}},r.readAsBinaryString(a)})),document.querySelector("#file-input").click();case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}catch(e){}try{document.getElementById("reset-account-btn").onclick=function(){var a=n(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,sconfirm("This will reset your account, do you wish to proceed?");case 2:confirmation=a.sent,confirmation&&(e.wallet.resetWallet(),e.modules.returnModule("Arcade").onResetWallet(),e.storage.saveOptions(),t.emails.inbox=[],t.emails.sent=[],t.emails.trash=[],t.render(e,t),t.attachEvents(e,t),e.blockchain.resetBlockchain());case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}catch(e){}try{document.getElementById("restore-privatekey-btn").onclick=function(){var t=n(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.storage.resetOptions();case 2:return r="",n="",t.prev=4,t.next=7,sprompt("Enter Private Key:");case 7:if(""==(r=t.sent)){t.next=20;break}return n=e.crypto.returnPublicKey(r),e.wallet.wallet.privatekey=r,e.wallet.wallet.publickey=n,e.wallet.wallet.inputs=[],e.wallet.wallet.outputs=[],e.wallet.wallet.spends=[],e.wallet.wallet.pending=[],e.blockchain.resetBlockchain(),t.next=19,e.wallet.saveWallet();case 19:window.location=window.location;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(4),salert("Restore Private Key ERROR: "+t.t0),console.log("Restore Private Key ERROR: "+t.t0);case 26:case"end":return t.stop()}}),t,null,[[4,22]])})));return function(e){return t.apply(this,arguments)}}()}catch(e){}}catch(e){console.log("Error in Settings Appspace: "+JSON.stringify(e))}}}},function(e,t){e.exports=SettingsAppspaceTemplate=function(e){var t=e.keys.returnEmail(e.wallet.returnPublicKey()),a=e.keys.returnIdentifierByPublicKey(e.wallet.returnPublicKey());""==t&&(t='<span id="register-email-btn" style="cursor:pointer" class="register-email-btn">register an email address</span>'),""==a&&(a='<span id="register-identifier-btn" style="cursor:pointer" class="register-identifier-btn">register a username</span>');var r="Wallet Outdated - module selection not supported";try{r=e.options.modules.map((function(e,t){var a=e.active?"CHECKED":"";return'\n        <div class="settings-app-select">\n          <label class="s-container">'.concat(e.name,'\n            <input\n              type="checkbox"\n              value="modules_mods_').concat(t,'"\n              class="modules_mods_checkbox"\n              name="modules_mods_').concat(t,'" id="').concat(t,'" ').concat(a,'/>\n            <span class="s-checkmark"></span>\n          </label>\n         </div>\n      ')})).join("")}catch(e){r=e.message.startsWith("Cannot read property 'map'")?"Initialization error. Refresh page should fix this.":"Unknown error<br/>".concat(e)}var n="";e.modules.mods.forEach((function(t){"Balance"==t.name&&(n='\n        <a target="_blank" href="'.concat(window.location.origin+"/balance?address="+e.wallet.returnPublicKey(),'">Check Recorded Balance</a>\n      '))}));var i='\n  <link rel="stylesheet" href="/settings/style.css">\n  <div class="email-appspace-settings">\n\n    <div class="settings-grid">\n\n      <div class="settings-wallet-management">\n\n        <div class="settings-buttons">\n          <button id="backup-account-btn" class="backup-account-btn"">Backup Wallet</button>\n          <button id="restore-account-btn" class="restore-account-btn">Restore Wallet</button>\n          <button id="restore-privatekey-btn" class="restore-privatekey-btn">Import Private Key</button>\n          <input id="file-input" class="file-input" type="file" name="name" style="display:none;" />\n        </div>\n\n        '.concat(n,'\n\n\n        <div class="grid-2">\n\n          <div>Email:</div>\n          <div>').concat(t,"</div>\n\n          <div>Username:</div>\n          <div>").concat(a,'</div>\n\n          <div class="public-key">Public Key:</div>\n          <div>').concat(e.wallet.returnPublicKey(),'</div>\n\n          <div>Private Key:</div>\n          <div class="private-key">\n            <input id="privatekey" type="text" value="').concat(e.wallet.returnPrivateKey(),'" class="password" />\n            <i class="see-password fas fa-eye" id="see-password"></i>\n          </div>\n\n\t</div>\n\n      </div>\n\n      <div class="settings-app-management">\n\n        <h3>Installed Modules: ');return null!=e.modules.returnModule("AppStore")&&(i+=' &nbsp; [<span id="trigger-appstore-btn" class="trigger-appstore-btn">&nbsp;install more&nbsp;</span>]'),i+='</h2>\n        <div class="settings-app-list">\n        '.concat(r,'\n        </div>\n      </div>\n\n      <div id="settings-appspace" class="settings-appspace"></div>\n\n      <hr />\n      <div class="grid-4">\n        <div>Code Version:</div>\n        <div>').concat(e.wallet.wallet.version,"</div>\n        <div>Wallet Version:</div>\n        <div>").concat(e.options.wallet.version,'</div>\n      </div>\n\n      <div style="padding-bottom:40px;">\n        Having trouble? Try clearing your browser cache or <span style="cursor:pointer; border-bottom: 1px dashed" id="reset-account-btn" class="">resetting your account</span>. If that doesn\'t fix things, write to us at info@saito.tech.\n      </div>\n\n    </div>\n  </div>\n</div>\n  ')}},function(e,t){e.exports=WebsiteDataTemplate=function(){return'\n    <div>Latest Block Number:</div>\n    <div class="info block-number"></div>\n    <div>Latest Block Time:</div>\n    <div class="info block-time"></div>\n    '}},function(e,t){var a="",r="",n="",i="";["0x002e6dafc52d6db609e1148d5b3724479608bfab","0x008c068bfd922e3eb7d14e31ecf0daa1e04f906f","0x010ed7839b8a2ea15d8e6382735b725ad1f8bb6c","0x0177e505a8fdf5ab39f6fd7f7335e16c6e0a66c5","0x018686f68b9d0f366c132550bdb982a301590384","0x029b317b115dc4a40cb4774069e69c40705e0e2a","0x02b24ff4bdd38c09cee33c9231454e59f1f36cbf","0x02c9cc94dd0ca7c85e1153c6e7ecad336bd6726e","0x0316196c7d2bc1354723d3fbf445f783d8febe53","0x03b308b0091c8d1fec5406cff741352a2e66ae28","0x03b76647464cf57255f20289d2501417a5ec457e","0x03b924278d38db7bdfddb3a57b538debb420770b","0x0409f1e6cac36afa03ab57c25cbb0334cef7f8e4","0x0448b99214c85013cd3e5e25cb1a421c96e7c060","0x050d2623b8ebc71653acefe6700248bf2991e58f","0x056615f0364429a85fd9bea32e3f27a916c84bfb","0x05de4af98481dc6ca566679bee656d1d6ac6999d","0x06783487ef7579d65a619b8a16abaf3497fba4bc","0x068bdd067ce78427901c01607f9e42722975821a","0x0718d289e4e6fa61e9fb05c6f46681a25baeede3","0x0757c4f0c97e1d3703661c4fa3d6280ec2d74d5f","0x0768edad62715ca3c5d7b919b7f52a704f1d87c6","0x079a13288f70b52d927a345c004376c500414121","0x0871c4db647a0a948598fb374af82756f5cec6c0","0x08bf8d6fa77f7bc937e62dcb7a5d1201890c48fa","0x090595122594786f97934ae1f27a4aa7939f18ae","0x0a16ddb102df6a250dd21389b2baebabeee268d5","0x0a2b975557c0262d3844c719fc021d371f82f747","0x0a465bd9404d2e2e6fafc86c0fef430d3f84cf86","0x0a5bd327b39cb8c996118f1b42e68dd3e8727e6f","0x0ab6f86fdf3c4c45090641c276a983941787587b","0x0aeed0374ec871243bb4d78392ca7777f22fb3ce","0x0b120a91a256ebae10acd8fbcaf2bf75d629e565","0x0b5d27f291c55c4742bbe2ed99b49dcce7684191","0x0b5d2f7d8b1cdb0974e3aa056f94ca98f139f369","0x0ba857029c8d486696a04d719932f1b4a94913d9","0x0bbaf4af7344754ca26b5def315756744f5d9e8b","0x0bd13e45eb62770d200f2efb658f73546f9a8c37","0x0bd61a2ef4c1b3c293f9cb98d5d985134e832711","0x0bf98720eb6ef66968b1db120c31335f13df94f8","0x0c4c9e3e0b8582b791d42db5f3921d9e5147fb98","0x0ca3f1f475d9c07c86e2f3cf0e92451d7d7d5240","0x0cb50da1b23c41c5a3e2cd2c4019e7af6e372477","0x0ce730fac3a07820fdc9e17bb68e3574f6fdfc0e","0x0cea740790617e2875c6ad1ac6f7d4f0ee907de3","0x0d1cab82681b58ff0ef38ff92a2369668b867990","0x0d7391085f27e910fb203cdce825dd28d9e29701","0x0d97a3b5a15ed668aa41d6f45ab9c32770b656d1","0x0e5773642def2ff242128fba88c5ceee83b6ded3","0x0e5a6bf662bd640f54bf766748592872a624c51d","0x0e715539593063503d9827237610788fb86c0182","0x0ebce9bb5e2a18d5e735ccbb835b219998a560cc","0x0f0924a3a5111e7987a23a49af826d2ba431342e","0x0f0ada09222c149d292f8786353a0b539af22277","0x0f9ff5028ef1aa963c965632f0bc113a140e63d2","0x0fcc669136934da42e4c48a0703721c34bee777d","0x104252d77c7b3c4e2e8ba18f4997d9b6399fad82","0x105cc968def09b0a6a5bee111d527ceffd611242","0x10c811e24f5653ac9842f3314d1149d5abeb470f","0x112af92409b81bd996cd3aa6d33d366e19230fea","0x1140e000bc127c1799040d8b61afd822083274a3","0x1181ea8ed8e4db358d5a20ee18382e11cff82a26","0x11a163ef98b019dddb0dbec8afb9fade50f1e9e3","0x11a1b7eb973dd982ae6e8b077a5cefcbcdb534e1","0x11ce4333f56fda2afa263206d43e1c00c4ce2479","0x121dd42384db6ad04851f7ac1e81bcd8bbb1876e","0x1274c165bc582b1bd81c38cbf5c95fcdb924a201","0x12e3633a8a4d6ef918b156374b7ac750e092332a","0x132a3643b457db8c20652c0be1810791c070c5f4","0x13abdf5f2ce5187c14de18982551367280b88fac","0x14008ab6c4e87a0679a0e4b3fc242587fe3c1aa7","0x14200888c9b85b4f1e589de4be12e46916b7af31","0x145109949f6af5e9068714aa8376a862e6e26bfe","0x14798026c6bf1c70835992056c7e128bc3b39143","0x150e90bc93e1527b6d45df5b802d83d575b76126","0x1563547dd0c62a802779bf55af1184e65bb1a6e5","0x15660fb6d6b66d00ce6e8b9692414fe33dfce431","0x158a714d69072f78398b7f1ad1fd6ce7bf908437","0x15a6e66988a886f8ca3548262841d0317e26acff","0x1621c4f772b284dd71052e882e197366e1faa942","0x16632f29451e49120e44f36211ac924905186616","0x16b0e4ad0b7287341e8436f335b558d168dd0985","0x16b942a59054186dc4c4067169fb126bd0f443dd","0x16d267f8f77617d327af137d2c9137cfd140df86","0x174b7da2e94bbcb498fe5f71801f9b7941e20613","0x179d9788f34618c88996d749d32a74e875964f50","0x17a58cdcee893486f7b17351f69d5d44b2961eed","0x17ac83fa732eacb07d57c4767eb3aed2928c558c","0x17d2549712fe4347c9c574431b360df11f89e3e0","0x185d38d04b3e52811a5f010ec5a8e0435abd0bbc","0x189621aad41e1be257ddf8049c4276697af7806e","0x189c7f09d72a1d8233478751ddd3e7d7f4bb3055","0x1920b396867915c7763a9860875d971f81eac9ac","0x1993b688ef5f5ce61cd71cd8a8d7516a97d58681","0x1a3c8759566071ca5fd32299aecd84a1f51e53f2","0x1a6d7040161fd4c0e8872c5bd3ec4d1cd22a255a","0x1a748ad5b635b422a99817092207150152cdef3f","0x1ab73cfe1cdb707a9b7b466db281546241d54e39","0x1abaffb51ea7cb711b6af78e294634df30ecb10f","0x1b0243ce8781cfff2a6b64e1f0ba3017fc4b89c2","0x1b752293437f25032ac09a51e3c5d9c49420cd14","0x1b8375e5626fb491cedaa63741469c9bb631b900","0x1c46718463877607b620aa26d10e75bc771ba24e","0x1ce454b07a7c5a5a6d488fea3f5f37cbbf32030d","0x1d1c483d1571342fe0ebdd3f1fb8ef6510690919","0x1d436c04aa4875866a14d124171eb3cb8564077b","0x1d5543d3906204414e033c00d70380a3741bcc8d","0x1d6cba2d941c6800deb7dc4eda00eb54d16210f0","0x1d9808c8c12fe4192e60890e7830ac32a7cff634","0x1db69578db176694c61643869f8668ddc66d82af","0x1e3dea460ef6745b7080953cbc3fa10d84dffefc","0x1f8d2df6024d42bd3eb4030a68776c5a2ab4907b","0x1f94157cd424f3390c65e2dcdef1536fd9ee509c","0x202f3b669a8e971b66553e493a0883713dff8d68","0x20b084c18809ebd560d1c392ac05fb28838ebec5","0x20b4a99014e33a9167db54d322cac1ef5d481250","0x21b85d5e5c9a752eedcfb9cef464eeb1150ba03d","0x2258782b63ca3683c4d4e3012808532c24ae5d52","0x238d968a7e6755469c8a4fdd2ce115dcde5e3a09","0x23d1ed22383c5c6517ad8da3f5d5181b79254fe7","0x24109da5f19ce30d57d5dd4373da99b781a72ee8","0x2490dc1685200c2dffff04df450dbd4c0971ffb5","0x249e8d871dbe1985cb49f35c7747eb0f0454fce3","0x24d6d4b311e29651d011bc0bd221de08025587dd","0x251fa89b5430ab0f0dcf0779000b48e70e9a7c6e","0x2545471cabbb93c2245101e3f1418c18fb7603fd","0x259d542b3507404af5dbdd90432a64228639452e","0x25ee71e0141347972b2ef66faf197cd09c93ae88","0x262dd61271d02870307567e19de1a69e92e32554","0x265adabfdb4dd7f5b6a104c2cdb6e0259cbcb2f0","0x2663d87f4e34b7b0356efe93426e8e7f050afb77","0x266988c1f5648f7510eecd85162e24cc5a391f14","0x26aaa46b57a5ce4254a6adb72b5adfa12bf1744a","0x26d802bce108f310b08cecd6237c47401a802867","0x271b68a4aa515a78b8d6dd0b2628fed2f1224643","0x271be020715b307000d11f5d2a86f60c56628210","0x27689177ddda66a138ef573fc41d381f2d94bbc8","0x27d4cfc6dc3a0ff6a931d19f6d8e743c03bdf88d","0x27f4ff93a39bd5d3f1ffac43bc8adc63d77bfde6","0x28047b79cfff41c513acfbb7e0e60366c23eea94","0x28c448b185894c003a812586b1466e9f56b20883","0x2980d9076aeb79d87fb7a07c830bcedb70650142","0x299f08a8ed7238efcf377cc0b89524d01657190e","0x29d6d6d84c9662486198667b5a9fbda3e698b23f","0x29e2bbb64a06d3b66f6b3d9aab6b80eb1784df3d","0x29e433a7da5ed6cdb2678bb0b4bda234ea2703fa","0x2aa9b52c4e57d3517301dfb39fefa2ec89bc1796","0x2ada97af9cc3e4c50d919aa6d4ce095b51a3030f","0x2ae3abf255c417d0b3aec296c0a607f54e9673e4","0x2b78452cf3bd2b1a00b3296b54005b78dbeb3a0f","0x2ba81a31ff63f31d190fb6c3aa12084fd61b56ac","0x2be1a753b1c0562c4cf35a24f6f62619961ceb53","0x2c15d08b51ab773c23387ae48bb7978b6e58f02e","0x2c2add1c863551a0644876be227604c8e458dd7e","0x2c59900b9442b7a865f93219c04f553a0d7bd003","0x2d818498053a15990c71de6744faff9753f91d24","0x2dbab983d00b6bfbe00f6f08d71602ce6ddb0b3d","0x2dfa6e0f031f3f246787bdcefed866be3e26977b","0x2e5c0674da08c3461a12bc4b44dad48727729497","0x2f7c6ea622a1722125bccbedb47307c7b3b9aa69","0x2fa805e45d39ebcec106e035aa3b942d3b8eb13e","0x304d702a8d7085c8e5dea787e63c0d3db0f669b8","0x3079d3a14aa8d8c9bb69122b1805cf7acc4321dd","0x3105e43caab7cddc8c70843195ea00f0159aecf1","0x3117d469c817c66233ebcc0714789a04762dacff","0x31b1c5b5e2d1c8d23c556f6d6029d265ee0af98e","0x31b6f2771e2e56aa754b319b7ee8134d9bd66cc0","0x32188df16621e517c49406b08b4c3fc7a8464cdc","0x324768c81f1d580225dec690f5389cef9358a904","0x32eb7acbc60eec7101b063da8df148454410a353","0x32f8e0361ce2b9ca84824bc4b446c18f6b2fc183","0x33119674cdb6bc1754ef466b1d0f175f3b51c88a","0x3333bbcfec5af86e14758ac684d01279d9089863","0x33929cbafbd7f2df4b7f38b5dd318d2c788dc564","0x33d1d53c2c9df744682d0d4f3a0a57e3b7b76595","0x346fbd09e7d6055164bac365d8f386170094b3e3","0x348ecbd26decdb75f1a14231f063ca82d32cbc83","0x3531eae7584747af1536881b1ca3c3e96a122124","0x3563fd9a390eb7425935cb5774bac91c87caf1d5","0x35672696496dd9d2d1cf8520fc6556e4d570eb64","0x358913b531e1cf4e937f524d4c09b4100b137cde","0x35f26e17229381ce51e49eb6678af436937b9e34","0x362c2c1f5ebc1d0f1fc6f28eefb9dd542c384830","0x363a83b68ce43476e9e2a505cb9020eb5a7fec83","0x3673cf19b6efb296e29d9b07666e9625ed63cfe1","0x371ee3545f78465aa29c7d842546f9c7cfb175b8","0x3756681f03dd2c8b5cce162d22986ed86c385b10","0x386c82b52d6e0dfb636c51b577577140cc1df4bf","0x387227d2681c547ca874417a70dd5edac08e129e","0x388445266e5d3c029e2ddcf18c803124efbf79b8","0x38e87dea8b44059c54d1f6bd7fa390bd1ab82d08","0x38e96dda4f19f2658719bc4ead69c7c21970b799","0x3916839ae08c8723c5cb7a1f789a12accfca9aa9","0x393746c74d3b3bdd1816133da4d7961b36e88346","0x39493d461cc533ea4ebb15cb266d1f45cda150e7","0x39869f20b65675c49d2884fab2e15ac2d1c30728","0x39d565a3a1a90cc3dc13e35ab59b7435e4066d28","0x39fbd25cf5a2c1fc32f01d56e11643a8cf3c2a09","0x3a3d8d6e73e15f6c289c08ef215a3ecb94111d42","0x3a8781327bc0d0c80cbd5a1505edc5e4aacf5732","0x3a995db2c00d3fd595e1003d04de35d6beaba934","0x3ab7fcd5798713a03887661dc495b5f82092feab","0x3b39427bfa2cd333daeb8a3e811e827447ef3dde","0x3bf124372c36a8a946010e4899dd45586d82c481","0x3c033aab89b26650057881dabbc0815146ffc0f2","0x3d2c7eac8e154988314681ed5aaef730976f87b8","0x3db21955a90f83aafd568ecaf55b7cee52f88bce","0x3de2da6ad41e50c21fcf271fe414aa86e1776891","0x3df047d6ffe88d5309859cebb1bd9a3e19338fcd","0x3e49faed39e1f8f7147d33eef177b9fedff8b0d2","0x3e702e39e0649bd8581d07a5bf1b9e5924d94ce0","0x3ed1e4f3db895f3990ac06f7c22ac83ef70f12b9","0x3eecaf77f17bdde5e4304ff2bebb050f7031bc21","0x3ef37b4bb5e64d0d9536ad437342c216107d6df5","0x3f4cbf443aff15add12f8179fea19839cc0593ef","0x3f923a45e473331de342e98db7a07c867308c849","0x3f942244b1f18c843752e914cb3b96cedbecfe29","0x3fe7493385eaae7ec98dc33f77b4fbe71aeb5edd","0x4033ad61ce26b65c5b6bbf01dc4a0139b3486cfb","0x403991744ee359971ddef35ed540ef837373af73","0x408a426153f4578d88ff0383cf5a32073e755fa8","0x409f29238cc6f2505cb7c8cf3f45728f060582d1","0x40f35fcceb856bdfc0d40d67891dd83f77905432","0x40ffd28ca404cfcd1bf7b0c92a997138f73a02c8","0x41022a0594bfbe728cf8457787b42e54df167ca3","0x4184edea458b3dbe3492e5a93c08aec926bc74af","0x42309ab9681352613bfffb6df39acd25e7444ef6","0x427912304f97d34116f033eecf6929e20c31a3e6","0x429100fffc1b37b4117219ca3f831a55643d384f","0x42b89ae22833935bc10e4b2eedabc9cdca868f4c","0x431431b7da6a87c08312dae9d15625a4753d354a","0x435e39c2093d3bc133715fc1ae18136baada81d8","0x438aba1f5b2abc4bb56ef518f1d42de454164a93","0x441aa3be62291d4c651639d823bd61ea44049ad3","0x445365e92f8d3b3c4525a04a8b603bd66e76aa9e","0x44dc3320ead2bd42a0f8c4abd980c568f1e40417","0x452e99c306c63c1264012bf036df034a8ee4b7e2","0x454debf212f4a30fbcfcc04c3fc21f33e2714c3f","0x454ef2831c463ec265010924e7aaf8b1e937bb5f","0x4620921a5e85acaec95b9908f42fdd8dc637cd5e","0x469bd2246fd4b94de0939c4e97b3bc6ded660fb5","0x4787a53a3e59f88ef5ae785a48cf4e81a165d6b6","0x47927b4e81a4a36dc1c6c340464fd8aa502fdbf2","0x47c3eb3dcdd524c2508da649d08f94571dcd398a","0x4803300b595e627c8167a8586795c4056c4fafd0","0x480d57dc208fd4c5a2306f0c8614621053b7c643","0x480dc8e2a679901c39080bcfd21d4f2cd2eef58c","0x4811fcb686708ed7712b5287dfb263fa68c91b05","0x48373b8cd69333fb65500f0a52e0f9d1a3188068","0x48c5be9c033d64af2ccba5dbe155a27663b78cff","0x48f9eebcbedb325f88ca819bbfd098ccc3522333","0x495833d72cb1c78c5f53e0fbafdbe18e012b2482","0x499bccf632e06dea6a768f84b764f4f721885003","0x49a3de1241d9cd15eb5615a4aaaba41ad4cc536b","0x4a38a0d781ed30c7f2f7decb3c2d933017deea49","0x4a5431099650f07e4bd35131499a8b26f8090ece","0x4a58c28f4ecd250c3b24792add4a03352dc3bffd","0x4a5aaf21e9baf9ef59e758a6754efe0d5fa1cea2","0x4b69511c0b077200771f73f3c7cd4ecd60c77707","0x4b98d7050682f26c0ff800c12826f03c58336c82","0x4c3d50a0a003e640e18b13e13c770d4cbf3e8ae2","0x4c4d89104a853540fecb617df1dae16280a0f19c","0x4ccd298f069f4305e842cd427bff649bb9209485","0x4cef2cf576dc4bcdf7a2a09ce457fd01cc50c7d9","0x4d04a3bfd8d9eec765412cb03a3020215ea58156","0x4da6643c5c6f36c326e679501f71b634d0c27111","0x4db947dd4c0c183df03fb38907839ad927e16cdb","0x4dc0a736d0b2ff9222fd6d347b03f0c010c5390e","0x4def87be9f22ad43cb20eb0f0092136b536205cd","0x4e72f7e288f7c1c58a439f8d101ded16587045d1","0x4e8c101bd3beaaa049e42b0db1877c9c5f90b724","0x4ea71d9b0a41ac87bed08ba19ff2e47a57cbec1a","0x4eb395694556a8b95bc4dfff47ea5babdf57ec74","0x4eb5c09f266a6681f3a7729cd4587cbb1ae3d41e","0x50060fdac9a4617bf64a16d7ab422ee439cd08f7","0x511bcfc958011b7ab9fd0098ab9a0667eb7f03aa","0x51bd618e74b4796585edb3d4ef17166077032a48","0x51df7b838a61d95b3f7508ac84316f4daf656302","0x520a6e36c86d35996c9a1d7c73ed9f801ebbbf0f","0x5363c32d81266cbe7e00e867a11462c3bfc771c9","0x5368fa588d7c6a4353b2b0a3683ed7a4006bbd76","0x5408c0acbb51ee6934f3102bcc1a5523a108ac95","0x54198623da15e0690e665e490c470391d92fcfde","0x54a0c58d2d38f39bd01f3a2761f3ada530001cee","0x5559720211fa37842efdce0951ee699fe20dff40","0x58addb0456871d27fd96d58c9efa0ad4d90d38b8","0x58f8b97a4ebb481731765e917ddeab1ac3fb200a","0x59311215f55b02f30cbf5c48aafb1d3307a91f38","0x5a03d04c2586699319844245fab96e47afdbe57d","0x5a343e35a472d49d50598b8f4e08e6fe5aa9aaa8","0x5a91621b20eb28a19862e6a20993478a44c65410","0x5ab2d1f5069dd2f9aeec3b0a8e923b1cdbe7fc44","0x5ae5e5278ce81a34b1fdfb737f7a6adaf8d110c4","0x5b191f5a2b4a867c4ed71858daccc51fc59c69c0","0x5b206e074347912603ee1dabde6ffed5108b86ab","0x5b7102185ef51982809c6d5e17d008d1dc272ad1","0x5be798bf258ac5319e74428a66e635df491de2b2","0x5bfdbed17075ef1e06fe13a6260e51c4abdd96b3","0x5c35b34610343bf51c30b3f5c590d972d9fae97f","0x5cce781b6a9408b438cd6b7aae486a6dd4356655","0x5cfc0af2db55938b879c5be94d0cd860ec2db029","0x5d3d79d8e5fca2b8756682a045f8ee119d5c4f19","0x5d5119df5db720fd12bff0d14096db5762f523f8","0x5d78037e90a0866ad9a00a3aa0afc7066610f1b5","0x5d9b1a54422dc49522d6a7d4eafb27091faf8171","0x5dc000b8060fca14234d8034326b73eb95c88502","0x5e6a70bce4f53a3f56e9047f1378d8eba6ecf79b","0x5e902a9ff6289fc5dc245e67a239fc01739a7332","0x5f0b23d415b82421780aaeea6362860e76e90a2f","0x5f6602f4e257b9836295c826c0a38260019b549a","0x5fbeff3e8bbce68ad8eb99dca3c38105eead9dad","0x5fff5a656ace8da161fe9ff71648321b98fe1b7d","0x60b17b6302d6fd1848e5328ddbe85fe42cd26110","0x60b83af2bc4f1f2a7db6c4c1d10d3da24f9e70eb","0x610409d24a2aa193d53ea45f9314aa54b9511dfb","0x6152d1010ab7f0b7fe1ffc866446b58638ed1d56","0x61555d49b2eee106aa5b07916e63969ecfe0ca95","0x615f0dd2a5717318917fb0d413e9248739f11223","0x61fc898bd97ab50c72780266f2d4ab251db07458","0x62756bedc2c98f80ce83e45bc9f8062345b65d8e","0x62c466f7aae3d51c48226598e66619c42cfead85","0x62d609d5890a01fc816220124ff04d3e5b9b1d86","0x62ebac26547363ce8211eac4ca4c255abe5ceac8","0x6385f783506a8e4917569dcf017202ffb5ea3e0e","0x63b67d9b4cc64bb4a1d773066784b7f5a6d27c8e","0x6475372b5207fcbc430a8fb98e5345a597236ad6","0x64db70e8cbb6f1cbb04154a378389f51b5c3682d","0x6586ddf4a8dc7002ff78a2c78dfd0a68db9c1c4d","0x658d777dadc32b2385655913dacccf70e687ccf8","0x65b495d9a24f5f10c73f233e25f9d88fa146b6bc","0x660bfb45df18e718264efe1f9f03b6e00dfe5be3","0x662018e6971d8fa89f707886aab59c5b86802735","0x6661e7afbe1bf703992889e9ad93832df60a3d99","0x668f1099990bcf968ed6cdcb29c8167c0831873b","0x6691c2af7d7eafddd5b1747b16c943ead6e5a928","0x66b7720207c04e5ad95e92bda8f8e4a0b19eea0c","0x66c3545900c352147ce00c6040adfd678c66e77f","0x67ca64e6d0a97bae9d85b6b005a0ccdd876ab896","0x67e0623132e24076b62e401efb8c739a1091c818","0x68662163a2e664f8f81a751463db74864eea7522","0x68ae8c25e9c0d2c245fa63434286765bde7c00e3","0x68cc876034e0a1f38e21b5018af131c5994c657d","0x68da0dceb08660d0f6a17fe8f8b8a6c9d161e7fe","0x6942b8dfc13c63b733c17a38ca4706be1f6fdb90","0x694a046ab2728d67365069af3093de18fe026c5e","0x694b09f4697ec0185722bc91f0b9722c5b57a632","0x69a4e5e84cb9ee053900a678bd845f644f5d2100","0x69aae96a220813975083048175926c3f1f19da16","0x6a5904d318d2820292876f97e3834c16cd7a16c3","0x6ab79ff8206f607a53a86f60e275d464351a3c8b","0x6ad12f37dc2357bb7dc19fe50afd2a981440aa99","0x6b3de22ec227d168dfaee06f1fc629b49eb73e60","0x6bb861e9363d6440fc2faeaa7883ba853c913d8e","0x6c85835c1ff1a30c839acb9e6b9bafe749424b6b","0x6cc52fd37374e257b80b8ec9dc8145cd1e689605","0x6ce2abaeb765337bf54c45ab3da2a0c60f3f84a3","0x6d1201947680d780d1bd9e7a322d7a0a7f6d83b7","0x6d40c602cf27bb690d4c7a8436b7868af347732b","0x6db1f499e420f43d9b9c07ead32e0695b7200b82","0x6dc9e5c4200fcdf0fbc6148eaec5cc9417295131","0x6dcd96c4c1e8b98c99db39d8c0b351a134631d01","0x6dcff558cb0f7c0e45ff7f968a68709250d6c6c7","0x6dd44477808e8e1a77b1f4bc10b32d01d7051597","0x6e0f74ce1630529e766f6ce0d6b5d8d655a897bf","0x6e159e0429ed6eb90c54f99014eaee0b3c287a87","0x6e3998bab30f24d0b7bb09a24fbc7105f3f2dcf8","0x6ead67d57f5b0cec890fa47ef8085a5e86a2008f","0x6eafbc2fa701bd8710466e6bc4c8544b9cc6e1ed","0x6ec24b2b96abbf08fc5a2612e29001b13e883d13","0x6f446e99e322593775a2944fcac4adb3e2518ac2","0x6f8b0d7ef9465498ef88f64ff5fbbb822113976e","0x6fc3b5a4e815bf18ee303fef81a4dba30974aad3","0x7021163e97179b328dc746ca9213174ca180df04","0x70817f848cc79acb114f606685e8751943fb02c2","0x70b3886f26bb60716c8e2fc3e5c0b0b0e87cacf8","0x70de1021e0dc0876ce3df2889adbf1aed381fc69","0x7118ba0bdf2a1ac06f8cee78fd6e5a86b159f2e7","0x7132949f1637e0ec1722b40f9e2e58f8b40ffbcc","0x7189e276277088fdce943ece936fd9ce7f161671","0x71ec5abfc49075e158b0f85575d400d0f5d7d3be","0x72cdc67f32a853fdab3440d842c215466480cba9","0x72dc63ccc77626f3dc0309feccb17c6ea7fb3b8a","0x72e9323a9e7ad11178372aab0e62f67d9ac36253","0x7335f905b4dd29d58c5afcb4f8d8016e1eb5ad9b","0x7350b22228aa71c1ae9ae5502a62eb04a2128d7c","0x739621ea040cf397a169047df2935458c6502d63","0x744c409f310c12d731b596312c59743f94058f2a","0x744ef3c4b61909432b88be78f0ce4f6de7f67817","0x74aa8b45270cb70719070d008ec26fe568625f73","0x74f4d373c24ef347ecc86609af00831d7d62bb40","0x752ecc81eb5bffec6366e00483bccfebb933affa","0x75a70b3f24eb6f32e75b53fbe9315111d05851d0","0x75ca62210e38d111896f6b46d47201d6bba9f4a2","0x760dfc5f7ef070159d9106156eb8b4e27c11dc1d","0x765af8f104ec655a4b421bff2b66b96702ac25c7","0x76a366289781477ac1a181d2c346cdca244d6cc7","0x76e4dc8ffc318b45518774a57e4277c98ec197ac","0x7729de7dad47e5c283c249f2c21a64f494946723","0x772afcb40272cf109c4952782fdc4a17bb529917","0x7742b9643958770ea186b6e5a0d67b42fbf2f0e0","0x777ad2a02d28f1aef023aff6526effd7f6ef499d","0x77965bb2a20a91b7d476eeb5b25e450f476d3281","0x77f6c2b37d38fb42c0f27ac2ff52190805ba46d2","0x783fff4152b25150eec13c19b7b9546301b75f9e","0x7885948abffb2ce9c3efc3075bca1796ab7c63e1","0x78c64ff0d6f3a3419688bb2624231a43e842365e","0x796b0389b596c35d40ec0bef393c46012bff180c","0x7a0584eafd56e980ef74dd053802b832eabdbbff","0x7a3578d9007485a77ab90ac4b94bd8d8e55d67f2","0x7a5c81cce0c4fa27c94dc46427cf794987b0124f","0x7a7892b3ef64abede8348684ba57a37fd7edc0d9","0x7a9c9e82382b8a9df2291e1af44d47ddd9834366","0x7ab417afd459335213601f160dda165b789b0193","0x7b001b722e36150dc8820226b11fac792e49fbf7","0x7b0f2412fed45d8160209b0ad140de93c0eff42d","0x7b359142aa64654932b3fe21bf26caa57b72e2f8","0x7bfc4c5c47d2c2a7e727438d3e02fec0f9fe88fb","0x7c61134c814622b3533291520f682009811578ea","0x7c8206bfbb42171e2a620e16e669d79b1a800c27","0x7d0057450d0ee0ae7997077792cd5a6f199b8122","0x7d537213300571b3e2e020c0c5d42b3f27db3a27","0x7dfd5fec79cc6877ae6a62f97f57980fc99dab3e","0x7e13edf4cfaeead0d5f97d950897d0759e95bc3e","0x7e1ff6e9ea45b83d5992171fc20f13a07111962c","0x7e36f211736333ca3cba204181e2f49fcc828cad","0x7e5550abc321fc49c2e9d0a0425a93b1a193a841","0x7e6f169c5bdbaa06cf81936d5395340c524f3815","0x7e7aa18bd8664e5366082c9bba855a3486609f8b","0x7ed5bbd68063b7708e749bdf8a110769ebf8ad7f","0x7eea962086ed3ba5ed35c5aef8784bda29a22185","0x7f05e2326caf37626faa7dd542aa7847cb627822","0x7f0ca7bc35a0b45e25055fc1775631ade7c082be","0x7f592ef45d8c5d4f630a7b92ec7cdf470ebf5b5d","0x7f892323bc373ed7e7c3ba4e95f9838690d7e0cc","0x7f8e64e458b3699dd96d4d0ffc167a7803bd6c18","0x7fff30cdca03629e4b47ef25bd0de3a82b5f6c93","0x5ffef06d2207a8ceea5cd704246861b9a3345026"].forEach((function(e,t){a+='<div class="address">'.concat(e,"</div>")})),["0x80b759f0a9391e64351e6b94e32c384a40d96b7d","0x80bdf29f00a508107d02d30d1ea4125da38b03d8","0x80e6a290dbeea137970f779900f87f5e34f05f6e","0x80fc46fc85c32e8f0b89753549aa7ca5a9155957","0x81210106806bcd45df0fead7c5226cdca1b5edab","0x81a0751be20155bb1039afae1e3f8992f8bf1b8d","0x81a7e8c827286ac78e1b669bd5f1dba341582edb","0x8219a3bcaa0cd2c2d0ec16524284bd5a80502ca6","0x821ec1bd94fb961315cab6a1f9b11d506d68de12","0x82340331ca670b95a02d433237458aa05dbfb64c","0x8257e8d24f1960de1ce366f7704c930ccac09716","0x82aafa5136bdf51d6b63ec38aa8ce89e87edaaef","0x82ab6ab7905a1a03ed7c34631e5448fffb8c8293","0x834fd28b731e45d150d4e4a1deee343da04f47eb","0x835649a4ad9c806405b03e39bfcd02d6e81b408f","0x83aaf8cc72bbfaa434af7c6f0a8aab9b581b48c5","0x83b82623d62e4620e8f62406c15d42e2cfe1dfdd","0x843fdd402952da6e170497e40bcadccf704e1320","0x84c191dcfd652f6b1012bde262aaa933a793e56f","0x8502adfe5318f0b302b26f3ca82385994a63bb1d","0x858e6ca4fad8b103f97b2cafc1ab181b1e3de6f1","0x8596baa4ed3c95ac55e73a2f2bdeb138b428d54d","0x85dd36038eacbeedf785927cde2ac47fdb581032","0x863ad0c4cfd3fdd2cb435d186c3477ac95e8029e","0x8667e16238752e6afe8da6a68ca92ff5e5ab5253","0x8669d2a4a5c5ef2c1cb3a0f44c527f9ad73e5d00","0x86c4b6000b6f5c8a213589d7f6985d77ff1cb2ad","0x86c4f1983ada6f36ff56d8892be6bbaa21decd90","0x87227b608f9ad95d88da75e6813a8dfdfdc9ddfa","0x8727b0d5e43ca8525490962d33d5eb9c6d554ce3","0x8975a0910288d04fccf16a3be8f561cb6fd7e90d","0x89cf691caff859ec99432863516824bc1325ab26","0x8af39232099b1732ab876b2247b9ff2cb038e285","0x8b400882263dfa8c1f7558a6bebcaa37622da3b1","0x8b9a45071aedf59f57da339a90b57ee2796abff1","0x8cf947b055f1d95bd10f9f69e23a38ff557656d6","0x8cfd525eb5f38195ea5b6d269f0dfc36cdb4e953","0x8ee58f10611d0371fb9fd388d1cb8497c57a7331","0x8f1ca7b7689b75db9f5701cff07dcd335e7774cb","0x8f39f0be19fcd7ad14ab4890743ea5c046f4460b","0x8f43080660760216fb21863f98e3cfb079215a61","0x8f4b3c45c05efff44c8af8c5e506054cb7a5c3b8","0x8fd76f31a0c7ed0588d6c630e0fe35154937acbb","0x90615bf436f18a824224d48ba6fa2d7a510453d7","0x9092164dcde75456862c7ac90c52120fa87094fb","0x90cf7434b764923c32a66162559a1a878530603a","0x90d39d816c50f719bb57c2a3f78d327659b1d562","0x90e563e070e201c134a822d651fc5c2fe44ba735","0x90f90ce6487c70a042a36e1487c1e506a936ffd7","0x9103644e4a493763de37d0d46d25b3547d17ae33","0x91221cc001724872ac6b6563a047b1a12a14efb7","0x91282d4550f3619e37fefb18435799ac2ec20b6d","0x9140fea79f58cb0558e8e171943abd74f1e2e4a9","0x91a35d0d46792ec18d3ec72e7fddd85653c385d3","0x91af56e2f6e58da67054310295421afe034c1246","0x91ce2eaaa0ae31b8b109e4a2038fa7ac3e83034f","0x925c15e3e3b1a57b94dc51909b9891073350b653","0x927edb33ab70071a2bf571f287037d18a94e5e4a","0x9280b633f45eaced5a0129ed853f264dff8b6d63","0x92ab3c14a092a1852973a3a42fbb05c6c8dab79f","0x9329c98e8c09031f3228ed44fcf8fcffc8725699","0x9346a5ec7bd8f5993e1cb68c4890709671ba4ff2","0x93628e1326df23e742e9ffa25aab350f9ab197e7","0x937d55363c487dd2ae6a1ef77675c394e32fcc45","0x93f3fa9c721707cdbfccf4a4a3a01df7da0047af","0x93f4db584fc56f5dfd2a16d0040e045fc4511cc7","0x94b52ce06ce6b5d4220491e7a1deae36d27ddf71","0x94c62922a83da3a258666719518678ba18e9e869","0x9542cbaee99cd2c18cfe54730a5c88cf4d0bab21","0x959a80a8ec49af23d3502fd50cd8243f09286061","0x95a5f38b726dbcbbaf233f318b2bd711159c6ec8","0x95fe31703a15aefe22b2d4638ec5ec03d8e514aa","0x96593577d6ff8feba6bc2b2feb5811bd1442304b","0x968187c08a42cc32f5a5652a9083691173e1d492","0x9692ede6566b0296b359b9bbf66fb8a23de32167","0x97b102e00d88f02debfd6b1e4b901dd6931bb982","0x983f3fbe0abd51484da4d5f076e199b5bae03e13","0x989842bf1c679dab41e06bad31139272bc1ad960","0x9924b012a230776408ce8d3863573657140f7a8e","0x9a97a784f33b492ca0faa884cf9629eebf0bc505","0x9aca73f166d46dac8afe9feb57045a0edd792dc6","0x9ae8d8ed55aac2edbf8b94c5ed81c69f67e7e906","0x9b06a34e264336b1e3ac292c211a0b4b3e1c8fa1","0x9b5ebe633fae7ade637af998d2099dcca8af4215","0x9b795c57aafc2e20e57c4f6f29fe0b55625cbe4c","0x9bb07e2cf238360c373689d66d82ad2492a749ee","0x9bce3aa6f5d938eb5e60632777385f7dfb5b5a75","0x9bf7cc7c1217f97308f7e50c11ed731a3f52ac75","0x9c62088c11af7f9630b8c8d666127f6dcff0e1c4","0x9ca23235728ce9ef5bc879a9abb68af3a003551c","0x9d401a9c0e1481810512ee2b5b54a9ddbb360d63","0x9d5a852240770e6f0538ed6bbc4e366386ede52c","0x9da1701efe0369ccfa4f50b347ebebc626d66134","0x9e80d62ab4e0f13444914a685c8cefed8a7f2f78","0x9ea0749cd68c88034f52b4835b467308376dd84a","0x9ea83a28f16d2d4e37468eeda7a15d41c6357c9a","0x9eb1a2cb2ea19336006e49c16d0a2b0c296e1413","0x9ec568e0566f19912c632a99d8dad5c6240c4e4d","0x9faa1d30f0fd9ed130ffe3abb6b4cda16e15a05a","0x9fcae73fbf4fc6283b636f707c17529c2ba7b684","0xa002b3f5cbc5e00d0fa17b29ddee4f1a6e9f57fb","0xa05941a77dc6fc50440de6e67bb7166ae9a7e428","0xa0d751cae2ba4d1c5f2566767fd70e6130729667","0xa0ec32d109bd544252848596d291348e62e660e3","0xa12d205d2b2aef73089ec2b8bd700789489742c4","0xa167efb805e22407390a525e970d9de2e818f14f","0xa1a971124137d0f8eabc36f473a5668b8d86dabb","0xa1b1389dd5f571352d642d39be702b71aa9d3fbd","0xa20d33f08abccbd0007bce2852e0e545b584cecb","0xa214c3dae6cf372db39f219d6a8c788044db7e2b","0xa2165c20395f602b1bd91a6f311858386531ea93","0xa239a14afd3448161efe657d5f93c83d6cfeb57e","0xa23d2bc20ad9ae652c58ca4956273ef4d06dd489","0xa28e586e24e6d78d05e822188ddc118ac2fb034b","0xa2be0ef4ae2e20c4eb6f2f194b1a78bc71bc376d","0xa314921b83db11d8139eb977880809b96bb09d1e","0xa3795ee3215258f223349fa8a079eedd8b174e93","0xa38e734035540001b950f3a9295e1bfa85de50eb","0xa3d7cceeb6831e8d80637e2e490fff7b257fc3f0","0xa4117d4a882c1a569963f42dcf56c8287442a99a","0xa43589fc8f89f02ab33f3a96de1601624f7ee06c","0xa469d886022025b08de50e1ef8cc2209bf0d7c04","0xa47e77fa3bc838d8ce1514de2b272231ab07e34a","0xa496e24f30e778f75e21e5842197c3b609f95aab","0xa4c350f7ee6d318215a76a22d6d1d10d62cd2137","0xa5aa940b4ac3f71e86a36ceed2ec65325d163954","0xa637360862d3889b4d171b33cc587a22baee6fee","0xa6585b22c2c7c92e80c33bb6620e2869bad08cf5","0xa6c9b5696cf6edbef25d941714ce1bfca544f3c4","0xa6d674cb39567d9f03a882eff5755f2307dcbd49","0xa709f05606a95d75af8d8a3e36dedc0ae74f598b","0xa73660448d30b1a14c15593f004ca2df7a8de0f0","0xa74974367597159d97442ac54496f3f2afd0f984","0xa767e4c1365323c7a7823206a3e647b97380799c","0xa7894d97369fe4a66d1f1c0596e5f7c60117502b","0xa7c63e27c86aae5b1f558a45a4ec1a83c3e54d85","0xa7e5a837382c4b2a484bd2afadc8b5a5f6d74e87","0xa8085e19e0cf43652edb0b32bc10ea13f545d9c4","0xa8208234cace0fc629ae4177467bb09e27e7df6d","0xa8804df6f73782fdbe5b0c9bce43ef12183cff75","0xa899c645381fc951bf764c3594cb6af3a2534380","0xa942533ecf3b410e773f9c6692893f338e39aa1d","0xa9cd05d325d9faeaea0faed9efe01711e7c4e956","0xa9d1fb515510474cccf71bc8fa6f511b262b4045","0xa9d885dd4b6277caa830dc49dc5a8dd8eeb6b64a","0xaa51734bb35ca823ae5c8606726c62953c8933a2","0xaa753b07bd6e763867d508048018393a3fb5c230","0xab69b3c138e9252d6b5f0021240620a2e5e40524","0xab94ad5b4e71a160664f3aa86df61b364fba3f00","0xabaa3af313d8059d82b00ef2b6e72ab14eedc680","0xabfc60bc9e4c0c158b74fe045f0aa12e3debe64f","0xac931bbbc70d3b0c152de83ea4930260744f4d06","0xad5240b6780555e4a177c39280f2fa6f4c87c2a9","0xadb9a7cc511ab7a81a24c8d85fc6165a93567b87","0xae28ac855cd33d4019a4aaa26d4fcaab00c37b89","0xae2c61b70712520a9379ffc0d6850fd74196472c","0xae5195823004e2654fbc39a1a8719b62264c6171","0xae53fbb432e07a4305cd46ebf23a210d8298aeb2","0xae78517d081f15782a876ea0bb07096d6998c076","0xae85d9232b23fda93e481b831b0d3d4e10b027de","0xaee9fb881b178c164c5a8919eae013806bb9f049","0xaf49a9d6c202d6aea7277adf765096e6191a981e","0xaf507392d8c30afe3a467ec0379720ce0b4071c5","0xaf9b8f51802ed65f80f96d84ca6baae1b5f92e2f","0xafa76f79442cdea9eee862b1a63eff1018302728","0xafcd469822ceda9ecdb884766ed5219583e34872","0xafe019f6f74880e4ab83211b39d8b278744f6e9f","0xafe8fcf13821cb259b982008d4e2d90c93bdf3f7","0xb0e95798c439b0796cea52e380b545b1cbee72fb","0xb18b0a5884ca2b86eeed964c9b573598b74ef27a","0xb218bbbbb916cdbe26eabbefbd61c5a169e65368","0xb234f5c6a51b1b04a675e318a2209a6064cb7ca2","0xb25e6ac820428f6c96e3ecb6d64d9bcddf781aa0","0xb260ce46b192afb520d90ef253a1b3b0301a678b","0xb2e56c203881d609447b63c5e642379ac70fd7eb","0xb42da6073a45d89ca334ebe5ed015291b8e731d8","0xb46dd1a2aee6d757498ec1a31934e48acc0aa24b","0xb4c343d7b271dccb741588d83fb69d3504e582e3","0xb4d0e8be45395e72e9c1af25f59d854bc7dc5b48","0xb50bab0ff3f28250556fd6f030911c69e0c524df","0xb526852aa1bdcd20e3bebdaa640e6ec157d23c4f","0xb5b882bc92245398352c225d7375196f1dcd9815","0xb5ff53fdec916f39021cc5e8a84a89c0e7fe18f7","0xb6b6d490acfd383dcd296b316e81e767db4a7a80","0xb774b7a1095b99ce4706ae8bfc43b944a0019179","0xb7c877d5e555fffbe799a4604b774001398d99d3","0xb86f79e12e97bb484ee4fe7f3dce7aeded032e5d","0xb8b773eaf43ad51717cb653386427af91ad4a6fe","0xb8e38504a8f19bbf6ebf6d9f6e4efb1127dc2a7d","0xb8ee2a367c4e7be085b5b00f9a01a0935fa5ca6f","0xb9943826b76a11ff0feedbd3f53b2cab1ee0a61f","0xb9f831f19f94f09709cf75c757e5bd7a9a812819","0xba0bfdd660bdce11fd35d004556da799df3c6dc2","0xba29da594a4d959d32b549378b15bec6c45d8cfc","0xba85054cae9f3da71e8527367ffe4352df930383","0xba87af3ae788b0e97536592f49d8e2824c011553","0xba96a2ba89ea249148ee599d2bbcd669de94d4b6","0xbb31c023bb56d028db6a41338b60a5f07071d634","0xbbac6d7e6f7a0d3a00546ba5977e791d5622b834","0xbc0939b9b2cbe1e66ea4d0c9d81a57071148defc","0xbc19ea63e0749521c26afe71ce3b2f6b939b3089","0xbc3e272fa8af6ad5b75ded59aca6a9173cc1d847","0xbc46f94f79f22b6e2600b8ae79801b306cd58a87","0xbca920d946ccf181609d3bf39877385a16df8adc","0xbcb1584db935fe69630222e1fe20d4a1da1548af","0xbd44d8add2c59584c37c5dee45c8b8efb445ba4f","0xbe676a680343de114f7e71df9397bdeabe77551e","0xbf6e4a14d6b66e49b81e6dbd2306040278bae769","0xbf8bd0d0b1fe8e9322792961631c59eb248d97f3","0xc0741cb56a86ddd99e2a5fd0053c380fc1daf435","0xc0d3a8d939d8653f0fd8fe7a0646dd3884293466","0xc157ebd304ca3d25c0c690c80e371372bfd3bc44","0xc17894874503314905e99bb97c290af0b2bc72cc","0xc19543c278b109399d311ef57bf671585d2d1b5e","0xc19758964270a4e17d64eb20e946eed6359603fb","0xc1e8378af6b6aa2386012fa40290282d53e740e5","0xc290f9607c5e598d9b7f6548813b489b9382ecf7","0xc2bcc918533695edf778db941d8301bc3a9f6716","0xc2ea697505f6c53e6cb910de80c57ea083722c44","0xc3095115383c84030b71547f56a86db816b8b237","0xc30acafea2d005b711601fd2ce192bfcba0bab36","0xc33acb0c3fc2b44b2ae6d69ff6dabff84b3e15cf","0xc342313b119697f292ac2debd79192e75b602061","0xc37e705f34801896121b2da24327332cb7dc2ca7","0xc3c8462d6caebc894697a24030796a33e0c8b240","0xc3ec4a1e588ce22c85a58c790e5a75db076fa394","0xc44ad6546ec4aa311e1130055ee77211414275db","0xc52b32709966fccb9179ad9c3c794a2f76580f96","0xc5a15e32ae94d405d4700cd6ac7620f7c6f01ee9","0xc5af04edd873c4591c377ad47d13f2fffb3d3829","0xc5b35ff8dc087d09a9a802dea8efd8dabd88ca8c","0xc5efc0fed2a350fe0119d49ed38584e62f5f01e8","0xc60d7112618227253702ecab9eff4a8ce56ab02a","0xc62367a7ffd67a932a7950fa926a9899f0a2c69a","0xc632388da43dbb86fabe22e8dc4a510956dea66c","0xc65c48fb1f2ac66b106e7bfbf703e57536808c63","0xc6be020af953b4a1f27872348aaeb4501128acdb","0xc72f3c1a11d8fd137673796f91d29fe8d10b72ce","0xc736d9e06419ef52b02aa969940fd1da4fc9a519","0xc7610188eb55b700cf89d6461b1b559d6718bb77","0xc770240526d75bd0b5662d7b8d8aed9cba243d5f","0xc771d2f0f04bbfc9f243fe12ece0c16055d6cd6b","0xc7bc7edd3d12640616192b17aaa0c4cdbd66e9ac","0xc7c009c6cb1b4f2f147a5aca84a6e19fc8ad7b2e","0xc837899d2448cf5de4ce5e40cbfb30e3d73cf05c","0xc85d47c7a6520e390404ac13cc6fb379d23cb1f8","0xc869a312104958deb20583ae524edf43252baf7b","0xc86e15edf575c511a0d7af9552003edd31a03ac9","0xc87dbc752f7993e5da314541f8c6e36734baaeca","0xc89d3ebdb88724ab5295ecac386d3d25dea74446","0xc8aec25691ce21dcc905855c1162bf0bdce8cd55","0xc9201294cd69c65d9a00c038ba92982b9153aac4","0xc97ef8b510ef22d9194b9542c37e631777225b3d","0xc9b359a287a06a22bf8154e6ea0dea5cb0fcd8cb","0xc9c645c50ff45320c47fee44664b3ec37b93e027","0xca05da65c7f83a30556ffffb035e58bada4d9ccf","0xca4c17c45c7ff5e3355efd51d86ee9a3fe858edf","0xca7ee42b6a83667812a6ff544bdc7ab51dd977d1","0xcaaadda6c4f21f7b658e5cfafe21342eeea48476","0xcaaf1042892717a91d850b481422a0116cb022d0","0xcb62acfd962b8a412b152e72d8643d3d60ba2dab","0xcb7edf27e4f37ef3884c2e8aabc88790d51f0540","0xcbb592d7a8f5c56007634d5fd1e26d6b3e3aa091","0xcbc40bf02bedddc03dd36b2a6250fcde00c95d13","0xcc1d1e75d5a79a0ad8d1a5d8608d8d7e8b3c157d","0xcc65d65afb907b855b2e366f65f5df2c8521e54a","0xcc7203f89d87a26c8bb4a6101a01b67772766ad8","0xccadb7e9bf311fb80e2e77a2fa75c4d00e67431a","0xccd7d496840ce0d7d47f37a6c407952644582379","0xcd56a103af16169c7ed5b249c6e20c1841449fef","0xcd67717950db3169e18aaf7ddc9887fe40b336a8","0xcd677598298bc995d5e9cbf006bb75942ce88f8e","0xcda114e4433e86fd6904b9d00be8244637732097","0xcdb90b32097c3694cde5266ff42a96f98128d4b1","0xcdf3531d5efab6bba12613482025aad570d88d2b","0xce4f23068693241d9579f0f889097a042b5e82d5","0xce7032d22218ef180fd3d9049d355a5024cce7ec","0xcf0387fde3f2168b623e3be42c6b1a09986402c9","0xcf41bf8a499dfff5fd25edee80bb5e51c27a4b90","0xcf54f040936df968bc7cae732903c926af3c0e20","0xcf5f03d5a38a41a805e078763c5dc90619a13fad","0xcf883f477e6c7ba87baa1312d73f1a46a7a5b6e2","0xd07bdb3cd7813df5446dd34ed52c4dd3460db4e7","0xd0cac792a8d1e276ab5c49b02090767ed5cd963d","0xd0d129096ee74a5aa705597b7032b46ee47b71a5","0xd13efd856f87acfb13432c4ead3a153dac4c3865","0xd18848abfa3747fb05038a287b763bc2bae9f99a","0xd18992db12494f18f0fd2e4a05c1596aced9131e","0xd2143b88b098bfe433292d90d8aa13dc0f58f69a","0xd280572f0f2e6386589aaea71fd87a1bdd9bf304","0xd3aed84a9d7c8676104b405276a54b5e02b716bd","0xd435d8a86ae726623fa723037cab6e290b924077","0xd490a652433d94bd3ad98eae707c2c7318a5f473","0xd518d11b35b0d9c379fa618aec44ba5186b57583","0xd623b57f3cff2008938eaabb5fac2e2265a12100","0xd6fab8562a4187b9dc03e32d701a7a7d1aaca5e8","0xd71fe01201c5f6a5cf3e4ee0a39c2a510255a66d","0xd79629e3e67305375b59472e48c4972b7b169973","0xd7dece5204b669926b09da4e5ea85473cf2d2ee7","0xd7f136be5eb9762034727e77c6d09b1f42e3321a","0xd7f54bdc3dcc865854ef72e0e38b1ddfe51a1b94","0xd8b3eb911e261c3cc4534b374ece6f3672d724d4","0xd8edab5e646d724a3e2d40d41858ea650ceaceb9","0xd971dd609cf44c60a8b80114db25fb49cfeffbcd","0xd9ff99d7d37cc95014c12f1eeb54cd935c14e369","0xda1d7fa6ec63004f43025731e63cfa2ecb929f9a","0xda93f8e08c439d7ffe77e0bce1ca6a8ab153d35b","0xdab6adaccaf60960e9b9c0c32c3c8c564f2db890","0xdb106e923031395ddc7032545cde695eb86c00a1","0xdb5f98d56f9731d265cd1ed771ecd4abfafc3902","0xdc11e7196a5b9c1b7c61e3351bca8215d6d2bd00","0xdc324433c9936c38c9334b373db2468719cc17b9","0xdce15d156ef74e3aa0e433b0439b6f91409cf164","0xdcff982963ee55df2ab68d41b50b9a6fde4cb7f8","0xdd14ab54cf695664bdd7172940efc7e3693b1c52","0xdd645db3b4895cd01edaf7848984354fa149c43d","0xdd7253d5030d3c4ebd5ecad49ae13dabab8b6b01","0xde243d9ac33ec3d329bbae465a69f6547e051894","0xde5dc85b8a951c1c2072cef8e0b72b912f0baa10","0xde9bd8a6b86f2754944e6eceffd6f7f02920e345","0xdec35dd5f3fc1ac8ce0c14a88353b99ffbdfaa5c","0xdf2593f626c4e859727f21609381e4f8f4e7acc3","0xdfda8ed37215ea5f15352443b9ceaa2474f8f6a1","0xe03bd3cc3c646ace450f740c6317c5afa7fcafa6","0xe09a4684d0481df72af26f2a210e64180db16a47","0xe0ae80c87b4b833bfff6cd52389746920913ae71","0xe0fe58a5b982f5feeb10cafc4c76bc9f9effa81a","0xe1442612771a25b1bfc13bce6f827ad4c75e6d88","0xe182e66eb47bf155fc384473697b948973f72256","0xe1e0da672b12f7d0d025f4b52512ab1678b2c7fd","0xe26211851e76370091004bf543121e967a56a0e2","0xe2ea0a384bb20ba4e000c64ffe9ee14f642270f2","0xe2f0284aa44a35cfd83f2946b767335b14347b96","0xe3120f4510f05666592d5864b0cd9b2a1a139b0c","0xe394f6de596ed18fa8298b5af36f398620bb3347","0xe3bdaa9ffc03f8aa3f51168c5205e445ab216f15","0xe3e50c0d809a42b361128efc478660cbe077fec4","0xe3f9249256f6c3987c520475cb6b1882e5bf5fd2","0xe419bc78d80a3689dff874e83cc2e3e9aa822f7e","0xe427865bd83ccf16387efebc0c1b1b6506d4dd85","0xe4369be6df50aa406db8212ae00cf81917c848ea","0xe45afe9ad8ff46108524414be5687ea3a7ce41f3","0xe4fe8492ab211e10175209160c9dc257daef47ab","0xe52da1186b764fdefa2ed05dd567bfcba7dfd3c6","0xe5a84dbb403f199586b51ad3480ddf9068bd8cc1","0xe650b41b32af0e642338fc5ca46e9236556b1070","0xe699da57db4886f6b2240aee33ac81ac43bea824","0xe72544fe12930afca5a4a18d48ec390ddcc94bc5","0xe73c8c4f440e6223172bdab5c83da2639274832e","0xe7525df6328557c642eb2d8657d4a91b73504a0a","0xe7736944eb074bd0708a6d02f4a4961c032c072d","0xe7c1db78d86a6ab2295a2b911559fd754710b64e","0xe861e92bb2ada49f2af17c4830a8f0f8f6578eab","0xe8a0ab3057db4a881415e88ca9f6b317974924b0","0xe8b1aac4c3ff77eeb26948faf930c9b645eccdb3","0xe8ea4a357b04e9de5dbd0ccb3d16e72f4954ebf2","0xe900903c0cd72ce0fff46edf936a5f62dff467a5","0xe9033f151edd1aef6a77e025fd10cd04af49880c","0xe92a7c379fae71fba24070a00f0d79e3577b817d","0xe966534f34e6ec039cbc1df1c3b5d18e9c32795b","0xe9f0a8030957fa13ecc1b7c01c92d9b056167361","0xea6f1dcdb06bd36ac1f8df137d1263446865ab7a","0xea90a2afb358a1d26d2ede65a35bd15af69fdb4e","0xeaa80a2bf835a81e04ef2199bf68aedcb2b74c2a","0xeb5dd4f80270242e7abe71fd951008b269c9d464","0xebc7e58735280478eadb480f7584c79ab955b094","0xebfaa8a9caabebc93a1eef9006b0ff440d450d75","0xec0a9996fec2f38cfda6c307c22c8ee7305eec56","0xec4976ef2c41aae824a6efbfe04fbc2f3c1a9d49","0xec4fef5a46a6b6a14a785ab8a889374031b6231b","0xec580b42c76f09216f1f177068ab880fd59c453b","0xecc5bea14144fb565fabd9ed3780234c8685829f","0xed1ca63db6eda02b140fbcd0b2cd0af09ab3b67e","0xed31be2c881ae9f91846e3d249157b9242ed7967","0xed4eb8f301d38120798e23cd0de5f3bc8e5b213c","0xed694315a7a63ce2283630c2be5083182040d0ba","0xeda452817a24aea26e6e90cd6f614c121a3fb014","0xee22ee448a3a2b6b8f01a45da1476e2d01e24f3a","0xee842cae52a6f77e3abadd575966ec2dbd61d9ea","0xeec177e86e93ba2c9e1c67312baf691a41c8129c","0xeefb745e597f887d6d1cf4e474134c6e71c06fb9","0xef2425952ec14433b52217368674d908900b82d6","0xef3dba55a6e07f8e6c06f483bc14bd4d10a57e2d","0xefb421f95f958011849847cebbf2edb182ad3cb4","0xf0029d065f6cebec6c245f1d97adbb979eb7dd0e","0xf04e04f02f4da915aeb512408fab8b09e7599bee","0xf152581b8cb486b24d73ad51e23a3fd3e0222538","0xf179945e6d4b3c56f5b00c6d80ad3c184ccfe0d2","0xf1a496317368b028c2578f32f151bd1745047b98","0xf29544ac8202c5b24d7a6c67b4a961e4e2de33ca","0xf2c95079e35a27c296b01759431e05c38e392a21","0xf2f01c54b21bf8d73e414200a8c9e1c12536d7ca","0xf30442d1d41acf211b9e294bb3c0ed11f03d0676","0xf306213d72d081f872c5ed8566bb5505b3e4be20","0xf30b1be86b062b2deb159df7265ce070e6a15d32","0xf321ed95bbd3776a7c7d6592d989fae98eae4560","0xf32838d9647681066ef040cbf9382d3eb55eb98b","0xf37c3fbe0a404f848c38a31fdbbc37294531363b","0xf3d39d852d513246c1d627a664d2e1bba94a8859","0xf41a10e5eadcf58a9ebf4957ddbabc364379f6e5","0xf499122e3453d264ff2360531308bfe5580759ed","0xf4e4388e34342a5f2c8300efb2223fcff23b2256","0xf519b290b3019889f1c5da98e4408ef502140cb3","0xf539cb2f1093279ce1509c89cf229b54393a8546","0xf56188ac23c57fd9ccc55ea76e542b86e46b9a51","0xf5f8dd66f5359c2b8e2990be6d6c0bc762d5e575","0xf5fb1cca28137c1bf274660bf49cbb6307fcb778","0xf61845a86282d63be91b5b5818abce5ab2cc8a9f","0xf6769fbe1ece4e9e851c1c30af8fbada0d07d84d","0xf6c0dd57dd4db03cc898ad396bb7c8ceaf554d30","0xf73d5f6509c1369242dab42f5bcc255edb1cb19e","0xf79aa684927b27175477b2d9439a9e4f819e4877","0xf7ba5c25bfea681b29a9326359314ce66c07d5c7","0xf9091ba435a41f0d461d896cfea6f5e78ffb475e","0xf9560151036625c0a0a49380bfe38f0384e20a2f","0xf9df3fa78e095b560555ddc03f0834781727fbed","0xfa4e2a87c2380f41539133a8f5dc275176fbb4bb","0xfa787e81a06019c92fd70bfee89be38b07171725","0xfa9e56b3bb8de6f9ca2abbb4d8b7c88e48ea454f","0xfab71b789653fb120476f5bf51d32e69c1f495b4","0xfb07899adb82676956440d8efdb39f97a131c3f8","0xfb77b72e5ead7ac452deeabb39919a717a5b77d8","0xfb9025fc1967bff23da9b95aab2f0b5679d4ede0","0xfcd69b45f3620a56dd5d6bd166b95a69d6ccd29c","0xfce0413bad4e59f55946669e678eccfe87777777","0xfcfaf264c820a06027a8e3f78761829da5073965","0xfd432fde40256cf0afad2a9353431c62f0c0f8cc","0xfd61f2b20e34f06243117338df3f29d8c4657e20","0xfd8ee0bb372c48e1ecb4157d41359e7d70da897c","0xfe368b52cd9e985ef47b8113f2b4543c5222b311","0xfe8b1168fa27a2a7b0228bd30cdf2dd3a991e118","0xfea13addf5d01e63a7a015db13f691b6f86227fa","0xfeca43c1d638e70f7ab76df1db480419eab9fb28","0xfedde14ac70ed6aec56f955d204355196427e09f","0xff2ba16fd74389907f4e9ad808ef6c6b25e7e5c5","0xff36a97ba095c69698f8e1059b17b9a061732ef9","0xff4a016b08caa88cb42b72264ccdfe6fb892efe3","0xff8f6f4accc8fe7db1940f9799e4e7ca4f476616"].forEach((function(e,t){r+='<div class="address">'.concat(e,"</div>")})),["0x0079eb5d976cc513b6add198c8bb7fd6f47f3ded","0x00839b7f009017966ad34ffc656eb62523d304df","0x00e9fff5d7a833e83cd6eda4e73443ddc48abb1e","0x015b9422b7822a3913915fc84fb710cc56a0dfd8","0x016155b2dcc9e4828c50674e3e24d488f847e3b5","0x01d7a98d738e571b48070ec7a84d2029e7fdcdcd","0x033836b8c7c03647621fcc2d84ce8c0c39a26b05","0x033c831b6701779f6c503471901c6b07ba68b5d0","0x039fdd26513f05fdb56b45031c5a26d201f2d748","0x044d943766c5370d466e666ddc80fb160a800015","0x049808d5eaa90a2665b9703d2246dded34f1eb73","0x04c1c15a1554891fb2dd7c4939e7d95d06ee253f","0x04db4fe56824f83692cec5776f0779f27fb2e047","0x04ee321ee32021c6607a5e6421b3e09008bebc08","0x05377e8833340628434ef89aa74464a4e10ff2c9","0x054f2aeb6195dd48990c928e9b890a3feae036ef","0x05610f81b1c013d93395a831a87126760650e817","0x057e951678c8344f95628da6b5f3827daf8589b3","0x05bf3be79137365b0839254b7b47d846edaebb2d","0x06b6f68670f26a140d9bfce83d2bd3dea672e3ab","0x06deeb0fd82ee006ea10433f1e024160619e1422","0x0743c080ab509b7f2643db1fdcd591e0d6051daa","0x07628cdd664ba384a3cb54462004378025611da0","0x079fbccd9f57c38060bfd02ff17ccc7be53c23cd","0x07f63d15a3843dbf0284359e4326e66a6031e2d9","0x08066b76c7513f1dc2e405939e215c7443231d7b","0x0854301c8bcb7de95101c74ffc22b145015e7a68","0x086ee1beb10153972922fc4328170ca52a271ea8","0x089f2d56d39f3b79bd1a1f520259a36896eef9a3","0x092bb2154499d79ff6741374dcecae3b71fb767b","0x093a7a7535701990805a768de29e2f3a4473b1cf","0x09ad2713b8944c8f01997c6da240baa035c8ccbd","0x0a25d60c7294d5bae7387f3114fc30c1186e6690","0x0a69420b3ce18e166d0f7f1d8224212a19b251ed","0x0ad5027bf85c2d984f722c90e0e2d99f960a0d89","0x0b24dc8537340dcf4ff89f522f32ceb6395ef396","0x0b954316dae976ace03382bd7a81c62ead656c1b","0x0c2fe3108f1f5693b796f054843aca2b64ef5b69","0x0c801e6087f05291057147376ae78aa9e63b2300","0x0cbe26d99453ae4a72a9343a697cb4f8669c6c80","0x0dd3d2c271d7d534138675db6ce1092d4d59a71a","0x0e03dfb967edc8ad751b5ae31d27547b9b07b5ef","0x0e7b9ce009b1014cb1fac27a69e46b2eec84da38","0x0f08cc35b12d11a617756466b20354e4a9be3a77","0x0f10375515be5bcadd6782353bbbef21d0ce985c","0x0f5e3c3c9f55a2557da91908c2aa9c688220ecff","0x0f651ec1d3fbba195e06478dff2bca215d653e63","0x100447360303a97c980e758b45ec96377ceb1f24","0x11ba1f1cb9d2b13de813457fbc82e7e17b00809a","0x11c54dc71f782094c2f059684cf6066589d3ba07","0x120d59681f45eecabaf9a3ba0b4c8d6865213902","0x1259ba53592708adea6eecd8eb0b10be0d89cb8f","0x12c6c468371313c9b1512bdd551802635e94e91a","0x1393af6536e05754d4e6488fed320ccf90f10be6","0x13d2a0bd700610f27b0ce3c0238b9563206c1c10","0x1546b970afc85bb7448b2c50504be0c4640408dd","0x1568e9ea15f65a69b12e0ff4df3c21e747b51037","0x15c365665da4f503d9e6c0b2c79aa5c997347aa2","0x15cd1328b9fe4c05a9c668c2ff68a0d5a5d308e2","0x15d3ffac9b7d5dbbee095910db6380040222b99f","0x160de5667b9e251f49847fac351c16caa44f3521","0x166720672d63ba30a10ba606064e92d7e552f5d4","0x16eac9445a686ef706b146a93d490fa28b16b48f","0x170d40ec525fa42fbdbfe11495c47c5328090f65","0x17543a55aa8bf29b3faff59e10c528951954c7ea","0x17d070ce7da089805d10d6099e1a22a46bc4f407","0x183de20c42cc189127acfefaa87ee7c49168e294","0x18c2d34291326500e07eba84170add0052ca000e","0x18d5ed48783e4864b94eb9c6bdc042d96c46a063","0x1a23efea1f7be73e1f36677507e2d3b6a73fe9d4","0x1b44b67def7e5264901944ed940172a9c8829453","0x1c48ca819a3b2ef555223de007ec85eb15c8a321","0x1ca71ab71833ed9ff7478c647860a90e0a08c3f4","0x1dd0bc47a0aa714c7ccf9fe1c8f4070e085bb98b","0x1e214b2be566cc97803761fb695d2f707d360643","0x1e95cc833aa15a03827c77ae605ec943764c39b6","0x1ee5c736b3e81925c0680534527e86b71a3d5970","0x1f512addf482b8a3fced3c3ad04991b37b2ac5ae","0x1f9c2618981f3a51030a21391803f98c434d5c27","0x1fcb50404bbee6ff9b8383f34c6e174c8e86ff44","0x2010f0d8b26622f862462f76a92bc02c2ab3aca0","0x20564d3de7dd48c7fc717aa8f9f0ad87ddbd6063","0x2063a5502bae0ceb7c9c8ab8fc27b61f3d1e19e3","0x20ac54b286f6787003869b1e2f97b79fcdcc5bce","0x20ca412f9b5a6ec52ad2c068f619362c6c5539c6","0x212139306aa39d8848b055857035a463c2eb6bf6","0x212306e9a787d2b74b2f3ca198309380a5a9d7d0","0x21c9664134144955774cf08bcf934f042589eef7","0x227aece8066cb077bba73e08303ae091c652bd01","0x22a2964902e79ce63bdad987e4fc6cde6b7273e8","0x234d7c0858632fe0133a72a227bbd00159b7b5b1","0x2359e2a063af5b28a011483af708053d5ef8f24c","0x23c6188a898c16fb14c0e19b40be89e928d676d2","0x23e01e05aa1376fa3ac83c954816b967a7302891","0x23f9a100a25ebe03f663f9417ffd12428f711b15","0x2477a40f0e5419ef9bbcc8cbacd23bef96588179","0x24a2ba747e099de4099e2c10d4089b45e8522f65","0x24ab430a4e3ea24a685b01ecc67fb694b5d040c9","0x24d1415cc5f130f5708ce73aefa34f436fd219ea","0x24ef6a325a0e7e9c594368f50b0eea99f51adb76","0x25679e25318512b89d1376b18e3f9561daae1069","0x259D542b3507404Af5dBdD90432A64228639452E","0x25b7b8e65c37535a657e2ddb72979ed2c501cb3a","0x25c8276388eaa942f8c3ef565befc91d0d5489d0","0x25d98329345e90a9edf85ebdcc30c052fc173fd5","0x25f281738e3a5c4e44f579ee43c65325098c07c7","0x2615d6323a425a3b851dcadc2c2ae22272028dd6","0x2631029b7f7019ac7a27a7b135493923381cc0fb","0x2638dd18b3005c6edeb077ac9f120317f18fb81d","0x269fbf2aa791b17e56202f09f83ff11adaf78387","0x270f6f2bd050d0349f0ad81fb123bb0799a7d6f6","0x2755f07c0619876e01733338625f67730f6ff26b","0x27b524858f4646150696d5b8cd08c4d058e9b0dc","0x28141dc9447521ab33c84cf9257a0e46c073f794","0x28e672a29a5a059f5e7b84ef3c11e4d1019ac540","0x29bd5cab96ba39c037a4a01f78fee24362212503","0x29f050ed2a2644bb31837ac60e7dbfe64d7b620f","0x2a3007e6c55c4a1eaf68018b913181185b7c3e82","0x2a78ae3d2c048794ebe71c56984552483a35201c","0x2afa376e98be0b2d386aa09ffe32a7890d92fab7","0x2afbc4356bf863a029ef58875ad00cf6b8975a52","0x2c5b6570dcecd5b3dfdd62855cf94359d1b2a3b1","0x2cb34f0bf904f588e7a794c52ed46c552b0fb38a","0x2ccab11adbafa8fd2a04014dea0ee138e14fe081","0x2cd1de9846dd8236e6c16ebe232b7ab6472fa6ad","0x2d4104788d3776ea60ca32e8f87522d198490605","0x2e3a13e1d4c78bdf1904ada6dbb0d1a2987f1440","0x2e7552eb0526e08f0e6ea3d28f9296620bc0c635","0x2ecf0b742d8d9e54681fd200a0e55d7d57b00a87","0x2f5947a91da9dfcf6cc2e5a2a60ae087a540c3d2","0x2f944e3cc9714425e43a6f28e71d039e58955750","0x2fd6f509245ae085945d9710f54a955c06c8a036","0x30da457f284bf5e72d9bd5a0866415522819242b","0x30e40e470914d6cbc38ff19c2ef1d1467731e988","0x30ff41ed5cc8fcab63265d69cf43a884b6c3ab18","0x3169f86536e378110a8583e9f3834ef08e458ebc","0x31c79acbe36f88f616842714c599c920f9a35b6a","0x31e11bce49e482332627099d5ed2e455e28e6869","0x3209ef1116affca49d3a3f646f5921e9224d0424","0x3279132306c1fe366181a58509172fab0b5d7cb9","0x3288ad9b8e7d32f698ac35de51ccc18373e33a85","0x331d936b49511a81719e1dc0b6de78258ecd85e1","0x331e09e1efb62cdb1b9f9a7bf92d6f28ac00e856","0x33596f5b00c5386ebde2e699fff370095f68053c","0x33b39338577db9b513259580fc22057351fd7da4","0x33f8c8016cc37a7da4d2b699c0f008d6c10beef8","0x3439735eb520eab31a58b45aae98513ca158b7a6","0x345904891a163187784fdbf6703720586c44ae72","0x346eb1024c756b5eb9be31a04e29300a8badf77c","0x34ba976f202cc700586f9d12aa11a6a56bbc1bf7","0x356fa5c2b6e217b2c1d42a309283fc42561fd77f","0x36efe492ab7e91c17cbcadd94097d01559379c34","0x36f42dd3e548f721623e66e496a57c3f1fbf5640","0x36fcd9f92d79b45bdcef267e834e276f45f0d27d","0x37508968369fb97d76ed89ce18027219f65824b4","0x3780220f9869ecae387c3725f89679dc8ecdcb7b","0x3780d4b9977122cf52392ec07d5e5269dcebd479","0x3783e4456974b56f9dfc9eb7704342cc008bcb94","0x383f9e2d3c462f34d9ebb6c674d06bdd7c9466a9","0x38630f5c0a85fa3436f23d3af4a27763cbdb113f","0x386fc8c61b460d1bc73fede8315389ee2cfbb0c7","0x38be01a71115156edec961f893b6fee1d3ad71d3","0x398c70ae80129ed503f6c73af5c0e5f0c7370564","0x39aa32b0552342201ef6fc0667bee4ca46263970","0x39b0b46956638d395ffb44ea49a436c8ca438cf7","0x3a2ed3fcb00814e325eadbaba88bb903047c3fed","0x3a31d9d9120013a2f1f55ce45068ed9ce4795e9f","0x3a41c922a3ed3c9e6b0a4ec1763fecf4f0c15d86","0x3a8419038c5c72cabee30696759146986d95397f","0x3ad2a8d7301d301817cbc7a88000ba729f324a8d","0x3b061104d9e9da05df48d73c059be04c0024590f","0x3b5bee36fec63c9eac657b99f4638c72f4e51357","0x3b7318457f091965c488dac7e58559993e4971de","0x3c11656a88646be05576c456cf1ffeab690c17fa","0x3c71ebe6840d6ef501fed6221f5e4f45c062c864","0x3c89c28de5148377e7f806bb12677d6267159ba0","0x3d03291f68358cd14d0cbe850dd14465431200ec","0x3d62630d9e1cc40c168ce7acd334c608276cf11d","0x3d7371bf02fedc56e742baae3c09964827edcf2c","0x3ea911f1a11a1894c73a7efede30328e78cf9d39","0x3f3b64fa895e6e81bf7d4ed39cfd12ecad3d9f33","0x3f8ceee4f53d8ffbabba13e3e90334c6702a8440","0x3f8ea8d62e117bca3845760e7ea75e977df955a4","0x402824c43d9b95c3337892b4d39f4b222a46cb7f","0x41b670b34523b20f58d6b1395741425f5fc1edc1","0x41da60e3fdbdba213ee316635d854da4ef77f6a1","0x420922832ee49545e09af4896d462fb0501066b2","0x425317b10a8b81d45cb56dddc0b15a637f218858","0x42dc8eec314f05c81c495c6f8ce8f8dd6795b575","0x42e04be7efea3e152347a78f510a51e8f4698f76","0x42f1605c24c38def2943142f3cf03ea4f5489b30","0x43f5fd8c7e64b4092be216ff5b3cb43231698f1b","0x44df5bedd373e7ae7e93a8e4d4122ead2a4ee472","0x45aed24e4c2d1b523a79dff802dbdf596572cf50","0x463b0e723cc5bf3623dace1f692dff52ed49ed52","0x464c07eb99995b44b8cb67cef702f59b8ceab593","0x46a7552be51f4e2beb6c595ed52711e4c5f7ba6c","0x46ad7a9fdbd2cbb33f3db8b76bba7dfde88f941f","0x46ea7f5c3d03cebc68915a1acdc92f6f56f23bf1","0x47747a55f23e768d50b041458e18cdcc35eea833","0x47b4d3546892237c55bcf9078b10b6be5e922551","0x480a2e76ee81897711892b75dace053d22e1c290","0x48698b507747eef21168e44b380e2619191ab130","0x48788252ec154730eeca50b0cef6dd43b757f9bb","0x487944d8d5c5ce50600967d9c47982e73708de59","0x48d7b3659c1f93562205c97d784fcd13ea940499","0x491025393407ed348ca9ea841d1b82cf0b369358","0x49b70ebb91a03b6b67a89e383f0e1eb77de4fb0f","0x49f9307536739580deb16f2dae82ba0d25a23b47","0x4a05776d37b755b61bf1c6f9d681ae45bdc43f26","0x4b0898b36cdcc9d0eb1ecbc87ba9ba066bc04411","0x4b8720b15ba0da6e4b223617a1d15f0ee9347d38","0x4b8a45eeff56ed07aa618d15f852bc23b23c18fa","0x4ba245c3d3ee8509e7470fa86ef921ad4a8fcd58","0x4be8086ce43a04e93e919be274e3cd15fb64d762","0x4c11b4e28ee88b17e11ca0c0f72fdb1f156a3ceb","0x4c78a07c85a4ceb0357eadaa6d4eba37edbf921e","0x4c9929111d9e9f8c399c07d7553a1c96b9830418","0x4ce7d126dcb606008a711b46c2d8df50d88e4244","0x4d0d19eccf3129557a537e90437a3a627fe50f1e","0x4d14f48f340e62f75b6e306b73d614a539a95bfc","0x4d17247380a4ad216fc1e05cebbb42f5a818d193","0x4d58b698966814b9ac52211aa196b08cf3f06327","0x4dd898b16506ee60b72ba961927cd2ad26f263e2","0x4e19646b2744021690f7da584117b083dc73a412","0x4e7654fa749cd589e05b28f64349d03e2282bc06","0x4ed789996d3c09e230ff3d5dc90b4d49b3b839d5","0x4fd4b42c5c17aeb9fbf36353eff9d4efea032d1c","0x502e7535b1e7a9698351358fb1fef10844e82c3b","0x5035cc6e16f6bce951807ed33e68cca951cc2b5b","0x5044911aadd74207a6a7b2950e008b3f27ca7ca9","0x506dc121f906159c9085320fad8c5c07a21fe7fd","0x50a0f8ddc966afa76d39a8c346a2d3ad9e591d1d","0x50d3867bf345b27f2ceb812142408e5d645bd87e","0x511f0c12772479204968ae6c988984bc08d7a2f2","0x5173afb1acda54a24fec5d474ce5775231802670","0x519e50d624fa85c16abea62fee7f5b233d913697","0x51c0ac97fe85b5bfccb7f631b49a90b0cb75de24","0x51fe1f2a9695e9d52d8c6743a08781c64ba776df","0x5257a189c782c3823791fa6a1aeb62b154dd188d","0x525b82244b74098082ac20916bc7bb592da3d96f","0x52c6d2a4c77f057c327816b2f5c6ad8c8b325f27","0x534be5ff046ce5e5c156090b57f39f37f73b1624","0x53a6bc4ef69da237c728935128c977af3f57020b","0x53c13001d390dde50703482c855c0ac930cac7e2","0x53cc62fe9d7d0c1642cec459819a37e6b095c6df","0x53dd188dcafacf67c98ca512ce1032031c7df49e","0x54143c1e28b2f54a77ea8fd046a939e3ea808d0a","0x541785b3c6ee75b4f14d95319e27e37ff379fe47","0x5447489df2e2ce3c7d74730fdef1f5212b2132c8","0x548bd646d0d2c5c7f79ebdcdb74365a5b032b1cc","0x54a401769c38281a79b101769fd5543260e2e8ac","0x55291a528b04b9f366e38a6ce1eb965fc5d67391","0x557447245b6aaae989e5191f13f037c8c8f63e67","0x55d8bb862f8084cc6264254ac756ffc7cb6c643a","0x55ea12c4197ad3d1b0ddb7fb35ddb7d7d53cb739","0x560c1a7dd6dcd97855f9cc4ead8f0c74ddceea7e","0x5675cdadcdf34bd1e52049794b5b70a8cb8cc69c","0x571b90ff189c2b9b5fd01baa88bed41073f388a6","0x57a01ebd0449c08da3dbc9531692bc0244291b57","0x57dd7f7dec129f623eb9dda3acd900be2619200f","0x587a533ae239db6d5efad5b9906a4a4b2803951b","0x58901db470b92c9e6bf25cca25bab50d90733877","0x58b02efbb922d6db49b1642e1ff9133300d84143","0x5905bb9fab89822c9496f46542334e3b1d20e853","0x5992fb8c5ef1e22ef742c5ebd681d693a7e50547","0x5b2a8b9867628cdc1ff5b285204ad9eb3f58574c","0x5b54f9251ce57440628f3a37ef8510453bfc1bb8","0x5b769ec4eca27386c796a075ce19236d05fdc910","0x5b97a6f636233394a59858e3d4a4e1698739e20a","0x5ba1fbbae044907b22b0f01a566d30a2e3401dc1","0x5c9a360dcf17d751d519daacedef8336e4780d7c","0x5d12224d75f9ae39ccdfa805e1a81dc9d64c865e","0x5d39036947e83862ce5f3db351cc64e3d4592cd5","0x5d920cc69b1ade6822c38b3815a45a4600b2cbf4","0x5dcec3d1410697f7d8d15378d39ffac86120c126","0x5e82370cd816a88628e0029db4bdad227bce845c","0x5e88f89f428495458ff99c411ddf77e177fe3f62","0x5ede481beee1fcce692baf31bdaf96290a8142d3","0x5efcf030649f1475aa93ef4b01ab127583238795","0x5fb0058280611b57e7fd96dc4ba3616bd0d29806","0x5fbb91b6f86c60f5b135e3f1871c0cdeb4f810bc","0x5fdac9911566521032b26f4466382c29ab74a3cf","0x60848b288b4f554407ae149656dba63909ea0326","0x60964766bb471e0c11dc763d1e603d2ad45f675e","0x60e2a272b6233d4fe08908bfa6ea44518501732a","0x61858bf584fc67bedda2cd244e9dddcefff56ad3","0x620828155203a098a74a23d64840da9a6083b9a2","0x62300cda14b11e06769fcda7c55d42a988489c42","0x6273ca89c39c8576611b3d6e4737e7814d81ab21","0x62b242f0365931d4b3441c745a66cd337e7122fd","0x6325246e88510d64dbdf10ca77095f06c5ca8735","0x633cc03b8f2b53d65dff0c20fd9ac9872c5d55a5","0x6359f52241d07b5dc53e6e38d42f2a46079ea535","0x63ece9430f424661c0fc7351ad6e71d4281b64df","0x63fa298d1650c6f4b8e856f8917c56481e9a0c82","0x64290d1a6af37b74a37c5812bb27fe18af4847d7","0x645b8d820585c8a3bdedb8edaf86ec6f2fd0a3e0","0x645bb87363526ee8000c380d83a602553928b4e0","0x64e624a2d03cad550fee9961bf1bc6a7643efeaa","0x652773ac0fa1f6c87370ce5baf0c72d8f81df00c","0x6527f3e9547782a9a368925685a81a92d97b8b96","0x6529770a5c58ca859558670cf98171f600c48783","0x656fa6bf18a53a24f62d29f69c5005d22d85c0f2","0x6657cddf937c4ff4ebea43fce9e3488fdaa8c12c","0x66663a76d9067cb005196fc11cde4758b04e3aa8","0x6682e331c36ace77d022517b2e78bb1bd21746d1","0x66a2c7b0d4da7e699f6dd27f89b49ab15b0a51e8","0x66ef83647fd6828e51299df2957b6658e6a1e4d9","0x674751bf36ac637bf53f342e7b39e9e3eb6990d0","0x67c0fc4b0490ab7e76c08c2bbd30fac0059bbc7a","0x67fa427f624be81b7ccd0ead5ef0f6a1a4d62bff","0x680635f33646c3BA83E6Ec9D7be500f804cDCfEe","0x6814330fe3ecf1e81aa91660b6e75d10a17ef985","0x68aabe3f2d4d6fba703f97d06b8ba12693f97833","0x68bd992d5feeb3a3030c128a7a5b0764ba152a33","0x696248b0566eedbe8beb4733a68410f4cfbc83cb","0x69eb97ef47f711545a9ca79c8633298661c80dad","0x6a511b9404f1177b2489ab147ac45e151df0c782","0x6a595f46a215b73341adcdb98f04d5fa442857c9","0x6af58ced7d0e5162aae77aa05b7eb6cb026ef60b","0x6cca27411c2bcf026d5973f98de573e49b6be49f","0x6cdd6a55dc9b445afb1252fa5336db1e56b8c1ca","0x6d0dc00d2585b76e1081b8ebbafaaadd81dd6ed4","0x6d590febf12912fa7c25ef26347e9a0c869e88cb","0x6d88611f1788064a28b5cb79bdd29bf587879516","0x6da7a4bf934a7d3f8b188f7baf73097fee1a1774","0x6dc330a7e965a1836a5038c26f13063cd1a9f8fa","0x6df98843544a45295f91a0585349040d3089059e","0x6e2918b14fc8af5581ccb435deae586674663f06","0x6e4d867b0b9da23d0b15e28d1ddc8f382e9e3a5b","0x6f3c97e08a8f472426ece1ed944d4e91356eb3a3","0x6f94e44fbda18b57546342dce8f05f56cc957372","0x6facbfaf5901c01102798568f7fb71b2a059b651","0x702d0fb384d24580e71ef101a4e2b72f7b1f2ac6","0x7038e5400cd2d26a3bb48a95551bdeefbd483ceb","0x7071a5df87a625eea6c25c73dc2d4c51c4d3defd","0x711102ee2a92f718b5d3a807f1b896b9fac7a2a3","0x711c877958e6a6476c1607261de10778db5fa074","0x71e466f31cfef866d2b887b306c883cd7d096284","0x71fedc462ae56223da650365780202ae0145f221","0x723b2494dea104c29b410d7b9ba44bdfbc57c222","0x724505cea9304baa8eec6bf4c7da2c93e0969031","0x7259387ca93f2d26c1c31d58d6c39002b2dbcef4","0x72b77f235560388a28814a6321cb638a39fe88e2","0x72be0aee75afeb770ae7565838fdda70222713a6","0x72f3bbf44d853bc8839145646bb3b6a76a614fcc","0x7333e0a08beacf70f04e43edf3eb86a8a053f64b","0x7369155c75455333e2995097980bd1c26416a7aa","0x73c92bd0f8cb887f1bfaf4b821ebd7bc480bf3fb","0x73ea5acd464037330004ad9b50b3006ef2ac6e2e","0x745207d4c3b9fedc386eec2eb5a6966f27ee6854","0x74a1b835529d251637b4e48562abbea146f913d7","0x74ba331c57896f84f0c08845904a67d82012bac2","0x74e797cafec0b717ce93cccc31f874aaae988d43","0x751146f9e2fe39ce2b1e15098c79ad85f600afd3","0x7528d4cd80e58c20110cf96b892317b318cc1229","0x756e68f85226e17c2ad9a36f5f3c81f88a01b20d","0x75b0b49e014ee30a990e302390efc1bdbcf4692b","0x75c63fb3e4329f330a5cc178ab2f50e2bc9736c1","0x75d4519389c97746fd57645b44d55f9034cebd27","0x7607aedb36183deb0474037b8783f31d2026a36f","0x76b3e3184175a690a41b8a3dfedf7bde382ae5a5","0x7705e2ab68410af6a7be1f5a75d143f5455235d6","0x77542806ca1574a7ab2eb4b791d57be1932d1b78","0x77641ad6a12bda8a093a8b13e026960ecefe52b9","0x77a8bc96350cfc939dd7e73d995417e0526f189f","0x7894da4f32ceb6a9c9312d637af12eaa2520763c","0x7913cf6c639760319e477f78c3ad68e463fed453","0x7963097647906f831ea7e0509813fea903754493","0x7971c1ea756aeda3e1e1fae6d48d86e5b6d95341","0x799a478d13fdfe58232c4d592f84ec5f52ac3427","0x79aa911b8f1dbb6e5edb5d12e9bf8365cc6b9e36","0x79fe7b208422b97a83abf30149070bfd7b096160","0x7a3dadac73f44a29ca9f93a28ce134491851f9a1","0x7a444a7f4a60afc4f4ff6c8ba158788f1f587eba","0x7a588598ea0c589adff8f873b7f56d82f3873f10","0x7ab73a9e3c1fad2ea01e71caba34aba35002de62","0x7aaa2b547bfbf5082b3111d6f84c388953f7912b","0x7ae07f03d2a52396dec1da9f27f4b7122a68fc24","0x7b850bb3b7ce30f60eaa92aecb2154f180c46590","0x7ba80c4b38e2bfe6da2649c4861b877096e3c042","0x7c0ed78ac57c08199d3505ea8f0863584103995d","0x7c917078fc1eaa17de762e2f87652fb75ae8e190","0x7def7c46d3d56dadd8e5bea7c3d62b71651136b0","0x7ea1ee5dd03c7109332e643be2e96dc82da5689b","0x7ea4066237ffd02759abd20e9cf6f8768b2d835d","0x7ea715eea52104cb3d2f6b8c5cb7e8e60cb7da3f","0x7ed33a1763a88eddd8e055fe974f812f82ffb5c8","0x7fa6657ca88a9b27ffad59acce4280ae84e20067","0x7fabdae9211072af08e315334cdbc84762b43e01","0x7fd14822f93880a47aa6578283de50573e7a9428","0x7fe23b29085dbd51aa43b6000a38afb0f10712cb","0x7fe595bd221c29281b32bb1d8c6b51e7d8688e69","0x800f10c9ca6699bd17f445e7df69e3fc44049770","0x8055899293172b684d7e399b5e226277e826e1d4","0x8076ab95158ef060fad1a817a7dd2790eb762efa","0x80d2537b611cde21d0528c8ffe9e14a1e6372069","0x810a1435c57f5eb24604bce9585ddc2a20341338","0x812be860ec8aa47cd4109bff840b15cc5034ed53","0x82422fc1ecc281381236d376cb6ec9cb12c2b93c"].forEach((function(e,t){n+='<div class="address">'.concat(e,"</div>")})),["0x829c5b4af03b5374d39626389b3814603dfca69a","0x829ce26f3d97c96ad1be529957e3fef90800e471","0x832376f39d77fc8f33e65042f685e80ec25e7353","0x834c6238ac0182b26e3d59f6a7a7a430f3dd0d26","0x83a1279d786ee5794ed5140575c2e0bd6d5073b5","0x83bdae685001e4699050742f03e2eeb48498b408","0x83ec7ec8284d833a486ce2c8122475667eb5bc59","0x8494ab34ad3d308825e1af680e402ce788bec7a7","0x84b676bcd8cd46e4b7668856eb8c35887e104b69","0x853e960a347b24143e2c7d317b5e356cc987a05c","0x855b21503daf4518d3d5153993ed1152f0f1d438","0x855bea49cfff9fa595482bf5888935fdb851bc6f","0x858c08e7840ab8b559f6e131e28130e5bf8a4167","0x859fae6bb0ab6d0455e0db42f8bbaf80790078f7","0x85d31c01afac54830ccde094fc4a2dd429167890","0x86096686bbc522491ffd5ad694929d6fc0da952e","0x861cef0fc4b2065d60e41ea12d03523617cc00d0","0x864ca497e15c9416af8b4235c8d570a86c857749","0x8671ecd4ec55149642b7199d3a3037def5ff36cf","0x86c4b6000b6f5c8a213589d7f6985d77ff1cb2ad","0x8714a644abaea27bf1c8589176a6fc0629fecca6","0x87364e1bf02ffa328e626271afcc12089917c966","0x874725ee43dc646a0780dcecfb0ac7bb05e3d887","0x874d7afa627c52e42aa64cb270f76645151cfd82","0x88186de0866efae2d784152568eaa73c64ccc0fd","0x88573b505e2c588c7c14c66dda0264650fd774ce","0x887601a901bc05b18c1c9a92d2c260bc130ee568","0x88c3cdf79f47ab7af8efcb081771487ff13bf029","0x88da7e82eb3142eb7e5d6d437efcb9a44b27f21d","0x88f009c0882b3dec0a192011d5314a641e2adcff","0x8947a685e1c2934b3dfe45659331720573d46d5d","0x8951aa74800cd6d21333d285f0e4e203feec3f36","0x8a013a16d19e447c8e455cd836c6003b14dbad35","0x8a7122101039e6a1464a17cd54007657a91bb765","0x8afea1222b9837e18177be9f271b922e0cec0c9a","0x8b36e7e37be6e10f7a24b0000b0602b575fbb54f","0x8b3c22a2060fc0667e4b48ad1801bca7a7d1f067","0x8be7bb5c6146d4d48dd50a22d27cf065e1aa2dc8","0x8c0dd33aefa9782acacb7f2bcfc813a504322109","0x8c475e667aa6c90a672c25bd6977ca6efd75bdcf","0x8c85d91e649917914b7aefd38f1aa6a4e4dae3bc","0x8c8ae0b57a65ad4b7f0e67f8ad56caf975771810","0x8c9c3070b31f8a55c85b0ae8ca4680e6211233c4","0x8d1e946e47d8fc24bd02d56c37ca5559084de8fc","0x8d560b3ba4d4cb91f7e1ea69ce0d652893799ead","0x8db29161bc34b8786931646a96ca82236451ce96","0x8e0c7503bea7b4eac750fa90f680c0d0537f706c","0x8e6B6C79C09a7694B299AE96E84733a696C6326B","0x8fc4b234bbfd1bb03d70ecf1710b9f51f6d36246","0x8ffb5c1d19f771a0484652e6e9b408ff759ff687","0x901ee12bad8eacaf76341da658ac30d1d3f6b88c","0x90ae5e849127eb80272e3020f22276ce47768d49","0x918fcb82cf8da371bd346d7674e5fb472c4d7072","0x91a503945eaf68ff638da328931f460893ef42d6","0x91ea10899678cda7a155cfb652b3a8d9f3485a08","0x92045118179fda2f62c98aa3b64a8b451f615358","0x92ec90d6e692d39b189308621c9b12f33372ddb9","0x93860b13312c1d5f34d49aa67a6f009c03c0ceba","0x93bf0ab2cec1dc2eb3538b9dced2bb7207131a20","0x9401d4e05a6ee105707709fb075306623edc4316","0x944fa3dc8a4de7a048394cff541d81c4a161d82a","0x952377798bd0621266058b5ddb5e338fcfb460aa","0x953e94453c8f1819c5b8c0fade5f3ec7c423d07d","0x9553da295680bcb59e5a15ff582877f62e304297","0x9615f0b30ff3f634408a1e9b4bc3e970863a33b4","0x96bc70dd34ae6e58c4ab3df82f496b1a0d316aee","0x97077dfd4d8075b9e50d10688c22b9b0fd3248d2","0x978362165ff0001f95503e7e10126d940cbaa31a","0x9806d0ba3efd1eb53f349430dca7db307229879b","0x98620a02ab5313d78569fe2197271eed7cfd1d16","0x98c69c7f4808866481a31f3b5df50fda0bc004eb","0x98e8109f769eff0cff8c252768c2d794d15580e1","0x98fdc93da473c71fc5d00d6a9cdfb99c6f9502aa","0x990f7bb51e752e1670bdc0b8b699ae8e49d7c739","0x99c87707f324e42c2b09a4a7c5da78d50f42bde6","0x9a815e666c62aab21dcb3cb9542a610dbf420fa2","0x9af5b257b8209d6008a2436594df12a0f13fb747","0x9b2a48514415dfd388d775b3bee32e39efc0f1bd","0x9b83e45a5be4868df666ca29920877039ca532d2","0x9b8f6a9c9e6fb7e1f81abde8b228f009dbae8397","0x9bd3016a6b443942c1ef38f2f3af1d428c247120","0x9bd9b0f131b51d9e257e221f7c474d56b1f75afa","0x9cb081e573f0fa73b781c7982fb46bd78530d988","0x9cdbb3c9bfc043dab2cf10ccbb14fccb252afe6d","0x9d26588ef577766116ac96c7e6b3557c19025eec","0x9d5c4d02a741046d9ee2cdc76267fae7cd647ab2","0x9d9cedd04378dfa19bfbd677d6c605cdcd7e4adf","0x9db6aa030dc6f693e1c41af3e2953e8e1bfc2394","0x9dd3d075226fc201abdfa5c48571e3dbf16a28b7","0x9f14bd5754f740eb65c518290ce09197842cf532","0x9f4104e8752b759951bf9271f954966d0731d501","0x9f74b490fc968f1ef947855fa22efcc49d14f981","0x9fa79f61f53898a6b09afb1fc9fb7704ff92582a","0xa04f936fa0c4f35dcc6981f56d57ab034fe4a0f8","0xa058d180bdefe805dda2dc677b50df01010507e5","0xa07ae4f9e2d41715416ae074c7a6fe857693de4b","0xa0bceadcdd08aa74c2606eb720c1af8d89119955","0xa12c8eaced4109a836011d7e88a4d658e03a20b9","0xa199e33992b24041df113635c1a4d758286d5bb7","0xa1a6e58bb4a75be25fa601e89459cb8d896b37ba","0xa1a9b32fd542320f80c8216a8720a2a7b6c40878","0xa2681bdd3cfd2ece5a63dae1523d09cb0fd1c139","0xa32c699132b7f0ab620590f217344df44b85be84","0xa339ddf8237751e287bcf39ae53ebfcdfcd38cb0","0xa38d48a063b70693d557e88ff058d4e25897e790","0xa4152f3c42af66636ddafc79e11b8bbe0ae204b7","0xa43c750d5de3bd88ee4f35def72cf76afebec274","0xa44af547c564de2c3ff00a0649f744ad91f52e5c","0xa4865aa934df282c7c50854988e38d0667b36873","0xa5704fa7dd51481232d02996478781e217f14e77","0xa5c5677c63729c5b53ec8ce465e4b154b1f82f0c","0xa5e6cb5915a768aa26a1e5d0ab04141c86babd78","0xa5ff0af8113ab75b8c1200fcf5e67ba3cf040cc0","0xa626aff55e18faec57e507bf9483845323c23e0b","0xa64e9b0a6901b03e0c12febfcd18b21f2fb83d7f","0xa7353c8653c15333740b7d3edad8b412d140cce8","0xa75cdeb01f9cac60ccc07f2b7db3942a1b4c9903","0xa7a123b111ed601a90816541ddc0d6169eacd1dc","0xa85943c4bc0f269df2731f875ca3832f7652e7aa","0xa8627d272b0f355d43cd25d323a7e9b370dca26a","0xa86a7666f6b09f4709d94c59abf5df21898d3f0b","0xa87dbb982008e26f3ec39258dbb69344631274c5","0xa89c688e956bf4bbba9de4e90a9f1be2f4fa1be3","0xa89d5e9801cf0e7a3663b85b5861091641f739b6","0xa8e9e4d0f213736b463ebeff5b92dc8ef873f772","0xaa2498eb77801789ffd2f30aad906aced9cbcc10","0xaa34c2c73048eede963cc8089f733d37649e3560","0xaa638a5426ad0904cc52e161b4a4832168eb9d40","0xaa832692b3f0b065aabec2fcfbc1a9939f086e13","0xaa91fc64c276e34c1fdc39156e15a261c408b3ee","0xab4bf3dbfd731705cf9beb952774777b776debb1","0xab771667b15c7b648fcb18499fe56ce94a20ec35","0xab78af5d653f8bb2b0b33ba0363e492f724c05a8","0xac32faea1894d8063ad5685d08a5411172e4d096","0xac431575c4d47ee348ce6d271c7ff1cb64442bb3","0xac70fd3058022ca9e1728e229673ea68810f136b","0xAcA9b8AF5DDb180D6FF6E4BcE7533dd76820148C","0xacba37679a7903821c8493f988a7171b27a21941","0xacf164b7bc01ade3c42583b04635f52291a735ab","0xacf5b8f972aa883722d6b47b3c501a2283258f1f","0xad9f9194c68bd83250a534a7da574687e1f102ff","0xade076215b97847526c031dc3dc33757de62fe53","0xae04746a5134dd8596fb05c9c6358e82de138ba0","0xaea1005a554c0c78231d0310631cea1f0db1bea0","0xafbfb7bb2f09000ff9d43ae124db084d8e4ebee8","0xb089a6ed58d34aa53d4beea84b98a72244ea2ed8","0xb0c3f6aec528b406c8c54a0fff5f57a3a49faa7f","0xb1399f1489c67832a1cca4ed124cb3bfaccdfcbd","0xb14a2843fce9b592048d1ed7edd939b3b1dc36de","0xb1a8ea6b8876ce8685c2d5c5d61385036bcc965d","0xb1ab255d5e2c1c2fbebe3596629a513ba9ee57a3","0xb1da2bf874377401cff866b7473f2a4390dbd65e","0xb204648e4467fd2e5c07634b7553f42b542879f0","0xb210169f7b8c98b03c8ba442906b7f9d6d4462d4","0xb25e559bd09e91f3b28f787c17530b2da5d2b5fe","0xb288090e6b2427e2e4b52afb0590f0f22ea0f6d4","0xb2a51faddd831e31d8b8594f786a744be29733c1","0xb2ee11060806ed93eb9e9cd89b425f5e4c0609cf","0xb32533aa64e513c68b3c79bb751d10d57f4665d2","0xb3b0fffef3397d7a3e85751ba5e7b18684f75131","0xb3c2471c028e254b212fafed202df313d4c8e21b","0xb3f48a4ff10e3b21d9e6e7f99a15247866806044","0xb47343e384c878125f8de007dca361a32d3b95f0","0xb4af91e789b9b0ec41eef93b44ce7bea4eecf413","0xb4b04564f56f4795ea4e14d566af78da54a99980","0xb4bbcd6408756dc719087cc4b8549ca73f110a92","0xb4ffecb1aa10758988b83f7eee5cb3765c133359","0xb5d2ab0cae9a8c1aab8527120308b5b8f06666ac","0xb5efdb84b02844dd4fbd378c4abe73a680ec6a60","0xb65e6425fcba02008169fc9616cd597d6c630d88","0xb6a6a6fbafcfb120d5de6535c27db98432e8bcb0","0xb6f898ffffbf531d545c3d169e029cc030048b6b","0xb711c62db3a995afb5cc26c3197f7ddc6b4981ec","0xb71e2bc7592ca3c0aff6b59a9e61a8cb3fee2945","0xb797dcb569cd0f9583c16f824499096549b4bf99","0xb802914ba42591d6e03aa34e37ef73f22370761f","0xb82033cd4d80d51f2769fec8b91156b0ef1022bf","0xb8507ee604c5c7937002e3cb2937ddd430051f62","0xb87f9e0868918e8bdac47bc83c5a6253d6e56623","0xb8cf513f7df90bca3bf35d706567825c6f7fd7d6","0xb8d2349d9e98040b7edb7b359135e0173e0160e2","0xb9baf97c2db7f2e2ff0a1377b3f6e646a4b912ef","0xba99926be550865a956febaf4a747ffa0648797a","0xbc6540ae63301e1af04033a1a1c5e34ef3029cd2","0xbc7a5da2f8334ed07d3c4cf26f4126892d0626a2","0xbd4921f4e6109a6cb616ab7a549cf0afd32ef778","0xbde59da9549572047ffd196e08b963a38b6abc86","0xbdf6ec1c2fe3b4a489c38e8e66af0e6b4e350916","0xbe19425f73f843a6e97e97fb3229c337d5f1d64f","0xbe73748446811ebc2a4ddddcd55867d013d6136e","0xbec9f774f12b9b370e9922fb5c8739edb019aa81","0xbee96173c3ad333766db277ebf6384fb17085774","0xc01bc2728960decdb6633bc5d7f441972cd41caa","0xc068a2f22f7c7f95c60281ae938b6970dccb5a99","0xc0706a8f5c509186d7f4977f53d2637930ace388","0xc0d773ca30871fef7c21cedfa60d380215d45a3d","0xc0f7192815c6f81ac9c155bf1f56c89de8f44cf6","0xc1276e4ac0628e88501de7f4f89123bdec57089f","0xc1603a5085f46c4c6f8b1a88d7eb590fecc2f7b1","0xc1d5547d9b644016b889510e4a094c22b6f6f070","0xc1e4c83845fbb84dde84701013072433abc9ed26","0xc1f793803346bbb8090a084cd8c64e057b9043db","0xc2b07c9deb5c6e4b74f0dd9453c7fdbbbbc4cb49","0xc2b5e6717e22b28c824c7581f3c39388eb90e00f","0xc31047a053e1a9c1ba548792c9f3b6f619428986","0xc32b7438b3df7844c9ee799930a2224fe6e26426","0xc365dbcb86abbe473b286d4d0c1e290b77b28bdd","0xc3f2ca4edc2275e0c1f933ada41d6930aead88c6","0xc47c1e1c624654700b5141b5e2fd0e6e963d5288","0xc4ea745a21c7cc9e6e7b2384996b6b312db8c7c1","0xc5822bA39771C774759Ee4Cf9010a6084CCC2134","0xc6743aedd9abea181bc81d80e6af4e1d00802651","0xc690e2f703c541251d0ba1aedb00993ca29c54fb","0xc6e3879bccf181d0c3dc4d925eda6afaf2b1f53a","0xc70136f393c147d9901c816ac2e92de7ef8eb43b","0xc769f2eef1d247b70240d0b6d243be9a046ce015","0xc7754ad9e918f2ff55520ffe76a7c358ec1d2b21","0xc8495c741afef91a558abf145afbe96a83ffee51","0xc8b122c3f31438f6cba3841b6628e790300c6233","0xc8d73e2c225b2291d6697f1f73a81e243cfd9864","0xc90f53218b8021d8369f57084fcd78f5c37398db","0xc92baf0d320ce18af4cff5795dbe6ea3a40e7c01","0xca04b1d80f0aeee157b341f4af6691eb4f3b38d5","0xca927f005b5b8d333351c481ab3246689c9533be","0xcb802f085a02d604e65fa9eff1c5b6485072fb9d","0xcb91840635ed62cb71579fc55b4b0165055b4f9d","0xcBbE207A43Ea8937A04d2f47A0FD51566C79b0e0","0xCBC83a731E2baF8C26507EF952deE6889770c6f3","0xcc0b1e3d129b54595a3e2096c1aa16e2835ccbe5","0xcc158cd1d38779a5ac9c78a6237d797fb9a97cbc","0xcc6552ab6bebb53a1a13da97100ce0bfd4074214","0xccb9dffdae3911889543e40ff93b72d91b0e882d","0xccee13c19efbce3449c1fddf2733556472280954","0xcd0f5386305a667cf9a8e0ff6b1c98ebd4643689","0xcd43e0c21bfa737afde548af3a80e20eafed6a04","0xcd4463e40b3d2858cfe449cc5ebb6eb53a6303d6","0xcd8e2ef83fbe32c81e6b4271dd39a18d03b9306f","0xcdc2c4b5007baf387a2a09cb2b8e43b38c447492","0xcdf80ed32e01bba48db89595ac040871d1808de8","0xce48bb7958253a5e8efa14b6775315adae09376b","0xce66389ac799547e77a28e1f32da38b491ad4375","0xce79d6f01e83023613f92c6e98b45489918a030d","0xceabed0e4df7f38d1609bbf937bc5ca30f70aa01","0xceacf4230c2df593e3130b2d73b614bbb6b087ff","0xcf4d8f04650764377d04277b3b07ff60bd70e13b","0xcf6fb2edbbfeee3238faa4358f12f1e9c0a47fd6","0xcf7538d392b9538b85a4b4cf10499123beaf9e50","0xd102414e9630b4388204ebfbedabb870ef88a90d","0xd1036faf90c4503193d287cd2845704fd1ccce0f","0xd10914b85d585b5fe085ba81c8df624777b15a30","0xd116fac0563ab7785d8bc6ec5f676b36b0f9fad3","0xd16bdde3c4388e90e3f640896c9b92f28a71bf08","0xd1acde3e5c7051ad407a12e47192f7a16b3052ad","0xd1ff49ff845ffbf1f6a1ba8ff4c7909a38768986","0xd206b9bb19cc50323e964a18df47d37f565d9dcd","0xd2725d2b609c2a090a8c358caedae747f1f42a53","0xd2a414c79fbc3ee3d8adc8c3d960ffa32ef73747","0xd3081c8bbc56ced89de090daf50565a4c5fee21f","0xd31e15811507f9e6308a0d9dbb3b0aaa60d69c4f","0xd3c3c4ca6d1a136be570016f6a7c283559e3f654","0xd3d8e3e442815a89023a89a1f077db66bd7d04d2","0xd3dadc71b44d390b28f54e1faa7267cc37d6aec2","0xd40f7683b9bbe7547a70b44603ba265e5d5df0d0","0xd4aE1C3Dc64371F6Ee619E328EF14a70a9298d04","0xd4c88a429a2ee72c92edc9d28ae2f77120e9f67d","0xd4de9f0fa7c40853146ad4994bb3a52615ffdb40","0xd5b9595b49e6fd3bb639ff0c17e64ba4dd665f12","0xd5caa8a47bf5f9a4a6b89d8306a9505ae8b999db","0xd678e9825e0261838b51c6b1952d4a45967f68aa","0xd6c5e5daa110115ed6fc5b62d7ccd2433ec63c92","0xd72d5f6c53e480abcfb030adc1adf25debe156f0","0xd76b29d1995200586aa58db8d715ba1214c6d51c","0xd87a666145b589f2a604be4a05eb20d109050d70","0xd91e89e68871e04d9ff8f56299810c1824a331d8","0xd975f2bf87333edc2b5510d2d7b65eefa1570329","0xd98de831a9da563243a70252a0c59f0946fbf4e1","0xda0402ae38ec0a808134cc990b6bd28c1f64aaa8","0xda16459ad529997b2f6b3ec232f4f95ca6f77f91","0xda3140d6698805aec58384f99897d9781bd1ac6e","0xda573972cb1d4cf5df5ff31afecb8f434f546da4","0xda88b50e9db7894b00c816789a859576e3eb2373","0xda8e703a378b491b13e2b34fcff41b9e0b6b6f44","0xdab9311032141e38e388f5f2e6f5365eb8f1ccb4","0xdad9ea8de6b159245648bf126e884e0425f3735b","0xdbfa71b513e22df96768c38f3739dd9fd07bf94f","0xdc00faa14901bc93c6fd3e3e49eb8b4cb09ebf72","0xdc66441f5a58ad1dd983bb0e3eb17ef8df530383","0xdc82b3659fd8fcb8a38b827865011863311a61f4","0xdc9803c9d1dae20bbe5e64866019419ae4225534","0xdcc047ed047efe5740fab936860bb666b261bda8","0xdde09c753d2f535882661abb41663b7bbf24bc09","0xde1f9cb3978be5a545dc8c383160ac1fb3626986","0xdfb0cb3393684ca1160aff0d087b649a7c560258","0xdff969438dcb83f17e34cc7a41b5deed3ac636a0","0xe019b48e08a238ebe9f7107f8327b60803a4ba67","0xe04aa993c63476faabbc92d334179321e38e421c","0xe073b5872dcdb01c6208e30e045a321f23cbe6fd","0xe0b27124a91b745df258c981682cb7bfc26d9ba5","0xe1506ea9d720651b4b4dbf4d3c2b5528d56b80da","0xe1891116b9fe32296c7bc95d9534b26145effc1c","0xe1ae152439993d035bb1ead71db3e663a550ccc9","0xe1ebb6ae67f99a53a1e1c987d9dfc1134a44fb32","0xe23cedadbba887bf6bbb6f161ff9281f6c39b5eb","0xe268f93e94514aaf5c6eae6c92f4049bd6ecaa64","0xe26ea9010d93d1ae4e57a74f5d11d4c11ce14e35","0xe2e1449dba3093e4eb43a0b7ddd6ffc508f7d9d4","0xe2e83df35ab973a52ce086b761c1673bd9d8ce51","0xe32ebd6b6b5c74d58096afc9fd99bffc79cd487b","0xe35483c045e12bd679681469a0a38445e228417c","0xe41df0c883d7e1f4f9df0b856cb14cebde0f2e21","0xe44102f08e1dcde4e21649ad27edd285f1a1ce1f","0xe44e17f364d5d24ba7df23fe8ea565c544ae36d4","0xe4d72a7fe71e6fb91fbc09459905c6031e120865","0xe50548454ec410bed6b2338d77121aa67d277ff4","0xe59030b21b2714708afd08a7e0f8d0a90f5ec251","0xe5ccee17815a0a39e2e7efe6854582c1dd103d2b","0xe5f83ce1e8f41cfd9ddcc85a0db726c81c9f789f","0xe71fc339d0783875d4942ad17540c3f2650915ba","0xe7eac2a558e9f0e009f6a0fb7f53923c39c37035","0xe7ef6563fcf1965e91075f13a4cfb4b607fceeef","0xe81a57f5b208735e44e99f84728a047ae29256ab","0xe8a305b264ae56cc115e036e63ee94ecf0d993a4","0xe94d448083dfd5feafb629ff1d546ae2bd189783","0xe95baeb396ecec3ed3fe37ba8f0e3fcf922c583f","0xe97a8888c89951ed4567d61fbca8a6c6c7e762c2","0xe9aa8eb20a2fa96c0e3c26173cc0ebdc9838fa94","0xe9b4f7755f74be4389f54e07c94d1541e27c2f33","0xea24918a807399a819b74e30baa05f0375ecdbbd","0xea50a527fb7dddb11bd7361285b3decda432ea2c","0xea7f8af79b6e69b3e65959f41ea6c181740e570d","0xeae4581390f2a537350169b9ca14d0856e208785","0xeb4019bc9aec9160ad9c9c7c2331cc7c4ca31465","0xeb6b06c316dc8f43538480fad4cdcf7d1ee48d6e","0xeb76f570e30419010acbbe765bba90263f3b8bab","0xeb9402df89bc70a6b9dc31fcf2d6b8078ea4b0f4","0xeba3af243ce855c2506f9a2e176adec456378e22","0xebbc65643714d884486356a6bb071a012037a364","0xebcb909bd7dfd73eec9c2bedb72d9ff0bdb1e32e","0xebf21c70465e0c9ca5faf21e1c17d3bfac95c647","0xec5f1a1d7ea81e5f08b7ae00e6f56f161f6ab869","0xed608006bc545bf7948d79a152e7fc101e0e44fb","0xed7dea54dbeff0dd16aef8d227564c1aa289626f","0xee3711ea1fd2fc2b770fe258a822aeb1d9199467","0xee853ddB68BE3D5431B62e5305295e8215a86A60","0xef07780777d1449e7d4a09c1f5bbeac51b55c037","0xef321b3871add26b727b6eb0895eefd881118399","0xef5c424b1b0a04418bfec2799ed5e2896836a8d1","0xef6ee1ece8664605493e69de51f490c096beeaa7","0xefa171c1939ae0fff98513daab961785b1c79514","0xefdf43acfe9050948468ccb732dfc3f0d4f75e80","0xf03e21afd74bfc892e3314507952d749b92afe16","0xf0404545ff84ac7d265f1c87ad00801a678ed076","0xf04663fd686eae663448547c19451e1afbaecfa4","0xf1298c937d86f8be3b2ac4579681c2e6ed6c21cf","0xf13bcf5d81626808646c18f60d078a1823471d26","0xf172db4d92bf8e72fa4e9182dcc811641b85fa97","0xf1b2030efd520136f7c5c7bddfdba54ca4f4ddbc","0xf1c0694962ab2c64e625758c71f82cd325c93dd7","0xf1dcd0dc8126c8e7bb2aa6793b03ad75b3b17af7","0xf1dfa94d8b0bc4a627217abc6b09a2821a50e9f6","0xf1f838ebb4b949b20afc3859991a27ffb87ba276","0xf2ce1fc162ff873c226304314c685ef6ef7ef96e","0xf313a87f42729655ba41a3b142078b19cc86da89","0xf3956963b012930d94a86c91da2905ff7a4ec34f","0xf3b706a26fa7298bf1309a49ccb5886db176639a","0xf45227bd50fcce84908b6a0439ac0035cc175b6f","0xf46bf67c9fe161ad0dccf2bdcd5a787fd8a1a929","0xf4802f43e0656267821a68b7d75a9ededc42f958","0xf48c70d44618f8862a0fbb7076b362c0f07787fa","0xf4b0011d2921df727132c44429aa4985e5a366c4","0xf56001723d00c15ca5c390fd38d1786d34f0ad48","0xf58ef1e69b1d2299e41033657c4e3ea828479dbb","0xf5b4c93a02b7264f5bcf6443cdc70728ced257c8","0xf5c7e89021183cb51409829f07eedb855c6b83de","0xf619b6e1beca45a13e147eaa935ef91b9c1bd918","0xf84432862824a1535b8a8cfaad6c82a3a9e8e49f","0xF870Fb499CAbA8D0a77e33E1BF0592c6b6aE2E2f","0xf8bafbf962b791e416d9c218994e86f489a970e1","0xf9033d896d9adfc2439668b561ee757bcb8e1eac","0xf9102e3b05eb6f26c300df9e21bdd3f3b40d329b","0xf9b51d5415fd38414299950083357444849e509f","0xfa7933c0398951493232a4ca95caa94d2d888bee","0xfb2ccaacb87ed7495b3be858029878fadee14b6b","0xfb562be56c348e6486e2fd32cf0fb47782f04501","0xfb884e55644ae7289553983d822d3f12d1becd0c","0xfc045b4b949ffd654fd8b7596682a686e150b36d","0xfc4b2f6ef1efa354d602fb8feb2737f8de2ae52e","0xfcc0894f7b5d115f9f3bc16b7928faa6388ab598","0xfcced881dd348c8c33493a5ddbae8604bd1c9ae1","0xfce50ec01725d9bc975ce358b266dfdbe7cc26c5","0xfd03bdac6895acad03dbf0eb343aab5a7373cd1b","0xfe330cda968026db1a0793243f43486955b82c42","0xfe3f30ab5fad436a0b4d71d6e348e907b00a9472","0xfef5bc8e7bbf4da33ba52791d2d260b635812f7e","0xff513529cfd2718ea94ca6580dbb10bc79d981b3","0xff85e61f719b09f3590b9343b86c84878300c6e6","0xff8ba48f19979a2fa42fa56ce3b85979c6170671","0xff9b4c8352f0caefbf15651e80204a5682da9ef1","0xffd7cc82fbdd7c1d9be09bd0a686ecb63df33eb1","0x33982ed97cc9a2bb4d06e059b6aad66ecc1ecac1"].forEach((function(e,t){i+='<div class="address">'.concat(e,"</div>")})),e.exports=WhitelistTemplate=function(){return'\n  <div class="whitelistSection">\n    <div class="communityAddresses">\n      <div class="whitelistTitle">Saito POLS 1</div>\n      '.concat(a,'\n    </div>\n    <div class="polsAddresses">\n      <div class="whitelistTitle">Saito POLS 2</div>\n      ').concat(r,'\n    </div>\n    <div class="polsAddresses">\n      <div class="whitelistTitle">Saito Public 1</div>\n      ').concat(n,'\n    </div>\n    <div class="polsAddresses">\n      <div class="whitelistTitle">Saito Public 2</div>\n      ').concat(i,"\n    </div>\n  </div>")}},function(e,t){function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}e.exports=TokenTemplate=function(){var e,t=(a(e={title:"SAITO ERC-20 Token Contract",para1:'The token\'s address is <a href="https://etherscan.io/token/0xFa14Fa6958401314851A17d6C5360cA29f74B57B">0xFa14Fa6958401314851A17d6C5360cA29f74B57B</a> and the Uniswap pair is <a href="https://info.uniswap.org/pair/0xdfcf744c8ae896e8631ba9b9dc717546646f6708">0xdfcf744c8ae896e8631ba9b9dc717546646f6708</a>.',para2:'Details can be seen on <a href="https://etherscan.io/token/0xFa14Fa6958401314851A17d6C5360cA29f74B57B">Etherscan</a>, <a href="https://coinmarketcap.com/currencies/saito/">Coinmarketcap</a>, and <a href="https://www.coingecko.com/en/coins/saito">Coingecko</a>.'},"para2","Following our successful IDO launched on PolkaStarter, SAITO is available as a swappable ERC-20 Token. Each ERC-20 SAITO represents a native SAITO coin and is 1-to-1 convertible to native coins withheld on the native network by the Saito Team."),a(e,"para3","SAITO can be traded on Uniswap and will soon also be available on more traditional platforms, so stay tuned for those announcements."),a(e,"para4","In order to receive and hold your ERC-20 SAITO, you should use an ERC-20 compatible wallet such as MyEtherWallet, MetaMask or TrustWallet."),a(e,"para5","We encourage you to consider a hardware-based solution for you key storage such as a Trezor or Ledger device. Also be sure to keep a backup of your keys in a safe place."),a(e,"para6","Also be careful not to use the token address as a receiving address!"),a(e,"para7","Team Saito greatly appreciates your support. A blockchain is only as strong as it's community, we couldn't succeed without you."),a(e,"para8",'<a id="burnlink" href="/website/tokenburn">Click here</a> for instructions on how to burn your ERC-20 SAITO in exchange for native SAITO.'),a(e,"class8","burninfo"),e);return document.location.host.includes("cn.saito.io")&&(t={title:"SAITO ERC-20 代币合约",para1:'代币地址为0xFa14Fa6958401314851A17d6C5360cA29f74B57B。 您可以在<a href="https://etherscan.io/token/0xFa14Fa6958401314851A17d6C5360cA29f74B57B">Etherscan</a>，<a href="https://coinmarketcap.com/currencies/saito/">Coinmarketcap</a>和<a href="https://www.coingecko.com/en/coins/saito">Coingecko</a>上查找详细信 息。',para2:"在PolkaStarter上成功进行IDO之后，SAITO将作为可交易的ERC-20代币使用。 每个ERC- 20 SAITO代表一个原生的SAITO代币，并且可以以1:1的比例转换为Saito主网上的原生代币。",para3:"SAITO可以在Uniswap上进行交易，并且很快还将在更多平台上线，敬请期待官方公告。",para4:"为了接收和持有ERC-20 SAITO，建议您使用与ERC-20兼容的钱包，例如 MyEtherWallet，MetaMask或TrustWallet。",para5:"我们鼓励您考虑基于硬件的钱包用于密钥存储，例如Trezor或Ledger。 另外，请务必将密 钥备份保存在安全的地方。",para6:"另外请注意不要将代币地址用作收款地址!",para7:"Saito团队非常感谢您的支持。 正因为社区，区块链才会如此强大，没有您我们就无法成功。",para8:'单击<a id="burnlink" href="/website/tokenburn">此处</a>获取有关如何将ERC-20 SAITO代币兑换成原生SAITO代币的说明。',class8:"burninfo"}),'\n  <div>\n    <div class="title">'.concat(t.title,"</div>\n    <p>\n      ").concat(t.para1,"\n    </p>\n    <p>\n      ").concat(t.para2,"\n    </p>\n    <p>\n      ").concat(t.para3,"\n    </p>\n    <p>\n      ").concat(t.para4,"\n    </p>\n    <p>\n      ").concat(t.para5,"\n    </p>\n    <p>\n      ").concat(t.para6,"\n    </p>\n    <p>\n      ").concat(t.para7,'\n    </p>\n    <p class="').concat(t.class8,'">\n      ').concat(t.para8,"\n    </p>\n  </div>")}},function(e,t){e.exports=TokenTemplate=function(){return'\n  <div class="">\n    <div class="title">How to burn your ERC-20 SAITO in exchange for Native SAITO</div>\n    <p>\n      By burning your ERC-20 SAITO, it\'s possible to swap to Native Saito.\n    </p>\n    <p>\n      In the burn function of our ERC-20 token, the data field of the burn function should be used to provide a valid SAITO native address in base-58 format.\n    </p>\n    <p>\n      If you\'re using MyEtherWallet, you\'ll need to provide the ABI, which can be found <a href="https://github.com/SaitoTech/saito-evm-token/tree/master/deployments/live-0xFa14Fa6958401314851A17d6C5360cA29f74B57B">in the ERC20 github project in the deployments directory</a>. Detailed instructions for burning via MEW can be found <a href="https://github.com/SaitoTech/saito-evm-token/blob/master/README.md">in the README</a>.\n    </p>\n    <p>\n      The ABI has also been uploaded to Etherscan and the burn() function can be accessed via their writeContract interface <a href="https://etherscan.io/token/0xFa14Fa6958401314851A17d6C5360cA29f74B57B#writeContract">here</a>.\n    </p>\n    <p>\n      Please consider reaching out to the team at info@saito.tech before proceeding. We may have other means to help you with what you\'re trying to accomplish.\n    </p>\n  </div>  \n  '}},function(e,t,a){e.exports=!a(13)&&!a(6)((function(){return 7!=Object.defineProperty(a(136)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,a){t.f=a(10)},function(e,t,a){var r=a(24),n=a(25),i=a(101)(!1),s=a(138)("IE_PROTO");e.exports=function(e,t){var a,o=n(e),c=0,l=[];for(a in o)a!=s&&r(o,a)&&l.push(a);for(;t.length>c;)r(o,a=t[c++])&&(~i(l,a)||l.push(a));return l}},function(e,t,a){var r=a(14),n=a(3),i=a(55);e.exports=a(13)?Object.defineProperties:function(e,t){n(e);for(var a,s=i(t),o=s.length,c=0;o>c;)r.f(e,a=s[c++],t[a]);return e}},function(e,t,a){var r=a(25),n=a(58).f,i={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return s&&"[object Window]"==i.call(e)?function(e){try{return n(e)}catch(e){return s.slice()}}(e):n(r(e))}},function(e,t,a){"use strict";var r=a(13),n=a(55),i=a(102),s=a(84),o=a(16),c=a(83),l=Object.assign;e.exports=!l||a(6)((function(){var e={},t={},a=Symbol(),r="abcdefghijklmnopqrst";return e[a]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[a]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var a=o(e),l=arguments.length,u=1,d=i.f,p=s.f;l>u;)for(var h,f=c(arguments[u++]),m=d?n(f).concat(d(f)):n(f),g=m.length,b=0;g>b;)h=m[b++],r&&!p.call(f,h)||(a[h]=f[h]);return a}:l},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,a){"use strict";var r=a(18),n=a(7),i=a(320),s=[].slice,o={},c=function(e,t,a){if(!(t in o)){for(var r=[],n=0;n<t;n++)r[n]="a["+n+"]";o[t]=Function("F,a","return new F("+r.join(",")+")")}return o[t](e,a)};e.exports=Function.bind||function(e){var t=r(this),a=s.call(arguments,1),o=function(){var r=a.concat(s.call(arguments));return this instanceof o?c(t,r.length,r):i(t,r,e)};return n(t.prototype)&&(o.prototype=t.prototype),o}},function(e,t){e.exports=function(e,t,a){var r=void 0===a;switch(t.length){case 0:return r?e():e.call(a);case 1:return r?e(t[0]):e.call(a,t[0]);case 2:return r?e(t[0],t[1]):e.call(a,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(a,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(a,t[0],t[1],t[2],t[3])}return e.apply(a,t)}},function(e,t,a){var r=a(4).parseInt,n=a(71).trim,i=a(142),s=/^[-+]?0[xX]/;e.exports=8!==r(i+"08")||22!==r(i+"0x16")?function(e,t){var a=n(String(e),3);return r(a,t>>>0||(s.test(a)?16:10))}:r},function(e,t,a){var r=a(4).parseFloat,n=a(71).trim;e.exports=1/r(a(142)+"-0")!=-1/0?function(e){var t=n(String(e),3),a=r(t);return 0===a&&"-"==t.charAt(0)?-0:a}:r},function(e,t,a){var r=a(33);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,a){var r=a(7),n=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&n(e)===e}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},function(e,t,a){var r=a(145),n=Math.pow,i=n(2,-52),s=n(2,-23),o=n(2,127)*(2-s),c=n(2,-126);e.exports=Math.fround||function(e){var t,a,n=Math.abs(e),l=r(e);return n<c?l*(n/c/s+1/i-1/i)*c*s:(a=(t=(1+s/i)*n)-(t-n))>o||a!=a?l*(1/0):l*a}},function(e,t,a){var r=a(3);e.exports=function(e,t,a,n){try{return n?t(r(a)[0],a[1]):t(a)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},function(e,t,a){var r=a(18),n=a(16),i=a(83),s=a(11);e.exports=function(e,t,a,o,c){r(t);var l=n(e),u=i(l),d=s(l.length),p=c?d-1:0,h=c?-1:1;if(a<2)for(;;){if(p in u){o=u[p],p+=h;break}if(p+=h,c?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;c?p>=0:d>p;p+=h)p in u&&(o=t(o,u[p],p,l));return o}},function(e,t,a){"use strict";var r=a(16),n=a(56),i=a(11);e.exports=[].copyWithin||function(e,t){var a=r(this),s=i(a.length),o=n(e,s),c=n(t,s),l=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===l?s:n(l,s))-c,s-o),d=1;for(c<o&&o<c+u&&(d=-1,c+=u-1,o+=u-1);u-- >0;)c in a?a[o]=a[c]:delete a[o],o+=d,c+=d;return a}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,a){"use strict";var r=a(157);a(0)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(e,t,a){a(13)&&"g"!=/./g.flags&&a(14).f(RegExp.prototype,"flags",{configurable:!0,get:a(85)})},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,a){var r=a(3),n=a(7),i=a(161);e.exports=function(e,t){if(r(e),n(t)&&t.constructor===e)return t;var a=i.f(e);return(0,a.resolve)(t),a.promise}},function(e,t,a){"use strict";var r=a(336),n=a(63);e.exports=a(110)("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=r.getEntry(n(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(n(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,a){"use strict";var r=a(14).f,n=a(57),i=a(62),s=a(32),o=a(60),c=a(61),l=a(147),u=a(330),d=a(59),p=a(13),h=a(49).fastKey,f=a(63),m=p?"_s":"size",g=function(e,t){var a,r=h(t);if("F"!==r)return e._i[r];for(a=e._f;a;a=a.n)if(a.k==t)return a};e.exports={getConstructor:function(e,t,a,l){var u=e((function(e,r){o(e,u,t,"_i"),e._t=t,e._i=n(null),e._f=void 0,e._l=void 0,e[m]=0,null!=r&&c(r,a,e[l],e)}));return i(u.prototype,{clear:function(){for(var e=f(this,t),a=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete a[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var a=f(this,t),r=g(a,e);if(r){var n=r.n,i=r.p;delete a._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),a._f==r&&(a._f=n),a._l==r&&(a._l=i),a[m]--}return!!r},forEach:function(e){f(this,t);for(var a,r=s(e,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(r(a.v,a.k,this);a&&a.r;)a=a.p},has:function(e){return!!g(f(this,t),e)}}),p&&r(u.prototype,"size",{get:function(){return f(this,t)[m]}}),u},def:function(e,t,a){var r,n,i=g(e,t);return i?i.v=a:(e._l=i={i:n=h(t,!0),k:t,v:a,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[m]++,"F"!==n&&(e._i[n]=i)),e},getEntry:g,setStrong:function(e,t,a){l(e,t,(function(e,a){this._t=f(e,t),this._k=a,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))}),a?"entries":"values",!a,!0),d(t)}}},function(e,t,a){"use strict";var r=a(336),n=a(63);e.exports=a(110)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(n(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,a){"use strict";var r,n=a(4),i=a(39)(0),s=a(22),o=a(49),c=a(317),l=a(339),u=a(7),d=a(63),p=a(63),h=!n.ActiveXObject&&"ActiveXObject"in n,f=o.getWeak,m=Object.isExtensible,g=l.ufstore,b=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},y={get:function(e){if(u(e)){var t=f(e);return!0===t?g(d(this,"WeakMap")).get(e):t?t[this._i]:void 0}},set:function(e,t){return l.def(d(this,"WeakMap"),e,t)}},v=e.exports=a(110)("WeakMap",b,y,l,!0,!0);p&&h&&(c((r=l.getConstructor(b,"WeakMap")).prototype,y),o.NEED=!0,i(["delete","has","get","set"],(function(e){var t=v.prototype,a=t[e];s(t,e,(function(t,n){if(u(t)&&!m(t)){this._f||(this._f=new r);var i=this._f[e](t,n);return"set"==e?this:i}return a.call(this,t,n)}))})))},function(e,t,a){"use strict";var r=a(62),n=a(49).getWeak,i=a(3),s=a(7),o=a(60),c=a(61),l=a(39),u=a(24),d=a(63),p=l(5),h=l(6),f=0,m=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},b=function(e,t){return p(e.a,(function(e){return e[0]===t}))};g.prototype={get:function(e){var t=b(this,e);if(t)return t[1]},has:function(e){return!!b(this,e)},set:function(e,t){var a=b(this,e);a?a[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,(function(t){return t[0]===e}));return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,a,i){var l=e((function(e,r){o(e,l,t,"_i"),e._t=t,e._i=f++,e._l=void 0,null!=r&&c(r,a,e[i],e)}));return r(l.prototype,{delete:function(e){if(!s(e))return!1;var a=n(e);return!0===a?m(d(this,t)).delete(e):a&&u(a,this._i)&&delete a[this._i]},has:function(e){if(!s(e))return!1;var a=n(e);return!0===a?m(d(this,t)).has(e):a&&u(a,this._i)}}),l},def:function(e,t,a){var r=n(i(t),!0);return!0===r?m(e).set(t,a):r[e._i]=a,e},ufstore:m}},function(e,t,a){var r=a(34),n=a(11);e.exports=function(e){if(void 0===e)return 0;var t=r(e),a=n(t);if(t!==a)throw RangeError("Wrong length!");return a}},function(e,t,a){var r=a(58),n=a(102),i=a(3),s=a(4).Reflect;e.exports=s&&s.ownKeys||function(e){var t=r.f(i(e)),a=n.f;return a?t.concat(a(e)):t}},function(e,t,a){"use strict";var r=a(103),n=a(7),i=a(11),s=a(32),o=a(10)("isConcatSpreadable");e.exports=function e(t,a,c,l,u,d,p,h){for(var f,m,g=u,b=0,y=!!p&&s(p,h,3);b<l;){if(b in c){if(f=y?y(c[b],b,a):c[b],m=!1,n(f)&&(m=void 0!==(m=f[o])?!!m:r(f)),m&&d>0)g=e(t,a,f,i(f.length),g,d-1)-1;else{if(g>=9007199254740991)throw TypeError();t[g]=f}g++}b++}return g}},function(e,t,a){var r=a(11),n=a(144),i=a(37);e.exports=function(e,t,a,s){var o=String(i(e)),c=o.length,l=void 0===a?" ":String(a),u=r(t);if(u<=c||""==l)return o;var d=u-c,p=n.call(l,Math.ceil(d/l.length));return p.length>d&&(p=p.slice(0,d)),s?p+o:o+p}},function(e,t,a){var r=a(13),n=a(55),i=a(25),s=a(84).f;e.exports=function(e){return function(t){for(var a,o=i(t),c=n(o),l=c.length,u=0,d=[];l>u;)a=c[u++],r&&!s.call(o,a)||d.push(e?[a,o[a]]:o[a]);return d}}},function(e,t,a){var r=a(70),n=a(346);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return n(this)}}},function(e,t,a){var r=a(61);e.exports=function(e,t){var a=[];return r(e,!1,a.push,a,t),a}},function(e,t){e.exports=Math.scale||function(e,t,a,r,n){return 0===arguments.length||e!=e||t!=t||a!=a||r!=r||n!=n?NaN:e===1/0||e===-1/0?e:(e-t)*(n-r)/(a-t)+r}},function(e,t,a){"use strict";var r=a(2).Buffer,n=a(349).Transform;function i(e){n.call(this),this._block=r.allocUnsafe(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}a(1)(i,n),i.prototype._transform=function(e,t,a){var r=null;try{this.update(e,t)}catch(e){r=e}a(r)},i.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(e){t=e}e(t)},i.prototype.update=function(e,t){if(function(e,t){if(!r.isBuffer(e)&&"string"!=typeof e)throw new TypeError(t+" must be a string or a buffer")}(e,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(e)||(e=r.from(e,t));for(var a=this._block,n=0;this._blockOffset+e.length-n>=this._blockSize;){for(var i=this._blockOffset;i<this._blockSize;)a[i++]=e[n++];this._update(),this._blockOffset=0}for(;n<e.length;)a[this._blockOffset++]=e[n++];for(var s=0,o=8*e.length;o>0;++s)this._length[s]+=o,(o=this._length[s]/4294967296|0)>0&&(this._length[s]-=4294967296*o);return this},i.prototype._update=function(){throw new Error("_update is not implemented")},i.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var a=0;a<4;++a)this._length[a]=0;return t},i.prototype._digest=function(){throw new Error("_digest is not implemented")},e.exports=i},function(e,t,a){e.exports=n;var r=a(51).EventEmitter;function n(){r.call(this)}a(1)(n,r),n.Readable=a(164),n.Writable=a(897),n.Duplex=a(898),n.Transform=a(899),n.PassThrough=a(900),n.Stream=n,n.prototype.pipe=function(e,t){var a=this;function n(t){e.writable&&!1===e.write(t)&&a.pause&&a.pause()}function i(){a.readable&&a.resume&&a.resume()}a.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(a.on("end",o),a.on("close",c));var s=!1;function o(){s||(s=!0,e.end())}function c(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){a.removeListener("data",n),e.removeListener("drain",i),a.removeListener("end",o),a.removeListener("close",c),a.removeListener("error",l),e.removeListener("error",l),a.removeListener("end",u),a.removeListener("close",u),e.removeListener("close",u)}return a.on("error",l),e.on("error",l),a.on("end",u),a.on("close",u),e.on("close",u),e.emit("pipe",a),e}},function(e,t,a){"use strict";(function(t,r){var n=a(116);e.exports=v;var i,s=a(890);v.ReadableState=y;a(51).EventEmitter;var o=function(e,t){return e.listeners(t).length},c=a(351),l=a(2).Buffer,u=t.Uint8Array||function(){};var d=a(87);d.inherits=a(1);var p=a(891),h=void 0;h=p&&p.debuglog?p.debuglog("stream"):function(){};var f,m=a(892),g=a(352);d.inherits(v,c);var b=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var r=t instanceof(i=i||a(64));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,s=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(f||(f=a(75).StringDecoder),this.decoder=new f(e.encoding),this.encoding=e.encoding)}function v(e){if(i=i||a(64),!(this instanceof v))return new v(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function _(e,t,a,r,n){var i,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var a=t.decoder.end();a&&a.length&&(t.buffer.push(a),t.length+=t.objectMode?1:a.length)}t.ended=!0,k(e)}(e,s)):(n||(i=function(e,t){var a;r=t,l.isBuffer(r)||r instanceof u||"string"==typeof t||void 0===t||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk"));var r;return a}(s,t)),i?e.emit("error",i):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):w(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!a?(t=s.decoder.write(t),s.objectMode||0!==t.length?w(e,s,t,!1):P(e,s)):w(e,s,t,!1))):r||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function w(e,t,a,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",a),e.read(0)):(t.length+=t.objectMode?1:a.length,r?t.buffer.unshift(a):t.buffer.push(a),t.needReadable&&k(e)),P(e,t)}Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(e,t){this.push(null),t(e)},v.prototype.push=function(e,t){var a,r=this._readableState;return r.objectMode?a=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),a=!0),_(this,e,t,!1,a)},v.prototype.unshift=function(e){return _(this,e,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(e){return f||(f=a(75).StringDecoder),this._readableState.decoder=new f(e),this._readableState.encoding=e,this};function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function k(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(S,e):S(e))}function S(e){h("emit readable"),e.emit("readable"),M(e)}function P(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(E,e,t))}function E(e,t){for(var a=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),a!==t.length);)a=t.length;t.readingMore=!1}function C(e){h("readable nexttick read 0"),e.read(0)}function A(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),M(e),t.flowing&&!t.reading&&e.read(0)}function M(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function T(e,t){return 0===t.length?null:(t.objectMode?a=t.buffer.shift():!e||e>=t.length?(a=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):a=function(e,t,a){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():a?function(e,t){var a=t.head,r=1,n=a.data;e-=n.length;for(;a=a.next;){var i=a.data,s=e>i.length?i.length:e;if(s===i.length?n+=i:n+=i.slice(0,e),0===(e-=s)){s===i.length?(++r,a.next?t.head=a.next:t.head=t.tail=null):(t.head=a,a.data=i.slice(s));break}++r}return t.length-=r,n}(e,t):function(e,t){var a=l.allocUnsafe(e),r=t.head,n=1;r.data.copy(a),e-=r.data.length;for(;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(i.copy(a,a.length-e,0,s),0===(e-=s)){s===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(s));break}++n}return t.length-=n,a}(e,t);return r}(e,t.buffer,t.decoder),a);var a}function j(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(O,t,e))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function D(e,t){for(var a=0,r=e.length;a<r;a++)if(e[a]===t)return a;return-1}v.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,a=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?j(this):k(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&j(this),null;var r,n=t.needReadable;return h("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",n=!0),t.ended||t.reading?h("reading or ended",n=!1):n&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(a,t))),null===(r=e>0?T(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),a!==e&&t.ended&&j(this)),null!==r&&this.emit("data",r),r},v.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},v.prototype.pipe=function(e,t){var a=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,t);var c=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?u:v;function l(t,r){h("onunpipe"),t===a&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,h("cleanup"),e.removeListener("close",b),e.removeListener("finish",y),e.removeListener("drain",d),e.removeListener("error",g),e.removeListener("unpipe",l),a.removeListener("end",u),a.removeListener("end",v),a.removeListener("data",m),p=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function u(){h("onend"),e.end()}i.endEmitted?n.nextTick(c):a.once("end",c),e.on("unpipe",l);var d=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,M(e))}}(a);e.on("drain",d);var p=!1;var f=!1;function m(t){h("ondata"),f=!1,!1!==e.write(t)||f||((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==D(i.pipes,e))&&!p&&(h("false write response, pause",a._readableState.awaitDrain),a._readableState.awaitDrain++,f=!0),a.pause())}function g(t){h("onerror",t),v(),e.removeListener("error",g),0===o(e,"error")&&e.emit("error",t)}function b(){e.removeListener("finish",y),v()}function y(){h("onfinish"),e.removeListener("close",b),v()}function v(){h("unpipe"),a.unpipe(e)}return a.on("data",m),function(e,t,a){if("function"==typeof e.prependListener)return e.prependListener(t,a);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(a):e._events[t]=[a,e._events[t]]:e.on(t,a)}(e,"error",g),e.once("close",b),e.once("finish",y),e.emit("pipe",a),i.flowing||(h("pipe resume"),a.resume()),e},v.prototype.unpipe=function(e){var t=this._readableState,a={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,a)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this,a);return this}var s=D(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,a)),this},v.prototype.on=function(e,t){var a=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&k(this):n.nextTick(C,this))}return a},v.prototype.addListener=v.prototype.on,v.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(A,e,t))}(this,e)),this},v.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},v.prototype.wrap=function(e){var t=this,a=this._readableState,r=!1;for(var n in e.on("end",(function(){if(h("wrapped end"),a.decoder&&!a.ended){var e=a.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(n){(h("wrapped data"),a.decoder&&(n=a.decoder.write(n)),a.objectMode&&null==n)||(a.objectMode||n&&n.length)&&(t.push(n)||(r=!0,e.pause()))})),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var i=0;i<b.length;i++)e.on(b[i],this.emit.bind(this,b[i]));return this._read=function(t){h("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),v._fromList=T}).call(this,a(17),a(12))},function(e,t,a){e.exports=a(51).EventEmitter},function(e,t,a){"use strict";var r=a(116);function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var a=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(n,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(n,a,e),a._writableState&&(a._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,a){(function(t){function a(e){try{if(!t.localStorage)return!1}catch(e){return!1}var a=t.localStorage[e];return null!=a&&"true"===String(a).toLowerCase()}e.exports=function(e,t){if(a("noDeprecation"))return e;var r=!1;return function(){if(!r){if(a("throwDeprecation"))throw new Error(t);a("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,a(17))},function(e,t,a){"use strict";e.exports=s;var r=a(64),n=a(87);function i(e,t){var a=this._transformState;a.transforming=!1;var r=a.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));a.writechunk=null,a.writecb=null,null!=t&&this.push(t),r(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);r.call(this,e),this._transformState={afterTransform:i.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush((function(t,a){c(e,t,a)})):c(this,null,null)}function c(e,t,a){if(t)return e.emit("error",t);if(null!=a&&e.push(a),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}n.inherits=a(1),n.inherits(s,r),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,a){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,a){var r=this._transformState;if(r.writecb=a,r.writechunk=e,r.writeencoding=t,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var a=this;r.prototype._destroy.call(this,e,(function(e){t(e),a.emit("close")}))}},function(e,t,a){var r=a(1),n=a(76),i=a(2).Buffer,s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function c(){this.init(),this._w=o,n.call(this,64,56)}function l(e,t,a){return a^e&(t^a)}function u(e,t,a){return e&t|a&(e|t)}function d(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function p(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function h(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function f(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}r(c,n),c.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},c.prototype._update=function(e){for(var t=this._w,a=0|this._a,r=0|this._b,n=0|this._c,i=0|this._d,o=0|this._e,c=0|this._f,m=0|this._g,g=0|this._h,b=0;b<16;++b)t[b]=e.readInt32BE(4*b);for(;b<64;++b)t[b]=f(t[b-2])+t[b-7]+h(t[b-15])+t[b-16]|0;for(var y=0;y<64;++y){var v=g+p(o)+l(o,c,m)+s[y]+t[y]|0,_=d(a)+u(a,r,n)|0;g=m,m=c,c=o,o=i+v|0,i=n,n=r,r=a,a=v+_|0}this._a=a+this._a|0,this._b=r+this._b|0,this._c=n+this._c|0,this._d=i+this._d|0,this._e=o+this._e|0,this._f=c+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},c.prototype._hash=function(){var e=i.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},e.exports=c},function(e,t,a){var r=a(1),n=a(76),i=a(2).Buffer,s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function c(){this.init(),this._w=o,n.call(this,128,112)}function l(e,t,a){return a^e&(t^a)}function u(e,t,a){return e&t|a&(e|t)}function d(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function p(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function h(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function m(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function g(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function b(e,t){return e>>>0<t>>>0?1:0}r(c,n),c.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},c.prototype._update=function(e){for(var t=this._w,a=0|this._ah,r=0|this._bh,n=0|this._ch,i=0|this._dh,o=0|this._eh,c=0|this._fh,y=0|this._gh,v=0|this._hh,_=0|this._al,w=0|this._bl,x=0|this._cl,k=0|this._dl,S=0|this._el,P=0|this._fl,E=0|this._gl,C=0|this._hl,A=0;A<32;A+=2)t[A]=e.readInt32BE(4*A),t[A+1]=e.readInt32BE(4*A+4);for(;A<160;A+=2){var M=t[A-30],T=t[A-30+1],j=h(M,T),O=f(T,M),D=m(M=t[A-4],T=t[A-4+1]),I=g(T,M),R=t[A-14],B=t[A-14+1],q=t[A-32],L=t[A-32+1],N=O+B|0,F=j+R+b(N,O)|0;F=(F=F+D+b(N=N+I|0,I)|0)+q+b(N=N+L|0,L)|0,t[A]=F,t[A+1]=N}for(var U=0;U<160;U+=2){F=t[U],N=t[U+1];var $=u(a,r,n),z=u(_,w,x),H=d(a,_),G=d(_,a),K=p(o,S),W=p(S,o),V=s[U],Y=s[U+1],J=l(o,c,y),X=l(S,P,E),Q=C+W|0,Z=v+K+b(Q,C)|0;Z=(Z=(Z=Z+J+b(Q=Q+X|0,X)|0)+V+b(Q=Q+Y|0,Y)|0)+F+b(Q=Q+N|0,N)|0;var ee=G+z|0,te=H+$+b(ee,G)|0;v=y,C=E,y=c,E=P,c=o,P=S,o=i+Z+b(S=k+Q|0,k)|0,i=n,k=x,n=r,x=w,r=a,w=_,a=Z+te+b(_=Q+ee|0,Q)|0}this._al=this._al+_|0,this._bl=this._bl+w|0,this._cl=this._cl+x|0,this._dl=this._dl+k|0,this._el=this._el+S|0,this._fl=this._fl+P|0,this._gl=this._gl+E|0,this._hl=this._hl+C|0,this._ah=this._ah+a+b(this._al,_)|0,this._bh=this._bh+r+b(this._bl,w)|0,this._ch=this._ch+n+b(this._cl,x)|0,this._dh=this._dh+i+b(this._dl,k)|0,this._eh=this._eh+o+b(this._el,S)|0,this._fh=this._fh+c+b(this._fl,P)|0,this._gh=this._gh+y+b(this._gl,E)|0,this._hh=this._hh+v+b(this._hl,C)|0},c.prototype._hash=function(){var e=i.allocUnsafe(64);function t(t,a,r){e.writeInt32BE(t,r),e.writeInt32BE(a,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},e.exports=c},function(e,t,a){"use strict";var r=a(1),n=a(905),i=a(52),s=a(2).Buffer,o=a(358),c=a(166),l=a(167),u=s.alloc(128);function d(e,t){i.call(this,"digest"),"string"==typeof t&&(t=s.from(t));var a="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>a)?t=("rmd160"===e?new c:l(e)).update(t).digest():t.length<a&&(t=s.concat([t,u],a));for(var r=this._ipad=s.allocUnsafe(a),n=this._opad=s.allocUnsafe(a),o=0;o<a;o++)r[o]=54^t[o],n[o]=92^t[o];this._hash="rmd160"===e?new c:l(e),this._hash.update(r)}r(d,i),d.prototype._update=function(e){this._hash.update(e)},d.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new c:l(this._alg)).update(this._opad).update(e).digest()},e.exports=function(e,t){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new d("rmd160",t):"md5"===e?new n(o,t):new d(e,t)}},function(e,t,a){var r=a(163);e.exports=function(e){return(new r).update(e).digest()}},function(e){e.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},function(e,t,a){t.pbkdf2=a(907),t.pbkdf2Sync=a(363)},function(e,t){var a=Math.pow(2,30)-1;e.exports=function(e,t){if("number"!=typeof e)throw new TypeError("Iterations not a number");if(e<0)throw new TypeError("Bad iterations");if("number"!=typeof t)throw new TypeError("Key length not a number");if(t<0||t>a||t!=t)throw new TypeError("Bad key length")}},function(e,t,a){(function(t){var a;if(t.browser)a="utf-8";else if(t.version){a=parseInt(t.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else a="utf-8";e.exports=a}).call(this,a(12))},function(e,t,a){var r=a(358),n=a(166),i=a(167),s=a(2).Buffer,o=a(361),c=a(362),l=a(364),u=s.alloc(128),d={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function p(e,t,a){var o=function(e){function t(t){return i(e).update(t).digest()}return"rmd160"===e||"ripemd160"===e?function(e){return(new n).update(e).digest()}:"md5"===e?r:t}(e),c="sha512"===e||"sha384"===e?128:64;t.length>c?t=o(t):t.length<c&&(t=s.concat([t,u],c));for(var l=s.allocUnsafe(c+d[e]),p=s.allocUnsafe(c+d[e]),h=0;h<c;h++)l[h]=54^t[h],p[h]=92^t[h];var f=s.allocUnsafe(c+a+4);l.copy(f,0,0,c),this.ipad1=f,this.ipad2=l,this.opad=p,this.alg=e,this.blocksize=c,this.hash=o,this.size=d[e]}p.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},e.exports=function(e,t,a,r,n){o(a,r);var i=new p(n=n||"sha1",e=l(e,c,"Password"),(t=l(t,c,"Salt")).length),u=s.allocUnsafe(r),h=s.allocUnsafe(t.length+4);t.copy(h,0,0,t.length);for(var f=0,m=d[n],g=Math.ceil(r/m),b=1;b<=g;b++){h.writeUInt32BE(b,t.length);for(var y=i.run(h,i.ipad1),v=y,_=1;_<a;_++){v=i.run(v,i.ipad2);for(var w=0;w<m;w++)y[w]^=v[w]}y.copy(u,f),f+=m}return u}},function(e,t,a){var r=a(2).Buffer;e.exports=function(e,t,a){if(r.isBuffer(e))return e;if("string"==typeof e)return r.from(e,t);if(ArrayBuffer.isView(e))return r.from(e.buffer);throw new TypeError(a+" must be a string, a Buffer, a typed array or a DataView")}},function(e,t,a){"use strict";t.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},t.writeUInt32BE=function(e,t,a){e[0+a]=t>>>24,e[1+a]=t>>>16&255,e[2+a]=t>>>8&255,e[3+a]=255&t},t.ip=function(e,t,a,r){for(var n=0,i=0,s=6;s>=0;s-=2){for(var o=0;o<=24;o+=8)n<<=1,n|=t>>>o+s&1;for(o=0;o<=24;o+=8)n<<=1,n|=e>>>o+s&1}for(s=6;s>=0;s-=2){for(o=1;o<=25;o+=8)i<<=1,i|=t>>>o+s&1;for(o=1;o<=25;o+=8)i<<=1,i|=e>>>o+s&1}a[r+0]=n>>>0,a[r+1]=i>>>0},t.rip=function(e,t,a,r){for(var n=0,i=0,s=0;s<4;s++)for(var o=24;o>=0;o-=8)n<<=1,n|=t>>>o+s&1,n<<=1,n|=e>>>o+s&1;for(s=4;s<8;s++)for(o=24;o>=0;o-=8)i<<=1,i|=t>>>o+s&1,i<<=1,i|=e>>>o+s&1;a[r+0]=n>>>0,a[r+1]=i>>>0},t.pc1=function(e,t,a,r){for(var n=0,i=0,s=7;s>=5;s--){for(var o=0;o<=24;o+=8)n<<=1,n|=t>>o+s&1;for(o=0;o<=24;o+=8)n<<=1,n|=e>>o+s&1}for(o=0;o<=24;o+=8)n<<=1,n|=t>>o+s&1;for(s=1;s<=3;s++){for(o=0;o<=24;o+=8)i<<=1,i|=t>>o+s&1;for(o=0;o<=24;o+=8)i<<=1,i|=e>>o+s&1}for(o=0;o<=24;o+=8)i<<=1,i|=e>>o+s&1;a[r+0]=n>>>0,a[r+1]=i>>>0},t.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];t.pc2=function(e,t,a,n){for(var i=0,s=0,o=r.length>>>1,c=0;c<o;c++)i<<=1,i|=e>>>r[c]&1;for(c=o;c<r.length;c++)s<<=1,s|=t>>>r[c]&1;a[n+0]=i>>>0,a[n+1]=s>>>0},t.expand=function(e,t,a){var r=0,n=0;r=(1&e)<<5|e>>>27;for(var i=23;i>=15;i-=4)r<<=6,r|=e>>>i&63;for(i=11;i>=3;i-=4)n|=e>>>i&63,n<<=6;n|=(31&e)<<1|e>>>31,t[a+0]=r>>>0,t[a+1]=n>>>0};var n=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];t.substitute=function(e,t){for(var a=0,r=0;r<4;r++){a<<=4,a|=n[64*r+(e>>>18-6*r&63)]}for(r=0;r<4;r++){a<<=4,a|=n[256+64*r+(t>>>18-6*r&63)]}return a>>>0};var i=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];t.permute=function(e){for(var t=0,a=0;a<i.length;a++)t<<=1,t|=e>>>i[a]&1;return t>>>0},t.padSplit=function(e,t,a){for(var r=e.toString(2);r.length<t;)r="0"+r;for(var n=[],i=0;i<t;i+=a)n.push(r.slice(i,i+a));return n.join(" ")}},function(e,t,a){"use strict";var r=a(20),n=a(1),i=a(365),s=a(168);function o(){this.tmp=new Array(2),this.keys=null}function c(e){s.call(this,e);var t=new o;this._desState=t,this.deriveKeys(t,e.key)}n(c,s),e.exports=c,c.create=function(e){return new c(e)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];c.prototype.deriveKeys=function(e,t){e.keys=new Array(32),r.equal(t.length,this.blockSize,"Invalid key length");var a=i.readUInt32BE(t,0),n=i.readUInt32BE(t,4);i.pc1(a,n,e.tmp,0),a=e.tmp[0],n=e.tmp[1];for(var s=0;s<e.keys.length;s+=2){var o=l[s>>>1];a=i.r28shl(a,o),n=i.r28shl(n,o),i.pc2(a,n,e.keys,s)}},c.prototype._update=function(e,t,a,r){var n=this._desState,s=i.readUInt32BE(e,t),o=i.readUInt32BE(e,t+4);i.ip(s,o,n.tmp,0),s=n.tmp[0],o=n.tmp[1],"encrypt"===this.type?this._encrypt(n,s,o,n.tmp,0):this._decrypt(n,s,o,n.tmp,0),s=n.tmp[0],o=n.tmp[1],i.writeUInt32BE(a,s,r),i.writeUInt32BE(a,o,r+4)},c.prototype._pad=function(e,t){for(var a=e.length-t,r=t;r<e.length;r++)e[r]=a;return!0},c.prototype._unpad=function(e){for(var t=e[e.length-1],a=e.length-t;a<e.length;a++)r.equal(e[a],t);return e.slice(0,e.length-t)},c.prototype._encrypt=function(e,t,a,r,n){for(var s=t,o=a,c=0;c<e.keys.length;c+=2){var l=e.keys[c],u=e.keys[c+1];i.expand(o,e.tmp,0),l^=e.tmp[0],u^=e.tmp[1];var d=i.substitute(l,u),p=o;o=(s^i.permute(d))>>>0,s=p}i.rip(o,s,r,n)},c.prototype._decrypt=function(e,t,a,r,n){for(var s=a,o=t,c=e.keys.length-2;c>=0;c-=2){var l=e.keys[c],u=e.keys[c+1];i.expand(s,e.tmp,0),l^=e.tmp[0],u^=e.tmp[1];var d=i.substitute(l,u),p=s;s=(o^i.permute(d))>>>0,o=p}i.rip(s,o,r,n)}},function(e,t,a){var r=a(88),n=a(2).Buffer,i=a(368);function s(e){var t=e._cipher.encryptBlockRaw(e._prev);return i(e._prev),t}t.encrypt=function(e,t){var a=Math.ceil(t.length/16),i=e._cache.length;e._cache=n.concat([e._cache,n.allocUnsafe(16*a)]);for(var o=0;o<a;o++){var c=s(e),l=i+16*o;e._cache.writeUInt32BE(c[0],l+0),e._cache.writeUInt32BE(c[1],l+4),e._cache.writeUInt32BE(c[2],l+8),e._cache.writeUInt32BE(c[3],l+12)}var u=e._cache.slice(0,t.length);return e._cache=e._cache.slice(t.length),r(t,u)}},function(e,t){e.exports=function(e){for(var t,a=e.length;a--;){if(255!==(t=e.readUInt8(a))){t++,e.writeUInt8(t,a);break}e.writeUInt8(0,a)}}},function(e){e.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},function(e,t,a){var r=a(117),n=a(2).Buffer,i=a(52),s=a(1),o=a(920),c=a(88),l=a(368);function u(e,t,a,s){i.call(this);var c=n.alloc(4,0);this._cipher=new r.AES(t);var u=this._cipher.encryptBlock(c);this._ghash=new o(u),a=function(e,t,a){if(12===t.length)return e._finID=n.concat([t,n.from([0,0,0,1])]),n.concat([t,n.from([0,0,0,2])]);var r=new o(a),i=t.length,s=i%16;r.update(t),s&&(s=16-s,r.update(n.alloc(s,0))),r.update(n.alloc(8,0));var c=8*i,u=n.alloc(8);u.writeUIntBE(c,0,8),r.update(u),e._finID=r.state;var d=n.from(e._finID);return l(d),d}(this,a,u),this._prev=n.from(a),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=s,this._alen=0,this._len=0,this._mode=e,this._authTag=null,this._called=!1}s(u,i),u.prototype._update=function(e){if(!this._called&&this._alen){var t=16-this._alen%16;t<16&&(t=n.alloc(t,0),this._ghash.update(t))}this._called=!0;var a=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(a),this._len+=e.length,a},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=c(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var a=0;e.length!==t.length&&a++;for(var r=Math.min(e.length,t.length),n=0;n<r;++n)a+=e[n]^t[n];return a}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!n.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},u.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},e.exports=u},function(e,t,a){var r=a(117),n=a(2).Buffer,i=a(52);function s(e,t,a,s){i.call(this),this._cipher=new r.AES(t),this._prev=n.from(a),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=s,this._mode=e}a(1)(s,i),s.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},s.prototype._final=function(){this._cipher.scrub()},e.exports=s},function(e,t,a){var r=a(73);e.exports=y,y.simpleSieve=g,y.fermatTest=b;var n=a(8),i=new n(24),s=new(a(373)),o=new n(1),c=new n(2),l=new n(5),u=(new n(16),new n(8),new n(10)),d=new n(3),p=(new n(7),new n(11)),h=new n(4),f=(new n(12),null);function m(){if(null!==f)return f;var e=[];e[0]=2;for(var t=1,a=3;a<1048576;a+=2){for(var r=Math.ceil(Math.sqrt(a)),n=0;n<t&&e[n]<=r&&a%e[n]!=0;n++);t!==n&&e[n]<=r||(e[t++]=a)}return f=e,e}function g(e){for(var t=m(),a=0;a<t.length;a++)if(0===e.modn(t[a]))return 0===e.cmpn(t[a]);return!0}function b(e){var t=n.mont(e);return 0===c.toRed(t).redPow(e.subn(1)).fromRed().cmpn(1)}function y(e,t){if(e<16)return new n(2===t||5===t?[140,123]:[140,39]);var a,f;for(t=new n(t);;){for(a=new n(r(Math.ceil(e/8)));a.bitLength()>e;)a.ishrn(1);if(a.isEven()&&a.iadd(o),a.testn(1)||a.iadd(c),t.cmp(c)){if(!t.cmp(l))for(;a.mod(u).cmp(d);)a.iadd(h)}else for(;a.mod(i).cmp(p);)a.iadd(h);if(g(f=a.shrn(1))&&g(a)&&b(f)&&b(a)&&s.test(f)&&s.test(a))return a}}},function(e,t,a){var r=a(8),n=a(65);function i(e){this.rand=e||new n.Rand}e.exports=i,i.create=function(e){return new i(e)},i.prototype._randbelow=function(e){var t=e.bitLength(),a=Math.ceil(t/8);do{var n=new r(this.rand.generate(a))}while(n.cmp(e)>=0);return n},i.prototype._randrange=function(e,t){var a=t.sub(e);return e.add(this._randbelow(a))},i.prototype.test=function(e,t,a){var n=e.bitLength(),i=r.mont(e),s=new r(1).toRed(i);t||(t=Math.max(1,n/48|0));for(var o=e.subn(1),c=0;!o.testn(c);c++);for(var l=e.shrn(c),u=o.toRed(i);t>0;t--){var d=this._randrange(new r(2),o);a&&a(d);var p=d.toRed(i).redPow(l);if(0!==p.cmp(s)&&0!==p.cmp(u)){for(var h=1;h<c;h++){if(0===(p=p.redSqr()).cmp(s))return!1;if(0===p.cmp(u))break}if(h===c)return!1}}return!0},i.prototype.getDivisor=function(e,t){var a=e.bitLength(),n=r.mont(e),i=new r(1).toRed(n);t||(t=Math.max(1,a/48|0));for(var s=e.subn(1),o=0;!s.testn(o);o++);for(var c=e.shrn(o),l=s.toRed(n);t>0;t--){var u=this._randrange(new r(2),s),d=e.gcd(u);if(0!==d.cmpn(1))return d;var p=u.toRed(n).redPow(c);if(0!==p.cmp(i)&&0!==p.cmp(l)){for(var h=1;h<o;h++){if(0===(p=p.redSqr()).cmp(i))return p.fromRed().subn(1).gcd(e);if(0===p.cmp(l))break}if(h===o)return(p=p.redSqr()).fromRed().subn(1).gcd(e)}}return!1}},function(e,t,a){"use strict";(function(t,r){var n;e.exports=P,P.ReadableState=S;a(51).EventEmitter;var i=function(e,t){return e.listeners(t).length},s=a(375),o=a(9).Buffer,c=t.Uint8Array||function(){};var l,u=a(930);l=u&&u.debuglog?u.debuglog("stream"):function(){};var d,p,h,f=a(931),m=a(376),g=a(377).getHighWaterMark,b=a(77).codes,y=b.ERR_INVALID_ARG_TYPE,v=b.ERR_STREAM_PUSH_AFTER_EOF,_=b.ERR_METHOD_NOT_IMPLEMENTED,w=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;a(45)(P,s);var x=m.errorOrDestroy,k=["error","close","destroy","pause","resume"];function S(e,t,r){n=n||a(78),e=e||{},"boolean"!=typeof r&&(r=t instanceof n),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=g(this,e,"readableHighWaterMark",r),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=a(75).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function P(e){if(n=n||a(78),!(this instanceof P))return new P(e);var t=this instanceof n;this._readableState=new S(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function E(e,t,a,r,n){l("readableAddChunk",t);var i,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(l("onEofChunk"),t.ended)return;if(t.decoder){var a=t.decoder.end();a&&a.length&&(t.buffer.push(a),t.length+=t.objectMode?1:a.length)}t.ended=!0,t.sync?M(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,T(e)))}(e,s);else if(n||(i=function(e,t){var a;r=t,o.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(a=new y("chunk",["string","Buffer","Uint8Array"],t));var r;return a}(s,t)),i)x(e,i);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===o.prototype||(t=function(e){return o.from(e)}(t)),r)s.endEmitted?x(e,new w):C(e,s,t,!0);else if(s.ended)x(e,new v);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!a?(t=s.decoder.write(t),s.objectMode||0!==t.length?C(e,s,t,!1):j(e,s)):C(e,s,t,!1)}else r||(s.reading=!1,j(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function C(e,t,a,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",a)):(t.length+=t.objectMode?1:a.length,r?t.buffer.unshift(a):t.buffer.push(a),t.needReadable&&M(e)),j(e,t)}Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),P.prototype.destroy=m.destroy,P.prototype._undestroy=m.undestroy,P.prototype._destroy=function(e,t){t(e)},P.prototype.push=function(e,t){var a,r=this._readableState;return r.objectMode?a=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=o.from(e,t),t=""),a=!0),E(this,e,t,!1,a)},P.prototype.unshift=function(e){return E(this,e,null,!0,!1)},P.prototype.isPaused=function(){return!1===this._readableState.flowing},P.prototype.setEncoding=function(e){d||(d=a(75).StringDecoder);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=1073741824?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function M(e){var t=e._readableState;l("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(l("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(T,e))}function T(e){var t=e._readableState;l("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,B(e)}function j(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var a=t.length;if(l("maybeReadMore read 0"),e.read(0),a===t.length)break}t.readingMore=!1}function D(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function I(e){l("readable nexttick read 0"),e.read(0)}function R(e,t){l("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),B(e),t.flowing&&!t.reading&&e.read(0)}function B(e){var t=e._readableState;for(l("flow",t.flowing);t.flowing&&null!==e.read(););}function q(e,t){return 0===t.length?null:(t.objectMode?a=t.buffer.shift():!e||e>=t.length?(a=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):a=t.buffer.consume(e,t.decoder),a);var a}function L(e){var t=e._readableState;l("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(N,t,e))}function N(e,t){if(l("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var a=t._writableState;(!a||a.autoDestroy&&a.finished)&&t.destroy()}}function F(e,t){for(var a=0,r=e.length;a<r;a++)if(e[a]===t)return a;return-1}P.prototype.read=function(e){l("read",e),e=parseInt(e,10);var t=this._readableState,a=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return l("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?L(this):M(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&L(this),null;var r,n=t.needReadable;return l("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&l("length less than watermark",n=!0),t.ended||t.reading?l("reading or ended",n=!1):n&&(l("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(a,t))),null===(r=e>0?q(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),a!==e&&t.ended&&L(this)),null!==r&&this.emit("data",r),r},P.prototype._read=function(e){x(this,new _("_read()"))},P.prototype.pipe=function(e,t){var a=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,l("pipe count=%d opts=%j",n.pipesCount,t);var s=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:g;function o(t,r){l("onunpipe"),t===a&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,l("cleanup"),e.removeListener("close",f),e.removeListener("finish",m),e.removeListener("drain",u),e.removeListener("error",h),e.removeListener("unpipe",o),a.removeListener("end",c),a.removeListener("end",g),a.removeListener("data",p),d=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){l("onend"),e.end()}n.endEmitted?r.nextTick(s):a.once("end",s),e.on("unpipe",o);var u=function(e){return function(){var t=e._readableState;l("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,B(e))}}(a);e.on("drain",u);var d=!1;function p(t){l("ondata");var r=e.write(t);l("dest.write",r),!1===r&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==F(n.pipes,e))&&!d&&(l("false write response, pause",n.awaitDrain),n.awaitDrain++),a.pause())}function h(t){l("onerror",t),g(),e.removeListener("error",h),0===i(e,"error")&&x(e,t)}function f(){e.removeListener("finish",m),g()}function m(){l("onfinish"),e.removeListener("close",f),g()}function g(){l("unpipe"),a.unpipe(e)}return a.on("data",p),function(e,t,a){if("function"==typeof e.prependListener)return e.prependListener(t,a);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(a):e._events[t]=[a,e._events[t]]:e.on(t,a)}(e,"error",h),e.once("close",f),e.once("finish",m),e.emit("pipe",a),n.flowing||(l("pipe resume"),a.resume()),e},P.prototype.unpipe=function(e){var t=this._readableState,a={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,a)),this;if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this,{hasUnpiped:!1});return this}var s=F(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,a)),this},P.prototype.on=function(e,t){var a=s.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,l("on readable",n.length,n.reading),n.length?M(this):n.reading||r.nextTick(I,this))),a},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(e,t){var a=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(D,this),a},P.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(D,this),t},P.prototype.resume=function(){var e=this._readableState;return e.flowing||(l("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(R,e,t))}(this,e)),e.paused=!1,this},P.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},P.prototype.wrap=function(e){var t=this,a=this._readableState,r=!1;for(var n in e.on("end",(function(){if(l("wrapped end"),a.decoder&&!a.ended){var e=a.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(n){(l("wrapped data"),a.decoder&&(n=a.decoder.write(n)),a.objectMode&&null==n)||(a.objectMode||n&&n.length)&&(t.push(n)||(r=!0,e.pause()))})),e)void 0===this[n]&&"function"==typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var i=0;i<k.length;i++)e.on(k[i],this.emit.bind(this,k[i]));return this._read=function(t){l("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(P.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=a(933)),p(this)}),Object.defineProperty(P.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(P.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(P.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),P._fromList=q,Object.defineProperty(P.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(P.from=function(e,t){return void 0===h&&(h=a(934)),h(P,e,t)})}).call(this,a(17),a(12))},function(e,t,a){e.exports=a(51).EventEmitter},function(e,t,a){"use strict";(function(t){function a(e,t){n(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,i){var s=this,o=this._readableState&&this._readableState.destroyed,c=this._writableState&&this._writableState.destroyed;return o||c?(i?i(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(n,this,e)):t.nextTick(n,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!i&&e?s._writableState?s._writableState.errorEmitted?t.nextTick(r,s):(s._writableState.errorEmitted=!0,t.nextTick(a,s,e)):t.nextTick(a,s,e):i?(t.nextTick(r,s),i(e)):t.nextTick(r,s)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var a=e._readableState,r=e._writableState;a&&a.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this,a(12))},function(e,t,a){"use strict";var r=a(77).codes.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,a,n){var i=function(e,t,a){return null!=e.highWaterMark?e.highWaterMark:t?e[a]:null}(t,n,a);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new r(n?a:"highWaterMark",i);return Math.floor(i)}return e.objectMode?16:16384}}},function(e,t,a){"use strict";(function(t,r){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,a){var r=e.entry;e.entry=null;for(;r;){var n=r.callback;t.pendingcb--,n(a),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var i;e.exports=P,P.WritableState=S;var s={deprecate:a(353)},o=a(375),c=a(9).Buffer,l=t.Uint8Array||function(){};var u,d=a(376),p=a(377).getHighWaterMark,h=a(77).codes,f=h.ERR_INVALID_ARG_TYPE,m=h.ERR_METHOD_NOT_IMPLEMENTED,g=h.ERR_MULTIPLE_CALLBACK,b=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,v=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,w=h.ERR_UNKNOWN_ENCODING,x=d.errorOrDestroy;function k(){}function S(e,t,s){i=i||a(78),e=e||{},"boolean"!=typeof s&&(s=t instanceof i),this.objectMode=!!e.objectMode,s&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=p(this,e,"writableHighWaterMark",s),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var a=e._writableState,n=a.sync,i=a.writecb;if("function"!=typeof i)throw new g;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(a),t)!function(e,t,a,n,i){--t.pendingcb,a?(r.nextTick(i,n),r.nextTick(j,e,t),e._writableState.errorEmitted=!0,x(e,n)):(i(n),e._writableState.errorEmitted=!0,x(e,n),j(e,t))}(e,a,n,t,i);else{var s=M(a)||e.destroyed;s||a.corked||a.bufferProcessing||!a.bufferedRequest||A(e,a),n?r.nextTick(C,e,a,s,i):C(e,a,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function P(e){var t=this instanceof(i=i||a(78));if(!t&&!u.call(P,this))return new P(e);this._writableState=new S(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),o.call(this)}function E(e,t,a,r,n,i,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):a?e._writev(n,t.onwrite):e._write(n,i,t.onwrite),t.sync=!1}function C(e,t,a,r){a||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),j(e,t)}function A(e,t){t.bufferProcessing=!0;var a=t.bufferedRequest;if(e._writev&&a&&a.next){var r=t.bufferedRequestCount,i=new Array(r),s=t.corkedRequestsFree;s.entry=a;for(var o=0,c=!0;a;)i[o]=a,a.isBuf||(c=!1),a=a.next,o+=1;i.allBuffers=c,E(e,t,!0,t.length,i,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;a;){var l=a.chunk,u=a.encoding,d=a.callback;if(E(e,t,!1,t.objectMode?1:l.length,l,u,d),a=a.next,t.bufferedRequestCount--,t.writing)break}null===a&&(t.lastBufferedRequest=null)}t.bufferedRequest=a,t.bufferProcessing=!1}function M(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(a){t.pendingcb--,a&&x(e,a),t.prefinished=!0,e.emit("prefinish"),j(e,t)}))}function j(e,t){var a=M(t);if(a&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(T,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return a}a(45)(P,o),S.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(S.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===P&&(e&&e._writableState instanceof S)}})):u=function(e){return e instanceof this},P.prototype.pipe=function(){x(this,new b)},P.prototype.write=function(e,t,a){var n,i=this._writableState,s=!1,o=!i.objectMode&&(n=e,c.isBuffer(n)||n instanceof l);return o&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(a=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof a&&(a=k),i.ending?function(e,t){var a=new _;x(e,a),r.nextTick(t,a)}(this,a):(o||function(e,t,a,n){var i;return null===a?i=new v:"string"==typeof a||t.objectMode||(i=new f("chunk",["string","Buffer"],a)),!i||(x(e,i),r.nextTick(n,i),!1)}(this,i,e,a))&&(i.pendingcb++,s=function(e,t,a,r,n,i){if(!a){var s=function(e,t,a){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,a));return t}(t,r,n);r!==s&&(a=!0,n="buffer",r=s)}var o=t.objectMode?1:r.length;t.length+=o;var l=t.length<t.highWaterMark;l||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:n,isBuf:a,callback:i,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else E(e,t,!1,o,r,n,i);return l}(this,i,o,e,t,a)),s},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},P.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(P.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),P.prototype._write=function(e,t,a){a(new m("_write()"))},P.prototype._writev=null,P.prototype.end=function(e,t,a){var n=this._writableState;return"function"==typeof e?(a=e,e=null,t=null):"function"==typeof t&&(a=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,a){t.ending=!0,j(e,t),a&&(t.finished?r.nextTick(a):e.once("finish",a));t.ended=!0,e.writable=!1}(this,n,a),this},Object.defineProperty(P.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(P.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),P.prototype.destroy=d.destroy,P.prototype._undestroy=d.undestroy,P.prototype._destroy=function(e,t){t(e)}}).call(this,a(17),a(12))},function(e,t,a){"use strict";e.exports=u;var r=a(77).codes,n=r.ERR_METHOD_NOT_IMPLEMENTED,i=r.ERR_MULTIPLE_CALLBACK,s=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=r.ERR_TRANSFORM_WITH_LENGTH_0,c=a(78);function l(e,t){var a=this._transformState;a.transforming=!1;var r=a.writecb;if(null===r)return this.emit("error",new i);a.writechunk=null,a.writecb=null,null!=t&&this.push(t),r(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);c.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush((function(t,a){p(e,t,a)}))}function p(e,t,a){if(t)return e.emit("error",t);if(null!=a&&e.push(a),e._writableState.length)throw new o;if(e._transformState.transforming)throw new s;return e.push(null)}a(45)(u,c),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,a){a(new n("_transform()"))},u.prototype._write=function(e,t,a){var r=this._transformState;if(r.writecb=a,r.writechunk=e,r.writeencoding=t,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,(function(e){t(e)}))}},function(e,t,a){"use strict";var r=t;r.version=a(938).version,r.utils=a(28),r.rand=a(65),r.curve=a(381),r.curves=a(174),r.ec=a(950),r.eddsa=a(953)},function(e,t,a){"use strict";var r=t;r.base=a(120),r.short=a(940),r.mont=a(941),r.edwards=a(942)},function(e,t,a){"use strict";var r=a(41).rotr32;function n(e,t,a){return e&t^~e&a}function i(e,t,a){return e&t^e&a^t&a}function s(e,t,a){return e^t^a}t.ft_1=function(e,t,a,r){return 0===e?n(t,a,r):1===e||3===e?s(t,a,r):2===e?i(t,a,r):void 0},t.ch32=n,t.maj32=i,t.p32=s,t.s0_256=function(e){return r(e,2)^r(e,13)^r(e,22)},t.s1_256=function(e){return r(e,6)^r(e,11)^r(e,25)},t.g0_256=function(e){return r(e,7)^r(e,18)^e>>>3},t.g1_256=function(e){return r(e,17)^r(e,19)^e>>>10}},function(e,t,a){"use strict";var r=a(41),n=a(90),i=a(382),s=a(20),o=r.sum32,c=r.sum32_4,l=r.sum32_5,u=i.ch32,d=i.maj32,p=i.s0_256,h=i.s1_256,f=i.g0_256,m=i.g1_256,g=n.BlockHash,b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=b,this.W=new Array(64)}r.inherits(y,g),e.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(e,t){for(var a=this.W,r=0;r<16;r++)a[r]=e[t+r];for(;r<a.length;r++)a[r]=c(m(a[r-2]),a[r-7],f(a[r-15]),a[r-16]);var n=this.h[0],i=this.h[1],g=this.h[2],b=this.h[3],y=this.h[4],v=this.h[5],_=this.h[6],w=this.h[7];for(s(this.k.length===a.length),r=0;r<a.length;r++){var x=l(w,h(y),u(y,v,_),this.k[r],a[r]),k=o(p(n),d(n,i,g));w=_,_=v,v=y,y=o(b,x),b=g,g=i,i=n,n=o(x,k)}this.h[0]=o(this.h[0],n),this.h[1]=o(this.h[1],i),this.h[2]=o(this.h[2],g),this.h[3]=o(this.h[3],b),this.h[4]=o(this.h[4],y),this.h[5]=o(this.h[5],v),this.h[6]=o(this.h[6],_),this.h[7]=o(this.h[7],w)},y.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,a){"use strict";var r=a(41),n=a(90),i=a(20),s=r.rotr64_hi,o=r.rotr64_lo,c=r.shr64_hi,l=r.shr64_lo,u=r.sum64,d=r.sum64_hi,p=r.sum64_lo,h=r.sum64_4_hi,f=r.sum64_4_lo,m=r.sum64_5_hi,g=r.sum64_5_lo,b=n.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;b.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function _(e,t,a,r,n){var i=e&a^~e&n;return i<0&&(i+=4294967296),i}function w(e,t,a,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function x(e,t,a,r,n){var i=e&a^e&n^a&n;return i<0&&(i+=4294967296),i}function k(e,t,a,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function S(e,t){var a=s(e,t,28)^s(t,e,2)^s(t,e,7);return a<0&&(a+=4294967296),a}function P(e,t){var a=o(e,t,28)^o(t,e,2)^o(t,e,7);return a<0&&(a+=4294967296),a}function E(e,t){var a=s(e,t,14)^s(e,t,18)^s(t,e,9);return a<0&&(a+=4294967296),a}function C(e,t){var a=o(e,t,14)^o(e,t,18)^o(t,e,9);return a<0&&(a+=4294967296),a}function A(e,t){var a=s(e,t,1)^s(e,t,8)^c(e,t,7);return a<0&&(a+=4294967296),a}function M(e,t){var a=o(e,t,1)^o(e,t,8)^l(e,t,7);return a<0&&(a+=4294967296),a}function T(e,t){var a=s(e,t,19)^s(t,e,29)^c(e,t,6);return a<0&&(a+=4294967296),a}function j(e,t){var a=o(e,t,19)^o(t,e,29)^l(e,t,6);return a<0&&(a+=4294967296),a}r.inherits(v,b),e.exports=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(e,t){for(var a=this.W,r=0;r<32;r++)a[r]=e[t+r];for(;r<a.length;r+=2){var n=T(a[r-4],a[r-3]),i=j(a[r-4],a[r-3]),s=a[r-14],o=a[r-13],c=A(a[r-30],a[r-29]),l=M(a[r-30],a[r-29]),u=a[r-32],d=a[r-31];a[r]=h(n,i,s,o,c,l,u,d),a[r+1]=f(n,i,s,o,c,l,u,d)}},v.prototype._update=function(e,t){this._prepareBlock(e,t);var a=this.W,r=this.h[0],n=this.h[1],s=this.h[2],o=this.h[3],c=this.h[4],l=this.h[5],h=this.h[6],f=this.h[7],b=this.h[8],y=this.h[9],v=this.h[10],A=this.h[11],M=this.h[12],T=this.h[13],j=this.h[14],O=this.h[15];i(this.k.length===a.length);for(var D=0;D<a.length;D+=2){var I=j,R=O,B=E(b,y),q=C(b,y),L=_(b,y,v,A,M),N=w(b,y,v,A,M,T),F=this.k[D],U=this.k[D+1],$=a[D],z=a[D+1],H=m(I,R,B,q,L,N,F,U,$,z),G=g(I,R,B,q,L,N,F,U,$,z);I=S(r,n),R=P(r,n),B=x(r,n,s,o,c),q=k(r,n,s,o,c,l);var K=d(I,R,B,q),W=p(I,R,B,q);j=M,O=T,M=v,T=A,v=b,A=y,b=d(h,f,H,G),y=p(f,f,H,G),h=c,f=l,c=s,l=o,s=r,o=n,r=d(H,G,K,W),n=p(H,G,K,W)}u(this.h,0,r,n),u(this.h,2,s,o),u(this.h,4,c,l),u(this.h,6,h,f),u(this.h,8,b,y),u(this.h,10,v,A),u(this.h,12,M,T),u(this.h,14,j,O)},v.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,a){(function(e){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}function i(e,t,a){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(a=t,t=10),this._init(e||0,t||10,a||"be"))}var s;"object"==typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;try{s=a(956).Buffer}catch(e){}function o(e,t,a){for(var n=0,i=Math.min(e.length,a),s=0,o=t;o<i;o++){var c,l=e.charCodeAt(o)-48;n<<=4,n|=c=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:l,s|=c}return r(!(240&s),"Invalid character in "+e),n}function c(e,t,a,n){for(var i=0,s=0,o=Math.min(e.length,a),c=t;c<o;c++){var l=e.charCodeAt(c)-48;i*=n,s=l>=49?l-49+10:l>=17?l-17+10:l,r(l>=0&&s<n,"Invalid character"),i+=s}return i}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}i.isBN=function(e){return e instanceof i||null!==e&&"object"==typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,a){if("number"==typeof e)return this._initNumber(e,t,a);if("object"==typeof e)return this._initArray(e,t,a);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&n++,16===t?this._parseHex(e,n):this._parseBase(e,t,n),"-"===e[0]&&(this.negative=1),this._strip(),"le"===a&&this._initArray(this.toArray(),t,a)},i.prototype._initNumber=function(e,t,a){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===a&&this._initArray(this.toArray(),t,a)},i.prototype._initArray=function(e,t,a){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s,o=0;if("be"===a)for(n=e.length-1,i=0;n>=0;n-=3)s=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[i]|=s<<o&67108863,this.words[i+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);else if("le"===a)for(n=0,i=0;n<e.length;n+=3)s=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[i]|=s<<o&67108863,this.words[i+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,i++);return this._strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var r,n,i=0;for(a=e.length-6,r=0;a>=t;a-=6)n=o(e,a,a+6),this.words[r]|=n<<i&67108863,this.words[r+1]|=n>>>26-i&4194303,(i+=24)>=26&&(i-=26,r++);a+6!==t&&(n=o(e,t,a+6),this.words[r]|=n<<i&67108863,this.words[r+1]|=n>>>26-i&4194303),this._strip()},i.prototype._parseBase=function(e,t,a){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=t)r++;r--,n=n/t|0;for(var i=e.length-a,s=i%r,o=Math.min(i,i-s)+a,l=0,u=a;u<o;u+=r)l=c(e,u,u+r,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=c(e,u,e.length,t),u=0;u<s;u++)d*=t;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype._move=function(e){l(e,this)},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?i.prototype[Symbol.for("nodejs.util.inspect.custom")]=u:i.prototype.inspect=u;var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],h=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){var a;if(t=0|t||1,16===(e=e||10)||"hex"===e){a="";for(var n=0,i=0,s=0;s<this.length;s++){var o=this.words[s],c=(16777215&(o<<n|i)).toString(16);a=0!==(i=o>>>24-n&16777215)||s!==this.length-1?d[6-c.length]+c+a:c+a,(n+=2)>=26&&(n-=26,s--)}for(0!==i&&(a=i.toString(16)+a);a.length%t!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}if(e===(0|e)&&e>=2&&e<=36){var l=p[e],u=h[e];a="";var f=this.clone();for(f.negative=0;!f.isZero();){var m=f.modrn(u).toString(e);a=(f=f.idivn(u)).isZero()?m+a:d[l-m.length]+m+a}for(this.isZero()&&(a="0"+a);a.length%t!=0;)a="0"+a;return 0!==this.negative&&(a="-"+a),a}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16,2)},s&&(i.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function f(e,t,a){a.negative=t.negative^e.negative;var r=e.length+t.length|0;a.length=r,r=r-1|0;var n=0|e.words[0],i=0|t.words[0],s=n*i,o=67108863&s,c=s/67108864|0;a.words[0]=o;for(var l=1;l<r;l++){for(var u=c>>>26,d=67108863&c,p=Math.min(l,t.length-1),h=Math.max(0,l-e.length+1);h<=p;h++){var f=l-h|0;u+=(s=(n=0|e.words[f])*(i=0|t.words[h])+d)/67108864|0,d=67108863&s}a.words[l]=0|d,c=0|u}return 0!==c?a.words[l]=0|c:a.length--,a._strip()}i.prototype.toArrayLike=function(e,t,a){this._strip();var n=this.byteLength(),i=a||Math.max(1,n);r(n<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,i);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,n),s},i.prototype._toArrayLikeLE=function(e,t){for(var a=0,r=0,n=0,i=0;n<this.length;n++){var s=this.words[n]<<i|r;e[a++]=255&s,a<e.length&&(e[a++]=s>>8&255),a<e.length&&(e[a++]=s>>16&255),6===i?(a<e.length&&(e[a++]=s>>24&255),r=0,i=0):(r=s>>>24,i+=2)}if(a<e.length)for(e[a++]=r;a<e.length;)e[a++]=0},i.prototype._toArrayLikeBE=function(e,t){for(var a=e.length-1,r=0,n=0,i=0;n<this.length;n++){var s=this.words[n]<<i|r;e[a--]=255&s,a>=0&&(e[a--]=s>>8&255),a>=0&&(e[a--]=s>>16&255),6===i?(a>=0&&(e[a--]=s>>24&255),r=0,i=0):(r=s>>>24,i+=2)}if(a>=0)for(e[a--]=r;a>=0;)e[a--]=0},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,a=0;return t>=4096&&(a+=13,t>>>=13),t>=64&&(a+=7,t>>>=7),t>=8&&(a+=4,t>>>=4),t>=2&&(a+=2,t>>>=2),a+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,a=0;return 0==(8191&t)&&(a+=13,t>>>=13),0==(127&t)&&(a+=7,t>>>=7),0==(15&t)&&(a+=4,t>>>=4),0==(3&t)&&(a+=2,t>>>=2),0==(1&t)&&a++,a},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var a=this._zeroBits(this.words[t]);if(e+=a,26!==a)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},i.prototype.ior=function(e){return r(0==(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var a=0;a<t.length;a++)this.words[a]=this.words[a]&e.words[a];return this.length=t.length,this._strip()},i.prototype.iand=function(e){return r(0==(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,a;this.length>e.length?(t=this,a=e):(t=e,a=this);for(var r=0;r<a.length;r++)this.words[r]=t.words[r]^a.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this._strip()},i.prototype.ixor=function(e){return r(0==(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),a=e%26;this._expand(t),a>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return a>0&&(this.words[n]=~this.words[n]&67108863>>26-a),this._strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var a=e/26|0,n=e%26;return this._expand(a+1),this.words[a]=t?this.words[a]|1<<n:this.words[a]&~(1<<n),this._strip()},i.prototype.iadd=function(e){var t,a,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(a=this,r=e):(a=e,r=this);for(var n=0,i=0;i<r.length;i++)t=(0|a.words[i])+(0|r.words[i])+n,this.words[i]=67108863&t,n=t>>>26;for(;0!==n&&i<a.length;i++)t=(0|a.words[i])+n,this.words[i]=67108863&t,n=t>>>26;if(this.length=a.length,0!==n)this.words[this.length]=n,this.length++;else if(a!==this)for(;i<a.length;i++)this.words[i]=a.words[i];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var a,r,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(a=this,r=e):(a=e,r=this);for(var i=0,s=0;s<r.length;s++)i=(t=(0|a.words[s])-(0|r.words[s])+i)>>26,this.words[s]=67108863&t;for(;0!==i&&s<a.length;s++)i=(t=(0|a.words[s])+i)>>26,this.words[s]=67108863&t;if(0===i&&s<a.length&&a!==this)for(;s<a.length;s++)this.words[s]=a.words[s];return this.length=Math.max(this.length,s),a!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,a){var r,n,i,s=e.words,o=t.words,c=a.words,l=0,u=0|s[0],d=8191&u,p=u>>>13,h=0|s[1],f=8191&h,m=h>>>13,g=0|s[2],b=8191&g,y=g>>>13,v=0|s[3],_=8191&v,w=v>>>13,x=0|s[4],k=8191&x,S=x>>>13,P=0|s[5],E=8191&P,C=P>>>13,A=0|s[6],M=8191&A,T=A>>>13,j=0|s[7],O=8191&j,D=j>>>13,I=0|s[8],R=8191&I,B=I>>>13,q=0|s[9],L=8191&q,N=q>>>13,F=0|o[0],U=8191&F,$=F>>>13,z=0|o[1],H=8191&z,G=z>>>13,K=0|o[2],W=8191&K,V=K>>>13,Y=0|o[3],J=8191&Y,X=Y>>>13,Q=0|o[4],Z=8191&Q,ee=Q>>>13,te=0|o[5],ae=8191&te,re=te>>>13,ne=0|o[6],ie=8191&ne,se=ne>>>13,oe=0|o[7],ce=8191&oe,le=oe>>>13,ue=0|o[8],de=8191&ue,pe=ue>>>13,he=0|o[9],fe=8191&he,me=he>>>13;a.negative=e.negative^t.negative,a.length=19;var ge=(l+(r=Math.imul(d,U))|0)+((8191&(n=(n=Math.imul(d,$))+Math.imul(p,U)|0))<<13)|0;l=((i=Math.imul(p,$))+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(f,U),n=(n=Math.imul(f,$))+Math.imul(m,U)|0,i=Math.imul(m,$);var be=(l+(r=r+Math.imul(d,H)|0)|0)+((8191&(n=(n=n+Math.imul(d,G)|0)+Math.imul(p,H)|0))<<13)|0;l=((i=i+Math.imul(p,G)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(b,U),n=(n=Math.imul(b,$))+Math.imul(y,U)|0,i=Math.imul(y,$),r=r+Math.imul(f,H)|0,n=(n=n+Math.imul(f,G)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,G)|0;var ye=(l+(r=r+Math.imul(d,W)|0)|0)+((8191&(n=(n=n+Math.imul(d,V)|0)+Math.imul(p,W)|0))<<13)|0;l=((i=i+Math.imul(p,V)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(_,U),n=(n=Math.imul(_,$))+Math.imul(w,U)|0,i=Math.imul(w,$),r=r+Math.imul(b,H)|0,n=(n=n+Math.imul(b,G)|0)+Math.imul(y,H)|0,i=i+Math.imul(y,G)|0,r=r+Math.imul(f,W)|0,n=(n=n+Math.imul(f,V)|0)+Math.imul(m,W)|0,i=i+Math.imul(m,V)|0;var ve=(l+(r=r+Math.imul(d,J)|0)|0)+((8191&(n=(n=n+Math.imul(d,X)|0)+Math.imul(p,J)|0))<<13)|0;l=((i=i+Math.imul(p,X)|0)+(n>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(k,U),n=(n=Math.imul(k,$))+Math.imul(S,U)|0,i=Math.imul(S,$),r=r+Math.imul(_,H)|0,n=(n=n+Math.imul(_,G)|0)+Math.imul(w,H)|0,i=i+Math.imul(w,G)|0,r=r+Math.imul(b,W)|0,n=(n=n+Math.imul(b,V)|0)+Math.imul(y,W)|0,i=i+Math.imul(y,V)|0,r=r+Math.imul(f,J)|0,n=(n=n+Math.imul(f,X)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,X)|0;var _e=(l+(r=r+Math.imul(d,Z)|0)|0)+((8191&(n=(n=n+Math.imul(d,ee)|0)+Math.imul(p,Z)|0))<<13)|0;l=((i=i+Math.imul(p,ee)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(E,U),n=(n=Math.imul(E,$))+Math.imul(C,U)|0,i=Math.imul(C,$),r=r+Math.imul(k,H)|0,n=(n=n+Math.imul(k,G)|0)+Math.imul(S,H)|0,i=i+Math.imul(S,G)|0,r=r+Math.imul(_,W)|0,n=(n=n+Math.imul(_,V)|0)+Math.imul(w,W)|0,i=i+Math.imul(w,V)|0,r=r+Math.imul(b,J)|0,n=(n=n+Math.imul(b,X)|0)+Math.imul(y,J)|0,i=i+Math.imul(y,X)|0,r=r+Math.imul(f,Z)|0,n=(n=n+Math.imul(f,ee)|0)+Math.imul(m,Z)|0,i=i+Math.imul(m,ee)|0;var we=(l+(r=r+Math.imul(d,ae)|0)|0)+((8191&(n=(n=n+Math.imul(d,re)|0)+Math.imul(p,ae)|0))<<13)|0;l=((i=i+Math.imul(p,re)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(M,U),n=(n=Math.imul(M,$))+Math.imul(T,U)|0,i=Math.imul(T,$),r=r+Math.imul(E,H)|0,n=(n=n+Math.imul(E,G)|0)+Math.imul(C,H)|0,i=i+Math.imul(C,G)|0,r=r+Math.imul(k,W)|0,n=(n=n+Math.imul(k,V)|0)+Math.imul(S,W)|0,i=i+Math.imul(S,V)|0,r=r+Math.imul(_,J)|0,n=(n=n+Math.imul(_,X)|0)+Math.imul(w,J)|0,i=i+Math.imul(w,X)|0,r=r+Math.imul(b,Z)|0,n=(n=n+Math.imul(b,ee)|0)+Math.imul(y,Z)|0,i=i+Math.imul(y,ee)|0,r=r+Math.imul(f,ae)|0,n=(n=n+Math.imul(f,re)|0)+Math.imul(m,ae)|0,i=i+Math.imul(m,re)|0;var xe=(l+(r=r+Math.imul(d,ie)|0)|0)+((8191&(n=(n=n+Math.imul(d,se)|0)+Math.imul(p,ie)|0))<<13)|0;l=((i=i+Math.imul(p,se)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(O,U),n=(n=Math.imul(O,$))+Math.imul(D,U)|0,i=Math.imul(D,$),r=r+Math.imul(M,H)|0,n=(n=n+Math.imul(M,G)|0)+Math.imul(T,H)|0,i=i+Math.imul(T,G)|0,r=r+Math.imul(E,W)|0,n=(n=n+Math.imul(E,V)|0)+Math.imul(C,W)|0,i=i+Math.imul(C,V)|0,r=r+Math.imul(k,J)|0,n=(n=n+Math.imul(k,X)|0)+Math.imul(S,J)|0,i=i+Math.imul(S,X)|0,r=r+Math.imul(_,Z)|0,n=(n=n+Math.imul(_,ee)|0)+Math.imul(w,Z)|0,i=i+Math.imul(w,ee)|0,r=r+Math.imul(b,ae)|0,n=(n=n+Math.imul(b,re)|0)+Math.imul(y,ae)|0,i=i+Math.imul(y,re)|0,r=r+Math.imul(f,ie)|0,n=(n=n+Math.imul(f,se)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,se)|0;var ke=(l+(r=r+Math.imul(d,ce)|0)|0)+((8191&(n=(n=n+Math.imul(d,le)|0)+Math.imul(p,ce)|0))<<13)|0;l=((i=i+Math.imul(p,le)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(R,U),n=(n=Math.imul(R,$))+Math.imul(B,U)|0,i=Math.imul(B,$),r=r+Math.imul(O,H)|0,n=(n=n+Math.imul(O,G)|0)+Math.imul(D,H)|0,i=i+Math.imul(D,G)|0,r=r+Math.imul(M,W)|0,n=(n=n+Math.imul(M,V)|0)+Math.imul(T,W)|0,i=i+Math.imul(T,V)|0,r=r+Math.imul(E,J)|0,n=(n=n+Math.imul(E,X)|0)+Math.imul(C,J)|0,i=i+Math.imul(C,X)|0,r=r+Math.imul(k,Z)|0,n=(n=n+Math.imul(k,ee)|0)+Math.imul(S,Z)|0,i=i+Math.imul(S,ee)|0,r=r+Math.imul(_,ae)|0,n=(n=n+Math.imul(_,re)|0)+Math.imul(w,ae)|0,i=i+Math.imul(w,re)|0,r=r+Math.imul(b,ie)|0,n=(n=n+Math.imul(b,se)|0)+Math.imul(y,ie)|0,i=i+Math.imul(y,se)|0,r=r+Math.imul(f,ce)|0,n=(n=n+Math.imul(f,le)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,le)|0;var Se=(l+(r=r+Math.imul(d,de)|0)|0)+((8191&(n=(n=n+Math.imul(d,pe)|0)+Math.imul(p,de)|0))<<13)|0;l=((i=i+Math.imul(p,pe)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(L,U),n=(n=Math.imul(L,$))+Math.imul(N,U)|0,i=Math.imul(N,$),r=r+Math.imul(R,H)|0,n=(n=n+Math.imul(R,G)|0)+Math.imul(B,H)|0,i=i+Math.imul(B,G)|0,r=r+Math.imul(O,W)|0,n=(n=n+Math.imul(O,V)|0)+Math.imul(D,W)|0,i=i+Math.imul(D,V)|0,r=r+Math.imul(M,J)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,X)|0,r=r+Math.imul(E,Z)|0,n=(n=n+Math.imul(E,ee)|0)+Math.imul(C,Z)|0,i=i+Math.imul(C,ee)|0,r=r+Math.imul(k,ae)|0,n=(n=n+Math.imul(k,re)|0)+Math.imul(S,ae)|0,i=i+Math.imul(S,re)|0,r=r+Math.imul(_,ie)|0,n=(n=n+Math.imul(_,se)|0)+Math.imul(w,ie)|0,i=i+Math.imul(w,se)|0,r=r+Math.imul(b,ce)|0,n=(n=n+Math.imul(b,le)|0)+Math.imul(y,ce)|0,i=i+Math.imul(y,le)|0,r=r+Math.imul(f,de)|0,n=(n=n+Math.imul(f,pe)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,pe)|0;var Pe=(l+(r=r+Math.imul(d,fe)|0)|0)+((8191&(n=(n=n+Math.imul(d,me)|0)+Math.imul(p,fe)|0))<<13)|0;l=((i=i+Math.imul(p,me)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(L,H),n=(n=Math.imul(L,G))+Math.imul(N,H)|0,i=Math.imul(N,G),r=r+Math.imul(R,W)|0,n=(n=n+Math.imul(R,V)|0)+Math.imul(B,W)|0,i=i+Math.imul(B,V)|0,r=r+Math.imul(O,J)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(D,J)|0,i=i+Math.imul(D,X)|0,r=r+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,ee)|0)+Math.imul(T,Z)|0,i=i+Math.imul(T,ee)|0,r=r+Math.imul(E,ae)|0,n=(n=n+Math.imul(E,re)|0)+Math.imul(C,ae)|0,i=i+Math.imul(C,re)|0,r=r+Math.imul(k,ie)|0,n=(n=n+Math.imul(k,se)|0)+Math.imul(S,ie)|0,i=i+Math.imul(S,se)|0,r=r+Math.imul(_,ce)|0,n=(n=n+Math.imul(_,le)|0)+Math.imul(w,ce)|0,i=i+Math.imul(w,le)|0,r=r+Math.imul(b,de)|0,n=(n=n+Math.imul(b,pe)|0)+Math.imul(y,de)|0,i=i+Math.imul(y,pe)|0;var Ee=(l+(r=r+Math.imul(f,fe)|0)|0)+((8191&(n=(n=n+Math.imul(f,me)|0)+Math.imul(m,fe)|0))<<13)|0;l=((i=i+Math.imul(m,me)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(L,W),n=(n=Math.imul(L,V))+Math.imul(N,W)|0,i=Math.imul(N,V),r=r+Math.imul(R,J)|0,n=(n=n+Math.imul(R,X)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,X)|0,r=r+Math.imul(O,Z)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(D,Z)|0,i=i+Math.imul(D,ee)|0,r=r+Math.imul(M,ae)|0,n=(n=n+Math.imul(M,re)|0)+Math.imul(T,ae)|0,i=i+Math.imul(T,re)|0,r=r+Math.imul(E,ie)|0,n=(n=n+Math.imul(E,se)|0)+Math.imul(C,ie)|0,i=i+Math.imul(C,se)|0,r=r+Math.imul(k,ce)|0,n=(n=n+Math.imul(k,le)|0)+Math.imul(S,ce)|0,i=i+Math.imul(S,le)|0,r=r+Math.imul(_,de)|0,n=(n=n+Math.imul(_,pe)|0)+Math.imul(w,de)|0,i=i+Math.imul(w,pe)|0;var Ce=(l+(r=r+Math.imul(b,fe)|0)|0)+((8191&(n=(n=n+Math.imul(b,me)|0)+Math.imul(y,fe)|0))<<13)|0;l=((i=i+Math.imul(y,me)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(L,J),n=(n=Math.imul(L,X))+Math.imul(N,J)|0,i=Math.imul(N,X),r=r+Math.imul(R,Z)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(B,Z)|0,i=i+Math.imul(B,ee)|0,r=r+Math.imul(O,ae)|0,n=(n=n+Math.imul(O,re)|0)+Math.imul(D,ae)|0,i=i+Math.imul(D,re)|0,r=r+Math.imul(M,ie)|0,n=(n=n+Math.imul(M,se)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,se)|0,r=r+Math.imul(E,ce)|0,n=(n=n+Math.imul(E,le)|0)+Math.imul(C,ce)|0,i=i+Math.imul(C,le)|0,r=r+Math.imul(k,de)|0,n=(n=n+Math.imul(k,pe)|0)+Math.imul(S,de)|0,i=i+Math.imul(S,pe)|0;var Ae=(l+(r=r+Math.imul(_,fe)|0)|0)+((8191&(n=(n=n+Math.imul(_,me)|0)+Math.imul(w,fe)|0))<<13)|0;l=((i=i+Math.imul(w,me)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(L,Z),n=(n=Math.imul(L,ee))+Math.imul(N,Z)|0,i=Math.imul(N,ee),r=r+Math.imul(R,ae)|0,n=(n=n+Math.imul(R,re)|0)+Math.imul(B,ae)|0,i=i+Math.imul(B,re)|0,r=r+Math.imul(O,ie)|0,n=(n=n+Math.imul(O,se)|0)+Math.imul(D,ie)|0,i=i+Math.imul(D,se)|0,r=r+Math.imul(M,ce)|0,n=(n=n+Math.imul(M,le)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,le)|0,r=r+Math.imul(E,de)|0,n=(n=n+Math.imul(E,pe)|0)+Math.imul(C,de)|0,i=i+Math.imul(C,pe)|0;var Me=(l+(r=r+Math.imul(k,fe)|0)|0)+((8191&(n=(n=n+Math.imul(k,me)|0)+Math.imul(S,fe)|0))<<13)|0;l=((i=i+Math.imul(S,me)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(L,ae),n=(n=Math.imul(L,re))+Math.imul(N,ae)|0,i=Math.imul(N,re),r=r+Math.imul(R,ie)|0,n=(n=n+Math.imul(R,se)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,se)|0,r=r+Math.imul(O,ce)|0,n=(n=n+Math.imul(O,le)|0)+Math.imul(D,ce)|0,i=i+Math.imul(D,le)|0,r=r+Math.imul(M,de)|0,n=(n=n+Math.imul(M,pe)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,pe)|0;var Te=(l+(r=r+Math.imul(E,fe)|0)|0)+((8191&(n=(n=n+Math.imul(E,me)|0)+Math.imul(C,fe)|0))<<13)|0;l=((i=i+Math.imul(C,me)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(L,ie),n=(n=Math.imul(L,se))+Math.imul(N,ie)|0,i=Math.imul(N,se),r=r+Math.imul(R,ce)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,le)|0,r=r+Math.imul(O,de)|0,n=(n=n+Math.imul(O,pe)|0)+Math.imul(D,de)|0,i=i+Math.imul(D,pe)|0;var je=(l+(r=r+Math.imul(M,fe)|0)|0)+((8191&(n=(n=n+Math.imul(M,me)|0)+Math.imul(T,fe)|0))<<13)|0;l=((i=i+Math.imul(T,me)|0)+(n>>>13)|0)+(je>>>26)|0,je&=67108863,r=Math.imul(L,ce),n=(n=Math.imul(L,le))+Math.imul(N,ce)|0,i=Math.imul(N,le),r=r+Math.imul(R,de)|0,n=(n=n+Math.imul(R,pe)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,pe)|0;var Oe=(l+(r=r+Math.imul(O,fe)|0)|0)+((8191&(n=(n=n+Math.imul(O,me)|0)+Math.imul(D,fe)|0))<<13)|0;l=((i=i+Math.imul(D,me)|0)+(n>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(L,de),n=(n=Math.imul(L,pe))+Math.imul(N,de)|0,i=Math.imul(N,pe);var De=(l+(r=r+Math.imul(R,fe)|0)|0)+((8191&(n=(n=n+Math.imul(R,me)|0)+Math.imul(B,fe)|0))<<13)|0;l=((i=i+Math.imul(B,me)|0)+(n>>>13)|0)+(De>>>26)|0,De&=67108863;var Ie=(l+(r=Math.imul(L,fe))|0)+((8191&(n=(n=Math.imul(L,me))+Math.imul(N,fe)|0))<<13)|0;return l=((i=Math.imul(N,me))+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,c[0]=ge,c[1]=be,c[2]=ye,c[3]=ve,c[4]=_e,c[5]=we,c[6]=xe,c[7]=ke,c[8]=Se,c[9]=Pe,c[10]=Ee,c[11]=Ce,c[12]=Ae,c[13]=Me,c[14]=Te,c[15]=je,c[16]=Oe,c[17]=De,c[18]=Ie,0!==l&&(c[19]=l,a.length++),a};function g(e,t,a){a.negative=t.negative^e.negative,a.length=e.length+t.length;for(var r=0,n=0,i=0;i<a.length-1;i++){var s=n;n=0;for(var o=67108863&r,c=Math.min(i,t.length-1),l=Math.max(0,i-e.length+1);l<=c;l++){var u=i-l,d=(0|e.words[u])*(0|t.words[l]),p=67108863&d;o=67108863&(p=p+o|0),n+=(s=(s=s+(d/67108864|0)|0)+(p>>>26)|0)>>>26,s&=67108863}a.words[i]=o,r=s,s=n}return 0!==r?a.words[i]=r:a.length--,a._strip()}function b(e,t,a){return g(e,t,a)}function y(e,t){this.x=e,this.y=t}Math.imul||(m=f),i.prototype.mulTo=function(e,t){var a=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):a<63?f(this,e,t):a<1024?g(this,e,t):b(this,e,t)},y.prototype.makeRBT=function(e){for(var t=new Array(e),a=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,a,e);return t},y.prototype.revBin=function(e,t,a){if(0===e||e===a-1)return e;for(var r=0,n=0;n<t;n++)r|=(1&e)<<t-n-1,e>>=1;return r},y.prototype.permute=function(e,t,a,r,n,i){for(var s=0;s<i;s++)r[s]=t[e[s]],n[s]=a[e[s]]},y.prototype.transform=function(e,t,a,r,n,i){this.permute(i,e,t,a,r,n);for(var s=1;s<n;s<<=1)for(var o=s<<1,c=Math.cos(2*Math.PI/o),l=Math.sin(2*Math.PI/o),u=0;u<n;u+=o)for(var d=c,p=l,h=0;h<s;h++){var f=a[u+h],m=r[u+h],g=a[u+h+s],b=r[u+h+s],y=d*g-p*b;b=d*b+p*g,g=y,a[u+h]=f+g,r[u+h]=m+b,a[u+h+s]=f-g,r[u+h+s]=m-b,h!==o&&(y=c*d-l*p,p=c*p+l*d,d=y)}},y.prototype.guessLen13b=function(e,t){var a=1|Math.max(t,e),r=1&a,n=0;for(a=a/2|0;a;a>>>=1)n++;return 1<<n+1+r},y.prototype.conjugate=function(e,t,a){if(!(a<=1))for(var r=0;r<a/2;r++){var n=e[r];e[r]=e[a-r-1],e[a-r-1]=n,n=t[r],t[r]=-t[a-r-1],t[a-r-1]=-n}},y.prototype.normalize13b=function(e,t){for(var a=0,r=0;r<t/2;r++){var n=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+a;e[r]=67108863&n,a=n<67108864?0:n/67108864|0}return e},y.prototype.convert13b=function(e,t,a,n){for(var i=0,s=0;s<t;s++)i+=0|e[s],a[2*s]=8191&i,i>>>=13,a[2*s+1]=8191&i,i>>>=13;for(s=2*t;s<n;++s)a[s]=0;r(0===i),r(0==(-8192&i))},y.prototype.stub=function(e){for(var t=new Array(e),a=0;a<e;a++)t[a]=0;return t},y.prototype.mulp=function(e,t,a){var r=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(r),i=this.stub(r),s=new Array(r),o=new Array(r),c=new Array(r),l=new Array(r),u=new Array(r),d=new Array(r),p=a.words;p.length=r,this.convert13b(e.words,e.length,s,r),this.convert13b(t.words,t.length,l,r),this.transform(s,i,o,c,r,n),this.transform(l,i,u,d,r,n);for(var h=0;h<r;h++){var f=o[h]*u[h]-c[h]*d[h];c[h]=o[h]*d[h]+c[h]*u[h],o[h]=f}return this.conjugate(o,c,r),this.transform(o,c,p,i,r,n),this.conjugate(p,i,r),this.normalize13b(p,r),a.negative=e.negative^t.negative,a.length=e.length+t.length,a._strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),b(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var a=0,n=0;n<this.length;n++){var i=(0|this.words[n])*e,s=(67108863&i)+(67108863&a);a>>=26,a+=i/67108864|0,a+=s>>>26,this.words[n]=67108863&s}return 0!==a&&(this.words[n]=a,this.length++),t?this.ineg():this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),a=0;a<t.length;a++){var r=a/26|0,n=a%26;t[a]=e.words[r]>>>n&1}return t}(e);if(0===t.length)return new i(1);for(var a=this,r=0;r<t.length&&0===t[r];r++,a=a.sqr());if(++r<t.length)for(var n=a.sqr();r<t.length;r++,n=n.sqr())0!==t[r]&&(a=a.mul(n));return a},i.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,a=e%26,n=(e-a)/26,i=67108863>>>26-a<<26-a;if(0!==a){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&i,c=(0|this.words[t])-o<<a;this.words[t]=c|s,s=o>>>26-a}s&&(this.words[t]=s,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this._strip()},i.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,a){var n;r("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var i=e%26,s=Math.min((e-i)/26,this.length),o=67108863^67108863>>>i<<i,c=a;if(n-=s,n=Math.max(0,n),c){for(var l=0;l<s;l++)c.words[l]=this.words[l];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,l=0;l<this.length;l++)this.words[l]=this.words[l+s];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=n);l--){var d=0|this.words[l];this.words[l]=u<<26-i|d>>>i,u=d&o}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(e,t,a){return r(0===this.negative),this.iushrn(e,t,a)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,a=(e-t)/26,n=1<<t;return!(this.length<=a)&&!!(this.words[a]&n)},i.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,a=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=a)return this;if(0!==t&&a++,this.length=Math.min(a,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this._strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,a){var n,i,s=e.length+a;this._expand(s);var o=0;for(n=0;n<e.length;n++){i=(0|this.words[n+a])+o;var c=(0|e.words[n])*t;o=((i-=67108863&c)>>26)-(c/67108864|0),this.words[n+a]=67108863&i}for(;n<this.length-a;n++)o=(i=(0|this.words[n+a])+o)>>26,this.words[n+a]=67108863&i;if(0===o)return this._strip();for(r(-1===o),o=0,n=0;n<this.length;n++)o=(i=-(0|this.words[n])+o)>>26,this.words[n]=67108863&i;return this.negative=1,this._strip()},i.prototype._wordDiv=function(e,t){var a=(this.length,e.length),r=this.clone(),n=e,s=0|n.words[n.length-1];0!==(a=26-this._countBits(s))&&(n=n.ushln(a),r.iushln(a),s=0|n.words[n.length-1]);var o,c=r.length-n.length;if("mod"!==t){(o=new i(null)).length=c+1,o.words=new Array(o.length);for(var l=0;l<o.length;l++)o.words[l]=0}var u=r.clone()._ishlnsubmul(n,1,c);0===u.negative&&(r=u,o&&(o.words[c]=1));for(var d=c-1;d>=0;d--){var p=67108864*(0|r.words[n.length+d])+(0|r.words[n.length+d-1]);for(p=Math.min(p/s|0,67108863),r._ishlnsubmul(n,p,d);0!==r.negative;)p--,r.negative=0,r._ishlnsubmul(n,1,d),r.isZero()||(r.negative^=1);o&&(o.words[d]=p)}return o&&o._strip(),r._strip(),"div"!==t&&0!==a&&r.iushrn(a),{div:o||null,mod:r}},i.prototype.divmod=function(e,t,a){return r(!e.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(n=o.div.neg()),"div"!==t&&(s=o.mod.neg(),a&&0!==s.negative&&s.iadd(e)),{div:n,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(n=o.div.neg()),{div:n,mod:o.mod}):0!=(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),a&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modrn(e.words[0]))}:this._wordDiv(e,t);var n,s,o},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var a=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),n=e.andln(1),i=a.cmp(r);return i<0||1===n&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var a=(1<<26)%e,n=0,i=this.length-1;i>=0;i--)n=(a*n+(0|this.words[i]))%e;return t?-n:n},i.prototype.modn=function(e){return this.modrn(e)},i.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var a=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*a;this.words[n]=i/e|0,a=i%e}return this._strip(),t?this.ineg():this},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,a=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new i(1),s=new i(0),o=new i(0),c=new i(1),l=0;t.isEven()&&a.isEven();)t.iushrn(1),a.iushrn(1),++l;for(var u=a.clone(),d=t.clone();!t.isZero();){for(var p=0,h=1;0==(t.words[0]&h)&&p<26;++p,h<<=1);if(p>0)for(t.iushrn(p);p-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(u),s.isub(d)),n.iushrn(1),s.iushrn(1);for(var f=0,m=1;0==(a.words[0]&m)&&f<26;++f,m<<=1);if(f>0)for(a.iushrn(f);f-- >0;)(o.isOdd()||c.isOdd())&&(o.iadd(u),c.isub(d)),o.iushrn(1),c.iushrn(1);t.cmp(a)>=0?(t.isub(a),n.isub(o),s.isub(c)):(a.isub(t),o.isub(n),c.isub(s))}return{a:o,b:c,gcd:a.iushln(l)}},i.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,a=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,s=new i(1),o=new i(0),c=a.clone();t.cmpn(1)>0&&a.cmpn(1)>0;){for(var l=0,u=1;0==(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,p=1;0==(a.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(a.iushrn(d);d-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);t.cmp(a)>=0?(t.isub(a),s.isub(o)):(a.isub(t),o.isub(s))}return(n=0===t.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(e),n},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),a=e.clone();t.negative=0,a.negative=0;for(var r=0;t.isEven()&&a.isEven();r++)t.iushrn(1),a.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;a.isEven();)a.iushrn(1);var n=t.cmp(a);if(n<0){var i=t;t=a,a=i}else if(0===n||0===a.cmpn(1))break;t.isub(a)}return a.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,a=(e-t)/26,n=1<<t;if(this.length<=a)return this._expand(a+1),this.words[a]|=n,this;for(var i=n,s=a;0!==i&&s<this.length;s++){var o=0|this.words[s];i=(o+=i)>>>26,o&=67108863,this.words[s]=o}return 0!==i&&(this.words[s]=i,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t,a=e<0;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;if(this._strip(),this.length>1)t=1;else{a&&(e=-e),r(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,a=this.length-1;a>=0;a--){var r=0|this.words[a],n=0|e.words[a];if(r!==n){r<n?t=-1:r>n&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new P(e)},i.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function _(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function P(e){if("string"==typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function E(e){P.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},_.prototype.ireduce=function(e){var t,a=e;do{this.split(a,this.tmp),t=(a=(a=this.imulK(a)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:a.ucmp(this.p);return 0===r?(a.words[0]=0,a.length=1):r>0?a.isub(this.p):void 0!==a.strip?a.strip():a._strip(),a},_.prototype.split=function(e,t){e.iushrn(this.n,0,t)},_.prototype.imulK=function(e){return e.imul(this.k)},n(w,_),w.prototype.split=function(e,t){for(var a=Math.min(e.length,9),r=0;r<a;r++)t.words[r]=e.words[r];if(t.length=a,e.length<=9)return e.words[0]=0,void(e.length=1);var n=e.words[9];for(t.words[t.length++]=4194303&n,r=10;r<e.length;r++){var i=0|e.words[r];e.words[r-10]=(4194303&i)<<4|n>>>22,n=i}n>>>=22,e.words[r-10]=n,0===n&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,a=0;a<e.length;a++){var r=0|e.words[a];t+=977*r,e.words[a]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(x,_),n(k,_),n(S,_),S.prototype.imulK=function(e){for(var t=0,a=0;a<e.length;a++){var r=19*(0|e.words[a])+t,n=67108863&r;r>>>=26,e.words[a]=n,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new w;else if("p224"===e)t=new x;else if("p192"===e)t=new k;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new S}return v[e]=t,t},P.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},P.prototype._verify2=function(e,t){r(0==(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},P.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},P.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},P.prototype.add=function(e,t){this._verify2(e,t);var a=e.add(t);return a.cmp(this.m)>=0&&a.isub(this.m),a._forceRed(this)},P.prototype.iadd=function(e,t){this._verify2(e,t);var a=e.iadd(t);return a.cmp(this.m)>=0&&a.isub(this.m),a},P.prototype.sub=function(e,t){this._verify2(e,t);var a=e.sub(t);return a.cmpn(0)<0&&a.iadd(this.m),a._forceRed(this)},P.prototype.isub=function(e,t){this._verify2(e,t);var a=e.isub(t);return a.cmpn(0)<0&&a.iadd(this.m),a},P.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},P.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},P.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},P.prototype.isqr=function(e){return this.imul(e,e.clone())},P.prototype.sqr=function(e){return this.mul(e,e)},P.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var a=this.m.add(new i(1)).iushrn(2);return this.pow(e,a)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);r(!n.isZero());var o=new i(1).toRed(this),c=o.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var d=this.pow(u,n),p=this.pow(e,n.addn(1).iushrn(1)),h=this.pow(e,n),f=s;0!==h.cmp(o);){for(var m=h,g=0;0!==m.cmp(o);g++)m=m.redSqr();r(g<f);var b=this.pow(d,new i(1).iushln(f-g-1));p=p.redMul(b),d=b.redSqr(),h=h.redMul(d),f=g}return p},P.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},P.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var a=new Array(16);a[0]=new i(1).toRed(this),a[1]=e;for(var r=2;r<a.length;r++)a[r]=this.mul(a[r-1],e);var n=a[0],s=0,o=0,c=t.bitLength()%26;for(0===c&&(c=26),r=t.length-1;r>=0;r--){for(var l=t.words[r],u=c-1;u>=0;u--){var d=l>>u&1;n!==a[0]&&(n=this.sqr(n)),0!==d||0!==s?(s<<=1,s|=d,(4===++o||0===r&&0===u)&&(n=this.mul(n,a[s]),o=0,s=0)):o=0}c=26}return n},P.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},P.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new E(e)},n(E,P),E.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},E.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},E.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var a=e.imul(t),r=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=a.isub(r).iushrn(this.shift),i=n;return n.cmp(this.m)>=0?i=n.isub(this.m):n.cmpn(0)<0&&(i=n.iadd(this.m)),i._forceRed(this)},E.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var a=e.mul(t),r=a.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=a.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,a(89)(e))},function(e,t,a){"use strict";const r=t;r.bignum=a(8),r.define=a(958).define,r.base=a(961),r.constants=a(962),r.decoders=a(389),r.encoders=a(387)},function(e,t,a){"use strict";const r=t;r.der=a(388),r.pem=a(959)},function(e,t,a){"use strict";const r=a(1),n=a(176).Buffer,i=a(177),s=a(179);function o(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new c,this.tree._init(e.body)}function c(e){i.call(this,"der",e)}function l(e){return e<10?"0"+e:e}e.exports=o,o.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},r(c,i),c.prototype._encodeComposite=function(e,t,a,r){const i=function(e,t,a,r){let n;"seqof"===e?e="seq":"setof"===e&&(e="set");if(s.tagByName.hasOwnProperty(e))n=s.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return r.error("Unknown tag: "+e);n=e}if(n>=31)return r.error("Multi-octet tag encoding unsupported");t||(n|=32);return n|=s.tagClassByName[a||"universal"]<<6,n}(e,t,a,this.reporter);if(r.length<128){const e=n.alloc(2);return e[0]=i,e[1]=r.length,this._createEncoderBuffer([e,r])}let o=1;for(let e=r.length;e>=256;e>>=8)o++;const c=n.alloc(2+o);c[0]=i,c[1]=128|o;for(let e=1+o,t=r.length;t>0;e--,t>>=8)c[e]=255&t;return this._createEncoderBuffer([c,r])},c.prototype._encodeStr=function(e,t){if("bitstr"===t)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===t){const t=n.alloc(2*e.length);for(let a=0;a<e.length;a++)t.writeUInt16BE(e.charCodeAt(a),2*a);return this._createEncoderBuffer(t)}return"numstr"===t?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===t?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(t)||"objDesc"===t?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+t+" unsupported")},c.prototype._encodeObjid=function(e,t,a){if("string"==typeof e){if(!t)return this.reporter.error("string objid given, but no values map found");if(!t.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=t[e].split(/[\s.]+/g);for(let t=0;t<e.length;t++)e[t]|=0}else if(Array.isArray(e)){e=e.slice();for(let t=0;t<e.length;t++)e[t]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!a){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}let r=0;for(let t=0;t<e.length;t++){let a=e[t];for(r++;a>=128;a>>=7)r++}const i=n.alloc(r);let s=i.length-1;for(let t=e.length-1;t>=0;t--){let a=e[t];for(i[s--]=127&a;(a>>=7)>0;)i[s--]=128|127&a}return this._createEncoderBuffer(i)},c.prototype._encodeTime=function(e,t){let a;const r=new Date(e);return"gentime"===t?a=[l(r.getUTCFullYear()),l(r.getUTCMonth()+1),l(r.getUTCDate()),l(r.getUTCHours()),l(r.getUTCMinutes()),l(r.getUTCSeconds()),"Z"].join(""):"utctime"===t?a=[l(r.getUTCFullYear()%100),l(r.getUTCMonth()+1),l(r.getUTCDate()),l(r.getUTCHours()),l(r.getUTCMinutes()),l(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(a,"octstr")},c.prototype._encodeNull=function(){return this._createEncoderBuffer("")},c.prototype._encodeInt=function(e,t){if("string"==typeof e){if(!t)return this.reporter.error("String int or enum given, but no values map");if(!t.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=t[e]}if("number"!=typeof e&&!n.isBuffer(e)){const t=e.toArray();!e.sign&&128&t[0]&&t.unshift(0),e=n.from(t)}if(n.isBuffer(e)){let t=e.length;0===e.length&&t++;const a=n.alloc(t);return e.copy(a),0===e.length&&(a[0]=0),this._createEncoderBuffer(a)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let a=1;for(let t=e;t>=256;t>>=8)a++;const r=new Array(a);for(let t=r.length-1;t>=0;t--)r[t]=255&e,e>>=8;return 128&r[0]&&r.unshift(0),this._createEncoderBuffer(n.from(r))},c.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},c.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},c.prototype._skipDefault=function(e,t,a){const r=this._baseState;let n;if(null===r.default)return!1;const i=e.join();if(void 0===r.defaultBuffer&&(r.defaultBuffer=this._encodeValue(r.default,t,a).join()),i.length!==r.defaultBuffer.length)return!1;for(n=0;n<i.length;n++)if(i[n]!==r.defaultBuffer[n])return!1;return!0}},function(e,t,a){"use strict";const r=t;r.der=a(390),r.pem=a(960)},function(e,t,a){"use strict";const r=a(1),n=a(8),i=a(91).DecoderBuffer,s=a(177),o=a(179);function c(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new l,this.tree._init(e.body)}function l(e){s.call(this,"der",e)}function u(e,t){let a=e.readUInt8(t);if(e.isError(a))return a;const r=o.tagClass[a>>6],n=0==(32&a);if(31==(31&a)){let r=a;for(a=0;128==(128&r);){if(r=e.readUInt8(t),e.isError(r))return r;a<<=7,a|=127&r}}else a&=31;return{cls:r,primitive:n,tag:a,tagStr:o.tag[a]}}function d(e,t,a){let r=e.readUInt8(a);if(e.isError(r))return r;if(!t&&128===r)return null;if(0==(128&r))return r;const n=127&r;if(n>4)return e.error("length octect is too long");r=0;for(let t=0;t<n;t++){r<<=8;const t=e.readUInt8(a);if(e.isError(t))return t;r|=t}return r}e.exports=c,c.prototype.decode=function(e,t){return i.isDecoderBuffer(e)||(e=new i(e,t)),this.tree._decode(e,t)},r(l,s),l.prototype._peekTag=function(e,t,a){if(e.isEmpty())return!1;const r=e.save(),n=u(e,'Failed to peek tag: "'+t+'"');return e.isError(n)?n:(e.restore(r),n.tag===t||n.tagStr===t||n.tagStr+"of"===t||a)},l.prototype._decodeTag=function(e,t,a){const r=u(e,'Failed to decode tag of "'+t+'"');if(e.isError(r))return r;let n=d(e,r.primitive,'Failed to get length of "'+t+'"');if(e.isError(n))return n;if(!a&&r.tag!==t&&r.tagStr!==t&&r.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(r.primitive||null!==n)return e.skip(n,'Failed to match body of: "'+t+'"');const i=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(n=e.offset-i.offset,e.restore(i),e.skip(n,'Failed to match body of: "'+t+'"'))},l.prototype._skipUntilEnd=function(e,t){for(;;){const a=u(e,t);if(e.isError(a))return a;const r=d(e,a.primitive,t);if(e.isError(r))return r;let n;if(n=a.primitive||null!==r?e.skip(r):this._skipUntilEnd(e,t),e.isError(n))return n;if("end"===a.tagStr)break}},l.prototype._decodeList=function(e,t,a,r){const n=[];for(;!e.isEmpty();){const t=this._peekTag(e,"end");if(e.isError(t))return t;const i=a.decode(e,"der",r);if(e.isError(i)&&t)break;n.push(i)}return n},l.prototype._decodeStr=function(e,t){if("bitstr"===t){const t=e.readUInt8();return e.isError(t)?t:{unused:t,data:e.raw()}}if("bmpstr"===t){const t=e.raw();if(t.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");let a="";for(let e=0;e<t.length/2;e++)a+=String.fromCharCode(t.readUInt16BE(2*e));return a}if("numstr"===t){const t=e.raw().toString("ascii");return this._isNumstr(t)?t:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){const t=e.raw().toString("ascii");return this._isPrintstr(t)?t:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},l.prototype._decodeObjid=function(e,t,a){let r;const n=[];let i=0,s=0;for(;!e.isEmpty();)s=e.readUInt8(),i<<=7,i|=127&s,0==(128&s)&&(n.push(i),i=0);128&s&&n.push(i);const o=n[0]/40|0,c=n[0]%40;if(r=a?n:[o,c].concat(n.slice(1)),t){let e=t[r.join(" ")];void 0===e&&(e=t[r.join(".")]),void 0!==e&&(r=e)}return r},l.prototype._decodeTime=function(e,t){const a=e.raw().toString();let r,n,i,s,o,c;if("gentime"===t)r=0|a.slice(0,4),n=0|a.slice(4,6),i=0|a.slice(6,8),s=0|a.slice(8,10),o=0|a.slice(10,12),c=0|a.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");r=0|a.slice(0,2),n=0|a.slice(2,4),i=0|a.slice(4,6),s=0|a.slice(6,8),o=0|a.slice(8,10),c=0|a.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,n-1,i,s,o,c,0)},l.prototype._decodeNull=function(){return null},l.prototype._decodeBool=function(e){const t=e.readUInt8();return e.isError(t)?t:0!==t},l.prototype._decodeInt=function(e,t){const a=e.raw();let r=new n(a);return t&&(r=t[r.toString(10)]||r),r},l.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree}},function(e){e.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},function(e,t,a){"use strict";var r=t;r.base=a(122),r.short=a(970),r.mont=a(971),r.edwards=a(972)},function(e,t,a){var r=a(74),n=a(2).Buffer;function i(e){var t=n.allocUnsafe(4);return t.writeUInt32BE(e,0),t}e.exports=function(e,t){for(var a,s=n.alloc(0),o=0;s.length<t;)a=i(o++),s=n.concat([s,r("sha1").update(e).update(a).digest()]);return s.slice(0,t)}},function(e,t){e.exports=function(e,t){for(var a=e.length,r=-1;++r<a;)e[r]^=t[r];return e}},function(e,t,a){var r=a(8),n=a(2).Buffer;e.exports=function(e,t){return n.from(e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed().toArray())}},function(e){e.exports=JSON.parse('{"COMPRESSED_TYPE_INVALID":"compressed should be a boolean","EC_PRIVATE_KEY_TYPE_INVALID":"private key should be a Buffer","EC_PRIVATE_KEY_LENGTH_INVALID":"private key length is invalid","EC_PRIVATE_KEY_RANGE_INVALID":"private key range is invalid","EC_PRIVATE_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting private key is invalid","EC_PRIVATE_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PRIVATE_KEY_EXPORT_DER_FAIL":"couldn\'t export to DER format","EC_PRIVATE_KEY_IMPORT_DER_FAIL":"couldn\'t import from DER format","EC_PUBLIC_KEYS_TYPE_INVALID":"public keys should be an Array","EC_PUBLIC_KEYS_LENGTH_INVALID":"public keys Array should have at least 1 element","EC_PUBLIC_KEY_TYPE_INVALID":"public key should be a Buffer","EC_PUBLIC_KEY_LENGTH_INVALID":"public key length is invalid","EC_PUBLIC_KEY_PARSE_FAIL":"the public key could not be parsed or is invalid","EC_PUBLIC_KEY_CREATE_FAIL":"private was invalid, try again","EC_PUBLIC_KEY_TWEAK_ADD_FAIL":"tweak out of range or resulting public key is invalid","EC_PUBLIC_KEY_TWEAK_MUL_FAIL":"tweak out of range","EC_PUBLIC_KEY_COMBINE_FAIL":"the sum of the public keys is not valid","ECDH_FAIL":"scalar was invalid (zero or overflow)","ECDSA_SIGNATURE_TYPE_INVALID":"signature should be a Buffer","ECDSA_SIGNATURE_LENGTH_INVALID":"signature length is invalid","ECDSA_SIGNATURE_PARSE_FAIL":"couldn\'t parse signature","ECDSA_SIGNATURE_PARSE_DER_FAIL":"couldn\'t parse DER signature","ECDSA_SIGNATURE_SERIALIZE_DER_FAIL":"couldn\'t serialize signature to DER format","ECDSA_SIGN_FAIL":"nonce generation function failed or private key is invalid","ECDSA_RECOVER_FAIL":"couldn\'t recover public key from signature","MSG32_TYPE_INVALID":"message should be a Buffer","MSG32_LENGTH_INVALID":"message length is invalid","OPTIONS_TYPE_INVALID":"options should be an Object","OPTIONS_DATA_TYPE_INVALID":"options.data should be a Buffer","OPTIONS_DATA_LENGTH_INVALID":"options.data length is invalid","OPTIONS_NONCEFN_TYPE_INVALID":"options.noncefn should be a Function","RECOVERY_ID_TYPE_INVALID":"recovery should be a Number","RECOVERY_ID_VALUE_INVALID":"recovery should have value between -1 and 4","TWEAK_TYPE_INVALID":"tweak should be a Buffer","TWEAK_LENGTH_INVALID":"tweak length is invalid"}')},function(e,t,a){"use strict";var r=t;r.base=a(123),r.short=a(1002),r.mont=a(1003),r.edwards=a(1004)},function(e,t){},function(e,t,a){"use strict";const r=a(1022),n={null:null,true:!0,false:!1};e.exports=function(e){if("?"!==e.substr(0,1))throw new Error("A valid query string passed to parseQuery should begin with '?'");if(!(e=e.substr(1)))return{};if("{"===e.substr(0,1)&&"}"===e.substr(-1))return r.parse(e);const t=e.split(/[,&]/g),a={};return t.forEach(e=>{const t=e.indexOf("=");if(t>=0){let r=e.substr(0,t),i=decodeURIComponent(e.substr(t+1));n.hasOwnProperty(i)&&(i=n[i]),"[]"===r.substr(-2)?(r=decodeURIComponent(r.substr(0,r.length-2)),Array.isArray(a[r])||(a[r]=[]),a[r].push(i)):(r=decodeURIComponent(r),a[r]=i)}else"-"===e.substr(0,1)?a[decodeURIComponent(e.substr(1))]=!1:"+"===e.substr(0,1)?a[decodeURIComponent(e.substr(1))]=!0:a[decodeURIComponent(e)]=!0}),a}},function(e,t,a){"use strict";const r={26:"abcdefghijklmnopqrstuvwxyz",32:"123456789abcdefghjkmnpqrstuvwxyz",36:"0123456789abcdefghijklmnopqrstuvwxyz",49:"abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",52:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",58:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",62:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",64:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"};e.exports=function(e,t,n,i){t=t||"md5",i=i||9999;const s=a(115).createHash(t);return s.update(e),"base26"===n||"base32"===n||"base36"===n||"base49"===n||"base52"===n||"base58"===n||"base62"===n||"base64"===n?function(e,t){const n=r[t];if(!n)throw new Error("Unknown encoding base"+t);const i=e.length,s=a(40);s.RM=s.DP=0;let o=new s(0);for(let t=i-1;t>=0;t--)o=o.times(256).plus(e[t]);let c="";for(;o.gt(0);)c=n[o.mod(t)]+c,o=o.div(t);return s.DP=20,s.RM=1,c}(s.digest(),n.substr(4)).substr(0,i):s.digest(n||"hex").substr(0,i)}},function(e,t,a){"use strict";var r=a(79);e.exports=function(e){r.copy(e,this)}},function(e,t,a){"use strict";e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var a,r="boolean"==typeof t.cycles&&t.cycles,n=t.cmp&&(a=t.cmp,function(e){return function(t,r){var n={key:t,value:e[t]},i={key:r,value:e[r]};return a(n,i)}}),i=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var a,s;if(Array.isArray(t)){for(s="[",a=0;a<t.length;a++)a&&(s+=","),s+=e(t[a])||"null";return s+"]"}if(null===t)return"null";if(-1!==i.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var o=i.push(t)-1,c=Object.keys(t).sort(n&&n(t));for(s="",a=0;a<c.length;a++){var l=c[a],u=e(t[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return i.splice(o,1),"{"+s+"}"}}(e)}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r="",n=!0===e.schema.$async,i=e.util.schemaHasRulesExcept(e.schema,e.RULES.all,"$ref"),s=e.self._getId(e.schema);if(e.opts.strictKeywords){var o=e.util.schemaUnknownRules(e.schema,e.RULES.keywords);if(o){var c="unknown keyword: "+o;if("log"!==e.opts.strictKeywords)throw new Error(c);e.logger.warn(c)}}if(e.isTop&&(r+=" var validate = ",n&&(e.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(e.opts.sourceCode||e.opts.processCode)&&(r+=" /*# sourceURL="+s+" */ ")),"boolean"==typeof e.schema||!i&&!e.schema.$ref){var l=e.level,u=e.dataLevel,d=e.schema["false schema"],p=e.schemaPath+e.util.getProperty("false schema"),h=e.errSchemaPath+"/false schema",f=!e.opts.allErrors,m="data"+(u||""),g="valid"+l;if(!1===e.schema){e.isTop?f=!0:r+=" var "+g+" = false; ",(X=X||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'false schema' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'boolean schema is false' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var b=r;r=X.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else e.isTop?r+=n?" return data; ":" validate.errors = null; return true; ":r+=" var "+g+" = true; ";return e.isTop&&(r+=" }; return validate; "),r}if(e.isTop){var y=e.isTop;l=e.level=0,u=e.dataLevel=0,m="data";if(e.rootId=e.resolve.fullPath(e.self._getId(e.root.schema)),e.baseId=e.baseId||e.rootId,delete e.isTop,e.dataPathArr=[void 0],void 0!==e.schema.default&&e.opts.useDefaults&&e.opts.strictDefaults){var v="default is ignored in the schema root";if("log"!==e.opts.strictDefaults)throw new Error(v);e.logger.warn(v)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{l=e.level,m="data"+((u=e.dataLevel)||"");if(s&&(e.baseId=e.resolve.url(e.baseId,s)),n&&!e.async)throw new Error("async schema in sync schema");r+=" var errs_"+l+" = errors;"}g="valid"+l,f=!e.opts.allErrors;var _="",w="",x=e.schema.type,k=Array.isArray(x);if(x&&e.opts.nullable&&!0===e.schema.nullable&&(k?-1==x.indexOf("null")&&(x=x.concat("null")):"null"!=x&&(x=[x,"null"],k=!0)),k&&1==x.length&&(x=x[0],k=!1),e.schema.$ref&&i){if("fail"==e.opts.extendRefs)throw new Error('$ref: validation keywords used in schema at path "'+e.errSchemaPath+'" (see option extendRefs)');!0!==e.opts.extendRefs&&(i=!1,e.logger.warn('$ref: keywords ignored in schema at path "'+e.errSchemaPath+'"'))}if(e.schema.$comment&&e.opts.$comment&&(r+=" "+e.RULES.all.$comment.code(e,"$comment")),x){if(e.opts.coerceTypes)var S=e.util.coerceToTypes(e.opts.coerceTypes,x);var P=e.RULES.types[x];if(S||k||!0===P||P&&!Q(P)){p=e.schemaPath+".type",h=e.errSchemaPath+"/type",p=e.schemaPath+".type",h=e.errSchemaPath+"/type";var E=k?"checkDataTypes":"checkDataType";if(r+=" if ("+e.util[E](x,m,!0)+") { ",S){var C="dataType"+l,A="coerced"+l;r+=" var "+C+" = typeof "+m+"; ","array"==e.opts.coerceTypes&&(r+=" if ("+C+" == 'object' && Array.isArray("+m+")) "+C+" = 'array'; "),r+=" var "+A+" = undefined; ";var M="",T=S;if(T)for(var j,O=-1,D=T.length-1;O<D;)j=T[O+=1],O&&(r+=" if ("+A+" === undefined) { ",M+="}"),"array"==e.opts.coerceTypes&&"array"!=j&&(r+=" if ("+C+" == 'array' && "+m+".length == 1) { "+A+" = "+m+" = "+m+"[0]; "+C+" = typeof "+m+";  } "),"string"==j?r+=" if ("+C+" == 'number' || "+C+" == 'boolean') "+A+" = '' + "+m+"; else if ("+m+" === null) "+A+" = ''; ":"number"==j||"integer"==j?(r+=" if ("+C+" == 'boolean' || "+m+" === null || ("+C+" == 'string' && "+m+" && "+m+" == +"+m+" ","integer"==j&&(r+=" && !("+m+" % 1)"),r+=")) "+A+" = +"+m+"; "):"boolean"==j?r+=" if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+A+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+A+" = true; ":"null"==j?r+=" if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+A+" = null; ":"array"==e.opts.coerceTypes&&"array"==j&&(r+=" if ("+C+" == 'string' || "+C+" == 'number' || "+C+" == 'boolean' || "+m+" == null) "+A+" = ["+m+"]; ");r+=" "+M+" if ("+A+" === undefined) {   ",(X=X||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",r+=k?""+x.join(","):""+x,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=k?""+x.join(","):""+x,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";b=r;r=X.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  ";var I=u?"data"+(u-1||""):"parentData";r+=" "+m+" = "+A+"; ",u||(r+="if ("+I+" !== undefined)"),r+=" "+I+"["+(u?e.dataPathArr[u]:"parentDataProperty")+"] = "+A+"; } "}else{(X=X||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",r+=k?""+x.join(","):""+x,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=k?""+x.join(","):""+x,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";b=r;r=X.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(e.schema.$ref&&!i)r+=" "+e.RULES.all.$ref.code(e,"$ref")+" ",f&&(r+=" } if (errors === ",r+=y?"0":"errs_"+l,r+=") { ",w+="}");else{var R=e.RULES;if(R)for(var B=-1,q=R.length-1;B<q;)if(Q(P=R[B+=1])){if(P.type&&(r+=" if ("+e.util.checkDataType(P.type,m)+") { "),e.opts.useDefaults)if("object"==P.type&&e.schema.properties){d=e.schema.properties;var L=Object.keys(d);if(L)for(var N,F=-1,U=L.length-1;F<U;){if(void 0!==(H=d[N=L[F+=1]]).default){var $=m+e.util.getProperty(N);if(e.compositeRule){if(e.opts.strictDefaults){v="default is ignored for: "+$;if("log"!==e.opts.strictDefaults)throw new Error(v);e.logger.warn(v)}}else r+=" if ("+$+" === undefined ","empty"==e.opts.useDefaults&&(r+=" || "+$+" === null || "+$+" === '' "),r+=" ) "+$+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(H.default)+" ":r+=" "+JSON.stringify(H.default)+" ",r+="; "}}}else if("array"==P.type&&Array.isArray(e.schema.items)){var z=e.schema.items;if(z){O=-1;for(var H,G=z.length-1;O<G;)if(void 0!==(H=z[O+=1]).default){$=m+"["+O+"]";if(e.compositeRule){if(e.opts.strictDefaults){v="default is ignored for: "+$;if("log"!==e.opts.strictDefaults)throw new Error(v);e.logger.warn(v)}}else r+=" if ("+$+" === undefined ","empty"==e.opts.useDefaults&&(r+=" || "+$+" === null || "+$+" === '' "),r+=" ) "+$+" = ","shared"==e.opts.useDefaults?r+=" "+e.useDefault(H.default)+" ":r+=" "+JSON.stringify(H.default)+" ",r+="; "}}}var K=P.rules;if(K)for(var W,V=-1,Y=K.length-1;V<Y;)if(Z(W=K[V+=1])){var J=W.code(e,W.keyword,P.type);J&&(r+=" "+J+" ",f&&(_+="}"))}if(f&&(r+=" "+_+" ",_=""),P.type&&(r+=" } ",x&&x===P.type&&!S)){r+=" else { ";var X;p=e.schemaPath+".type",h=e.errSchemaPath+"/type";(X=X||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'type' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(h)+" , params: { type: '",r+=k?""+x.join(","):""+x,r+="' } ",!1!==e.opts.messages&&(r+=" , message: 'should be ",r+=k?""+x.join(","):""+x,r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+p+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";b=r;r=X.pop(),!e.compositeRule&&f?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}f&&(r+=" if (errors === ",r+=y?"0":"errs_"+l,r+=") { ",w+="}")}}function Q(e){for(var t=e.rules,a=0;a<t.length;a++)if(Z(t[a]))return!0}function Z(t){return void 0!==e.schema[t.keyword]||t.implements&&function(t){for(var a=t.implements,r=0;r<a.length;r++)if(void 0!==e.schema[a[r]])return!0}(t)}return f&&(r+=" "+w+" "),y?(n?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+g+" = errors === errs_"+l+";",r=e.util.cleanUpCode(r),y&&(r=e.util.finalCleanUpCode(r,n)),r}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r,n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),p=e.opts.$data&&o&&o.$data;p?(n+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",r="schema"+i):r=o;var h="maximum"==t,f=h?"exclusiveMaximum":"exclusiveMinimum",m=e.schema[f],g=e.opts.$data&&m&&m.$data,b=h?"<":">",y=h?">":"<",v=void 0;if(g){var _=e.util.getData(m.$data,s,e.dataPathArr),w="exclusive"+i,x="exclType"+i,k="exclIsNumber"+i,S="' + "+(C="op"+i)+" + '";n+=" var schemaExcl"+i+" = "+_+"; ",n+=" var "+w+"; var "+x+" = typeof "+(_="schemaExcl"+i)+"; if ("+x+" != 'boolean' && "+x+" != 'undefined' && "+x+" != 'number') { ";var P;v=f;(P=P||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(v||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: {} ",!1!==e.opts.messages&&(n+=" , message: '"+f+" should be boolean' "),e.opts.verbose&&(n+=" , schema: validate.schema"+c+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var E=n;n=P.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } else if ( ",p&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),n+=" "+x+" == 'number' ? ( ("+w+" = "+r+" === undefined || "+_+" "+b+"= "+r+") ? "+d+" "+y+"= "+_+" : "+d+" "+y+" "+r+" ) : ( ("+w+" = "+_+" === true) ? "+d+" "+y+"= "+r+" : "+d+" "+y+" "+r+" ) || "+d+" !== "+d+") { var op"+i+" = "+w+" ? '"+b+"' : '"+b+"='; ",void 0===o&&(v=f,l=e.errSchemaPath+"/"+f,r=_,p=g)}else{S=b;if((k="number"==typeof m)&&p){var C="'"+S+"'";n+=" if ( ",p&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),n+=" ( "+r+" === undefined || "+m+" "+b+"= "+r+" ? "+d+" "+y+"= "+m+" : "+d+" "+y+" "+r+" ) || "+d+" !== "+d+") { "}else{k&&void 0===o?(w=!0,v=f,l=e.errSchemaPath+"/"+f,r=m,y+="="):(k&&(r=Math[h?"min":"max"](m,o)),m===(!k||r)?(w=!0,v=f,l=e.errSchemaPath+"/"+f,y+="="):(w=!1,S+="="));C="'"+S+"'";n+=" if ( ",p&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),n+=" "+d+" "+y+" "+r+" || "+d+" !== "+d+") { "}}v=v||t,(P=P||[]).push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(v||"_limit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { comparison: "+C+", limit: "+r+", exclusive: "+w+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be "+S+" ",n+=p?"' + "+r:r+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+o,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";E=n;return n=P.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+E+"]); ":n+=" validate.errors = ["+E+"]; return false; ":n+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { "),n}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r,n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),p=e.opts.$data&&o&&o.$data;p?(n+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",r="schema"+i):r=o,n+="if ( ",p&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),n+=" "+d+".length "+("maxItems"==t?">":"<")+" "+r+") { ";var h=t,f=f||[];f.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(h||"_limitItems")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxItems"==t?"more":"fewer",n+=" than ",n+=p?"' + "+r+" + '":""+o,n+=" items' "),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+o,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var m=n;return n=f.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r,n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),p=e.opts.$data&&o&&o.$data;p?(n+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",r="schema"+i):r=o;var h="maxLength"==t?">":"<";n+="if ( ",p&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),!1===e.opts.unicode?n+=" "+d+".length ":n+=" ucs2length("+d+") ",n+=" "+h+" "+r+") { ";var f=t,m=m||[];m.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(f||"_limitLength")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT be ",n+="maxLength"==t?"longer":"shorter",n+=" than ",n+=p?"' + "+r+" + '":""+o,n+=" characters' "),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+o,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var g=n;return n=m.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+g+"]); ":n+=" validate.errors = ["+g+"]; return false; ":n+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r,n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),p=e.opts.$data&&o&&o.$data;p?(n+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",r="schema"+i):r=o,n+="if ( ",p&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'number') || "),n+=" Object.keys("+d+").length "+("maxProperties"==t?">":"<")+" "+r+") { ";var h=t,f=f||[];f.push(n),n="",!1!==e.createErrors?(n+=" { keyword: '"+(h||"_limitProperties")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { limit: "+r+" } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have ",n+="maxProperties"==t?"more":"fewer",n+=" than ",n+=p?"' + "+r+" + '":""+o,n+=" properties' "),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+o,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var m=n;return n=f.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+m+"]); ":n+=" validate.errors = ["+m+"]; return false; ":n+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},function(e,t,a){"use strict";var r=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,n=/t|\s/i,i={date:o,time:c,"date-time":function(e,t){if(!e||!t)return;e=e.split(n),t=t.split(n);var a=o(e[0],t[0]);if(void 0===a)return;return a||c(e[1],t[1])}},s={type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};function o(e,t){if(e&&t)return e>t?1:e<t?-1:e===t?0:void 0}function c(e,t){if(e&&t&&(e=e.match(r),t=t.match(r),e&&t))return(e=e[1]+e[2]+e[3]+(e[4]||""))>(t=t[1]+t[2]+t[3]+(t[4]||""))?1:e<t?-1:e===t?0:void 0}e.exports=function(e){var t="format"+e;return function r(n){return r.definition={type:"string",inline:a(1082),statements:!0,errors:"full",dependencies:["format"],metaSchema:{anyOf:[{type:"string"},s]}},n.addKeyword(t,r.definition),n.addKeyword("formatExclusive"+e,{dependencies:["format"+e],metaSchema:{anyOf:[{type:"boolean"},s]}}),function(e){var t=e._formats;for(var a in i){var r=t[a];("object"!=typeof r||r instanceof RegExp||!r.validate)&&(r=t[a]={validate:r}),r.compare||(r.compare=i[a])}}(n),n}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const r=a(1091),n={type:1,not:1,oneOf:1,anyOf:1,if:1,enum:1,const:1,instanceof:1,required:2,pattern:2,patternRequired:2,format:2,formatMinimum:2,formatMaximum:2,minimum:2,exclusiveMinimum:2,maximum:2,exclusiveMaximum:2,multipleOf:2,uniqueItems:2,contains:2,minLength:2,maxLength:2,minItems:2,maxItems:2,minProperties:2,maxProperties:2,dependencies:2,propertyNames:2,additionalItems:2,additionalProperties:2,absolutePath:2};function i(e,t){const a=e.reduce((e,a)=>Math.max(e,t(a)),0);return e.filter(e=>t(e)===a)}function s(e,t){let a=e.length-1;const r=t=>0!==e[a].schemaPath.indexOf(t);for(;a>-1&&!t.every(r);)if("anyOf"===e[a].keyword||"oneOf"===e[a].keyword){const t=o(e[a]),r=s(e.slice(0,a),t.concat(e[a].schemaPath));a=r-1}else a-=1;return a+1}function o(e){const{schema:t}=e;return Array.isArray(t)?t.map(({$ref:e})=>e).filter(e=>e):[]}function c(e,t){return e.replace(/\n(?!$)/g,"\n"+t)}function l(e){return"object"==typeof e&&null!==e}function u(e){return"number"===e.type||void 0!==e.minimum||void 0!==e.exclusiveMinimum||void 0!==e.maximum||void 0!==e.exclusiveMaximum||void 0!==e.multipleOf}function d(e){return"integer"===e.type||void 0!==e.minimum||void 0!==e.exclusiveMinimum||void 0!==e.maximum||void 0!==e.exclusiveMaximum||void 0!==e.multipleOf}function p(e){return"string"===e.type||void 0!==e.minLength||void 0!==e.maxLength||void 0!==e.pattern||void 0!==e.format||void 0!==e.formatMinimum||void 0!==e.formatMaximum}function h(e){return"array"===e.type||"number"==typeof e.minItems||"number"==typeof e.maxItems||void 0!==e.uniqueItems||void 0!==e.items||void 0!==e.additionalItems||void 0!==e.contains}function f(e){return"object"===e.type||void 0!==e.minProperties||void 0!==e.maxProperties||void 0!==e.required||void 0!==e.properties||void 0!==e.patternProperties||void 0!==e.additionalProperties||void 0!==e.dependencies||void 0!==e.propertyNames||void 0!==e.patternRequired}function m(e){if(!e.type){if(u(e)||d(e))return" | should be any non-number";if(p(e))return" | should be any non-string";if(h(e))return" | should be any non-array";if(f(e))return" | should be any non-object"}return""}function g(e){const t=[],a=new r;"number"==typeof e.minimum&&a.left(e.minimum),"number"==typeof e.exclusiveMinimum&&a.left(e.exclusiveMinimum,!0),"number"==typeof e.maximum&&a.right(e.maximum),"number"==typeof e.exclusiveMaximum&&a.right(e.exclusiveMaximum,!0);const n=a.format();return n&&t.push(n),"number"==typeof e.multipleOf&&t.push("should be multiple of "+e.multipleOf),t}class b extends Error{constructor(e,t,a={}){super(),this.name="ValidationError",this.errors=e,this.schema=t,this.headerName=a.name||"Object",this.baseDataPath=a.baseDataPath||"configuration",this.postFormatter=a.postFormatter||null;const r=`Invalid ${this.baseDataPath} object. ${this.headerName} has been initialised using ${n=this.baseDataPath,/^[aeiou]/i.test(n)?"an":"a"} ${this.baseDataPath} object that does not match the API schema.\n`;var n;this.message=`${r}${this.formatValidationErrors(e)}`,Error.captureStackTrace(this,this.constructor)}getSchemaPart(e){const t=e.split("/");let a=this.schema;for(let e=1;e<t.length;e++){const r=a[t[e]];if(!r)break;a=r}return a}formatSchema(e,t=[]){const a=(a,r)=>r?t.includes(a)?"(recursive)":this.formatSchema(a,t.concat(e)):this.formatSchema(a,t);if(e.not&&!f(e))return"non "+a(e.not);if(e.instanceof){if(Array.isArray(e.instanceof))return e.instanceof.map(a).join(" | ");switch(e.instanceof){case"Function":return"function";case"RegExp":return"RegExp"}}if(e.enum)return e.enum.map(e=>JSON.stringify(e)).join(" | ");if(void 0!==e.const)return JSON.stringify(e.const);if(e.oneOf)return e.oneOf.map(a).join(" | ");if(e.anyOf)return e.anyOf.map(a).join(" | ");if(e.allOf)return e.allOf.map(a).join(" & ");if(e.if)return`if ${a(e.if)} then ${a(e.then)}${e.else?" else "+a(e.else):""}`;if(e.$ref)return a(this.getSchemaPart(e.$ref),!0);if(u(e)||d(e)){const t="integer"===e.type?"integer":"number",a=function(e){return(u(e)||d(e))&&(t=g(e)).length>0?`(${t.join(", ")})`:"";var t}(e);return`${t}${a.length>0?" "+a:""}`}if(p(e)){let t="string";const a=[];if("number"==typeof e.minLength)if(1===e.minLength)t="non-empty string";else if(0!==e.minLength){const t=e.minLength-1;a.push(`should be longer than ${t} character${t>1?"s":""}`)}return"number"==typeof e.maxLength&&(0===e.maxLength?t="empty string":a.push(`should be shorter than ${e.maxLength+1} characters`)),e.pattern&&a.push("should match pattern "+JSON.stringify(e.pattern)),e.format&&a.push("should match format "+JSON.stringify(e.format)),e.formatMinimum&&a.push(`should be ${e.formatExclusiveMinimum?">":">="} ${JSON.stringify(e.formatMinimum)}`),e.formatMaximum&&a.push(`should be ${e.formatExclusiveMaximum?"<":"<="} ${JSON.stringify(e.formatMaximum)}`),`${t}${a.length>0?` (${a.join(", ")})`:""}`}if(function(e){return"boolean"===e.type}(e))return"boolean";if(h(e)){const t=[];"number"==typeof e.minItems&&t.push(`should not have fewer than ${e.minItems} item${e.minItems>1?"s":""}`),"number"==typeof e.maxItems&&t.push(`should not have more than ${e.maxItems} item${e.maxItems>1?"s":""}`),e.uniqueItems&&t.push("should not have duplicate items");const r=void 0===e.additionalItems||Boolean(e.additionalItems);let n="";return e.items?Array.isArray(e.items)&&e.items.length>0?(n=""+e.items.map(a).join(", "),r&&l(e.additionalItems)&&Object.keys(e.additionalItems).length>0&&t.push("additional items should be "+a(e.additionalItems))):n=e.items&&Object.keys(e.items).length>0?""+a(e.items):"any":n="any",e.contains&&Object.keys(e.contains).length>0&&t.push(`should contains at least one ${this.formatSchema(e.contains)} item`),`[${n}${r?", ...":""}]${t.length>0?` (${t.join(", ")})`:""}`}if(f(e)){const t=[];if("number"==typeof e.minProperties&&t.push(`should not have fewer than ${e.minProperties} ${e.minProperties>1?"properties":"property"}`),"number"==typeof e.maxProperties&&t.push(`should not have more than ${e.maxProperties} ${e.minProperties>1?"properties":"property"}`),e.patternProperties&&Object.keys(e.patternProperties).length>0){const a=Object.keys(e.patternProperties);t.push(`additional property names should match pattern${a.length>1?"s":""} ${a.map(e=>JSON.stringify(e)).join(" | ")}`)}const r=e.properties?Object.keys(e.properties):[],n=e.required?e.required:[],i=[...new Set([].concat(n).concat(r))],s=void 0===e.additionalProperties||Boolean(e.additionalProperties),o=i.map(e=>`${e}${n.includes(e)?"":"?"}`).concat(s?l(e.additionalProperties)?["<key>: "+a(e.additionalProperties)]:["…"]:[]).join(", ");return e.dependencies&&Object.keys(e.dependencies).forEach(r=>{const n=e.dependencies[r];Array.isArray(n)?t.push(`should have ${n.length>1?"properties":"property"} ${n.map(e=>`'${e}'`).join(", ")} when property '${r}' is present`):t.push(`should be valid according to the schema ${a(n)} when property '${r}' is present`)}),e.propertyNames&&Object.keys(e.propertyNames).length>0&&t.push("each property name should match format "+JSON.stringify(e.propertyNames.format)),e.patternRequired&&e.patternRequired.length>0&&t.push("should have property matching pattern "+e.patternRequired.map(e=>JSON.stringify(e))),`object {${o?` ${o} `:""}}${t.length>0?` (${t.join(", ")})`:""}`}return function(e){return"null"===e.type}(e)?"null":Array.isArray(e.type)?""+e.type.map(e=>e).join(" | "):JSON.stringify(e,null,2)}getSchemaPartText(e,t,a=!1){if(t)for(let a=0;a<t.length;a++){const r=e[t[a]];if(!r)break;e=r}for(;e.$ref;)e=this.getSchemaPart(e.$ref);let r=`${this.formatSchema(e)}${a?".":""}`;return e.description&&(r+="\n-> "+e.description),r}getSchemaPartDescription(e){for(;e.$ref;)e=this.getSchemaPart(e.$ref);return e.description?"\n-> "+e.description:""}formatValidationError(e){const t=`${this.baseDataPath}${e.dataPath}`;switch(e.keyword){case"type":switch(e.params.type){case"number":case"integer":case"string":case"boolean":return`${t} should be a ${this.getSchemaPartText(e.parentSchema,!1,!0)}`;case"array":return`${t} should be an array:\n${this.getSchemaPartText(e.parentSchema)}`;case"object":return`${t} should be an object:\n${this.getSchemaPartText(e.parentSchema)}`;case"null":return`${t} should be a ${this.getSchemaPartText(e.parentSchema,!1,!0)}`;default:return`${t} should be:\n${this.getSchemaPartText(e.parentSchema)}`}case"instanceof":return`${t} should be an instance of ${this.getSchemaPartText(e.parentSchema)}.`;case"pattern":return`${t} should match pattern ${JSON.stringify(e.params.pattern)}${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"format":return`${t} should match format ${JSON.stringify(e.params.format)}${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"formatMinimum":case"formatMaximum":return`${t} should be ${e.params.comparison} ${JSON.stringify(e.params.limit)}${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"minimum":case"maximum":case"exclusiveMinimum":case"exclusiveMaximum":{const a=g(e.parentSchema);return 0===a.length&&a.push(`should be ${e.params.comparison} ${e.params.limit}`),`${t} ${a.join(" ")}${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`}case"multipleOf":return`${t} should be multiple of ${e.params.multipleOf}${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"patternRequired":return`${t} should have property matching pattern ${JSON.stringify(e.params.missingPattern)}${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"minLength":{if(1===e.params.limit)return`${t} should be an non-empty string${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;const a=e.params.limit-1;return`${t} should be longer than ${a} character${a>1?"s":""}${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`}case"minItems":return 1===e.params.limit?`${t} should be an non-empty array${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`:`${t} should not have fewer than ${e.params.limit} items${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"minProperties":return 1===e.params.limit?`${t} should be an non-empty object${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`:`${t} should not have fewer than ${e.params.limit} properties${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"maxLength":return`${t} should be shorter than ${e.params.limit+1} characters${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"maxItems":return`${t} should not have more than ${e.params.limit} items${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"maxProperties":return`${t} should not have more than ${e.params.limit} properties${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"uniqueItems":return`${t} should not contain the item '${e.data[e.params.i]}' twice${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"additionalItems":return`${t} should not have more than ${e.params.limit} items${m(e.parentSchema)}. These items are valid:\n${this.getSchemaPartText(e.parentSchema)}`;case"contains":return`${t} should contains at least one ${this.getSchemaPartText(e.parentSchema,["contains"])} item${m(e.parentSchema)}.`;case"required":{const a=e.params.missingProperty.replace(/^\./,""),r=Boolean(e.parentSchema.properties&&e.parentSchema.properties[a]);return`${t} misses the property '${a}'${m(e.parentSchema)}.${r?" Should be:\n"+this.getSchemaPartText(e.parentSchema,["properties",a]):this.getSchemaPartDescription(e.parentSchema)}`}case"additionalProperties":return`${t} has an unknown property '${e.params.additionalProperty}'${m(e.parentSchema)}. These properties are valid:\n${this.getSchemaPartText(e.parentSchema)}`;case"dependencies":return`${t} should have properties ${e.params.deps.split(",").map(e=>`'${e.trim()}'`).join(", ")} when property '${e.params.property}' is present${m(e.parentSchema)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"propertyNames":return`${t} property name '${e.params.propertyName}' is invalid${m(e.parentSchema)}. Property names should be match format ${JSON.stringify(e.schema.format)}.${this.getSchemaPartDescription(e.parentSchema)}`;case"enum":return e.parentSchema&&e.parentSchema.enum&&1===e.parentSchema.enum.length?`${t} should be ${this.getSchemaPartText(e.parentSchema,!1,!0)}`:`${t} should be one of these:\n${this.getSchemaPartText(e.parentSchema)}`;case"const":return`${t} should be equal to constant ${this.getSchemaPartText(e.parentSchema)}`;case"not":return`${t} should not be ${this.getSchemaPartText(e.schema)}${f(e.parentSchema)?"\n"+this.getSchemaPartText(e.parentSchema):""}`;case"oneOf":case"anyOf":if(e.children&&e.children.length>0){if(1===e.schema.length){const t=e.children[e.children.length-1],a=e.children.slice(0,e.children.length-1);return this.formatValidationError(Object.assign({},t,{children:a,parentSchema:Object.assign({},e.parentSchema,t.parentSchema)}))}let a=function(e){let t=e;return t=i(t,e=>e.dataPath?e.dataPath.length:0),t=i(t,e=>n[e.keyword]||2),t}(e.children);return 1===a.length?this.formatValidationError(a[0]):(a=function(e){const t=[];let a=e.length-1;for(;a>0;){const r=e[a];if("anyOf"===r.keyword||"oneOf"===r.keyword){const n=o(r),i=s(e.slice(0,a),n.concat(r.schemaPath));i!==a?(t.push(Object.assign({},r,{children:e.slice(i,a)})),a=i):t.push(r)}else t.push(r);a-=1}return 0===a&&t.push(e[a]),t.reverse()}(a),`${t} should be one of these:\n${this.getSchemaPartText(e.parentSchema)}\nDetails:\n${a.map(e=>" * "+c(this.formatValidationError(e),"   ")).join("\n")}`)}return`${t} should be one of these:\n${this.getSchemaPartText(e.parentSchema)}`;case"if":return`${t} should match "${e.params.failingKeyword}" schema:\n${this.getSchemaPartText(e.parentSchema,[e.params.failingKeyword])}`;case"absolutePath":return`${t}: ${e.message}${this.getSchemaPartDescription(e.parentSchema)}`;default:return`${t} ${e.message} (${JSON.stringify(e,null,2)}).\n${this.getSchemaPartText(e.parentSchema)}`}}formatValidationErrors(e){return e.map(e=>{let t=this.formatValidationError(e,this.schema);return this.postFormatter&&(t=this.postFormatter(t,e))," - "+c(t,"   ")}).join("\n")}}var y=b;t.default=y},function(e,t){var a=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));for(var s=a.exec(e||""),o={},c=14;c--;)o[r[c]]=s[c]||"";return-1!=n&&-1!=i&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){var a=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||a.splice(0,1);"/"==t.substr(t.length-1,1)&&a.splice(a.length-1,1);return a}(0,o.path),o.queryKey=function(e,t){var a={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(a[t]=r)})),a}(0,o.query),o}},function(e,t){var a=1e3,r=6e4,n=60*r,i=24*n;function s(e,t,a){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+a:Math.ceil(e/t)+" "+a+"s"}e.exports=function(e,t){t=t||{};var o,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*n;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?s(o=e,i,"day")||s(o,n,"hour")||s(o,r,"minute")||s(o,a,"second")||o+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=n)return Math.round(e/n)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=a)return Math.round(e/a)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,a){(function(t){e.exports=function(e){return a&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var a="function"==typeof t&&"function"==typeof t.isBuffer,r="function"==typeof ArrayBuffer}).call(this,a(9).Buffer)},function(e,t,a){var r=a(1106),n=a(420),i=a(188),s=a(187),o=a(421),c=a(422),l=a(92)("socket.io-client:manager"),u=a(419),d=a(1121),p=Object.prototype.hasOwnProperty;function h(e,t){if(!(this instanceof h))return new h(e,t);e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new d({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var a=t.parser||s;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=h,h.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)p.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},h.prototype.updateSocketIds=function(){for(var e in this.nsps)p.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},h.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},i(h.prototype),h.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},h.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},h.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},h.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},h.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},h.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},h.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},h.prototype.open=h.prototype.connect=function(e,t){if(l("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;l("opening %s",this.uri),this.engine=r(this.uri,this.opts);var a=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var i=o(a,"open",(function(){n.onopen(),e&&e()})),s=o(a,"error",(function(t){if(l("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",t),e){var a=new Error("Connection error");a.data=t,e(a)}else n.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;l("connect attempt will timeout after %d",c),0===c&&i.destroy();var u=setTimeout((function(){l("connect attempt timed out after %d",c),i.destroy(),a.close(),a.emit("error","timeout"),n.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(u)}})}return this.subs.push(i),this.subs.push(s),this},h.prototype.onopen=function(){l("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(o(e,"data",c(this,"ondata"))),this.subs.push(o(e,"ping",c(this,"onping"))),this.subs.push(o(e,"pong",c(this,"onpong"))),this.subs.push(o(e,"error",c(this,"onerror"))),this.subs.push(o(e,"close",c(this,"onclose"))),this.subs.push(o(this.decoder,"decoded",c(this,"ondecoded")))},h.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},h.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},h.prototype.ondata=function(e){this.decoder.add(e)},h.prototype.ondecoded=function(e){this.emit("packet",e)},h.prototype.onerror=function(e){l("error",e),this.emitAll("error",e)},h.prototype.socket=function(e,t){var a=this.nsps[e];if(!a){a=new n(this,e,t),this.nsps[e]=a;var r=this;a.on("connecting",i),a.on("connect",(function(){a.id=r.generateId(e)})),this.autoConnect&&i()}function i(){~u(r.connecting,a)||r.connecting.push(a)}return a},h.prototype.destroy=function(e){var t=u(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},h.prototype.packet=function(e){l("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(a){for(var r=0;r<a.length;r++)t.engine.write(a[r],e.options);t.encoding=!1,t.processPacketQueue()})))},h.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},h.prototype.cleanup=function(){l("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},h.prototype.close=h.prototype.disconnect=function(){l("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},h.prototype.onclose=function(e){l("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},h.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)l("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();l("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var a=setTimeout((function(){e.skipReconnect||(l("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(l("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(l("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(a)}})}},h.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,a){var r=a(190),n=a(1109),i=a(1117),s=a(1118);t.polling=function(e){var t=!1,a=!1,s=!1!==e.jsonp;if("undefined"!=typeof location){var o="https:"===location.protocol,c=location.port;c||(c=o?443:80),t=e.hostname!==location.hostname||c!==e.port,a=e.secure!==o}if(e.xdomain=t,e.xscheme=a,"open"in new r(e)&&!e.forceJSONP)return new n(e);if(!s)throw new Error("JSONP disabled");return new i(e)},t.websocket=s},function(e,t,a){var r=a(192),n=a(124),i=a(80),s=a(125),o=a(418),c=a(126)("engine.io-client:polling");e.exports=u;var l=null!=new(a(190))({xdomain:!1}).responseType;function u(e){var t=e&&e.forceBase64;l&&!t||(this.supportsBinary=!1),r.call(this,e)}s(u,r),u.prototype.name="polling",u.prototype.doOpen=function(){this.poll()},u.prototype.pause=function(e){var t=this;function a(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--r||a()}))),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){c("pre-pause writing complete"),--r||a()})))}else a()},u.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},u.prototype.onData=function(e){var t=this;c("polling got data %s",e);i.decodePayload(e,this.socket.binaryType,(function(e,a,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},u.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},u.prototype.write=function(e){var t=this;this.writable=!1;var a=function(){t.writable=!0,t.emit("drain")};i.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,a)}))},u.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",a="";return!1!==this.timestampRequests&&(e[this.timestampParam]=o()),this.supportsBinary||e.sid||(e.b64=1),e=n.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(a=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+a+this.path+e}},function(e,t,a){(function(t){var r=a(189),n=Object.prototype.toString,i="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===n.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===n.call(File);e.exports=function e(a){if(!a||"object"!=typeof a)return!1;if(r(a)){for(var n=0,o=a.length;n<o;n++)if(e(a[n]))return!0;return!1}if("function"==typeof t&&t.isBuffer&&t.isBuffer(a)||"function"==typeof ArrayBuffer&&a instanceof ArrayBuffer||i&&a instanceof Blob||s&&a instanceof File)return!0;if(a.toJSON&&"function"==typeof a.toJSON&&1===arguments.length)return e(a.toJSON(),!0);for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)&&e(a[c]))return!0;return!1}}).call(this,a(9).Buffer)},function(e,t,a){"use strict";var r,n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i={},s=0,o=0;function c(e){var t="";do{t=n[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function l(){var e=c(+new Date);return e!==r?(s=0,r=e):e+"."+c(s++)}for(;o<64;o++)i[n[o]]=o;l.encode=c,l.decode=function(e){var t=0;for(o=0;o<e.length;o++)t=64*t+i[e.charAt(o)];return t},e.exports=l},function(e,t){var a=[].indexOf;e.exports=function(e,t){if(a)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,a){var r=a(187),n=a(188),i=a(1120),s=a(421),o=a(422),c=a(92)("socket.io-client:socket"),l=a(124),u=a(417);e.exports=h;var d={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},p=n.prototype.emit;function h(e,t,a){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},a&&a.query&&(this.query=a.query),this.io.autoConnect&&this.open()}n(h.prototype),h.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",o(this,"onopen")),s(e,"packet",o(this,"onpacket")),s(e,"close",o(this,"onclose"))]}},h.prototype.open=h.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},h.prototype.send=function(){var e=i(arguments);return e.unshift("message"),this.emit.apply(this,e),this},h.prototype.emit=function(e){if(d.hasOwnProperty(e))return p.apply(this,arguments),this;var t=i(arguments),a={type:(void 0!==this.flags.binary?this.flags.binary:u(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return a.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),a.id=this.ids++),this.connected?this.packet(a):this.sendBuffer.push(a),this.flags={},this},h.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},h.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?l.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},h.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},h.prototype.onpacket=function(e){var t=e.nsp===this.nsp,a=e.type===r.ERROR&&"/"===e.nsp;if(t||a)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},h.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?p.apply(this,t):this.receiveBuffer.push(t)},h.prototype.ack=function(e){var t=this,a=!1;return function(){if(!a){a=!0;var n=i(arguments);c("sending ack %j",n),t.packet({type:u(n)?r.BINARY_ACK:r.ACK,id:e,data:n})}}},h.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},h.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},h.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)p.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},h.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},h.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},h.prototype.close=h.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},h.prototype.compress=function(e){return this.flags.compress=e,this},h.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,a){return e.on(t,a),{destroy:function(){e.removeListener(t,a)}}}},function(e,t){var a=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=a.call(arguments,2);return function(){return t.apply(e,r.concat(a.call(arguments)))}}},function(e,t,a){a(1122),a(424);e.exports=GameHammerMobile={fixHammerjsDeltaIssue:null,lastEvent:null,pinchZoomOrigin:null,element:null,pinchStart:{x:void 0,y:void 0},originalSize:{width:2550,height:1650},current:{x:0,y:0,z:1,zooming:!1,width:2550,height:1650},last:{x:0,y:0,z:1},render:function(e,t){},attachEvents:function(e,t){try{var a=this;a.element=document.getElementById("gameboard");var r=new Hammer(a.element,{});r.get("pinch").set({enable:!0}),r.get("pan").set({threshold:0}),r.on("pan",(function(e){"pan"!==a.lastEvent&&(a.fixHammerjsDeltaIssue={x:e.deltaX,y:e.deltaY}),a.current.x=a.last.x+e.deltaX-a.fixHammerjsDeltaIssue.x,a.current.y=a.last.y+e.deltaY-a.fixHammerjsDeltaIssue.y,a.lastEvent="pan",a.update()})),r.on("pinch",(function(e){var t=a.scaleFrom(a.pinchZoomOrigin,a.last.z,a.last.z*e.scale);a.current.x=t.x+a.last.x+e.deltaX,a.current.y=t.y+a.last.y+e.deltaY,a.current.z=t.z+a.last.z,a.lastEvent="pinch",a.update()})),r.on("pinchstart",(function(e){a.pinchStart.x=e.center.x,a.pinchStart.y=e.center.y,a.pinchZoomOrigin=a.getRelativePosition(a.element,{x:a.pinchStart.x,y:a.pinchStart.y},a.originalSize,a.current.z),a.lastEvent="pinchstart"})),r.on("panend",(function(e){a.last.x=a.current.x,a.last.y=a.current.y,a.lastEvent="panend"})),r.on("pinchend",(function(e){a.last.x=a.current.x,a.last.y=a.current.y,a.last.z=a.current.z,a.lastEvent="pinchend"})),t.hammertime=r}catch(e){}},update:function(){this.current.height=this.originalSize.height*this.current.z,this.current.width=this.originalSize.width*this.current.z,this.element.style.transform="translate3d("+this.current.x+"px, "+this.current.y+"px, 0) scale("+this.current.z+")"},getRelativePosition:function(e,t,a,r){var n=this.getCoords(e),i=t.x-n.x,s=t.y-n.y;return{x:i/(a.width*r/2)-1,y:s/(a.height*r/2)-1}},getCoords:function(e){var t=e.getBoundingClientRect(),a=document.body,r=document.documentElement,n=window.pageYOffset||r.scrollTop||a.scrollTop,i=window.pageXOffset||r.scrollLeft||a.scrollLeft,s=r.clientTop||a.clientTop||0,o=r.clientLeft||a.clientLeft||0,c=t.top+n-s,l=t.left+i-o;return{x:Math.round(l),y:Math.round(c)}},scaleFrom:function(e,t,a){var r=this.getCoordinateShiftDueToScale(this.originalSize,t),n=this.getCoordinateShiftDueToScale(this.originalSize,a),i=a-t,s=r.x-n.x,o=r.y-n.y;return{x:e.x*s,y:e.y*o,z:i}},getCoordinateShiftDueToScale:function(e,t){var a=t*e.width,r=t*e.height;return{x:(a-e.width)/2,y:(r-e.height)/2}}}},function(e,t){e.exports=function(e,t){var a=new Hammer(t,{});e.hammertime=a,a.get("pinch").set({enable:!0}),a.get("pan").set({threshold:0});var r=void 0,n={x:void 0,y:void 0},i=void 0,s={width:2550,height:1650},o={x:0,y:0,z:1,zooming:!1,width:1*s.width,height:1*s.height},c={x:o.x,y:o.y,z:o.z};function l(e,t,a,r){var n,i,s,o,c,l,u,d,p,h=(n=e.getBoundingClientRect(),i=document.body,s=document.documentElement,o=window.pageYOffset||s.scrollTop||i.scrollTop,c=window.pageXOffset||s.scrollLeft||i.scrollLeft,l=s.clientTop||i.clientTop||0,u=s.clientLeft||i.clientLeft||0,d=n.top+o-l,p=n.left+c-u,{x:Math.round(p),y:Math.round(d)}),f=t.x-h.x,m=t.y-h.y;return{x:f/(a.width*r/2)-1,y:m/(a.height*r/2)-1}}function u(e,t){var a=t*e.width,r=t*e.height;return{x:(a-e.width)/2,y:(r-e.height)/2}}a.on("pan",(function(e){"pan"!==i&&(r={x:e.deltaX,y:e.deltaY}),o.x=c.x+e.deltaX-r.x,o.y=c.y+e.deltaY-r.y,i="pan",p()})),a.on("pinch",(function(e){var t,a,r,n,l,h,f,m,g=(t=d,a=c.z,r=c.z*e.scale,n=u(s,a),l=u(s,r),h=r-a,f=n.x-l.x,m=n.y-l.y,{x:t.x*f,y:t.y*m,z:h});o.x=g.x+c.x+e.deltaX,o.y=g.y+c.y+e.deltaY,o.z=g.z+c.z,i="pinch",p()}));var d=void 0;function p(){o.height=s.height*o.z,o.width=s.width*o.z,t.style.transform="translate3d("+o.x+"px, "+o.y+"px, 0) scale("+o.z+")"}a.on("pinchstart",(function(e){n.x=e.center.x,n.y=e.center.y,d=l(t,{x:n.x,y:n.y},s,o.z),i="pinchstart"})),a.on("panend",(function(e){c.x=o.x,c.y=o.y,i="panend"})),a.on("pinchend",(function(e){c.x=o.x,c.y=o.y,c.z=o.z,i="pinchend"}))}},function(e,t,a){"use strict";function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=a(5),c=function(){function e(t,a){i(this,e),this.app=t||{},this.save_options=1}var t,a,r,c,l,u,d,p,h,f,m,g,b,y;return t=e,(a=[{key:"initialize",value:(y=n(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadOptions();case 2:return e.next=4,this.loadRuntimeOptions();case 4:return this.saveOptions(),e.abrupt("return");case 6:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"loadOptions",value:(b=n(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e){t.next=19;break}if("null"==(a=localStorage.getItem("options"))||null==a){t.next=6;break}this.app.options=JSON.parse(a),t.next=19;break;case 6:return t.prev=6,t.next=9,fetch("/options");case 9:return r=t.sent,t.next=12,r.json();case 12:this.app.options=t.sent,this.saveOptions(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(6),console.error(t.t0);case 19:case"end":return t.stop()}}),t,this,[[6,16]])}))),function(){return b.apply(this,arguments)})},{key:"loadRuntimeOptions",value:(g=n(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.app.options.runtime||(this.app.options.runtime={}),e.prev=1,"DEV"!==this.app.options.runtime.env){e.next=10;break}return e.next=5,fetch("/runtime");case 5:return t=e.sent,e.next=8,t.json();case 8:this.app.options.runtime=e.sent,this.saveOptions();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[1,12]])}))),function(){return g.apply(this,arguments)})},{key:"saveOptions",value:function(){if(1!=this.app.BROWSER||0!=this.save_options)try{void 0!==e&&localStorage.setItem("options",JSON.stringify(this.app.options))}catch(e){console.log(e)}}},{key:"resetOptions",value:(m=n(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/options");case 3:return t=e.sent,e.next=6,t.json();case 6:this.app.options=e.sent,this.saveOptions(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return m.apply(this,arguments)})},{key:"deleteBlock",value:(f=n(regeneratorRuntime.mark((function e(t,a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t,a){return f.apply(this,arguments)})},{key:"saveTransaction",value:function(e){var t=e.returnMessage(),a={request:"save"};a.tx=e,a.type=t.module,this.app.network.sendRequestWithCallback("archive",a,(function(e){}))}},{key:"saveTransactionByKey",value:function(e,t){var a=t.returnMessage(),r={request:"save_key"};r.tx=t,r.key=e,r.type=a.module,this.app.network.sendRequestWithCallback("archive",r,(function(e){}))}},{key:"deleteTransaction",value:function(e){var t={request:"delete"};t.tx=e,t.publickey=this.app.wallet.returnPublicKey(),t.sig=this.app.crypto.signMessage("delete_"+e.transaction.sig,this.app.wallet.returnPrivateKey()),this.app.network.sendRequestWithCallback("archive",t,(function(e){}))}},{key:"loadTransactions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=arguments.length>2?arguments[2]:void 0,r="archive",n={request:"load"};n.type=e,n.num=t,n.publickey=this.app.wallet.returnPublicKey(),this.app.network.sendRequestWithCallback(r,n,(function(e){var t=[];e&&e.txs&&e.txs.length>0&&(t=e.txs.map((function(e){return new o.transaction(JSON.parse(e))}))),a(t)}))}},{key:"loadTransactionsByKeys",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=arguments.length>3?arguments[3]:void 0,n="archive",i={request:"load_keys"};i.keys=e,i.type=t,i.num=a,this.app.network.sendRequestWithCallback(n,i,(function(e){if(null!=e)if(null!=e.txs)if(0!=e.txs.length){var t=[];e&&e.txs&&e.txs.length>0&&(t=e.txs.map((function(e){return new o.transaction(JSON.parse(e))}))),r(t)}else r([]);else r([]);else r([])}))}},{key:"convertBlockStringToHeadersAndTransactionsJSON",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={headers:"",transactions:[]};if(-1==e.indexOf("\n"))return t.headers=e,t;var a=e.split("\n");a.length>0&&(t.headers=a[0]);for(var r=1;r<a.length;r++)t.transactions.push(a[r]);return t}},{key:"getModuleOptionsByName",value:function(e){for(var t=0;t<this.app.options.modules.length;t++)if(this.app.options.modules[t].name===e)return this.app.options.modules[t];return null}},{key:"loadBlockById",value:function(e){}},{key:"loadBlockByHash",value:function(e){}},{key:"loadBlockByFilename",value:function(e){}},{key:"loadBlocksFromDisk",value:(h=n(regeneratorRuntime.mark((function e(){var t=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.length>0&&void 0!==t[0]&&t[0];case 1:case"end":return e.stop()}}),e)}))),function(){return h.apply(this,arguments)})},{key:"returnFileSystem",value:function(){return null}},{key:"saveBlock",value:(p=n(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return p.apply(this,arguments)})},{key:"saveClientOptions",value:function(){}},{key:"returnDatabaseByName",value:(d=n(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)}))),function(e){return d.apply(this,arguments)})},{key:"returnBlockFilenameByHash",value:(u=n(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})},{key:"returnBlockFilenameByHashPromise",value:function(e){}},{key:"queryDatabase",value:(l=n(regeneratorRuntime.mark((function e(t,a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t,a){return l.apply(this,arguments)})},{key:"executeDatabase",value:(c=n(regeneratorRuntime.mark((function e(t,a,r){var n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.length>3&&void 0!==n[3]&&n[3];case 1:case"end":return e.stop()}}),e)}))),function(e,t,a){return c.apply(this,arguments)})}])&&s(t.prototype,a),r&&s(t,r),e}();e.exports=c},function(e,t,a){(function(t,r,n){function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function c(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function s(e){c(i,r,n,s,o,"next",e)}function o(e){c(i,r,n,s,o,"throw",e)}s(void 0)}))}}function u(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,a){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=m(e);if(t){var n=m(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return f(this,a)}}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=a(5),b=(a(93),a(15)),y=a(195),v=a(95),_=a(206),w=a(208),x=a(68),k=a(398),S=a(19),P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(O,e);var i,o,c,f,b,P,A,M,T,j=h(O);function O(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,O),(t=j.call(this,e)).app=e,t.name="AppStore",t.description="Application manages installing, indexing, compiling and serving Saito modules.",t.categories="Utilities Dev",t.featured_apps=["Polkadot","Kusama","Westend","Design","Debug","Midnight","Hearts","Settlers","President","Scotland"],t.header=null,t.bundling_timer=null,t.renderMode="none",t.search_options={},t}return i=O,(o=[{key:"respondTo",value:function(e){if("email-appspace"==e){var t={};return t.render=this.renderEmail,t.attachEvents=this.attachEventsEmail,t.script='<link ref="stylesheet" href="/appstore/css/email-appspace.css" />',t}return null}},{key:"renderEmail",value:function(e,t){appstore_mod=e.modules.returnModule("AppStore"),y.render(e,appstore_mod)}},{key:"attachEventsEmail",value:function(e,t){appstore_mod=e.modules.returnModule("AppStore"),y.attachEvents(e,appstore_mod)}},{key:"initializeHTML",value:function(e){d(m(O.prototype),"initializeHTML",this).call(this,e),null==this.header&&(this.header=new x(e,this)),this.header.render(e,this),this.header.attachEvents(e,this)}},{key:"handleUrlParams",value:function(e){var t=e.get("app");if(t){var a={};a.version=t,this.search_options=a,this.renderMode="standalone"}}},{key:"onPeerHandshakeComplete",value:function(e,t){"standalone"==this.renderMode&&(v.render(this.app,this,this.search_options),v.attachEvents(this.app,this))}},{key:"handlePeerRequest",value:(T=l(regeneratorRuntime.mark((function e(t,a,r){var n,i,s,o,c,l,u,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>3&&void 0!==p[3]?p[3]:null,d(m(O.prototype),"handlePeerRequest",this).call(this,t,a,r,n),"appstore search modules"!==a.request){e.next=16;break}return i="%"+a.data+"%",s=a.data,o="SELECT name, description, version, categories, publickey, unixtime, bid, bsh FROM modules WHERE description LIKE $squery1 OR name = $squery2",c={$squery1:i,$squery2:s},console.log(o),console.log(JSON.stringify(c)),e.next=11,this.app.storage.queryDatabase(o,c,"appstore");case 11:l=e.sent,(u={}).err="",u.rows=l,n(u);case 16:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return T.apply(this,arguments)})},{key:"installModule",value:(M=l(regeneratorRuntime.mark((function e(n){var i,s,o,c,l,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.app.BROWSER){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,d(m(O.prototype),"installModule",this).call(this,n);case 4:null!=(i=n.storage.returnFileSystem())&&(s=a(1134),o=a(19),c=function(e){return i.readdirSync(e,{withFileTypes:!0}).filter((function(e){return e.isDirectory()})).map((function(e){return e.name}))},l=o.resolve(t,"../"),u=c(l),i.existsSync(o.resolve(t,"mods"))||i.mkdirSync(o.resolve(t,"mods")),u.forEach((function(e){console.log("##########################"),console.log("processing: "+e),console.log("##########################");var a=o.resolve(t,"mods/".concat(e,".zip")),c=i.createWriteStream(a),u=s("zip",{zlib:{level:9}});u.on("error",(function(e){throw e})),u.pipe(c),E("".concat(l,"/").concat(e,"/")).forEach((function(e){var t=i.createReadStream(e),a=o.relative(r.cwd(),e).split("/");a.splice(0,2);var n=a.join("/");u.append(t,{name:n})})),c.on("close",(function(){var a=o.basename(this.path),r=o.resolve(t,"mods/".concat(a)),s=n.wallet.createUnsignedTransactionWithDefaultFee(),c=i.readFileSync(r,{encoding:"base64"});c.length<=3e7&&(s.msg={module:"AppStore",request:"submit module",module_zip:c,name:e},s=n.wallet.signTransaction(s),n.network.propagateTransaction(s))})),u.finalize()})));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return M.apply(this,arguments)})},{key:"initialize",value:function(e){d(m(O.prototype),"initialize",this).call(this,e)}},{key:"onConfirmation",value:function(e,t,a,r){var n=t.returnMessage();if(0==a)switch(n.request){case"submit module":if(this.submitModule(e,t),t.isFrom(r.wallet.returnPublicKey()))try{document.querySelector(".appstore-loading-text").innerHTML='Your application is being broadcast to the network. <p></p>Your AppStore should receive it within <span class="time_remaining">45</span> seconds.';var i=r.modules.returnModule("AppStore");i.time_remaining=45,i.bundling_timer=setInterval((function(){if(i.time_remaining<=0)clearInterval(i.bundling_timer),w.render(i.app,i),w.attachEvents(i.app,i);else if(i.time_remaining--,i.time_remaining>=1)try{document.querySelector(".time_remaining").innerHTML=i.time_remaining}catch(e){clearInterval(i.bundling_timer)}}),1e3)}catch(e){}break;case"request bundle":if(t.isFrom(r.wallet.returnPublicKey()))try{document.querySelector(".appstore-loading-text").innerHTML='Your application is being processed by the network. Your upgrade should be complete within about <span class="time_remaining">120</span> seconds.';var s=r.modules.returnModule("AppStore");s.time_remaining=120,s.bundling_timer=setInterval((function(){if(s.time_remaining<0)clearInterval(s.bundling_timer);else if(s.time_remaining--,s.time_remaining>=0)try{document.querySelector(".time_remaining").innerHTML=s.time_remaining}catch(e){clearInterval(s.bundling_timer)}}),1e3)}catch(e){}if(!t.isTo(r.wallet.returnPublicKey()))return;this.requestBundle(e,t);break;case"receive bundle":t.isTo(r.wallet.returnPublicKey())&&!t.isFrom(r.wallet.returnPublicKey())&&(console.log("##### BUNDLE RECEIVED #####"),r.options.appstore&&""!=r.options.appstore.default&&t.isFrom(r.options.appstore.default)&&this.receiveBundle(e,t))}}},{key:"getNameAndDescriptionFromZip",value:(A=l(regeneratorRuntime.mark((function e(r,i){var o,c,u,d,p,h,f,m,g,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.app.storage.returnFileSystem(),c=a(19),u=a(427),d=n.from(r,"base64").toString("binary"),o.writeFileSync(c.resolve(t,i),d,{encoding:"binary"}),p="Unknown Module",h="",f="unknown",m="unknown",e.prev=9,e.next=12,u.Open.file(c.resolve(t,i));case 12:return g=e.sent,b=g.files.map(function(){var e=l(regeneratorRuntime.mark((function e(t){var a,r,n,i,o,c,l,u,d,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g=function(e){return s(e=(e=e.replace(/^\s+|\s+$/gm,"")).substring(1,e.length-1)).map((function(e){return" "==e?" ":"."==e?".":","==e?",":"!"==e?"!":"`"==e||"\\"==e||"'"==e||'"'==e||";"==e?"":/[a-zA-Z0-9_-]/.test(e)?e:""})).join("")},"web/img/arcade.jpg"!==t.path){e.next=6;break}return e.next=4,t.buffer();case 4:a=e.sent,h="data:image/jpeg;base64,"+a.toString("base64");case 6:if("web/img/saito_icon.jpg"!==t.path){e.next=11;break}return e.next=9,t.buffer();case 9:r=e.sent,h="data:image/jpeg;base64,"+r.toString("base64");case 11:if("lib"!=t.path.substr(0,3)){e.next=13;break}return e.abrupt("return");case 13:if("js"===t.path.substr(-2)){e.next=15;break}return e.abrupt("return");case 15:if(!(t.path.indexOf("web/")>-1)){e.next=17;break}return e.abrupt("return");case 17:if(!(t.path.indexOf("www/")>-1)){e.next=19;break}return e.abrupt("return");case 19:if(!(t.path.indexOf("lib/")>-1)){e.next=21;break}return e.abrupt("return");case 21:if(!(t.path.indexOf("license/")>-1)){e.next=23;break}return e.abrupt("return");case 23:if(!(t.path.indexOf("docs/")>-1)){e.next=25;break}return e.abrupt("return");case 25:if(!(t.path.indexOf("sql/")>-1)){e.next=27;break}return e.abrupt("return");case 27:return e.next=29,t.buffer();case 29:for(n=e.sent,i=n.toString("utf-8"),o=i.split("\n"),c=0,l=0,u=0,d=0;d<o.length&&d<50&&(0==c||0==l||0==u);d++)/this.name/.test(o[d])&&0==c&&(c=1,o[d].indexOf("=")>0&&(p=o[d].substring(o[d].indexOf("=")),(p=(p=g(p)).replace(/^\s+|\s+$/gm,"")).length>50&&(p="Unknown",c=0),"name"===p&&(p="Unknown",c=0))),/this.description/.test(o[d])&&0==l&&(l=1,o[d].indexOf("=")>0&&(f=o[d].substring(o[d].indexOf("=")),f=(f=g(f)).replace(/^\s+|\s+$/gm,""))),/this.categories/.test(o[d])&&0==u&&(u=1,o[d].indexOf("=")>0&&(m=o[d].substring(o[d].indexOf("=")),m=(m=g(m)).replace(/^\s+|\s+$/gm,"")));case 36:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=16,Promise.all(b);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(9),console.log("ERROR UNZIPPING: "+e.t0);case 21:return o.unlink(c.resolve(t,i)),e.abrupt("return",{name:p,image:h,description:f,categories:m});case 23:case"end":return e.stop()}}),e,this,[[9,18]])}))),function(e,t){return A.apply(this,arguments)})},{key:"submitModule",value:(P=l(regeneratorRuntime.mark((function e(t,a){var r,n,i,s,o,c,l,u,d,p,h,f,m,g,b,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.app.BROWSER){e.next=3;break}return a.isFrom(this.app.wallet.returnPublicKey())&&((r=this.app.wallet.createUnsignedTransaction()).msg.module="Email",r.msg.title="Saito Application Published",r.msg.message="\n\n\t    <p>\n\t    Your application has been published with the following APP-ID:\n\t    </p>\n\n\t    <p><br /></p>\n\n\t    <p>\n\t    ".concat(this.app.crypto.hash(a.transaction.ts+"-"+a.transaction.sig),'\n\t    </p>\n\n\t    <p><br /></p>\n\n\t    <p>\n\t    Please note: if you have problems installing your application, there may be a problem preventing it from compiling successfully. In these cases, we recommend <a href="https://org.saito.tech/developers">installing Saito</a> and testing locally before deploying to the network. You are welcome to contact the Saito team with questions or problems.\n\t    </p>\n\n        '),r=this.app.wallet.signTransaction(r),(n=this.app.modules.returnModule("Email"))&&n.emails.inbox.push(r),this.app.storage.saveTransaction(r)),e.abrupt("return");case 3:return i="INSERT OR IGNORE INTO modules (name, description, version, image, categories, publickey, unixtime, bid, bsh, tx, featured) VALUES ($name, $description, $version, $image, $categories, $publickey, $unixtime, $bid, $bsh, $tx, $featured)",s=a.transaction,o=s.from,c=s.sig,l=s.ts,u=a.returnMessage(),d=u.module_zip,e.next=8,this.getNameAndDescriptionFromZip(d,"mods/module-".concat(c,"-").concat(l,".zip"));case 8:if(p=e.sent,h=p.name,f=p.image,m=p.description,g=p.categories,console.log("-----------------------------"),console.log("--INSERTING INTO APPSTORE --- "+h),console.log("-----------------------------"),"Unknown"==h&&console.log("TROUBLE EXTRACTING: mods/module-".concat(c,"-").concat(l,".zip")),b=0,a.transaction.from[0].add==this.app.wallet.returnPublicKey()&&(b=1),1==b&&(b=0,this.featured_apps.includes(h)&&(b=1)),console.log(h+" is included? "+b),y={$name:h,$description:m||"",$version:this.app.crypto.hash("".concat(l,"-").concat(c)),$image:f,$categories:g,$publickey:o[0].add,$unixtime:l,$bid:t.block.id,$bsh:t.returnHash(),$tx:JSON.stringify(a.transaction),$featured:b},"unknown"==h){e.next=39;break}return e.prev=23,e.next=26,this.app.storage.executeDatabase(i,y,"appstore");case 26:e.next=30;break;case 28:e.prev=28,e.t0=e.catch(23);case 30:if(!this.featured_apps.includes(h)||!a.isFrom(this.app.wallet.returnPublicKey())){e.next=39;break}return i="UPDATE modules SET featured = 0 WHERE name = $name",y={$name:h},e.next=35,this.app.storage.executeDatabase(i,y,"appstore");case 35:return i="UPDATE modules SET featured = 1 WHERE name = $name AND version = $version",y={$name:h,$version:this.app.crypto.hash("".concat(l,"-").concat(c))},e.next=39,this.app.storage.executeDatabase(i,y,"appstore");case 39:case"end":return e.stop()}}),e,this,[[23,28]])}))),function(e,t){return P.apply(this,arguments)})},{key:"requestBundle",value:(b=l(regeneratorRuntime.mark((function e(a,r){var n,i,s,o,c,l,u,d,p,h,f,m,b,y,v,_,w,x,P,E,C,A,M,T,j,O,D,I,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.app.BROWSER){e.next=2;break}return e.abrupt("return");case 2:for(n="",i="",s=r.returnMessage(),o=s.list,c=[],l=[],u=[],d=0;d<o.length;d++)""!=o[d].version?l.push(o[d].version):""!=o[d].name&&c.push(o[d].name);p=0;case 11:if(!(p<c.length)){e.next=21;break}return n="SELECT * FROM modules WHERE name = $name",i={$name:c[p]},e.next=16,this.app.storage.queryDatabase(n,i,"appstore");case 16:for(h=e.sent,f=0;f<h.length;f++)m=JSON.parse(h[f].tx),b=new g.transaction(m).returnMessage(),y=b.module_zip,u.push({name:h[f].name,description:h[f].description,zip:y});case 18:p++,e.next=11;break;case 21:v=0;case 22:if(!(v<l.length)){e.next=32;break}return n="SELECT * FROM modules WHERE version = $version",i={$version:l[v]},e.next=27,this.app.storage.queryDatabase(n,i,"appstore");case 27:for(_=e.sent,w=0;w<_.length;w++)x=JSON.parse(_[w].tx),P=new g.transaction(x).returnMessage(),E=P.module_zip,u.push({name:_[w].name,description:_[w].description,zip:E});case 29:v++,e.next=22;break;case 32:return e.next=34,this.bundler(u);case 34:return C=e.sent,A=k.readFileSync(S.resolve(t,"./bundler/dist/".concat(C)),{encoding:"binary"}),n="INSERT OR IGNORE INTO bundles (version, publickey, unixtime, bid, bsh, name, script) VALUES ($version, $publickey, $unixtime, $bid, $bsh, $name, $script)",M=r.transaction,T=M.from,j=M.sig,O=M.ts,i={$version:this.app.crypto.hash("".concat(O,"-").concat(j)),$publickey:T[0].add,$unixtime:O,$bid:a.block.id,$bsh:a.returnHash(),$name:C,$script:A},e.next=41,this.app.storage.executeDatabase(n,i,"appstore");case 41:D=this.app.options.server.endpoint.protocol+"://"+this.app.options.server.endpoint.host+":"+this.app.options.server.endpoint.port+"/appstore/bundle/"+C,I=this.app.wallet.createUnsignedTransactionWithDefaultFee(T[0].add),R={module:"AppStore",request:"receive bundle",bundle:D},I.msg=R,I=this.app.wallet.signTransaction(I),this.app.network.propagateTransaction(I);case 47:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"bundler",value:(f=l(regeneratorRuntime.mark((function e(r){var i,s,o,c,l,u,d,p,h,f,m,g,b,y,v,_,w,x,k,S,P,E,A,M,T,j,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a(1135),s=i.promisify(a(1137).exec),o=this.app.storage.returnFileSystem(),c=a(19),a(427),l=(new Date).getTime(),u=this.app.crypto.hash(r.map((function(e){return e.version})).join("")),d="mods/compile-".concat(l,"-").concat(u,"-create"),p="mods/compile-".concat(l,"-").concat(u),h="".concat(l,"-").concat(u),f="",m="",g="",g="cp -rf "+t+"/../../bundler/default "+t+"/../../bundler/"+h+"\n",g+="rm -f "+t+"/../../bundler/"+h+"/config/*.js\n",g+="rm -rf "+t+"/../../bundler/"+h+"/mods\n",g+="mkdir  "+t+"/../../bundler/"+h+"/mods\n",g+="mkdir  "+t+"/../../bundler/"+h+"/dist\n",o.writeFileSync(c.resolve(t,d),g,{encoding:"binary"}),e.prev=19,b=t,y="sh "+d,e.next=24,s(y,{cwd:b,maxBuffer:8388608});case 24:(v=e.sent).stdout,v.stderr,e.next=32;break;case 29:e.prev=29,e.t0=e.catch(19),console.log(e.t0);case 32:return f+="cd "+t+"/mods\n",m+="cd "+t+"/mods\n",_=r.map((function(e){var a="mods/".concat(C(e.name),"-").concat(l,"-").concat(u,".zip");f+="unzip -o ".concat(C(e.name),"-").concat(l,"-").concat(u,".zip -d ../../../bundler/").concat(h,"/mods/").concat(C(e.name)," \\*.js \\*.css \\*.html \\*.wasm")+"\n",f+="rm -rf ../../../bundler/".concat(h,"/mods/").concat(C(e.name),"/web")+"\n",f+="rm -rf ../../../bundler/".concat(h,"/mods/").concat(C(e.name),"/www")+"\n",f+="rm -rf ../../../bundler/".concat(h,"/mods/").concat(C(e.name),"/sql")+"\n",f+="rm -rf ../../../bundler/".concat(h,"/mods/").concat(C(e.name),"/DESCRIPTION.txt")+"\n",f+="rm -rf ../../../bundler/".concat(h,"/mods/").concat(C(e.name),"/BUGS.txt")+"\n",f+="rm -rf ../../../bundler/".concat(h,"/mods/").concat(C(e.name),"/README.txt")+"\n",f+="rm -rf ../../../bundler/".concat(h,"/mods/").concat(C(e.name),"/README.md")+"\n",f+="rm -rf ../../../bundler/".concat(h,"/mods/").concat(C(e.name),"/install.sh")+"\n",f+="rm -rf ../../../bundler/".concat(h,"/mods/").concat(C(e.name),"/license")+"\n",m+="rm -rf ".concat(C(e.name),"-").concat(l,"-").concat(u,".zip")+"\n",m+="rm -rf ../../bundler/".concat(h,"/mods/").concat(C(e.name))+"\n";var r=n.from(e.zip,"base64").toString("binary");return o.writeFileSync(c.resolve(t,a),r,{encoding:"binary"}),"".concat(C(e.name),"/").concat(C(e.name),".js")})),m+="rm -f ".concat(t,"/mods/compile-").concat(l,"-").concat(u,"-create")+"\n",m+="rm -f ".concat(t,"/mods/compile-").concat(l,"-").concat(u)+"\n",w="modules.config-".concat(l,"-").concat(u,".json"),e.next=40,o.writeFile(c.resolve(t,"../../bundler/".concat(h,"/config/").concat(w)),JSON.stringify({mod_paths:_}));case 40:return x="saito-".concat(l,"-").concat(u,".js"),k="index-".concat(l,"-").concat(u,".js"),S=a(210),e.next=45,o.writeFile(c.resolve(t,"../../bundler/".concat(h,"/config/").concat(k)),S(w));case 45:return P=c.resolve(t,"../../bundler/".concat(h,"/config/").concat(k)),E=c.resolve(t,"./bundler/dist"),f+="cd "+t+"\n",f+="cd ../../\n",f+="sh bundle.sh ".concat(P," ").concat(E," ").concat(x),console.log("COMPILING: "+"sh bundle.sh ".concat(P," ").concat(E," ").concat(x)),f+="\n",f+=m,o.writeFileSync(c.resolve(t,p),f,{encoding:"binary"}),e.prev=54,A=t,M="sh "+p,e.next=59,s(M,{cwd:A,maxBuffer:8388608});case 59:(T=e.sent).stdout,T.stderr,e.next=67;break;case 64:e.prev=64,e.t1=e.catch(54),console.log(e.t1);case 67:return console.log(h+" --- "+k+" ------ "+p),j=this.app.wallet.createUnsignedTransactionWithDefaultFee(),O="",console.log("Bundle Filename: "+x),console.log("Bundle __dirname: "+t),o&&(O=o.readFileSync(c.resolve(t,"./bundler/dist/".concat(x)),{encoding:"binary"})),j.msg={module:"AppStore",request:"add bundle",bundle:O},j=this.app.wallet.signTransaction(j),this.app.network.propagateTransaction(j),e.next=78,o.rmdir(c.resolve(t,"../../bundler/".concat(h,"/")),(function(){console.log("Appstore Compilation Files Removed!")}));case 78:return e.abrupt("return",x);case 79:case"end":return e.stop()}}),e,this,[[19,29],[54,64]])}))),function(e){return f.apply(this,arguments)})},{key:"receiveBundle",value:function(e,t){if(1==this.app.BROWSER){var a=t.returnMessage(),r={};r.appstore=this,r.bundle_appstore_publickey=t.transaction.from[0].add,r.appstore_bundle=a.bundle,_.render(this.app,r),_.attachEvents(this.app,r)}}},{key:"webServer",value:function(e,a,r){null!=e.storage.returnFileSystem()&&(a.use("/"+encodeURI(this.name),r.static(t+"/web")),a.get("/appstore/bundle/:filename",function(){var t=l(regeneratorRuntime.mark((function t(a,r){var n,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.params.filename,i={$scriptname:n},t.next=5,e.storage.queryDatabase("SELECT script FROM bundles WHERE name = $scriptname",i,"appstore");case 5:if(!(s=t.sent)){t.next=13;break}if(!(s.length>0)){t.next=13;break}return r.setHeader("Content-type","text/javascript"),r.charset="UTF-8",r.write(s[0].script),r.end(),t.abrupt("return");case 13:r.setHeader("Content-type","text/javascript"),r.charset="UTF-8",r.write('\n\n\t  let x = confirm("Server reports it does not contain your Saito javascript bundle. This can happen across server upgrades with remotely-hosted application bundles. Do you wish to reset to use the server default and update your default AppStore to this server?");\n\t  if (x) { \n\n\t    try {\n\n\t      if (typeof(Storage) !== "undefined") {\n\t        let options = null;\n\t        let data = localStorage.getItem("options");\n\t        if (data) {\n\t  \t  options = JSON.parse(data); \n\t          options.appstore = "";\n\t          options.bundle = "";\n\t          options.modules = [];\n\t          localStorage.setItem("options", JSON.stringify(options));\n\t\t  window.location.reload(false);\n    \t\t}\n\t      }\n\n\t    } catch (err) {\n  \t      alert("Error attempting to reset to use default Saito: " + err);\n\t    }\n\t  }\n\n\t'),r.end();case 17:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()))}},{key:"openAppstoreOverlay",value:function(e){v.render(this.app,this,e),v.attachEvents(this.app,this)}}])&&u(i.prototype,o),c&&u(i,c),O}(b);function E(e){var t,a=k.readdirSync(e,{withFileTypes:!0}).map((function(t){var a=S.resolve(e,t.name);return t.isDirectory()?E(a):a}));return(t=Array.prototype).concat.apply(t,s(a))}function C(e){return e=(e=e.toLowerCase()).replace(/\t/g,"_")}e.exports=P}).call(this,"/",a(12),a(9).Buffer)},function(e,t){e.exports=unzipper},function(e,t,a){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,a){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d(e);if(t){var n=d(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=a(5),h=a(42),f=a(15),m=a(211),g=a(224),b=a(68),y=(a(227),a(96));a(228);fetch=a(186);var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(M,e);var r,n,u,f,v,_,w,x,k,S,P,E,C,A=l(M);function M(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,M),(t=A.call(this,e)).name="Arcade",t.description="Interface for creating and joining games coded for the Saito Open Source Game Engine.",t.categories="Games Entertainment",t.events=["chat-render-request"],t.mods=[],t.affix_callbacks_to=[],t.games=[],t.observer=[],t.old_game_removal_delay=2e6,t.is_initializing=!1,t.initialization_timer=null,t.viewing_arcade_initialization_page=0,t.icon_fa="fas fa-gamepad",t.accepted=[],t.description="A place to find, play and manage games!",t.categories="Games Utilities",t.header=null,t.overlay=null,t}return r=M,(n=[{key:"receiveEvent",value:function(e,t){"chat-render-request"==e&&this.browser_active&&(g.render(this.app,this),g.attachEvents(this.app,this))}},{key:"handleUrlParams",value:function(e){if("watch"==e.get("i")){var t=e.get("msg");this.observeGame(t,0)}}},{key:"renderArcadeMain",value:function(e,t){1==this.browser_active&&0==this.viewing_arcade_initialization_page&&(m.render(this.app,this),m.attachEvents(this.app,this))}},{key:"returnServices",value:function(){var e=[];return e.push({service:"arcade",domain:"saito"}),e}},{key:"respondTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"header-dropdown"==e?{name:this.appname?this.appname:this.name,icon_fa:this.icon_fa,browser_active:this.browser_active,slug:this.returnSlug()}:null}},{key:"initialize",value:function(e){var t=this;o(d(M.prototype),"initialize",this).call(this,e),null!=this.app.options.games&&this.addGamesToOpenList(this.app.options.games.map((function(e){return t.createGameTXFromOptionsGame(e)}))),this.app.modules.respondTo("arcade-games").forEach((function(e){t.affix_callbacks_to.push(e.name)}))}},{key:"initializeHTML",value:function(e){this.header=new b(e,this),e.modules.getRespondTos("private_sale_overlay").forEach((function(e,t){e.initializePrivateSaleOverlay()}))}},{key:"onPeerHandshakeComplete",value:function(e,t){var a=this;if(0!=this.browser_active){var r=(new Date).getTime()-this.old_game_removal_delay;this.sendPeerDatabaseRequestWithFilter("Arcade",'SELECT * FROM games WHERE status = "open" AND created_at > '.concat(r),(function(e){e.rows&&a.addGamesToOpenList(e.rows.map((function(e){return new p.transaction(JSON.parse(e.tx))})))})),(new Date).getTime(),this.sendPeerDatabaseRequestWithFilter("Arcade","SELECT DISTINCT id, count(id) as count, last_move, game_id, module, player, players_array FROM gamestate WHERE 1 = 1 AND last_move > 10 GROUP BY game_id ORDER BY count DESC, last_move DESC LIMIT 8",(function(e){e.rows&&e.rows.forEach((function(e){var t=e.game_id,r=e.module,n=e.players_array,i=e.player;a.addGameToObserverList({game_id:t,module:r,players_array:n,player:i})}))}))}}},{key:"render",value:(C=i(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("arcade-container")||t.browser.addElementToDom(y()),null==this.header&&(this.header=new b(t,this)),null==this.overlay&&(this.overlay=new h(t,this)),this.header.render(t,this),this.header.attachEvents(t,this),this.overlay.render(t,this),this.overlay.attachEvents(t,this),g.render(t,this),g.attachEvents(t,this),this.renderArcadeMain(this.app,this);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return C.apply(this,arguments)})},{key:"isMyGame",value:function(e,t){for(var a=0;a<e.msg.players.length;a++)if(e.msg.players[a]==t.wallet.returnPublicKey())return!0;return!1}},{key:"purgeBadGames",value:function(e){if(e.options&&e.options.games)for(var t=e.options.games.length-1;t>=0;t--)""===e.options.games[t].module&&e.options.games[t].id.length<25&&e.options.games.splice(t,1)}},{key:"notifyPeers",value:function(e,t){for(var a=0;a<e.network.peers.length;a++)if("lite"==e.network.peers[a].peer.synctype){var r={request:"arcade spv update",data:{}};r.data.tx=t,e.network.peers[a].sendRequest(r.request,r.data)}}},{key:"joinGame",value:function(e,t){for(var a=t.returnMessage(),r=(a.game_id,0);r<this.games;r++)if(this.games[r].transaction&&this.games[r].transaction.msg&&a.game_id==this.games[r].transaction.msg.game_id){for(var n=0;n<this.games[r].transaction.msg.players.length;n++)for(var i=0;i<t.transaction.to.length;i++)this.games[r].transaction.msg.players[n]==t.transaction.to[i].add&&(n=this.games[r].transaction.msg.players.length+1);this.games[r].transaction.msg.players.length}if(this.joinGameOnOpenList(t),this.receiveJoinRequest(null,t,0,e),t.transaction){if(!t.transaction.sig)return;if(1==t.msg.over)return;for(var s=0;s<this.games.length;s++)if(this.games[s].transaction.sig==a.game_id&&this.games[s].msg.players.length>=this.games[s].msg.players_needed&&this.games[s].msg.players[0]==this.app.wallet.returnPublicKey()){this.games[s].msg.players.splice(0,1),this.games[s].msg.players_sigs.splice(0,1);var o=this.createAcceptTransaction(this.games[s]);this.app.network.propagateTransaction(o)}}}},{key:"onConfirmation",value:(E=i(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o,c,l,u,d,p,h,f,m,g,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.returnMessage(),0!=r){e.next=44;break}if(this.purgeBadGames(n),(0==n.BROWSER&&"open"==i.request||"join"==i.request||"accept"==i.request||"close"==i.request)&&this.notifyPeers(n,a),"Arcade"===i.module&&"open"==i.request&&(this.addGameToOpenList(a),this.receiveOpenRequest(t,a,r,n)),"ArcadeInvite"===i.module&&"open"==i.request&&a.isTo(n.wallet.returnPublicKey())&&this.addGameToOpenList(a),"join"==i.request&&this.joinGame(n,a),"Arcade"==i.module&&"close"==i.request&&(this.receiveCloseRequest(t,a,r,n),this.receiveGameoverRequest(t,a,r,n)),null!=i.game_state&&""!=i.game_id&&this.saveGameState(t,a,r,n),"sorry"===i.request&&a.isTo(n.wallet.returnPublicKey())&&n.modules.returnModule("Arcade").receiveSorryAcceptedTransaction(t,a,r,n),"accept"!==i.request){e.next=44;break}return s={$game_id:a.msg.game_id},e.next=15,this.app.storage.executeDatabase('UPDATE games SET status = "active" WHERE game_id = $game_id',s,"arcade");case 15:if(a.isTo(n.wallet.returnPublicKey())){e.next=17;break}return e.abrupt("return");case 17:if(this.app.options&&(this.app.options.games||(this.app.options.games=[]),this.app.options.games)){for(o=!1,c=0;c<this.app.options.games.length;c++)this.app.options.games[c].id==i.game_id&&(o=!0);if(0==o){if(!a.isTo(n.wallet.returnPublicKey())&&this.games.length>0)for(l=0;l<this.games.length;l++)(u=Object.assign({sig:""},this.games[l].transaction)).sig==i.game_id&&(u.msg=Object.assign({players_needed:0,players:[]},this.games[l].msg),parseInt(u.msg.players_needed)>=u.msg.players.length+1&&this.removeGameFromOpenList(i.game_id));a.isTo(n.wallet.returnPublicKey())&&(d=this.app.modules.returnModule(a.msg.game))&&d.loadGame(a.msg.game_id)}}if(1!=this.app.BROWSER){e.next=34;break}if(null==this.app.options){e.next=32;break}if(null==this.app.options.games){e.next=32;break}p=0;case 22:if(!(p<this.app.options.games.length)){e.next=32;break}if(this.app.options.games[p].id!=i.game_id){e.next=29;break}if(0!=this.app.options.games[p].initializing){e.next=29;break}if(!((h=(new Date).getTime())-this.app.options.games[p].ts>5e3)){e.next=29;break}return console.log("".concat(h," ------- ").concat(this.app.options.games[p].ts)),e.abrupt("return");case 29:p++,e.next=22;break;case 32:if(!a.isTo(n.wallet.returnPublicKey())&&this.games.length>0)for(f=0;f<this.games.length;f++)(m=Object.assign({sig:""},this.games[f].transaction)).sig==i.game_id&&(m.msg=Object.assign({players_needed:0,players:[]},this.games[f].msg),parseInt(m.msg.players_needed)==m.msg.players.length+1&&this.removeGameFromOpenList(i.game_id));for(g=0;g<this.games.length;g++)(b=Object.assign({sig:""},this.games[g].transaction)).sig===a.msg.game_id&&b.options&&b.options.players_needed<=b.players.length+1&&(console.info("ACCEPT MESSAGE SENT ON GAME WAITING FOR ONE PLAYER! -- deleting"),this.games.splice(g,1),console.info("RE-RENDER"),this.renderArcadeMain(this.app,this));case 34:return e.next=36,this.receiveAcceptRequest(t,a,r,n);case 36:if(0==this.browser_active&&"Arcade"===i.module&&a.isTo(n.wallet.returnPublicKey())&&this.showAlert(),!a.isTo(n.wallet.returnPublicKey())){e.next=44;break}if(console.info("THIS GAMEIS FOR ME: "+a.isTo(n.wallet.returnPublicKey())),console.info("OUR GAMES: ",this.app.options.games),!a.msg.over){e.next=43;break}if(1!=a.msg.over){e.next=43;break}return e.abrupt("return");case 43:this.launchGame(i.game_id);case 44:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r){return E.apply(this,arguments)})},{key:"handlePeerRequest",value:(P=i(regeneratorRuntime.mark((function e(t,a,r){var n,i,s,c,l,u,h,f,m,g,b,y,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.length>3&&void 0!==v[3]?v[3]:null,"arcade spv update"===a.request){if(i=new p.transaction(a.data.tx.transaction),s=i.returnMessage(),c=0,l=null,console.log("arcade spv update: "+JSON.stringify(s)),"Arcade"===s.module&&"open"==s.request&&(siteMessage(s.game+" invite created.",3e3),this.addGameToOpenList(i),this.receiveOpenRequest(l,i,c,t)),"ArcadeInvite"===s.module&&"open"==s.request&&i.isTo(t.wallet.returnPublicKey())&&(siteMessage("Private "+s.game+" invite created.",3e3),this.addGameToOpenList(i)),"join"==s.request&&(console.log("joining game on open list..."),this.joinGameOnOpenList(i),console.log("and processing join request"),this.receiveJoinRequest(l,i,c,t)),"accept"==s.request&&(this.removeGameFromOpenList(s.game_id),s.players.includes(t.wallet.returnPublicKey())&&(siteMessage(s.module+" invite accepted.",2e4),t.browser.sendNotification("Game Accepted",s.module+" invite accepted.","game-acceptance-notification"))),"Arcade"==s.module&&"close"==s.request){if(i.isFrom(this.app.wallet.returnPublicKey()))this.removeGameFromOpenList(i.returnMessage().sig);else if(this.app.options&&this.app.options.games)for(u=0;u<this.app.options.games.length;u++)this.app.options.games[u].id===i.returnMessage().sig&&(console.log("%%%%%%%%%%%%%%%%"),console.log("%%%%%%%%%%%%%%%%"),console.log("%%%% DELETED %%%"),console.log("%%%%%%%%%%%%%%%%"),console.log("%%%%%%%%%%%%%%%%"),this.app.options.games[u].status="Opponent Resigned",this.app.options.games[u].over=1,this.app.storage.saveOptions(),(h=this.app.modules.returnModule(this.app.options.games[u].module))&&(h.loadGame(i.returnMessage().sig),h.updateStatus("Opponent Resigned"),h.updateLog("Opponent Resigned")));this.removeGameFromOpenList(s.sig)}this.receiveCloseRequest(l,i,c,t)}if("rawSQL"!=a.request||0!=t.BROWSER||"Arcade"!=a.data.module){e.next=29;break}if(!(a.data.sql.indexOf("is_game_already_accepted")>-1)){e.next=29;break}if(f=a.data.game_id,(m={}).rows=[],!(this.accepted[f]>0)){e.next=25;break}if(!(this.accepted[f]>2)){e.next=21;break}return g="SELECT status FROM games WHERE game_id = $game_id",b={$game_id:f},e.next=13,this.app.storage.queryDatabase(g,b,"arcade");case 13:if(!(y=e.sent)){e.next=21;break}if(!(y.length>0)){e.next=21;break}if("open"!==y[0].status){e.next=21;break}return this.accepted[f]=0,m.rows.push({game_still_open:1}),n(m),e.abrupt("return");case 21:this.accepted[f]++,m.rows.push({game_still_open:0}),e.next=27;break;case 25:this.accepted[f]=1,m.rows.push({game_still_open:1});case 27:return n(m),e.abrupt("return");case 29:o(d(M.prototype),"handlePeerRequest",this).call(this,t,a,r,n);case 30:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return P.apply(this,arguments)})},{key:"doesGameExistLocally",value:function(e){if(this.app.options&&this.app.options.games)for(var t=0;t<this.app.options.games.length;t++)if(this.app.options.games[t].id===e)return 1;return 0}},{key:"receiveGameoverRequest",value:(S=i(regeneratorRuntime.mark((function e(t,a,r,n){var i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.returnMessage(),s={$status:"over",$game_id:i.game_id,$winner:i.winner},e.next=5,this.app.storage.executeDatabase("UPDATE games SET status = $status, winner = $winner WHERE game_id = $game_id",s,"arcade");case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r){return S.apply(this,arguments)})},{key:"receiveOpenRequest",value:(k=i(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o,c,l,u,d,p,h,f,m,g,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.returnMessage(),s=a.transaction.sig,o=2,parseInt(i.players_needed)>2&&(o=parseInt(i.players_needed)),c=i.game,l={},null!=i.options&&(l=i.options),u=a.transaction.from[0].add,d=u,p=1,null!=t&&(p=t.block.id),h=parseInt(a.transaction.ts),f=h+6e4*parseInt(60),m="",i.players_sigs.length>0&&(m=i.players_sigs[0]),g={$game_id:s,$players_needed:parseInt(o),$players_array:d,$module:c,$status:"open",$options:l,$tx:JSON.stringify(a.transaction),$start_bid:p,$created_at:h,$expires_at:f},e.next=21,n.storage.executeDatabase("INSERT INTO games (\n                game_id ,\n                players_needed ,\n                players_array ,\n                module ,\n                status ,\n                options ,\n                tx ,\n                start_bid ,\n                created_at ,\n                expires_at\n              ) VALUES (\n                $game_id ,\n                $players_needed ,\n                $players_array ,\n                $module ,\n                $status ,\n                $options ,\n                $tx,\n                $start_bid ,\n                $created_at ,\n                $expires_at\n              )",g,"arcade");case 21:return b={$game_id:s,$player:u,$acceptance_sig:m,$module:c,$created_at:h,$expires_at:f},e.next=25,n.storage.executeDatabase("INSERT INTO invites (\n                game_id ,\n                player ,\n                acceptance_sig ,\n                module ,\n                created_at ,\n                expires_at\n              ) VALUES (\n                $game_id ,\n                $player ,\n                $acceptance_sig ,\n                $module ,\n                $created_at ,\n                $expires_at\n              )",b,"arcade");case 25:return e.abrupt("return");case 26:case"end":return e.stop()}}),e)}))),function(e,t,a,r){return k.apply(this,arguments)})},{key:"receiveJoinRequest",value:(x=i(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o,c,l,u,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.returnMessage(),s=a.msg.game_id,parseInt(i.players_needed)>2&&parseInt(i.players_needed),o=i.game,null!=i.options&&i.options,c=a.transaction.from[0].add,null!=t&&t.block.id,l=parseInt(a.transaction.ts),u=l+6e4*parseInt(60),d="",""!=i.invite_sig&&(d=i.invite_sig),p={$game_id:s,$player:c,$acceptance_sig:d,$module:o,$created_at:l,$expires_at:u},e.next=21,n.storage.executeDatabase("INSERT INTO invites (\n                game_id ,\n                player ,\n                acceptance_sig ,\n                module ,\n                created_at ,\n                expires_at\n              ) VALUES (\n                $game_id ,\n                $player ,\n                $acceptance_sig ,\n                $module ,\n                $created_at ,\n                $expires_at\n              )",p,"arcade");case 21:return e.abrupt("return");case 22:case"end":return e.stop()}}),e)}))),function(e,t,a,r){return x.apply(this,arguments)})},{key:"createOpenTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.app.wallet.returnPublicKey(),r="Arcade";""!=t&&(a=t,r="ArcadeInvite");var n=e.ts,i=e.name,s=e.options,o=e.options_html,c=e.players_needed,l=this.app.crypto.signMessage("invite_game_".concat(n),this.app.wallet.returnPrivateKey()),u=this.app.wallet.createUnsignedTransactionWithDefaultFee();return u.transaction.to.push(new p.slip(a,0)),u.msg={ts:n,module:r,request:"open",game:i,options:s,options_html:o||"",players_needed:parseInt(c),players:[this.app.wallet.returnPublicKey()],players_sigs:[l]},u=this.app.wallet.signTransaction(u)}},{key:"receiveCloseRequest",value:(w=i(regeneratorRuntime.mark((function e(t,a,r,n){var i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.returnMessage(),s={$status:"close",$game_id:i.sig},e.next=5,n.storage.executeDatabase("UPDATE games SET status = $status WHERE game_id = $game_id",s,"arcade");case 5:e.sent;case 6:case"end":return e.stop()}}),e)}))),function(e,t,a,r){return w.apply(this,arguments)})},{key:"createInviteTransaction",value:function(e,t,a){var r=a.returnMessage(),n=e.wallet.createUnsignedTransactionWithDefaultFee();return n.transaction.to.push(new p.slip(a.transaction.from[0].add,0)),n.transaction.to.push(new p.slip(e.wallet.returnPublicKey(),0)),n.msg.ts="",n.msg.module=r.game,n.msg.request="invite",n.msg.game_id=a.transaction.sig,n.msg.players_needed=parseInt(r.players_needed),n.msg.options=r.options,n.msg.accept_sig="",""!=a.msg.accept_sig&&(n.msg.accept_sig=a.msg.accept_sig),""!=a.msg.ts&&(n.msg.ts=a.msg.ts),n.msg.invite_sig=e.crypto.signMessage("invite_game_"+n.msg.ts,e.wallet.returnPrivateKey()),n=this.app.wallet.signTransaction(n)}},{key:"createJoinTransaction",value:function(e){var t=e.returnMessage(),a=this.app.wallet.createUnsignedTransactionWithDefaultFee();return a.transaction.to.push(new p.slip(e.transaction.from[0].add,0)),a.transaction.to.push(new p.slip(this.app.wallet.returnPublicKey(),0)),a.msg.ts="",a.msg.module=t.game,a.msg.request="join",a.msg.game_id=e.transaction.sig,a.msg.players_needed=parseInt(t.players_needed),a.msg.options=t.options,a.msg.invite_sig=this.app.crypto.signMessage("invite_game_"+e.msg.ts,this.app.wallet.returnPrivateKey()),""!=e.msg.ts&&(a.msg.ts=e.msg.ts),a=this.app.wallet.signTransaction(a)}},{key:"launchSinglePlayerGame",value:function(e,t,a){window.location="/"+a.slug}},{key:"createAcceptTransaction",value:function(e){var t=e.returnMessage(),a=this.app.crypto.signMessage("invite_game_"+t.ts,this.app.wallet.returnPrivateKey());t.players.push(this.app.wallet.returnPublicKey()),t.players_sigs.push(a),t.request="accept";for(var r=this.app.wallet.createUnsignedTransactionWithDefaultFee(),n=0;n<t.players.length;n++)r.transaction.to.push(new p.slip(t.players[n],0));return r.transaction.to.push(new p.slip(this.app.wallet.returnPublicKey(),0)),r.msg=t,r.msg.game_id=e.transaction.sig,r.msg.request="accept",r.msg.module=t.game,r=this.app.wallet.signTransaction(r)}},{key:"receiveSorryAcceptedTransaction",value:function(e,t,a,r){var n=t.returnMessage();try{if(r.options.games)for(var i=r.options.games.length-1;i>=0;i--)r.options.games[i].id==n.game_id&&(r.options.games[i].players.length!=parseInt(r.options.games[i].players_needed)||r.options.games[i].players.includes(t.transaction.from[0].add)||(1==this.browser_active&&salert("Opponent has responded claiming game already accepted :( -- returning to Arcade"),r.options.games.splice(i,1),r.storage.saveOptions()));if(1==this.browser_active)return salert("Sorry! Your opponent has replied that has already accepted that game!"),void(window.location="/arcade")}catch(e){}}},{key:"receiveAcceptRequest",value:(_=i(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o,c,l,u,d,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.browser_active){e.next=19;break}if(!a.isTo(n.wallet.returnPublicKey())){e.next=17;break}if(a.returnMessage().game_id,!n.options.games){e.next=12;break}i=0;case 6:if(!(i<n.options.games.length)){e.next=12;break}if(n.options.games[i].id!=a.transaction.sig){e.next=9;break}return e.abrupt("return");case 9:i++,e.next=6;break;case 12:GameLoader.render(n,this),GameLoader.attachEvents(n,this),this.viewing_arcade_initialization_page=1,e.next=19;break;case 17:if(0!=this.game.player){e.next=19;break}return e.abrupt("return");case 19:for(s=a.returnMessage(),o=[],c=0;c<a.transaction.to.length;c++)o.includes(a.transaction.to[c].add)||o.push(a.transaction.to[c].add);return(l=o).sort(),u=l.join("_"),d="UPDATE games SET players_array = $players_array WHERE status = $status AND game_id = $game_id",p={$players_array:u,$status:"open",$game_id:s.game_id},e.prev=27,e.next=30,this.app.storage.executeDatabase(d,p,"arcade");case 30:e.sent,e.next=35;break;case 33:e.prev=33,e.t0=e.catch(27);case 35:return d="UPDATE games SET status = 'active' WHERE game_id = $game_id",p={$game_id:s.game_id},e.prev=37,e.next=40,this.app.storage.executeDatabase(d,p,"arcade");case 40:e.sent,e.next=46;break;case 43:e.prev=43,e.t1=e.catch(37),console.log(e.t1);case 46:case"end":return e.stop()}}),e,this,[[27,33],[37,43]])}))),function(e,t,a,r){return _.apply(this,arguments)})},{key:"launchGame",value:function(e){var t=this;if(0!=this.browser_active){var a=this;a.is_initializing=!0,a.initialization_timer=setInterval((function(){console.log("setInterval");var r=-1;if(null!=a.app.options.games)for(var n=0;n<a.app.options.games.length;n++)a.app.options.games[n].id==e&&(r=n);if(-1!=r&&0==a.app.options.games[r].initializing){var i=1;if(a.app.wallet.wallet.pending.length>0)for(var s=0;s<a.app.wallet.wallet.pending.length;s++){var o=new p.transaction(JSON.parse(a.app.wallet.wallet.pending[s])).returnMessage();o.module==a.app.options.games[r].module&&o.game_id==a.app.options.games[r].id&&(i=0)}if(0==i)return void console.log("transaction for this game still in pending...");clearInterval(a.initialization_timer),GameLoader.render(t.app,t,e),GameLoader.attachEvents(t.app,t),t.viewing_arcade_initialization_page=1}}),1e3)}}},{key:"webServer",value:function(e,r,n){o(d(M.prototype),"webServer",this).call(this,e,r,n);var s=e.storage.returnFileSystem(),c=a(19);null!=s&&(r.get("/arcade/observer_multi/:game_id/:bid/:tid/:last_move",function(){var t=i(regeneratorRuntime.mark((function t(a,r){var n,i,s,o,c,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,i=0,s=0,o=0;try{a.params.last_move&&(n=a.params.last_move),a.params.bid&&(i=a.params.bid),a.params.tid&&(s=a.params.tid),a.params.game_id&&(o=a.params.game_id),"undefined"===i&&(i=0),"undefined"===s&&(s=0)}catch(e){}return c="SELECT * FROM gamestate WHERE game_id = $game_id AND last_move > $last_move ORDER BY last_move ASC LIMIT 10",l={$game_id:o,$last_move:n},0!=s&&(c="SELECT * FROM gamestate WHERE game_id = $game_id AND (last_move > $last_move OR tid > $last_tid) ORDER BY last_move ASC LIMIT 10",l={$game_id:o,$last_move:n,$last_tid:s}),t.next=10,e.storage.queryDatabase(c,l,"arcade");case 10:if(!((u=t.sent).length>0)){t.next=19;break}return r.setHeader("Content-type","text/html"),r.charset="UTF-8",r.write(JSON.stringify(u)),r.end(),t.abrupt("return");case 19:return r.setHeader("Content-type","text/html"),r.charset="UTF-8",r.write("{}"),r.end(),t.abrupt("return");case 24:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),r.get("/arcade/observer_prev/:game_id/:current_move",function(){var t=i(regeneratorRuntime.mark((function t(a,r){var n,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="SELECT * FROM gamestate WHERE game_id = $game_id AND last_move < $last_move ORDER BY last_move DESC LIMIT 2",i={$game_id:a.params.game_id,$last_move:a.params.current_move},0!=a.params.current_move&&"undefined"!==a.params.current_move||(n="SELECT * FROM gamestate WHERE game_id = $game_id ORDER BY last_move ASC LIMIT 1",i={$game_id:a.params.game_id}),t.next=5,e.storage.queryDatabase(n,i,"arcade");case 5:if(!((s=t.sent).length>0)){t.next=14;break}return r.setHeader("Content-type","text/html"),r.charset="UTF-8",r.write(JSON.stringify(s)),r.end(),t.abrupt("return");case 14:return r.setHeader("Content-type","text/html"),r.charset="UTF-8",r.write("{}"),r.end(),t.abrupt("return");case 19:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),r.get("/arcade/observer/:game_id",function(){var t=i(regeneratorRuntime.mark((function t(a,r){var n,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={$game_id:a.params.game_id},t.next=4,e.storage.queryDatabase("SELECT bid, tid, last_move, game_state FROM gamestate WHERE game_id = $game_id ORDER BY id DESC LIMIT 1",n,"arcade");case 4:if(!((i=t.sent).length>0)){t.next=12;break}return s=i[0],r.setHeader("Content-type","text/html"),r.charset="UTF-8",r.write(JSON.stringify(s)),r.end(),t.abrupt("return");case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),r.get("/arcade/keystate/:game_id/:player_pkey",function(){var t=i(regeneratorRuntime.mark((function t(a,r){var n,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={$game_id:a.params.game_id,$playerpkey:a.params.player_pkey},t.next=4,e.storage.queryDatabase("SELECT * FROM gamestate WHERE game_id = $game_id AND player = $playerpkey ORDER BY id DESC LIMIT 1",n,"arcade");case 4:if(!((i=t.sent).length>0)){t.next=12;break}return s=i[0],r.setHeader("Content-type","text/html"),r.charset="UTF-8",r.write(s.game_state.toString()),r.end(),t.abrupt("return");case 12:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),r.get("/arcade/restore/:game_id/:player_pkey",function(){var t=i(regeneratorRuntime.mark((function t(a,r){var n,i,s,o,c,l,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={$game_id:a.params.game_id},t.next=4,e.storage.queryDatabase("SELECT * FROM gamestate WHERE game_id = $game_id ORDER BY id DESC LIMIT 10",n,"arcade");case 4:i=t.sent,s=0,o=[],c="";try{null!=a.params.player_pkey&&(c=a.params.pkayer_pkey)}catch(e){}if(!(i.length>0)){t.next=16;break}for(l=0;l<i.length;l++)(u=i[l]).player_pkey==c?s=1:o.push(u.state),""!=c&&1!=s||(l=i.length+1);return r.setHeader("Content-type","text/html"),r.charset="UTF-8",r.write(JSON.stringify(o)),r.end(),t.abrupt("return");case 16:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()),r.get("/arcade/invite/:gameinvite",function(){var e=i(regeneratorRuntime.mark((function e(a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setHeader("Content-type","text/html"),r.sendFile(c.resolve(t+"/web/invite.html"));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()))}},{key:"createGameTXFromOptionsGame",value:function(e){var t=new p.transaction;if(!(e.over&&e.last_block>0)){e.players?(t.transaction.to=e.players.map((function(e){return new p.slip(e)})),t.transaction.from=e.players.map((function(e){return new p.slip(e)}))):(t.transaction.from.push(new p.slip(this.app.wallet.returnPublicKey())),t.transaction.to.push(new p.slip(this.app.wallet.returnPublicKey())));var a={request:"loaded",game:e.module,game_id:e.id,options:e.options,players:e.players,players_needed:e.players_needed,over:e.over,last_block:e.last_block};return"Opponent Resigned"===e.status&&(a.options_html="Opponent Resigned"),t.transaction.sig=e.id,t.msg=a,t=this.app.wallet.signTransaction(t)}}},{key:"removeOldGames",value:function(){for(var e=0,t=0;t<this.games.length;t++){var a=parseInt(this.games[t].transaction.ts);(new Date).getTime()-a>this.old_game_removal_delay&&(this.games.splice(t,1),e=1,t--)}return e}},{key:"removeGameFromOpenList",value:function(e){this.games=this.games.filter((function(t){return!t.transaction||t.transaction.sig!=e})),this.renderArcadeMain(this.app,this)}},{key:"isForUs",value:function(e){var t=this;if(!e)return!1;var a=!0,r=e.returnMessage();return!!r&&(r.options.players_invited&&(a=!1,e.transaction.from[0].add==this.app.wallet.returnPublicKey()?a=!0:e.returnMessage().options.players_invited.forEach((function(e){e!=t.app.wallet.returnPublicKey()&&e!=t.app.keys.returnIdentifierByPublicKey(t.app.wallet.returnPublicKey())||(a=!0)}))),a)}},{key:"validateGame",value:function(e){if(!e)return!1;if(!e.transaction)return!1;if(!e.transaction.sig)return!1;if(1==e.msg.over)return!1;for(var t=0;t<this.games.length;t++){var a=Object.assign({sig:""},this.games[t].transaction);if(e.transaction.sig==a.sig)return!1;if(""!=e.returnMessage().game_id&&e.returnMessage().game_id==a.sig)return!1;if(e.returnMessage().game_id===this.games[t].transaction.sig)return console.log("ERROR 480394: not re-adding existing game to list"),!1}return!0}},{key:"joinGameOnOpenList",value:function(e){if(e.transaction&&e.transaction.sig&&1!=e.msg.over){for(var t=e.returnMessage(),a=0;a<this.games.length;a++)this.games[a].transaction.sig==t.game_id&&(this.games[a].msg.players.includes(e.transaction.from[0].add)||""!=t.invite_sig&&(this.games[a].msg.players.push(e.transaction.from[0].add),this.games[a].msg.players_sigs||(this.games[a].msg.players_sigs=[]),this.games[a].msg.players_sigs.push(t.invite_sig)));try{1==this.browser_active&&this.render(this.app)}catch(e){console.log("Non-fatal error rendering open game list")}}}},{key:"addGameToOpenList",value:function(e){if(console.log("addGameToOpenList"),this.validateGame(e)){var t=this.isForUs(e);t&&this.games.unshift(e);var a=this.removeOldGames();(t||a)&&this.renderArcadeMain(this.app,this)}}},{key:"addGamesToOpenList",value:function(e){var t=this,a=!1;e.forEach((function(e,r){if(t.validateGame(e)){var n=t.isForUs(e);n&&t.games.unshift(e),a=a||n}}));var r=this.removeOldGames();(a||r)&&this.renderArcadeMain(this.app,this)}},{key:"addGameToObserverList",value:function(e){for(var t=0;t<this.observer.length;t++)if(e.game_id==this.observer[t].game_id)return;this.observer.push(e),this.renderArcadeMain(this.app,this)}},{key:"saveGameState",value:(v=i(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o,c,l,u,d,p,h,f,m,g,b,y,v,_,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=a.returnMessage(),s="",""!=i.game_state&&(s=i.game_state),o='INSERT INTO gamestate (\n                game_id ,\n                player ,\n                players_array ,\n                module ,\n                bid ,\n                tid ,\n                lc ,\n                sharekey ,\n                game_state ,\n                tx ,\n                last_move\n       ) VALUES (\n                $game_id,\n                $player,\n                $players_array,\n                $module,\n                $bid,\n                $tid,\n                $lc,\n                "",\n                $game_state,\n                $tx ,\n                $last_move\n        )',c=[],l=a.transaction.to,u=0;u<l.length;u++)c.includes(l[u].add)||c.push(l[u].add);if(s.last_turn=i.turn,1!=c.length){e.next=10;break}return e.abrupt("return");case 10:return d=c.join("_"),p={$game_id:i.game_id,$player:a.transaction.from[0].add,$players_array:d,$module:i.module,$bid:t.block.id,$tid:a.transaction.id,$lc:1,$game_state:JSON.stringify(s),$tx:JSON.stringify(a.transaction),$last_move:(new Date).getTime()},e.next=14,n.storage.executeDatabase(o,p,"arcade");case 14:if(!(Math.random()<.005)){e.next=43;break}return h=(new Date).getTime(),f={$last_move:h-64e7},e.next=21,n.storage.queryDatabase("SELECT game_id FROM gamestate WHERE last_move < $last_move GROUP BY game_id ORDER BY last_move ASC",f,"arcade");case 21:if(!(m=e.sent)){e.next=34;break}if(!(m.length>0)){e.next=34;break}g=0;case 25:if(!(g<m.length)){e.next=34;break}return b=m[g].game_id,y={$game_id:b},e.next=31,n.storage.executeDatabase("DELETE FROM gamestate WHERE game_id = $game_id",y,"arcade");case 31:g++,e.next=25;break;case 34:return v=(new Date).getTime()-12e5,_={$adjusted_ts:v},e.next=39,this.app.storage.executeDatabase("DELETE FROM games WHERE status = 'open' AND created_at < $adjusted_ts",_,"arcade");case 39:return w={$adjusted_ts:v},e.next=43,this.app.storage.executeDatabase("DELETE FROM invites WHERE created_at < $adjusted_timestamp",w,"arcade");case 43:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r){return v.apply(this,arguments)})},{key:"observeGame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this,r=JSON.parse(this.app.crypto.base64ToString(e)),n=r.player,i=r.game_id,s=r.tid,o=r.bid,c=r.last_move;if(void 0!==s&&""!=s||(s=1),void 0!==o&&""!=o||(s=1),void 0!==c&&""!=c||(s=1),this.app.options.games)for(var l=this.app.options.games,u=0;u<l.length;u++)if(l[u].id===i){l[u].observer_mode=1,l[u].observer_mode_active=0;for(var d=0;d<l[u].players.length;d++)l[u].players[d]==n&&(l[u].observer_mode_player=d+1);l[u].observer_mode_player||(l[u].observer_mode_player=1),""==n&&(n=l[u].players[0]),l[u].ts=(new Date).getTime(),a.app.keys.addWatchedPublicKey(n),a.app.options.games=l,a.app.storage.saveOptions();var p=a.app.modules.returnModule(r.module).returnSlug();return void(window.location="/"+p)}a.app.keys.addWatchedPublicKey(n);var h=a.app.options.games;null==h&&(h=[]);for(var f=0;f<h.length;f++)h[f].id==i&&h.splice(f,1);console.log("ABOUT TO KICK INTO OBSERVER MODE!"),a.app.options.games=h,a.initializeObserverMode(i,t),console.log("AND CONTINUING")}},{key:"observerDownloadNextMoves",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this,r=0;r<e.game.future.length;r++){var n=new p.transaction(JSON.parse(e.game.future[r])),i=n.returnMessage();i.step.game<=e.game.step.game&&i.step.game<=e.game.step.players[n.transaction.from[0].add]&&(e.game.future.splice(r,1),r--)}console.log(" NEXT MOVES: /arcade/observer_multi/".concat(e.game.id,"/").concat(e.game.step.bid,"/").concat(e.game.step.tid,"/").concat(e.game.step.ts)),fetch("/arcade/observer_multi/".concat(e.game.id,"/").concat(e.game.step.bid,"/").concat(e.game.step.tid,"/").concat(e.game.step.ts)).then((function(r){r.json().then((function(r){console.log("data length: "+r.length);for(var n=0;n<r.length;n++){console.log("i: "+n+" --- tx id: "+r[n].id);var i=new p.transaction(JSON.parse(r[n].tx));i.msg=i.returnMessage(),i.msg.game_state={},i.msg.last_move=r[n].last_move,i.msg.last_tid=r[n].tid,i.msg.last_bid=r[n].bid,i=a.app.wallet.signTransaction(i);for(var s=0,o=0;o<e.game.future.length;o++)new p.transaction(JSON.parse(e.game.future[o])),console.log("steps comparison: "+i.msg.step.game+" -- vs -- "+e.game.step.game),i.msg.step.game<=e.game.step.game&&i.msg.step.game<=e.game.step.players[i.transaction.from[0].add]&&(s=1);0==s&&e.game.future.push(JSON.stringify(i.transaction))}e.saveGame(e.game.id),e.saveFutureMoves(e.game.id),null!=t&&t(e)}))})).catch((function(e){return console.info("ERROR 354322: error downloading next moves",e)}))}},{key:"initializeObserverModePreviousStep",value:(f=i(regeneratorRuntime.mark((function e(t,a){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(r=this).app.options.games,i=null,console.log("FETCHING: /arcade/observer_prev/".concat(t,"/").concat(a)),fetch("/arcade/observer_prev/".concat(t,"/").concat(a)).then((function(e){e.json().then((function(e){i=JSON.parse(e[0].game_state),console.log("UPDATED GAME TS to: "+JSON.stringify(i.step)),console.log("UPDATED GAME QUEUE to: "+JSON.stringify(i.queue));var t=new p.transaction(JSON.parse(e[0].tx));t.msg=t.returnMessage(),t.msg.game_state={},t.msg.last_move=e[0].last_move,t.msg.last_tid=e[0].tid,t.msg.last_bid=e[0].bid,t=r.app.wallet.signTransaction(t),null!=i.future&&"undefined"!=i.future&&null!=i.future||(i.future=[]),i.future.push(JSON.stringify(t.transaction));var a=i;a.turn=[],console.log("reset to step: "+a.step.game),console.log("queue at this step: "+a.queue),a.observer_mode=1,a.observer_mode_active=0,a.player=0,a.step.ts=0;for(var s=-1,o=0;o<n.length;o++)n[o].id===i.id&&(s=o);-1==s?n.push(a):n[s]=a,r.app.options.games=n,r.app.storage.saveOptions(),r.app.modules.returnModule(a.module);var c=r.app.modules.returnModule(i.module).returnSlug();window.location="/"+c}))}));case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return f.apply(this,arguments)})},{key:"initializeObserverMode",value:function(e,t){var a=this,r=a.app.options.games,n=null,i=0;console.log("initializing observer mode here!"),console.log("FETCHED: /arcade/observer_multi/".concat(e,"/0/0/").concat(t)),fetch("/arcade/observer_multi/".concat(e,"/0/0/").concat(t)).then((function(e){e.json().then((function(e){console.log("RECEIVED THE RESPONSE!");for(var t=0;t<e.length;t++)if(0==i){console.log("AA2"),n=JSON.parse(e[t].game_state),i=1,console.log("AA3");var s=new p.transaction(JSON.parse(e[t].tx));s.msg=s.returnMessage(),s.msg.game_state={},s.msg.last_move=e[t].last_move,s.msg.last_tid=e[t].last_tid,s.msg.last_bid=e[t].bid,s=a.app.wallet.signTransaction(s),null!=n.future&&"undefined"!=n.future&&null!=n.future||(n.future=[]),n.future.push(JSON.stringify(s.transaction)),console.log("AAA")}else{console.log("BB1");var o=new p.transaction(JSON.parse(e[t].tx));o.msg=o.returnMessage(),o.msg.game_state={},o.msg.last_move=e[t].last_move,o.msg.last_tid=e[t].tid,o.msg.last_bid=e[t].bid,o=a.app.wallet.signTransaction(o),null!=n.future&&"undefined"!=n.future&&null!=n.future||(n.future=[]),n.future.push(JSON.stringify(o.transaction)),console.log("BB2")}var c=n;c.observer_mode=1,c.observer_mode_active=0,c.player=0;for(var l=-1,u=0;u<r.length;u++)r[u].id===n.id&&(l=u);-1==l?r.push(c):r[l]=c,a.app.options.games=r,a.app.storage.saveOptions();var d=a.app.modules.returnModule(n.module).returnSlug();window.location="/"+d}))})).catch((function(e){return console.info("ERROR 351232: error fetching queued games for observer mode",e)}))}},{key:"shouldAffixCallbackToModule",value:function(e){if("ArcadeInvite"==e)return 1;if("Arcade"==e)return 1;for(var t=0;t<this.affix_callbacks_to.length;t++)if(this.affix_callbacks_to[t]==e)return 1;return 0}},{key:"updateIdentifier",value:function(){}},{key:"onResetWallet",value:function(){this.app.options&&(this.app.options.games=[])}}])&&s(r.prototype,n),u&&s(r,u),M}(f);e.exports=v}).call(this,"/")},function(e,t,a){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(1141),s=a(42),o=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};r(this,e),this.app=t,this.callback=a}var t,a,o;return t=e,(a=[{key:"render",value:function(e,t){t.modal_overlay=new s(e),t.modal_overlay.render(e,t),t.modal_overlay.attachEvents(e,t),document.querySelector(".add-user")||t.modal_overlay.showOverlay(e,t,i())}},{key:"attachEvents",value:function(e,t){var a=this;document.querySelector(".username-registry-input").select(),document.querySelector(".username-registry-input").setAttribute("placeholder",""),document.querySelector(".tutorial-skip").onclick=function(){e.options.wallet.anonymous=1,e.storage.saveOptions(),t.modal_overlay.hideOverlay(),a.callback()},document.querySelector("#registry-modal-button").onclick=function(){var r=document.querySelector("#registry-input").value;""==document.querySelector("#name").value&&e.modules.returnActiveModule().sendPeerDatabaseRequestWithFilter("Registry",'SELECT * FROM records WHERE identifier = "'.concat(r,'@saito"'),(function(n){if(n.rows){if(n.rows.length>0)return void salert("Identifier already in use. Please select another");e.modules.returnModule("Registry")&&(e.modules.returnModule("Registry").registerIdentifier(r)?(salert("Registering "+r+"@saito"),t.modal_overlay.hideOverlay(),a.callback()):salert("Error 411413: Error Registering Username"))}}))}}}])&&n(t.prototype,a),o&&n(t,o),e}();e.exports=o},function(e,t){e.exports=AracadeGameCarouselLeafTemplate=function(e,t){return'\n         <div class="leaf" style="background: url('.concat(t.background,');background-size:cover">\n           <div class="big">').concat(t.title,"</div>\n         </div>\n  ")}},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=u(e);if(t){var n=u(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return l(this,a)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(g,e);var t,a,r,n,l,u,d,p,h,f,m=c(g);function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=m.call(this,e)).name="Archive",t.description="Supports the saving and serving of network transactions",t.categories="Utilities Core",t.events=[],t.description="A tool for storing transactions for asynchronous retreival.",t.categories="Utilities",t}return t=g,(a=[{key:"onConfirmation",value:function(e,t,a,r){t.returnMessage(),0==a&&""!=t.msg.module&&this.saveTransaction(t)}},{key:"handlePeerRequest",value:(f=i(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a.request){e.next=2;break}return e.abrupt("return");case 2:if(null!=a.data){e.next=4;break}return e.abrupt("return");case 4:if(s={},"archive"!==a.request){e.next=32;break}if("delete"===a.data.request&&this.deleteTransaction(a.data.tx,a.data.publickey,a.data.sig),"save"===a.data.request&&this.saveTransaction(a.data.tx,a.data.type),"save_key"!==a.data.request){e.next=12;break}if(a.data.key){e.next=11;break}return e.abrupt("return");case 11:this.saveTransactionByKey(a.data.key,a.data.tx,a.data.type);case 12:if("load"!==a.data.request){e.next=23;break}return o="",c=50,""!=a.data.num&&(c=a.data.num),""!=a.data.type&&(o=a.data.type),e.next=19,this.loadTransactions(a.data.publickey,a.data.sig,o,c);case 19:i=e.sent,s.err="",s.txs=i,n(s);case 23:if("load_keys"!==a.data.request){e.next=32;break}if(a.data.keys){e.next=26;break}return e.abrupt("return");case 26:return e.next=28,this.loadTransactionsByKeys(a.data);case 28:i=e.sent,s.err="",s.txs=i,n(s);case 32:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r){return f.apply(this,arguments)})},{key:"saveTransaction",value:(h=i(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:null,a=o.length>1&&void 0!==o[1]?o[1]:"",null!=t){e.next=4;break}return e.abrupt("return");case 4:r="",n={},i=0;case 7:if(!(i<t.transaction.to.length)){e.next=15;break}return r="INSERT OR IGNORE INTO txs (sig, publickey, tx, ts, type) VALUES ($sig, $publickey, $tx, $ts, $type)",n={$sig:t.transaction.sig,$publickey:t.transaction.to[i].add,$tx:JSON.stringify(t.transaction),$ts:t.transaction.ts,$type:a},e.next=12,this.app.storage.executeDatabase(r,n,"archive");case 12:i++,e.next=7;break;case 15:s=0;case 16:if(!(s<t.transaction.from.length)){e.next=24;break}return r="INSERT OR IGNORE INTO txs (sig, publickey, tx, ts, type) VALUES ($sig, $publickey, $tx, $ts, $type)",n={$sig:t.transaction.sig,$publickey:t.transaction.from[s].add,$tx:JSON.stringify(t.transaction),$ts:t.transaction.ts,$type:a},e.next=21,this.app.storage.executeDatabase(r,n,"archive");case 21:s++,e.next=16;break;case 24:Math.random()<1e-4&&this.pruneOldTransactions();case 25:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"pruneOldTransactions",value:(p=i(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(new Date).getTime()-1e8,a={$ts:t,$type:"Chat"},this.app.storage.executeDatabase("DELETE FROM txs WHERE ts < $ts AND type = $type",a,"archive");case 4:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"saveTransactionByKey",value:(d=i(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:"",a=s.length>1&&void 0!==s[1]?s[1]:null,r=s.length>2&&void 0!==s[2]?s[2]:"",null!=a){e.next=5;break}return e.abrupt("return");case 5:return n="INSERT OR IGNORE INTO txs (sig, publickey, tx, ts, type) VALUES ($sig, $publickey, $tx, $ts, $type)",i={$sig:a.transaction.sig,$publickey:t,$tx:JSON.stringify(a.transaction),$ts:a.transaction.ts,$type:r},e.next=9,this.app.storage.executeDatabase(n,i,"archive");case 9:Math.random()<1e-4&&this.pruneOldData();case 10:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"deleteTransaction",value:(u=i(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:null,a=s.length>1&&void 0!==s[1]?s[1]:"",r=s.length>2&&void 0!==s[2]?s[2]:"",null!=t){e.next=5;break}return e.abrupt("return");case 5:if(!this.app.crypto.verifyMessage("delete_"+t.transaction.sig,r,a)){e.next=10;break}return n="DELETE FROM txs WHERE publickey = $publickey AND sig = $sig",i={$sig:t.transaction.sig,$publickey:a},e.next=10,this.app.storage.executeDatabase(n,i,"archive");case 10:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"loadTransactions",value:(l=i(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="",s={},"all"===r?(i="SELECT * FROM txs WHERE publickey = $publickey ORDER BY id DESC LIMIT $num",s={$publickey:t,$num:n}):(i="SELECT * FROM txs WHERE publickey = $publickey AND type = $type ORDER BY id DESC LIMIT $num",s={$publickey:t,$type:r,$num:n}),e.next=5,this.app.storage.queryDatabase(i,s,"archive");case 5:return o=e.sent,c=[],null!=o&&o.length>0&&(c=o.map((function(e){return e.tx}))),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r){return l.apply(this,arguments)})},{key:"loadTransactionsByKeys",value:(n=i(regeneratorRuntime.mark((function e(t){var a,r,n,i,s,o,c,l,u,d,p,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.keys,r=void 0===a?[]:a,n=t.type,i=void 0===n?"all":n,s=t.num,o=void 0===s?50:s,c="",l={},u=0,d="",p=[];try{r.forEach((function(e){d="$key".concat(u),p.push(d),l[d]=e,u++})),"all"===i?(c="SELECT * FROM txs WHERE publickey IN ( ".concat(p.join(",")," ) ORDER BY id DESC LIMIT $num"),l=Object.assign(l,{$num:o})):(c="SELECT * FROM txs WHERE publickey IN ( ".concat(p.join(",")," ) AND type = $type ORDER BY id DESC LIMIT $num"),l=Object.assign(l,{$type:i,$num:o}))}catch(e){console.log(e)}return e.prev=7,e.next=10,this.app.storage.queryDatabase(c,l,"archive");case 10:return h=e.sent,f=[],null!=h&&h.length>0&&(f=h.map((function(e){return e.tx}))),e.abrupt("return",f);case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0);case 19:case"end":return e.stop()}}),e,this,[[7,16]])}))),function(e){return n.apply(this,arguments)})}])&&s(t.prototype,a),r&&s(t,r),g}(a(15));e.exports=d},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,a){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=u(e);if(t){var n=u(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=a(47),p=(a(5),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,a,r,d=o(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=d.call(this,e)).app=e,t.name="Blackjack",t.description="BETA version of Blackjack. This game is a playable demo under active development!",t.categories="Games Arcade Entertainment",t.type="Classic Cardgame",t.card_img_dir="/poker/img/cards",t.useHUD=0,t.minPlayers=2,t.maxPlayers=6,t.interface=1,t.boardgameWidth=5100,t.settlement=[],t.updateHTML="",c(t,l(t))}return t=p,(a=[{key:"respondTo",value:function(e){if(null!=i(u(p.prototype),"respondTo",this).call(this,e))return i(u(p.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/poker/img/arcade/arcade-banner-background.png",title:"Blackjack"};return t}return null}},{key:"startRound",value:function(){this.game.queue.push("startplay"),this.game.state.player_wager=[],this.game.state.player_payout=[],this.game.state.player_hands=[],this.game.state.player_total=[];for(var e=0;e<this.game.players.length;e++)this.game.state.player_wager[e]=0,this.game.state.player_payout[e]=1,this.game.state.player_hands[e]=[],this.game.state.player_total[e]=0;2==this.game.players.length&&(this.game.queue.push("revealhand\t2"),this.game.queue.push("revealhand\t1"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),3==this.game.players.length&&(this.game.queue.push("revealhand\t3"),this.game.queue.push("revealhand\t2"),this.game.queue.push("revealhand\t1"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),4==this.game.players.length&&(this.game.queue.push("revealhand\t4"),this.game.queue.push("revealhand\t3"),this.game.queue.push("revealhand\t2"),this.game.queue.push("revealhand\t1"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),5==this.game.players.length&&(this.game.queue.push("revealhand\t5"),this.game.queue.push("revealhand\t4"),this.game.queue.push("revealhand\t3"),this.game.queue.push("revealhand\t2"),this.game.queue.push("revealhand\t1"),this.game.queue.push("DEAL\t1\t5\t2"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t5"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t5"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),6==this.game.players.length&&(this.game.queue.push("revealhand\t6"),this.game.queue.push("revealhand\t5"),this.game.queue.push("revealhand\t4"),this.game.queue.push("revealhand\t3"),this.game.queue.push("revealhand\t2"),this.game.queue.push("revealhand\t1"),this.game.queue.push("DEAL\t1\t6\t2"),this.game.queue.push("DEAL\t1\t5\t2"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t6"),this.game.queue.push("DECKENCRYPT\t1\t5"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t6"),this.game.queue.push("DECKXOR\t1\t5"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnDeck()));for(var t=0;t<this.game.players.length;t++)t+1!=this.game.state.dealer&&this.game.queue.push("selectwager\t"+(t+1))}},{key:"initializeHTML",value:function(e){var t=this;i(u(p.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(a){a.respondTo("chat-manager").render(e,t),a.respondTo("chat-manager").attachEvents(e,t)})),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"Log",id:"game-log",class:"game-log",callback:function(e,t){t.menu.hideSubMenus(),t.log.toggleLog()}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}}),this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}});for(var a=0,r=0,n=0;n<this.app.modules.mods.length;n++)if("chat"===this.app.modules.mods[n].slug)for(var s=0;s<this.game.players.length;s++)this.game.players[s]!=this.app.wallet.returnPublicKey()&&function(){0==a&&(t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),a=1),0==r&&(t.menu.addSubMenuOption("game-chat",{text:"Community",id:"game-chat-community",class:"game-chat-community",callback:function(e,t){t.menu.hideSubMenus(),c.mute_community_chat=0,c.sendEvent("chat-render-request",{}),c.openChatBox()}}),r=1);var e=[t.game.players[s],t.app.wallet.returnPublicKey()].sort(),i=t.app.crypto.hash(e.join("_")),o="Player "+(s+1),c=t.app.modules.mods[n];t.menu.addSubMenuOption("game-chat",{text:o,id:"game-chat-"+(s+1),class:"game-chat-"+(s+1),callback:function(t,a){a.menu.hideSubMenus(),c.createChatGroup(e,o),c.openChatBox(i),c.sendEvent("chat-render-request",{}),c.saveChat()}})}();this.menu.render(e,this),this.menu.attachEvents(e,this),this.log.render(e,this),this.log.attachEvents(e,this)}},{key:"initializeGame",value:function(e){""!=this.game.status&&this.updateStatus(this.game.status),""==this.game.dice&&this.initializeDice(),0==this.game.deck.length&&(this.game.state=this.returnState(this.game.players.length),this.updateStatus("Generating the Game"),this.game.state.required_pot=this.game.state.big_blind,this.game.queue=[],this.game.queue.push("start"),this.game.queue.push("READY")),this.browser_active&&this.displayBoard()}},{key:"newRound",value:function(){this.game.state.turn=0,this.game.state.round++,this.game.state.dealer++,this.game.state.dealer>this.game.players.length&&(this.game.state.dealer=1);for(var e=0;e<this.game.players.length;e++)this.game.state.player_wager[e]=0,this.game.state.player_payout[e]=1;console.log("Round: "+this.game.state.round),this.updateLog("New Round..."),this.updateLog("Round: "+this.game.state.round),document.querySelectorAll(".plog").forEach((function(e){e.innerHTML=""})),this.startRound(),this.displayPlayers()}},{key:"handleGameLoop",value:function(){if(this.game.queue.length>0){var e=this.game.queue.length-1,t=this.game.queue[e].split("\t");if(console.log("processing: "+t[0]),"start"===t[0])return this.newRound(),1;if("newround"===t[0])return this.game.queue.splice(e,1),this.newRound(),1;if("startround"===t[0])return this.game.queue.splice(e,1),this.startRound(),1;if("play"===t[0])return parseInt(t[1]),this.displayBoard(),parseInt(t[1])==this.game.player?(this.playerTurn(),0):(this.updateStatus("Waiting for "+this.game.state.player_names[t[1]-1],1),0);if("hit"===t[0]){var a=parseInt(t[1]);return this.game.queue.splice(e,1),a==this.game.state.dealer?this.game.queue.push("revealhand\t"+a+"\t1"):this.game.queue.push("revealhand\t"+a),this.game.queue.push("DEAL\t1\t"+a+"\t1"),1}if("selectwager"===t[0]){var r=this,n=parseInt(t[1]);if(this.game.queue.splice(e,1),this.displayPlayers(),this.game.player!=n)return this.game.player==this.game.state.dealer?(this.updateStatus('<div class="">You are the dealer. Waiting for players to set their wager</div>'),0):(this.updateStatus('<div class="">Player '+n+" is picking wager</div>"),0);var i='<div class="">How much would you like to wager? ('.concat(this.game.state.player_credit[this.game.player-1],")");i+="</div>",i+="<ul>",i+='<li class="menu_option" id="25">25</li>',i+='<li class="menu_option" id="50">50</li>',i+='<li class="menu_option" id="75">75</li>',i+='<li class="menu_option" id="100">100</li>',i+="</ul>",this.updateStatus(i,1),this.lockInterface();try{$(".menu_option").off(),$(".menu_option").on("click",(function(){$(".menu_option").off(),r.unlockInterface(),r.updateStatus("dealing cards");var e=$(this).attr("id");return r.addMove("setwager\t"+r.game.player+"\t"+e),r.endTurn(),0}))}catch(e){}return 0}if("setwager"===t[0]){this.game.queue.splice(e,1);var s=parseInt(t[1]),o=parseInt(t[2]);return this.game.state.player_wager[s-1]=o,1}if("stand"===t[0])return this.game.queue.splice(e,1),1;if("bust"===t[0])return this.game.queue.splice(e,1),1;if("startplay"===t[0]){this.game.queue.splice(e,1),this.displayBoard(),this.game.queue.push("pickwinner");for(var c=0;c<this.game.players.length;c++)c+1==this.game.state.dealer&&(this.game.queue.push("PLAY\t"+(c+1)),this.game.queue.push("STATUS\tThe dealer is taking his turn"));for(var l=[],u=[],d=0;d<this.game.players.length;d++)d+1!=this.game.state.dealer&&(l.push(d+1),u.push(d+1));this.game.queue.push("PLAY\t"+JSON.stringify(l));for(var p=0;p<u.length;p++)this.game.queue.push("revealhand\t"+u[p]);return this.game.player==this.game.state.dealer&&this.updateStatus("You are the dealer this round"),1}if("revealhand"===t[0]){this.game.queue.splice(e,1),parseInt(t[1]);var h=0;if(1==t[2]&&(h=1),this.game.player==parseInt(t[1]))if(this.game.state.dealer==this.game.player&&0==h){if(this.game.deck[0].hand.length>0){var f=[this.game.deck[0].hand[0]];this.addMove("hand\t"+this.game.player+"\t"+JSON.stringify(f))}this.endTurn()}else this.game.deck[0].hand.length>0&&this.addMove("hand\t"+this.game.player+"\t"+JSON.stringify(this.game.deck[0].hand)),this.endTurn();return 0}if("hand"===t[0]){var m=parseInt(t[1]),g=JSON.parse(t[2]);return this.game.state.player_hands[m-1]=g,this.game.queue.splice(e,1),1}if("pickwinner"===t[0]){this.game.queue.splice(e,1),this.pickWinner(),this.game.queue.push("newround");for(var b=0,y=0;y<this.game.state.player_winner.length;y++)1==this.game.state.player_winner[y]&&(b++,this.game.state.dealer);for(var v=0;v<this.game.state.player_winner.length;v++)if(0==this.game.state.player_winner[v]){var _=this.game.state.player_wager[v]*this.game.state.player_payout[v];this.game.state.player_credit[v]-=Math.floor(_)}else{var w=this.game.state.player_wager[v]*this.game.state.player_payout[v];this.game.state.player_credit[v]+=Math.floor(w)}return 0==b?this.game.queue.push("ACKNOWLEDGE\teveryone loses"):1==this.game.state.player_winner[this.game.player-1]?this.game.player==this.game.state.dealer?1==this.game.state.player_winner[this.game.player-1]?b>1?this.game.queue.push("ACKNOWLEDGE\tyou tie"):this.game.queue.push("ACKNOWLEDGE\tyou win"):b>1?this.game.queue.push("ACKNOWLEDGE\tyou lose, badly"):this.game.queue.push("ACKNOWLEDGE\tyou lose"):1==this.game.state.player_winner[this.game.player-1]&&1==this.game.state.player_winner[this.game.state.dealer-1]?this.game.queue.push("ACKNOWLEDGE\tyou tie"):this.game.queue.push("ACKNOWLEDGE\tyou win"):this.game.queue.push("ACKNOWLEDGE\tyou lose"),1}}return 1}},{key:"playerTurn",value:function(){var e=this;this.displayBoard(),this.pickWinner();for(var t=[],a=0;a<this.game.deck[0].hand.length;a++){var r=this.game.deck[0].cards[this.game.deck[0].hand[a]].name.split(".");t.push(r[0])}if(my_total=this.scoreArrayOfCards(t),my_total>21)this.updateStatus('<div class="menu-player">You have gone bust</div><ul><li class="menu_option" id="bust">confirm</li></ul>',1);else{var n="";e.game.player==e.game.state.dealer?n+='<div class="menu-player">You are the dealer. Casino rules suggest hitting until 17:':n+='<div class="menu-player">Your move ',n+="</div>",n+="<ul>",n+='<li class="menu_option" id="hit">hit</li>',n+='<li class="menu_option" id="stand">stand</li>',n+="</ul>",this.updateStatus(n,1)}this.lockInterface(),$(".menu_option").off(),$(".menu_option").on("click",(function(){$(".menu_option").off(),e.unlockInterface();var t=$(this).attr("id");return"hit"===t?(e.addMove("hit\t"+e.game.player),e.game.player==e.game.state.dealer&&e.addMove("hand\t"+e.game.player+"\t"+JSON.stringify(e.game.deck[0].hand)),e.endTurn(),0):"bust"===t?(e.addMove("RESOLVE\t"+e.app.wallet.returnPublicKey()),e.addMove("bust\t"+e.game.player),e.game.player==e.game.state.dealer&&e.addMove("hand\t"+e.game.player+"\t"+JSON.stringify(e.game.deck[0].hand)),e.endTurn(),0):"stand"===t?(e.addMove("RESOLVE\t"+e.app.wallet.returnPublicKey()),e.addMove("stand\t"+e.game.player),e.game.player==e.game.state.dealer&&e.addMove("hand\t"+e.game.player+"\t"+JSON.stringify(e.game.deck[0].hand)),e.endTurn(),0):void 0}))}},{key:"displayBoard",value:function(){if(0!=this.browser_active)try{this.displayPlayers(),this.displayHand()}catch(e){console.log("err: "+e)}}},{key:"returnState",value:function(e){for(var t={round:0,turn:0,player_names:[],player_credit:[],player_wager:[],player_payout:[],player_hands:[],player_total:[],player_winner:[],dealer:1},a=0;a<e;a++)t.player_credit[a]=1e3,null!=this.game.options.stake&&(t.player_credit[a]=parseInt(this.game.options.stake)),t.player_names[a]=this.app.keys.returnIdentifierByPublicKey(this.game.players[a],1),t.player_names[a].indexOf("@")>0&&(t.player_names[a]=t.player_names[a].substring(0,t.player_names[a].indexOf("@"))),t.player_names[a]===this.game.players[a]&&(t.player_names[a]=this.game.players[a].substring(0,10)+"...");return t}},{key:"returnCardFromDeck",value:function(e){var t=this.returnDeck()[e];return t.name.substring(0,t.name.indexOf("."))}},{key:"returnDeck",value:function(){var e={1:{name:"S1.png"},2:{name:"S2.png"},3:{name:"S3.png"},4:{name:"S4.png"},5:{name:"S5.png"},6:{name:"S6.png"},7:{name:"S7.png"},8:{name:"S8.png"},9:{name:"S9.png"},10:{name:"S10.png"},11:{name:"S11.png"},12:{name:"S12.png"},13:{name:"S13.png"},14:{name:"C1.png"},15:{name:"C2.png"},16:{name:"C3.png"},17:{name:"C4.png"},18:{name:"C5.png"},19:{name:"C6.png"},20:{name:"C7.png"},21:{name:"C8.png"},22:{name:"C9.png"},23:{name:"C10.png"},24:{name:"C11.png"},25:{name:"C12.png"},26:{name:"C13.png"},27:{name:"H1.png"},28:{name:"H2.png"},29:{name:"H3.png"},30:{name:"H4.png"},31:{name:"H5.png"},32:{name:"H6.png"},33:{name:"H7.png"},34:{name:"H8.png"},35:{name:"H9.png"},36:{name:"H10.png"},37:{name:"H11.png"},38:{name:"H12.png"},39:{name:"H13.png"},40:{name:"D1.png"},41:{name:"D2.png"},42:{name:"D3.png"},43:{name:"D4.png"},44:{name:"D5.png"},45:{name:"D6.png"},46:{name:"D7.png"},47:{name:"D8.png"},48:{name:"D9.png"},49:{name:"D10.png"},50:{name:"D11.png"},51:{name:"D12.png"},52:{name:"D13.png"}};return e}},{key:"updatePlayerLog",value:function(e,t){var a="#player-info-log-"+e,r=document.querySelector(a);r&&(r.innerHTML=t)}},{key:"returnPlayersBoxArray",value:function(){var e=[];return 2==this.game.players.length&&(e=[1,4]),3==this.game.players.length&&(e=[1,3,5]),4==this.game.players.length&&(e=[1,3,4,5]),5==this.game.players.length&&(e=[1,2,3,5,6]),6==this.game.players.length&&(e=[1,2,3,4,5,6]),e}},{key:"returnViewBoxArray",value:function(){var e=[];return 2==this.game.players.length&&(e=[3,5]),3==this.game.players.length&&(e=[3,4,5]),4==this.game.players.length&&(e=[2,3,5,6]),5==this.game.players.length&&(e=[2,3,4,5,6]),e}},{key:"displayPlayers",value:function(){if(0!=this.browser_active){var e="",t="";this.game.players.includes(this.app.wallet.returnPublicKey())?(e=this.returnPlayersBoxArray(),t=this.game.players.indexOf(this.app.wallet.returnPublicKey())):(document.querySelector(".status").innerHTML="You are out of the game.<br />Feel free to hang out and chat.",document.querySelector(".cardfan").classList.add("hidden"),e=this.returnViewBoxArray());for(var a=2;a<7;a++){var r=document.querySelector("#player-info-"+a);e.includes(a)?r.style.display="block":r.style.display="none"}console.log("YES");for(var n=0;n<this.game.players.length;n++){console.log(n);var i=n-t;i<0&&(i+=this.game.players.length);var s="#player-info-"+e[i],o=document.querySelector(s),c="",l=0;if(this.game.state.player_hands.length>0&&null!=this.game.state.player_hands[n]&&this.game.state.player_hands[n].length>0){if(l=1,c='<div class="player-info-hand hand tinyhand" id="player-info-hand-'.concat(n+1,'">'),null!=this.game.state.player_hands[n]){for(var u=0;u<this.game.state.player_hands[n].length;u++){var d=this.game.deck[0].cards[this.game.state.player_hands[n][u]];c+='<img class="card" src="'.concat(this.card_img_dir,"/").concat(d.name,'">')}1==this.game.state.player_hands[n].length&&this.game.state.dealer==[n+1]&&(c+='<img class="card" src="'.concat(this.card_img_dir,'/red_back.png">'))}c+='\n              </div>\n              <div class="player-info-name" id="player-info-name-'.concat(n+1,'">').concat(this.game.state.player_names[n],'</div>\n              <div class="player-info-chips" id="player-info-chips-').concat(n+1,'">').concat(this.game.state.player_credit[n]," SAITO</div> \n           ")}if(0==l){console.log("is the player hand shown?"),c='\n          <div class="player-info-hand hand tinyhand" id="player-info-hand-'.concat(n+1,'">\n            <img class="card" src="').concat(this.card_img_dir,'/red_back.png">\n            <img class="card" src="').concat(this.card_img_dir,'/red_back.png">\n          </div>\n          <div class="player-info-name" id="player-info-name-').concat(n+1,'">').concat(this.game.state.player_names[n],'</div>\n          <div class="player-info-chips" id="player-info-chips-').concat(n+1,'">').concat(this.game.state.player_credit[n]," SAITO</div> \n        "),console.log("this is my hand");var p='\n              <img class="card" src="'.concat(this.card_img_dir,'/red_back.png">\n              <img class="card" src="').concat(this.card_img_dir,'/red_back.png">\n          ');this.cardfan.render(this.app,this,p),this.cardfan.attachEvents(this.app,this)}o.querySelector(".info").innerHTML=c,this.game.state.dealer==n+1&&(o.querySelector(".plog").innerHTML='<div class="dealer-notice">DEALER</div>')}}}},{key:"displayHand",value:function(){this.cardfan.render(this.app,this),this.cardfan.attachEvents(this.app,this)}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"endTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;$(".menu_option").off();var t={};t.target=this.returnNextPlayer(this.game.player),0!=e&&(t.target=e),this.game.turn=this.moves,this.moves=[],this.sendMessage("game",t)}},{key:"scoreArrayOfCards",value:function(e){for(var t=0,a=0,r=0;r<e.length;r++){var n=e[r];if("1"===n[1]&&2==n.length)t+=parseInt(1),a++;else{var i=parseInt(n.substring(1));if(i+t==11&&1==a)return 21;i>10&&(i=10),t+=parseInt(i)}}for(var s=0;s<a;s++)t+10<=21&&(t+=10);return t}},{key:"pickWinner",value:function(){this.game.state.player_total=[];for(var e=0;e<this.game.state.player_hands.length;e++){var t=[];if(null!=this.game.state.player_hands[e])for(var a=0;a<this.game.state.player_hands[e].length;a++){var r=this.game.deck[0].cards[this.game.state.player_hands[e][a]].name.split(".");t.push(r[0])}var n=this.scoreArrayOfCards(t);this.game.state.player_total.push(n),21==this.game.state.player_total[e]&&2==this.game.state.player_total.length&&(this.game.state.player_payout[e]=1.5)}for(var i=0,s=0;s<this.game.state.player_total.length;s++)this.game.state.player_total[s]>i&&this.game.state.player_total[s]<=21&&(i=this.game.state.player_total[s]);for(var o=0;o<this.game.state.player_total.length;o++)this.game.state.player_total[o]==i?this.game.state.player_winner[o]=1:this.game.state.player_winner[o]=0;return 1}},{key:"returnGameOptionsHTML",value:function(){for(var e='\n      <label for="stake">Initial Stake:</label>\n      <select name="stake">\n              <option value="1000" selected="selected">1000</option>\n              <option value="5000" >5000</option>\n              <option value="10000">10000</option>\n      </select>\n\n\n            <select name="crypto">\n              <option value="" selected>none</option>\n              <option value="SAITO">SAITO</option>\n    ',t=0;t<this.app.modules.mods.length;t++)""!=this.app.modules.mods[t].ticker&&null!=this.app.modules.mods[t].ticker&&(e+='<option value="'.concat(this.app.modules.mods[t].ticker,'">').concat(this.app.modules.mods[t].ticker,"</option>"));return e+='\n            </select>\n\n\n      <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button" style="margin-top:20px;padding:30px;text-align:center">accept</div>\n\n\n    '}},{key:"returnFormattedGameOptions",value:function(e){var t={};for(var a in e)"stake"==a&&(t[a]=e[a]),"crypto"==a&&(t[a]=e[a]);return t}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{if(document.querySelector(".p1 > .info").style.display=0==t?"block":"none",1==this.lock_interface)return;if(this.game.status=e,1==this.browser_active){var a=document.querySelector(".status");this.game.players.includes(this.app.wallet.returnPublicKey())&&(a.innerHTML=e)}}catch(e){console.log("ERR: "+e)}}}])&&n(t.prototype,a),r&&n(t,r),p}(d));e.exports=p},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(1155),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}var t,a,i;return t=e,(a=[{key:"render",value:function(e,t){document.querySelector(".game-overlay-backdrop")||e.browser.addElementToDom(n())}},{key:"attachEvents",value:function(e,t){}},{key:"showOverlay",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.render(e,t);var n=this,i=document.querySelector(".game-overlay"),s=document.querySelector(".game-overlay-backdrop");i.innerHTML=a,i.style.display="block",s.style.display="block",s.onclick=function(e){n.hideOverlay(r)}}},{key:"hideOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.querySelector(".game-overlay"),a=document.querySelector(".game-overlay-backdrop");t.style.display="none",a.style.display="none",null!=e&&e()}}])&&r(t.prototype,a),i&&r(t,i),e}();e.exports=i},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,a){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d(e);if(t){var n=d(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=a(5),h=a(15),f=a(229),m=a(240),g=a(98),b=a(68),y=a(236),v=a(238),_=a(239),w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(x,e);var t,a,r,n,u,h,w=l(x);function x(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,x),(t=w.call(this,e)).name="Chat",t.description="Saito instant-messaging client and application platform",t.events=["encrypt-key-exchange-confirm"],t.groups=[],t.timeerror_tolerance=18e5,t.header=null,t.renderMode="none",t.relay_moves_onchain_if_possible=1,t.mute_community_chat=0,t.max_msg_size=307200,t.icon_fa="far fa-comments",t.inTransitImageMsgSig=null,t}return t=x,(a=[{key:"receiveEvent",value:function(e,t){if("encrypt-key-exchange-confirm"===e){if(void 0===t.members)return;this.createChatGroup(t.members),this.sendEvent("chat-render-request",{}),this.saveChat(),this.render(this.app)}}},{key:"respondTo",value:function(e){switch(e){case"email-chat":return{render:this.renderEmailChat,attachEvents:this.attachEventsEmailChat};case"header-dropdown":return{name:this.appname?this.appname:this.name,icon_fa:this.icon_fa,browser_active:this.browser_active,slug:this.returnSlug()};default:return null}}},{key:"renderEmailChat",value:function(e,t){var a=e.modules.returnModule("Chat");f.render(e,a),f.attachEvents(e,a)}},{key:"attachEventsEmailChat",value:function(e,t){e.modules.returnModule("Chat")}},{key:"render",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(""!=t&&(this.renderMode=t),"chatroom"==this.renderMode)return g.render(e,this),void g.attachEvents(e,this);"main"==this.renderMode&&(m.render(e,this),m.attachEvents(e,this)),"email"==this.renderMode&&(f.render(e,this),f.attachEvents(e,this))}},{key:"initializeHTML",value:function(e){1==this.browser_active&&"other"!=this.renderMode&&(this.renderMode="main"),"main"==this.renderMode&&(null==this.header&&(this.header=new b(e,this)),this.header.render(e,this),this.header.attachEvents(e,this),m.render(e,this),m.attachEvents(e,this))}},{key:"initialize",value:function(e){o(d(x.prototype),"initialize",this).call(this,e);for(var t=this.app.keys.returnKeys(),a=0;a<t.length;a++){if(""==t[a].aes_publickey)return;this.createChatGroup([t[a].publickey,this.app.wallet.returnPublicKey()],t[a].name)}for(var r=this.app.keys.returnGroups(),n=0;n<r.length;n++)this.createChatGroup(r[n].members,r[n].name);this.sendEvent("chat-render-request",{})}},{key:"onPeerHandshakeComplete",value:(h=i(regeneratorRuntime.mark((function e(t,a){var r,n,i,s,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0,!a.isMainPeer()){e.next=5;break}this.createChatGroup([a.peer.publickey],"Saito Community Chat"),e.next=7;break;case 5:if(1!=r){e.next=7;break}return e.abrupt("return");case 7:return n=this.groups.map((function(e){return e.id})),i=new Promise((function(e,a){t.storage.loadTransactionsByKeys(n,"Chat",25,(function(t){e(t)}))})),e.next=11,i;case 11:for(i=e.sent,s=0;s<i.length;s++)for(r=1,i[s].decryptMessage(t),o=i[s].returnMessage(),c=0;c<this.groups.length;c++)this.groups[c].id===o.group_id&&t.blockchain.binaryInsert(this.groups[c].txs,i[s],(function(e,t){return e.transaction.ts-t.transaction.ts}));for(l=0;l<this.groups.length;l++)"email"==this.renderMode&&(this.groups[l].txs.length>0?this.updateLastMessage(this.groups[l].id,this.groups[l].txs[this.groups[l].txs.length-1].returnMessage().message,this.groups[l].txs[this.groups[l].txs.length-1].transaction.ts):this.updateLastMessage(this.groups[l].id,"new chat")),"main"==this.renderMode&&this.groups[l].txs.length>0&&this.updateLastMessage(this.groups[l].id,this.groups[l].txs[this.groups[l].txs.length-1].returnMessage().message,this.groups[l].txs[this.groups[l].txs.length-1].transaction.ts);this.sendEvent("chat-render-request",{}),this.sendEvent("chat-render-box-request",{}),this.render(this.app);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"updateLastMessage",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=(new Date).getTime();null!=a&&(r=a);for(var n=this.app.browser.formatDate(r),i=0;i<this.groups.length;i++)if(this.groups[i].id===e){var s="chat-last-message-"+e;try{document.getElementById(s).innerHTML=t}catch(e){}s="chat-last-message-timestamp-"+e;try{document.getElementById(s).innerHTML="".concat(n.hours,"-").concat(n.minutes)}catch(e){}}}},{key:"onConfirmation",value:function(e,t,a,r){t.decryptMessage(r);var n=t.returnMessage();if(0==a&&"chat message"==n.request){var i=JSON.parse(JSON.stringify(t.transaction)),s=new p.transaction(i);if(s.transaction.ts=(new Date).getTime(),r.storage.saveTransactionByKey(n.group_id,s),t.transaction.from[0].add==r.wallet.returnPublicKey())return;this.receiveMessage(r,t)}}},{key:"handlePeerRequest",value:(u=i(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o,c,l,u,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a.request){e.next=2;break}return e.abrupt("return");case 2:if(null!=a.data){e.next=4;break}return e.abrupt("return");case 4:i=a.data,e.prev=5,e.t0=a.request,e.next="chat message"===e.t0?9:"chat broadcast message"===e.t0?17:28;break;case 9:return s=JSON.parse(JSON.stringify(i.transaction)),(o=new p.transaction(s)).transaction.ts=(new Date).getTime(),this.receiveMessage(t,new p.transaction(i.transaction)),this.app.storage.saveTransaction(o),n&&n({payload:"success",error:{}}),e.abrupt("break",28);case 17:return(c=new p.transaction(i.transaction)).decryptMessage(this.app),l=c.returnMessage(),u=JSON.parse(JSON.stringify(c.transaction)),(d=new p.transaction(u)).transaction.ts=(new Date).getTime(),(h=this.app.modules.returnModule("Archive"))&&h.saveTransactionByKey(l.group_id,d),this.app.network.peers.forEach((function(e){e.peer.publickey!==r.peer.publickey&&e.sendRequest("chat message",i)})),n&&n({payload:"success",error:{}}),e.abrupt("break",28);case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(5),console.log(e.t1);case 33:case"end":return e.stop()}}),e,this,[[5,30]])}))),function(e,t,a,r){return u.apply(this,arguments)})},{key:"sendMessage",value:function(e,t){if("<img"==t.msg.message.substring(0,4)){if(null!=this.inTransitImageMsgSig)return console.log("Image already being sent"),void salert("Image already being sent");this.inTransitImageMsgSig=t.transaction.sig}if(e.network.peers.length>0){var a=e.network.peers[0].peer.publickey,r=e.modules.returnModule("Relay");t=this.app.wallet.signAndEncryptTransaction(t),1==this.relay_moves_onchain_if_possible&&this.app.network.propagateTransaction(t),r.sendRelayMessage(a,"chat broadcast message",t)}else console.log("Connection to chat server lost"),salert("Connection to chat server lost")}},{key:"createMessage",value:function(e,t){for(var a=[],r=0;r<this.groups.length;r++)if(e===this.groups[r].id)for(var n=0;n<this.groups[r].members.length;n++)a.includes(this.groups[r].members[n])||a.push(this.groups[r].members[n]);a[0]===this.app.wallet.returnPublicKey()&&(a.splice(0,1),a.push(this.app.wallet.returnPublicKey()));var i=this.app.wallet.createUnsignedTransaction(a[0],0,0);if(null!=i){for(var s=1;s<a.length;s++)i.transaction.to.push(this.app.wallet.createSlip(a[s]));return i.msg={module:"Chat",request:"chat message",group_id:e,message:t,type:"myself",timestamp:(new Date).getTime()},i.msg.sig=this.app.wallet.signMessage(JSON.stringify(i.msg)),i=this.app.wallet.signTransaction(i)}}},{key:"createMessageBlocks",value:function(e){for(var t=0,a=[],r=[],n=e.txs,i="";t<n.length;)0==a.length?(""==i||n[t].isFrom(i)?r.push(n[t]):(a.push(r),(r=[]).push(n[t])),i=n[t].transaction.from[0].add):n[t].isFrom(i)?r.push(n[t]):(a.push(r),(r=[]).push(n[t]),i=n[t].transaction.from[0].add),t++;return a.push(r),a}},{key:"formatMessage",value:function(e){return e=_(e,{target:{url:"_self"}}),e=y(e),e=v(e,{allowedTags:["h1","h2","h3","h4","h5","h6","blockquote","p","a","ul","ol","nl","li","b","i","strong","em","strike","code","hr","br","div","table","thead","caption","tbody","tr","th","td","pre","img","marquee","pre"],allowedAttributes:{div:["class","id"],a:["href","name","target","class","id"],img:["src","class"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","cite"],allowProtocolRelative:!0,transformTags:{a:v.simpleTransform("a",{target:"_blank"})}})}},{key:"receiveMessage",value:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.inTransitImageMsgSig==t.transaction.sig&&(this.inTransitImageMsgSig=null);var n=t.returnMessage();if(t.transaction.from[0].add==e.wallet.returnPublicKey()&&e.keys.hasSharedSecret(t.transaction.to[0].add)&&(t.decryptMessage(e),n=t.returnMessage()),1==e.BROWSER){var i=e.modules.returnActiveModule();i.events.includes("chat-render-request")||this.showAlert()}if(t.isTo(e.wallet.returnPublicKey())){for(var s=1,o=[],c=0;c<t.transaction.to.length;c++)o.includes(t.transaction.to[c].add)||o.push(t.transaction.to[c].add);o.sort();for(var l=this.app.crypto.hash(o.join("_")),u=0;u<this.groups.length;u++)this.groups[u].id==l&&(s=0);1==s?(this.createChatGroup(o),n.group_id=l):l&&(n.group_id=l)}var d=1;try{var p="#chat-box-"+n.group_id;document.querySelector(p)||(d=0)}catch(e){}var h=n.message;if(this.groups.forEach((function(r){try{if(r.id==n.group_id)if(t.isFrom(a.app.wallet.returnPublicKey())){var i=e.keys.returnIdentifierByPublicKey(a.app.wallet.returnPublicKey()),s=i||a.app.wallet.returnPublicKey();r.txs.push(t),e.browser.sendNotification(s,h,"chat-message-notification")}else{var o=e.keys.returnIdentifierByPublicKey(t.transaction.from[0].add),c=o||t.transaction.from[0].add;r.txs.push(t),e.browser.sendNotification(c,h,"chat-message-notification")}}catch(e){console.log("ERROR 113234: chat error receiving message: "+e)}})),0==d){if(!t.isFrom(this.app.wallet.returnPublicKey())){this.openChatBox(n.group_id);try{0==this.isOtherInputActive()&&(document.getElementById("chat-box-new-message-input-".concat(n.group_id)).focus(),""===document.getElementById("chat-box-new-message-input-".concat(n.group_id)).val&&document.getElementById("chat-box-new-message-input-".concat(n.group_id)).select())}catch(e){}}}else try{0==this.isOtherInputActive()&&(document.getElementById("chat-box-new-message-input-".concat(n.group_id)).focus(),""===document.getElementById("chat-box-new-message-input-".concat(n.group_id)).val&&document.getElementById("chat-box-new-message-input-".concat(n.group_id)).select())}catch(e){}this.updateLastMessage(n.group_id,h),this.sendEvent("chat_receive_message",h),this.render(this.app,r);var f=e.keys.returnIdentifierByPublicKey(t.transaction.from[0].add);f!==t.transaction.from[0].add&&""!=f||e.browser.addIdentifiersToDom([t.transaction.from[0].add])}},{key:"saveChat",value:function(){this.app.options.chat=Object.assign({},this.app.options.chat),this.app.options.chat.groups=this.groups.map((function(e){return{id:e.id,name:e.name,members:e.members,is_encrypted:e.is_encrypted}})),this.app.storage.saveOptions()}},{key:"openChatBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if("email"==this.renderMode||"none"==this.renderMode)if(null!=e){var t=this.returnCommunityChat();if(t.id!=e||1!=this.mute_community_chat)if(document.getElementById("chat-box-".concat(e))){var a=document.getElementById("chat-box-new-message-input-".concat(e));0==this.isOtherInputActive()&&a.focus();var r=document.getElementById("chat-box-".concat(e));r.classList.remove("chat-box-hide")}else{for(var n=0;n<this.groups.length;n++)this.groups[n].id==e&&f.showChatBox(this.app,this,this.groups[n]);this.render(this.app);try{0==this.isOtherInputActive()&&(document.getElementById("chat-box-new-message-input-".concat(e)).focus(),""===document.getElementById("chat-box-new-message-input-".concat(e)).val&&document.getElementById("chat-box-new-message-input-".concat(e)).select())}catch(e){}}}else{var i=this.returnCommunityChat();if(null==i||null==i)return;if(null==i.id||null==i.id)return;this.openChatBox(i.id)}}},{key:"createChatGroup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=e){if(e.sort(),null==t||""==t||null==t){for(var a=0;a<e.length;a++)e[a]!=this.app.wallet.returnPublicKey()&&(t=e[a]);null==t&&(t="me")}for(var r=this.app.crypto.hash("".concat(e.join("_"))),n=0;n<this.groups.length;n++)if(this.groups[n].id==r)return null;this.groups.push({id:r,members:e,name:t,txs:[]})}}},{key:"returnCommunityChat",value:function(){for(var e=0;e<this.groups.length;e++)if(this.app.options.peers.length>0&&"Community Chat"===this.groups[e].name)return this.groups[e];return this.groups[0]}},{key:"returnDefaultChat",value:function(){for(var e=0;e<this.groups.length;e++){if(this.app.options.peers.length>0&&this.groups[e].members[0]===this.app.options.peers[0].publickey)return this.groups[e];if(this.app.network.peers.length>0&&this.groups[e].members[0]===this.app.network.peers[0].peer.publickey)return this.groups[e]}return this.groups[0]}},{key:"isOtherInputActive",value:function(){try{var e=document.activeElement;if(document.getElementById("saito-overlay-backdrop")&&"block"==document.getElementById("saito-overlay-backdrop").style.display)return 1;if(document.getElementById("game-overlay-backdrop")&&"block"==document.getElementById("game-overlay-backdrop").style.display)return 1;if(!e)return 0;if("INPUT"==e.tagName)return 1;if("TEXTAREA"==e.tagName)return 1;if("input"==e.tagName)return 1;if("textarea"==e.tagName)return 1}catch(e){}return 0}},{key:"chatLoadMessages",value:function(e,t){}},{key:"chatRequestMessages",value:(n=i(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})}])&&s(t.prototype,a),r&&s(t,r),x}(h);e.exports=w},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(1174),s=a(1175),o=a(42),c=(a(1176),a(1178),a(1179)),l=a(1180);var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}var t,a,u;return t=e,(a=[{key:"render",value:function(e,t){t.modal_overlay=new o(e),t.modal_overlay.render(e,t),t.modal_overlay.attachEvents(e,t),document.querySelector(".add-user")||t.modal_overlay.showOverlay(e,t,i())}},{key:"attachEvents",value:function(e,t){var a=function(){var a,n=(a=regeneratorRuntime.mark((function a(r){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=function(a){try{e.modules.returnModule("Encrypt").initiate_key_exchange(a),t.modal_overlay.showOverlay(e,t,s()),document.querySelector("#confirm-box").onclick=function(){t.modal_overlay.hideOverlay()}}catch(e){e.startsWith("Invalid address ")?salert("Address is not a valid Saito Address"):salert("Unknown Error:\n"+e)}},e.crypto.isPublicKey(r)){a.next=7;break}return a.next=4,e.keys.fetchPublicKey(r,n);case 4:r=a.sent,a.next=8;break;case 7:n(r);case 8:case"end":return a.stop()}}),a)})),function(){var e=this,t=arguments;return new Promise((function(n,i){var s=a.apply(e,t);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))});return function(e){return n.apply(this,arguments)}}();document.querySelector(".tutorial-skip").onclick=function(){var e;(e=document.querySelector("video"))&&e.srcObject.getTracks().forEach((function(e){return e.stop()})),t.modal_overlay.hideOverlay()},document.querySelector(".generate-link-box").onclick=function(){document.querySelector(".welcome-modal-left").innerHTML=c(e),document.querySelector(".link-space").addEventListener("click",(function(e){document.querySelector(".share-link").select(),document.execCommand("copy")}))},document.querySelector(".scanqr-link-box").onclick=function(){var t=e.modules.returnModule("QRScanner");t&&t.startScanner()},document.querySelector(".address-link-box").onclick=function(){document.querySelector(".welcome-modal-left").innerHTML=l(e),document.getElementById("add-contact-btn").onclick=function(){var e=document.getElementById("add-contact-input").value;console.log("VALUE: "+e),a(e)}}}}])&&n(t.prototype,a),u&&n(t,u),e}();e.exports=u},function(e,t,a){const{noopTest:r,edit:n,merge:i}=a(81),s={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:r,table:r,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};s.def=n(s.def).replace("label",s._label).replace("title",s._title).getRegex(),s.bullet=/(?:[*+-]|\d{1,9}\.)/,s.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,s.item=n(s.item,"gm").replace(/bull/g,s.bullet).getRegex(),s.list=n(s.list).replace(/bull/g,s.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+s.def.source+")").getRegex(),s._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",s._comment=/<!--(?!-?>)[\s\S]*?-->/,s.html=n(s.html,"i").replace("comment",s._comment).replace("tag",s._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),s.paragraph=n(s._paragraph).replace("hr",s.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",s._tag).getRegex(),s.blockquote=n(s.blockquote).replace("paragraph",s.paragraph).getRegex(),s.normal=i({},s),s.gfm=i({},s.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),s.gfm.nptable=n(s.gfm.nptable).replace("hr",s.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",s._tag).getRegex(),s.gfm.table=n(s.gfm.table).replace("hr",s.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",s._tag).getRegex(),s.pedantic=i({},s.normal,{html:n("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",s._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:r,paragraph:n(s.normal._paragraph).replace("hr",s.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",s.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const o={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:r,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:r,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~"};o.em=n(o.em).replace(/punctuation/g,o._punctuation).getRegex(),o._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,o._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,o._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,o.autolink=n(o.autolink).replace("scheme",o._scheme).replace("email",o._email).getRegex(),o._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,o.tag=n(o.tag).replace("comment",s._comment).replace("attribute",o._attribute).getRegex(),o._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,o._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,o._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,o.link=n(o.link).replace("label",o._label).replace("href",o._href).replace("title",o._title).getRegex(),o.reflink=n(o.reflink).replace("label",o._label).getRegex(),o.normal=i({},o),o.pedantic=i({},o.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:n(/^!?\[(label)\]\((.*?)\)/).replace("label",o._label).getRegex(),reflink:n(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",o._label).getRegex()}),o.gfm=i({},o.normal,{escape:n(o.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),o.gfm.url=n(o.gfm.url,"i").replace("email",o.gfm._extended_email).getRegex(),o.breaks=i({},o.gfm,{br:n(o.br).replace("{2,}","*").getRegex(),text:n(o.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),e.exports={block:s,inline:o}},function(e,t){e.exports=class{constructor(){this.seen={}}slug(e){let t=e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t)){const e=t;do{this.seen[e]++,t=e+"-"+this.seen[e]}while(this.seen.hasOwnProperty(t))}return this.seen[t]=0,t}}},function(e,t,a){const r=a(237),{defaults:n}=a(97),{inline:i}=a(436),{findClosingBracket:s,escape:o}=a(81);e.exports=class e{constructor(e,t){if(this.options=t||n,this.links=e,this.rules=i.normal,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=i.pedantic:this.options.gfm&&(this.options.breaks?this.rules=i.breaks:this.rules=i.gfm)}static get rules(){return i}static output(t,a,r){return new e(a,r).output(t)}output(t){let a,r,n,i,c,l,u="";for(;t;)if(c=this.rules.escape.exec(t))t=t.substring(c[0].length),u+=o(c[1]);else if(c=this.rules.tag.exec(t))!this.inLink&&/^<a /i.test(c[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(c[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(c[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(c[0])&&(this.inRawBlock=!1),t=t.substring(c[0].length),u+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(c[0]):o(c[0]):c[0]);else if(c=this.rules.link.exec(t)){const r=s(c[2],"()");if(r>-1){const e=(0===c[0].indexOf("!")?5:4)+c[1].length+r;c[2]=c[2].substring(0,r),c[0]=c[0].substring(0,e).trim(),c[3]=""}t=t.substring(c[0].length),this.inLink=!0,n=c[2],this.options.pedantic?(a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n),a?(n=a[1],i=a[3]):i=""):i=c[3]?c[3].slice(1,-1):"",n=n.trim().replace(/^<([\s\S]*)>$/,"$1"),u+=this.outputLink(c,{href:e.escapes(n),title:e.escapes(i)}),this.inLink=!1}else if((c=this.rules.reflink.exec(t))||(c=this.rules.nolink.exec(t))){if(t=t.substring(c[0].length),a=(c[2]||c[1]).replace(/\s+/g," "),a=this.links[a.toLowerCase()],!a||!a.href){u+=c[0].charAt(0),t=c[0].substring(1)+t;continue}this.inLink=!0,u+=this.outputLink(c,a),this.inLink=!1}else if(c=this.rules.strong.exec(t))t=t.substring(c[0].length),u+=this.renderer.strong(this.output(c[4]||c[3]||c[2]||c[1]));else if(c=this.rules.em.exec(t))t=t.substring(c[0].length),u+=this.renderer.em(this.output(c[6]||c[5]||c[4]||c[3]||c[2]||c[1]));else if(c=this.rules.code.exec(t))t=t.substring(c[0].length),u+=this.renderer.codespan(o(c[2].trim(),!0));else if(c=this.rules.br.exec(t))t=t.substring(c[0].length),u+=this.renderer.br();else if(c=this.rules.del.exec(t))t=t.substring(c[0].length),u+=this.renderer.del(this.output(c[1]));else if(c=this.rules.autolink.exec(t))t=t.substring(c[0].length),"@"===c[2]?(r=o(this.mangle(c[1])),n="mailto:"+r):(r=o(c[1]),n=r),u+=this.renderer.link(n,null,r);else if(this.inLink||!(c=this.rules.url.exec(t))){if(c=this.rules.text.exec(t))t=t.substring(c[0].length),this.inRawBlock?u+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(c[0]):o(c[0]):c[0]):u+=this.renderer.text(o(this.smartypants(c[0])));else if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}else{if("@"===c[2])r=o(c[0]),n="mailto:"+r;else{do{l=c[0],c[0]=this.rules._backpedal.exec(c[0])[0]}while(l!==c[0]);r=o(c[0]),n="www."===c[1]?"http://"+r:r}t=t.substring(c[0].length),u+=this.renderer.link(n,null,r)}return u}static escapes(t){return t?t.replace(e.rules._escapes,"$1"):t}outputLink(e,t){const a=t.href,r=t.title?o(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(a,r,this.output(e[1])):this.renderer.image(a,r,o(e[1]))}smartypants(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e}mangle(e){if(!this.options.mangle)return e;const t=e.length;let a,r="",n=0;for(;n<t;n++)a=e.charCodeAt(n),Math.random()>.5&&(a="x"+a.toString(16)),r+="&#"+a+";";return r}}},function(e,t){e.exports=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,a){return""+a}image(e,t,a){return""+a}br(){return""}}},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,a){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d(e);if(t){var n=d(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return l(this,a)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=a(47),h=null,f=null,m=null,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(v,e);var t,r,p,g,b,y=c(v);function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=y.call(this,e)).name="Chess",t.description="Chess is a two-player strategy board game played on a checkered board with 64 squares arranged in an 8×8 grid.",t.board=null,t.engine=null,h=u(t),t.publickey=e.wallet.returnPublicKey(),t.useHUD=0,t.useClock=1,t.minPlayers=2,t.maxPlayers=2,t.type="Classic Boardgame",t.description="An implementation of Chess for the Saito Blockchain",t.categories="Boardgame Game",l(t,u(t))}return t=v,(r=[{key:"respondTo",value:function(e){if(null!=s(d(v.prototype),"respondTo",this).call(this,e))return s(d(v.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/chess/img/arcade/arcade-banner-background.png",title:"Chess"};return t}return null}},{key:"initializeHTML",value:function(e){s(d(v.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(e){e.respondTo("chat-manager").render(h.app,h)}))}},{key:"initializeGame",value:(g=regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("######################################################"),console.log("######################################################"),console.log("######################         #######################"),console.log("######################  CHESS  #######################"),console.log("######################         #######################"),console.log("######################################################"),console.log("######################################################"),1==this.browser_active&&(f=a(246),m=a(247),this.board=new m("board",{pieceTheme:"img/pieces/{piece}.png"}),this.engine=new f.Chess),this.loadGame(t),1==this.game.initializing&&this.game.queue.push("READY"),1==this.browser_active&&(null!=this.game.position?this.engine.load(this.game.position):this.game.position=this.engine.fen(),this.game.target==this.game.player?(this.setBoard(this.engine.fen()),this.useClock&&this.startClock()):this.lockBoard(this.engine.fen()),r=this.game.opponents[0],this.app.crypto.isPublicKey(r)&&this.app.keys.returnIdentifierByPublicKey(r).length>=6&&(r=this.app.keys.returnIdentifierByPublicKey(r)),(n=document.getElementById("opponent_id"))&&(n.innerHTML=r),this.updateStatusMessage(),this.attachEvents());case 11:case"end":return e.stop()}}),e,this)})),b=function(){var e=this,t=arguments;return new Promise((function(a,r){var i=g.apply(e,t);function s(e){n(i,a,r,s,o,"next",e)}function o(e){n(i,a,r,s,o,"throw",e)}s(void 0)}))},function(e){return b.apply(this,arguments)})},{key:"handleGameLoop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(console.log("QUEUE IN CHESS: "+JSON.stringify(this.game.queue)),console.log(JSON.stringify(e)),"OBSERVER_CHECKPOINT"!=this.game.queue[this.game.queue.length-1])if(e={},this.game.queue.length>0?e.extra=JSON.parse(this.app.crypto.base64ToString(this.game.queue[this.game.queue.length-1])):e.extra={},this.game.queue.splice(this.game.queue.length-1,1),null!=e.extra){if(null!=e.extra.data){var t=JSON.parse(e.extra.data);return this.game.position=t.position,this.game.target=e.extra.target,e.extra.target==this.game.player?1==this.browser_active&&(this.setBoard(this.game.position),this.useClock&&this.startClock(),this.updateLog(t.move,999),this.updateStatusMessage(),!0===this.engine.in_checkmate()&&this.resignGame()):1==this.browser_active&&this.lockBoard(this.game.position),0==this.game.player?(this.game.queue.push("OBSERVER_CHECKPOINT"),1):(this.saveGame(this.game.id),0)}console.log("NO MESSAGE RECEIVED!")}else console.log("NO MESSAGE DEFINED!")}},{key:"endTurn",value:function(e){var t={};t.target=this.returnNextPlayer(this.game.player),t.data=JSON.stringify(e);var a=this.app.crypto.stringToBase64(JSON.stringify(t));this.game.turn=[a],this.moves=[],this.sendMessage("game",t),this.updateLog(e.move,999),this.updateStatusMessage()}},{key:"attachEvents",value:function(){var e=this,t=document.getElementById("chat_icon"),a=document.getElementById("resign_icon"),r=document.getElementById("move_accept"),n=document.getElementById("move_reject");if(r){var i=this.app.modules.returnModule("Chat");i||(t.style.display="none"),a.onclick=function(){if(confirm("Do you really want to resign?"))return e.resignGame(e.game.id),alert("You have resigned the game..."),void(window.location.href="/arcade")},i&&(t.onclick=function(){i&&i.openChatBox()}),r.onclick=function(){console.log("send move transaction and wait for reply.");var t={};t.white=e.game.white,t.black=e.game.black,t.id=e.game.id,t.position=e.engine.fen(),t.move=e.game.move,e.endTurn(t),r.disabled=!0,r.classList.remove("green"),n.disabled=!0,n.classList.remove("red")},n.onclick=function(){e.setBoard(e.game.position),r.disabled=!0,r.classList.remove("green"),n.disabled=!0,n.classList.remove("red")},window.onresize=function(){return e.board.resize()},this.app.modules.respondTo("chat-manager").forEach((function(e){e.respondTo("chat-manager").attachEvents(h.app,h)}))}}},{key:"updateStatusMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(1==this.browser_active){var t=document.getElementById("status");if(""==e){var a="",r="White";"b"===this.engine.turn()&&(r="Black"),!0===this.engine.in_checkmate()?(a="Game over, "+r+" is in checkmate.",this.game.over=1,1==this.game.player&&"Black"===r&&(this.game.winner=1),2==this.game.player&&"White"===r&&(this.game.winner=1)):!0===this.engine.in_draw()?(a="Game over, drawn position",this.game.over=1):(a=r+" to move",!0===this.engine.in_check()&&(a+=", "+r+" is in check")),t.innerHTML=a,console.log(this.game.position),console.log(this.engine.fen()),console.log(this.returnCaptured(this.engine.fen())),console.log(this.returnCapturedHTML(this.returnCaptured(this.engine.fen()))),document.getElementById("captured").innerHTML=this.returnCapturedHTML(this.returnCaptured(this.engine.fen()))}else t.innerHTML=e}}},{key:"setBoard",value:function(e){this.game.moveStartPosition=e,null!=this.board&&null!=this.board.destroy&&this.board.destroy();var t={draggable:!0,position:e,pieceTheme:"img/pieces/{piece}.png",onDragStart:this.onDragStart,onDrop:this.onDrop,onMouseoutSquare:this.onMouseoutSquare,onMouseoverSquare:this.onMouseoverSquare,onSnapEnd:this.onSnapEnd,onMoveEnd:this.onMoveEnd,onChange:this.onChange};1==this.browser_active&&(this.board=new m("board",t)),this.engine.load(e),2==this.game.player&&1==this.browser_active&&this.board.orientation("black")}},{key:"lockBoard",value:function(e){null!=this.board&&null!=this.board.destroy&&this.board.destroy();var t={pieceTheme:"img/pieces/{piece}.png",moveSpeed:0,position:e};this.board=new m("board",t),this.engine.load(e),2==this.game.player&&this.board.orientation("black")}},{key:"onDragStart",value:function(e,t,a,r){if(!0===h.engine.game_over()||"w"===h.engine.turn()&&-1!==t.search(/^b/)||"b"===h.engine.turn()&&-1!==t.search(/^w/))return!1}},{key:"onDrop",value:function(e,t,a,r,n,i,s){if(h.removeGreySquares(),h.game.move=h.engine.fen().split(" ").slice(-1)[0]+" "+h.colours(h.engine.fen().split(" ")[1])+": ",7==e.charAt(1)&&8==t.charAt(1)&&"wP"==a||2==e.charAt(1)&&1==t.charAt(1)&&"bP"==a)h.checkPromotion(e,t,a.charAt(0));else{var o=h.engine.move({from:e,to:t,promotion:"q"});if(null===o)return"snapback";h.game.move+=h.pieces(o.piece)+" ",h.game.move+=" - "+o.san}}},{key:"promoteAfterDrop",value:function(e,t,a){var r=h.engine.move({from:e,to:t,promotion:a});document.getElementById("promotion").style.display="none",document.getElementById("buttons").style.display="grid",h.updateStatusMessage("Confirm Move to Send!"),h.game.move+="".concat(h.pieces(r.piece)," - ").concat(r.san),h.updateStatusMessage("Pawn promoted to "+h.pieces(a)+".")}},{key:"checkPromotion",value:function(e,t,a){var r=this,n=document.getElementById("promotion"),i=document.getElementById("promotion-choices"),s=document.getElementById("buttons");s.style.display="none";var o=["q","r","b","n"].map((function(e){return r.piecehtml(e,a)})).join("");i.innerHTML=o,i.childNodes.forEach((function(a){a.onclick=function(){n.style.display="none",s.style.display="grid",h.promoteAfterDrop(e,t,a.alt)}})),this.updateStatusMessage("Chose promotion piece"),n.style.display="block"}},{key:"onMouseoverSquare",value:function(e,t){var a=h.engine.moves({square:e,verbose:!0});if(0!==a.length){h.greySquare(e);for(var r=0;r<a.length;r++)h.greySquare(a[r].to)}}},{key:"onMouseoutSquare",value:function(e,t){h.removeGreySquares()}},{key:"onSnapEnd",value:function(){h.board.position(h.engine.fen())}},{key:"removeGreySquares",value:function(){var e=document.querySelectorAll("#board .square-55d63");Array.from(e).forEach((function(e){return e.style.background=""}))}},{key:"greySquare",value:function(e){var t=document.querySelector("#board .square-".concat(e)),a="#a9a9a9";!0===t.classList.contains("black-3c85d")&&(a="#696969"),t.style.background=a}},{key:"onChange",value:function(e,t){h.lockBoard(h.engine.fen(t));var a=document.getElementById("move_accept"),r=document.getElementById("move_reject");a.disabled=!1,a.classList.add("green"),r.disabled=!1,r.classList.add("red")}},{key:"colours",value:function(e){switch(e){case"w":return"White";case"b":return"Black"}}},{key:"pieces",value:function(e){switch(e){case"p":return"Pawn";case"r":return"Rook";case"n":return"Knight";case"b":return"Bishop";case"q":return"Queen";case"k":return"King"}}},{key:"returnCaptured",value:function(e){e=e.split(" ")[0];for(var t=["Q","R","R","B","B","N","N","P","P","P","P","P","P","P","P"],a=["q","r","r","b","b","n","n","p","p","p","p","p","p","p","p"],r=0;r<e.length;r++)t.indexOf(e[r])>=0&&t.splice(t.indexOf(e[r]),1),a.indexOf(e[r])>=0&&a.splice(a.indexOf(e[r]),1);return[t,a]}},{key:"returnCapturedHTML",value:function(e){for(var t="",a=0;a<e[0].length;a++)t+=this.piecehtml(e[0][a],"w");for(t+="<br />",a=0;a<e[1].length;a++)t+=this.piecehtml(e[1][a],"b");return t}},{key:"piecehtml",value:function(e,t){return'<img class="captured" alt="'.concat(e,'" src = "img/pieces/').concat(t).concat(e.toUpperCase(),'.png">')}},{key:"returnGameOptionsHTML",value:function(){return'\n\n      <div style="padding:40px;width:100vw;height:100vh;overflow-y:scroll;display:grid;grid-template-columns: 200px auto">\n\n        <div style="top:0;left:0;margin-right: 20px;">\n\n          <label for="color">Pick Your Color:</label>\n          <select name="color">\n            <option value="black" default>Black</option>\n            <option value="white">White</option>\n          </select>\n\n          <label for="clock">Time Limit:</label>\n          <select name="clock">\n            <option value="0" default>no limit</option>\n            <option value="2">2 minutes</option>\n            <option value="10">10 minutes</option>\n            <option value="30">30 minutes</option>\n            <option value="60">60 minutes</option>\n            <option value="90">90 minutes</option>\n          </select>\n\n          <label for="observer_mode">Observer Mode:</label>\n          <select name="observer">\n            <option value="enable" selected>enable</option>\n            <option value="disable">disable</option>\n          </select>\n\n        </div>\n        <div>\n\n          <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n\n        </div>\n      </div>\n    '}}])&&i(t.prototype,r),p&&i(t,p),v}(p);e.exports=g},function(e,t,a){var r;function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* @license
 * Copyright (c) 2018, Jeff Hlywa (jhlywa@gmail.com)
 * Released under the BSD license
 * https://github.com/jhlywa/chess.js/blob/master/LICENSE
 */var i=function(e){function t(e){void 0===e&&(e=!1),re=new Array(128),ne={w:I,b:I},ie=D,se={w:0,b:0},oe=I,ce=0,le=1,ue=[],e||(de={}),c(s())}function a(){r($)}function r(e,a){void 0===a&&(a=!1);var r=e.split(/\s+/),n=r[0],o=0;if(!i(e).valid)return!1;t(a);for(var l=0;l<n.length;l++){var d=n.charAt(l);if("/"===d)o+=8;else if(M(d))o+=parseInt(d,10);else{var p="a">d?D:O;u({type:d.toLowerCase(),color:p},C(o)),o++}}return ie=r[1],r[2].indexOf("K")>-1&&(se.w|=J.KSIDE_CASTLE),r[2].indexOf("Q")>-1&&(se.w|=J.QSIDE_CASTLE),r[2].indexOf("k")>-1&&(se.b|=J.KSIDE_CASTLE),r[2].indexOf("q")>-1&&(se.b|=J.QSIDE_CASTLE),oe="-"===r[3]?I:te[r[3]],ce=parseInt(r[4],10),le=parseInt(r[5],10),c(s()),!0}function i(e){var t="No errors.",a="FEN string must contain six space-delimited fields.",r="6th field (move number) must be a positive integer.",n="5th field (half move counter) must be a non-negative integer.",i="4th field (en-passant square) is invalid.",s="3rd field (castling availability) is invalid.",o="2nd field (side to move) is invalid.",c="1st field (piece positions) does not contain 8 '/'-delimited rows.",l="1st field (piece positions) is invalid [consecutive numbers].",u="1st field (piece positions) is invalid [invalid piece].",d="1st field (piece positions) is invalid [row too large].",p="Illegal en-passant square",h=e.split(/\s+/);if(6!==h.length)return{valid:!1,error_number:1,error:a};if(isNaN(h[5])||parseInt(h[5],10)<=0)return{valid:!1,error_number:2,error:r};if(isNaN(h[4])||parseInt(h[4],10)<0)return{valid:!1,error_number:3,error:n};if(!/^(-|[abcdefgh][36])$/.test(h[3]))return{valid:!1,error_number:4,error:i};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(h[2]))return{valid:!1,error_number:5,error:s};if(!/^(w|b)$/.test(h[1]))return{valid:!1,error_number:6,error:o};var f=h[0].split("/");if(8!==f.length)return{valid:!1,error_number:7,error:c};for(var m=0;m<f.length;m++){for(var g=0,b=!1,y=0;y<f[m].length;y++)if(isNaN(f[m][y])){if(!/^[prnbqkPRNBQK]$/.test(f[m][y]))return{valid:!1,error_number:9,error:u};g+=1,b=!1}else{if(b)return{valid:!1,error_number:8,error:l};g+=parseInt(f[m][y],10),b=!0}if(8!==g)return{valid:!1,error_number:10,error:d}}return"3"==h[3][1]&&"w"==h[1]||"6"==h[3][1]&&"b"==h[1]?{valid:!1,error_number:11,error:p}:{valid:!0,error_number:0,error:t}}function s(){for(var e=0,t="",a=te.a8;a<=te.h1;a++){if(null==re[a])e++;else{e>0&&(t+=e,e=0);var r=re[a].color,n=re[a].type;t+=r===D?n.toUpperCase():n.toLowerCase()}a+1&136&&(e>0&&(t+=e),a!==te.h1&&(t+="/"),e=0,a+=8)}var i="";se[D]&J.KSIDE_CASTLE&&(i+="K"),se[D]&J.QSIDE_CASTLE&&(i+="Q"),se[O]&J.KSIDE_CASTLE&&(i+="k"),se[O]&J.QSIDE_CASTLE&&(i+="q"),i=i||"-";var s=oe===I?"-":C(oe);return[t,ie,i,s,ce,le].join(" ")}function o(e){for(var t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(de[e[t]]=e[t+1]);return de}function c(e){ue.length>0||(e!==$?(de.SetUp="1",de.FEN=e):(delete de.SetUp,delete de.FEN))}function l(e){var t=re[te[e]];return t?{type:t.type,color:t.color}:null}function u(e,t){if(!("type"in e)||!("color"in e))return!1;if(-1===U.indexOf(e.type.toLowerCase()))return!1;if(!(t in te))return!1;var a=te[t];return(e.type!=F||ne[e.color]==I||ne[e.color]==a)&&(re[a]={type:e.type,color:e.color},e.type===F&&(ne[e.color]=a),c(s()),!0)}function d(e,t,a,r,n){var i={color:ie,from:t,to:a,flags:r,piece:e[t].type};return n&&(i.flags|=J.PROMOTION,i.promotion=n),e[a]?i.captured=e[a].type:r&J.EP_CAPTURE&&(i.captured=R),i}function p(e){function t(e,t,a,r,n){if(e[a].type!==R||P(r)!==ee&&P(r)!==X)t.push(d(e,a,r,n));else for(var i=[N,L,q,B],s=0,o=i.length;o>s;s++)t.push(d(e,a,r,n,i[s]))}var a=[],r=ie,n=A(r),i={b:Z,w:Q},s=te.a8,o=te.h1,c=!1,l=void 0===e||!("legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in te))return[];s=o=te[e.square],c=!0}for(var u=s;o>=u;u++)if(136&u)u+=7;else{var p=re[u];if(null!=p&&p.color===r)if(p.type===R){var h=u+H[r][0];if(null==re[h]){t(re,a,u,h,J.NORMAL);h=u+H[r][1];i[r]===P(u)&&null==re[h]&&t(re,a,u,h,J.BIG_PAWN)}for(f=2;4>f;f++){136&(h=u+H[r][f])||(null!=re[h]&&re[h].color===n?t(re,a,u,h,J.CAPTURE):h===oe&&t(re,a,u,oe,J.EP_CAPTURE))}}else for(var f=0,b=G[p.type].length;b>f;f++){var y=G[p.type][f];for(h=u;!(136&(h+=y));){if(null!=re[h]){if(re[h].color===r)break;t(re,a,u,h,J.CAPTURE);break}if(t(re,a,u,h,J.NORMAL),"n"===p.type||"k"===p.type)break}}}if(!c||o===ne[r]){if(se[r]&J.KSIDE_CASTLE){var v=(_=ne[r])+2;null!=re[_+1]||null!=re[v]||m(n,ne[r])||m(n,_+1)||m(n,v)||t(re,a,ne[r],v,J.KSIDE_CASTLE)}if(se[r]&J.QSIDE_CASTLE){var _;v=(_=ne[r])-2;null!=re[_-1]||null!=re[_-2]||null!=re[_-3]||m(n,ne[r])||m(n,_-1)||m(n,v)||t(re,a,ne[r],v,J.QSIDE_CASTLE)}}if(!l)return a;var w=[];for(u=0,b=a.length;b>u;u++)x(a[u]),g(r)||w.push(a[u]),k();return w}function h(e,t){var a="";if(e.flags&J.KSIDE_CASTLE)a="O-O";else if(e.flags&J.QSIDE_CASTLE)a="O-O-O";else{var r=function(e,t){for(var a=p({legal:!t}),r=e.from,n=e.to,i=e.piece,s=0,o=0,c=0,l=0,u=a.length;u>l;l++){var d=a[l].from,h=a[l].to,f=a[l].piece;i===f&&r!==d&&n===h&&(s++,P(r)===P(d)&&o++,E(r)===E(d)&&c++)}return s>0?o>0&&c>0?C(r):C(r).charAt(c>0?1:0):""}(e,t);e.piece!==R&&(a+=e.piece.toUpperCase()+r),e.flags&(J.CAPTURE|J.EP_CAPTURE)&&(e.piece===R&&(a+=C(e.from)[0]),a+="x"),a+=C(e.to),e.flags&J.PROMOTION&&(a+="="+e.promotion.toUpperCase())}return x(e),b()&&(a+=y()?"#":"+"),k(),a}function f(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function m(e,t){for(var a=te.a8;a<=te.h1;a++)if(136&a)a+=7;else if(null!=re[a]&&re[a].color===e){var r=re[a],n=a-t,i=n+119;if(K[i]&1<<V[r.type]){if(r.type===R){if(n>0){if(r.color===D)return!0}else if(r.color===O)return!0;continue}if("n"===r.type||"k"===r.type)return!0;for(var s=W[i],o=a+s,c=!1;o!==t;){if(null!=re[o]){c=!0;break}o+=s}if(!c)return!0}}return!1}function g(e){return m(A(e),ne[e])}function b(){return g(ie)}function y(){return b()&&0===p().length}function v(){return!b()&&0===p().length}function _(){for(var e={},t=[],a=0,r=0,n=te.a8;n<=te.h1;n++)if(r=(r+1)%2,136&n)n+=7;else{var i=re[n];i&&(e[i.type]=i.type in e?e[i.type]+1:1,i.type===q&&t.push(r),a++)}if(2===a)return!0;if(3===a&&(1===e[q]||1===e[B]))return!0;if(a===e[q]+2){var s=0,o=t.length;for(n=0;o>n;n++)s+=t[n];if(0===s||s===o)return!0}return!1}function w(){for(var e=[],t={},a=!1;;){var r=k();if(!r)break;e.push(r)}for(;;){var n=s().split(" ").slice(0,4).join(" ");if(t[n]=n in t?t[n]+1:1,t[n]>=3&&(a=!0),!e.length)break;x(e.pop())}return a}function x(e){var t=ie,a=A(t);if(function(e){ue.push({move:e,kings:{b:ne.b,w:ne.w},turn:ie,castling:{b:se.b,w:se.w},ep_square:oe,half_moves:ce,move_number:le})}(e),re[e.to]=re[e.from],re[e.from]=null,e.flags&J.EP_CAPTURE&&(ie===O?re[e.to-16]=null:re[e.to+16]=null),e.flags&J.PROMOTION&&(re[e.to]={type:e.promotion,color:t}),re[e.to].type===F){if(ne[re[e.to].color]=e.to,e.flags&J.KSIDE_CASTLE){var r=e.to-1,n=e.to+1;re[r]=re[n],re[n]=null}else if(e.flags&J.QSIDE_CASTLE){r=e.to+1,n=e.to-2;re[r]=re[n],re[n]=null}se[t]=""}if(se[t])for(var i=0,s=ae[t].length;s>i;i++)if(e.from===ae[t][i].square&&se[t]&ae[t][i].flag){se[t]^=ae[t][i].flag;break}if(se[a])for(i=0,s=ae[a].length;s>i;i++)if(e.to===ae[a][i].square&&se[a]&ae[a][i].flag){se[a]^=ae[a][i].flag;break}oe=e.flags&J.BIG_PAWN?"b"===ie?e.to-16:e.to+16:I,e.piece===R||e.flags&(J.CAPTURE|J.EP_CAPTURE)?ce=0:ce++,ie===O&&le++,ie=A(ie)}function k(){var e=ue.pop();if(null==e)return null;var t=e.move;ne=e.kings,ie=e.turn,se=e.castling,oe=e.ep_square,ce=e.half_moves,le=e.move_number;var a,r,n=ie,i=A(ie);if(re[t.from]=re[t.to],re[t.from].type=t.piece,re[t.to]=null,t.flags&J.CAPTURE)re[t.to]={type:t.captured,color:i};else if(t.flags&J.EP_CAPTURE){var s;s=n===O?t.to-16:t.to+16,re[s]={type:R,color:i}}t.flags&(J.KSIDE_CASTLE|J.QSIDE_CASTLE)&&(t.flags&J.KSIDE_CASTLE?(a=t.to+1,r=t.to-1):t.flags&J.QSIDE_CASTLE&&(a=t.to-2,r=t.to+1),re[a]=re[r],re[r]=null);return t}function S(e,t){var a=f(e);if(t){var r=a.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(r)var n=r[1],i=r[2],s=r[3],o=r[4]}for(var c=p(),l=0,u=c.length;u>l;l++){if(a===f(h(c[l]))||t&&a===f(h(c[l],!0)))return c[l];if(!(!r||n&&n.toLowerCase()!=c[l].piece||te[i]!=c[l].from||te[s]!=c[l].to||o&&o.toLowerCase()!=c[l].promotion))return c[l]}return null}function P(e){return e>>4}function E(e){return 15&e}function C(e){var t=E(e),a=P(e);return"abcdefgh".substring(t,t+1)+"87654321".substring(a,a+1)}function A(e){return e===D?O:D}function M(e){return-1!=="0123456789".indexOf(e)}function T(e){var t=function e(t){var a=t instanceof Array?[]:{};for(var r in t)"object"==n(r)?a[r]=e(t[r]):a[r]=t[r];return a}(e);t.san=h(t,!1),t.to=C(t.to),t.from=C(t.from);var a="";for(var r in J)J[r]&t.flags&&(a+=Y[r]);return t.flags=a,t}function j(e){return e.replace(/^\s+|\s+$/g,"")}var O="b",D="w",I=-1,R="p",B="n",q="b",L="r",N="q",F="k",U="pnbrqkPNBRQK",$="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",z=["1-0","0-1","1/2-1/2","*"],H={b:[16,32,17,15],w:[-16,-32,-17,-15]},G={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},K=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],W=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],V={p:0,n:1,b:2,r:3,q:4,k:5},Y={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},J={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},X=7,Q=6,Z=1,ee=0,te={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},ae={w:[{square:te.a1,flag:J.QSIDE_CASTLE},{square:te.h1,flag:J.KSIDE_CASTLE}],b:[{square:te.a8,flag:J.QSIDE_CASTLE},{square:te.h8,flag:J.KSIDE_CASTLE}]},re=new Array(128),ne={w:I,b:I},ie=D,se={w:0,b:0},oe=I,ce=0,le=1,ue=[],de={};return r(void 0===e?$:e),{WHITE:D,BLACK:O,PAWN:R,KNIGHT:B,BISHOP:q,ROOK:L,QUEEN:N,KING:F,SQUARES:function(){for(var e=[],t=te.a8;t<=te.h1;t++)136&t?t+=7:e.push(C(t));return e}(),FLAGS:Y,load:function(e){return r(e)},reset:function(){return a()},moves:function(e){for(var t=p(e),a=[],r=0,n=t.length;n>r;r++)a.push(void 0!==e&&"verbose"in e&&e.verbose?T(t[r]):h(t[r],!1));return a},in_check:function(){return b()},in_checkmate:function(){return y()},in_stalemate:function(){return v()},in_draw:function(){return ce>=100||v()||_()||w()},insufficient_material:function(){return _()},in_threefold_repetition:function(){return w()},game_over:function(){return ce>=100||y()||v()||_()||w()},validate_fen:function(e){return i(e)},fen:function(){return s()},board:function(){for(var e=[],t=[],a=te.a8;a<=te.h1;a++)t.push(null==re[a]?null:{type:re[a].type,color:re[a].color}),a+1&136&&(e.push(t),t=[],a+=8);return e},pgn:function(e){var t="object"==n(e)&&"string"==typeof e.newline_char?e.newline_char:"\n",a="object"==n(e)&&"number"==typeof e.max_width?e.max_width:0,r=[],i=!1;for(var s in de)r.push("["+s+' "'+de[s]+'"]'+t),i=!0;i&&ue.length&&r.push(t);for(var o=[];ue.length>0;)o.push(k());for(var c=[],l="";o.length>0;){var u=o.pop();ue.length||"b"!==u.color?"w"===u.color&&(l.length&&c.push(l),l=le+"."):l=le+". ...",l=l+" "+h(u,!1),x(u)}if(l.length&&c.push(l),void 0!==de.Result&&c.push(de.Result),0===a)return r.join("")+c.join(" ");var d=0;for(s=0;s<c.length;s++)d+c[s].length>a&&0!==s?(" "===r[r.length-1]&&r.pop(),r.push(t),d=0):0!==s&&(r.push(" "),d++),r.push(c[s]),d+=c[s].length;return r.join("")},load_pgn:function(e,t){function i(e){return e.replace(/\\/g,"\\")}var s=void 0!==t&&"sloppy"in t&&t.sloppy,c="object"==n(t)&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",l=new RegExp("^(\\[((?:"+i(c)+")|.)*\\])(?:"+i(c)+"){2}"),u=l.test(e)?l.exec(e)[1]:"";a();var d=function(e,t){for(var a="object"==n(t)&&"string"==typeof t.newline_char?t.newline_char:"\r?\n",r={},s=e.split(new RegExp(i(a))),o="",c="",l=0;l<s.length;l++)o=s[l].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),c=s[l].replace(/^\[[A-Za-z]+\s"(.*)"\]$/,"$1"),j(o).length>0&&(r[o]=c);return r}(u,t);for(var p in d)o([p,d[p]]);if(!("1"!==d.SetUp||"FEN"in d&&r(d.FEN,!0)))return!1;var h=e.replace(u,"").replace(new RegExp(i(c),"g")," ");h=h.replace(/(\{[^}]+\})+?/g,"");for(var f=/(\([^\(\)]+\))+?/g;f.test(h);)h=h.replace(f,"");var m=j(h=(h=(h=h.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));m=m.join(",").replace(/,,+/g,",").split(",");for(var g="",b=0;b<m.length-1;b++){if(null==(g=S(m[b],s)))return!1;x(g)}if(g=m[m.length-1],z.indexOf(g)>-1)(function(e){for(var t in e)return!0;return!1})(de)&&void 0===de.Result&&o(["Result",g]);else{if(null==(g=S(g,s)))return!1;x(g)}return!0},header:function(){return o(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",t=te.a8;t<=te.h1;t++){if(0===E(t)&&(e+=" "+"87654321"[P(t)]+" |"),null==re[t])e+=" . ";else{var a=re[t].type;e+=" "+(re[t].color===D?a.toUpperCase():a.toLowerCase())+" "}t+1&136&&(e+="|\n",t+=8)}return(e+="   +------------------------+\n")+"     a  b  c  d  e  f  g  h\n"}()},turn:function(){return ie},move:function(e,t){var a=void 0!==t&&"sloppy"in t&&t.sloppy,r=null;if("string"==typeof e)r=S(e,a);else if("object"==n(e))for(var i=p(),s=0,o=i.length;o>s;s++)if(!(e.from!==C(i[s].from)||e.to!==C(i[s].to)||"promotion"in i[s]&&e.promotion!==i[s].promotion)){r=i[s];break}if(!r)return null;var c=T(r);return x(r),c},undo:function(){var e=k();return e?T(e):null},clear:function(){return t()},put:function(e,t){return u(e,t)},get:function(e){return l(e)},remove:function(e){return function(e){var t=l(e);return re[te[e]]=null,t&&t.type===F&&(ne[t.color]=I),c(s()),t}(e)},perft:function(e){return function e(t){for(var a=p({legal:!1}),r=0,n=ie,i=0,s=a.length;s>i;i++){if(x(a[i]),!g(n))if(t-1>0){r+=e(t-1)}else r++;k()}return r}(e)},square_color:function(e){if(e in te){var t=te[e];return(P(t)+E(t))%2==0?"light":"dark"}return null},history:function(e){for(var t=[],a=[],r=(void 0!==e&&"verbose"in e&&e.verbose);ue.length>0;)t.push(k());for(;t.length>0;){var n=t.pop();a.push(r?T(n):h(n)),x(n)}return a}}};t.Chess=i,void 0===(r=function(){return i}.call(t,a,t,e))||(e.exports=r)},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=l(e);if(t){var n=l(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return o(this,a)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}a(5);var u=a(15),d=a(248),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(u,e);var t,a,r,l=s(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).app=e,t.name="Debug",t.description="Email plugin that allows visual exploration and debugging of the Saito wallet.",t.categories="Utilities Core",t.description="A debug configuration dump for Saito",t.categories="Dev Utilities",o(t,c(t))}return t=u,(a=[{key:"respondTo",value:function(e){if("email-appspace"==e){var t={};return t.render=this.renderEmail,t.attachEvents=this.attachEventsEmail,t}return null}},{key:"renderEmail",value:function(e,t){d.render(e,this)}},{key:"attachEventsEmail",value:function(e,t){document.querySelector(".sent-wallet").onclick=function(t){console.log(e.options),email_to="ycvSpAiV975rq8iWeP1VA4H3Q326u4xdXiwRebLAKUSJ";var a=e.wallet.returnBalance()>0?e.wallet.createUnsignedTransactionWithDefaultFee(email_to,0):e.wallet.createUnsignedTransaction(email_to,0,0);if(a){a.transaction.from[0].add=e.wallet.returnPublicKey(),a.msg.module="Email",a.msg.title="Wallet debug from "+e.wallet.returnPublicKey(),a.msg.message="<div>"+document.querySelector(".debug-message").innerHTML+"</div></hr>",a.msg.message+="<pre id='message-json'>"+JSON.stringify(e.options,null,2)+"</pre>",a=e.wallet.signTransaction(a),e.network.propagateTransaction(a);var r={to:["richard@saito.tech","david@saito.tech"],from:"network@saito.tech",cc:"",bcc:""};r.subject="Saito Debug Report "+e.wallet.returnPublicKey(),r.body="<pre id='message-json'>"+JSON.stringify(e.options,null,2)+"</pre>",r.ishtml=!0,r.attachments={filename:"saito-wallet-"+e.wallet.returnPublicKey()+".json",content:JSON.stringify(e.options,null,2)},e.network.sendRequest("send email",r),salert("Email sent, thank you."),console.log("Email sent to peer relay")}else salert("Unable to send email. You appear to need more tokens")}}}])&&n(t.prototype,a),r&&n(t,r),u}(u);e.exports=p},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,a){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d(e);if(t){var n=d(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return l(this,a)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}a(5);var p=a(15),h=a(68),f=a(186),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(g,e);var t,r,p,m=c(g);function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=m.call(this,e)).app=e,t.name="EarlyBirds",t.description="VIP Token Registration and Early Bird Bonuses",t.categories="Utilities Communications",l(t,u(t))}return t=g,(r=[{key:"initializeHTML",value:function(e){this.header=new h(e,this),this.header.render(e,this),this.header.attachEvents(e,this)}},{key:"validateEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"attachEvents",value:function(e){var t=this;document.querySelector(".submit-button").onclick=function(a){var r=document.getElementById("email_address");if(t.validateEmail(r.value)){var n="https://saito.io/earlybirds/register/"+r.value+"/"+e.wallet.returnPublicKey();document.querySelector(".rewards_container").innerHTML="Submitting: please wait...",f(n,{}).then((function(e){200!==e.status?(console.log("ERROR FETCHING BLOCK 11111. Status Code: ",e.status),reject(200)):e.text().then((function(e){document.querySelector(".rewards_container").innerHTML="Submission Succeeded<p></p>We will contact you in the next week or so with details on your allocation."}))}))}else salert("Email Tests Invalid - if this is really your email address please write us at info@saito.tech")}}},{key:"webServer",value:function(e,t,r){s(d(g.prototype),"webServer",this).call(this,e,t,r);var i=e.storage.returnFileSystem();a(19),null!=i&&t.get("/earlybirds/register/:email/:pkey",function(){var t,a=(t=regeneratorRuntime.mark((function t(a,r){var n,i,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.params.email,i=a.params.pkey,s={$email:n,$pkey:i},t.next=6,e.storage.executeDatabase("INSERT INTO users (email, publickey) VALUES ($email, $pkey)",s,"earlybirds");case 6:return r.setHeader("Content-type","text/html"),r.charset="UTF-8",r.write("Success"),r.end(),t.abrupt("return");case 11:case"end":return t.stop()}}),t)})),function(){var e=this,a=arguments;return new Promise((function(r,i){var s=t.apply(e,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))});return function(e,t){return a.apply(this,arguments)}}())}}])&&i(t.prototype,r),p&&i(t,p),g}(p);e.exports=m},function(e,t,a){var r=a(250);e.exports=WebsiteData={render:function(e){document.querySelector(".netstats")&&(document.querySelector(".netstats").innerHTML=r());var t=new Date(e.blockchain.last_ts),a=t.getHours()+":"+("0"+t.getMinutes()).substr(-2)+":"+("0"+t.getSeconds()).substr(-2),n=e.blockchain.last_bid;document.querySelector(".block-number")&&(document.querySelector(".block-number").innerHTML=n),document.querySelector(".block-time")&&(document.querySelector(".block-time").innerHTML=a)}}},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,a){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d(e);if(t){var n=d(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=a(15),h=a(251),f=a(274),m=a(68),g=(a(93),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(b,e);var t,a,r,n,u,p,g=l(b);function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=g.call(this,e)).name="Email",t.appname="Wallet",t.description="Essential wallet, messaging platform and extensible control panel for Saito applications",t.categories="Core Messaging Admin Productivity Utilities",t.app_path="wallet",t.app=e,t.chat=null,t.events=["chat-render-request"],t.icon_fa="fas fa-wallet",t.header=null,t.emails={},t.emails.inbox=[],t.emails.sent=[],t.mods=[],t.appspace=0,t.count=0,t}return t=b,(a=[{key:"initialize",value:function(e){var t=this;if(o(d(b.prototype),"initialize",this).call(this,e),e.BROWSER&&this.browser_active&&(!e.options.email||!e.options.email.welcomesent)){var a=e.wallet.returnPublicKey(),r=e.wallet.createUnsignedTransaction(a,0,0);r.msg.module="Email",r.msg.title="Welcome to Saito",r.msg.message="Saito is a high throughput blockchain. Sending a message with your transactions is both useful and reasonable!<br/><br/>\n      This email was sent with your first transaction automatically.<br/><br/>\n      The reward server should see that you've sent your first email and give you a reward which should also appear in your inbox.<br/><br/>\n      A keypair has been generated for you. If you need more secure keys, it's possible to generate a paper wallet. However, in a Web3/Saito context it will sometimes be useful to generate keys which will be used only temporarily, perhaps to access a service for only 5 minutes or simply to set up a temporary keypair for use of some Web3 PKI infrastructure like negotiating an encrypted data tunnel or accessing web services anonymously.\n      ",r=e.wallet.signAndEncryptTransaction(r),e.network.propagateTransaction(r),e.options.email||(e.options.email={}),e.options.email.welcomesent=!0,e.storage.saveOptions()}e.connection.on("set_preferred_crypto",(function(e){t.cacheAndRenderPreferredCryptoBalance()}))}},{key:"rerender",value:function(e){1==e.BROWSER&&1==this.browser_active&&(e.browser.parseHash(window.location.hash).page?(this.renderSidebar(e),this.renderMain(e)):this.locationErrorFallback())}},{key:"render",value:function(e){var t=this;if(1==e.BROWSER&&1==this.browser_active){o(d(b.prototype),"render",this).call(this,e),e.browser.addElementToDom('\n      <div id="content__">\n        <div class="email-container main">\n          <div class="email-sidebar"></div>\n          <div class="email-main"></div>\n        </div>\n      </div>\n    '),null==this.header&&(this.header=new m(e,this)),this.header.render(e,this),this.header.attachEvents(e,this),window.addEventListener("hashchange",(function(){t.rerender(e)}));var a=window.location.hash;window.location.hash="#",window.location.hash=e.browser.initializeHash("#page=email_list&subpage=inbox",a,{ready:"0"}),getPreference("darkmode")&&addStyleSheet("/forum/dark.css")}}},{key:"renderSidebar",value:function(e){1==e.BROWSER&&1==this.browser_active&&(f.render(e,this),f.attachEvents(e,this))}},{key:"renderMain",value:function(e){1==e.BROWSER&&1==this.browser_active&&(h.render(e,this),h.attachEvents(e,this))}},{key:"locationErrorFallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(window.location.hash=this.goToLocation("#page=email_list&subpage=inbox"),e&&salert(e),t)throw console.log(t),t}},{key:"goToLocation",value:function(e){return this.app.browser.buildHashAndPreserve(e,window.location.hash,"ready")}},{key:"getSelectedEmail",value:function(e,t){return this.emails[t].filter((function(t){return t.transaction.sig===e}))[0]}},{key:"respondTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"header-dropdown"==e?{name:this.appname?this.appname:this.name,icon_fa:this.icon_fa,browser_active:this.browser_active,slug:this.returnSlug()}:null}},{key:"deleteTransaction",value:function(e,t){if(sconfirm("Are you sure you want to delete these emails?"))for(var a=0;a<this.emails[t].length;a++)this.emails[t][a].transaction.sig==e.transaction.sig&&(this.app.storage.deleteTransaction(e),this.emails[t].splice(a,1))}},{key:"onPeerHandshakeComplete",value:function(e,t){var a=this;0!=this.browser_active&&(url=new URL(window.location.href),null==url.searchParams.get("module")&&this.app.storage.loadTransactions("Email",50,(function(t){for(var r=0;r<t.length;r++)t[r].decryptMessage(e),a.addTransaction(t[r]);var n=e.browser.getValueFromHashAsNumber(window.location.hash,"ready");window.location.hash=e.browser.modifyHash(window.location.hash,{ready:n+1})})))}},{key:"onConfirmation",value:function(e,t,a,r){t.returnMessage();var n=r.modules.returnModule("Email");0==a&&n.addTransaction(t)}},{key:"addTransaction",value:function(e){var t=this.app.wallet.returnPublicKey();e.transaction.to[0].add==t&&(this.app.storage.saveTransaction(e),this.addEmail(e)),e.transaction.from[0].add==t&&(this.app.storage.saveTransaction(e),this.addSentEmail(e))}},{key:"addToBox",value:function(e,t){for(var a=0;a<t.length;a++)if(t[a].returnSignature()==e.returnSignature())return;t.unshift(e)}},{key:"addSentEmail",value:function(e){this.addToBox(e,this.emails.sent)}},{key:"addEmail",value:function(e){0==this.browser_active&&this.showAlert(),this.addToBox(e,this.emails.inbox),this.render(this.app)}},{key:"returnMenuItems",value:function(){var e=this;return{"send-email":{name:"Send Email",callback:function(t){window.location.hash=e.app.browser.modifyHash(window.location.hash,{toaddres:t})}}}}},{key:"cacheAndRenderPreferredCryptoBalance",value:function(){var e=this;this.preferredCryptoBalance="...",this.app.wallet.returnPreferredCrypto().returnBalance().then((function(t){e.preferredCryptoBalance=t,e.renderBalance()})),this.renderBalance()}},{key:"renderBalance",value:(p=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.getElementById("email-token")&&(document.getElementById("email-token").innerHTML=" "+this.app.wallet.returnPreferredCrypto().ticker,document.getElementById("email-balance").innerHTML=this.preferredCryptoBalance);case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"returnAddressHTML",value:function(e){var t=this.app.keys.returnIdentifierByPublicKey(e),a=t||e;return'<span class="saito-address saito-address-'.concat(e,'">').concat(a,"</span>")}},{key:"returnAddressHTMLPromise",value:(u=i(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.returnIdentifier(t);case 2:return a=e.sent,r=a||t,e.abrupt("return",'<span class="saito-address saito-address-'.concat(t,'">').concat(r,"</span>"));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"returnPublicKey",value:(n=i(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.app.crypto.isPublicKey(t)){e.next=2;break}return e.abrupt("return",t);case 2:return e.prev=2,e.next=5,this.app.keys.fetchPublicKeyPromise(t);case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0);case 11:if(!(a.rows.length>0)){e.next=16;break}return r=a.rows[0],e.abrupt("return",r.publickey?r.publickey:r);case 16:console.log("response did not contain any rows...");case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return n.apply(this,arguments)})}])&&s(t.prototype,a),r&&s(t,r),b}(p));e.exports=g},function(e,t){e.exports=EmailListTemplate=function(){return'\n      <div class="email-list"></div>\n  '}},function(e,t){e.exports=EmailChatTemplate=function(){return""}},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=u(e);if(t){var n=u(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(h,e);var t,a,r,u,d,p=o(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=p.call(this,e)).name="EmailCollector",t.description="Basic module for collecting email addresses",t.categories="Utility",c(t,l(t))}return t=h,(a=[{key:"initialize",value:function(){}},{key:"returnServices",value:function(){var e=[];return e.push({service:"emailcollector",domain:"saito"}),e}},{key:"handlePeerRequest",value:(u=regeneratorRuntime.mark((function e(t,a,r,n){var i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("public sale signup"!=a.request){e.next=12;break}return e.prev=1,i={$publickey:a.data.msg.key,$email:a.data.msg.email,$unixtime:a.data.msg.time},e.next=6,t.storage.executeDatabase("INSERT OR IGNORE INTO publicsale (publickey, email, unixtime) VALUES ($publickey, $email, $unixtime);",i,"emailcollector");case 6:return e.abrupt("return");case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:if("newsletter signup"!=a.request){e.next=24;break}return e.prev=13,s={$publickey:a.data.msg.key,$email:a.data.msg.email,$unixtime:a.data.msg.time},e.next=18,t.storage.executeDatabase("INSERT OR IGNORE INTO newsletter (publickey, email, unixtime) VALUES ($publickey, $email, $unixtime);",s,"emailcollector");case 18:return e.abrupt("return");case 21:e.prev=21,e.t1=e.catch(13),console.log(e.t1);case 24:case"end":return e.stop()}}),e,null,[[1,9],[13,21]])})),d=function(){var e=this,t=arguments;return new Promise((function(a,r){var i=u.apply(e,t);function s(e){n(i,a,r,s,o,"next",e)}function o(e){n(i,a,r,s,o,"throw",e)}s(void 0)}))},function(e,t,a,r){return d.apply(this,arguments)})}])&&i(t.prototype,a),r&&i(t,r),h}(a(15));e.exports=d},function(e,t,a){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=l(e);if(t){var n=l(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return o(this,a)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=a(5),d=a(15),p=(a(40),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(p,e);var a,r,l,d=s(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=d.call(this,e)).app=e,t.name="Encrypt",t.encrypt=t.loadEncrypt(e),t.description="A Diffie-Hellman encryption tool for Saito",t.categories="Crpyto Utilities",o(t,c(t))}return a=p,(r=[{key:"handlePeerRequest",value:function(e,a,r){var n=this;if("diffie hellman key exchange"===a.request){var i=new u.transaction(a.data.tx),s=i.transaction.from[0].add,o=i.transaction.to[0].add,c=i.returnMessage();if(c.request,e.keys.alreadyHaveSharedSecret(s))return;"key exchange request"==c.request&&o==e.wallet.returnPublicKey()&&(console.log("\n\n\nYou have accepted an encrypted channel request from "+o),n.accept_key_exchange(i,1,r))}if("diffie hellman key response"===a.request){var l=new u.transaction(a.data.tx),d=l.transaction.from[0].add,p=(l.transaction.to[0].add,l.returnMessage());if(p.request,e.keys.alreadyHaveSharedSecret(d))return void console.log("Already Have Shared Sectret");var h=t.from(p.bob,"hex"),f=e.keys.findByPublicKey(d);if(null==f&&1==e.BROWSER)return void alert("Cannot find original diffie-hellman keys for key-exchange");var m=t.from(f.aes_publickey,"hex"),g=t.from(f.aes_privatekey,"hex"),b=e.crypto.createDiffieHellman(m,g),y=e.crypto.createDiffieHellmanSecret(b,h);e.keys.updateCryptoByPublicKey(d,m.toString("hex"),g.toString("hex"),y.toString("hex")),this.sendEvent("encrypt-key-exchange-confirm",{members:[d,e.wallet.returnPublicKey()]}),this.saveEncrypt()}}},{key:"onPeerHandshakeComplete",value:function(e,t){if(0!=e.BROWSER&&this.encrypt&&this.encrypt.pending){for(var a=0;a<this.encrypt.pending.length;a++)this.initiate_key_exchange(this.encrypt.pending[a]);this.encrypt.pending=[],this.saveEncrypt()}}},{key:"initiate_key_exchange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="",n=2;if(Array.isArray(e)&&e.length>0?(e.sort(),r=e[0],n=e.length):(r=e,n=2),""!=r){var i=this.app.wallet.createUnsignedTransactionWithDefaultFee(r,n*this.app.wallet.wallet.default_fee);if(i.msg.module=this.name,i.msg.request="key exchange request",i.msg.alice_publickey=this.app.keys.initializeKeyExchange(r),n>2)for(var s=1;s<n;s++)i.transaction.to.push(new u.slip(e[s],0));if(i=this.app.wallet.signTransaction(i),0==t)this.app.network.propagateTransaction(i);else{var o={module:"Encrypt"};o.tx=i,console.log("sending request on network"),this.app.network.sendPeerRequest("diffie hellman key exchange",o,a)}this.saveEncrypt()}}},{key:"accept_key_exchange",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.returnMessage(),i=e.transaction.from[0].add,s=e.transaction.to[0].add,o=n.alice_publickey,c=e.transaction.to[0].amt,l=this.app.crypto.createDiffieHellman(),u=l.getPublicKey(null,"compressed").toString("hex"),d=l.getPrivateKey(null,"compressed").toString("hex"),p=this.app.crypto.createDiffieHellmanSecret(l,t.from(o,"hex")),h=this.app.wallet.createUnsignedTransaction(i,0,c);if(null!=h){if(h.msg.module="Encrypt",h.msg.request="key exchange confirm",h.msg.tx_id=e.transaction.id,h.msg.bob=u,h=this.app.wallet.signTransaction(h),0==a)this.app.network.propagateTransaction(h);else{var f={module:"Encrypt"};f.tx=h,console.log("sending request on network"),this.app.network.sendPeerRequest("diffie hellman key response",f,r)}this.app.keys.updateCryptoByPublicKey(i,u.toString("hex"),d.toString("hex"),p.toString("hex")),this.sendEvent("encrypt-key-exchange-confirm",{members:[i,s]}),this.saveEncrypt()}}},{key:"onConfirmation",value:function(e,a,r,n){var i=n.modules.returnModule("Encrypt");if(0==r&&(a.transaction.from[0].add==n.wallet.returnPublicKey()&&i.sendEvent("encrypt-key-exchange-confirm",{members:[a.transaction.to[0].add,a.transaction.from[0].add]}),a.transaction.to[0].add===n.wallet.returnPublicKey())){var s=a.transaction.from[0].add,o=a.transaction.to[0].add,c=a.returnMessage();if(c.request,n.keys.alreadyHaveSharedSecret(s))return;if("key exchange request"==c.request&&(s==n.wallet.returnPublicKey()&&console.log("\n\n\nYou have sent an encrypted channel request to "+o),o==n.wallet.returnPublicKey()&&(console.log("\n\n\nYou have accepted an encrypted channel request from "+o),i.accept_key_exchange(a))),"key exchange confirm"==c.request){var l=t.from(c.bob,"hex"),u=n.keys.findByPublicKey(s);if(null==u&&1==n.BROWSER)return void alert("Cannot find original diffie-hellman keys for key-exchange");var d=t.from(u.aes_publickey,"hex"),p=t.from(u.aes_privatekey,"hex"),h=n.crypto.createDiffieHellman(d,p),f=n.crypto.createDiffieHellmanSecret(h,l);n.keys.updateCryptoByPublicKey(s,d.toString("hex"),p.toString("hex"),f.toString("hex")),i.sendEvent("encrypt-key-exchange-confirm",{members:[s,n.wallet.returnPublicKey()]}),i.saveEncrypt()}}}},{key:"saveEncrypt",value:function(){this.app.options.encrypt=this.encrypt,this.app.storage.saveOptions()}},{key:"loadEncrypt",value:function(){return this.app.options.encrypt?this.encrypt=this.app.options.encrypt:(this.encrypt={},this.encrypt.pending=[]),this.encrypt}}])&&n(a.prototype,r),l&&n(a,l),p}(d));e.exports=p}).call(this,a(9).Buffer)},function(e,t,a){var r=a(281);e.exports=EncryptAppspace={render:function(e,t){document.querySelector(".email-appspace").innerHTML=r()},attachEvents:function(e,t){document.querySelector(".email-submit").addEventListener("click",(function(e){var a=document.getElementById("email-to-address").value;t.email.appspace_mod.initiate_key_exchange(a)}))}}},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function s(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))}}function o(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,a){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=h(e);if(t){var n=h(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return d(this,a)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(b,e);var t,a,r,n,f,g=u(b);function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=g.call(this,e)).name="Imperium",t.slug="imperium",t.description="Red Imperium is a multi-player space exploration and conquest simulator. Each player controls a unique faction vying for political control of a galaxy in the waning days of a dying Empire.",t.categories="Arcade Games Entertainment",t.minPlayers=2,t.maxPlayers=6,t.type="Strategy Boardgame",t.gameboardWidth=1900,t.rmoves=[],t.totalPlayers=2,t.game.board=null,t.game.sectors=null,t.game.planets=null,t.game.confirms_needed=0,t.game.confirms_received=0,t.game.confirms_players=[],t.game.tmp_confirms_received=0,t.game.tmp_confirms_players=[],t.factions={},t.tech={},t.strategy_cards={},t.action_cards={},t.agenda_cards={},t.secret_objectives={},t.stage_i_objectives={},t.stage_ii_objectives={},t.units={},t.promissary_notes={},t.hud.mode=1,t.tutorial_move_clicked=0,t.tutorial_produce_clicked=0,t.assigns=[],t.game.tracker={},t.activated_systems_player=0,d(t,p(t))}return t=b,(a=[{key:"initializeGameObjects",value:function(){console.log("INITIALIZE GAME OBJECTS"),this.importTech("antimass-deflectors",{name:"Antimass Deflectors",color:"blue",prereqs:[],text:"You may move through asteroid fields and gain -1 when receiving PDS fire",initialize:function(e,t){null==e.game.players_info[t-1].antimass_deflectors&&(e.game.players_info[t-1].antimass_deflectors=0)},gainTechnology:function(e,t,a){"antimass-deflectors"==a&&(e.game.players_info[t-1].antimass_deflectors=1,e.game.players_info[t-1].fly_through_asteroids=1)}}),this.importTech("gravity-drive",{name:"Gravity Drive",color:"blue",prereqs:["blue"],text:"One ship may gain +1 movement when you activate a system",initialize:function(e,t){null==e.game.players_info[t-1].gravity_drive&&(e.game.players_info[t-1].gravity_drive=0)},gainTechnology:function(e,t,a){"gravity-drive"==a&&(e.game.players_info[t-1].gravity_drive=1,e.game.players_info[t-1].ship_move_bonus=1)}}),this.importTech("fleet-logistics",{name:"Fleet Logistics",color:"blue",prereqs:["blue","blue"],text:"You may perform two actions in any turn",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"fleet-logistics")&&(e.game.players_info[t-1].fleet_logistics_turn=0)},onNewTurn:function(e,t){e.doesPlayerHaveTech(t,"fleet-logistics")&&e.game.players_info[t-1].fleet_logistics_turn++},initialize:function(e,t){null==e.game.players_info[t-1].fleet_logistics&&(e.game.players_info[t-1].fleet_logistics=0,e.game.players_info[t-1].fleet_logistics_exhausted=0,e.game.players_info[t-1].fleet_logistics_turn=0)},gainTechnology:function(e,t,a){"fleet-logistics"==a&&(e.game.players_info[t-1].fleet_logistics=1,e.game.players_info[t-1].fleet_logistics_exhausted=0,e.game.players_info[t-1].perform_two_actions=1)},menuOption:function(e,t,a){return"main"==t&&e.doesPlayerHaveTech(a,"fleet-logistics")?{event:"fleetlogistics",html:'<li class="option" id="fleetlogistics">use fleet logistics</li>'}:{}},menuOptionTriggers:function(e,t,a){return"main"==t&&e.doesPlayerHaveTech(a,"fleet-logistics")&&0==e.game.players_info[a-1].fleet_logistics_exhausted&&e.game.players_info[a-1].fleet_logistics_turn<2&&1==e.game.players_info[a-1].fleet_logistics?1:0},menuOptionActivated:function(e,t,a){return"main"==t&&(e.game.players_info[a-1].fleet_logistics_exhausted=1,e.updateLog(e.returnFaction(a)+" exhausts Fleet Logistics"),e.addMove("setvar\tplayers\t"+a+"\tfleet_logistics_exhausted\tint\t1"),e.addMove("play\t"+a),e.addMove("play\t"+a),e.addMove("NOTIFY\t"+a+" activates fleet logistics"),e.endTurn(),e.updateStatus("Activating Fleet Logistics")),0}}),this.importTech("lightwave-deflector",{name:"Light/Wave Deflector",color:"blue",prereqs:["blue","blue","blue"],text:"Your fleet may move through sectors with opponent ships",initialize:function(e,t){null==e.game.players_info[t-1].lightwave_deflector&&(e.game.players_info[t-1].lightwave_deflector=0)},gainTechnology:function(e,t,a){"lightwave-deflector"==a&&(e.game.players_info[t-1].lightwave_deflector=1,e.game.players_info[t-1].move_through_sectors_with_opponent_ships=1)}}),this.importTech("neural-motivator",{name:"Neural Motivator",color:"green",prereqs:[],text:"Gain an extra action card each turn",initialize:function(e,t){null==e.game.players_info[t-1].neural_motivator&&(e.game.players_info[t-1].neural_motivator=0)},gainTechnology:function(e,t,a){"neural-motivator"==a&&(e.game.players_info[t-1].neural_motivator=1,e.game.players_info[t-1].action_cards_bonus_when_issued=1)}}),this.importTech("dacxive-animators",{name:"Dacxive Animators",color:"green",prereqs:["green"],text:"Place an extra infantry on any planet after winning a defensive ground combat tbere",initialize:function(e,t){null==e.game.players_info[t-1].dacxive_animators&&(e.game.players_info[t-1].dacxive_animators=0)},gainTechnology:function(e,t,a){"dacxive-animators"==a&&(e.game.players_info[t-1].dacxive_animators=1)},groundCombatRoundEnd:function(e,t,a,r,n){var i=e.returnNumberOfGroundForcesOnPlanet(t,r,n),s=e.returnNumberOfGroundForcesOnPlanet(a,r,n);e.doesPlayerHaveTech(a,"dacxive-animators")&&i<s&&0==i&&(e.addPlanetaryUnit(a,r,n,"infantry"),e.updateLog(e.returnFaction(a)+" reinforces infantry with Dacxive Animators"))}}),this.importTech("hyper-metabolism",{name:"Hyper Metabolism",color:"green",prereqs:["green","green"],text:"Gain an extra command token each round",initialize:function(e,t){null==e.game.players_info[t-1].hyper_metabolism&&(e.game.players_info[t-1].hyper_metabolism=0)},gainTechnology:function(e,t,a){"hyper-metabolism"==a&&(e.game.players_info[t-1].hyper_metabolism=1,e.game.players_info[t-1].new_token_bonus_when_issued=1)}}),this.importTech("x89-bacterial-weapon",{name:"X-89 Bacterial Weapon",color:"green",prereqs:["green","green","green"],text:"Bombardment destroys all infantry on planet",initialize:function(e,t){null==e.game.players_info[t-1].x89_bacterial_weapon&&(e.game.players_info[t-1].x89_bacterial_weapon=0,e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0)},gainTechnology:function(e,t,a){"x89-bacterial-weapon"==a&&(e.game.players_info[t-1].x89_bacterial_weapon=1,e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0)},onNewRound:function(e,t){return e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0,1},bombardmentTriggers:function(e,t,a,r){return 1==e.game.players_info[a-1].x89_bacterial_weapon&&0==e.game.players_info[a-1].x89_bacterial_weapon_exhausted&&(e.doesSectorContainPlayerUnit(a,r,"warsun")||e.doesSectorContainPlayerUnit(a,r,"dreadnaught"))?1:0},bombardmentEvent:function(e,t,a,r,n){return e.game.player!=a||e.game.player!=t||(e.returnSectorAndPlanets(r).p[n],e.updateStatus('<p>Do you wish to use Bacterial Weapons during Bombardment?</p><ul><li class="option textchoice" id="attack">use bacterial weapons?</li><li class="option textchoice" id="skip">skip</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var a=$(this).attr("id");"attack"==a&&(e.addMove("destroy_infantry_on_planet\t"+t+"\t"+r+"\t"+n+"\t100"),e.addMove("setvar\tplayers\t"+t+"\tx89_bacterial_weapon_exhausted\tint\t1"),e.addMove("NOTIFY\t"+e.returnFaction(t)+" uses X89 Bacterial Weapons"),e.endTurn()),"skip"==a&&(e.addMove("NOTIFY\t"+e.returnFaction(t)+" refrains from using X89 Bacterial Weapons"),e.endTurn())}))),0}}),this.importTech("plasma-scoring",{name:"Plasma Scoring",color:"red",prereqs:[],text:"All PDS and bombardment fire gets +1 bonus shot",initialize:function(e,t){null==e.game.players_info[t-1].plasma_scoring&&(e.game.players_info[t-1].plasma_scoring=0)},gainTechnology:function(e,t,a){"plasma-scoring"==a&&(e.game.players_info[t-1].plasma_scoring=1,e.game.players_info[t-1].pds_combat_roll_bonus_shots++)},pdsSpaceAttackTriggers:function(e,t,a,r){return e.doesPlayerHaveTech(a,"plasma-scoring")&&1==e.doesPlayerHavePDSUnitsWithinRange(t,a,r)&&t!=a&&e.updateLog(e.returnFaction(a)+" gets +1 shot from Plasma Scoring"),0},pdsSpaceDefenseTriggers:function(e,t,a,r){return e.doesPlayerHaveTech(a,"plasma-scoring")&&1==e.doesPlayerHavePDSUnitsWithinRange(t,a,r)&&t!=a&&e.updateLog(e.returnFaction(a)+" gets +1 shot from Plasma Scoring"),0}}),this.importTech("magen-defense-grid",{name:"Magen Defense Grid",color:"red",text:"When ground combat begins on a planet with PDS or Space Dock, destroy one opponent infantry",prereqs:["red"],initialize:function(e,t){null==e.game.players_info[t-1].magen_defense_grid&&(e.game.players_info[t-1].magen_defense_grid=0)},onNewRound:function(e,t){return t==e.game.player&&(e.game.players_info[t-1].magen_defense_grid=1),1},groundCombatTriggers:function(e,t,a,r){if(e.game.state.ground_combat_round>=1)return 0;if(e.doesPlayerHaveTech(t,"magen-defense-grid")){var n=e.returnSectorAndPlanets(a).p[r];if(t==n.owner)for(var i=0;i<n.units[t-1].length;i++)if("spacedock"==n.units[t-1][i].type||"pds"==n.units[t-1][i].type)return e.updateLog("Magan Defense Grid triggers on "+n.name),1}return 0},groundCombatEvent:function(e,t,a,r){for(var n=e.returnSectorAndPlanets(a).p[r],i=n.owner,s=0;s<n.units.length;s++){var o=n.units[s].length;if(s!=i-1&&s<n.units.length)for(var c=0;c<o;c++){var l=s+1,u=t;"infantry"==n.units[s][c].type&&(e.assignHitsToGroundForces(u,l,a,r,1),e.eliminateDestroyedUnitsInSector(l,a),e.updateSectorGraphics(a),e.updateLog(e.returnFaction(l)+" loses 1 infantry to Magan Defense Grid"),c=n.units[s].length+3,s=n.units.length+3)}}return 1}}),this.importTech("duranium-armor",{name:"Duranium Armor",color:"red",prereqs:["red","red"],text:"Each round, you may repair any ship which has not taken damage this round",initialize:function(e,t){null==e.game.players_info[t-1].duranium_armor&&(e.game.players_info[t-1].duranium_armor=0,e.game.players_info[t-1].duranium_armor=0)},onNewRound:function(e,t,a){return t==e.game.player&&(e.game.players_info[t-1].duranium_armor=1,e.game.players_info[t-1].may_repair_damaged_ships_after_space_combat=1),1},spaceCombatRoundOver:function(e,t,a,r){var n=e.returnSectorAndPlanets(r);if(e.doesPlayerHaveTech(t,"duranium-armor"))for(var i=0;i<n.s.units[t-1].length;i++){var s=n.s.units[t-1][i];s.last_round_damaged<e.game.state.space_combat_round&&(s.strength=s.max_strength,e.updateLog(e.returnFaction(t)+" repairs ships with Duranium Armor"))}if(e.doesPlayerHaveTech(a,"duranium-armor"))for(var o=0;o<n.s.units[a-1].length;o++){var c=n.s.units[a-1][o];c.last_round_damaged<e.game.state.space_combat_round&&(c.strength=c.max_strength,e.updateLog(e.returnFaction(a)+" repairs ships with Duranium Armor"))}}}),this.importTech("assault-cannon",{name:"Assault Cannon",color:"red",prereqs:["red","red","red"],text:"If you have three or more capital ships in a sector, destroy one opponent capital ship",initialize:function(e,t){null==e.game.players_info[t-1].assault_cannont&&(e.game.players_info[t-1].assault_cannont=0)},onNewRound:function(e,t,a){return t==e.game.player&&(e.game.players_info[t-1].assault_cannont=1,e.game.players_info[t-1].may_assign_first_round_combat_shot=1),1},spaceCombatTriggers:function(e,t,a){e.game.state.activated_sector=a;for(var r=e.returnSectorAndPlanets(a),n=0,i=0;i<r.s.units.length;i++)if(i+1!=t&&e.doesPlayerHaveTech(i+1,"assault-cannon")){for(var s=0;s<r.s.units[i].length;s++){var o=r.s.units[i][s];"destroyer"==o.type&&n++,"carrier"==o.type&&n++,"cruiser"==o.type&&n++,"dreadnaught"==o.type&&n++,"flagship"==o.type&&n++,"warsun"==o.type&&n++}if(n>=3)for(var c=0;c<r.s.units[t-1].length;c++){var l=r.s.units[t-1][c];if("destroyer"==l.type)return 1;if("carrier"==l.type)return 1;if("cruiser"==l.type)return 1;if("dreadnaught"==l.type)return 1;if("flagship"==l.type)return 1;if("warsun"==l.type)return 1}}return 0},spaceCombatEvent:function(e,t,a){return e.game.players_info[t-1].target_units=["carrier","destroyer","cruiser","dreadnaught","flagship","warsun"],e.game.queue.push("destroy_ships\t"+t+"\t1\t"+e.game.state.activated_sector),e.game.queue.push("ACKNOWLEDGE\t"+e.returnFaction(t)+" must destroy 1 ship from Assault Cannon"),1}}),this.importTech("spacedock-ii",{name:"SpaceDock II",unit:1,prereqs:["yellow","yellow"],text:"May produce 4 more units than its planet resource value",initialize:function(e,t){if(1==e.game.players_info[t-1].spacedock_ii)return 1;e.game.players_info[t-1].spacedock_ii=0},gainTechnology:function(e,t,a){"spacedock-ii"==a&&(e.game.players_info[t-1].spacedock_ii=1)},upgradeUnit:function(e,t,a){return"spacedock"===a.type&&e.doesPlayerHaveTech(t,"spacedock-ii")?e.returnUnit("spacedock-ii",t,0):a}}),this.importTech("pds-ii",{name:"PDS II",unit:1,prereqs:["red","yellow"],text:"Hits on 5, able to fire into adjacent sectors",initialize:function(e,t){if(1==e.game.players_info[t-1].pds_ii)return 1;e.game.players_info[t-1].pds_ii=0},gainTechnology:function(e,t,a){"pds-ii"==a&&(e.game.players_info[t-1].pds_ii=1)},upgradeUnit:function(e,t,a){return"pds"===a.type&&e.doesPlayerHaveTech(t,"pds-ii")?e.returnUnit("pds-ii",t,0):a}}),this.importTech("carrier-ii",{name:"Carrier II",unit:1,prereqs:["blue","blue"],text:"Moves 2 hexes and carries 6 infantry or fighters",initialize:function(e,t){if(1==e.game.players_info[t-1].carrier_ii)return 1;e.game.players_info[t-1].carrier_ii=0},gainTechnology:function(e,t,a){"carrier-ii"==a&&(e.game.players_info[t-1].carrier_ii=1)},upgradeUnit:function(e,t,a){return"carrier"===a.type&&e.doesPlayerHaveTech(t,"carrier-ii")?(console.log("returning upgraded carrier..."),e.returnUnit("carrier-ii",t,0)):a}}),this.importTech("infantry-ii",{name:"Infantry II",unit:1,prereqs:["green","green"],text:"Chance of medical rescue and return to homeworld after unit is destroyed",initialize:function(e,t){if(1==e.game.players_info[t-1].infantry_ii)return 1;e.game.players_info[t-1].infantry_ii=0},gainTechnology:function(e,t,a){"infantry-ii"==a&&(e.game.players_info[t-1].infantry_ii=1)},upgradeUnit:function(e,t,a){return"infantry"==a.type&&e.doesPlayerHaveTech(t,"infantry-ii")?e.returnUnit("infantry-ii",t,0):a}}),this.importTech("destroyer-ii",{name:"Destroyer II",unit:1,prereqs:["red","red"],text:"Hits on 8 and has stronger anti-fighter barrage (6x3)",initialize:function(e,t){if(1==e.game.players_info[t-1].destroyer_ii)return 1;e.game.players_info[t-1].destroyer_ii=0},gainTechnology:function(e,t,a){"destroyer-ii"==a&&(e.game.players_info[t-1].destroyer_ii=1)},upgradeUnit:function(e,t,a){return"destroyer"==a.type&&e.doesPlayerHaveTech(t,"destroyer-ii")?e.returnUnit("destroyer-ii",t,0):a}}),this.importTech("fighter-ii",{name:"Fighter II",unit:1,prereqs:["green","blue"],text:"Hits on 8 and moves 2 hexes. May survive without carriers or support",initialize:function(e,t){if(1==e.game.players_info[t-1].fighter_ii)return 1;e.game.players_info[t-1].fighter_ii=0},gainTechnology:function(e,t,a){"fighter-ii"==a&&(e.game.players_info[t-1].fighter_ii=1)},upgradeUnit:function(e,t,a){return"fighter"==a.type&&e.doesPlayerHaveTech(t,"fighter-ii")?e.returnUnit("fighter-ii",t,0):a}}),this.importTech("cruiser-ii",{name:"Cruiser II",unit:1,prereqs:["green","yellow","red"],text:"Hits on 6, moves 3 sectors and can carry 1 fighter or infantry",initialize:function(e,t){if(1==e.game.players_info[t-1].cruiser_ii)return 1;e.game.players_info[t-1].cruiser_ii=0},gainTechnology:function(e,t,a){"cruiser-ii"==a&&(e.game.players_info[t-1].cruiser_ii=1)},upgradeUnit:function(e,t,a){return"cruiser"==a.type&&e.doesPlayerHaveTech(t,"cruiser-ii")?e.returnUnit("cruiser-ii",t,0):a}}),this.importTech("dreadnaught-ii",{name:"Dreadnaught II",unit:1,prereqs:["blue","blue","yellow"],text:"Hits on 5, moves 2 sectors and can carry 1 unit. 2 hits to destroy",initialize:function(e,t){if(1==e.game.players_info[t-1].dreadnaught_ii)return 1;e.game.players_info[t-1].dreadnaught_ii=0},gainTechnology:function(e,t,a){"dreadnaught-ii"==a&&(e.game.players_info[t-1].dreadnaught_ii=1)},upgradeUnit:function(e,t,a){return"dreadnaught"==a.type&&e.doesPlayerHaveTech(t,"dreadnaught-ii")?e.returnUnit("dreadnaught-ii",t,0):a}}),this.importTech("warsun",{name:"Warsun",unit:1,prereqs:["red","red","red","yellow"],text:"The Death Star: terrifying in combat, but fragile without supporting fleet",initialize:function(e,t){null==e.game.players_info[t-1].may_produce_warsuns&&(e.game.players_info[t-1].may_produce_warsuns=0)},gainTechnology:function(e,t,a){"warsun"==a&&(e.game.players_info[t-1].may_produce_warsuns=1)}}),this.importTech("sarween-tools",{name:"Sarween Tools",color:"yellow",text:"Reduce cost of units produced by -1 when using production",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].sarween_tools&&(e.game.players_info[t-1].sarween_tools=0)},gainTechnology:function(e,t,a){"sarween-tools"==a&&(e.game.players_info[t-1].sarween_tools=1,e.game.players_info[t-1].production_bonus=1)}}),this.importTech("graviton-laser-system",{name:"Graviton Laser System",color:"yellow",text:"Exhaust card once per round to target capital ships with PDS fire",prereqs:["yellow"],initialize:function(e,t){null==e.game.players_info[t-1].graviton_laser_system&&(e.game.players_info[t-1].graviton_laser_system=0,e.game.players_info[t-1].graviton_laser_system_exhausted=0,e.game.players_info[t-1].graviton_laser_system_active=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].graviton_laser_system&&(e.game.players_info[t-1].graviton_laser_system_exhausted=0,e.game.players_info[t-1].graviton_laser_system_active=0)},gainTechnology:function(e,t,a){"graviton-laser-system"==a&&(e.game.players_info[t-1].graviton_laser_system=1,e.game.players_info[t-1].graviton_laser_system_exhausted=0)},modifyTargets:function(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return"pds"==n&&1==e.game.players_info[a-1].graviton_laser_system_active&&(i.includes("warsun")||i.push("warsun"),i.includes("flagship")||i.push("flagship"),i.includes("dreadnaught")||i.push("dreadnaught"),i.includes("cruiser")||i.push("cruiser"),i.includes("carrier")||i.push("carrier"),i.includes("destroyer")||i.push("destroyer")),i},menuOption:function(e,t,a){return"pds"==t?{event:"graviton",html:'<li class="option" id="graviton">use graviton laser targetting</li>'}:{}},menuOptionTriggers:function(e,t,a){return"pds"==t&&0==e.game.players_info[a-1].graviton_laser_system_exhausted&&1==e.game.players_info[a-1].graviton_laser_system?1:0},menuOptionActivated:function(e,t,a){return"pds"==t&&(e.updateLog(e.returnFaction(a)+" exhausts Graviton Laser System"),e.game.players_info[a-1].graviton_laser_system_exhausted=1,e.game.players_info[a-1].graviton_laser_system_active=1,e.addMove("setvar\tplayers\t"+a+"\tgraviton_laser_system_exhausted\tint\t1"),e.addMove("setvar\tplayers\t"+a+"\tgraviton_laser_system_active\tint\t1"),e.addMove("NOTIFY\t"+e.returnFactionNickname(a)+" activates Graviton Laser System")),0}}),this.importTech("transit-diodes",{name:"Transit Diodes",color:"yellow",prereqs:["yellow","yellow"],text:"Exhaust to reallocate 4 infantry between planets your control",initialize:function(e,t){null==e.game.players_info[t-1].transit_diodes&&(e.game.players_info[t-1].transit_diodes=0,e.game.players_info[t-1].transit_diodes_exhausted=0)},gainTechnology:function(e,t,a){"transit-diodes"==a&&(e.game.players_info[t-1].transit_diodes=1,e.game.players_info[t-1].transit_diodes_exhausted=0)},menuOption:function(e,t,a){return"main"==t?{event:"transitdiodes",html:'<li class="option" id="transitdiodes">use transit diodes</li>'}:{}},menuOptionTriggers:function(e,t,a){return"main"==t&&e.doesPlayerHaveTech(a,"transit-diodes")?1:0},menuOptionActivated:function(e,t,a){return"main"==t&&e.playerRemoveInfantryFromPlanets(a,4,(function(t){e.playerAddInfantryToPlanets(a,t,(function(){e.addMove("setvar\tplayers\t"+a+"\ttransit_diodes_exhausted\tint\t1"),e.addMove("NOTIFY\t"+a+" activates transit diodes"),e.addMove("NOTIFY\t"+e.returnFaction(a)+" has moved infantry"),e.endTurn()}))})),0}}),this.importTech("integrated-economy",{name:"Integrated Economy",color:"yellow",prereqs:["yellow","yellow","yellow"],text:"You may produce on a planet after capturing it, up to cost (resource) limit of planet.",initialize:function(e,t){null==e.game.players_info[t-1].integrated_economy&&(e.game.players_info[t-1].integrated_economy=0,e.game.players_info[t-1].integrated_economy_planet_invaded=0,e.game.players_info[t-1].integrated_economy_planet_invaded_resources=0)},gainTechnology:function(e,t,a){"integrated-economy"==a&&(e.game.players_info[t-1].integrated_economy=1,e.game.players_info[t-1].integrated_economy_planet_invaded=0,e.game.players_info[t-1].integrated_economy_planet_invaded_resources=0)},gainPlanet:function(e,t,a){e.doesPlayerHaveTech(t,"integrated-economy")&&(e.game.players_info[t-1].may_player_produce_without_spacedock=1,e.game.players_info[t-1].may_player_produce_without_spacedock_production_limit=0,console.log("P: "+a),e.game.players_info[t-1].may_player_produce_without_spacedock_cost_limit+=e.game.planets[a].resources)}}),this.importUnit("infantry",{name:"Infantry",type:"infantry",cost:.5,combat:8,strength:1,space:0,ground:1,can_be_stored:1,capacity_required:1,description:"Infantry invade planets, but cannot move between sectors without being carried on carriers or other ships with capacity."}),this.importUnit("fighter",{name:"Fighter",type:"fighter",cost:.5,move:1,combat:9,strength:1,can_be_stored:1,capacity_required:1,description:"Fighters are disposable ships deployed to protect capital ships. They must be transported on carriers or other ships with capacity."}),this.importUnit("pds",{name:"PDS",type:"pds",range:0,cost:5,combat:6,description:"PDS units fire on other ships that invade their sectors. They can also fire on foreign infantry that invade a planet."}),this.importUnit("spacedock",{name:"Spacedock",type:"spacedock",capacity:3,production:2,combat:0,range:0,description:"Spacedocks are used to produce infantry and other ships. They cannot produce ships in space if an opponent fighter is in the sector"}),this.importUnit("carrier",{name:"Carrier",type:"carrier",cost:3,move:1,combat:9,capacity:4,strength:1,description:"The Carrier is a troop and fighter transport ship. Load it with infantry and fighters and use it to conquer other sectors."}),this.importUnit("destroyer",{name:"Destroyer",type:"destroyer",cost:1,move:2,combat:9,strength:1,anti_fighter_barrage:2,anti_fighter_barrage_combat:9,description:"The Destroyer is an inexpensive but mobile ship designed to counter fighter swarms - its ANTI-FIGHTER BARRAGE (2 rolls hitting on 9 or higher) happens at the very start of space-combat"}),this.importUnit("cruiser",{name:"Cruiser",type:"cruiser",cost:2,move:2,combat:7,strength:1,description:"The Cruiser is a more powerful ship with a reasonable chance of landing hits in battle."}),this.importUnit("dreadnaught",{name:"Dreadnaught",type:"dreadnaught",cost:4,move:1,capacity:1,combat:6,strength:2,bombardment_rolls:1,bombardment_combat:5,description:"The Dreadnaught is a powerful combat ship able to SUSTAIN DAMAGE once before being destroyed in combat"}),this.importUnit("flagship",{name:"Flagship",type:"flagship",cost:8,move:1,capacity:1,combat:7,strength:2,description:"The Flagship is the pride of the fleet -- each faction's flagship confers specific abilities. See your factino sheet for more details"}),this.importUnit("warsun",{name:"War Sun",type:"warsun",cost:12,shots:3,move:1,capacity:3,combat:3,strength:2,bombardment_rolls:3,bombardment_combat:3,description:"The War Sun is death packaged in a mass of planet-destroying turbinium. Rumours of their lethality abound, as few have fought one and lived to tell the tale."}),this.importUnit("infantry-ii",{name:"Infantry II",type:"infantry",cost:.5,combat:7,strength:1,space:0,ground:1,can_be_stored:1,capacity_required:1,extension:1,description:"Infantry II are stronger and more resilient but cannot typically be moved between sectors without moving on carriers or other ships with capacity."}),this.importUnit("fighter-ii",{name:"Fighter II",type:"fighter",cost:.5,move:2,combat:8,strength:1,can_be_stored:1,capacity_required:1,extension:1,description:"Fighter II can move without being transported by other ships. Any ships inexcess of your carrying capacity could against your fleet supply."}),this.importUnit("spacedock-ii",{name:"Spacedock II",type:"spacedock",capacity:3,production:4,extension:1,description:"Spacedock II can produce more units whenever they produce."}),this.importUnit("pds-ii",{name:"PDS II",type:"pds",cost:5,combat:5,range:1,extension:1,description:"PDS II has a slightly more accurate targeting mechanism and can fire into adjacent sectors."}),this.importUnit("carrier-ii",{name:"Carrier II",type:"carrier",cost:3,move:2,combat:9,capacity:6,strength:1,extension:1,description:"Carrier II has upgraded ship capacity and is slightly more robust in combat"}),this.importUnit("destroyer-ii",{name:"Destroyer II",type:"destroyer",cost:1,move:2,combat:8,strength:1,extension:1,anti_fighter_barrage:3,anti_fighter_barrage_combat:6,description:"Destroyer II has improved ANTI-FIGHTER-BARRAGE (3x6) and is slightly more effective in general combat"}),this.importUnit("cruiser-ii",{name:"Cruiser II",type:"cruiser",cost:2,move:2,combat:7,strength:1,extension:1,description:"Cruiser II has extended range and the ability to support a small phalanx of ground troops"}),this.importUnit("dreadnaught-ii",{name:"Dreadnaught II",type:"dreadnaught",cost:4,move:2,capacity:1,combat:5,strength:2,extension:1,description:"Dreadnaught II has improved movement, can support a small ground team and is slightly more effective in space combat"}),this.importPromissary("ceasefire",{name:"Ceasefire Promissary",faction:-1,text:"When the owner activates a sector that contains one of your units, you may trigger this to prevent them moving in units.",activateSystemTriggers:function(e,t,a,r){var n=e.game.players_info[t-1].faction+"-ceasefire";return e.doesPlayerHavePromissary(a,n)&&t!=a&&e.doesPlayerHaveUnitsInSector(a,r)?1:0},activateSystemEvent:function(e,t,a,r){if(e.game.player!=a)return e.updateStatus(e.returnFaction(a)+" is deciding whether to use Ceasefire"),0;var n='<div clss="sf-readable">Permit '+e.returnFaction(t)+" to activate sector or use ceasefire? </div><ul>";n+='<li class="option" id="activate">use ceasefire</li>',n+='<li class="option" id="nothing">do nothing</li>',n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var r=$(this).attr("id");return"nothing"===r?(e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" does not use Ceasefire"),e.endTurn(),0):"activate"===r?(e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" uses Ceasefire to end "+e.returnFaction(t)+" turn"),e.addMove("ceasefire\t"+t+"\t"+a),e.endTurn(),0):0}))},handleGameLoop:function(e,t,a){if("ceasefire"==a[0]){var r=parseInt(a[1]);a[2],e.game.queue.splice(t,1);for(var n=0,i=e.game.queue.length-1;i>=0;i--)0!=e.game.queue[i].indexOf("play")&&0==n?e.game.queue.splice(i,1):0==n&&(n=1,e.game.queue.push("resolve\tplay"),e.game.queue.push("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.game.queue.push("player_end_turn\t"+r));return 1}return 1}}),this.importPromissary("trade",{name:"Trade Promissary",faction:-1,text:"When the owner replenishes commodities, this promissary triggers and you gain their commodities as trade goods",gainCommodities:function(e,t,a){for(var r=e.game.players_info[t-1].faction+"-trade",n=e.returnPromissaryPlayer(r),i=0;i<e.game.players_info.length;i++)if(i+1!=t&&e.doesPlayerHavePromissary(i+1,r))return e.game.players_info[i].goods+=a,e.givePromissary(t,i+1,r),e.updateLog(e.returnFaction(i+1)+" redeems their Trade Promissary from "+e.returnFaction(n)),0;return a}}),this.importPromissary("political",{name:"Political Promissary",faction:-1,text:"The owner of this card cannot participate in resolving this agenda",menuOption:function(e,t,a){var r={};return"pre_agenda"==t&&(r.event="political-promissary",r.html='<li class="option" id="political-promissary">Political Promissary</li>'),r},menuOptionTriggers:function(e,t,a){if("pre_agenda"!=t)return 0;for(var r=e.returnPlayablePromissaryArray(a,"political"),n=0;n<r.length;n++)if(e.game.players_info[e.game.player-1].promissary_notes.includes(r[n]))return 1;return 0},menuOptionActivated:function(e,t,a){if(e.game.player==a){for(var r='<div class="sf-readable">Select a Specific Promissary: </div><ul>',n=e.returnPlayablePromissaryArray(a,"political"),i=0;i<n.length;i++){var s=n[i].split("-"),o=e.returnPromissaryPlayer(n[i]);r+='<li class="option" id="'.concat(i,'">').concat(e.returnFactionName(o)," - ").concat(e.promissary_notes[s[1]].name,"</li>")}r+="</ul>",e.updateStatus(r),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id"),a=n[parseInt(t)],r=e.returnPromissaryPlayer(n[parseInt(t)]);return e.addMove("rider\t"+r+"\tpolitical-promissary\t-1"),e.addMove("give\t"+e.game.player+"\t"+a+"\tpromissary\t"+a),e.endTurn(),0}))}return 0}}),this.importPromissary("throne",{name:"Support for the Throne",faction:-1,text:"Gain 1 VP when you receive this card. Lose this card and 1 VP if the owner of this card is eliminated or you activate a system containing any of their units.",gainPromissary:function(e,t,a){a.indexOf("throne")>-1&&e.returnPromissaryPlayer(a)!=t&&(e.game.players_info[t-1][a]=1,e.game.players_info[t-1].vp++,e.updateLog(e.returnFaction(t)+" gains 1 VP from Support for the Throne"),e.updateLeaderboard())},losePromissary:function(e,t,a){a.indexOf("throne")>-1&&e.returnPromissaryPlayer(a)!=t&&(e.game.players_info[t-1][a]=1,e.game.players_info[t-1].vp--,e.updateLog(e.returnFaction(t)+" loses 1 VP from Support for the Throne"),e.updateLeaderboard())},activateSystemTriggers:function(e,t,a,r){e.returnSectorAndPlanets(r);for(var n=0;n<e.game.players_info.length;n++)if(n+1!=t&&e.doesPlayerHaveUnitsInSector(n+1,r)){var i=e.game.players_info[a-1].id+"-throne";e.doesPlayerHavePromissary(t,i)&&(e.game.players_info[t-1][i]=0,e.updateLog(e.returnFaction(t)+" loses 1 VP from Support for the Throne"),e.game.players_info[t-1].vp--,e.givePromissary(t,n+1,details))}return 0}}),this.importFaction("faction2",{id:"faction2",name:"Universities of Jol Nar",nickname:"Jol Nar",homeworld:"sector50",space_units:["carrier","carrier","dreadnaught","fighter"],ground_units:["infantry","infantry","pds","spacedock"],tech:["sarween-tools","neural-motivator","plasma-scoring","antimass-deflectors","faction2-analytic","faction2-brilliant","faction2-fragile","faction2-flagship"],background:"faction2.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Universities of Jol Nar, a physically weak faction which excells at science and technology. Survive long enough to amass enough protective technology and you can be a contender for the Imperial Throne. Good luck!</div>'}),this.importTech("faction2-flagship",{name:"XXCha Flagship",faction:"faction2",type:"ability",text:"Extra hit on every roll of 9 or 10 before modifications",modifyUnitHits:function(e,t,a,r,n,i,s,o){return e.doesPlayerHaveTech(r,"faction2-flagship")&&i.owner==r&&"flagship"==i.type&&s>8?(e.updateLog("Jol Nar flagship scores an additional hit through flagshup ability"),++o):o}}),this.importTech("faction2-analytic",{name:"Analytic",faction:"faction2",type:"ability",text:"Ignore 1 tech prerequisite on non-unit upgrades",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction2-analytic")&&(e.game.players_info[t-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=1)}}),this.importTech("faction2-fragile",{name:"Fragile",faction:"faction2",type:"ability",text:"-1 on all combat rolls",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction2-fragile")&&(e.game.players_info[t-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=1)},modifyCombatRoll:function(e,t,a,r,n,i){return"space"!=n&&"ground"!=n||e.doesPlayerHaveTech(t,"faction2-fragile")&&(e.updateLog("Jol Nar combat rolls -1 due to fragility"),(i-=1)<1&&(i=1)),i}}),this.importTech("faction2-brilliant",{name:"Brilliant",faction:"faction2",type:"ability",text:"Tech primary is played when token spent to execute secondary",initialize:function(e,t){null==e.faction2_brilliant_swapped&&(e.faction2_brilliant_swapped=1,e.brilliant_original_event=e.strategy_cards.technology.strategySecondaryEvent,e.strategy_cards.technology.strategySecondaryEvent=function(e,t,a){e.doesPlayerHaveTech(t,"faction2-brilliant")&&t!=a&&e.game.player==t?(e.game.players_info[t-1].cost_of_technology_secondary=6,e.playerAcknowledgeNotice("The Tech strategy card has been played. You may expend a strategy token to research a technology. You can then purchase a second for 6 resources:",(function(){e.updateStatus('<p>Technology has been played. Do you wish to spend a strategy token to research a technology? </p><ul><li class="option" id="yes">Yes</li><li class="option" id="no">No</li></ul>'),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){if(e.unlockInterface(),"no"===$(this).attr("id"))return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0;e.playerResearchTechnology((function(a){e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("purchase\t"+t+"\ttechnology\t"+a),e.game.players_info[e.game.player-1].tech.push(a);var r=6,n="<p>Do you wish to spend 6 resources to research a second technology? </p><ul>";1!=e.game.players_info[t-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources||(n="<p>Do you wish to research a second technology for free?",r=0),e.returnAvailableResources(e.game.player)>=r&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var a=$(this).attr("id");return"yes"===a&&(e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources=0,e.playerSelectResources(r,(function(a){if(1!=a)return e.endTurn(),0;e.playerResearchTechnology((function(a){e.addMove("purchase\t"+t+"\ttechnology\t"+a),e.endTurn()}))}))),"no"===a?(e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}))}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}))):e.brilliant_original_event(e,t,a)})}}),this.importTech("faction2-eres-siphons",{name:"E-Res Siphons",faction:"faction2",type:"special",color:"yellow",prereqs:["yellow","yellow"],text:"Gain 4 trade goods whenever a system is activated containing your ships",initialize:function(e,t){null==e.game.players_info[t-1].eres_siphons&&(e.game.players_info[t-1].eres_siphons=0)},gainTechnology:function(e,t,a){"faction2-eres-siphons"==a&&(e.game.players_info[t-1].eres_siphons=1)},activateSystemTriggers:function(e,t,a,r){return 1==e.game.players_info[a-1].eres_siphons&&t!=a&&1==e.doesSectorContainPlayerShips(a,r)?1:0},postSystemActivation:function(e,t,a,r){e.game.players_info[a-1].goods+=4}}),this.importTech("faction2-deep-space-conduits",{name:"Deep Space Conduits",faction:"faction2",type:"special",color:"blue",prereqs:["blue","blue"],text:"Activate card to make activated system 1 hop away from all other systems with Jol Nar ships",initialize:function(e,t){null==e.game.players_info[t-1].deep_space_conduits&&(e.game.players_info[t-1].deep_space_conduits=0,e.game.players_info[t-1].deep_space_conduits_exhausted=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].deep_space_conduits&&(e.game.players_info[t-1].deep_space_conduits_exhausted=0)},gainTechnology:function(e,t,a){"faction2-deep-space-conduits"==a&&(e.game.players_info[t-1].deep_space_conduits=1,e.game.players_info[t-1].deep_space_conduits_exhausted=0)},activateSystemTriggers:function(e,t,a,r){return a==e.game.player&&t==a&&1==e.game.players_info[t-1].deep_space_conduits&&0==e.game.players_info[t-1].deep_space_conduits_exhausted&&e.doesSectorContainPlayerUnits(t,r)?1:0},activateSystemEvent:function(e,t,a,r){e.updateStatus('Do you wish to activate Deep Space Conduits: <ul><li class="textchoice" id="yes">activate</li><li class="textchoice" id="no">skip</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var n=$(this).attr("id");if("yes"==n){var i=e.returnSectorsWithPlayerUnits(t);e.game.players_info[t-1].deep_space_conduits_exhausted=1,e.addMove("setvar\tplayers\t"+a+"\tdeep_space_conduits_exhausted\tint\t1");for(var s=0;s<i.length;s++)e.addMove("adjacency\ttemporary\t"+i[s]+"\t"+r);e.endTurn()}"no"==n&&(e.updateStatus(),e.endTurn())}))}}),this.importFaction("faction7",{id:"faction7",name:"Embers of Muaat",nickname:"Muaat",homeworld:"sector76",space_units:["warsun","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","spacedock"],tech:["plasma-scoring","faction7-star-forge","faction7-gashlai-physiology","faction7-advanced-warsun-i","faction7-flagship"],background:"faction7.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Embers of Muaat, a faction which forges its instruments of war in the heat of lava-powered furnaces and whose technical research expands to conquering the heat of the very starts themselves. Goodl luck!</div>'}),this.importTech("faction7-star-forge",{name:"Star Forge",faction:"faction7",type:"ability",text:"Spend 1 strategy token to place 2 fighters or a destroy in sector with your warsun",initialize:function(e,t){null==e.game.players_info[t-1].star_forge&&(e.game.players_info[t-1].star_forge=0)},gainTechnology:function(e,t,a){"faction7-star-forge"==a&&(e.game.players_info[t-1].star_forge=1)},menuOption:function(e,t,a){var r={};return"main"===t&&(r.event="starforge",r.html='<li class="option" id="starforge">star forge</li>'),r},menuOptionTriggers:function(e,t,a){return e.doesPlayerHaveTech(a,"faction7-star-forge")&&"main"===t?1:0},menuOptionActivated:function(e,t,a){return e.game.player==a?(e.playerSelectSectorWithFilter("Star Forge spends 1 strategy token to drop 2 fighters or 1 destroyer in a sector containing your War Sun: ",(function(t){return e.doesSectorContainPlayerUnit(e.game.player,t,"warsun")}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\tStar Forge adds destroyer to "+t),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn(),0}),(function(){e.playerTurn()})),0):0}}),this.importTech("faction7-gashlai-physiology",{name:"Gashlai Physiology",faction:"faction7",type:"ability",text:"Player may move through supernovas",initialize:function(e,t){null==e.game.players_info[t-1].gashlai_physiology&&(e.game.players_info[t-1].gashlai_physiology=0)},gainTechnology:function(e,t,a){"faction7-gashlai-physiology"==a&&(e.game.players_info[t-1].gashlai_physiology=1,e.game.players_info[t-1].fly_through_supernovas=1)}}),this.importTech("faction7-magmus-reactor",{name:"Magmus Reactor",faction:"faction7",type:"special",text:"Player may move into supernovas. Gain 1 trade good producing with Warsun or adjacent to Supernova",initialize:function(e,t){null==e.game.players_info[t-1].magmus_reactor&&(e.game.players_info[t-1].magmus_reactor=0)},gainTechnology:function(e,t,a){"faction7-magmus-reactor"==a&&(e.game.players_info[t-1].magmus_reactor=1,e.game.players_info[t-1].move_into_supernovas=1)},postProduction:function(e,t,a,r){if(1==e.game.players_info[t-1].magmus_reactor){var n=e.returnAdjacentSectors(a),i=0;if(e.doesSectorContainPlayerUnit(t,a,"warsun")&&(i=1),0==i)for(var s=0;s<n.length;s++)4==e.returnSectorAndPlanets(n[s]).s.type&&(i=1);1==i&&(e.updateLog("Muatt gains 1 trade good from Magmus Reactor - producing in a sector with a Warsun or adjacent to a Supernova"),e.game.players_info[t-1].goods+=1,e.updateTokenDisplay(),e.displayFactionDashboard())}}}),this.importTech("faction7-flagship",{name:"Muaat Flagship",faction:"faction7",type:"ability",text:"May spend 1 strategy token to place a cruiser in your flagship system"}),this.importTech("faction7-advanced-warsun-i",{name:"Advanced Warsun I",faction:"faction7",replaces:"warsun",unit:1,type:"special",text:"A more dangerous and mobile warsun",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].faction7_advanced_warsun_i&&(e.game.players_info[t-1].faction7_advanced_warsun_i=0)},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction7_advanced_warsun_i=1,e.game.players_info[t-1].may_produce_warsuns=1},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction7_advanced_warsun_i&&"warsun"==a.type&&(a.cost=12,a.combat=3,a.move=1,a.capacity=6,a.bombardment_rolls=3,a.bombardment_combat=3),a}}),this.importTech("faction7-advanced-warsun-ii",{name:"Advanced Warsun II",faction:"faction7",replaces:"warsun",unit:1,type:"special",text:"A more dangerous and mobile warsun",prereqs:["red","red","red","yellow"],initialize:function(e,t){null==e.game.players_info[t-1].faction7_advanced_warsun_ii&&(e.game.players_info[t-1].faction7_advanced_warsun_ii=0)},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction7_advanced_warsun_ii=1},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction7_advanced_warsun_ii&&"warsun"==a.type&&(a.cost=10,a.combat=3,a.move=3,a.capacity=6,a.bombardment_rolls=3,a.bombardment_combat=3),a}}),this.importFaction("faction4",{id:"faction4",name:"Sardakk N'Orr",nickname:"Sardakk",homeworld:"sector53",space_units:["carrier","carrier","cruiser"],ground_units:["infantry","infantry","infantry","infantry","infantry","spacedock"],tech:["faction4-unrelenting","faction4-exotrireme-i","faction4-flagship"],background:"faction4.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Sardaak N\'Orr, an overpowered faction known for its raw strength in combat. Your brutal power makes you an intimidating faction on the board. Good luck!</div>'}),this.importTech("faction4-unrelenting",{name:"Unrelenting",faction:"faction4",type:"ability",text:"+1 on all combat rolls",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction4-unrelenting")&&(e.game.players_info[t-1].faction4_unrelenting=1)},modifyCombatRoll:function(e,t,a,r,n,i){return"space"!=n&&"ground"!=n||e.doesPlayerHaveTech(t,"faction4-unrelenting")&&(e.updateLog("Sardakk combat rolls +1 due to Sardakk"),(i+=1)>10&&(i=10)),i}}),this.importTech("faction4-flagship",{name:"Sardakk Flagship",faction:"faction4",type:"ability",text:"+1 on all combat rolls for ships in same sector",modifyCombatRoll:function(e,t,a,r,n,i){return"space"==n&&e.doesSectorContainPlayerUnit(t,e.game.state.activated_sector,"flagship")&&(e.updateLog("Sardakk Flagship adds +1 to dice roll"),(i+=1)>10&&(i=10)),i}}),this.importTech("faction4-exotrireme-i",{name:"Exotrireme I",faction:"faction4",replaces:"dreadnaught",unit:1,type:"special",text:"A more powerful dreadnaught",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].faction4_advanced_dreadnaught_i&&(e.game.players_info[t-1].faction4_advanced_dreadnaught_i=0)},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction4_advanced_dreadnaught_i=1},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction4_advanced_dreadnaught_i&&"dreadnaught"==a.type&&(a.cost=4,a.combat=5,a.move=1,a.capacity=1,a.strength=2,a.bombardment_rolls=2,a.bombardment_combat=4,a.description="The Exotrireme I is a more powerful dreadnaught not vulnerable to Direct Hit cards"),a}}),this.importTech("faction4-exotrireme-ii",{name:"Exotrireme II",faction:"faction4",replaces:"dreadnaught",unit:1,type:"special",prereqs:["blue","blue","yellow"],text:"A much more powerful dreadnaught",initialize:function(e,t){null==e.game.players_info[t-1].faction4_advanced_dreadnaught_ii&&(e.game.players_info[t-1].faction4_advanced_dreadnaught_ii=0)},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction4_advanced_dreadnaught_ii=1,e.game.players_info[t-1].faction4_advanced_dreadnaught_i=0},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction4_advanced_dreadnaught_ii&&"dreadnaught"==a.type&&(a.cost=4,a.combat=5,a.move=2,a.capacity=1,a.strength=2,a.bombardment_rolls=2,a.bombardment_combat=4,a.description="The Exotrireme II is a more powerful dreadnaught not vulnerable to Direct Hit cards. It may be destroyed after a round of space combat to destroy up to two opponent ships."),a},spaceCombatRoundEnd:function(e,t,a,r){return e.doesPlayerHaveTech(t,"faction4-exotrireme-ii")&&e.doesSectorContainPlayerUnit(t,r,"dreadnaught")&&e.addMove("faction4_exotrireme_ii_sacrifice\t"+t+"\t"+r),e.doesPlayerHaveTech(a,"faction4-exotrireme-ii")&&e.doesSectorContainPlayerUnit(a,r,"dreadnaught")&&e.addMove("faction4_exotrireme_ii_sacrifice\t"+a+"\t"+r),1},handleGameLoop:function(e,t,a){if("faction4_exotrireme_ii_sacrifice"==a[0]){var r=parseInt(a[1]),n=e.returnSectorAndPlanets(a[2]),i=e.returnOpponentInSector(r,a[2]);if(r==e.game.player){if(-1==i)return e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("NOTIFY\tNo target ships for Sardakk Exotrireme II faction ability"),e.endTurn(),0;for(var s=0,o=0;o<n.s.units[i-1].length;o++)n.s.units[i-1][o].strength>0&&(s=1);if(0==s)return e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("NOTIFY\tNo target ships for Sardakk Exotrireme II action ability"),e.endTurn(),0;html='<div class="sf-readable">Do you wish to sacrifice a Dreadnaught to destroy up to 2 opponent ships?</div><ul>';for(var c=0;c<n.s.units[e.game.player-1].length;c++)"dreadnaught"==n.s.units[e.game.player-1][c].type&&(html+='<li class="option" id="'.concat(c,'">sacrifice ').concat(e.returnShipInformation(n.s.units[e.game.player-1][c]),"</li>"));html+='<li class="option" id="no">do not sacrifice</li>',html+="</ul>",e.updateStatus(html),$(".option").on("click",(function(){var t=$(this).attr("id");return"no"===t?(e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.endTurn(),0):(e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("faction4_exotrireme_ii_picktwo\t"+e.game.player+"\t"+a[2]),e.addMove("NOTIFY\tSardakk sacrifies Exotritreme II to destroy opponent ships"),e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tspace\t"+a[2]+"\t0\t"+t+"\t1"),e.endTurn(),0)}))}return 0}if("faction4_exotrireme_ii_picktwo"==a[0]){var l=parseInt(a[1]);return e.returnSectorAndPlanets(a[2]),l==e.game.player?(e.addMove("resolve\tfaction4_exotrireme_ii_picktwo"),e.playerDestroyOpponentShips(l,2,a[2])):e.updateStatus("Exotrireme II engaging in suicide assault"),0}}}),this.importTech("faction4-particle-weave",{name:"Particle Weave",faction:"faction4",type:"special",prereqs:["red","red"],text:"Infantry vaporize 1 opponent for each hit received",initialize:function(e,t){null==e.game.players_info[t-1].faction4_particle_weave&&(e.game.players_info[t-1].faction4_particle_weave=0,e.game.players_info[t-1].faction4_particle_weave_opponent=0,e.game.players_info[t-1].faction4_particle_weave_my_forces=0)},gainTechnology:function(e,t,a){"faction4-particle-weave"==a&&(e.game.players_info[t-1].faction4_particle_weave=1)},groundCombatTriggers:function(e,t,a,r){if(e.doesPlayerHaveTech(t,"faction4-particle-weave")){var n=e.returnSectorAndPlanets(a).p[r];e.game.players_info[t-1].faction4_particle_weave_my_forces=n.units[t-1].length}return 0},groundCombatRoundEnd:function(e,t,a,r,n){if(e.doesPlayerHaveTech(t,"faction4-particle-weave")){var i=e.returnSectorAndPlanets(r),s=i.p[n];if(s.units[t-1].length<e.game.players_info[t-1].faction4_particle_weave_my_forces){e.updateLog("Sardakk Particle Weave vaporizes 1 opponent infantry...");for(var o=0;o<s.units[a-1].length;o++)"infantry"==s.units[a-1][o].type&&(s.units[a-1].splice(o,1),o=s.units[a-1].length+1)}e.saveSystemAndPlanets(i)}if(e.doesPlayerHaveTech(a,"faction4-particle-weave")){var c=e.returnSectorAndPlanets(r),l=c.p[n];if(l.units[a-1].length<e.game.players_info[a-1].faction4_particle_weave_my_forces){e.updateLog("Sardakk Particle Weave vaporizes 1 opponent infantry...");for(var u=0;u<l.units[t-1].length;u++)"infantry"==l.units[t-1][u].type&&(l.units[t-1].splice(u,1),u=l.units[t-1].length+1)}e.saveSystemAndPlanets(c)}return 1}}),this.importFaction("faction1",{id:"faction1",name:"Federation of Sol",nickname:"Sol",homeworld:"sector52",space_units:["carrier","carrier","destroyer","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","infantry","spacedock"],tech:["neural-motivator","antimass-deflectors","faction1-orbital-drop","faction1-versatile","faction1-flagship"],background:"faction1.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Sol Federation. a Terran faction under cellular military government. Your reinforced infantry and tactical flexibility will be important in your fight for the Imperial Throne. Good luck!</div>'}),this.importTech("faction1-flagship",{name:"Sol Flagship",faction:"faction1",text:"Flagship gains 1 infantry when player selects a strategy card",type:"ability",playersChooseStrategyCardsBeforeTriggers:function(e,t){return e.doesPlayerHaveTech(t,"faction1-flagship")&&e.returnPlayerFleet(t).flagship>0?1:0},playersChooseStrategyCardsBeforeEvent:function(e,t){for(var a in e.game.sectors)if(e.doesSectorContainPlayerUnit(t,a,"flagship"))for(var r=e.game.sectors[a],n=0;n<r.units[t-1].length;n++)if("flagship"==r.units[t-1][n].type)return e.loadUnitOntoShip(t,a,n,"infantry"),e.updateLog("Faction Ability: infantry added to Sol Flagship..."),1;return 1}}),this.importTech("faction1-orbital-drop",{name:"Orbital Drop",faction:"faction1",type:"ability",text:"Drop two infantry onto any controlled planet",initialize:function(e,t){null==e.game.players_info[t-1].orbital_drop&&(e.game.players_info[t-1].orbital_drop=0)},gainTechnology:function(e,t,a){"faction1-orbital-drop"==a&&(e.game.players_info[t-1].orbital_drop=1)},menuOption:function(e,t,a){var r={};return"main"===t&&(r.event="orbitaldrop",r.html='<li class="option" id="orbitaldrop">orbital drop</li>'),r},menuOptionTriggers:function(e,t,a){return e.doesPlayerHaveTech(a,"faction1-orbital-drop")&&"main"===t&&e.game.players_info[a-1].strategy_tokens>0&&0==e.game.state.active_player_moved?1:0},menuOptionActivated:function(e,t,a){if(e.game.player==a)return e.playerSelectPlanetWithFilter("Use Orbital Drop to reinforce which planet with two infantry: ",(function(t){return e.game.planets[t].owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" orbital drops 2 infantry onto "+t.name),e.endTurn(),0}),null),0}}),this.importTech("faction1-versatile",{name:"Versatile",faction:"faction1",type:"ability",text:"Gain an extra command token each round",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction1-versatile")&&(e.game.players_info[t-1].new_tokens_per_round=3)}}),this.importTech("faction1-advanced-carrier-ii",{name:"Advanced Carrier II",faction:"faction1",replaces:"carrier-ii",unit:1,type:"special",text:"A more sophisticated carrier",prereqs:["blue","blue"],initialize:function(e,t){null==e.game.players_info[t-1].faction1_advanced_carrier_ii&&(e.game.players_info[t-1].faction1_advanced_carrier_ii=0)},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction1_advanced_carrier_ii=1},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction1_advanced_carrier_ii&&"carrier"==a.type&&(a.cost=3,a.combat=9,a.move=2,a.capacity=8),a}}),this.importTech("faction1-advanced-infantry-ii",{name:"Special Ops II",faction:"faction1",replaces:"infantry-ii",unit:1,type:"special",text:"Battle-hardened infantry",prereqs:["green","green"],initialize:function(e,t){e.game.players_info[t-1].faction1_advanced_infantry_ii=0},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction1_advanced_infantry_ii=1},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction1_advanced_infantry_ii&&"infantry"==a.type&&(a.cost=.5,a.combat=6),a}}),this.importFaction("faction3",{id:"faction3",name:"XXCha Kingdom",nickname:"XXCha",homeworld:"sector51",space_units:["carrier","cruiser","cruiser","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","pds","spacedock"],tech:["graviton-laser-system","faction3-peace-accords","faction3-quash","faction3-flagship","assault-cannon"],background:"faction3.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the XXCha Kingdom, a faction which excels in diplomacy and defensive weaponry. With the proper alliances and political maneuvers your faction you can be a contender for the Imperial Throne. Good luck!</div>'}),this.importTech("faction3-flagship",{name:"XXCha Flagship",faction:"faction3",type:"ability",text:"3 space cannons which target adjacent systems attached to flagship",returnPDSUnitsWithinRange:function(e,t,a,r,n,i){if(!e.doesPlayerHaveTech(t,"faction3-flagship"))return i;if(e.returnPlayerFleet(t).flagship>0)for(var s=e.returnAdjacentSectors(n),o=0;o<s.length;o++)if(e.doesSectorContainPlayerUnit(t,s[o],"flagship")){var c={name:"XXCha Flagship #1"};c.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),c.unit.name="Flagship",c.range=1,c.combat=6,c.owner=t,c.sector=n;var l={name:"XXCha Flagship #2"};l.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),l.unit.name="Flagship",l.range=1,l.combat=6,l.owner=t,l.sector=n;var u={name:"XXCha Flagship #3"};return u.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),u.unit.name="Flagship",u.range=1,u.combat=6,u.owner=t,u.sector=n,i.push(c),i.push(l),i.push(u),i}return i}}),this.importTech("faction3-peace-accords",{name:"Peace Accords",faction:"faction3",type:"ability",text:"Colonize adjacent unprotected planet when diplomacy secondary is played",initialize:function(e,t){null==e.game.players_info[t-1].peace_accords&&(e.game.players_info[t-1].peace_accords=0)},gainTechnology:function(e,t,a){"faction3-peace-accords"==a&&(e.game.players_info[t-1].peace_accords=1)},strategyCardAfterTriggers:function(e,t,a,r){return 1==e.game.players_info[t-1].peace_accords?1:0},strategyCardAfterEvent:function(e,t,a,r){if("diplomacy"==r){for(var n=e.returnPlayerPlanetCards(t),i=[],s=[],o=[],c=0;c<n.length;c++)i.includes(e.game.planets[n[c]].sector)||(i.push(e.game.planets[n[c]].sector),s.push(e.game.planets[n[c]].sector));for(var l=0;l<i.length;l++)for(var u=e.returnAdjacentSectors(i[l]),d=0;d<u.length;d++)s.includes(u[d])||s.push(u[d]);for(var p=0;p<s.length;p++){var h=e.returnSectorAndPlanets(s[p]);if(h.p)for(var f=0;f<h.p.length;f++)h.p[f].owner!=t&&(e.doesPlanetHaveInfantry(h.p[f])||o.push(h.p[f].planet))}return o.length<0?1:1==e.game.players_info[t-1].peace_accords?(e.game.player==t&&e.playerSelectPlanetWithFilter("Select a planet to annex via Peace Accords: ",(function(e){return o.includes(e)?1:0}),(function(t){return e.addMove("annex\t"+e.game.player+"\t"+e.game.planets[t].sector+"\t"+e.game.planets[t].idx),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" annexes "+e.game.planets[t].name+" via Peace Accords"),e.endTurn(),0}),(function(){return e.endTurn(),0})),0):1}return 1}}),this.importTech("faction3-quash",{name:"Quash",faction:"faction3",type:"ability",text:"Spend strategy token to quash upcoming agenda",initialize:function(e,t){null==e.game.players_info[t-1].quash&&(e.game.players_info[t-1].quash=0)},gainTechnology:function(e,t,a){"faction3-quash"==a&&(e.game.players_info[t-1].quash=1)},menuOption:function(e,t,a){var r={};return"main"===t&&(r.event="quash",r.html='<li class="option" id="quash">quash agenda</li>'),r},menuOptionTriggers:function(e,t,a){return e.doesPlayerHaveTech(a,"faction3-quash")&&"main"==t&&e.game.players_info[a-1].strategy_tokens>0&&0==e.game.state.active_player_moved?1:0},menuOptionActivated:function(e,t,a){if(e.game.player==a){var r="";for(r+="Select one agenda to quash in the Galactic Senate.<ul>",i=0;i<e.game.state.agendas.length;i++)""!=e.game.state.agendas[i]&&(r+='<li class="option" id="'+e.game.state.agendas[i]+'">'+e.agenda_cards[e.game.state.agendas[i]].name+"</li>");r+="</ul>",e.updateStatus(r),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){var t=$(this).attr("id");e.updateStatus("Quashing Agenda"),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.addMove("quash\t"+t+"\t1"),e.endTurn()}))}}}),this.importTech("faction3-instinct-training",{name:"Instinct Training",faction:"faction3",prereqs:["green"],color:"green",type:"special",text:"Expend strategy token to cancel opponent action card",initialize:function(e,t){null==e.game.players_info[t-1].instinct_training&&(e.game.players_info[t-1].instinct_training=0)},gainTechnology:function(e,t,a){"faction3-instinct-training"==a&&(e.game.players_info[t-1].instinct_training=1)},playActionCardTriggers:function(e,t,a,r){return 1==e.game.players_info[t-1].instinct_training?1:0},playActionCardEvent:function(e,t,a,r){return e.game.player==t&&(e.addMove("resolve\taction_card"),e.addMove("resolve\taction_card_post"),e.addMove("expend\t"+e.game.player+"strategy1"),e.endTurn()),0}}),this.importTech("faction3-field-nullification",{name:"Nullification Fields",faction:"faction3",type:"special",color:"yellow",prereqs:["yellow","yellow"],text:"Terminate the turn of active player who activates a system containing your ship",initialize:function(e,t){null==e.game.players_info[t-1].field_nullification&&(e.game.players_info[t-1].field_nullification=0,e.game.players_info[t-1].field_nullification_exhausted=0)},onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction3-field-nullification")&&(e.game.players_info[t-1].field_nullification_exhausted=0)},gainTechnology:function(e,t,a){"faction3-field-nullification"==a&&(e.game.players_info[t-1].field_nullification=1,e.game.players_info[t-1].field_nullification_exhausted=0)},activateSystemTriggers:function(e,t,a,r){return e.doesPlayerHaveTech(a,"faction3-field-nullification")&&e.doesSectorContainPlayerShips(a,r)&&t!=a?1:0},activateSystemEvent:function(e,t,a,r){return e.doesPlayerHaveTech(a,"faction3-field-nullification")?1==e.game.players_info[a-1].field_nullification_exhausted?1:e.game.player!=a?(e.updateStatus(e.returnFaction(a)+" is deciding whether to use Nullification Fields"),0):(e.updateStatus('Do you wish to use Field Nullification to terminate this player\'s turn? <ul><li class="textchoice" id="yes">activate nullification field</li><li class="textchoice" id="no">do not activate</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var n=$(this).attr("id");"yes"==n&&(e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.addMove("field_nullification\t"+a+"\t"+t+"\t"+r),e.endTurn()),"no"==n&&e.endTurn()})),0):1},handleGameLoop:function(e,t,a){if("field_nullification"==a[0]){var r=parseInt(a[1]),n=parseInt(a[2]);return a[3],e.game.queue.splice(t,1),e.updateLog(e.returnFactionNickname(r)+" uses Nullification Fields to end "+e.returnFactionNickname(n)+" turn"),1}return 1}}),this.importFaction("faction5",{id:"faction5",name:"Yin Brotherhood",nickname:"Yin",homeworld:"sector74",space_units:["carrier","carrier","destroyer","fighter","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","spacedock"],tech:["sarween-tools","faction5-indoctrination","faction5-devotion","faction5-flagship"],background:"faction5.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Yin Brotherhood, a monastic order of religious zealots whose eagerness to sacrifice their lives for the collective good makes them terrifying in one-on-one combat. Direct their self-destructive passion and you can win the Imperial Throne. Good luck!</div>'}),this.importTech("faction5-indoctrination",{name:"Indoctrination",faction:"faction5",type:"ability",text:"Spend 2 influence to convert 1 enemy infantry at combat start",groundCombatTriggers:function(e,t,a,r){return e.doesPlayerHaveTech(t,"faction5-indoctrination")&&e.returnSectorAndPlanets(a).p[r].units[t-1].length>0&&e.returnAvailableInfluence(t)>=2&&e.game.state.ground_combat_round<2?1:0},groundCombatEvent:function(e,t,a,r){if(e.game.player==t)return e.returnSectorAndPlanets(a).p[r].units[t-1].length>0?e.playIndoctrination(e,t,a,r,(function(e){e.endTurn()})):e.endTurn(),0}}),this.importTech("faction5-devotion",{name:"Devotion",faction:"faction5",type:"ability",text:"Sacrifice destroyer or cruiser to assign 1 enemy hit at combat end",spaceCombatTriggers:function(e,t,a){return e.doesPlayerHaveTech(t,"faction5-devotion")&&e.doesPlayerHaveShipsInSector(t,a)&&e.game.state.space_combat_round>0?1:0},spaceCombatEvent:function(e,t,a){return e.game.player==t&&e.playDevotion(e,t,a,(function(){e.endTurn()})),0}}),this.importTech("faction5-impulse-core",{name:"Impulse Core",faction:"faction5",prereqs:["yellow","yellow"],color:"yellow",type:"special",text:"Sacrifice destroyer or cruiser at combat start, opponent takes hit on capital ship",spaceCombatTriggers:function(e,t,a){return e.doesPlayerHaveTech(t,"faction5-impulse-core")&&e.doesPlayerHaveShipsInSector(t,a)&&0==e.game.state.space_combat_round?1:0},spaceCombatEvent:function(e,t,a){return e.game.player==t&&e.playDevotion(e,t,a,(function(){e.endTurn()}),1),0}}),this.importTech("faction5-yin-spinner",{name:"Yin Spinner",faction:"faction5",prereqs:["green","green"],color:"green",type:"special",initialize:function(e,t){null==e.game.players_info[t-1].faction5_yin_spinner&&(e.game.players_info[t-1].faction5_yin_spinner=0)},gainTechnology:function(e,t,a){"faction5-yin-spinner"==a&&(e.game.players_info[t-1].faction5_yin_spinner=1)},playerEndTurnTriggers:function(e,t){return 1==e.game.players_info[t-1].faction5_yin_spinner&&e.game.player==t&&1==e.game.state.active_player_has_produced?1:0},playerEndTurnEvent:function(e,t){if(e.game.player!=t)return 0;e.playerSelectPlanetWithFilter("Yin Spinner Tech: place additional infantry on which planet?",(function(t){return(t=e.game.planets[t]).owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sectors),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" spins extra infantry on "+t.name),e.endTurn(),0}),(function(){e.playerTurn()}))}}),this.importTech("faction5-flagship",{name:"Yin Flagship",faction:"faction5",type:"ability",text:"Wipes out all ships in sector when destroyed",unitDestroyed:function(e,t,a){if("flagship"==a.type&&e.doesPlayerHaveTech(a.owner,"faction5-flagship")){var r=e.game.state.activated_sector;""===r&&(r=e.game.state.space_combat_sector);var n=e.returnSectorAndPlanets(r);if(n){for(var i=0;i<n.s.units.length;i++)n.s.units[i]=[];for(var s=0;s<n.p.length;s++)for(var o=0;o<n.p[s].units.length;o++)n.p[s].units[o]=[];e.saveSystemAndPlanets(r),e.updateSectorGraphics(r),e.updateLog("The destruction of the Yin Flagship has caused a terrible calamity...")}}return a}}),this.playIndoctrination=function(e,t,a,r,n){if(this.game.player==t&&this.game.player==t){var i=e.returnSectorAndPlanets(a),s=i.p[r],o=e.returnOpponentOnPlanet(t,s);e.returnNonPlayerInfantryOnPlanet(t,s)<=0||-1==o||i.p[r].units[o-1].length<=0?n(e):(this.updateStatus('<div class=\'sf-readable\'>Do you wish to spend 2 influence to convert 1 enemy infantry to your side?</div><ul><li class="textchoice" id="yes">yes</li><li class="textchoice" id="no">no</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var i=$(this).attr("id");"no"!==i?"yes"===i&&e.playerSelectInfluence(2,(function(i){1==i?(e.addMove("destroy_infantry_on_planet\t"+t+"\t"+a+"\t"+r+"\t1"),e.addMove("add_infantry_to_planet\t"+t+"\t"+s.planet+"\t1"),e.addMove("NOTIFY\tYin Indoctrination converts opposing infantry"),e.endTurn()):n(e)})):n(e)})))}},this.playDevotion=function(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e.game.player!=t)return 0;var i=e.returnSectorAndPlanets(a),s=e.returnOpponentInSector(t,a),o=e.doesSectorContainPlayerUnit(t,a,"destroyer"),c=e.doesSectorContainPlayerUnit(t,a,"cruiser");if(1==o||1==c){if(-1!=s){var l="<div class='sf-readable'>Do you wish to sacrifice a Destroyer or Cruiser to assign 1 hit to an enemy ship?</div><ul>";return o&&(l+='<li class="textchoice" id="destroyer">sacrifice destroyer</li>'),c&&(l+='<li class="textchoice" id="cruiser">sacrifice cruiser</li>'),l+='<li class="textchoice" id="no">no</li>',l+="</ul>",e.updateStatus(l),$(".textchoice").off(),$(".textchoice").on("click",(function(){var s=$(this).attr("id");if("no"!==s){if("destroyer"===s){for(var o=0,c=0;c<i.s.units[t-1].length;c++)"destroyer"==i.s.units[t-1][c].type&&(o=c);return e.addMove("destroy_unit\t"+t+"\t"+t+"\tspace\t"+a+"\t0\t"+o+"\t1"),void e.playDevotionAssignHit(e,t,a,r,n)}if("cruiser"===s){for(var l=0,u=0;u<i.s.units[t-1].length;u++)"cruiser"==i.s.units[t-1][u].type&&(l=u);return e.addMove("destroy_unit\t"+t+"\t"+t+"\tspace\t"+a+"\t0\t"+l+"\t1"),void e.playDevotionAssignHit(e,t,a,r,n)}}else r(e)})),0}r(e)}else r(e)},this.playDevotionAssignHit=function(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=e.returnSectorAndPlanets(a),s=e.returnOpponentInSector(t,a);if(1==n)return this.addMove("assign_hits_capital_ship\t"+s+"\t"+a+"\t1"),void r();for(var o="<div class='sf-readable'>Assign 1 hit to which opponent ship?</div><ul>",c=0;c<i.s.units[s-1].length;c++){var l=i.s.units[s-1][c];if(o+='<li class="textchoice" id="'+c+'">'+l.name,l.capacity>=1){for(var u="",d=0,p=0,h=0;h<l.storage.length;h++)"infantry"==l.storage[h].type&&p++,"fighter"==i.s.units[e.game.player-1][c].storage[h].type&&d++;(p>0||d>0)&&(u+=" ",p>0&&(u+=p+"i"),d>0&&(p>0&&(u+=", "),u+=d+"f"),u+=" "),o+=u}o+="</li>"}o+="</ul>",e.updateStatus(o),$(".textchoice").off(),$(".textchoice").on("click",(function(){$(".textchoice").off();var n=$(this).attr("id");e.addMove("assign_hit\t"+t+"\t"+s+"\t"+t+"\tship\t"+a+"\t"+n+"\t1"),r(e)}))},this.importFaction("faction6",{id:"faction6",name:"Yssaril Tribes",nickname:"Yssaril",homeworld:"sector75",space_units:["carrier","carrier","cruiser","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","infantry","pds","spacedock"],tech:["neural-motivator","faction6-stall-tactics","faction6-scheming","faction6-crafty","faction6-flagship"],background:"faction6.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Yssaril Tribe, a primitive race of swamp-dwelling creatures whose fast instincts and almost unerring ability to change tactics on-the-fly lead many to suspect more is at work than their primitive appearance belies. Good luck!</div>'}),this.importTech("faction6-stall-tactics",{name:"Stall Tactics",faction:"faction6",type:"ability",text:"Discard an Action Card to stall one turn",initialize:function(e,t){null==e.game.players_info[t-1].stall_tactics&&(e.game.players_info[t-1].stall_tactics=0)},gainTechnology:function(e,t,a){"faction6-stall-tactics"==a&&(e.game.players_info[t-1].stall_tactics=1)},menuOption:function(e,t,a){var r={};return"main"===t&&(r.event="stalltactics",r.html='<li class="option" id="stalltactics">discard action card (stall)</li>'),r},menuOptionTriggers:function(e,t,a){return e.doesPlayerHaveTech(a,"faction6-stall-tactics")&&"main"===t&&e.returnPlayerActionCards(a).length>0?1:0},menuOptionActivated:function(e,t,a){return e.game.player==a&&e.playerDiscardActionCards(1,(function(){return e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.endTurn(),0})),0}}),this.importTech("faction6-crafty",{name:"Crafty",faction:"faction6",type:"ability",text:"Unlimited action cards. Game effects cannot change.",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction6-crafty")&&(e.game.players_info[t-1].action_card_limit=1e3)}}),this.importTech("faction6-scheming",{name:"Scheming",faction:"faction6",type:"ability",text:"Receive bonus card when gaining action cards, then discard one",initialize:function(e,t){null==e.game.players_info[t-1].faction6_scheming&&(e.game.players_info[t-1].faction6_scheming=0)},gainTechnology:function(e,t,a){"faction6-scheming"==a&&(e.game.players_info[t-1].faction6_scheming=1)},gainActionCards:function(e,t,a){return e.doesPlayerHaveTech(t,"faction6-scheming")&&(e.game.queue.push("yssaril_action_card_discard\t"+t+"\t1"),e.game.queue.push("gain\t"+t+"\taction_cards\t1\t0"),e.game.queue.push("DEAL\t2\t"+t+"\t1"),e.game.queue.push("NOTIFY\t"+e.returnFaction(t)+" gains bonus action card and must discard one")),1},handleGameLoop:function(e,t,a){if("yssaril_action_card_discard"==a[0]){var r=parseInt(a[1]),n=parseInt(a[2]);return e.game.queue.splice(t,1),e.game.player===r&&e.playerDiscardActionCards(n,(function(){e.endTurn()})),0}return 1}}),this.importTech("faction6-transparasteel-plating",{name:"Transparasteel Plating",faction:"faction6",prereqs:["green"],color:"green",type:"special",text:"Selectively terminate action cards from players who have passed on your turn",initialize:function(e,t){null==e.game.players_info[t-1].transparasteel_plating&&(e.game.players_info[t-1].transparasteel_plating=0)},gainTechnology:function(e,t,a){"faction6-transparasteel-plating"==a&&(e.game.players_info[t-1].transparasteel_plating=1)},playActionCardTriggers:function(e,t,a,r){return 1==e.game.players_info[t-1].transparasteel_plating&&e.game.player==t&&a!=t&&1==e.game.players_info[a-1].passed?1:0},playActionCardEvent:function(e,t,a,r){return e.game.player==t&&(e.addMove("resolve\taction_card"),e.addMove("resolve\taction_card_post"),e.addMove("expend\t"+e.game.player+"strategy1"),e.endTurn()),0}}),this.importTech("faction6-mageon-implants",{name:"Mageon Implants",faction:"faction6",prereqs:["green","green","green"],color:"green",type:"special",text:"Exhaust to look at other players action cards and take one.",initialize:function(e,t){null==e.game.players_info[t-1].mageon_implants&&(e.game.players_info[t-1].mageon_implants=0,e.game.players_info[t-1].mageon_implants_exhausted=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].mageon_implants&&(e.game.players_info[t-1].mageon_implants=1,e.game.players_info[t-1].mageon_implants_exhausted=0)},gainTechnology:function(e,t,a){"faction6-mageon-implants"==a&&(e.game.players_info[t-1].mageon_implants=1,e.game.players_info[t-1].mageon_implants_exhausted=0)},menuOption:function(e,t,a){return"main"==t?{event:"mageonimplants",html:'<li class="option" id="mageonimplants">exhaust mageon implants</li>'}:{}},menuOptionTriggers:function(e,t,a){return"main"==t&&0==e.game.players_info[a-1].mageon_implants_exhausted&&1==e.game.players_info[a-1].mageon_implants?1:0},menuOptionActivated:function(e,t,a){return e.playerSelectPlayerWithFilter("Select a player from which to take an action card (if possible): ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("faction6_choose_card_triggered\t"+e.game.player+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" pulls a random action card from "+e.returnFaction(t)),e.endTurn(),0}),(function(){e.playerTurn()})),0},handleGameLoop:function(e,t,a){if("faction6_choose_card_triggered"==a[0]){var r=parseInt(a[1]),n=parseInt(a[2]);if(e.game.queue.splice(t,1),e.game.player===n){var i=e.returnPlayerActionCards();e.addMove("faction6_choose_card_return\t"+r+"\t"+n+"\t"+JSON.stringify(i)),e.endTurn()}return 0}if("faction6_choose_card_return"==a[0]){var s=parseInt(a[1]),o=parseInt(a[2]),c=JSON.parse(a[3]);if(e.game.queue.splice(t,1),e.game.player===s){for(var l='<div class="" style="margin-bottom:10px">Select '+e.returnFactionNickname(o)+" action card:</div><ul>",u=0;u<c.length;u++)l+='<li class="option" id="'.concat(u,'">').concat(e.action_cards[c[u]].name,"</li>");l+='<li class="option" id="cancel">skip</li>',e.updateStatus(l),$(".option").off(),$(".option").on("click",(function(){$(".option").off();var t=$(this).attr("id");return"skip"===t?(e.playerTurn(),0):(e.addMove("setvar\tplayers\t"+e.game.player+"\tmageon_implants_exhausted\tint\t1"),e.addMove("pull\t"+e.game.player+"\t"+o+"\taction\t"+c[t]),e.endTurn(),0)}))}return 0}return 1}}),this.importTech("faction6-flagship",{name:"Yssaril Flagship",faction:"faction6",type:"ability",text:"May move through sectors containing other ships",upgradeUnit:function(e,t,a){return e.doesPlayerHaveTech(a.owner,"faction6-flagship")&&"flagship"==a.type&&(a.may_fly_through_sectors_containing_other_ships=1,a.move=3),a}}),this.importStrategyCard("construction",{name:"Construction",rank:4,img:"/strategy/BUILD.png",text:"Build a PDS or Space Dock. Then build a PDS.<hr />Other players may spend a strategy token and activate a sector to build a PDS or Space Dock in it.",strategyPrimaryEvent:function(e,t,a){e.game.player==a&&t==a&&(e.addMove("resolve\tstrategy"),e.addMove("strategy\tconstruction\t"+a+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerAcknowledgeNotice("You have played Construction. First you will have the option of producing a PDS or Space Dock. Then you will have the option of producing an additional PDS if you so choose.",(function(){e.playerBuildInfrastructure((function(t){e.playerBuildInfrastructure((function(t){e.updateSectorGraphics(t),e.endTurn()}),2)}),1)})))},strategySecondaryEvent:function(e,t,a){if(e.game.player!=a&&e.game.player==t){var r="<p>Construction has been played. Do you wish to spend 1 strategy token to build a PDS or Space Dock? This will activate the sector (if unactivated): </p><ul>";1==e.game.state.round&&(r='<p class="doublespace">'.concat(e.returnFaction(a)," has played the Construction strategy card. You may spend 1 strategy token to build a PDS or Space Dock on a planet you control (this will activate the sector). You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.playerBuildInfrastructure((function(t){e.addMove("activate\t"+e.game.player+"\t"+t),e.updateSectorGraphics(t),e.endTurn()}),1)),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}}),this.importStrategyCard("diplomacy",{name:"Diplomacy",rank:2,img:"/strategy/DIPLOMACY.png",text:"Pick a sector other than New Byzantium. Other players activate it. Refresh two planets.<hr />Other players may spend a strategy token to refresh two planets.",strategyPrimaryEvent:function(e,t,a){return e.game.player==a&&t==a&&(e.updateStatus("Select sector to quagmire in diplomatic negotiations, and refresh any planets in that system: "),e.playerSelectSector((function(t){t.indexOf("_")>-1&&(t=e.game.board[t].tile),e.addMove("resolve\tstrategy"),e.addMove("strategy\tdiplomacy\t"+a+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" uses Diplomacy to activate "+e.game.sectors[t].name);for(var r=0;r<e.game.players_info.length;r++)e.addMove("activate\t"+(r+1)+"\t"+t);var n=e.returnSectorAndPlanets(t);if(n.p)for(var i=0;i<n.p.length;i++)if(n.p[i].owner==e.game.player)for(var s in e.game.planets)n.p[i]==e.game.planets[s]&&e.addMove("unexhaust\t"+e.game.player+"\tplanet\t"+s);e.saveSystemAndPlanets(n),e.endTurn()}))),0},strategySecondaryEvent:function(e,t,a){if(e.game.player!=a&&e.game.player==t){var r="<p>Do you wish to spend 1 strategy token to unexhaust two planet cards? </p><ul>";1==e.game.state.round&&(r='<p class="doublespace">'.concat(e.returnFaction(a)," has just played the Diplomacy strategy card. This lets you to spend 1 strategy token to unexhaust two planet cards. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.updateStatus(r),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");if("yes"==t){for(var a=e.returnPlayerExhaustedPlanetCards(e.game.player),r=0,n=0,i="<p>Select planets to unexhaust: </p><ul>",s=".cardchoice",o=0;o<a.length;o++)n++,i+='<li class="cardchoice" id="cardchoice_'+a[o]+'">'+e.returnPlanetCard(a[o])+"</li>";0==n&&(i+='<li class="textchoice" id="cancel">cancel (no options)</li>',s=".textchoice"),i+="</ul>",n>=2&&(n=2),e.updateStatus(i),e.lockInterface(),$(s).off(),$(s).on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");if("cancel"===t)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),void e.endTurn();for(var i=t.split("_"),s="#"+t,o=i[1],c=0,l=0;l<a.length;l++)a[l]===o&&(c=l);r++,e.addMove("unexhaust\t"+e.game.player+"\tplanet\t"+a[c]),$(s).off(),$(s).css("opacity","0.2"),r>=n&&(e.prependMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn())}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}if("no"==t)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0}))}}}),this.importStrategyCard("imperial",{name:"Imperial",rank:8,img:"/strategy/EMPIRE.png",text:"You may score a public objective. If you control New Byzantium gain 1 VP. Otherwise gain a secret objective.<hr />All players score objectives in Initiative Order",strategyPrimaryEvent:function(e,t,a){return e.game.player==a&&t==a&&(e.game.planets["new-byzantium"].owner==a?e.playerAcknowledgeNotice("You are granted an additional Victory Point for controlling New Byzantium during Imperial Scoring",(function(){e.playerAcknowledgeNotice("You will first be asked to score your public objective. The game will then allow other players to purchase secret objectives.",(function(){e.addMove("resolve\tstrategy"),e.addMove("strategy\timperial\t"+a+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerScoreVictoryPoints(e,(function(e,a,r){a>0&&(null!=e.stage_i_objectives[r]||null!=e.stage_ii_objectives[r])?null!=e.stage_i_objectives[r]?e.stage_i_objectives[r].scoreObjective(e,t,(function(){e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.addMove("score\t"+t+"\t"+a+"\t"+r),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(r),e.updateStatus("scoring completed"),e.endTurn()})):e.stage_ii_objectives[r].scoreObjective(e,t,(function(){e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.addMove("score\t"+t+"\t"+a+"\t"+r),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(r),e.updateStatus("scoring completed"),e.endTurn()})):(e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.updateStatus("scoring completed"),e.endTurn())}),1)}))})):e.playerAcknowledgeNotice("As you do not control New Byzantium during Imperial Scoring, you will be issued an additional Secret Objective",(function(){e.playerAcknowledgeNotice("You will next be asked to score a public objective. The game will then allow other players to purchase secret objectives.",(function(){e.addMove("resolve\tstrategy"),e.addMove("strategy\timperial\t"+a+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerScoreVictoryPoints(e,(function(e,r,n){r>0&&(null!=e.stage_i_objectives[n]||null!=e.stage_ii_objectives[n])?null!=e.stage_i_objectives[n]?e.stage_i_objectives[n].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+r+"\t"+n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.updateStatus("scoring completed"),e.addMove("gain\t"+a+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+a+"\t1"),e.endTurn()})):e.stage_ii_objectives[n].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+r+"\t"+n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.updateStatus("scoring completed"),e.addMove("gain\t"+a+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+a+"\t1"),e.endTurn()})):(e.addMove("gain\t"+a+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+a+"\t1"),e.endTurn())}),1)}))}))),0},strategySecondaryEvent:function(e,t,a){return console.log("IMPERIAL SECONDARY: "+t+" 0- "+a),e.game.state.playing_strategy_card_secondary=1,e.game.player==t&&(console.log("CAN PLAYER BUY SECRET OBJECTIVE?"),console.log(e.game.player+" -- "+a+" -- "+e.game.players_info[t-1].strategy_tokens),e.game.player!=a&&e.game.players_info[t-1].strategy_tokens>0?e.playerBuySecretObjective(2):(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn())),0},strategyTertiaryEvent:function(e,t,a){if(e.game.state.playing_strategy_card_secondary=1,e.game.state.round_scoring=1,t==e.game.player){var r="",n="";return e.game.state.round_scoring=2,e.playerScoreSecretObjective(e,(function(a,i,s){n=i,r=s,e.playerScoreVictoryPoints(e,(function(a,i,s){if(e.updateStatus("scoring completed"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),n>0)return null!=e.secret_objectives[r]&&e.secret_objectives[r].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+n+"\t"+r),i>0?(null!=e.stage_i_objectives[s]&&e.stage_i_objectives[s].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+s),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(r),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(s),e.endTurn()})),null!=e.stage_ii_objectives[s]&&e.stage_ii_objectives[s].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+s),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(r),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(s),e.endTurn()}))):(e.game.players_info[e.game.player-1].objectives_scored_this_round.push(r),e.endTurn())})),0;i>0?(null!=e.stage_i_objectives[s]&&e.stage_i_objectives[s].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+s),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(s),e.endTurn()})),null!=e.stage_ii_objectives[s]&&e.stage_ii_objectives[s].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+s),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(s),e.endTurn()}))):e.endTurn()}),2)})),0}}}),this.importStrategyCard("leadership",{name:"Leadership",rank:1,img:"/strategy/INITIATIVE.png",text:"You may gain and distribute three tokens.<hr />All players may purchase extra tokens at three influence per token.",strategyPrimaryEvent:function(e,t,a){return e.game.player==a&&t==a&&(e.addMove("resolve\tstrategy"),e.addMove("strategy\tleadership\t"+a+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerAllocateNewTokens(e.game.player,3,0,1,1)),0},strategySecondaryEvent:function(e,t,a){return t==e.game.player?(e.game.player,e.playerBuyTokens(2),0):1}}),this.importStrategyCard("politics",{name:"Politics",rank:3,img:"/strategy/POLITICS.png",text:"Pick a new Speaker. Gain 2 action cards. Vote on two agendas if New Byzantium is controlled.<hr />Other players may spend a strategy token to purchase two action cards.",strategyPrimaryEvent:function(e,t,a){if(e.game.player===a&&t==a){e.addMove("resolve\tstrategy"),e.addMove("gain\t"+e.game.player+"\taction_cards\t2"),e.addMove("DEAL\t2\t"+e.game.player+"\t2"),e.addMove("NOTIFY\t"+e.returnFaction(t)+" gains action cards"),e.addMove("strategy\tpolitics\t"+a+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length);for(var r=e.returnFactions(),n="Make which player the speaker? <ul>",i=0;i<e.game.players_info.length;i++)n+='<li class="option" id="'+i+'">'+r[e.game.players_info[i].faction].name+"</li>";n+="</ul>",e.updateStatus(n),e.game.player,$(".option").off(),$(".option").on("click",(function(){var t=parseInt($(this).attr("id"))+1;return e.returnAgendaCards(),e.playerAcknowledgeNotice("You will receive two action cards once other players have decided whether to purchase action cards.",(function(){e.addMove("change_speaker\t"+t),e.endTurn()})),0}))}},strategySecondaryEvent:function(e,t,a){e.game.player==t&&(e.game.player!=a&&e.game.players_info[t-1].strategy_tokens>0?e.playerBuyActionCards(2):(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn()))},strategyTertiaryEvent:function(e,t,a){var r=[],n=e.returnAgendaCards(),s=0;if(e.game.player==t){e.game.state.votes_available=[],e.game.state.votes_cast=[],e.game.state.how_voted_on_agenda=[],e.game.state.voted_on_agenda=[],e.game.state.voting_on_agenda=0;for(var o=0;o<e.game.players_info.length;o++){e.game.state.votes_available.push(e.returnAvailableVotes(o+1)),e.game.state.votes_cast.push(0),e.game.state.how_voted_on_agenda[o]="abstain",e.game.state.voted_on_agenda[o]=[];for(var c=0;c<e.game.state.agendas_per_round+2;c++)e.game.state.voted_on_agenda[o].push(0)}}if(e.game.player===e.game.state.speaker){var l="";for(1==e.game.state.agendas_per_round&&(l+="Select one agenda to advance for consideration in the Galactic Senate.<ul>"),2==e.game.state.agendas_per_round&&(l+="Select two agendas to advance for consideration in the Galactic Senate.<ul>"),3==e.game.state.agendas_per_round&&(l+="Select three agendas to advance for consideration in the Galactic Senate.<ul>"),i=0;i<3&&i<e.game.state.agendas.length;i++)l+='<li class="option" id="'+e.game.state.agendas[i]+'">'+n[e.game.state.agendas[i]].name+"</li>";l+="</ul>",e.updateStatus(l),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){if(s++,r.push($(this).attr("id")),$(this).hide(),e.hideAgendaCard(r[r.length-1]),s>=e.game.state.agendas_per_round){for(i=1;i>=0;i--)e.addMove("resolve_agenda\t"+r[i]),e.addMove("post_agenda_stage_post\t"+r[i]),e.addMove("post_agenda_stage\t"+r[i]),e.addMove("agenda\t"+r[i]+"\t"+i),e.addMove("pre_agenda_stage_post\t"+r[i]),e.addMove("pre_agenda_stage\t"+r[i]),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length);e.endTurn()}}))}else e.updateStatus("The Speaker is selecting two Agendas for consideration by the Senate")}}),this.importStrategyCard("technology",{name:"Technology",rank:7,img:"/strategy/TECH.png",text:"Research a technology. You may spend 6 resources to research another.<hr />Other players may spend a strategy token and 4 resources to research a technology",strategyPrimaryEvent:function(e,t,a){e.game.player==a&&t==a&&e.playerAcknowledgeNotice("You will first have the option of researching a free-technology, and then invited to purchase an additional tech for 6 resources:",(function(){e.playerResearchTechnology((function(r){e.game.players_info[e.game.player-1].tech.push(r),e.addMove("resolve\tstrategy"),e.addMove("strategy\ttechnology\t"+a+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("purchase\t"+t+"\ttechnology\t"+r),e.endTurn()}))}))},strategySecondaryEvent:function(e,t,a){var r="",n=0;return e.game.player==t&&e.game.player!=a?(n=e.game.players_info[e.game.player-1].cost_of_technology_secondary,r="<p>Technology has been played. Do you wish to spend 4 resources and a strategy token to research a technology? </p><ul>",1==e.game.state.round&&(r='<p class="doublespace">'.concat(e.returnFaction(a)," has played the Technology strategy card. You may spend 4 resources and a strategy token to gain a permanent new unit or ability. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability?</p><ul>")),1!=e.game.players_info[t-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources||(r="<p>Technology has been played. Do you wish to spend a strategy token to research a technology? </p><ul>",n=0),e.returnAvailableResources(e.game.player)>=n&&e.game.players_info[t-1].strategy_tokens>0&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var a=$(this).attr("id");return"yes"===a&&(e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources=0,e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.playerSelectResources(n,(function(a){1==a?e.playerResearchTechnology((function(a){e.addMove("purchase\t"+t+"\ttechnology\t"+a),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn()})):e.endTurn()}))),"no"===a?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")})),0):(e.game.player!=a||(r="<p>Do you wish to spend "+(n=e.game.players_info[e.game.player-1].cost_of_technology_primary)+" resources to research an additional technology? </p><ul>",1!=e.game.players_info[e.game.player-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[e.game.player-1].temporary_research_technology_card_must_not_spend_resources||(r="<p>Do you wish to research an additional technology? </p><ul>",n=0),e.returnAvailableResources(e.game.player)>=n&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&(e.game.players_info[e.game.player-1].temporary_research_technology_card_must_not_spend_resources,e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.playerSelectResources(n,(function(t){1==t&&e.playerResearchTechnology((function(t){e.addMove("purchase\t"+e.game.player+"\ttechnology\t"+t),e.endTurn()}))}))),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))),0)}}),this.importAgendaCard("minister-of-technology",{name:"Minister of Technology",type:"Law",text:"Elect a player. They do not need to spend resources to research technology when the technology card is played",initialize:function(e){e.game.state.minster_of_technology=null,e.game.state.minster_of_technology_player=null;for(var t=0;t<e.game.players_info.length;t++)e.game.players_info[t].temporary_research_technology_card_must_not_spend_resources||(e.game.players_info[t].temporary_research_technology_card_must_not_spend_resources=0,e.game.players_info[t].permanent_research_technology_card_must_not_spend_resources=0)},returnAgendaOptions:function(e){for(var t=[],a=0;a<e.game.players_info.length;a++)t.push(e.returnFaction(a+1));return t},onPass:function(e,t){for(var a=0,r=0;r<e.game.players_info.length;r++)e.returnFaction(r+1)==t&&(a=r);e.game.state.minister_of_technology=1,e.game.state.minister_of_technology_player=a+1,e.game.players_info[a].permanent_research_technology_card_must_not_spend_resources=1,e.game.state.laws.push({agenda:"minister-of-technology",option:t})}}),this.importActionCard("unexpected-breakthrough",{name:"Unexpected Breakthrough",type:"action",text:"Do not spend resources to research technology the next time the Technology card is played",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_research_technology_card_must_not_spend_resources=1,1}}),this.importStrategyCard("trade",{name:"Trade",rank:5,img:"/strategy/TRADE.png",text:"Gain 3 trade goods. Refresh your commodities and those of any other players.<hr />Unrefreshed players may spend a strategy token to refresh their commodities.",strategyPrimaryEvent:function(e,t,a){if(e.game.player==a&&t==a){e.addMove("resolve\tstrategy"),e.addMove("strategy\ttrade\t"+a+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("purchase\t"+e.game.player+"\tgoods\t3"),e.addMove("purchase\t"+e.game.player+"\tcommodities\t"+e.game.players_info[e.game.player-1].commodity_limit);for(var r=e.returnFactions(),n="<p>You will receive 3 trade goods and "+e.game.players_info[e.game.player-1].commodity_limit+" commodities. You may choose to replenish the commodities of any other players: </p><ul>",i=0;i<e.game.players_info.length;i++)i!=e.game.player-1&&(n+='<li class="option" id="'+i+'">'+r[e.game.players_info[i].faction].name+"</li>");n+='<li class="option" id="finish">done</li>',e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");"finish"!=t?(e.addMove("purchase\t"+(parseInt(t)+1)+"\tcommodities\t"+e.game.players_info[t].commodity_limit),$(this).hide()):e.endTurn()}))}},strategySecondaryEvent:function(e,t,a){if(e.game.player==t&&e.game.player!=a){if(e.game.players_info[t-1].commodities==e.game.players_info[t-1].commodity_limit)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.updateLog(e.returnFaction(t)+" skips the Trade secondary as they have already refreshed commodities"),e.endTurn(),1;var r="<p>Trade has been played. Do you wish to spend 1 strategy token to refresh your commodities? </p><ul>";if(1==e.game.state.round&&(r='<p class="doublespace">'.concat(e.returnFaction(a)," has played the Trade strategy card. You may spend 1 strategy token to refresh your faction commodities, which may be exchanged with your neighbours on the board for trade goods. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.game.players_info[e.game.player-1].commodities==e.game.players_info[e.game.player-1].commodity_limit)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" already has commodities and skips trade secondary"),e.endTurn(),0;e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface(),$(".option").off();var t=$(this).attr("id");return"yes"==t&&(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("purchase\t"+e.game.player+"\tcommodities\t"+e.game.players_info[e.game.player-1].commodity_limit),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn()),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}}),this.importStrategyCard("warfare",{name:"Warfare",rank:6,img:"/strategy/MILITARY.png",text:"De-activate a sector. Gain and distribute 1 free token.<hr />Other players may spend a strategy token to producein their home system",strategyPrimaryEvent:function(e,t,a){e.game.player==a&&t==a&&(e.updateStatus("Select sector to de-activate."),e.playerSelectSector((function(t){var r=e.returnSectorAndPlanets(t);e.addMove("resolve\tstrategy"),e.addMove("strategy\twarfare\t"+a+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("deactivate\t"+a+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(a)+" deactivates "+r.s.name),e.playerAllocateNewTokens(e.game.player,1,0,3,0)})))},strategySecondaryEvent:function(e,t,a){if(e.game.player==t&&e.game.player!=a){var r="<p>Do you wish to spend 1 strategy token to produce in your home sector? </p><ul>";1==e.game.state.round&&(r='<p class="doublespace">'.concat(e.returnFaction(a)," has played the Warfare strategy card. You may spend 1 strategy token to produce in your Homeworld without activating the sector. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&e.playerProduceUnits(e.game.players_info[e.game.player-1].homeworld,0,0,2,1),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}}),this.importSecretObjective("military-catastrophe",{name:"Military Catastrophe",text:"Destroy the flagship of another player",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_military_catastrophe=0,0},spaceCombatRoundEnd:function(e,t,a,r){return e.game.players_info[e.game.player-1].units_i_destroyed_this_combat_round.includes("flagship")&&(e.game.state.secret_objective_military_catastrophe=1),0},groundCombatRoundEnd:function(e,t,a,r,n){return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_military_catastrophe?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("flagship-dominance",{name:"Blood Christening",text:"Achieve victory in a space combat in a system containing your flagship. Your flagship must survive this combat",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_flagship_dominance=0,0},spaceCombatRoundEnd:function(e,t,a,r){if(e.doesSectorContainPlayerUnit(e.game.player,r,"flagship")){var n=e.returnSectorAndPlanets(r);0==n.s.units[a-1].length&&t==e.game.player&&n.s.units[t-1].length>0&&(e.game.state.secret_objective_flagship_dominance=1),0==n.s.units[t-1].length&&a==e.game.player&&n.s.units[a-1].length>0&&(e.game.state.secret_objective_flagship_dominance=1)}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_flagship_dominance?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("nuke-them-from-orbit",{name:"Nuke them from Orbit",text:"Destroy the last of a player's ground forces using bombardment",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_nuke_from_orbit=0,e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=0,0},bombardmentTriggers:function(e,t,a,r,n){e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=0;for(var i=e.returnSectorAndPlanets(r).p[n],s=e.returnInfantryOnPlanet(i),o=0;o<i.units.length;o++)i.units[o].length>0&&o+1!=a&&(defender=o+1,e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=s);return 0},planetaryDefenseTriggers:function(e,t,a,r){if(e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked>0){var n=e.returnSectorAndPlanets(a);console.log("PIDX: "+r);var i=n.p[r];console.log("PLANET: "+JSON.stringify(i)),0==e.returnInfantryOnPlanet(i)&&(e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=1)}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_nuke_from_orbit?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("anti-imperialism",{name:"Anti-Imperialism",text:"Achieve victory in combat with a player with the most VP",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_anti_imperialism=0,0},spaceCombatRoundEnd:function(e,t,a,r){e.game.state.secret_objective_anti_imperialism=0;var n=e.returnSectorAndPlanets(r),i=e.returnPlayersWithHighestVP();return e.game.player==t&&n.s.units[t-1].length>0&&0==e.hasUnresolvedSpaceCombat(t,r)&&i.includes(a)&&(e.game.state.secret_objective_anti_imperialism=1),e.game.player==a&&n.s.units[a-1].length>0&&0==e.hasUnresolvedSpaceCombat(a,r)&&i.includes(t)&&(e.game.state.secret_objective_anti_imperialism=1),0},groundCombatRoundEnd:function(e,t,a,r,n){var i=e.returnSectorAndPlanets(r).p[n],s=e.returnPlayersWithHighestVP();return e.game.player==t&&i.units[t-1].length>0&&0==i.units[a-1].length&&s.includes(a)&&(e.game.state.secret_objective_anti_imperialism=1),e.game.player==a&&i.units[a-1].length>0&&0==i.units[t-1].length&&s.includes(t)&&(e.game.state.secret_objective_anti_imperialism=1),0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_anti_imperialism?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("end-their-suffering",{name:"End Their Suffering",text:"Eliminate a player with the lowest VP from the board in Space or Ground Combat",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_end_their_suffering=0,0},spaceCombatRoundEnd:function(e,t,a,r){var n=e.returnSectorAndPlanets(r),i=e.returnPlayersWithLowestVP();if(e.game.player==t&&0==n.s.units[a-1].length&&i.includes(a)){for(var s in e.game.sectors)if(e.game.sectors[s].units[a-1].length>0)return;for(var o in e.game.planets)if(e.game.planets[o].units[a-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}if(e.game.player==a&&0==n.s.units[t-1].length&&i.includes(t)){for(var c in e.game.sectors)if(e.game.sectors[c].units[t-1].length>0)return;for(var l in e.game.planets)if(e.game.planets[l].units[t-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}return 0},groundCombatRoundEnd:function(e,t,a,r,n){var i=e.returnSectorAndPlanets(r).p[n],s=e.returnPlayersWithLowestVP();if(e.game.player==t&&0==i.units[a-1].length&&s.includes(a)){for(var o in e.game.sectors)if(e.game.sectors[o].units[a-1].length>0)return;for(var c in e.game.planets)if(e.game.planets[c].units[a-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}if(e.game.player==a&&0==i.units[t-1].length&&s.includes(t)){for(var l in e.game.sectors)if(e.game.sectors[l].units[t-1].length>0)return;for(var u in e.game.planets)if(e.game.planets[u].units[t-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_end_their_suffering?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("establish-a-blockade",{name:"Establish a Blockade",text:"Have at least 1 ship in the same sector as an opponent's spacedock",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a in e.game.sectors)if(e.game.sectors[a].units[t-1].length>0)for(var r=e.returnSectorAndPlanets(a),n=0;n<r.p.length;n++)for(var i=0;i<r.p[n].units.length;i++)if(i+1!=t)for(var s=0;s<r.p[n].units[i].length;s++)if("spacedock"===r.p[n].units[i][s].type)return 1;return 0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("close-the-trap",{name:"Close the Trap",text:"Destroy another player's last ship in a system using a PDS",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_close_the_trap=0,e.game.state.secret_objective_close_the_trap_pds_fired=0,0},modifyPDSRoll:function(e,t,a,r){t==e.game.player&&(e.game.state.secret_objective_close_the_trap_pds_fired=1),a==e.game.player&&(e.game.state.secret_objective_close_the_trap_pds_fired=1)},modifySpaceCombatRoll:function(e,t,a,r){e.game.state.secret_objective_close_the_trap_pds_fired=0},spaceCombatRoundEnd:function(e,t,a,r){var n=e.returnSectorAndPlanets(r);return e.game.player==t&&n.s.units[t-1].length>0&&0==e.hasUnresolvedSpaceCombat(t,r)&&1==e.game.state.secret_objective_close_the_trap_pds_fired&&(e.game.state.secret_objective_close_the_trap=1,e.game.state.secret_objective_close_the_trap_pds_fired=1),e.game.player==a&&n.s.units[a-1].length>0&&0==e.hasUnresolvedSpaceCombat(a,r)&&1==e.game.state.secret_objective_close_the_trap_pds_fired&&(e.game.state.secret_objective_close_the_trap=1,e.game.state.secret_objective_close_the_trap_pds_fired=1),0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_close_the_trap?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("galactic-observer",{name:"Galactic Observer",text:"Have at least 1 ship in 6 different sectors",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var a=0;for(var r in e.game.board){var n=e.game.board[r].tile;e.doesSectorContainPlayerShip(t,n)&&a++}return a>5?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("master-of-the-ion-cannon",{name:"Master Cannoneer",text:"Have at least 4 PDS units in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var a=0;for(var r in e.game.planets)for(var n=e.game.planets[r],i=0;i<n.units[t-1].length;i++)"pds"==n.units[t-1][i].type&&a++;return a>3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("war-engine",{name:"War Engine",text:"Have three spacedocks in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var a=0;for(var r in e.game.planets)for(var n=e.game.planets[r],i=0;i<n.units[t-1].length;i++)"spacedock"==n.units[t-1][i].type&&a++;return a>2?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("wormhole-administrator",{name:"Wormhole Administrator",text:"Have at least 1 ship in systems containing alpha and beta wormholes respectively",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.returnSectorsWithPlayerShips(t),r=0,n=0,i=0;i<a.length;i++)1==e.game.sectors[a[i]].wormhole&&(r=1),2==e.game.sectors[a[i]].wormhole&&(n=1);return 1==r&&1==n?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("fleet-of-terror",{name:"Fleet of Terror",text:"Have five dreadnaughts in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnSectorsWithPlayerShips(t),n=0;n<r.length;n++)for(var i=0;i<e.game.sectors[r[n]].units[t-1].length;i++)"dreadnaught"===e.game.sectors[r[n]].units[t-1][i].type&&a++;return a>=5?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("cultural-diplomacy",{name:"Cultural Diplomacy",text:"Control at least 4 cultural planets",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnPlayerPlanetCards(t),n=0;n<r.length;n++)"cultural"===e.game.planets[r[n]].type&&a++;return a>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("act-of-espionage",{name:"Act of Espionage",text:"Discard five action cards from your hard",type:"secret",canPlayerScoreVictoryPoints:function(e,t){return e.returnPlayerActionCards(t).length>=5?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerDiscardActionCards(5,(function(){a(1)})):a(0)}}),this.importSecretObjective("space-to-breathe",{name:"Space to Breathe",text:"Have at least 1 ship in 3 systems with no planets",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.returnSectorsWithPlayerShips(t),r=0,n=0;n<a.length;n++)0==e.game.sectors[a[n]].planets.length&&r++;return r>=3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("ascendant-technocracy",{name:"Ascendant Technocracy",text:"Research 4 tech upgrades on the same color path",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0,i=0,s=0,o=0;o<a.length;o++)"blue"==e.tech[a[o]].color&&n++,"red"==e.tech[a[o]].color&&i++,"yellow"==e.tech[a[o]].color&&s++,"green"==e.tech[a[o]].color&&r++;return n>=4||s>=4||i>=4||r>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("penal-colonies",{name:"Penal Colonies",text:"Control four planets with hazardous conditions",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnPlayerPlanetCards(t),n=0;n<r.length;n++)"hazardous"===e.game.planets[r[n]].type&&a++;return a>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("master-of-production",{name:"Master of Production",text:"Control four planets with industrial civilizations",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnPlayerPlanetCards(t),n=0;n<r.length;n++)"industrial"===e.game.planets[r[n]].type&&a++;return a>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("faction-technologies",{name:"Faction Technologies",text:"Research 2 faction technologies",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0;n<a.length;n++)"special"==e.tech[a[n]].type&&0==a[n].indexOf("faction")&&r++;return r>=2?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("occupy-new-byzantium",{name:"Occupy New Byzantium",text:"Control New Byzantium and have at least 3 ships protecting the sector",type:"secret",canPlayerScoreVictoryPoints:function(e,t){return e.game.planets["new-byzantium"].owner==t&&e.game.sectors["new-byzantium"].units[t-1].length>=3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("cast-a-long-shadow",{name:"Cast a Long Shadow",text:"Have at least 1 ship in a system adjacent to an opponent homeworld",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.returnHomeworldSectors(e.game.players_info.length),r=[],n=0;n<a.length;n++)e.game.board[a[n]].tile!=e.game.board[e.game.players_info[t-1].homeworld].tile&&r.push(e.game.board[a[n]].tile);for(var i=0;i<r.length;i++)if(e.isPlayerAdjacentToSector(t,r[i]))return 1;return 0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIPublicObjective("planetary-unity",{name:"Planetary Unity",img:"/imperium/img/objective_card_1_template.png",text:"Control four planets of the same planet type",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=0,n=0,i=e.returnPlayerPlanetCards(t),s=0;s<i.length;s++)e.game.planets[i[s]],"hazardous"===e.game.planets[i[s]].type&&a++,"industrial"===e.game.planets[i[s]].type&&n++,"cultural"===e.game.planets[i[s]].type&&r++;return a>=4||r>=4||n>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIPublicObjective("forge-of-war",{name:"Forge of War",img:"/imperium/img/objective_card_1_template.png",text:"Research 2 unit upgrade technologies",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0;n<a.length;n++)1==e.tech[a[n]].unit&&r++;return r>=2?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIPublicObjective("diversified-research",{name:"Diversified Research",img:"/imperium/img/objective_card_1_template.png",text:"Research 2 technologies in two different color paths",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0,i=0,s=0,o=0;o<a.length;o++)"blue"==e.tech[a[o]].color&&n++,"red"==e.tech[a[o]].color&&i++,"yellow"==e.tech[a[o]].color&&s++,"green"==e.tech[a[o]].color&&r++;var c=0;return n>=2&&c++,s>=2&&c++,i>=2&&c++,r>=2&&c++,c>=2?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIPublicObjective("mining-conglomerate",{name:"Mining Conglomerate",img:"/imperium/img/objective_card_1_template.png",text:"Spend eight resources when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableResources(t)>=8?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectResources(8,(function(e){a(e)})):a(0)}}),this.importStageIPublicObjective("conquest-of-science",{name:"Conquest of Science",minPlayers:4,img:"/imperium/img/objective_card_1_template.png",text:"Control 3 planets with tech specialities",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnPlayerPlanetCards(t),n=0;n<r.length;n++)"red"==r[n].bonus&&a++,"blue"==r[n].bonus&&a++,"green"==r[n].bonus&&a++,"yellow"==r[n].bonus&&a++;return a>=3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIPublicObjective("colonization",{name:"Colonization",img:"/imperium/img/objective_card_1_template.png",text:"Control six planets outside your home system",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=0,n=0,i=0,s=e.returnPlayerPlanetCards(t),o=0;o<s.length;o++)"hazardous"===e.game.planets[s[o]].type&&a++,"industrial"===e.game.planets[s[o]].type&&n++,"cultural"===e.game.planets[s[o]].type&&r++,"diplomatic"===e.game.planets[s[o]].type&&i++;return r+a+n+i>=6?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIPublicObjective("grand-gesture",{name:"A Grand Gesture",img:"/imperium/img/objective_card_1_template.png",text:"Spend 3 command or strategy tokens when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.game.players_info[t-1].strategy_tokens+e.game.players_info[t-1].command_tokens>=3?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectStrategyAndCommandTokens(3,(function(e){a(e)})):a(0)}}),this.importStageIPublicObjective("establish-trade-outposts",{name:"Establish Trade Outposts",img:"/imperium/img/objective_card_1_template.png",text:"Spend 5 trade goods when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableTradeGoods(t)>=5?1:0},scoreObjective:function(e,t,a){e.game.players_info[t-1].goods-=5,e.displayFactionDashboard(),a(1)}}),this.importStageIPublicObjective("pecuniary-diplomacy",{name:"Pecuniary Diplomacy",img:"/imperium/img/objective_card_1_template.png",text:"Spend 8 influence when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableInfluence(t)>=8?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectInfluence(8,(function(e){a(e)})):a(0)}}),this.importStageIIPublicObjective("master-of-commerce",{name:"Master of Commerce",img:"/imperium/img/objective_card_2_template.png",text:"Spend 10 trade goods when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableTradeGoods(t)>=10?1:0},scoreObjective:function(e,t,a){e.game.players_info[t-1].goods-=10,e.displayFactionDashboard(),a(1)}}),this.importStageIIPublicObjective("display-of-dominance",{name:"Display of Dominance",img:"/imperium/img/objective_card_2_template.png",text:"Control at least 1 planet in another player's home sector",canPlayerScoreVictoryPoints:function(e,t){for(var a=[],r=0;r<e.game.players_info.length;r++)for(var n=e.game.board[e.game.players_info[t-1].homeworld].tile,i=e.returnSectorAndPlanets(n),s=0;s<i.p.length;s++)a.push(i.p[s].name);for(var o=e.returnPlayerPlanetCards(t),c=0;c<o.length;c++)if(a.includes(o[c].name))return 1;return 0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("technological-empire",{name:"Technological Empire",minPlayers:4,img:"/imperium/img/objective_card_2_template.png",text:"Control 5 planets with tech bonuses",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnPlayerPlanetCards(t),n=0;n<r.length;n++)"red"==r[n].bonus&&a++,"blue"==r[n].bonus&&a++,"green"==r[n].bonus&&a++,"yellow"==r[n].bonus&&a++;return a>=3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("establish-galactic-currency",{name:"Establish Galactic Currency",img:"/imperium/img/objective_card_2_template.png",text:"Spend 16 resources when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableResources(t)>=16?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectResources(16,(function(e){a(e)})):a(0)}}),this.importStageIIPublicObjective("master-of-science",{name:"Master of Science",img:"/imperium/img/objective_card_2_template.png",text:"Own 2 tech upgrades in each of 4 tech color paths",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0,i=0,s=0,o=0;o<a.length;o++)"blue"==e.tech[a[o]].color&&n++,"red"==e.tech[a[o]].color&&i++,"yellow"==e.tech[a[o]].color&&s++,"green"==e.tech[a[o]].color&&r++;var c=0;return n>=2&&c++,s>=2&&c++,i>=2&&c++,r>=2&&c++,c>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("imperial-unity",{name:"Imperial Unity",img:"/imperium/img/objective_card_2_template.png",text:"Control 6 planets of the same planet type",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=0,n=0,i=0,s=e.returnPlayerPlanetCards(t),o=0;o<s.length;o++)"hazardous"===e.game.planets[s[o]].type&&a++,"industrial"===e.game.planets[s[o]].type&&n++,"cultural"===e.game.planets[s[o]].type&&r++,"diplomatic"===e.game.planets[s[o]].type&&i++;return a>=6||r>=6||n>=6||i>=6?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("advanced-technologies",{name:"Advanced Technologies",img:"/imperium/img/objective_card_2_template.png",text:"Research 3 unit upgrade technologies",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0;n<a.length;n++)1==e.tech[a[n]].unit&&r++;return r>=3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("colonial-dominance",{name:"Colonial Dominance",img:"/imperium/img/objective_card_2_template.png",text:"Control 11 planets outside your home system",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=0,n=0,i=0,s=e.returnPlayerPlanetCards(t),o=0;o<s.length;o++)"hazardous"===e.game.planets[s[o]].type&&a++,"industrial"===e.game.planets[s[o]].type&&n++,"cultural"===e.game.planets[s[o]].type&&r++,"diplomatic"===e.game.planets[s[o]].type&&i++;return r+a+n+i>=11?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("power-broker",{name:"Power Broker",img:"/imperium/img/objective_card_2_template.png",text:"Spend 16 influence when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableInfluence(t)>=16?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectInfluence(16,(function(e){a(e)})):a(0)}}),this.importStageIIPublicObjective("cultural-revolution",{name:"Cultural Revolution",img:"/imperium/img/objective_card_2_template.png",text:"Spend 6 command or strategy tokens when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.game.players_info[t-1].strategy_tokens+e.game.players_info[t-1].command_tokens>=6?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectStrategyAndCommandTokens(6,(function(e){a(e)})):a(0)}}),this.importAgendaCard("shard-of-the-throne",{name:"Shard of the Throne",type:"Law",elect:"player",text:"Elect a Player to earn 1 VP. When this player loses a space combat to another player, they transfer the VP to that player",returnAgendaOptions:function(e){for(var t=[],a=0;a<e.game.players_info.length;a++)t.push(e.returnFaction(a+1));return t},onPass:function(e,t){e.game.state.shard_of_the_throne=1;for(var a=0;a<e.game.players_info.length;a++)t===e.returnFaction(a+1)&&(e.game.state.shard_of_the_throne_player=a+1);var r={agenda:"shard-of-the-throne"};r.option=t,e.game.state.laws.push(r),e.game.players_info[e.game.state.shard_of_the_throne_player-1].vp+=1,e.updateLeaderboard(),e.updateLog(e.returnFaction(e.game.state.shard_of_the_throne_player)+" gains the Shard of the Throne (1VP)")},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"shard-of-the-throne"===e.game.state.laws[t].agenda&&(e.game.state.laws.splice(t,1),t--);return e.game.state.shard_of_the_throne_player=-2,1},spaceCombatRoundEnd:function(e,t,a,r){a==e.game.state.shard_of_the_throne_player&&(e.doesPlayerHaveShipsInSector(a,r)||(e.game.state.shard_of_the_throne_player=t,e.updateLog(e.returnFaction(e.game.state.shard_of_the_throne_player)+" gains the Shard of the Throne (1VP)"),e.game.players_info[t-1].vp+=1,e.game.players_info[a-1].vp-=1,e.updateLeaderboard()))},groundCombatRoundEnd:function(e,t,a,r,n){a==e.game.state.shard_of_the_throne_player&&(e.doesPlayerHaveInfantryOnPlanet(a,r,n)||(e.game.state.shard_of_the_throne_player=t,e.updateLog(e.returnFaction(e.game.state.shard_of_the_throne_player)+" gains the Shard of the Throne (1VP)"),e.game.players_info[t-1].vp+=1,e.game.players_info[a-1].vp-=1,e.updateLeaderboard()))}}),this.importAgendaCard("homeland-defense-act",{name:"Homeland Defense Act",type:"Law",text:"FOR: there is no limit to the number of PDS units on a planet. AGAINST: each player must destroy one PDS unit",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){e.game.state.homeland_defense_act=1;var a={agenda:"homeland-defense-act"};if(a.option=t,e.game.state.laws.push(a),"for"===t&&(e.game.state.pds_limit_per_planet=100),"against"===t)for(var r=0;r<e.game.players_info.length;r++)e.doesPlayerHaveUnitOnBoard(r+1,"pds")&&e.game.queue.push("destroy_a_pds\t"+(r+1));e.game.state.laws.push({agenda:"homeland-defense-act",option:t})},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"homeland-defense-act"===e.game.state.laws[t].agenda&&(e.game.state.laws.splice(t,1),t--);return e.game.state.homeland_defense_act=0,e.game.state.pds_limit_per_planet=2,1},handleGameLoop:function(e,t,a){if("destroy_a_pds"==a[0]){var r=parseInt(a[1]);return e.game.queue.splice(t,1),e.game.player==r&&e.playerSelectUnitWithFilter("Select a PDS unit to destroy: ",(function(e){return null==e?0:"pds"==e.type?1:0}),(function(t){var a=t.sector,r=t.planet_idx,n=t.unit_idx,i=t.unit;if(null==i)return e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" has no PDS units to destroy"),e.endTurn(),0;e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tground\t"+a+"\t"+r+"\t"+n+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+i.name+" in "+e.game.sectors[a].name),e.endTurn()})),0}return 1}}),this.importAgendaCard("holy-planet-of-ixth",{name:"Holy Planet of Ixth",type:"Law",elect:"planet",text:"Elect a cultural planet. The planet's controller gains 1 VP. Units cannot be landed, produced or placed on this planet",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"cultural"===e.type?1:0}))},onPass:function(e,t){e.game.state.holy_planet_of_ixth=1,e.game.state.holy_planet_of_ixth_planet=t;var a={agenda:"holy-planet-of-ixth"};a.option=t,e.game.state.laws.push(a),e.game.planets[t].locked=1;var r=e.game.planets[t].owner;-1!=r&&(e.game.players_info[r-1].vp+=1,e.updateLeaderboard(),e.updateLog(e.returnFaction(r)+" gains 1 VP from Holy Planet of Ixth"))},repealAgenda:function(e){for(var t=null,a=0;a<e.game.state.laws.length;a++)"holy-planet-of-ixth"===e.game.state.laws[a].agenda&&(t=e.game.state.laws[a].option,e.game.state.laws.splice(a,1),a--);return null!=t&&(e.game.state.holy_planet_of_ixth=0,e.game.state.holy_planet_of_ixth_planet=-1,e.game.planets[t].locked=0),1}}),this.importAgendaCard("research-team-biotic",{name:"Research Team: Biotic",type:"Law",elect:"planet",text:"Elect an industrial planet. The owner may exhaust this planet to ignore 1 green technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,a=0;a<e.game.state.laws.length;a++)"research-team-biotic"===e.game.state.laws[a].agenda&&(t=e.game.state.laws[a].option,e.game.state.laws.splice(a,1),a--);return null!=t&&(e.game.state.research_team_biotic=0,e.game.state.research_team_biotic_planet=-1),1},onPass:function(e,t){e.game.state.research_team_biotic=1,e.game.state.research_team_biotic_planet=t;var a={agenda:"research-team-biotic"};a.option=t,e.game.state.laws.push(a)},menuOption:function(e,t,a){return"main"==t&&e.game.planets[e.game.state.research_team_biotic_planet].owner==a?{event:"research_team_biotic",html:'<li class="option" id="research_team_biotic">use biotic (green) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,a){return"main"==t&&e.game.planets[e.game.state.research_team_biotic_planet].owner==a&&0==e.game.planets[e.game.state.research_team_biotic_planet].exhausted?1:0},menuOptionActivated:function(e,t,a){return"main"==t&&(e.game.players_info[a-1].temporary_green_tech_prerequisite++,e.game.planets[e.game.state.research_team_biotic_planet].exhausted=1),0}}),this.importAgendaCard("research-team-cybernetic",{name:"Research Team: Cybernetic",type:"Law",elect:"planet",text:"Elect an industrial planet. The owner may exhaust this planet to ignore 1 yellow technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},onPass:function(e,t){e.game.state.research_team_cybernetic=1,e.game.state.research_team_cybernetic_planet=t;var a={agenda:"research-team-cybernetic"};a.option=t,e.game.state.laws.push(a)},repealAgenda:function(e){for(var t=null,a=0;a<e.game.state.laws.length;a++)"research-team-cybernetic"===e.game.state.laws[a].agenda&&(t=e.game.state.laws[a].option,e.game.state.laws.splice(a,1),a--);return null!=t&&(e.game.state.research_team_cybernetic=0,e.game.state.research_team_cybernetic_planet=-1),1},menuOption:function(e,t,a){return"main"==t&&e.game.planets[e.game.state.research_team_cybernetic_planet].owner==a?{event:"research_team_cybernetic",html:'<li class="option" id="research_team_cybernetic">use cybernetic (yellow) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,a){return"main"==t&&e.game.planets[e.game.state.research_team_cybernetic_planet].owner==a&&0==e.game.planets[e.game.state.research_team_cybernetic_planet].exhausted?1:0},menuOptionActivated:function(e,t,a){return"main"==t&&(e.game.players_info[a-1].temporary_yellow_tech_prerequisite++,e.game.planets[e.game.state.research_team_cybernetic_planet].exhausted=1),0}}),this.importAgendaCard("research-team-propulsion",{name:"Research Team: Propulsion",type:"Law",elect:"planet",text:"Elect an industrial planet. The owner may exhaust this planet to ignore 1 blue technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,a=0;a<e.game.state.laws.length;a++)"research-team-propulsion"===e.game.state.laws[a].agenda&&(t=e.game.state.laws[a].option,e.game.state.laws.splice(a,1),a--);return null!=t&&(e.game.state.research_team_propulsion=0,e.game.state.research_team_propulsion_planet=-1),1},onPass:function(e,t){e.game.state.research_team_propulsion=1,e.game.state.research_team_propulsion_planet=t;var a={agenda:"research-team-propulsion"};a.option=t,e.game.state.laws.push(a)},menuOption:function(e,t,a){return"main"==t&&e.game.planets[e.game.state.research_team_propulsion_planet].owner==a?{event:"research_team_propulsion",html:'<li class="option" id="research_team_propulsion">use propulsion (blue) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,a){return"main"==t&&e.game.planets[e.game.state.research_team_propulsion_planet].owner==a&&0==e.game.planets[e.game.state.research_team_propulsion_planet].exhausted?1:0},menuOptionActivated:function(e,t,a){return"main"==t&&(e.game.players_info[a-1].temporary_blue_tech_prerequisite++,e.game.planets[e.game.state.research_team_propulsion_planet].exhausted=1),0}}),this.importAgendaCard("research-team-warfare",{name:"Research Team: Warfare",type:"Law",elect:"planet",text:"Elect an hazardous planet. The owner may exhaust this planet to ignore 1 red technology prerequisite the next time they research a technology",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"industrial"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,a=0;a<e.game.state.laws.length;a++)"research-team-warfare"===e.game.state.laws[a].agenda&&(t=e.game.state.laws[a].option,e.game.state.laws.splice(a,1),a--);return null!=t&&(e.game.state.research_team_warfare=0,e.game.state.research_team_warfare_planet=-1),1},onPass:function(e,t){e.game.state.research_team_warfare=1,e.game.state.research_team_warfare_planet=t;var a={agenda:"research-team-warfare"};a.option=t,e.game.state.laws.push(a)},menuOption:function(e,t,a){return"main"==t&&e.game.planets[e.game.state.research_team_warfare_planet].owner==a?{event:"research_team_warfare",html:'<li class="option" id="research_team_warfare">use warfare (red) tech-skip</li>'}:{}},menuOptionTriggers:function(e,t,a){return"main"==t&&e.game.planets[e.game.state.research_team_warfare_planet].owner==a&&0==e.game.planets[e.game.state.research_team_warfare_planet].exhausted?1:0},menuOptionActivated:function(e,t,a){return"main"==t&&(e.game.players_info[a-1].temporary_red_tech_prerequisite++,e.game.planets[e.game.state.research_team_warfare_planet].exhausted=1),0}}),this.importAgendaCard("demilitarized-zone",{name:"Demilitarized Zone",type:"Law",elect:"planet",text:"Elect a cultural planet. All units are destroyed and cannot be landed, produced or placed on this planet",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"cultural"===e.type?1:0}))},onPass:function(e,t){e.game.state.demilitarized_zone=1,e.game.state.demilitarized_zone_planet=t;var a={agenda:"demilitarized-zone"};a.option=t,e.game.state.laws.push(a),e.game.planets[t].units=[];for(var r=0;r<e.game.players_info.length;r++)e.game.planets[t].units.push([]);e.game.planets[t].locked=1},repealAgenda:function(e){for(var t=null,a=0;a<e.game.state.laws.length;a++)"demilitarized-zone"===e.game.state.laws[a].agenda&&(t=e.game.state.laws[a].option,e.game.state.laws.splice(a,1),a--);return null!=t&&(e.game.state.demilitarized_zone=0,e.game.state.demilitarized_zone_planet=-1,e.game.planets[t].locked=0),1}}),this.importAgendaCard("core-mining",{name:"Core Mining",type:"Law",elect:"planet",text:"Elect a hazardous planet. Destroy half the infantry on that planet and increase its resource value by +2",returnAgendaOptions:function(e){return e.returnPlanetsOnBoard((function(e){return"hazardous"===e.type?1:0}))},repealAgenda:function(e){for(var t=null,a=0;a<e.game.state.laws.length;a++)"core-mining"===e.game.state.laws[a].agenda&&(t=e.game.state.laws[a].option,e.game.state.laws.splice(a,1),a--);return null!=t&&(e.game.state.core_mining=0,e.game.state.core_mining_planet=-1,e.game.planets[t].locked=0,e.game.planets[t].resources-=2),1},onPass:function(e,t){e.game.state.core_mining=1,e.game.state.core_mining_planet=t;var a={agenda:"core-mining"};a.option=t,e.game.state.laws.push(a),e.returnPlanetsOnBoard((function(e){return"hazardous"===e.type?1:0}));for(var r=t,n=0;n<e.game.planets[r].units.length;n++)for(var i=1,s=0;s<e.game.planets[r].units[n].length;s++)"infantry"==e.game.planets[r].units[n][s].type&&(1==i?(e.game.players[r].units[n].splice(s,1),s--,i=0):i=1);e.game.planets[t].resources+=2}}),this.importAgendaCard("anti-intellectual-revolution",{name:"Anti-Intellectual Revolution",type:"Law",text:"FOR: players must destroy a capital ship in order to play the Technology card. AGAINST: at the start of the next round, each player exhausts one planet for each technology they have.",returnAgendaOptions:function(e){return["for","against"]},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"anti-intellectual-revolution"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);var a=e.strategy_cards.technology;return a.strategyPrimaryEventBackup&&(a.strategyPrimaryEvent=a.strategyPrimaryEventBackup),a.strategySecondaryEventBackup&&(a.strategySecondaryEvent=a.strategySecondaryEventBackup),1},initialize:function(e,t){if("for"===t){var a=e.strategy_cards.technology,r=a.strategySecondaryEvent;a.strategySecondaryEventBackup=r,a.strategySecondaryEvent=function(e,t,a){e.game.player==t&&e.game.player!=a&&e.playerAcknowledgeNotice("Anti-Intellectual Revolution is in play. Do you wish to destroy a capital ship to research technology?",(function(){e.playerSelectUnitWithFilter("Select a capital ship to destroy: ",(function(e){return"destroyer"==e.type||"cruiser"==e.type||"carrier"==e.type||"dreadnaught"==e.type||"flagship"==e.type||"warsun"==e.type?1:0}),(function(n){var i=n.sector,s=n.planet_idx,o=n.unit_idx,c=n.unit;-1==s?e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tspace\t"+i+"\t"+s+"\t"+o+"\t1"):e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tground\t"+i+"\t"+s+"\t"+o+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+c.name+" in "+e.game.sectors[i].name),r(e,t,a)}))}))};var n=a.strategyPrimaryEvent;a.strategyPrimaryEventBackup=n,a.strategyPrimaryEvent=function(e,t,a){e.game.player==a&&e.playerAcknowledgeNotice("Anti-Intellectual Revolution is in play. Do you wish to destroy a capital ship to research technology?",(function(){e.playerSelectUnitWithFilter("Select a capital ship to destroy: ",(function(e){return"destroyer"==e.type||"cruiser"==e.type||"carrier"==e.type||"dreadnaught"==e.type||"flagship"==e.type||"warsun"==e.type?1:0}),(function(r){var i=r.sector,s=r.planet_idx,o=r.unit_idx,c=r.unit;-1==s?e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tspace\t"+i+"\t"+s+"\t"+o+"\t1"):e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tground\t"+i+"\t"+s+"\t"+o+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+c.name+" in "+e.game.sectors[i].name),n(e,t,a)}))}))}}if("against"===t)for(var i=0;i<e.game.players_info.length;i++)e.game.players_info[i].must_exhaust_at_round_start.push("planet","planet")},onPass:function(e,t){e.game.state.anti_intellectual_revolution=1;var a={agenda:"anti-intellectual-revolution"};a.option=t,e.game.state.laws.push(a),this.initialize(e,t)}}),this.importAgendaCard("unconventional-measures",{name:"Unconventional Measures",type:"Directive",text:"FOR: each player that votes 'for' draws 2 action cards. AGAINST: each player that votes 'for' discards their action cards.",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){if("for"===t)for(var a=0;a<e.game.players_info.length;a++)e.game.state.choices[e.game.state.how_voted_on_agenda[a]]==t&&(e.game.queue.push("gain\t2\t"+(a+2)+"\taction_cards\t2"),e.game.queue.push("DEAL\t2\t"+(a+1)+"\t2"),e.game.queue.push("NOTIFY\tdealing two action cards to player "+(a+1)));if("against"===t)for(var r=0;r<e.game.players_info.length;r++)console.log("uncon plyr: "+r),console.log(" how voted: "+e.game.state.choices[e.game.state.how_voted_on_agenda[r]]),"for"==e.game.state.choices[e.game.state.how_voted_on_agenda[r]]&&(e.game.player==r+1?(alert("clearing out my action cards!"),e.game.players_info[r].action_cards_in_hand=0,e.game.deck[1].hand=[]):(alert("clearing out my action cards!"),e.game.players_info[r].action_cards_in_hand=0))}}),this.importAgendaCard("seeds-of-an-empire",{name:"Seeds of an Empire",type:"Directive",text:"FOR: the player(s) with the most VP gain a VP. AGAINST: the players with the least VP gain a VP",returnAgendaOptions:function(e){return["for","against"]},onPass:function(e,t){var a=e.returnInitiativeOrder();if(console.log("seeds of the empire: "+t),"for"===t){for(var r=0,n=0;n<a.length;n++)r<e.game.players_info[a[n]-1].vp&&(r=e.game.players_info[a[n]-1].vp),e.game.state.seeds_of_an_empire=a[n];for(var i=0;i<a.length;i++)if(r==e.game.players_info[a[i]-1].vp&&(e.game.players_info[a[i]-1].vp+=1,e.game.queue.push("NOTIFY\t"+e.returnFaction(a[i])+" gains 1 VP from Seeds of an Empire"),e.game.state.seeds_of_an_empire=a[i],e.checkForVictory()))return 0}if("against"===t){for(var s=1e4,o=0;o<a.length;o++)s>e.game.players_info[a[o]-1].vp&&(s=e.game.players_info[a[o]-1].vp);for(var c=0;c<a.length;c++)if(s==e.game.players_info[a[c]-1].vp&&(e.game.players_info[a[c]-1].vp+=1,e.game.queue.push("NOTIFY\t"+e.returnFaction(a[c]+1)+" gains 1 VP from Seeds of an Empire"),e.game.state.seeds_of_an_empire=a[c],e.checkForVictory()))return 0}return e.updateLeaderboard(),1}}),this.importAgendaCard("space-cadet",{name:"Space Cadet",type:"Law",text:"Any player more than 3 VP behind the lead must henceforth be referred to as an Irrelevant Loser",returnAgendaOptions:function(e){return["for","against"]},initialize:function(e,t){null==e.space_cadet_initialized&&(e.space_cadet_initialized=1,1==e.game.state.space_cadet&&(e.returnFactionNamePreSpaceCadet=e.returnFactionName,e.returnFactionName=function(e,t){for(var a=0,r=0;r<e.game.players_info.length;r++)a<e.game.players_info[r].vp&&(a=e.game.players_info[r].vp);return e.game.players_info[t-1].vp<=a-3?"Irrelevant Loser":e.returnFactionNamePreSpaceCadet(e,t)},e.returnFactionNameNicknamePreSpaceCadet=e.returnFactionNameNickname,e.returnFactionNameNickname=function(e,t){for(var a=0,r=0;r<e.game.players_info.length;r++)a<e.game.players_info[r].vp&&(a=e.game.players_info[r].vp);return e.game.players_info[t-1].vp<=a-3?"Loser":e.returnFactionNameNicknamePreSpaceCadet(e,t)}))},onPass:function(e,t){if("for"==t){e.game.state.space_cadet=1;var a={agenda:"space-cadet"};a.option=t,e.game.state.laws.push(a),this.initialize(e)}},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"space-cadet"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.space_cadet=0,e.returnFactionName=e.returnFactionNamePreSpaceCadet,1}}),this.importAgendaCard("galactic-threat",{name:"Galactic Threat",type:"Law",text:"Elect a player. They must henceforth be referred to as the Galatic Threat",returnAgendaOptions:function(e){for(var t=[],a=0;a<e.game.players_info.length;a++)t.push(e.returnFaction(a+1));return t},initialize:function(e,t){null==e.galactic_threat_initialized&&(e.galactic_threat_initialized=1,1==e.game.state.galactic_threat&&(e.returnFactionNamePreGalacticThreat=e.returnFactionName,e.returnFactionName=function(e,t){return e.game.state.galactic_threat_player==t?"The Galactic Threat":e.returnFactionNamePreGalacticThreat(e,t)},e.returnFactionNameNicknamePreGalacticThreat=e.returnFactionNameNickname,e.returnFactionNameNickname=function(e,t){return e.game.state.galactic_threat_player==t?"Threat":e.returnFactionNameNicknamePreGalacticThreat(e,t)}))},onPass:function(e,t){e.game.state.galactic_threat=1;for(var a=0;a<e.game.players_info.length;a++)t===e.returnFaction(a+1)&&(e.game.state.galactic_threat_player=a+1);var r={agenda:"galactic-threat"};r.option=t,e.game.state.laws.push(r),this.initialize(e)},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"galactic-threat"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.galactic_threat=0,e.game.state.galactic_threat_initialized=0,e.returnFactionNamePreGalacticThreat&&(e.returnFactionName=e.returnFactionNamePreGalacticThreat),1}}),this.importAgendaCard("committee-formation",{name:"Committee Formation",type:"Law",elect:"player",text:"Elect a player. They may form a committee to vote on which player is elected in a future agenda",returnAgendaOptions:function(e){for(var t=[],a=0;a<e.game.players_info.length;a++)t.push(e.returnFaction(a+1));return t},preAgendaStageTriggers:function(e,t,a){return 1==e.game.state.committee_formation&&e.game.state.committee_formation_player==t&&"player"==e.agenda_cards[a].elect?1:0},preAgendaStageEvent:function(e,t,a){if(t!=e.game.player){var r=e.returnFaction(e.game.player)+" is deciding whether to Form a Committee";return e.updateStatus(r),0}return e.updateStatus('Do you wish to use Committee Formation to select the winner yourself? <ul><li class="textchoice" id="yes">assemble the committee</li><li class="textchoice" id="no">not this time</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){"no"==$(this).attr("id")&&e.endTurn();for(var a=0;a<e.game.players_info.length;a++)a!=e.game.player-1&&e.addMove("rider\t"+t+"\tassassinate-representative\t-1");e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" forms a committee..."),e.endTurn()})),0},onPass:function(e,t){e.game.state.committee_formation=1;for(var a=0;a<e.game.players_info.length;a++)t===e.returnFaction(a+1)&&(e.game.state.committee_formation_player=a+1);var r={agenda:"committee-formation"};r.option=t,console.log("pushing onto law: "+JSON.stringify(r)),e.game.state.laws.push(r)},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"committee_formation"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.committee_formation=0,e.game.state.committee_formation_player=-1,1}}),this.importAgendaCard("minister-of-policy",{name:"Minister of Policy",type:"Law",elect:"player",text:"Elect a player. They draw an extra action card at the start of each round",returnAgendaOptions:function(e){for(var t=[],a=0;a<e.game.players_info.length;a++)t.push(e.returnFaction(a+1));return t},onPass:function(e,t){e.game.state.minister_of_policy=1,e.game.state.minister_of_policy_player=t;for(var a=0;a<e.game.players_info.length;a++)t===e.returnFaction(a+1)&&(e.game.state.minister_of_policy_player=a+1);e.game.players_info[e.game.state.minister_of_policy_player-1].action_cards_bonus_when_issued++;var r={agenda:"minister-of-policy"};r.option=t,e.game.state.laws.push(r)},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"minister-of-policy"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.minister_of_policy=0,e.game.players_info[e.game.state.minister_of_policy_player-1].action_cards_bonus_when_issued--,e.game.state.minister_of_policy_player=-1,1}}),this.importAgendaCard("executive-sanctions",{name:"Executive Sanctions",type:"Law",text:"Players may have a maximum of 3 action cards in their hands at all times",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){if("support"==this.returnAgendaOptions(e)[t])for(var a=0;a<e.game.players_info.length;a++)e.game.players_info[a].action_card_limit=3;var r={agenda:"executive-sanctions"};return r.option=t,e.game.state.laws.push(r),1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"executive-sanctions"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);for(var a=0;a<e.game.players_info.length;a++)3==e.game.players_info[a].action_card_limit&&(e.game.players_info[a].action_card_limit=7);return 1}}),this.importAgendaCard("fleet-limitations",{name:"Fleet Limitations",type:"Law",text:"Players may have a maximum of four tokens in their fleet supply.",img:"/imperium/img/agenda_card_template.png",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){if("support"==this.returnAgendaOptions(e)[t])for(var a=0;a<e.game.players_info.length;a++)e.game.players_info[a].fleet_supply_limit=4,e.game.players_info[a].fleet_supply>=4&&(e.game.players_info[a].fleet_supply=4);return 1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"fleet-limitations"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);for(var a=0;a<e.game.players_info.length;a++)e.game.players_info[a].fleet_supply_limit=16;return 1}}),this.importAgendaCard("restricted-conscription",{name:"Restricted Conscription",type:"Law",text:"Production cost for infantry and fighters is 1 rather than 0.5 resources",img:"/imperium/img/agenda_card_template.png",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){"support"==this.returnAgendaOptions(e)[t]&&(e.units.infantry.cost=1,e.units.fighter.cost=1);var a={agenda:"restricted-conscription"};return a.option=t,e.game.state.laws.push(a),1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"restricted-conscription"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.units.infantry.cost=.5,e.units.fighter.cost=.5,1}}),this.importAgendaCard("wormhole-travel-ban",{name:"Wormhole Travel Ban",type:"Law",text:"All wormholes are closed.",img:"/imperium/img/agenda_card_template.png",returnAgendaOptions:function(e){return["support","oppose"]},onPass:function(e,t){"support"==this.returnAgendaOptions(e)[t]&&(e.game.state.wormholes_open=0);var a={agenda:"wormhole-travel-ban"};return a.option=t,e.game.state.laws.push(a),1},repealAgenda:function(e){for(var t=0;t<e.game.state.laws.length;t++)"wormhole-travel-ban"===e.game.state.laws[t].agenda&&(e.game.state.laws[t].option,e.game.state.laws.splice(t,1),t--);return e.game.state.wormholes_open=1,1}}),this.importActionCard("infiltrate",{name:"Infiltrate",type:"instant",text:"The next time you invade a planet, you may takeover any existing PDS units or Space Docks",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_infiltrate_infrastructure_on_invasion=1,1}}),this.importActionCard("reparations",{name:"Reparations",type:"action",text:"If you have lost a planet this round, refresh one of your planets",playActionCard:function(e,t,a,r){if(-1!=e.game.players_info[a-1].lost_planet_this_round){var n=e.returnPlayerExhaustedPlanetCards(e.game.player);return e.playerSelectPlanetWithFilter("Select an exhausted planet to refresh: ",(function(e){return n.includes(e)?1:0}),(function(t){return e.addMove("unexhaust\tplanet\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(a)+" refreshes "+e.game.planets[t].name),e.endTurn(),0}),null),0}return 1}}),this.importActionCard("political-stability",{name:"Political Stability",type:"instant",text:"Pick a strategy card you have already played this round. You may keep this for next round",playActionCard:function(e,t,a,r){if(e.game.player==a){for(var n='<div class="sf-readable">Pick a Strategy Card to keep for next round: </div><ul>',i=0;i<e.game.players_info[a-1].strategy_cards_played.length;i++){var s=e.game.players_info[a-1].strategy_cards_played[i];n+='<li class="option" id="'+s+'">'+e.strategy_cards[s].name+"</li>"}for(var o=0;o<e.game.players_info[a-1].strategy.length;o++)if(!e.game.players_info[e.game.player-1].strategy_cards_played.includes(e.game.players_info[a-1].strategy[o])){var c=e.game.players_info[a-1].strategy[o];n+='<li class="option" id="'+c+'">'+e.strategy_cards[c].name+"</li>"}n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");return e.addMove("strategy_card_retained\t"+e.game.player+"\t"+t),e.endTurn(),0}))}return 0},handleGameLoop:function(e,t,a){if("strategy_card_retained"==a[0]){var r=parseInt(a[1]),n=a[2];return e.game.queue.splice(t,1),e.game.players_info[r-1].strategy_cards_retained.push(n),1}return 1}}),this.importActionCard("lost-star-chart",{name:"Lost Star Chart",type:"instant",text:"During this turn, all wormholes are adjacent to each other",playActionCard:function(e,t,a,r){return e.game.state.temporary_wormholes_adjacent=1,1}}),this.importActionCard("plague",{name:"Plague",type:"action",text:"ACTION: Select a planet. Roll a dice for each infantry on planet and destroy number of rolls 6 or higher.",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Select a planet to cripple with the plague:",(function(t){return e.doesPlanetHaveInfantry(t)}),(function(t){return e.addMove("plague\t"+e.game.player+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" unleashes a plague on "+e.game.planets[t].name),e.endTurn(),0}),null),0},handleGameLoop:function(e,t,a){if("plague"==a[0]){for(var r=parseInt(a[1]),n=a[2],i=e.game.planets[n].sector,s=e.game.planets[n].idx,o=e.returnSectorAndPlanets(i),c=e.returnEventObjects(),l=o.p[s].owner,u=0,d=0;d<o.p[s].units.length;d++)for(var p=0;p<o.p[s].units[d].length;p++){var h=o.p[s].units[d][p];if("infantry"==h.type&&e.rollDice(10)>6){for(z_index in h.destroyed=1,c)h=c[z_index].unitDestroyed(this,r,h);u++}}return e.updateLog("The plague destroys "+u+" infantry"),e.eliminateDestroyedUnitsInSector(l,i),e.saveSystemAndPlanets(o),e.updateSectorGraphics(i),e.game.queue.splice(t,1),1}return 1}}),this.importActionCard("repeal-law",{name:"Repeal Law",type:"action",text:"ACTION: Repeal one law that is in effect.",playActionCard:function(e,t,a,r){if(e.game.player==a){for(var n='<div class="sf-readable">Pick a Law to Repeal: </div><ul>',i=0;i<e.game.state.laws.length;i++){var s=e.game.state.laws[i];n+='<li class="option" id="'+e.agenda_cards[s]+'">'+e.agenda_cards[r].name+"</li>"}n+='<li class="option" id="cancel">cancel</li>',n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");return"cancel"===t?(e.endTurn(),0):(e.addMove("repeal_law\t"+t),e.endTurn(),0)}))}return 0},handleGameLoop:function(e,t,a){if("repeal_law"==a[0]){var r=a[2];e.game.queue.splice(t,1);for(var n=0;n<e.game.state.laws.length;n++)if(e.game.state.laws[n]==r)return e.agenda_cards[r].repealAgenda(e),1;return 1}return 1}}),this.importActionCard("veto",{name:"Veto",type:"action",text:"ACTION: Select one agenda to remove from consideration and draw a replacement",playActionCard:function(e,t,a,r){if(e.game.player==a){var n="";for(n+="Select one agenda to quash in the Galactic Senate.<ul>",i=0;i<3;i++)n+='<li class="option" id="'+e.game.state.agendas[i]+'">'+e.agenda_cards[e.game.state.agendas[i]].name+"</li>";n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){var t=$(this).attr("id");e.hideAgendaCard(t),e.updateStatus("Quashing Agenda"),e.addMove("quash\t"+t+"\t1"),e.endTurn()}))}return 0}}),this.importActionCard("flank-speed1",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed2",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed3",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed4",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("propulsion-research",{name:"Propulsion Research",type:"instant",text:"Gain +1 movement on a single ship moved this turn",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_ship_move_bonus=1,1}}),this.importActionCard("military-drills",{name:"Military Drills",type:"action",text:"ACTION: Gain two new command tokens",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerAllocateNewTokens(a,2),0}}),this.importActionCard("cripple-defenses",{name:"Cripple Defenses",type:"action",text:"ACTION: Select a planet and destroy all PDS units on that planet",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Select a planet to destroy all PDS units on that planet: ",(function(t){return e.doesPlanetHavePDS(t)}),(function(t){for(var a=(t=e.game.planets[t]).sector,r=(t.tile,t.idx),n=e.returnSectorAndPlanets(a),i=0;i<n.p[r].units.length;i++)for(var s=0;s<n.p[r].units[i].length;s++)"pds"==n.p[r].units[i][s].type&&e.addMove("destroy_unit\t"+e.game.player+"\t"+(i+1)+"\tground\t"+a+"\t"+r+"\t"+s+"\t1");return e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys all PDS units destroyed on "+n.p[r].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("reactor-meltdown",{name:"Reactor Meltdown",type:"action",text:"ACTION: Select a non-homeworld planet and destroy one Space Dock on that planet",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Select a non-homeworld planet and destroy one Space Dock on that planet: ",(function(t){if(0==(t=e.game.planets[t]).hw&&e.doesPlanetHaveSpaceDock(t))return 1}),(function(t){for(var a=(t=e.game.planets[t]).sector,r=(t.tile,t.idx),n=e.returnSectorAndPlanets(a),i=0;i<n.p[r].units.length;i++)for(var s=0;s<n.p[r].units[i].length;s++)"spacedock"==n.p[r].units[i][s].type&&e.addMove("destroy_unit\t"+e.game.player+"\t"+(i+1)+"\tground\t"+a+"\t"+r+"\t"+s+"\t1");return e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys all Space Docks on "+n.p[r].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("lost-mission",{name:"Lost Mission",type:"action",text:"ACTION: Place 1 Destroyer in a system with no existing ships",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Select a sector with no existing ships in which to place a Destroyer: ",(function(t){return!e.doesSectorContainShips(t)}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\tAdding destroyer to gamebaord"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("accidental-colonization",{name:"Accidental Colonization",type:"action",text:"ACTION: Gain control of one planet not controlled by any player",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Select a planet not controlled by another player: ",(function(t){return-1==(t=e.game.planets[t]).owner?1:0}),(function(t){var a=(t=e.game.planets[t]).sector;return e.addMove("gain_planet\t"+e.game.player+"\t"+a+"\t"+t.idx),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" gains planet "+t.name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("uprising",{name:"Uprising",type:"action",text:"ACTION: Exhaust a non-home planet card held by another player. Gain trade goods equal to resource value.",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Exhaust a non-homeworld planet card held by another player. Gain trade goods equal to resource value.",(function(t){return-1!=(t=e.game.planets[t]).owner&&t.owner!=e.game.player&&0==t.exhausted&&0==t.hw?1:0}),(function(t){var a=(t=e.game.planets[t]).resources;return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+a),e.addMove("expend\t"+e.game.player+"\tplanet\t"+t.planet),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausting "+t.name+" and gaining "+a+" trade goods"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("diaspora-conflict",{name:"Diaspora Conflict",type:"action",text:"ACTION: Exhaust a non-home planet card held by another player. Gain trade goods equal to resource value.",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Exhaust a planet card held by another player. Gain trade goods equal to resource value.",(function(t){return-1!=(t=e.game.planets[t]).owner&&t.owner!=e.game.player&&0==t.exhausted&&0==t.hw?1:0}),(function(t){var a=t,r=(t=e.game.planets[t]).resources;return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+r),e.addMove("expend\t"+e.game.player+"\tplanet\t"+a),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausting "+t.name+" and gaining "+r+" trade goods"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("economic-initiative",{name:"Economic Initiative",type:"action",text:"ACTION: Ready each cultural planet in your control",playActionCard:function(e,t,a,r){for(var n in e.game.planets)e.game.planets[n].owner==a&&"cultural"==e.game.planets[n].type&&(e.game.planets[n].exhausted=0);return 1}}),this.importActionCard("focused-research",{name:"Focused Research",type:"action",text:"ACTION: Spend 4 Trade Goods to Research 1 Technology",playActionCard:function(e,t,a,r){return e.game.players_info[e.game.player-1].goods<4?(e.updateLog("Player does not have enough trade goods to research a technology"),1):(e.game.player==a&&e.playerResearchTechnology((function(t){e.addMove("purchase\t"+e.game.player+"\ttech\t"+t),e.addMove("expend\t"+e.game.player+"\tgoods\t4"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" researches "+e.tech[t].name),e.endTurn()})),0)}}),this.importActionCard("frontline-deployment",{name:"Frontline Deployment",type:"action",text:"ACTION: Deploy three infantry on one planet you control",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Deploy three infantry to a planet you control: ",(function(t){return e.game.planets[t].owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys three infantry to "+t.name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("ghost-ship",{name:"Ghost Ship",type:"action",text:"ACTION: Place a destroyer in a sector with a wormhole and no enemy ships",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Place a destroyer in a sector with a wormhole and no enemy ships: ",(function(t){return 0==e.doesSectorContainShips(t)&&0!=e.game.sectors[t].wormhole?1:0}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys a Destroyer to "+e.game.sectors[t].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("war-effort",{name:"War Effort",type:"action",text:"ACTION: Place a cruiser in a sector with one of your ships",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Place a cruiser in a sector with one of your ships: ",(function(a){return 1==e.doesSectorContainPlayerShips(t,a)?1:0}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tcruiser\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys a Cruiser to "+e.game.sectors[t].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("industrial-initiative",{name:"Industrial Initiative",type:"action",text:"ACTION: Gain a trade good for each industrial planet you control",playActionCard:function(e,t,a,r){var n=0;for(var i in e.game.planets)e.game.planets[i].owner==a&&"industrial"==e.game.planets[i].type&&n++;return n>0&&e.game.queue.push("purchase\t"+e.game.player+"\tgoods\t"+n),1}}),this.importActionCard("Insubordination",{name:"Insubordination",type:"action",text:"ACTION: Select a player and remove 1 token from their command pool",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlayerWithFilter("Select a player and remove one token from their command pool: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("expend\t"+t+"\tcommand\t1"),e.addMove("NOTIFY\t"+e.returnFactionNickname(t)+" loses one comand token"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("Lucky Shot",{name:"Lucky Shot",type:"action",text:"ACTION: Destroy a destroyer, cruiser or dreadnaught in a sector with a planet you control",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Destroy a destroyer, cruiser or dreadnaught in a sector containing a planet you control: ",(function(t){return e.doesSectorContainPlanetOwnedByPlayer(t,e.game.player)&&(e.doesSectorContainUnit(t,"destroyer")||e.doesSectorContainUnit(t,"cruiser")||e.doesSectorContainUnit(t,"dreadnaught"))?1:0}),(function(t){e.playerSelectOpponentUnitInSectorWithFilter("Select opponent ship in this sector to destroy: ",t,(function(e){return"destroyer"==e.type||"cruiser"==e.type||"dreadnaught"==e.type?1:0}),(function(t){var a=t.sector,r=(parseInt(t.unit.owner),t.unit_idx),n=e.returnSectorAndPlanets(a),i=t.unit;return e.addMove("destroy_unit\t"+e.game.player+"\t"+i.owner+"\tspace\t"+a+"\t-1\t"+r+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+i.name+" in "+n.name),e.endTurn(),0}),null)}),(function(){e.playerTurn()})),0}}),this.importActionCard("mining-initiative-ac",{name:"Mining Initiative",type:"action",text:"ACTION: Gain trade goods equal to the highest resource value planet you control",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=0;for(var i in e.game.planets)e.game.planets[i].owner==a&&e.game.planets[i].resources>n&&(n=e.game.planets[i].resources);return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+n),e.endTurn(),0}return 0}}),this.importActionCard("rise-of-a-messiah",{name:"Rise of a Messiah",type:"action",text:"ACTION: Add one infantry to each planet player controls",playActionCard:function(e,t,a,r){for(var n in e.game.planets)e.game.planets[n].owner==a&&(e.updateLog(e.returnFaction(a)+" adds 1 infantry to "+e.game.planets[n].name),e.addPlanetaryUnit(a,e.game.planets[n].sector,e.game.planets[n].idx,"infantry"));return 1}}),this.importActionCard("unstable-planet",{name:"Unstable Planet",type:"action",text:"ACTION: Choose a hazardous planet and exhaust it. Destroy 3 infantry on that planet if they exist",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Select a hazardous planet and exhaust it. Destroy 3 infantry on that planet if they exist",(function(t){return"hazardous"==(t=e.game.planets[t]).type?1:0}),(function(r){e.addMove("expend\t"+t+"\tplanet\t"+r);var n=e.game.planets[r],i=parseInt(n.owner),s=(parseInt(n.resources),0);if(i>=0)for(var o=0;o<n.units[i-1].length;o++)s<3&&"infantry"==n.units[i-1][o].type&&(e.addMove("destroy_unit\t"+a+"\t"+i+"\tground\t"+n.sector+"\t"+n.idx+"\t1"),s++);return e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("Covert Operation",{name:"Covert Operation",type:"action",text:"ACTION: Choose a player. They give you one of their action cards, if possible",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlayerWithFilter("Select a player. They give you one of their action cards: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("pull\t"+e.game.player+"\t"+t+"\taction\trandom"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" pulls a random action card from "+e.returnFaction(t)),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("tactical-bombardment",{name:"Tactical Bombardment",type:"action",text:"ACTION: Choose a sector in which you have ships with bombardment. Exhaust all planets in that sector",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Select a sector in which you have ships with bombardment. Exhaust all planets in that sector",(function(a){return 1==e.doesSectorContainPlayerUnit(t,a,"dreadnaught")||1==e.doesSectorContainPlayerUnit(t,a,"warsun")?1:0}),(function(a){for(var r=e.game.sectors[a].planets,n=0;n<r.length;n++)e.addMove("expend\t"+t+"\tplanet\t"+r[n]),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausts "+e.game.planets[r[n]].name);return e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("signal-jamming",{name:"Signal Jamming",type:"action",text:"ACTION: Choose a player. They must activate a system in or next to a system in which you have a ship",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Select a sector in which you have a ship or one adjacent to one: ",(function(t){return e.isPlayerShipAdjacentToSector(a,t)?1:0}),(function(t){e.playerSelectPlayerWithFilter("Select a player to signal jam in that sector: ",(function(t){return t!=e.game.player?1:0}),(function(a){return e.addMove("activate\t"+a+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(a)+" suffers signal jamming in "+e.game.sectors[t].name),e.endTurn(),0}),null)}),(function(){e.playerTurn()})),0}}),this.importActionCard("unexpected-action",{name:"Unexpected Action",type:"action",text:"ACTION: Deactivate a stystem you have activated. Gain one command or strategy token: ",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Select a sector that you have activated and deactivate it: ",(function(t){if(1==e.game.sectors[t].activated[a-1])return 1}),(function(t){return e.addMove("purchase\t"+a+"\tcommand\t1"),e.addMove("deactivate\t"+a+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(a)+" deactivates "+e.game.sectors[t].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("in-the-silence-of-space",{name:"In the Silence of Space",type:"instant",text:"Your ships may move through sectors with other player ships this turn: ",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_move_through_sectors_with_opponent_ships=1,1}})}},{key:"initializeHTML",value:function(e){var t=this,a=this;c(h(b.prototype),"initializeHTML",this).call(this,e);try{this.app.modules.respondTo("chat-manager").forEach((function(a){a.respondTo("chat-manager").render(e,t),a.respondTo("chat-manager").attachEvents(e,t)})),$(".content").css("visibility","visible"),$(".hud_menu_game-status").css("display","none"),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"Log",id:"game-log",class:"game-log",callback:function(e,t){t.menu.hideSubMenus(),t.log.toggleLog()}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}}),this.menu.addMenuOption({text:"Rules",id:"game-howto",class:"game-howto",callback:function(e,t){t.menu.hideSubMenus(),t.handleHowToPlayMenuItem()}}),this.menu.addMenuOption({text:"Cards",id:"game-cards",class:"game-cards",callback:function(e,t){t.menu.showSubMenu("game-cards")}}),this.menu.addSubMenuOption("game-cards",{text:"Strategy",id:"game-strategy",class:"game-strategy",callback:function(e,t){t.menu.hideSubMenus(),t.handleStrategyMenuItem()}}),this.menu.addSubMenuOption("game-cards",{text:"Tech",id:"game-tech",class:"game-tech",callback:function(e,t){t.menu.hideSubMenus(),t.handleTechMenuItem()}}),this.menu.addSubMenuOption("game-cards",{text:"Units",id:"game-units",class:"game-units",callback:function(e,t){t.menu.hideSubMenus(),t.handleUnitsMenuItem()}}),this.menu.addSubMenuOption("game-cards",{text:"Agendas",id:"game-agendas",class:"game-agendas",callback:function(e,t){t.menu.hideSubMenus(),t.handleAgendasMenuItem()}}),this.menu.addSubMenuOption("game-cards",{text:"Laws",id:"game-laws",class:"game-laws",callback:function(e,t){t.menu.hideSubMenus(),t.handleLawsMenuItem()}}),this.menu.addSubMenuOption("game-cards",{text:"Objectives",id:"game-vp",class:"game-vp",callback:function(e,t){t.menu.hideSubMenus(),t.handleObjectivesMenuItem()}}),this.menu.addMenuOption({text:"Sectors",id:"game-info",class:"game-info",callback:function(e,t){t.menu.showSubMenu("game-info")}}),this.menu.addSubMenuOption("game-info",{text:"Sectors",id:"game-sectors",class:"game-sectors",callback:function(e,t){t.menu.hideSubMenus(),t.handleSystemsMenuItem()}}),this.menu.addSubMenuOption("game-info",{text:"Planets",id:"game-planets",class:"game-planets",callback:function(e,t){t.menu.hideSubMenus(),t.handleInfoMenuItem()}});try{for(var r=0,n=0,i=0;i<this.app.modules.mods.length;i++)if("Chat"===this.app.modules.mods[i].name)for(var s=0;s<this.game.players.length;s++)this.game.players[s]!=this.app.wallet.returnPublicKey()&&function(){var e=[t.game.players[s],t.app.wallet.returnPublicKey()].sort(),o=t.app.crypto.hash(e.join("_")),c=a.returnFaction(s+1),l=a.returnFactionNickname(s+1),u=t.app.modules.mods[i];0==r&&(t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),r=1),0==n&&(t.menu.addSubMenuOption("game-chat",{text:"Group",id:"game-chat-community",class:"game-chat-community",callback:function(e,t){t.menu.hideSubMenus(),u.sendEvent("chat-render-request",{}),u.mute_community_chat=0,u.openChatBox()}}),n=1),t.menu.addSubMenuOption("game-chat",{text:l,id:"game-chat-"+(s+1),class:"game-chat-"+(s+1),callback:function(t,a){a.menu.hideSubMenus(),u.createChatGroup(e,c),u.openChatBox(o),u.sendEvent("chat-render-request",{}),u.saveChat()}})}()}catch(e){console.log("error initing chat: "+e)}if(0==this.browser_active)return;this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){e.browser.requestFullscreen()}}),this.menu.render(e,this),this.menu.attachEvents(e,this),this.hud.render(e,this),this.hud.attachEvents(e,this),this.log.render(e,this),this.log.attachEvents(e,this),this.cardbox.render(e,this),this.cardbox.attachEvents(e,this),this.hud.render(e,this),this.hud.attachEvents(e,this);try{e.browser.isMobileBrowser(navigator.userAgent)?(this.hammer.render(this.app,this),this.hammer.attachEvents(this.app,this,"#hexGrid")):(this.sizer.render(this.app,this),this.sizer.attachEvents(this.app,this,"#hexGrid"))}catch(e){}this.hud.addCardType("textchoice","",null)}catch(e){}}},{key:"initializeGame",value:(f=s(regeneratorRuntime.mark((function e(t){var a,r,n,i,s,o,c,l,u,d,p,h,f,m,g,b,y,v,_,w,x,k,S,P,E,C,A,M,T,j,O,D,I,R,B,q,L,N,F,U,z,H,G,K,W,V,Y,J;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.preloadImages(),this.updateStatus("loading game...: "+t),this.loadGame(t),""!=this.game.status&&this.updateStatus(this.game.status),""!=this.game.log&&this.game.log.length>0)for(a=this.game.log.length-1;a>=0;a--)this.updateLog(this.game.log[a]);if(this.totalPlayers=this.game.players.length,this.initializeGameObjects(),r=this.returnHomeworldSectors(this.totalPlayers),n=0,null==this.game.board){for(n=1,this.initializeDice(),this.game.players_info=this.returnPlayers(this.totalPlayers),this.game.state=this.returnState(),this.game.sectors=this.returnSectors(),this.game.planets=this.returnPlanets(),this.game.board={},i=1,s=4;i<=7;i++){for(o=1;o<=s;o++)c=i+"_"+o,this.game.board[c]={tile:""};i<4&&s++,i>=4&&s--}for(l in this.game.strategy_cards=[],this.strategy_cards)this.game.strategy_cards.push(l),this.game.state.strategy_cards_bonus.push(0);if(2==this.totalPlayers){try{$("#1_3").attr("id",""),$("#1_4").attr("id",""),$("#2_4").attr("id",""),$("#2_4").attr("id",""),$("#2_5").attr("id",""),$("#3_1").attr("id",""),$("#4_1").attr("id",""),$("#4_2").attr("id",""),$("#5_1").attr("id",""),$("#5_2").attr("id",""),$("#6_1").attr("id",""),$("#6_2").attr("id",""),$("#6_3").attr("id",""),$("#6_4").attr("id",""),$("#6_5").attr("id",""),$("#7_1").attr("id",""),$("#7_2").attr("id",""),$("#7_3").attr("id",""),$("#7_4").attr("id","")}catch(e){}delete this.game.board["1_3"],delete this.game.board["1_4"],delete this.game.board["2_4"],delete this.game.board["2_5"],delete this.game.board["3_1"],delete this.game.board["4_1"],delete this.game.board["4_2"],delete this.game.board["5_1"],delete this.game.board["5_2"],delete this.game.board["6_1"],delete this.game.board["6_2"],delete this.game.board["6_3"],delete this.game.board["6_4"],delete this.game.board["6_5"],delete this.game.board["7_1"],delete this.game.board["7_2"],delete this.game.board["7_3"],delete this.game.board["7_4"]}if(3==this.totalPlayers){try{$("#1_3").attr("id",""),$("#1_4").attr("id",""),$("#2_4").attr("id",""),$("#2_5").attr("id",""),$("#3_1").attr("id",""),$("#4_1").attr("id",""),$("#4_2").attr("id",""),$("#5_1").attr("id",""),$("#6_4").attr("id",""),$("#6_5").attr("id",""),$("#7_3").attr("id",""),$("#7_4").attr("id","")}catch(e){}delete this.game.board["1_3"],delete this.game.board["1_4"],delete this.game.board["2_4"],delete this.game.board["2_5"],delete this.game.board["3_1"],delete this.game.board["4_1"],delete this.game.board["4_2"],delete this.game.board["5_1"],delete this.game.board["6_4"],delete this.game.board["6_5"],delete this.game.board["7_3"],delete this.game.board["7_4"]}for(p in u=JSON.parse(JSON.stringify(this.returnSectors())),d=[],this.game.board["4_4"].tile="new-byzantium",this.game.board)if("4_4"!=p&&!r.includes(p))for(h=0,f=Object.keys(u);0==h;)m=f[this.rollDice(f.length)-1],1!=this.game.sectors[m].hw&&1!=d.includes(m)&&1!=this.game.sectors[m].mr&&(d.push(m),delete u[m],this.game.board[p].tile=m,h=1);for(this.returnSectorAndPlanets("4_4").p[0].owner=1,g=0;g<this.game.players_info.length;g++)this.game.players_info[g].homeworld=r[g],this.game.board[r[g]].tile=this.factions[this.game.players_info[g].faction].homeworld;for(b=0;b<this.totalPlayers;b++){for(y=this.returnSectorAndPlanets(r[b]),v=0,_=0,I=0;I<y.p.length;I++)y.p[I].owner=b+1,y.p[I].resources>_&&(v=I,_=y.p[I].resources);for(w=0;w<this.factions[this.game.players_info[b].faction].space_units.length;w++)this.addSpaceUnit(b+1,r[b],this.factions[this.game.players_info[b].faction].space_units[w]);for(x=0;x<this.factions[this.game.players_info[b].faction].ground_units.length;x++)this.loadUnitOntoPlanet(b+1,r[b],v,this.factions[this.game.players_info[b].faction].ground_units[x]);for(this.returnTechnology(),k=0;k<this.factions[this.game.players_info[b].faction].tech.length;k++)S=this.factions[this.game.players_info[b].faction].tech[k],this.game.players_info[b].tech.push(S);for(P=0;P<this.factions[this.game.players_info[b].faction].promissary_notes.length;P++)E=this.factions[this.game.players_info[b].faction].id+"-"+this.factions[this.game.players_info[b].faction].promissary_notes[P],this.game.players_info[b].promissary_notes.push(E);this.saveSystemAndPlanets(y)}if(0==this.game.queue.length){for(T in C=this.returnStageIPublicObjectives(),A=this.returnStageIIPublicObjectives(),M=this.returnSecretObjectives(),C)C[T].minPlayers>this.game.players.length&&delete C[T];for(j in A)A[j].minPlayers>this.game.players.length&&delete A[j];for(O in M)M[O].minPlayers>this.game.players.length&&delete M[O];for(this.game.queue.push("turn"),this.game.queue.push("newround"),D=0;D<this.game.players_info.length;D++)this.game.queue.push("gain\t"+(D+1)+"\tsecret_objectives\t1"),this.game.queue.push("DEAL\t6\t"+(D+1)+"\t1");this.game.queue.push("SHUFFLE\t1"),this.game.queue.push("SHUFFLE\t2"),this.game.queue.push("SHUFFLE\t3"),this.game.queue.push("SHUFFLE\t4"),this.game.queue.push("SHUFFLE\t5"),this.game.queue.push("SHUFFLE\t6"),this.game.queue.push("POOL\t3"),this.game.queue.push("POOL\t2"),this.game.queue.push("POOL\t1"),this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnStrategyCards())),this.game.queue.push("DECK\t2\t"+JSON.stringify(this.returnActionCards())),this.game.queue.push("DECK\t3\t"+JSON.stringify(this.returnAgendaCards())),this.game.queue.push("DECK\t4\t"+JSON.stringify(C)),this.game.queue.push("DECK\t5\t"+JSON.stringify(A)),this.game.queue.push("DECK\t6\t"+JSON.stringify(M))}}for(I=this.returnEventObjects(),R=0;R<I.length;R++)for(B=0;B<this.game.players_info.length;B++)I[R].initialize(this,B+1);if(1==n){for(q=0;q<I.length;q++)for(L=0;L<this.game.players_info.length;L++)for(N=0;N<this.game.players_info[L].tech.length;N++)I[q].gainTechnology(this,L+1,this.game.players_info[L].tech[N]);for(F=0;F<this.game.players_info.length;F++)this.upgradePlayerUnitsOnBoard(F+1)}for(U in this.game.board){if(z=this.game.board[U].tile,(H=this.returnSectorAndPlanets(z)).s.sector=z,H.s.tile=U,null!=H.p)for(G=0;G<H.p.length;G++)H.p[G].sector=z,H.p[G].tile=U,H.p[G].idx=G,H.p[G].hw=H.s.hw,H.p[G].planet=H.s.planets[G],1==H.s.hw&&(H.p[G].hw=1);this.saveSystemAndPlanets(H)}for(this.returnSectorAndPlanets("2_1"),K=0;K<this.game.state.laws.length;K++)(W=this.game.state.laws[K]).agenda,V=W.option,this.agenda_cards[W.agenda]&&this.agenda_cards[W.agenda].initialize(this,V);try{$(".hud-body > .log").remove(),$(".status").css("display","block")}catch(e){}for(Y in this.game.board){J="#"+Y;try{$(J).html('           <div class="hexIn" id="hexIn_'+Y+'">             <div class="hexLink" id="hexLink_'+Y+'">             <div class="hexInfo" id="hex_info_'+Y+'"></div>               <div class="hex_bg" id="hex_bg_'+Y+'">                 <img class="hex_img sector_graphics_background '+this.game.board[Y].tile+'" id="hex_img_'+Y+'" src="" />                 <img src="/imperium/img/frame/border_full_white.png" id="hex_img_faction_border_'+Y+'" class="faction_border" />                 <img src="/imperium/img/frame/border_full_yellow.png" id="hex_img_hazard_border_'+Y+'" class="hazard_border" />                 <div class="hex_activated" id="hex_activated_'+Y+'">               </div>                 <div class="hex_space" id="hex_space_'+Y+'">               </div>                 <div class="hex_ground" id="hex_ground_'+Y+'">               </div>               </div>             </div>           </div>         '),$("#hex_img_"+Y).attr("src",this.game.sectors[this.game.board[Y].tile].img),this.updateSectorGraphics(Y)}catch(e){}}this.updateLeaderboard(),this.game.state.playing_strategy_card_secondary=0,this.addEventsToBoard(),this.addUIEvents();case 22:case"end":return e.stop()}}),e,this)}))),function(e){return f.apply(this,arguments)})},{key:"preloadImages",value:(n=s(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=["img/starscape_background1.jpg","img/ships/carrier_100x200.png","img/ships/destroyer_100x200.png","img/ships/dreadnaught_100x200.png","img/ships/fighter_100x200.png","img/ships/pds_100x200.png","img/ships/spacedock_100x200.png","img/ships/cruiser_100x200.png","img/strategy/BUILD.png","img/strategy/DIPLOMACY.png","img/strategy/EMPIRE.png","img/strategy/INITIATIVE.png","img/strategy/MILITARY.png","img/strategy/POLITICS.png","img/strategy/TECH.png","img/strategy/TRADE.png","img/influence/5.png","img/influence/8.png","img/influence/2.png","img/influence/1.png","img/influence/7.png","img/influence/0.png","img/influence/9.png","img/influence/4.png","img/influence/3.png","img/influence/6.png","img/agenda_card_template.png","img/card_template.jpg","img/secret_objective_ii_back.png","img/units/fighter.png","img/units/flagship.png","img/units/spacedock.png","img/units/warsun.png","img/units/dreadnaught.png","img/units/cruiser.png","img/units/infantry.png","img/units/pds.png","img/units/carrier.png","img/units/destroyer.png","img/action_card_back.jpg","img/arcade/arcade-banner-background.png","img/secret_objective2.jpg","img/objective_card_1_template.png","img/techicons/Cyber D.png","img/techicons/Warfare D.png","img/techicons/Warfare L.png","img/techicons/Biotic D.png","img/techicons/Propultion Dark.png","img/techicons/Biotic L.png","img/techicons/Cybernetic D.png","img/techicons/Propultion Light.png","img/techicons/Cybernetic L.png","img/secret_objective_back.png","img/planet_card_template.png","img/secret_objective.jpg","img/arcade_release.jpg","img/tech_card_template.jpg","img/blank_influence_hex.png","img/spaceb2.jpg","img/frame/white_space_frame_1_5.png","img/frame/white_space_frame_4_1.png","img/frame/white_planet_center_1_9.png","img/frame/white_planet_center_3_1.png","img/frame/white_space_frame_full.png","img/frame/white_space_frame_4_9.png","img/frame/white_space_frame_6_3.png","img/frame/white_space_frame_2_4.png","img/frame/white_space_frame_3_2.png","img/frame/white_space_frame_2_2.png","img/frame/white_space_frame_2_3.png","img/frame/white_space_frame_2_6.png","img/frame/white_space_frame_7_4.png","img/frame/white_planet_center_2_5.png","img/frame/white_space_frame_5_8.png","img/frame/white_space_frame_1_4.png","img/frame/white_space_frame_4_4.png","img/frame/white_space_frame_4_7.png","img/frame/white_space_frame_2_1.png","img/frame/white_planet_center_2_1.png","img/frame/white_planet_center_2_9.png","img/frame/white_space_frame_4_3.png","img/frame/border_full_yellow.png","img/frame/white_planet_center.png","img/frame/white_space_frame_3_6.png","img/frame/white_space_frame_7_8.png","img/frame/white_planet_center_3_7.png","img/frame/border_corner_red.png","img/frame/white_space_frame_2_7.png","img/frame/white_space_frame_3_3.png","img/frame/white_space_frame_7_7.png","img/frame/white_planet_center_3_5.png","img/frame/white_planet_right_bottom.png","img/frame/white_space_frame_6_2.png","img/frame/white_planet_left_top.png","img/frame/white_space_frame_5_7.png","img/frame/white_space_frame_2_5.png","img/frame/white_space_frame_1_3.png","img/frame/white_space_frame_4_2.png","img/frame/white_space_frame_3_8.png","img/frame/white_space_frame_2_8.png","img/frame/white_planet_center_1_8.png","img/frame/white_space_frame_3_9.png","img/frame/white_space_frame_3_5.png","img/frame/white_space_frame_4_5.png","img/frame/white_space_frame_5_3.png","img/frame/white_planet_center_2_4.png","img/frame/white_planet_center_2_3.png","img/frame/white_space_frame_1_1.png","img/frame/white_space_frame_1_7.png","img/frame/white_space_frame_7_1.png","img/frame/white_space_frame_7_9.png","img/frame/white_space_frame_5_9.png","img/frame/white_planet_center_2_7.png","img/frame/white_space_frame_6_8.png","img/frame/white_planet_center_3_4.png","img/frame/white_space_frame_3_7.png","img/frame/white_space_frame_6_7.png","img/frame/white_space_frame_6_4.png","img/frame/white_planet_center_2_6.png","img/frame/white_space_warsun.png","img/frame/border_corner_yellow.png","img/frame/white_planet_center_3_9.png","img/frame/white_planet_center_3_3.png","img/frame/white_space_frame_5_6.png","img/frame/white_space_frame_5_2.png","img/frame/border_full_white.png","img/frame/white_planet_center_3_6.png","img/frame/white_space_carrier.png","img/frame/border_full_red.png","img/frame/white_space_flagship.png","img/frame/white_space_destroyer.png","img/frame/white_space_frame_4_6.png","img/frame/white_planet_center_2_2.png","img/frame/white_space_frame_4_8.png","img/frame/white_space_cruiser.png","img/frame/white_space_frame_3_4.png","img/frame/white_planet_center_1_6.png","img/frame/white_planet_center_1_1.png","img/frame/white_space_frame_5_4.png","img/frame/white_space_frame_6_9.png","img/frame/white_space_frame_7_5.png","img/frame/white_planet_center_1_7.png","img/frame/white_space_frame_1_8.png","img/frame/white_space_frame_7_6.png","img/frame/white_planet_center_3_2.png","img/frame/white_planet_center_1_4.png","img/frame/white_space_frame_7_2.png","img/frame/white_space_frame_5_1.png","img/frame/white_space_frame_7_3.png","img/frame/white_space_frame_6_6.png","img/frame/white_space_frame_1_6.png","img/frame/white_planet_center_3_8.png","img/frame/white_space_frame.png","img/frame/white_space_frame_1_9.png","img/frame/white_space_frame_6_5.png","img/frame/white_planet_center_1_2.png","img/frame/white_planet_center_2_8.png","img/frame/white_space_frame_5_5.png","img/frame/white_space_frame_2_9.png","img/frame/white_space_frame_3_1.png","img/frame/white_space_frame_6_1.png","img/frame/white_space_dreadnaught.png","img/frame/white_planet_center_1_3.png","img/frame/white_space_frame_1_2.png","img/frame/white_space_fighter.png","img/frame/white_planet_center_1_5.png","img/sectors/sector13.png","img/sectors/sector71.png","img/sectors/sector6.png","img/sectors/sector35.png","img/sectors/sector66.png","img/sectors/sector9.png","img/sectors/sector20.png","img/sectors/sector25.png","img/sectors/sector39.png","img/sectors/sector23.png","img/sectors/sector11.png","img/sectors/sector69.png","img/sectors/sector4.png","img/sectors/sector53.png","img/sectors/sector60.png","img/sectors/sector10.png","img/sectors/sector28.png","img/sectors/sector2.png","img/sectors/sector43.png","img/sectors/sector27.png","img/sectors/sector72.png","img/sectors/sector55.png","img/sectors/sector49.png","img/sectors/sector50.png","img/sectors/sector65.png","img/sectors/sector58.png","img/sectors/sector29.png","img/sectors/sector44.png","img/sectors/sector41.png","img/sectors/sector19.png","img/sectors/sector1.png","img/sectors/sector73.png","img/sectors/sector40.png","img/sectors/sector52.png","img/sectors/sector42.png","img/sectors/sector59.png","img/sectors/sector57.png","img/sectors/sector3.png","img/sectors/sector18.png","img/sectors/sector32.png","img/sectors/sector22.png","img/sectors/sector63.png","img/sectors/sector38.png","img/sectors/sector70.png","img/sectors/sector16.png","img/sectors/sector14.png","img/sectors/sector54.png","img/sectors/sector62.png","img/sectors/sector8.png","img/sectors/sector36.png","img/sectors/sector48.png","img/sectors/sector17.png","img/sectors/sector33.png","img/sectors/sector26.png","img/sectors/sector56.png","img/sectors/sector61.png","img/sectors/sector15.png","img/sectors/sector34.png","img/sectors/sector51.png","img/sectors/sector12.png","img/sectors/sector7.png","img/sectors/sector5.png","img/sectors/sector21.png","img/sectors/sector30.png","img/sectors/sector31.png","img/sectors/sector24.png","img/sectors/sector47.png","img/sectors/sector68.png","img/sectors/sector67.png","img/sectors/sector64.png","img/sectors/sector45.png","img/sectors/sector46.png","img/blank_resources_hex.png","img/factions/faction2.jpg","img/factions/faction1.jpg","img/factions/faction3.jpg","img/spacebg.png","img/resources/5.png","img/resources/8.png","img/resources/2.png","img/resources/1.png","img/resources/7.png","img/resources/0.png","img/resources/9.png","img/resources/4.png","img/resources/3.png","img/resources/6.png","img/planets/HARKON-CALEDONIA.png","img/planets/KLENCORY.png","img/planets/STARTIDE.png","img/planets/UNSULLA.png","img/planets/GRAVITYS-EDGE.png","img/planets/OLYMPIA.png","img/planets/OTHO.png","img/planets/ARCHION-REX.png","img/planets/KROEBER.png","img/planets/COTILLARD.png","img/planets/INCARTH.png","img/planets/XERXES-IV.png","img/planets/HEARTHSLOUGH.png","img/planets/QUARTIL.png","img/planets/SOUNDRA-IV.png","img/planets/INDUSTRYL.png","img/planets/VIGOR.png","img/planets/CALTHREX.png","img/planets/VESPAR.png","img/planets/HIRAETH.png","img/planets/LAZAKS-CURSE.png","img/planets/CRYSTALIS.png","img/planets/SINGHARTA.png","img/planets/JOL.png","img/planets/NOVA-KLONDIKE.png","img/planets/QUANDAM.png","img/planets/OLD-MOLTOUR.png","img/planets/FIREHOLE.png","img/planets/CONTOURI-I.png","img/planets/CONTOURI-II.png","img/planets/SIRENS-END.png","img/planets/FJORDRA.png","img/planets/LORSTRUCK.png","img/planets/SHRIVA.png","img/planets/EARTH.png","img/planets/HOTH.png","img/planets/KROMER.png","img/planets/VOLUNTRA.png","img/planets/EBERBACH.png","img/planets/NEW-BYZANTIUM.png","img/planets/TROTH.png","img/planets/ARTIZZ.png","img/planets/NEW-JYLANX.png","img/planets/XIAO-ZUOR.png","img/planets/NAR.png","img/planets/GIANTS-DRINK.png","img/planets/GRANTON-MEX.png","img/planets/MIRANDA.png","img/planets/HOPES-LURE.png","img/planets/OUTERANT.png","img/planets/BELVEDYR.png","img/planets/YODERUX.png","img/planets/YSSARI-II.png","img/planets/QUAMDAM.png","img/planets/ZONDOR.png","img/planets/SIGURD.png","img/planets/MECHANEX.png","img/planets/RIFTVIEW.png","img/planets/POPULAX.png","img/planets/GROX-TOWERS.png","img/planets/BREST.png","img/planets/TERRA-CORE.png","img/planets/QUANDOR.png","img/planets/DOMINIC.png","img/planets/LONDRAK.png","img/planets/PESTULON.png","img/planets/NEW-ILLIA.png","img/planets/LEGUIN.png","img/planets/UDON-I.png","img/planets/CITADEL.png","img/planets/UDON-II.png","img/planets/PERTINAX.png","img/planets/ARCHION-TAO.png","img/planets/CRAW-POPULI.png","img/planets/RIFVIEW.png","img/planets/BROUGHTON.png","img/planets/AANDOR.png","img/tech_tree.png","img/action_card_template.png","img/objective_card_2_template.png"],this.preloadImageArray(t,0);case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"preloadImageArray",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[e.length];e&&e.length>a&&(r[a]=new Image,r[a].onload=function(){t.preloadImageArray(e,a+1)},r[a].src="/imperium/"+e[a])}},{key:"respondTo",value:function(e){if(null!=c(h(b.prototype),"respondTo",this).call(this,e))return c(h(b.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/imperium/img/arcade/arcade-banner-background.png",title:"Red Imperium"};return t}return null}},{key:"hideOverlays",value:function(){document.querySelectorAll(".overlay").forEach((function(e){e.classList.add("hidden")}))}},{key:"handleHowToPlayMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnHowToPlayOverlay())}},{key:"handleTechMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnTechOverlay())}},{key:"handleAgendasMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnAgendasOverlay())}},{key:"handleLawsMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnLawsOverlay())}},{key:"handleUnitsMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnUnitsOverlay());var e=this;$("#close-units-btn").on("click",(function(){e.overlay.hideOverlay()}))}},{key:"handleStrategyMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnStrategyOverlay())}},{key:"handleObjectivesMenuItem",value:function(){this.overlay.showOverlay(this.app,this,this.returnObjectivesOverlay())}},{key:"handleInfoMenuItem",value:function(){if(document.querySelector(".gameboard").classList.contains("bi"))for(var e in this.game.sectors)this.removeSectorHighlight(e),document.querySelector(".gameboard").classList.remove("bi");else for(var t in this.game.sectors)this.addSectorHighlight(t),document.querySelector(".gameboard").classList.add("bi")}},{key:"handleSystemsMenuItem",value:function(){var e=this.returnFactions();for(var t in this.activated_systems_player++,this.activated_systems_player>this.game.players_info.length&&(this.activated_systems_player=1),salert("Showing Systems Activated by ".concat(e[this.game.players_info[this.activated_systems_player-1].faction].name)),$(".hex_activated").css("background-color","transparent"),$(".hex_activated").css("opacity","0.3"),this.game.board)if(1==this.game.sectors[this.game.board[t].tile].activated[this.activated_systems_player-1]){var a="#hex_activated_"+t;$(a).css("background-color","var(--p"+this.activated_systems_player+")"),$(a).css("opacity","0.3")}}},{key:"returnTechnology",value:function(){return this.tech}},{key:"importTech",value:function(e,t){null==t.name&&(t.name="Unknown Technology"),null==t.img&&(t.img="/imperium/img/tech_card_template.jpg"),null==t.faction&&(t.faction="all"),null==t.prereqs&&(t.prereqs=[]),null==t.color&&(t.color=""),null==t.type&&(t.type="normal"),null==t.text&&(t.text=""),null==t.unit&&(t.unit=0),t=this.addEvents(t),this.tech[e]=t}},{key:"doesPlayerHaveTech",value:function(e,t){for(var a=0;a<this.game.players_info[e-1].tech.length;a++)if(this.game.players_info[e-1].tech[a]==t)return 1;return 0}},{key:"returnTechCardHTML",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tech_card",a=this.tech[e].name,r=this.tech[e].text,n=this.tech[e].color,i="",s=0;s<this.tech[e].prereqs.length;s++)"yellow"==this.tech[e].prereqs[s]&&(i+='<span class="yellow">♦</span>'),"blue"==this.tech[e].prereqs[s]&&(i+='<span class="blue">♦</span>'),"green"==this.tech[e].prereqs[s]&&(i+='<span class="green">♦</span>'),"red"==this.tech[e].prereqs[s]&&(i+='<span class="red">♦</span>');var o='\n    <div class="tech_'.concat(n," ").concat(t,'">\n      <div class="tech_card_name">').concat(a,'</div>\n      <div class="tech_card_content">').concat(r,'</div>\n      <div class="tech_card_level">').concat(i,"</div>\n    </div>\n    ");return o}},{key:"returnUnits",value:function(){return this.units}},{key:"importUnit",value:function(e,t){null==t.name&&(t.name="Unknown Unit"),null==t.owner&&(t.owner=-1),null==t.type&&(t.type=""),null==t.storage&&(t.storage=[]),null==t.shots&&(t.shots=1),null==t.space&&(t.space=1),null==t.ground&&(t.ground=0),null==t.cost&&(t.cost=1),null==t.capacity&&(t.capacity=0),null==t.capacity_required&&(t.capacity_required=0),null==t.can_be_stored&&(t.can_be_stored=0),null==t.strength&&(t.strength=0),null==t.max_strength&&(t.max_strength=t.strength),null==t.combat&&(t.combat=0),null==t.destroyed&&(t.destroyed=0),null==t.move&&(t.move=0),null==t.range&&(t.range=0),null==t.last_round_damaged&&(t.last_round_damaged=0),null==t.production&&(t.production=0),null==t.extension&&(t.extension=0),null==t.may_fly_through_sectors_containing_other_ships&&(t.may_fly_through_sectors_containing_other_ships=0),null==t.description&&(t.description=""),null==t.anti_fighter_barrage&&(t.anti_fighter_barrage=0),null==t.anti_fighter_barrage_combat&&(t.anti_fighter_barrage_combat=0),null==t.temporary_combat_modifier&&(t.temporary_combat_modifier=0),null==t.bombardment_rolls&&(t.bombardment_rolls=0),null==t.bombardment_combat&&(t.bombardment_combat=-1),t=this.addEvents(t),this.units[e]=t}},{key:"resetTemporaryModifiers",value:function(e){e.temporary_combat_modifier=0}},{key:"returnUnitsInStorage",value:function(e){for(var t=[],a=0;a<e.storage.length;a++)t.push(e.storage[a]);return t}},{key:"addPlanetaryUnit",value:function(e,t,a,r){return this.loadUnitOntoPlanet(e,t,a,r)}},{key:"addPlanetaryUnitByJSON",value:function(e,t,a,r){return this.loadUnitByJSONOntoPlanet(e,t,a,unitname)}},{key:"addSpaceUnit",value:function(e,t,a){var r=this.returnSectorAndPlanets(t),n=this.returnUnit(a,e);return r.s.units[e-1].push(n),this.saveSystemAndPlanets(r),JSON.stringify(n)}},{key:"addSpaceUnitByJSON",value:function(e,t,a){var r=this.returnSectorAndPlanets(t);return r.s.units[e-1].push(JSON.parse(a)),this.saveSystemAndPlanets(r),a}},{key:"removeSpaceUnit",value:function(e,t,a){for(var r=this.returnSectorAndPlanets(t),n=0;n<r.s.units[e-1].length;n++)if(r.s.units[e-1][n].type===a){var i=r.s.units[e-1].splice(n,1);return this.saveSystemAndPlanets(r),JSON.stringify(i[0])}}},{key:"removeSpaceUnitByJSON",value:function(e,t,a){for(var r=this.returnSectorAndPlanets(t),n=0;n<r.s.units[e-1].length;n++){var i=r.s.units[e-1][n],s=JSON.parse(JSON.stringify(i)),o=JSON.stringify(i),c=JSON.stringify(s);if(1==i.already_moved&&(delete s.already_moved,c=JSON.stringify(s)),o===a||c===a)return r.s.units[e-1].splice(n,1),this.saveSystemAndPlanets(r),a}return""}},{key:"loadUnitOntoPlanet",value:function(e,t,a,r){var n=this.returnSectorAndPlanets(t),i=this.returnUnit(r,e);return n.p[a].units[e-1].push(i),this.saveSystemAndPlanets(n),JSON.stringify(i)}},{key:"loadUnitByJSONOntoPlanet",value:function(e,t,a,r){var n=this.returnSectorAndPlanets(t);return n.p[a].units[e-1].push(JSON.parse(r)),this.saveSystemAndPlanets(n),r}},{key:"loadUnitOntoShip",value:function(e,t,a,r){var n=this.returnSectorAndPlanets(t),i=this.returnUnit(r,e);return n.s.units[e-1][a].storage.push(i),this.saveSystemAndPlanets(n),JSON.stringify(i)}},{key:"loadUnitByJSONOntoShip",value:function(e,t,a,r){var n=this.returnSectorAndPlanets(t);return n.s.units[e-1][a].storage.push(JSON.parse(r)),this.saveSystemAndPlanets(n),r}},{key:"loadUnitOntoShipByJSON",value:function(e,t,a,r){for(var n=this.returnSectorAndPlanets(t),i=0;i<n.s.units[e-1].length;i++)if(JSON.stringify(n.s.units[e-1][i])===a){var s=this.returnUnit(r,e);return n.s.units[e-1][i].storage.push(s),this.saveSystemAndPlanets(n),JSON.stringify(s)}return""}},{key:"loadUnitByJSONOntoShipByJSON",value:function(e,t,a,r){for(var n=this.returnSectorAndPlanets(t),i=0;i<n.s.units[e-1].length;i++)if(JSON.stringify(n.s.units[e-1][i])===a)return n.s.units[e-1][i].storage.push(JSON.parse(r)),this.saveSystemAndPlanets(n),r;return""}},{key:"loadUnitFromShip",value:function(e,t,a,r){for(var n=this.returnSectorAndPlanets(t),i=0;i<n.s.units[e-1][a].storage.length;i++)if(n.s.units[e-1][a].storage[i].type===r){var s=n.s.units[e-1][a].storage[i];return n.s.units[e-1][a].storage.splice(i,1),this.saveSystemAndPlanets(n),JSON.stringify(s)}return""}},{key:"unloadUnitFromPlanet",value:function(e,t,a,r){var n=this.returnSectorAndPlanets(t);if(n.p.length>a)for(var i=0;i<n.p[a].units[e-1].length;i++)if(n.p[a].units[e-1][i].type===r){var s=n.p[a].units[e-1][i];return n.p[a].units[e-1].splice(i,1),this.saveSystemAndPlanets(n),JSON.stringify(s)}return""}},{key:"unloadUnitByJSONFromPlanet",value:function(e,t,a,r){for(var n=this.returnSectorAndPlanets(t),i=0;i<n.p[a].units[e-1].length;i++)if(JSON.stringify(n.p[a].units[e-1][i])===r){var s=n.p[a].units[e-1][i];return n.p[a].units[e-1].splice(i,1),this.saveSystemAndPlanets(n),JSON.stringify(s)}return""}},{key:"unloadUnitFromShip",value:function(e,t,a,r){for(var n=this.returnSectorAndPlanets(t),i=0;i<n.s.units[e-1][a].storage.length;i++)if(n.s.units[e-1][a].storage[i].type===r){var s=JSON.stringify(n.s.units[e-1][a].storage[i]);return n.s.units[e-1][a].storage.splice(i,1),this.saveSystemAndPlanets(n),s}return""}},{key:"unloadUnitByJSONFromShip",value:function(e,t,a,r){for(var n=this.returnSectorAndPlanets(t),i=0;i<n.s.units[e-1][a].storage.length;i++)if(JSON.stringify(n.s.units[e-1][a].storage[i])===r)return n.s.units[e-1][a].storage.splice(i,1),this.saveSystemAndPlanets(n),r;return""}},{key:"unloadUnitFromShipByJSON",value:function(e,t,a,r){for(var n=this.returnSectorAndPlanets(t),i=0;i<n.s.units[e-1].length;i++)if(JSON.stringify(n.s.units[e-1][i])===a)for(var s=0;s<n.s.units[e-1][i].storage.length;s++)if(n.s.units[e-1][i].storage[s].type===r)return n.s.units[e-1][i].storage.splice(s,1),this.saveSystemAndPlanets(n),unitjson;return""}},{key:"unloadUnitByJSONFromShipByJSON",value:function(e,t,a,r){for(var n=this.returnSectorAndPlanets(t),i=0;i<n.s.units[e-1].length;i++)if(JSON.stringify(n.s.units[e-1][i])===a)for(var s=0;s<n.s.units[e-1][i].storage.length;s++)if(JSON.stringify(n.s.units[e-1][i].storage[s])===r)return n.s.units[e-1][i].storage.splice(s,1),this.saveSystemAndPlanets(n),r;return""}},{key:"unloadStoredShipsIntoSector",value:function(e,t){for(var a=this.returnSectorAndPlanets(t),r=0;r<a.s.units[e-1].length;r++)if("{}"!=JSON.stringify(a.s.units[e-1][r]))for(var n=0;n<a.s.units[e-1][r].storage.length;n++){var i=a.s.units[e-1][r].storage[n];JSON.stringify(i),"fighter"===i.type&&(a.s.units[e-1].push(i),a.s.units[e-1][r].storage.splice(n,1),n--)}else a.s.units[e-1].splice(r,1),r--;this.updateSectorGraphics(t),this.saveSystemAndPlanets(a)}},{key:"returnRemainingCapacity",value:function(e){for(var t=e.capacity,a=0;a<e.storage.length;a++)0!=e.storage[a].can_be_stored&&(t-=e.storage[a].capacity_required);return t<=0?0:t}},{key:"returnPDSWithinRange",value:function(e,t,a,r){for(var n=[],i=0;i<a.length;i++){var s=this.returnSectorAndPlanets(a[i]);if(null!=s)for(var o=0;o<s.p.length;o++)for(var c=0;c<s.p[o].units.length;c++)if(c!=e-1)for(var l=0;l<s.p[o].units[c].length;l++)if("pds"==s.p[o].units[c][l].type&&s.p[o].units[c][l].range<=r[i]){var u={};u.range=s.p[o].units[c][l].range,u.combat=s.p[o].units[c][l].combat,u.owner=c+1,u.sector=a[i],u.unit=s.p[o].units[c][l],n.push(u)}}return n}},{key:"returnShipsMovableToDestinationFromSectors",value:function(e,t,a,r,n){for(var i=[],s=0;s<t.length;s++){var o=this.returnSectorAndPlanets(t[s]);if(null!=o){var c={ships:[],ship_idxs:[],sector:null};if(c.distance=a[s],c.adjusted_distance=[],c.hazards=[],0==o.s.activated[this.game.player-1]){for(var l=0;l<o.s.units[this.game.player-1].length;l++){var u=o.s.units[this.game.player-1][l];u.move>=a[s]&&(-1==n[s]&&1!=u.may_fly_through_sectors_containing_other_ships||(c.adjusted_distance.push(a[s]),c.ships.push(u),c.hazards.push(r[s]),c.ship_idxs.push(l),c.sector=t[s]))}if(null!=c.sector){if("rift"===r[s])for(var d=0;d<t.length;d++)s!=d&&t[s]==t[d]&&a[d]<=a[s]&&"rift"!==r[d]&&(c.hazards[d]=r[d]);for(var p=1,h=0;h<i.length;h++)if(i[h].sector==c.sector){p=0;for(var f=0;f<c.ship_idxs.length;f++){for(var m=1,g=0;g<i[h].ship_idxs.length;g++)i[h].ship_idxs[g]==c.ship_idxs[f]&&(m=0,""===c.hazards[f]&&(i[h].hazards[g]=""));1==m&&(i[h].adjusted_distance.push(c.adjusted_distance[f]),i[h].ships.push(c.ships[f]),i[h].hazards.push(c.hazards[f]),i[h].ship_idxs.push(c.ship_idxs[f]))}}1==p&&i.push(c)}}}}return i}},{key:"returnNumberOfSpaceFleetInSector",value:function(e,t){for(var a=this.returnSectorAndPlanets(t),r=0,n=0;n<a.s.units[e-1].length;n++)a.s.units[e-1][n].strength>0&&0==a.s.units[e-1][n].destroyed&&r++;return r}},{key:"returnNumberOfGroundForcesOnPlanet",value:function(e,t,a){if(e<=0)return 0;for(var r=this.returnSectorAndPlanets(t),n=0,i=0;i<r.p[a].units[e-1].length;i++)r.p[a].units[e-1][i].strength>0&&0==r.p[a].units[e-1][i].destroyed&&n++;return n}},{key:"returnUnitCost",value:function(e,t){var a=this.returnUnit(e,t);return a.cost>0?a.cost:1}},{key:"repairUnits",value:function(){for(var e in this.game.board)if(null!=this.game.board[e]){var t=this.returnSectorAndPlanets(e);if(t.s)for(var a=0;a<t.s.units.length;a++)for(var r=0;r<t.s.units[a].length;r++)t.s.units[a][r].max_strenth>t.s.units[a][r].strength&&(t.s.units[a][r].strength=t.s.units[a][r].max_strength);if(t.p)for(var n=0;n<t.p.length;n++)for(var i=0;i<t.p[n].units;i++)for(var s=0;s<t.p[n].units[i].length;s++)t.p[n].units[i][s].max_strenth>t.p[n].units[i][s].strength&&(t.p[n].units[i][s].strength=t.p[n].units[i][s].max_strength);this.saveSystemAndPlanets(t)}}},{key:"returnUnit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=JSON.parse(JSON.stringify(this.units[e]));return r.owner=t,1==a&&(r=this.upgradeUnit(r,t)),r}},{key:"upgradePlayerUnitsOnBoard",value:function(e){for(var t in this.game.sectors)for(var a=0;a<this.game.sectors[t].units[e-1].length;a++)this.game.sectors[t].units[e-1][a]=this.upgradeUnit(this.game.sectors[t].units[e-1][a],e);for(var t in this.game.planets)for(var r=0;r<this.game.planets[t].units[e-1].length;r++)this.game.planets[t].units[e-1][r]=this.upgradeUnit(this.game.planets[t].units[e-1][r],e)}},{key:"upgradeUnit",value:function(e,t){var a=this.returnEventObjects(),r=e.storage;for(var n in a)e=a[n].upgradeUnit(this,t,e);return e.storage=r,e}},{key:"doesSectorContainPlayerShips",value:function(e,t){return this.returnSectorAndPlanets(t).s.units[e-1].length>0?1:0}},{key:"doesSectorContainPlayerUnits",value:function(e,t){var a=this.returnSectorAndPlanets(t);if(a.s.units[e-1].length>0)return 1;for(var r=0;r<a.p.length;r++)if(a.p[r].units[e-1].length>0)return 1;return 0}},{key:"returnSecretObjectives",value:function(){return this.secret_objectives}},{key:"importSecretObjective",value:function(e,t){null==t.name&&(t.name="Unknown Objective"),null==t.text&&(t.type="Unclear Objective"),null==t.minPlayers&&(t.minPlayers=2),null==t.type&&(t.type="normal"),null==t.phase&&(t.type="imperial"),null==t.img&&(t.img="/imperium/img/secret_objective.jpg"),null==t.vp&&(t.vp=1),t=this.addEvents(t),this.secret_objectives[e]=t}},{key:"returnStageIPublicObjectives",value:function(){return this.stage_i_objectives}},{key:"importStageIPublicObjective",value:function(e,t){null==t.name&&(t.name="Unknown Objective"),null==t.text&&(t.type="Unclear Objective"),null==t.type&&(t.type="normal"),null==t.img&&(t.img="/imperium/img/objective_card_1_template.png"),null==t.vp&&(t.vp=1),t=this.addEvents(t),this.stage_i_objectives[e]=t}},{key:"returnStageIIPublicObjectives",value:function(){return this.stage_ii_objectives}},{key:"importStageIIPublicObjective",value:function(e,t){null==t.name&&(t.name="Unknown Objective"),null==t.text&&(t.type="Unclear Objective"),null==t.type&&(t.type="normal"),null==t.img&&(t.img="/imperium/img/objective_card_1_template.png"),null==t.vp&&(t.vp=2),t=this.addEvents(t),this.stage_ii_objectives[e]=t}},{key:"returnPromissaryNotes",value:function(){return this.promissary_notes}},{key:"importPromissary",value:function(e,t){null==t.name&&(t.name="Unknown Promissary"),null==t.text&&(t.text="Unknown Promissary"),t=this.addEvents(t),this.promissary_notes[e]=t}},{key:"returnPromissaryPlayer",value:function(e){for(var t=e.split("-"),a=0;a<this.game.players_info.length;a++)if(this.game.players_info[a].faction===t[0])return a+1;return-1}},{key:"returnFactions",value:function(){return this.factions}},{key:"importFaction",value:function(e,t){null==t.id&&(t.id="faction"),null==t.name&&(t.name="Unknown Faction"),null==t.nickname&&(t.nickname=t.name),null==t.homeworld&&(t.homeworld="sector32"),null==t.space_units&&(t.space_units=[]),null==t.ground_units&&(t.ground_units=[]),null==t.tech&&(t.tech=[]),null==t.intro&&(t.intro='\n        <div style="font-weight:bold">The Republic has fallen!</div>\n        <div style="margin-top:10px">\n\tAs the Galactic Senate collapses into factional squabbling, the ascendant powers on the outer rim plot to seize New Byzantium...</div>\n        <div style="margin-top:10px">\n\tTake the lead by moving your fleet to capture New Byzantium, or establish a power-base to displace the leader and impose your will on your peers.\n \t</div>\n    '),t=this.addEvents(t),this.factions[e]=t}},{key:"returnAgendaCards",value:function(){return this.agenda_cards}},{key:"importAgendaCard",value:function(e,t){null==t.name&&(t.name="Unknown Agenda"),null==t.type&&(t.type="Law"),null==t.text&&(t.text="Unknown Document"),null==t.img&&(t.img="/imperium/img/agenda_card_template.png"),null==t.elect&&(t.elect="other"),t=this.addEvents(t),this.agenda_cards[e]=t}},{key:"returnActionCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0==e.length)return this.action_cards;var t={};for(var a in this.action_cards)e.includes(this.action_cards[a].type)&&(t[a]=this.action_cards[a]);return t}},{key:"importActionCard",value:function(e,t){null==t.name&&(t.name="Action Card"),null==t.type&&(t.type="instant"),null==t.text&&(t.text="Unknown Action"),null==t.img&&(t.img="/imperium/img/action_card_template.png"),t=this.addEvents(t),this.action_cards[e]=t}},{key:"handleGameLoop",value:function(){var e=this,t=this,a=t.returnEventObjects();if(this.game.queue.length>0){t.saveGame(t.game.id);var r=this.game.queue.length-1,n=this.game.queue[r].split("\t"),s=1;if("gameover"===n[0])return 1==t.browser_active&&salert("Game Over"),t.game.over=1,void t.saveGame(t.game.id);if("exhaust_at_round_start"===n[0])return n[1],this.game.queue.splice(r,1),0;if("setvar"===n[0]){var o=n[1],c=parseInt(n[2]),l=n[3],u=n[4],d=n[5];return"int"==u&&(d=parseInt(d)),"state"==o&&(t.game.state[l]=d),"players"==o&&(t.game.players_info[c-1][l]=d),this.game.queue.splice(r,1),1}if("resolve"===n[0]){var p=this.game.queue.length-2,h=[];if(p>=0&&(h=this.game.queue[p].split("\t")),"play"===n[1]&&"resolve"===h[0]&&"play"===h[1])return this.game.queue.splice(r,1),1;if(null!=h[1]&&"tokenallocation"===h[1]&&null!=h[2]&&h[2]===this.app.wallet.returnPublicKey()&&(this.playing_token_allocation=0),"strategy"===n[1]&&n[3]&&n[3]===this.app.wallet.returnPublicKey()&&(this.game.state.playing_strategy_card_secondary=0),0==this.game.state.playing_strategy_card_secondary&&0==this.playing_token_allocation&&this.updateStatus("Waiting for Opponent Move..."),n[1]==h[0]){if(null!=n[2]){if(null==this.game.confirms_received||null==this.game.confirms_received){if(-1==n[2])return this.resetConfirmsNeeded(0),this.game.queue.splice(this.game.queue.length-1),this.game.queue.splice(this.game.queue.length-1),1;this.resetConfirmsNeeded(this.game.players_info.length)}for(var f=0;f<this.game.players.length;f++)this.game.players[f]===n[3]&&(this.setPlayerInactive(f+1),this.game.confirms_players.includes(n[3])||(this.game.confirms_received+=parseInt(n[2]),this.game.confirms_players.push(n[3])));for(var m=[],g=0;g<this.game.players.length;g++)m.push(this.game.players[g]);for(var b=0;b<this.game.confirms_players.length;b++)for(var y=0;y<m.length;y++)m[y]===this.game.confirms_players[b]&&m.splice(y,1);for(var v="Players still to move: <ul>",_=0,w=0;w<m.length;w++)for(var x=0;x<this.game.players.length;x++)this.game.players[x]===m[w]&&(this.game.players[x]===this.app.wallet.returnPublicKey()&&(_=1),v+='<li class="option">'+this.returnFaction(x+1)+"</li>");if(v+="</ul>",0==_&&this.updateStatus(v),this.game.confirms_needed<=this.game.confirms_received)return this.resetConfirmsNeeded(0),this.game.queue.splice(r-1,2),1;if(this.game.queue.splice(r,1),null!=n[3]){if(!this.game.confirms_players.includes(this.app.wallet.returnPublicKey()))return 1;if("agenda"==n[1])return 1}return this.game.confirms_needed<this.game.confirms_received?1:0}return this.game.queue.splice(r-1,2),1}this.game.queue.splice(r,1);for(var k=p,S=1;k>=0&&1==S;k--){var P=this.game.queue[k].split("\t");P.length>0&&P[0]===n[1]&&(this.game.queue.splice(k),S=0)}}if("rider"===n[0]){var E={};return E.player=n[1],E.rider=n[2],E.choice=n[3],this.game.state.riders.push(E),this.game.queue.splice(r,1),1}if("research"===n[0]){var C=parseInt(n[1]);return this.game.queue.splice(r,1),this.setPlayerActiveOnly(C),t.game.player==C?t.playerResearchTechnology((function(e){t.addMove("purchase\t"+t.game.player+"\ttech\t"+e),t.addMove("NOTIFY\t"+t.returnFaction(t.game.player)+" researches "+t.tech[e].name),t.endTurn()})):t.updateStatus(t.returnFaction(C)+" is researching technology..."),0}if("preloader"===n[0]){try{this.app.browser.addElementToDom('\n\t\t  <div class="background_loader" style="display:none">\n\t\t    <img src="/imperium/img/starscape_background1.jpg" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/ships/carrier_100x200.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/ships/destroyer_100x200.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/ships/dreadnaught_100x200.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/ships/fighter_100x200.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/ships/infantry_100x200.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/BUILD.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/DIPLOMACY.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/EMPIRE.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/INITIATIVE.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/MILITARY.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/POLITICS.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/TECH.png" style="width:10px;height:10px" />\n\t\t    <img src="/imperium/img/strategy/TRADE.png" style="width:10px;height:10px" />\n\t\t  </div>\n\t  ')}catch(e){}return this.preloadImages(),this.game.queue.splice(r,1),1}if("announce_retreat"===n[0]){var A=parseInt(n[1]),M=parseInt(n[2]),T=n[3],j=n[4];this.game.queue.splice(r,1);for(var O=this.game.queue.length-1;O>=0;O--){var D=this.game.queue[O].split("\t")[0];"space_combat_end"===D&&this.game.queue.splice(O+1,0,"retreat\t"+A+"\t"+M+"\t"+T+"\t"+j)}return this.updateStatus(this.returnFactionNickname(A)+" announces a retreat"),this.game.player===M?this.playerRespondToRetreat(A,M,T,j):this.updateStatus(this.returnFaction(M)+" responding to "+this.returnFaction(A)+" retreat"),0}if("retreat"===n[0]){var I=parseInt(n[1]),R=parseInt(n[2]),B=n[3],q=n[4];if(this.game.queue.splice(r,1),1==this.game.state.retreat_cancelled||1==this.game.players_info[R-1].temporary_opponent_cannot_retreat||1==this.game.players_info[R-1].permanent_opponent_cannot_retreat)return this.updateLog("With retreat impossible, the fleets turns to battle..."),1;for(var L=this.returnSectorAndPlanets(B),N=this.returnSectorAndPlanets(q),F=0;F<L.s.units[I-1].length;F++)N.s.units[I-1].push(L.s.units[I-1][F]);return L.s.units[I-1]=[],N.s.activated[I-1]=1,this.saveSystemAndPlanets(N),this.saveSystemAndPlanets(L),this.updateSectorGraphics(B),this.updateSectorGraphics(q),t.updateLog(this.returnFactionNickname(I)+" retreats to "+N.s.name),1}if("repair"===n[0]){var U=parseInt(n[1]),z=n[2],H=n[3],G=parseInt(n[4]),K=parseInt(n[5]),W=this.returnSectorAndPlanets(H);return"space"==z?W.s.units[U-1][K].strength=W.s.units[U-1][K].max_strength:W.p[G].units[U-1][K].strength=W.p[G].units[U-1][K].max_strength,this.game.queue.splice(r,1),1}if("check_fleet_supply"===n[0]){var V=parseInt(n[1]),Y=n[2];return this.game.queue.splice(r,1),this.handleFleetSupply(V,Y)}if("continue"===n[0]){var J=n[1],X=n[2];return 0==this.handleFleetSupply(J,X)||(this.setPlayerActiveOnly(J),this.game.queue.splice(r,1),this.updateSectorGraphics(X),this.game.player==J?this.playerContinueTurn(J,X):this.updateStatus(this.returnFaction(J)+" has moved into "+this.game.sectors[this.game.board[X].tile].name)),0}if("post_production"===n[0]){console.log("----------------------------"),console.log("---------- X X X -----------"),console.log("----------------------------");var Q=n[1],Z=n[2],ee=n[3],te=this.returnEventObjects();this.game.queue.splice(r,1);for(var ae=this.returnSpeakerOrder(),re=0;re<ae.length;re++)for(var ne=0;ne<te.length;ne++)te[ne].postProduction(t,Q,Z,ee);return 1}if("produce"===n[0]){var ie=n[1],se=(parseInt(n[2]),parseInt(n[3])),oe=n[4],ce=n[5],le=this.returnSectorAndPlanets(ce);-1!=se?(this.addPlanetaryUnit(ie,ce,se,oe),this.updateLog(this.returnFactionNickname(ie)+" produces "+this.returnUnit(oe,ie).name+" on "+le.p[se].name,120,1)):(this.addSpaceUnit(ie,ce,oe),this.updateLog(this.returnFactionNickname(ie)+" produces "+this.returnUnit(oe,ie).name+" in "+le.s.name,120,1)),this.saveSystemAndPlanets(le),this.updateSectorGraphics(ce),this.game.queue.splice(r,1);for(var ue=1,de=0;de<this.game.queue.length;de++){var pe=this.game.queue[de],he=pe.split("\t");"produce"==he[0]&&parseInt(he[1])==ie&&(ue=0)}return 1==ue?this.handleFleetSupply(ie,ce):1}if("play"===n[0]){this.updateTokenDisplay(),this.updateLeaderboard();var fe=n[1],me=0;this.game.state.active_player_turn==fe?me=1:this.game.state.active_player_has_produced=0,1==parseInt(n[2])&&(me=1),this.game.state.active_player_turn=fe,this.setPlayerActiveOnly(fe);try{document.documentElement.style.setProperty("--playing-color","var(--p".concat(fe,")"))}catch(e){}if(fe==this.game.player){0==me&&(this.game.tracker=this.returnPlayerTurnTracker(),this.resetTurnVariables(fe));var ge=this.returnPlayerActionCards(this.game.player),be=ge.length-this.game.players_info[this.game.player-1].action_card_limit;if(be>0)return this.playerDiscardActionCards(be),0;this.playerTurn()}else this.addEventsToBoard(),this.updateStatus('<div><div class="player_color_box player_color_'+fe+'"></div>'+this.returnFaction(parseInt(fe))+" is taking their turn.</div>");return 0}if("strategy"===n[0]){console.log("IN STRATEGY: "),console.log(JSON.stringify(this.game.queue)),this.updateLeaderboard(),this.updateTokenDisplay();var ye=n[1],ve=parseInt(n[2]),_e=parseInt(n[3]);if(1==this.game.state.playing_strategy_card_secondary){if(this.game.confirms_players.includes(this.app.wallet.returnPublicKey())||this.game.tmp_confirms_players.includes(this.app.wallet.returnPublicKey()))return 0;if(1==this.lock_interface)return 0}return-1!=ve?t.game.players_info[ve-1].strategy_cards_played.includes(ye)||t.game.players_info[ve-1].strategy_cards_played.push(ye):t.game.players_info[t.game.player-1].strategy_cards_played.includes(ye)||t.game.players_info[t.game.player-1].strategy_cards_played.push(ye),1==_e?(this.updateLog(this.returnFactionNickname(ve)+" plays "+this.strategy_cards[ye].name),this.updateStatus(this.returnFaction(ve)+" is playing "+this.strategy_cards[ye].name),this.playStrategyCardPrimary(ve,ye),0):2==_e?(this.updateStatus("All factions have the opportunity to play "+this.strategy_cards[ye].name),this.game.state.playing_strategy_card_secondary=1,this.playStrategyCardSecondary(ve,ye),0):3==_e?(this.updateStatus("All factions have the opportunity to play "+this.strategy_cards[ye].name),this.game.state.playing_strategy_card_secondary=1,this.playStrategyCardTertiary(ve,ye),0):0}if("strategy_card_before"===n[0]){var we=n[1],xe=parseInt(n[2]),ke=this.returnEventObjects();this.game.queue.splice(r,1);for(var Se=this.returnSpeakerOrder(),Pe=0;Pe<Se.length;Pe++)for(var Ee=0;Ee<ke.length;Ee++)1==ke[Ee].strategyCardBeforeTriggers(this,Pe+1,xe,we)&&this.game.queue.push("strategy_card_before_event\t"+we+"\t"+Se[Pe]+"\t"+xe+"\t"+Ee);return 1}if("strategy_card_before_event"===n[0]){var Ce=n[1],Ae=parseInt(n[2]),Me=parseInt(n[3]),Te=parseInt(n[4]),je=this.returnEventObjects();return this.game.queue.splice(r,1),je[Te].strategyCardBeforeEvent(this,Ae,Me,Ce)}if("strategy_card_after"===n[0]){var Oe=n[1],De=parseInt(n[2]),Ie=this.returnEventObjects();this.game.queue.splice(r,1);for(var Re=this.returnSpeakerOrder(),Be=0;Be<Re.length;Be++)for(var qe=0;qe<Ie.length;qe++)1==Ie[qe].strategyCardAfterTriggers(this,Re[Be],De,Oe)&&this.game.queue.push("strategy_card_after_event\t"+Oe+"\t"+Re[Be]+"\t"+De+"\t"+qe);return 1}if("strategy_card_after_event"===n[0]){var Le=n[1],Ne=parseInt(n[2]),Fe=parseInt(n[3]),Ue=parseInt(n[4]),$e=this.returnEventObjects();return this.game.queue.splice(r,1),$e[Ue].strategyCardAfterEvent(this,Ne,Fe,Le)}if("playerschoosestrategycards_before"===n[0]){var ze=n[1],He=(parseInt(n[2]),parseInt(n[3]),this.returnEventObjects());this.game.queue.splice(r,1);for(var Ge=this.returnSpeakerFirstOrder(),Ke=0;Ke<Ge.length;Ke++)for(var We=0;We<He.length;We++)1==He[We].playersChooseStrategyCardsBeforeTriggers(this,Ke+1,Ge[Ke],ze)&&this.game.queue.push("playerschoosestrategycards_before_event\t"+Ge[Ke]+"\t"+We);return 1}if("playerschoosestrategycards_before_event"===n[0]){var Ve=parseInt(n[1]),Ye=parseInt(n[2]),Je=this.returnEventObjects();return this.game.queue.splice(r,1),Je[Ye].playersChooseStrategyCardsBeforeEvent(this,Ve)}if("playerschoosestrategycards_after"===n[0]){var Xe=n[1],Qe=(parseInt(n[2]),parseInt(n[3]),this.returnEventObjects());this.game.queue.splice(r,1);for(var Ze=this.returnSpeakerOrder(),et=0;et<Ze.length;et++)for(var tt=0;tt<Qe.length;tt++)1==Qe[tt].playersChooseStrategyCardsAfterTriggers(this,et+1,Ze[et],Xe)&&this.game.queue.push("playerschoosestrategycards_after_event\t"+Ze[et]+"\t"+tt);return 1}if("strategy_card_after_event"===n[0]){var at=parseInt(n[1]),rt=parseInt(n[2]),nt=this.returnEventObjects();return nt[rt].playersChooseStrategyCardsAfterEvent(this,at)}if("turn"===n[0]){this.game.state.turn++,this.game.state.active_player_moved=0,this.game.state.active_player_turn=-1;for(var it=1,st=0;st<this.game.players_info.length;st++)0==this.game.players_info[st].passed&&(it=0);return 1==it?(this.game.queue.push("newround"),this.game.queue.push("setinitiativeorder")):this.game.queue.push("setinitiativeorder"),this.updateLeaderboard(),1}if("discard"===n[0]){n[1];var ot=n[2],ct=n[3];if(this.game.queue.splice(r,1),"agenda"==ot)for(var lt=0;lt<this.game.state.agendas.length;lt++)this.game.state.agendas[lt]==ct&&(this.game.state.agendas.splice(lt,1),lt--);return 1}if("quash"===n[0]){var ut=parseInt(n[1]),dt=parseInt(n[2]);if(this.game.queue.splice(r,1),this.game.state.agendas.splice(ut,1),1==dt){this.game.queue.push("revealagendas\t1");for(var pt=1;pt<=this.game.players_info.length;pt++)this.game.queue.push("FLIPCARD\t3\t1\t1\t"+pt)}return 1}if("resolve_agenda"===n[0]){this.returnAgendaCards();var ht=n[1],ft="",mt=[];this.game.queue.splice(r,1);for(var gt=0;gt<this.game.state.choices.length;gt++)mt.push(0);for(var bt=0;bt<this.game.players.length;bt++)mt[this.game.state.how_voted_on_agenda[bt]]+=this.game.state.votes_cast[bt];if("speaker"===n[2])for(var yt=n[3],vt=0;vt<this.game.state.choices.length;vt++)this.game.state.choices[vt]===yt&&(mt[vt]+=1);for(var _t=-1,wt=0;wt<mt.length;wt++)if(mt[wt]>_t&&(_t=mt[wt]),mt[wt]>0){var xt=0,kt=0,St=0;"planet"==this.agenda_cards[ht].elect&&(xt=1,this.updateLog("Agenda Outcome: "+this.game.planets[this.game.state.choices[wt]].name+" receives "+mt[wt]+" votes")),"player"==this.agenda_cards[ht].elect&&(kt=1,"Unknown"!==this.returnFactionNickname(this.game.state.choices[wt])?this.updateLog("Agenda Outcome: "+this.returnFactionNickname(this.game.state.choices[wt])+" receives "+mt[wt]+" votes"):this.updateLog("Agenda Outcome: "+this.game.state.choices[wt]+" receives "+mt[wt]+" votes")),"sector"==this.agenda_cards[ht].elect&&(St=1,this.updateLog("Agenda Outcome: "+this.game.sectors[this.game.state.choices[wt]].name+" receives "+mt[wt]+" votes")),0==St&&0==kt&&0==xt&&this.updateLog("Agenda Outcome: "+this.game.state.choices[wt]+" receives "+mt[wt]+" votes")}for(var Pt=0,Et=[],Ct=0;Ct<mt.length;Ct++)mt[Ct]==_t&&(Pt++,Et.push(this.game.state.choices[Ct]));if(Pt>1)return this.game.player==this.game.state.speaker&&t.playerResolveDeadlockedAgenda(ht,Et),0;if(1==Et.length&&(ft=Et[0]),1==Pt){console.log("WINNING CHOICE IS: "+ft),t.agenda_cards[ht].onPass(t,ft);for(var At=0;At<this.game.state.riders.length;At++){var Mt=this.game.state.riders[At];Mt.choice!==ft&&Mt.choice!==this.game.state.choices[ft]||this.game.queue.push("execute_rider\t"+Mt.player+"\t"+Mt.rider)}}this.game.queue.push("ACKNOWLEDGE\tThe Galactic Senate has settled on '"+this.returnNameFromIndex(ft)+"'");var Tt=this.game.queue[r-1].split("\t");return"strategy"===Tt[0]&&this.game.queue.splice(r-1,1),1}if("execute_rider"==n[0]){var jt=parseInt(n[1]),Ot=n[2];return this.game.queue.splice(r,1),this.action_cards[Ot].playActionCardEvent(this,this.game.player,jt,Ot)}if("vote"==n[0]){var Dt=this.returnAgendaCards(),It=n[1],Rt=parseInt(n[2]),Bt=n[3],qt=parseInt(n[4]);if(this.game.state.votes_cast[Rt-1]=qt,this.game.state.votes_available[Rt-1]-=qt,this.game.state.voted_on_agenda[Rt-1][this.game.state.voting_on_agenda]=1,console.log("HOW VOTED ON AGENDA? "+Rt+" -- "+Bt),this.game.state.how_voted_on_agenda[Rt-1]=Bt,"abstain"==Bt)this.updateLog(this.returnFactionNickname(Rt)+" abstains");else{var Lt=0,Nt=0,Ft=0,Ut=this.game.state.choices[parseInt(Bt)];"player"===Dt[It].elect&&(Lt=1),"planet"===Dt[It].elect&&(Nt=1),"sector"===Dt[It].elect&&(Ft=1),0!=Ut.indexOf("planet")&&0!=Ut.indexOf("new-byzantium")||(Nt=1),0==Ut.indexOf("sector")&&(Ft=1),1==Nt&&this.updateLog(this.returnFactionNickname(Rt)+" votes "+qt+" on "+this.game.planets[this.game.state.choices[Bt]].name),1==Ft&&this.updateLog(this.returnFactionNickname(Rt)+" votes "+qt+" on "+this.game.sectors[this.game.state.choices[Bt]].name),1==Lt&&this.updateLog(this.returnFactionNickname(Rt)+" votes "+qt+" on "+this.game.state.choices[Bt]),0==Nt&&0==Ft&&0==Lt&&this.updateLog(this.returnFactionNickname(Rt)+" votes "+qt+" on "+this.game.state.choices[Bt])}for(var $t=0,zt=0;zt<this.game.players.length;zt++)0!=this.game.state.voted_on_agenda[zt][this.game.state.voted_on_agenda.length-1]&&$t++;if($t==this.game.players.length){for(var Ht=[],Gt=0;Gt<this.game.state.choices.length;Gt++)Ht.push(0);for(var Kt=0;Kt<this.game.players.length;Kt++)Ht[this.game.state.how_voted_on_agenda[Kt]]+=this.game.state.votes_cast[Kt];for(var Wt=-1,Vt=0;Vt<Ht.length;Vt++)Ht[Vt]>Wt&&(Wt=Ht[Vt]),Ht[Vt]>0&&this.updateLog(this.game.state.choices[Vt]+" receives "+Ht[Vt]+" votes");for(var Yt=0;Yt<Ht.length;Yt++)Ht[Yt]}return this.game.queue.splice(r,1),1}if("agenda"==n[0]){t.returnAgendaCards();var Jt=n[1],Xt=parseInt(n[2]);this.agenda_cards[Jt].name,this.game.state.voting_on_agenda=Xt;for(var Qt=0,Zt=this.returnSpeakerOrder(),ea=0;ea<Zt.length;ea++)0==this.game.state.voted_on_agenda[Zt[ea]-1][Xt]&&(Qt=Zt[ea],ea=this.game.players_info.length);if(this.setPlayerActiveOnly(Qt),this.game.player!=Qt){var ta='<div class="agenda_instructions">The following agenda has advanced for consideration in the Galactic Senate:</div>';ta+='<div class="agenda_name">'+t.agenda_cards[Jt].name+"</div>",ta+='<div class="agenda_text">',ta+=t.agenda_cards[Jt].text,ta+="</div>",ta+='<div class="agenda_status">'+this.returnFaction(Qt)+" is now voting.</div>",this.updateStatus(ta)}else{if(t.doesPlayerHaveRider(this.game.player))return t.addMove("resolve\tagenda\t1\t"+t.app.wallet.returnPublicKey()),t.addMove("vote\t"+Jt+"\t"+t.game.player+"\tabstain\t0"),t.endTurn(),0;var aa=0,ra='<div class="agenda_instructions">The following agenda has advanced for consideration in the Galactic Senate:</div>';ra+='<div class="agenda_name">'+t.agenda_cards[Jt].name+"</div>",ra+='<div class="agenda_text">',ra+=t.agenda_cards[Jt].text,ra+="</div><ul>";for(var na=0;na<this.game.state.choices.length&&this.game.state.votes_available[t.game.player-1]>0;na++){var ia=this.game.state.choices[na];0==ia.indexOf("planet")&&(ia=this.game.planets[ia].name),0==ia.indexOf("sector")&&(ia=this.game.sectors[ia].sector),0==ia.indexOf("new-byzantium")&&(ia="New Byzantium"),ra+='<li class="option" id="'+na+'">'+ia+"</li>"}ra+='<li class="option" id="abstain">abstain</li></ul></p>',t.updateStatus(ra),$(".option").off(),$(".option").on("mouseenter",(function(){var e=$(this).attr("id");"abstain"!==e&&(0==t.game.state.choices[e].indexOf("planet")&&(aa=1),0!=t.game.state.choices[e].indexOf("sector")&&t.game.state.choices[e].indexOf("new-byzantium"),1==aa&&(t.showPlanetCard(t.game.planets[t.game.state.choices[e]].tile,t.game.planets[t.game.state.choices[e]].idx),t.showSectorHighlight(t.game.planets[t.game.state.choices[e]].tile)))})),$(".option").on("mouseleave",(function(){var e=$(this).attr("id");"abstain"!==e&&(0==t.game.state.choices[e].indexOf("planet")&&(aa=1),0!=t.game.state.choices[e].indexOf("sector")&&t.game.state.choices[e].indexOf("new-byzantium"),1==aa&&(t.hidePlanetCard(t.game.planets[t.game.state.choices[e]].tile,t.game.planets[t.game.state.choices[e]].idx),t.hideSectorHighlight(t.game.planets[t.game.state.choices[e]].tile)))})),$(".option").on("click",(function(){var e=$(this).attr("id"),a=0;if(1==aa&&"abstain"!=e&&(t.hidePlanetCard(t.game.planets[t.game.state.choices[e]].tile,t.game.planets[t.game.state.choices[e]].idx),t.hideSectorHighlight(t.game.planets[t.game.state.choices[e]].tile)),"abstain"==e)return t.addMove("resolve\tagenda\t1\t"+t.app.wallet.returnPublicKey()),t.addMove("vote\t"+Jt+"\t"+t.game.player+"\t"+e+"\t"+a),t.endTurn(),0;for(var r='<p style="margin-bottom:15px">Your voting strength is determined by your influence. Conquer more influence-rich planets to increase it. How many votes do you wish to cast in the Galactic Senate:</p>',n=1;n<=t.game.state.votes_available[t.game.player-1];n++)r+=1==n?'<li class="option textchoice" id="'+n+'">'+n+" vote</li>":'<li class="option textchoice" id="'+n+'">'+n+" votes</li>";t.updateStatus(r),$(".option").off(),$(".option").on("click",(function(){return a=$(this).attr("id"),t.addMove("resolve\tagenda\t1\t"+t.app.wallet.returnPublicKey()),t.addMove("vote\t"+Jt+"\t"+t.game.player+"\t"+e+"\t"+a),t.endTurn(),0}))}))}return 0}if("change_speaker"==n[0])return this.game.state.speaker=parseInt(n[1]),this.displayFactionDashboard(),this.game.queue.splice(r,1),1;if("setinitiativeorder"==n[0]){var sa=this.returnInitiativeOrder();this.game.queue.push("resolve\tsetinitiativeorder");for(var oa=sa.length-1;oa>=0;oa--)0==this.game.players_info[sa[oa]-1].passed&&this.game.queue.push("play\t"+sa[oa]);return 1}if("resetconfirmsneeded"==n[0]){var ca=1;return parseInt(n[1])>1&&(ca=parseInt(n[1])),this.resetConfirmsNeeded(ca),this.game.queue.splice(r,1),1}if("tokenallocation"==n[0]){if(1==this.playing_token_allocation)return;return this.playing_token_allocation=1,parseInt(n[2])?this.playerAllocateNewTokens(parseInt(n[1]),parseInt(n[2]),1,3):this.playerAllocateNewTokens(this.game.player,this.game.players_info[this.game.player-1].new_tokens_per_round+this.game.players_info[this.game.player-1].new_token_bonus_when_issued,1,3),0}if("newround"===n[0]){if(this.game.state.turn=0,this.game.state.round>=1&&0==this.game.state.round_scoring)return this.game.queue.push("strategy\timperial\t-1\t3\t1"),this.game.state.playing_strategy_card_secondary=0,this.game.queue.push("resetconfirmsneeded\t"+t.game.players_info.length),this.game.queue.push("ACKNOWLEDGE\tAs the Imperial card was not played in the previous round, all players now have an opportunity to score Victory Points (in initiative order)"),-1!=this.game.planets["new-byzantium"].owner&&(this.game.queue.push("strategy\tpolitics\t"+this.game.state.speaker+"\t3\t1"),this.game.queue.push("ACKNOWLEDGE\tThe Galactic Senate has been re-established on New Byzantium, voting commences on the recent round of proposals")),this.game.state.round_scoring=0,1;this.game.state.round_scoring=0,this.game.state.playing_strategy_card_secondary=0;var la=this.returnEventObjects();for(var ua in la)for(var da=0;da<this.game.players_info.length;da++)la[ua].onNewRound(this,da+1);this.game.queue.push("resolve\tnewround"),this.game.state.round++,this.updateLog("ROUND: "+this.game.state.round),this.updateStatus("Moving into Round "+this.game.state.round);for(var pa=0;pa<this.game.players_info.length;pa++)if(this.game.players_info[pa].must_exhaust_at_round_start.length>0)for(var ha=0;ha<this.game.players_info[pa].must_exhaust_at_round_start.length;ha++)this.game.queue.push("must_exhaust_at_round_start\t"+(pa+1)+"\t"+this.game.players_info[pa].must_exhaust_at_round_start[ha]);for(var fa=0;fa<this.game.players_info.length;fa++)for(var ma in this.game.planets)this.game.planets[ma].exhausted=0;for(var ga=0;ga<this.game.players_info.length;ga++)this.game.players_info[ga].passed=0,this.game.players_info[ga].strategy_cards_played=[],this.game.players_info[ga].strategy=[],this.game.players_info[ga].must_exhaust_at_round_start=[],this.game.players_info[ga].objectives_scored_this_round=[];if(this.repairUnits(),this.game.queue.push("setinitiativeorder"),this.game.queue.push("playerschoosestrategycards_after"),this.game.queue.push("playerschoosestrategycards"),this.game.queue.push("playerschoosestrategycards_before"),1==this.game.state.round){var ba=this.game.players_info[this.game.player-1].faction;this.game.queue.push("shownewobjectives"),this.game.queue.push("ACKNOWLEDGE\t"+this.factions[ba].intro)}else this.game.queue.push("shownewobjectives");if(1==this.game.initializing?this.game.queue.push("READY"):(this.game.queue.push("tokenallocation\t"+this.game.players_info.length),this.playing_token_allocation=0,this.game.queue.push("resetconfirmsneeded\t"+this.game.players_info.length)),this.game.state.round>1)for(var ya=1;ya<=this.game.players_info.length;ya++)this.game.queue.push("gain\t"+ya+"\taction_cards\t"+(this.game.players_info[ya-1].action_cards_per_round+this.game.players_info[ya-1].action_cards_bonus_when_issued)),this.game.queue.push("DEAL\t2\t"+ya+"\t"+(this.game.players_info[ya-1].action_cards_per_round+this.game.players_info[ya-1].action_cards_bonus_when_issued));this.game.queue.push("revealagendas");for(var va=1;va<=this.game.players_info.length;va++)this.game.queue.push("FLIPCARD\t3\t3\t1\t"+va);if(this.deactivateSectors(),this.unhighlightSectors(),1==this.game.state.round){this.game.queue.push("revealobjectives");for(var _a=1;_a<=this.game.players_info.length;_a++)this.game.queue.push("FLIPCARD\t4\t1\t2\t"+_a)}else{if(this.game.state.round<4){this.game.queue.push("revealobjectives");for(var wa=1;wa<=this.game.players_info.length;wa++)this.game.queue.push("FLIPCARD\t4\t1\t2\t"+wa)}if(this.game.state.round>=4){this.game.queue.push("revealobjectives");for(var xa=1;xa<=this.game.players_info.length;xa++)this.game.queue.push("FLIPCARD\t5\t1\t3\t"+xa)}}return 1}if("revealagendas"===n[0]){var ka=n[1];for(ka||(this.game.state.agendas=[],this.game.state.agendas_voting_information=[]),i=0;i<this.game.pool[0].hand.length;i++)this.game.state.agendas.push(this.game.pool[0].hand[i]),this.game.state.agendas_voting_information.push({});return this.game.pool=[],this.updateLeaderboard(),this.game.queue.splice(r,1),1}if("shownewobjectives"===n[0]){this.overlay.showOverlay(this.app,this,this.returnNewObjectivesOverlay());try{document.getElementById("close-objectives-btn").onclick=function(){1==e.game.state.round?(e.overlay.showOverlay(e.app,e,e.returnUnitsOverlay()),document.getElementById("close-units-btn").onclick=function(){e.overlay.hideOverlay()}):-1!=e.game.planets["new-byzantium"].owner?(e.overlay.showOverlay(e.app,e,e.returnNewAgendasOverlay()),document.getElementById("close-agendas-btn").onclick=function(){e.overlay.hideOverlay()}):e.overlay.hideOverlay()}}catch(e){}return this.game.queue.splice(r,1),1}if("revealobjectives"===n[0]){if(this.game.state.new_objectives=[],this.game.deck.length>5)for(i=0;i<this.game.deck[5].hand.length;i++)this.game.state.secret_objectives.includes(this.game.deck[5].hand[i])||(this.game.state.secret_objectives.push(this.game.deck[5].hand[i]),this.game.state.new_objectives.push({type:"secret",card:this.game.deck[5].hand[i]}));if(this.game.pool.length>1)for(i=0;i<this.game.pool[1].hand.length;i++)this.game.state.stage_i_objectives.includes(this.game.pool[1].hand[i])||(this.game.state.stage_i_objectives.push(this.game.pool[1].hand[i]),this.game.state.new_objectives.push({type:"stage1",card:this.game.pool[1].hand[i]}));if(this.game.pool.length>2)for(i=0;i<this.game.pool[2].hand.length;i++)this.game.state.stage_ii_objectives.includes(this.game.pool[2].hand[i])||(this.game.state.stage_ii_objectives.push(this.game.pool[2].hand[i]),this.game.state.new_objectives.push({type:"stage2",card:this.game.pool[2].hand[i]}));return this.game.queue.splice(r,1),1}if("score"===n[0]){var Sa=parseInt(n[1]),Pa=parseInt(n[2]),Ea=n[3],Ca=Ea;return null!=this.secret_objectives[Ea]&&(Ca=this.secret_objectives[Ea].name),null!=this.stage_i_objectives[Ea]&&(Ca=this.stage_i_objectives[Ea].name),null!=this.stage_ii_objectives[Ea]&&(Ca=this.stage_ii_objectives[Ea].name),this.updateLog(this.returnFactionNickname(Sa)+" scores "+Ca+" ("+Pa+" VP)"),this.game.players_info[Sa-1].vp+=Pa,this.game.players_info[Sa-1].objectives_scored.push(Ea),1==this.checkForVictory()?(this.updateStatus("Game Over: "+this.returnFaction(Sa-1)+" has reached 14 VP"),0):(this.game.queue.splice(r,1),this.game.player,1)}if("playerschoosestrategycards"===n[0]){this.updateStatus("Players selecting strategy cards, starting from "+this.returnSpeaker());for(var Aa=[],Ma=0;Ma<this.game.players_info.length;Ma++){if(Aa[Ma]=0,this.game.players_info[Ma].strategy_cards_retained.length>=1)for(var Ta=0;Ta<this.game.players_info[Ma].strategy_cards_retained.length;Ta++)this.game.players_info[Ma].strategy.push(this.game.players_info[Ma].strategy_cards_retained[Ta]),Aa[Ma]++;this.game.players_info[Ma].strategy_cards_retained=[]}var ja=this.returnStrategyCards();for(var Oa in ja)if(!this.game.state.strategy_cards.includes(Oa)){for(var Da=1,Ia=0;Ia<this.game.players_info.length;Ia++)this.game.players_info[Ia].strategy.includes(Oa)&&(Da=0);1==Da&&(this.game.state.strategy_cards_bonus[this.game.state.strategy_cards.length]=0,this.game.state.strategy_cards.push(Oa))}if(this.game.player==this.game.state.speaker){this.addMove("resolve\tplayerschoosestrategycards"),this.addMove("addbonustounselectedstrategycards");var Ra=1;2==this.game.players_info.length&&(Ra=3),3==this.game.players_info.length&&(Ra=2),4==this.game.players_info.length&&(Ra=2),this.game.players_info.length>=5&&(Ra=1),1==this.game.state.round&&(Ra=1);for(var Ba=0;Ba<Ra;Ba++)for(var qa=0;qa<this.game.players_info.length;qa++){var La=this.game.state.speaker+qa;La>this.game.players_info.length&&(La-=this.game.players_info.length),Ba+Aa[La-1]<Ra&&this.rmoves.push("pickstrategy\t"+La)}this.endTurn()}return 0}if("addbonustounselectedstrategycards"===n[0]){for(var Na=0;Na<this.game.state.strategy_cards.length;Na++)this.game.state.strategy_cards_bonus[Na]+=1;return this.game.queue.splice(r,1),1}if("must_exhaust_at_round_start"===n[0]){parseInt(n[1]);var Fa=n[2];n[2]&&n[2],this.game.queue.splice(r,1);var Ua=0;if("cultural"==Fa)for(var $a in this.game.planets)"cultural"==this.game.planets[$a].type&&(this.game.planets[$a].exhausted=1,Ua=1,this.updateSectorGraphics($a));if("industrial"==Fa)for(var za in this.game.planets)"industrial"==this.game.planets[za].type&&(this.game.planets[za].exhausted=1,Ua=1,this.updateSectorGraphics(za));if("hazardous"==Fa)for(var Ha in this.game.planets)"hazardous"==this.game.planets[Ha].type&&(this.game.planets[Ha].exhausted=1,Ua=1,this.updateSectorGraphics(Ha));if("homeworld"==Fa)for(var Ga in this.game.planets)"homeworld"==this.game.planets[Ga].type&&(this.game.planets[Ga].exhausted=1,Ua=1,this.updateSectorGraphics(Ga));return 0==Ua&&(this.game.planets[Fa]=Ua,this.updateSectorGraphics(i)),1}if("pickstrategy"===n[0]){var Ka=parseInt(n[1]);if(this.setPlayerActiveOnly(Ka),this.game.player==Ka)return this.playerSelectStrategyCards((function(e){t.addMove("resolve\tpickstrategy"),t.addMove("purchase\t"+t.game.player+"\tstrategycard\t"+e),t.endTurn()})),0;var Wa="";Wa+=this.returnFaction(Ka)+" is picking a strategy card: <ul>";var Va=[];for(var Ya in this.strategy_cards)Va.push("");for(var Ja=0;Ja<this.game.state.strategy_cards.length;Ja++){for(var Xa=parseInt(this.strategy_cards[this.game.state.strategy_cards[Ja]].rank);""!=Va[Xa-1];)Xa++;Va[Xa-1]='<li class="textchoice" style="opacity:0.5" id="'+this.game.state.strategy_cards[Ja]+'">'+this.strategy_cards[this.game.state.strategy_cards[Ja]].name+"</li>"}for(var Qa=0;Qa<Va.length;Qa++)""!=Va[Qa]&&(Wa+=Va[Qa]);return Wa+="</ul>",this.updateStatus(Wa),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");t.showStrategyCard(e)})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");t.hideStrategyCard(e)})),0}if("land"===n[0]){var Za=n[1],er=n[2],tr=n[3],ar=n[4],rr=n[5],nr=n[6],ir=n[7],sr=this.returnSectorAndPlanets(tr);if(this.game.player==Za&&1!=er||("planet"==ar?(this.unloadUnitByJSONFromPlanet(Za,tr,rr,ir),this.loadUnitByJSONOntoPlanet(Za,tr,nr,ir)):"ship"==ar?(this.unloadUnitByJSONFromShip(Za,tr,rr,ir),this.loadUnitByJSONOntoPlanet(Za,tr,nr,ir)):this.loadUnitByJSONOntoPlanet(Za,tr,nr,ir)),this.game.queue.length>1)if(0!=this.game.queue[this.game.queue.length-2].indexOf("land")){var or=this.returnNumberOfGroundForcesOnPlanet(Za,tr,nr);this.updateLog(this.returnFactionNickname(Za)+" lands "+or+" infantry on "+sr.p[parseInt(nr)].name)}else{var cr=this.game.queue[this.game.queue.length-2].split("\t"),lr=cr[6];if(lr!=nr){var ur=this.returnNumberOfGroundForcesOnPlanet(Za,tr,nr);this.updateLog(this.returnFactionNickname(Za)+" lands "+ur+" infantry on "+sr.p[parseInt(nr)].name)}}return this.saveSystemAndPlanets(sr),this.updateSectorGraphics(tr),this.game.queue.splice(r,1),1}if("unload_infantry"===n[0]){var dr=n[1],pr=(n[2],n[3]),hr=n[4],fr=n[5];return"planet"===hr?this.unloadUnitFromPlanet(dr,pr,fr,"infantry"):this.unloadUnitFromShip(dr,pr,fr,"infantry"),this.game.queue.splice(r,1),1}if("load_infantry"===n[0]){var mr=n[1],gr=(n[2],n[3]),br=n[4],yr=n[5];return"planet"===br&&this.loadUnitOntoPlanet(mr,gr,yr,"infantry"),"ship"===br&&this.loadUnitOntoShip(mr,gr,yr,"infantry"),this.game.queue.splice(r,1),1}if("load"===n[0]){var vr=n[1],_r=n[2],wr=n[3],xr=n[4],kr=n[5],Sr=n[6],Pr=n[7];return this.game.player==vr&&1!=_r||("planet"==xr?(this.unloadUnitByJSONFromPlanet(vr,wr,kr,Sr),this.loadUnitByJSONOntoShipByJSON(vr,wr,Pr,Sr)):"ship"==xr?""!=kr?(this.unloadUnitByJSONFromShip(vr,wr,kr,Sr),this.loadUnitByJSONOntoShipByJSON(vr,wr,Pr,Sr)):(this.removeSpaceUnitByJSON(vr,wr,Sr),this.loadUnitByJSONOntoShipByJSON(vr,wr,Pr,Sr)):this.loadUnitByJSONOntoShipByJSON(vr,wr,Pr,Sr)),this.updateSectorGraphics(wr),this.game.queue.splice(r,1),1}if("annex"===n[0]){var Er=parseInt(n[1]),Cr=n[2],Ar=parseInt(n[3]);this.game.queue.splice(r,1),this.displayFactionDashboard();var Mr=this.returnSectorAndPlanets(Cr),Tr=Mr.p[Ar];return Tr&&(Tr.units[Tr.owner-1]=[],this.updatePlanetOwner(Cr,Ar,Er)),this.updateSectorGraphics(Cr),1}if("give"===n[0]){var jr=parseInt(n[1]),Or=parseInt(n[2]),Dr=n[3],Ir=n[4];if(this.game.queue.splice(r,1),"action"==Dr){if(this.game.player==Or){this.game.deck[1].hand.push(Ir);var Rr=this.returnPlayerActionCards(this.game.player),Br=Rr.length-this.game.players_info[this.game.player-1].action_card_limit;if(Br>0)return this.playerDiscardActionCards(Br),0;this.endTurn()}else if(this.game.player==jr)for(var qr=0;qr<this.game.deck[1].hand.length;qr++)this.game.deck[1].hand[qr]==Ir&&this.game.deck[1].hand.splice(qr,1);return 0}if("promissary"==Dr){this.givePromissary(jr,Or,Ir);for(var Lr=this.returnEventObjects(),Nr=0;Nr<Lr.length;Lr++)Lr[Nr].gainPromissary(this,receipient,Ir),Lr[Nr].losePromissary(this,sender,Ir)}return 1}if("adjacency"===n[0]){n[1];var Fr=n[2],Ur=n[3];return this.game.queue.splice(r,1),this.game.state.temporary_adjacency.push([Fr,Ur]),1}if("pull"===n[0]){var $r=parseInt(n[1]),zr=parseInt(n[2]),Hr=n[3],Gr=n[4];if(this.game.queue.splice(r,1),"action"==Hr)if("random"===Gr)if(this.game.player==zr){for(var Kr=[],Wr=0;Wr<this.game.deck[1].hand.length;Wr++)this.game.players_info[zr-1].action_cards_played.includes(this.game.deck[1].hand[Wr])||Kr.push(this.game.deck[1].hand[Wr]);for(var Vr=this.rollDice(Kr.length),Yr=Kr[Vr-1],Jr=0;Jr<this.game.deck[1].hand.length;Jr++)this.game.deck[1].hand[Jr]===Yr&&this.game.deck[1].hand.splice(Vr-1,1);this.addMove("give\t"+zr+"\t"+$r+"\taction\t"+Yr),this.addMove("NOTIFY\t"+this.returnFaction($r)+" pulls "+this.action_cards[Yr].name),this.endTurn()}else this.rollDice();else if(this.game.player==zr){for(var Xr=0;Xr<this.game.deck[1].hand.length;Xr++)this.game.deck[1].hand[Xr]===Gr&&this.game.deck[1].hand.splice(Xr,1);this.addMove("give\t"+zr+"\t"+$r+"\taction\t"+Gr),this.addMove("NOTIFY\t"+this.returnFaction($r)+" pulls "+this.action_cards[Gr].name),this.endTurn()}return 0}if("expend"===n[0]){var Qr=parseInt(n[1]),Zr=n[2],en=n[3];return"command"==Zr&&(this.game.players_info[Qr-1].command_tokens-=parseInt(en)),"strategy"==Zr&&(this.game.players_info[Qr-1].strategy_tokens-=parseInt(en)),"goods"==Zr&&(this.game.players_info[Qr-1].goods-=parseInt(en)),"trade"==Zr&&(this.game.players_info[Qr-1].goods-=parseInt(en)),"planet"==Zr&&(this.game.planets[en].exhausted=1),this.updateTokenDisplay(),this.updateLeaderboard(),this.displayFactionDashboard(),this.game.queue.splice(r,1),1}if("unexhaust"===n[0]){parseInt(n[1]);var tn=n[2],an=n[3];return"planet"==tn&&this.unexhaustPlanet(an),this.displayFactionDashboard(),this.game.queue.splice(r,1),1}if("offer"===n[0]){var rn=parseInt(n[1]),nn=parseInt(n[2]),sn=JSON.parse(n[3]),on=JSON.parse(n[4]);this.game.queue.splice(r,1);var cn="";if(this.returnFaction(rn),this.returnFaction(nn),sn.goods>0&&(cn+=sn.goods+" ",sn.goods>1?cn+="trade goods":cn+="trade good"),sn.promissaries.length>0){sn.goods>=1&&(cn+=" and ");for(var ln=0;ln<sn.promissaries.length;ln++){var un=sn.promissaries[ln].promissary,dn=un.split("-"),pn=t.factions[dn[0]].name;cn+=this.promissary_notes[dn[1]].name,cn+=" ",cn+="("+pn+")"}}(0==sn.goods&&0==sn.promissaries_length||""===cn)&&(cn+="nothing"),cn+=" in exchange for ";var hn="nothing";if(on.goods>0&&(hn="",cn+=on.goods+" ",on.goods>1?cn+="trade goods or commodities":cn+="trade good or commodity"),on.promissaries.length>0){hn="",on.goods>1&&(cn+=" and ");for(var fn=0;fn<on.promissaries.length;fn++){hn="";var mn=on.promissaries[fn].promissary,gn=mn.split("-"),bn=t.factions[gn[0]].name;cn+=this.promissary_notes[gn[1]].name,cn+=" ",cn+="("+bn+")"}}return(0==on.goods&&0==on.promissaries_length||"nothing"===hn)&&(cn+="nothing"),cn=this.returnFactionNickname(rn)+" offers "+this.returnFactionNickname(nn)+" "+cn,this.updateLog(cn),this.game.player==nn&&this.playerHandleTradeOffer(rn,sn,on,cn),0}if("refuse_offer"===n[0]){var yn=parseInt(n[1]),vn=parseInt(n[2]);return this.game.queue.splice(r,1),this.game.players_info[yn-1].traded_this_turn=1,this.game.players_info[vn-1].traded_this_turn=1,vn==this.game.player?(this.updateLog(this.returnFactionNickname(yn)+" spurns trade offer"),this.game.queue.push("ACKNOWLEDGE\tYour trade offer has been spurned by "+this.returnFactionNickname(yn)),1):(this.updateLog(this.returnFactionNickname(yn)+" spurns trade offer"),this.displayFactionDashboard(),1)}if("trade"===n[0]){var _n=parseInt(n[1]),wn=parseInt(n[2]),xn=JSON.parse(n[3]),kn=JSON.parse(n[4]);if(this.game.queue.splice(r,1),_n==this.game.player&&this.game.queue.push("ACKNOWLEDGE\tYour trade offer has been accepted by "+this.returnFaction(wn)),this.updateLog(this.returnFactionNickname(wn)+" accepts trade offer"),this.game.players_info[_n-1].traded_this_turn=1,this.game.players_info[wn-1].traded_this_turn=1,this.game.players_info[_n-1].commodities-=parseInt(xn.goods),this.game.players_info[wn-1].commodities-=parseInt(kn.goods),xn.promissaries)for(var Sn=0;Sn<xn.promissaries.length;Sn++)this.givePromissary(_n,wn,xn.promissaries[Sn].promissary);if(kn.promissaries)for(var Pn=0;Pn<kn.promissaries.length;Pn++)this.givePromissary(wn,_n,kn.promissaries[Pn].promissary);return this.game.players_info[_n-1].goods+=parseInt(kn.goods),this.game.players_info[wn-1].goods+=parseInt(xn.goods),this.game.players_info[_n-1].commodities<0&&(this.game.players_info[_n-1].goods+=parseInt(this.game.players_info[_n-1].commodities),this.game.players_info[_n-1].commodities=0),this.game.players_info[wn-1].commodities<0&&(this.game.players_info[wn-1].goods+=parseInt(this.game.players_info[wn-1].commodities),this.game.players_info[wn-1].commodities=0),this.displayFactionDashboard(),1}if("activate"===n[0]){this.returnEventObjects();var En=parseInt(n[1]),Cn=n[2];return this.game.state.activated_sector=Cn,sys=this.returnSectorAndPlanets(Cn),sys.s.activated[En-1]=1,this.saveSystemAndPlanets(sys),this.updateSectorGraphics(Cn),this.game.queue.splice(r,1),1}if("deactivate"===n[0]){var An=parseInt(n[1]),Mn=n[2];return sys=this.returnSectorAndPlanets(Mn),sys.s.activated[An-1]=0,this.saveSystemAndPlanets(sys),this.updateSectorGraphics(Mn),this.game.queue.splice(r,1),1}if("lose"===n[0]){var Tn=parseInt(n[1]),jn=n[2],On=parseInt(n[3]);return this.returnEventObjects(),"action_cards"==jn&&(this.game.players_info[Tn-1].action_cards_in_hand-=On,this.game.players_info[Tn-1].action_cards_in_hand>0&&(this.game.players_info[Tn-1].action_cards_in_hand=0)),"secret_objectives"==jn&&(this.game.players_info[Tn-1].secret_objectives_in_hand-=On,this.game.players_info[Tn-1].secret_objectives_in_hand>0&&(this.game.players_info[Tn-1].secret_objectives_in_hand=0)),this.game.queue.splice(r,1),1}if("gain"===n[0]){var Dn=parseInt(n[1]),In=n[2],Rn=parseInt(n[3]),Bn=1;"0"===n[4]&&(Bn=0);var qn=this.returnEventObjects();if("action_cards"==In&&(this.game.player==Dn&&1==this.browser_active&&(this.overlay.showOverlay(this.app,this,this.returnNewActionCardsOverlay(this.game.deck[1].hand.slice(this.game.deck[1].hand.length-Rn,this.game.deck[1].hand.length))),document.getElementById("close-action-cards-btn").onclick=function(t){e.overlay.hideOverlay()}),this.game.players_info[Dn-1].action_cards_in_hand+=Rn,1==Bn))for(var Ln in qn=this.returnEventObjects())qn[Ln].gainActionCards(t,Dn,Rn);"secret_objectives"!==In&&"secret_objective"!==In||(this.game.player==Dn&&1==this.browser_active&&this.overlay.showOverlay(this.app,this,this.returnNewSecretObjectiveOverlay(this.game.deck[5].hand.slice(this.game.deck[5].hand.length-Rn,this.game.deck[5].hand.length))),this.game.players_info[Dn-1].secret_objectives_in_hand+=Rn);try{var Nn=this.returnTokenDisplay();document.querySelector(".hud-header").html(Nn)}catch(e){console.log("error updating hud-header: "+e)}return this.updateTokenDisplay(),this.updateLeaderboard(),this.displayFactionDashboard(),this.game.queue.splice(r,1),this.handleActionCardLimit(Dn)}if("purchase"===n[0]){var Fn=parseInt(n[1]),Un=n[2],$n=parseInt(n[3]),zn=this.returnEventObjects();if("strategycard"===Un){this.updateLog(this.returnFactionNickname(Fn)+" takes "+this.strategy_cards[n[3]].name);var Hn=n[3];for(var Gn in zn)Hn=zn[Gn].gainStrategyCard(t,Fn,Hn);this.game.players_info[Fn-1].strategy.push(n[3]);for(var Kn=0;Kn<this.game.state.strategy_cards.length;Kn++)this.game.state.strategy_cards[Kn]===n[3]&&(this.game.players_info[Fn-1].goods+=this.game.state.strategy_cards_bonus[Kn],this.game.state.strategy_cards.splice(Kn,1),this.game.state.strategy_cards_bonus.splice(Kn,1),Kn=this.game.state.strategy_cards.length+2)}if("tech"===Un||"technology"===Un){for(var Wn in this.updateLog(this.returnFactionNickname(Fn)+" gains "+this.tech[n[3]].name),this.game.players_info[Fn-1].tech.includes(n[3])||this.game.players_info[Fn-1].tech.push(n[3]),zn=this.returnEventObjects())zn[Wn].gainTechnology(t,Fn,n[3]);this.upgradePlayerUnitsOnBoard(Fn)}if("goods"===Un){for(var Vn in this.updateLog(this.returnFactionNickname(Fn)+" gains "+$n+" trade goods"),zn)$n=zn[Vn].gainTradeGoods(t,Fn,$n);this.game.players_info[Fn-1].goods+=$n}if("commodities"===Un){for(var Yn in this.updateLog(this.returnFactionNickname(Fn)+" gains "+n[3]+" commodities"),zn)$n=zn[Yn].gainCommodities(t,Fn,$n);this.game.players_info[Fn-1].commodities+=$n,this.game.players_info[Fn-1].commodities>this.game.players_info[Fn-1].commodity_limit&&(this.updateLog(this.returnFactionNickname(Fn)+" capped at "+this.game.players_info[Fn-1].commodity_limit),this.game.players_info[Fn-1].commodities=this.game.players_info[Fn-1].commodity_limit)}if("command"===Un&&parseInt(n[3])>0){for(var Jn in this.updateLog(this.returnFactionNickname(Fn)+" gains "+n[3]+" command tokens"),zn)$n=zn[Jn].gainCommandTokens(t,Fn,$n);this.game.players_info[Fn-1].command_tokens+=$n}if("strategy"===Un&&parseInt(n[3])>0){for(var Xn in this.updateLog(this.returnFactionNickname(Fn)+" gains "+n[3]+" strategy tokens"),zn)$n=zn[Xn].gainStrategyTokens(t,Fn,$n);this.game.players_info[Fn-1].strategy_tokens+=$n}if("fleetsupply"===Un&&parseInt(n[3])>0){for(var Qn in zn)$n=zn[Qn].gainFleetSupply(t,Fn,$n);this.game.players_info[Fn-1].fleet_supply+=$n,this.updateLog(this.returnFactionNickname(Fn)+" increases fleet supply to "+this.game.players_info[Fn-1].fleet_supply)}return this.updateTokenDisplay(),this.updateLeaderboard(),this.displayFactionDashboard(),this.game.queue.splice(r,1),1}if("pass"===n[0]){var Zn=parseInt(n[1]);return this.game.players_info[Zn-1].passed=1,this.updateLog(this.returnFactionNickname(Zn)+" has passed"),this.game.queue.splice(r,1),1}if("add_infantry_to_planet"===n[0]){var ei=n[1],ti=n[2],ai=parseInt(n[3]);return 0==ai&&this.game.player==ei||this.game.planets[ti].units[ei-1].push(this.returnUnit("infantry",ei)),this.game.queue.splice(r,1),1}if("remove_infantry_from_planet"===n[0]){var ri=n[1],ni=n[2],ii=parseInt(n[3]);if(0==ii&&this.game.player==ri);else for(var si=this.game.planets[ni],oi=si.units[ri-1].length,ci=0;ci<oi;ci++){var li=si.units[ri-1][ci];"infantry"==li.type&&(si.units[ri-1].splice(ci,1),ci=oi+2)}return this.game.queue.splice(r,1),1}if("move"===n[0]){var ui=n[1],di=parseInt(n[2]),pi=n[3],hi=n[4],fi=n[5],mi=n[6],gi=JSON.parse(fi);if(gi.already_moved&&(delete gi.already_moved,fi=JSON.stringify(gi)),"rift"===mi){var bi=JSON.parse(fi),yi=this.rollDice(10);if(yi<=3)return this.removeSpaceUnitByJSON(ui,pi,fi),this.updateLog("The Gravity Rift destroys "+this.returnFactionNickname(ui)+" "+bi.name+" (roll: "+yi+")"),this.game.queue.splice(r,1),this.updateSectorGraphics(hi),this.updateSectorGraphics(pi),1;this.updateLog("The Gravity Risk accelerates "+this.returnFactionNickname(ui)+" "+bi.name+" (roll: "+yi+")")}if(this.game.player!=ui||1==di){this.returnSectorAndPlanets(pi);var vi=this.returnSectorAndPlanets(hi);JSON.parse(fi),this.removeSpaceUnitByJSON(ui,pi,fi),this.addSpaceUnitByJSON(ui,hi,fi);var _i=this.game.queue[r-1].split("\t")[0];"move"!=_i&&this.updateLog(this.returnFactionNickname(ui)+" moves "+this.returnPlayerFleetInSector(ui,hi)+" into "+vi.s.name)}this.updateSectorGraphics(hi),this.updateSectorGraphics(pi),this.game.queue.splice(r,1);for(var wi=1,xi=0;xi<this.game.queue.length;xi++){var ki=this.game.queue[xi],Si=ki.split("\t");"move"==Si[0]&&parseInt(Si[3])==pi&&(wi=0)}return 1==wi?this.handleFleetSupply(ui,pi):1}if("player_end_turn"===n[0]){var Pi=parseInt(n[1]),Ei=this.returnEventObjects();this.setPlayerInactive(Pi),this.game.state.active_player_moved=0,this.game.state.active_player_turn=-1,this.game.queue.splice(r,1);for(var Ci=this.returnSpeakerOrder(),Ai=0;Ai<Ci.length;Ai++)for(var Mi=0;Mi<Ei.length;Mi++)1==Ei[Ai].playerEndTurnTriggers(this,Ci[Ai])&&this.game.queue.push("player_end_turn_event\t"+Ci[Ai]+"\t"+Mi);return 1}if("player_end_turn_event"===n[0]){var Ti=parseInt(n[1]),ji=parseInt(n[2]),Oi=this.returnEventObjects();return this.game.queue.splice(r,1),Oi[ji].playerEndTurnEvent(this,Ti)}if("activate_system"===n[0]){var Di=parseInt(n[1]),Ii=n[2],Ri=(n[3],this.returnEventObjects());sys=this.returnSectorAndPlanets(Ii),sys.s.activated[Di-1]=1,this.game.state.activated_sector=Ii,this.saveSystemAndPlanets(sys),this.updateSectorGraphics(Ii),this.updateLog(this.returnFactionNickname(Di)+" activates "+this.returnSectorName(Ii)),this.updateStatus(this.returnFaction(Di)+" activates "+this.returnSectorName(Ii)),this.game.queue.splice(r,1);for(var Bi=this.returnSpeakerOrder(),qi=0;qi<Bi.length;qi++)for(var Li=0;Li<Ri.length;Li++)1==Ri[Li].activateSystemTriggers(this,Di,Bi[qi],Ii)&&this.game.queue.push("activate_system_event\t"+Di+"\t"+Bi[qi]+"\t"+Ii+"\t"+Li);return 1}if("activate_system_event"===n[0]){var Ni=this.returnEventObjects(),Fi=parseInt(n[1]),Ui=parseInt(n[2]),$i=n[3],zi=parseInt(n[4]);return this.game.queue.splice(r,1),Ni[zi].activateSystemEvent(this,Fi,Ui,$i)}if("activate_system_post"===n[0]){var Hi=parseInt(n[1]),Gi=n[2];return this.game.queue.splice(r,1),this.updateSectorGraphics(Gi),this.game.player==Hi&&this.playerPostActivateSystem(Gi),0}if("pre_agenda_stage"===n[0]){var Ki=this.returnEventObjects(),Wi=n[1];this.game.queue.splice(r,1),this.updateLog("Agenda: "+this.agenda_cards[Wi].name+"<p></p><div style='width:80%;font-size:1.0em;margin-left:auto;margin-right:auto;margin-top:15px;margin-bottom:15px'>"+this.agenda_cards[Wi].text+"</div>"),this.game.state.riders=[],this.game.state.choices=[];for(var Vi=this.returnSpeakerOrder(),Yi=0;Yi<Vi.length;Yi++)for(var Ji=0;Ji<Ki.length;Ji++)1==Ki[Ji].preAgendaStageTriggers(this,Vi[Yi],Wi)&&this.game.queue.push("pre_agenda_stage_event\t"+Vi[Yi]+"\t"+Wi+"\t"+Ji);return 1}if("pre_agenda_stage_event"===n[0]){var Xi=this.returnEventObjects(),Qi=parseInt(n[1]),Zi=(n[2],parseInt(n[3]));return this.game.queue.splice(r,1),Xi[Zi].preAgendaStageEvent(this,Qi)}if("pre_agenda_stage_post"===n[0]){var es=n[1],ts=this;this.game.queue.splice(r,1),this.game.state.choices=this.agenda_cards[es].returnAgendaOptions(ts);for(var as=this.returnSpeakerOrder(),rs=0;rs<as.length;rs++)this.game.queue.push("pre_agenda_stage_player_menu\t"+as[rs]+"\t"+es);return 1}if("pre_agenda_stage_player_menu"===n[0]){var ns=parseInt(n[1]),is=n[2];return this.game.queue.splice(r,1),this.game.player==ns&&this.playerPlayPreAgendaStage(ns,is),0}if("post_agenda_stage"===n[0]){var ss=this.returnEventObjects(),os=n[1];this.game.queue.splice(r,1);for(var cs=this.returnSpeakerOrder(),ls=0;ls<cs.length;ls++)for(var us=0;us<ss.length;us++)1==ss[us].postAgendaStageTriggers(this,cs[ls],os)&&this.game.queue.push("post_agenda_stage_event\t"+cs[ls]+"\t"+os+"\t"+us);return 1}if("post_agenda_stage_event"===n[0]){var ds=this.returnEventObjects(),ps=parseInt(n[1]),hs=(n[2],parseInt(n[3]));return this.game.queue.splice(r,1),ds[hs].postAgendaStageEvent(this,ps)}if("post_agenda_stage_post"===n[0]){var fs=n[1];this.game.queue.splice(r,1);for(var ms=this.returnSpeakerOrder(),gs=0;gs<ms.length;gs++)this.game.queue.push("post_agenda_stage_player_menu\t"+ms[gs]+"\t"+fs);return 1}if("post_agenda_stage_player_menu"===n[0]){var bs=parseInt(n[1]),ys=n[2];if(this.game.queue.splice(r,1),this.game.player==bs){for(var vs=[],_s=0;_s<this.game.state.choices.length;_s++)vs.push(0);for(var ws=0;ws<this.game.players.length;ws++)vs[this.game.state.how_voted_on_agenda[ws]]+=this.game.state.votes_cast[ws];for(var xs=-1,ks=0;ks<vs.length;ks++)vs[ks]>xs&&(xs=vs[ks]);for(var Ss=[],Ps=0;Ps<vs.length;Ps++)vs[Ps]==xs&&Ss.push(this.game.state.choices[Ps]);this.playerPlayPostAgendaStage(bs,ys,Ss)}return 0}if("pds_space_attack"===n[0]){var Es=n[1],Cs=n[2],As=this.returnEventObjects();this.game.queue.splice(r,1);var Ms=this.returnSpeakerOrder();this.resetTargetUnits();for(var Ts=0;Ts<Ms.length;Ts++)for(var js=0;js<As.length;js++)1==As[js].pdsSpaceAttackTriggers(this,Es,Ms[Ts],Cs)&&this.returnOpponentInSector(Es,Cs)>-1&&this.game.queue.push("pds_space_attack_event\t"+Ms[Ts]+"\t"+Es+"\t"+Cs+"\t"+js);return 1}if("pds_space_attack_event"===n[0]){var Os=this.returnEventObjects(),Ds=parseInt(n[1]),Is=parseInt(n[2]),Rs=n[3],Bs=parseInt(n[4]);return this.game.queue.splice(r,1),Os[Bs].pdsSpaceAttackEvent(this,Is,Ds,Rs)}if("pds_space_attack_post"===n[0]){var qs=parseInt(n[1]),Ls=n[2];this.game.queue.splice(r,1),this.updateSectorGraphics(Ls);var Ns=this.returnOpponentInSector(qs,Ls);return-1==Ns||(console.log("checking if player has PDS units in range..."),1==this.doesPlayerHavePDSUnitsWithinRange(Ns,qs,Ls)&&this.game.queue.push("pds_space_attack_player_menu\t"+qs+"\t"+qs+"\t"+Ls)),1}if("pds_space_attack_player_menu"===n[0]){var Fs=parseInt(n[1]),Us=parseInt(n[2]),$s=n[3];this.game.queue.splice(r,1),this.updateSectorGraphics($s);for(var zs=-1,Hs=t.returnSectorAndPlanets($s),Gs=0;Gs<Hs.s.units.length;Gs++)Gs+1!=Us&&Hs.s.units[Gs].length>0&&(zs=Gs+1);return-1==zs?1:(this.game.player==Fs&&this.playerPlayPDSAttack(Fs,Us,$s),0)}if("pds_space_defense"===n[0]){var Ks=n[1],Ws=n[2],Vs=this.returnEventObjects();this.game.queue.splice(r,1);var Ys=this.returnSpeakerOrder();this.resetTargetUnits();for(var Js=0;Js<Ys.length;Js++)for(var Xs=0;Xs<Vs.length;Xs++)1==Vs[Xs].pdsSpaceDefenseTriggers(this,Ks,Ys[Js],Ws)&&this.game.queue.push("pds_space_defense_event\t"+Ys[Js]+"\t"+Ks+"\t"+Ws+"\t"+Xs);return 1}if("pds_space_defense_event"===n[0]){var Qs=this.returnEventObjects(),Zs=parseInt(n[1]),eo=parseInt(n[2]),to=n[3],ao=parseInt(n[4]);return this.game.queue.splice(r,1),Qs[ao].pdsSpaceDefenseEvent(this,eo,Zs,to)}if("pds_space_defense_post"===n[0]){var ro=parseInt(n[1]),no=n[2];this.game.queue.splice(r,1),this.updateSectorGraphics(no);for(var io=this.returnSpeakerOrder(),so=0;so<io.length;so++)1==this.doesPlayerHavePDSUnitsWithinRange(ro,io[so],no)&&this.game.queue.push("pds_space_defense_player_menu\t"+io[so]+"\t"+ro+"\t"+no);return 1}if("pds_space_defense_player_menu"===n[0]){var oo=parseInt(n[1]),co=parseInt(n[2]),lo=n[3];return this.game.queue.splice(r,1),this.updateSectorGraphics(lo),this.updateLog(this.returnFactionNickname(oo)+" preparing to fire PDS"),this.game.player==oo&&this.playerPlayPDSDefense(oo,co,lo),0}if("player_destroy_unit"===n[0]){parseInt(n[1]);var uo=parseInt(n[2]),po=parseInt(n[3]),ho=n[4],fo=n[5];return n[6],"space"==ho&&this.playerDestroyShips(uo,po,fo),0}if("destroy_unit"===n[0]||"destroy"===n[0]){parseInt(n[1]);var mo=parseInt(n[2]),go=n[3],bo=n[4],yo=n[5],vo=parseInt(n[6]),_o=(parseInt(n[7]),this.returnSectorAndPlanets(bo));this.returnEventObjects(),"space"==go&&(_o.s.units[mo-1][vo].strength=0,_o.s.units[mo-1][vo].destroyed=1),"ground"==go&&(_o.p[yo].units[mo-1][vo].strength=0,_o.p[yo].units[mo-1][vo].destroyed=1,"spacedock"!==_o.p[yo].units[mo-1][vo].type&&"pds"!==_o.p[yo].units[mo-1][vo].type||_o.p[yo].units[mo-1].splice(vo,1));var wo=this.game.queue[r-1].split("\t");return"destroy_unit"!==wo[0]&&this.eliminateDestroyedUnitsInSector(mo,bo),this.saveSystemAndPlanets(_o),this.updateSectorGraphics(bo),this.game.queue.splice(r,1),1}if("destroy_infantry_on_planet"===n[0]){for(var xo=parseInt(n[1]),ko=n[2],So=parseInt(n[3]),Po=parseInt(n[4]),Eo=this.returnSectorAndPlanets(ko),Co=this.returnEventObjects(),Ao=Eo.p[So],Mo=(Ao.owner,0);Mo<Ao.units.length;Mo++)if(Ao.units[Mo].length>0&&Mo+1!=xo)for(var To=0,jo=0;jo<Ao.units[Mo].length&&To<Po;jo++){var Oo=Ao.units[Mo][jo];if("infantry"==Oo.type){for(var Do in Oo.strength=0,Oo.destroyed=1,To++,Co)Ao.units[Mo][jo]=Co[Do].unitDestroyed(t,xo,Ao.units[Mo][jo]);try{1==Ao.units[Mo][jo].destroyed&&(this.game.players_info[Mo].my_units_destroyed_this_combat_round.push(Ao.units[Mo][jo].type),this.game.players_info[xo-1].units_i_destroyed_this_combat_round.push(Ao.units[Mo][jo].type))}catch(e){}t.eliminateDestroyedUnitsInSector(Ao.owner,ko)}}return this.saveSystemAndPlanets(Eo),this.updateSectorGraphics(ko),this.game.queue.splice(r,1),1}if("assign_hit"===n[0]){var Io=parseInt(n[1]),Ro=parseInt(n[2]),Bo=parseInt(n[3]),qo=n[4],Lo=n[5],No=parseInt(n[6]),Fo=parseInt(n[7]),Uo=this.returnSectorAndPlanets(Lo),$o=this.returnEventObjects();if("ship"==qo){try{if(Uo.s.units[Bo-1][No].last_round_damaged=this.game.state.space_combat_round,(1==Fo&&t.game.player==Bo||t.game.player!=Bo)&&Uo.s.units[Bo-1][No].strength--,Uo.s.units[Bo-1][No].strength<=0){for(var zo in this.updateLog(this.returnFactionNickname(Bo)+" "+Uo.s.units[Bo-1][No].name+" destroyed"),Uo.s.units[Bo-1][No].destroyed=1,$o)Uo.s.units[Bo-1][No]=$o[zo].unitDestroyed(t,Io,Uo.s.units[Bo-1][No]);try{1==Uo.s.units[Bo-1][No].destroyed&&(this.game.players_info[Bo-1].my_units_destroyed_this_combat_round.push(Uo.s.units[Bo-1][No].type),this.game.players_info[Io-1].units_i_destroyed_this_combat_round.push(Uo.s.units[Bo-1][No].type))}catch(e){}}else this.updateLog(this.returnFactionNickname(Bo)+" "+Uo.s.units[Bo-1][No].name+" damaged")}catch(e){console.log("Error? Not all hits assigned: "+e)}this.saveSystemAndPlanets(Uo),this.doesPlayerHaveShipsInSector(Io,Lo),this.doesPlayerHaveShipsInSector(Ro,Lo)}var Ho=this.game.queue[this.game.queue.length-1].split("\t");return"assign_hit"===Ho[0]&&Ho[5]===Lo||this.eliminateDestroyedUnitsInSector(Bo,Lo),this.saveSystemAndPlanets(Uo),this.updateSectorGraphics(Lo),this.game.queue.splice(r,1),1}if("assign_hits_capital_ship"===n[0]){var Go=parseInt(n[1]),Ko=n[2],Wo=n[3];return this.returnSectorAndPlanets(Ko),this.game.queue.splice(r,1),this.game.player==Go&&this.playerAssignHitsCapitalShips(Go,Ko,Wo),0}if("assign_hits"===n[0]){var Vo=this.game.queue.length-2,Yo=[];if(Vo>=0&&("ships_fire"===(Yo=this.game.queue[Vo].split("\t"))[0]||"infantry_fire"==Yo[0]||"pds_fire"==Yo[0])){var Jo=this.game.queue[Vo],Xo=this.game.queue[Vo+1];return this.game.queue[Vo]=Xo,this.game.queue[Vo+1]=Jo,1}var Qo=parseInt(n[1]),Zo=parseInt(n[2]),ec=n[3],tc=n[4],ac=n[5];"pds"!=ac&&(ac=parseInt(ac));var rc=parseInt(n[6]),nc=n[7],ic=this.returnSectorAndPlanets(tc);if(this.game.state.assign_hits_queue_instruction="",this.game.player==Zo&&(this.game.state.assign_hits_queue_instruction=this.game.queue[this.game.queue.length-1]),this.game.queue.splice(r,1),rc>0&&this.updateStatus(this.returnFaction(Zo)+" is assigning hits to units ... "),this.game.state.assign_hits_to_cancel>0&&(rc-=this.game.state.assign_hits_to_cancel,this.game.state.assign_hits_to_cancel=0,rc<=0))return 1;if("pds"==ac)return rc>0?this.game.player==Zo?(this.playerAssignHits(Qo,Zo,ec,tc,ac,rc,nc),0):(this.updateStatus(this.returnFaction(Zo)+" assigning hits to units ... "),0):1;if("anti_fighter_barrage"==ec){for(var sc=0,oc=this.returnSectorAndPlanets(tc),cc=0;cc<oc.s.units[Zo-1].length;cc++)"fighter"===oc.s.units[Zo-1][cc].type&&sc++;return rc>sc&&(rc=sc),rc>0?this.game.player==Zo?(this.playerAssignHits(Qo,Zo,ec,tc,ac,rc,nc),0):(this.updateStatus(this.returnFaction(Zo)+" assigning hits to units ... "),0):1}if("space"==ec)return rc>0?this.game.player==Zo?(this.playerAssignHits(Qo,Zo,ec,tc,ac,rc,nc),0):(this.updateStatus(this.returnFaction(Zo)+" assigning hits to units ... "),0):1;if("ground"==ec&&rc>0){this.assignHitsToGroundForces(Qo,Zo,tc,ac,rc),this.eliminateDestroyedUnitsInSector(Zo,tc),this.eliminateDestroyedUnitsInSector(Qo,tc),this.updateSectorGraphics(tc);var lc=this.returnNumberOfGroundForcesOnPlanet(Qo,tc,ac),uc=this.returnNumberOfGroundForcesOnPlanet(Zo,tc,ac);if(lc>=0&&lc>uc&&uc<=0){if(-1!=Zo)if(1==this.game.players_info[Qo-1].temporary_infiltrate_infrastructure_on_invasion||1==this.game.players_info[Qo-1].temporary_infiltrate_infrastructure_on_invasion){for(var dc=0,pc=0;pc<ic.p[ac].units[Zo-1].length;pc++)"pds"===ic.p[ac].units[Zo-1][pc].type&&(this.addPlanetaryUnit(Qo,tc,ac,"pds"),dc=1),"spacedock"===ic.p[ac].units[Zo-1][pc].type&&(this.addPlanetaryUnit(Qo,tc,ac,"spacedock"),dc=1);ic.p[ac].units[Zo-1]=[],1==dc&&(this.game.players_info[Qo-1].temporary_infiltrate_infrastructure_on_invasion=0)}else ic.p[ac].units[Zo-1]=[];if(ic.p[ac].owner==Qo){var hc=t.returnNumberOfGroundForcesOnPlanet(Qo,tc,ac);this.updateLog(ic.p[ac].name+" defended by "+this.returnFactionNickname(Qo)+" ("+hc+" infantry)")}}return 1}}if("gain_planet"===n[0]){var fc=parseInt(n[1]),mc=n[2],gc=parseInt(n[3]);this.game.queue.splice(r,1),console.log(fc+" gains control of planet_idx: "+gc+" in "+mc),this.updatePlanetOwner(mc,gc,fc)}if("destroy_units"===n[0]){var bc=parseInt(n[1]),yc=parseInt(n[2]),vc=n[3],_c=0;if(parseInt(n[4])&&(_c=1),vc.indexOf("_")>0){var wc=this.returnSectorAndPlanets(vc);vc=wc.s.sector}return this.game.queue.splice(r,1),1==yc?this.updateStatus(this.returnFaction(bc)+" is destroying "+yc+" unit"):this.updateStatus(this.returnFaction(bc)+" is destroying "+yc+" units"),this.game.player==bc&&this.playerDestroyUnits(bc,yc,vc,_c),0}if("destroy_ships"===n[0]){console.log(JSON.stringify(n));var xc=parseInt(n[1]),kc=parseInt(n[2]),Sc=n[3],Pc=0;if(parseInt(n[4])&&(Pc=1),null==Sc&&(Sc=this.game.state.activated_sector),console.log("in sector: "+Sc),Sc.indexOf("_")>0){var Ec=this.returnSectorAndPlanets(Sc);Sc=Ec.s.sector}return this.game.queue.splice(r,1),1==kc?this.updateStatus(this.returnFaction(xc)+" is destroying "+kc+" ship"):this.updateStatus(this.returnFaction(xc)+" is destroying "+kc+" ships"),this.game.player==xc&&this.playerDestroyShips(xc,kc,Sc,Pc),0}if("pds_fire"===n[0]){var Cc=parseInt(n[1]),Ac=parseInt(n[2]),Mc=n[3];if(this.game.queue.splice(r,1),1==this.doesPlayerHavePDSUnitsWithinRange(Ac,Cc,Mc)){for(var Tc=this.returnPDSWithinRangeOfSector(Ac,Cc,Mc),jc=0,Oc=[],Dc=[],Ic=[],Rc=0,Bc=this.returnEventObjects(),qc=[],Lc=[],Nc=[],Fc=0;Fc<Tc.length;Fc++)Tc[Fc].owner==Cc&&(jc++,Oc.push(Tc[Fc].combat),Ic.push(Tc[Fc].unit));for(var Uc=0,$c=10,zc=0;zc<Tc.length;zc++)Tc[zc].combat<$c&&(Uc=zc,$c=Tc[zc].combat);console.log("DO WE HAVE BONUS SHOTS? "),console.log("attacker: "+Ac),console.log("player: "+Cc);for(var Hc=0;Hc<this.game.players_info[Cc-1].pds_combat_roll_bonus_shots;Hc++){console.log("bonus: "+(Hc+1));var Gc={name:"Bonus"};Gc.unit=JSON.parse(JSON.stringify(Tc[Uc].unit)),Gc.unit.name="Bonus",Gc.range=Tc[Uc].range,Gc.combat=Tc[Uc].combat,Gc.owner=Tc[Uc].owner,Gc.sector=Tc[Uc].sector,jc++,Oc.push(Gc.combat),Ic.push(Gc.unit)}this.updateLog(this.returnFactionNickname(Cc)+" has "+jc+" PDS shots");for(var Kc=0;Kc<jc;Kc++){var Wc=this.rollDice(10);for(var Vc in qc.push(Wc),Bc)Wc=Bc[Vc].modifyCombatRoll(this,Cc,Ac,Cc,"pds",Wc),t.game.players_info[Ac-1].target_units=Bc[Vc].modifyTargets(this,Ac,Cc,t.game.player,"pds",t.game.players_info[Ac-1].target_units);Wc+=this.game.players_info[Cc-1].pds_combat_roll_modifier,Wc+=this.game.players_info[Cc-1].temporary_pds_combat_roll_modifier,Lc.push(Wc),Nc.push(0),Wc>=Oc[Kc]?(Rc++,Dc.push(1)):Dc.push(0)}if(Rc<jc){var Yc=jc-Rc,Jc=this.game.players_info[Cc-1].combat_dice_reroll+this.game.players_info[Cc-1].pds_combat_dice_reroll;for(var Xc in Bc)Jc=Bc[Xc].modifyCombatRerolls(this,Cc,Ac,Cc,"pds",Jc),t.game.players_info[Cc-1].target_units=Bc[Xc].modifyTargets(this,Ac,Cc,t.game.player,"pds",t.game.players_info[Cc-1].target_units);var Qc=Jc;Yc<Jc&&(Qc=Yc);for(var Zc=0;Zc<Qc;Zc++){for(var el=11,tl=11,al=0;al<hits_to_misses.length;al++)Oc[al]<el&&0==Dc[al]&&(tl=al,el=Oc[al]);var rl=this.rollDice(10);for(var nl in Nc[tl]=1,qc[tl]=rl,Bc)rl=Bc[nl].modifyCombatRerolls(this,Cc,Ac,Cc,"pds",rl),t.game.players_info[Cc-1].target_units=Bc[nl].modifyTargets(this,Ac,Cc,t.game.player,"pds",t.game.players_info[Cc-1].target_units);rl+=this.game.players_info[Cc-1].pds_combat_roll_modifier,rl+=this.game.players_info[Cc-1].temporary_pds_combat_roll_modifier,Lc[tl]=rl,rl>=Oc[tl]?(Rc++,Dc[tl]=1):Dc[tl]=-1}}this.game.queue.push("assign_hits\t"+Cc+"\t"+Ac+"\tspace\t"+Mc+"\tpds\t"+Rc+"\tpds");var il={};il.attacker=Cc,il.hits_or_misses=Dc,il.hits_or_misses=Dc,il.units_firing=Ic,il.hits_on=Oc,il.unmodified_roll=qc,il.modified_roll=Lc,il.reroll=Nc,this.updateCombatLog(il),1==Rc?this.updateLog(this.returnFactionNickname(Ac)+" takes "+Rc+" hit"):this.updateLog(this.returnFactionNickname(Ac)+" takes "+Rc+" hits")}return this.updateSectorGraphics(Mc),1}if("bombard"===n[0]){var sl=this,ol=parseInt(n[1]),cl=n[2],ll=n[3],ul=this.returnEventObjects();if(this.game.queue.splice(r,1),1==this.doesPlayerHaveShipsInSector(ol,cl)){for(var dl=this.returnSectorAndPlanets(cl),pl=dl.p[ll].owner,hl=0,fl=0,ml=[],gl=[],bl=0,yl=0;yl<dl.p[ll].units[ol-1].length;yl++)if(dl.p[ll].units[ol-1][yl].bombardment_rolls>0)for(var vl=0;vl<dl.p[ll].units[ol-1][yl].bombardment_rolls;vl++){var _l=this.rollDice(10);for(z_index in ul)_l=ul[z_index].modifyCombatRoll(sl,ol,dl.p[ll].owner,this.game.player,"bombardment",_l);_l+=this.game.players_info[ol-1].bombardment_roll_modifier,_l+=this.game.players_info[ol-1].temporary_bombardment_roll_modifier,_l+=this.game.players_info[ol-1].combat_roll_modifier,(_l+=dl.s.units[ol-1][yl].temporary_combat_modifier)>=dl.p[ll].units[ol-1][yl].bombardment_combat?(hl++,ml.push(1),gl.push(dl.p[ll].units[ol-1][yl].bombardment_combat)):(ml.push(0),gl.push(dl.p[ll].units[ol-1][yl].bombardment_combat))}for(var wl=10,xl=0;xl<gl.length;xl++)gl[xl]<wl&&(wl=gl[xl]);bl+=this.game.players_info[ol-1].bombardment_combat_roll_bonus_shots;for(var kl=ml.length;kl<ml.length+bl;kl++){var Sl=this.rollDice(10);for(z_index in ul)Sl=ul[z_index].modifyCombatRoll(sl,ol,dl.p[ll].owner,this.game.player,"bombardment",Sl);Sl+=this.game.players_info[ol-1].bombardment_roll_modifier,Sl+=this.game.players_info[ol-1].temporary_bombardment_roll_modifier,Sl+=this.game.players_info[ol-1].combat_roll_modifier,(Sl+=dl.s.units[ol-1][kl].temporary_combat_modifier)>=wl?(hl++,ml.push(1),gl.push(dl.p[ll].units[ol-1][kl].bombardment_combat)):(ml.push(0),gl.push(wl))}if(hl<fl){var Pl=hl-total_hits,El=this.game.players_info[ol-1].combat_dice_reroll+this.game.players_info[ol-1].bombardment_combat_dice_reroll;for(var Cl in ul)El=ul[Cl].modifyCombatRerolls(this,ol,pl,player,"bombardment",El);var Al=El;Pl<El&&(Al=Pl);for(var Ml=0;Ml<Al;Ml++){for(var Tl=11,jl=11,Ol=0;Ol<hits_to_misses.length;Ol++)gl[Ol]<Tl&&0==ml[Ol]&&(jl=Ol,Tl=gl[Ol]);var Dl=this.rollDice(10);for(var Il in ul)Dl=ul[Il].modifyCombatRerolls(this,player,ol,player,"space",Dl),sl.game.players_info[pl-1].target_units=ul[Il].modifyTargets(this,ol,pl,sl.game.player,"space",sl.game.players_info[pl-1].target_units);for(z_index in ul)Dl=ul[z_index].modifyCombatRoll(sl,ol,dl.p[ll].owner,this.game.player,"bombardment",Dl);Dl+=this.game.players_info[ol-1].bombardment_roll_modifier,Dl+=this.game.players_info[ol-1].temporary_bombardment_roll_modifier,Dl+=this.game.players_info[ol-1].combat_roll_modifier,(Dl+=dl.s.units[ol-1][jl].temporary_combat_modifier)>=gl[jl]?(hl++,ml[jl]=1):ml[jl]=-1}}1==hl?this.updateLog("Bombardment produces "+hl+" hit"):this.updateLog("Bombardment produces "+hl+" hits"),this.game.queue.push("assign_hits\t"+ol+"\t"+dl.p[ll].owner+"\tground\t"+cl+"\t"+ll+"\t"+hl+"\tbombardment")}return 1}if("ships_fire"===n[0]){var Rl=this.game.queue.length-2;if(Rl>=0&&"space_combat_player_menu"===this.game.queue[Rl].split("\t")[0]){var Bl=this.game.queue[Rl],ql=this.game.queue[Rl+1];return this.game.queue[Rl]=ql,this.game.queue[Rl+1]=Bl,1}var Ll=t.game.player,Nl=parseInt(n[1]),Fl=parseInt(n[2]),Ul=n[3],$l=this.returnSectorAndPlanets(Ul),zl=this.returnEventObjects();if(this.game.queue.splice(r,1),1==this.doesPlayerHaveShipsInSector(Nl,Ul)){for(var Hl=0,Gl=0,Kl=[],Wl=[],Vl=[],Yl=[],Jl=[],Xl=[],Ql=0;Ql<$l.s.units[Nl-1].length;Ql++)for(var Zl=0;Zl<$l.s.units[Nl-1][Ql].shots;Zl++)if($l.s.units[Nl-1][Ql].strength>0){var eu=this.rollDice(10);for(var tu in Yl.push(eu),zl)eu=zl[tu].modifyCombatRoll(this,Nl,Fl,Nl,"space",eu),Gl=zl[tu].modifyUnitHits(this,Nl,Fl,Nl,"space",$l.s.units[Nl-1][Ql],eu,Gl),t.game.players_info[Fl-1].target_units=zl[tu].modifyTargets(this,Nl,Fl,t.game.player,"space",t.game.players_info[Fl-1].target_units);eu+=this.game.players_info[Nl-1].space_combat_roll_modifier,eu+=this.game.players_info[Nl-1].temporary_space_combat_roll_modifier,eu+=$l.s.units[Nl-1][Ql].temporary_combat_modifier,Jl.push(eu),Xl.push(0),eu>=$l.s.units[Nl-1][Ql].combat?(Gl++,Hl++,Wl.push($l.s.units[Nl-1][Ql].combat),Kl.push(1),Vl.push($l.s.units[Nl-1][Ql])):(Hl++,Kl.push(0),Wl.push($l.s.units[Nl-1][Ql].combat),Vl.push($l.s.units[Nl-1][Ql]))}if(Gl<Hl){var au=Hl-Gl,ru=this.game.players_info[Nl-1].combat_dice_reroll+this.game.players_info[Nl-1].space_combat_dice_reroll;for(var nu in zl)ru=zl[nu].modifyCombatRerolls(this,Ll,Nl,Ll,"space",ru),t.game.players_info[Fl-1].target_units=zl[nu].modifyTargets(this,Nl,Fl,t.game.player,"space",t.game.players_info[Fl-1].target_units);var iu=ru;au<ru&&(iu=au);for(var su=0;su<iu;su++){for(var ou=11,cu=11,lu=null,uu=0;uu<hits_to_misses.length;uu++)Wl[uu]<ou&&0==Kl[uu]&&(cu=uu,ou=Wl[uu],lu=Vl[uu]);var du=this.rollDice(10);for(var pu in Yl[cu]=du,zl)du=zl[pu].modifyCombatRerolls(this,Ll,Nl,Ll,"space",du),Gl=zl[pu].modifyUnitHits(this,Nl,Fl,Nl,"space",lu,du,Gl),t.game.players_info[Fl-1].target_units=zl[pu].modifyTargets(this,Nl,Fl,t.game.player,"space",t.game.players_info[Fl-1].target_units);du+=this.game.players_info[Ll-1].space_combat_roll_modifier,du+=this.game.players_info[Ll-1].temporary_space_combat_roll_modifier,du+=$l.s.units[Nl-1][cu].temporary_combat_modifier,Jl[cu]=du,Xl[cu]=1,du>=Wl[cu]?(Gl++,Kl[cu]=1):Kl[cu]=-1}}var hu={};hu.attacker=Nl,hu.hits_or_misses=Kl,hu.units_firing=Vl,hu.hits_on=Wl,hu.unmodified_roll=Yl,hu.modified_roll=Jl,hu.reroll=Xl,this.updateCombatLog(hu),1==Gl?this.updateLog(this.returnFactionNickname(Nl)+":  "+Gl+" hit"):this.updateLog(this.returnFactionNickname(Nl)+":  "+Gl+" hits"),this.game.queue.push("assign_hits\t"+Nl+"\t"+Fl+"\tspace\t"+Ul+"\tspace\t"+Gl+"\tspace_combat")}return 1}if("infantry_fire"===n[0]){var fu=this.game.queue.length-2;if(fu>=0&&"ground_combat_player_menu"===this.game.queue[fu].split("\t")[0]){var mu=this.game.queue[fu],gu=this.game.queue[fu+1];return this.game.queue[fu]=gu,this.game.queue[fu+1]=mu,1}var bu=t.game.player,yu=parseInt(n[1]),vu=parseInt(n[2]),_u=n[3],wu=n[4],xu=this.returnSectorAndPlanets(_u),ku=this.returnEventObjects();if(this.game.queue.splice(r,1),1==this.doesPlayerHaveInfantryOnPlanet(yu,_u,wu)){for(var Su=0,Pu=0,Eu=[],Cu=[],Au=[],Mu=[],Tu=[],ju=[],Ou=0;Ou<xu.p[wu].units[yu-1].length;Ou++)if("infantry"==xu.p[wu].units[yu-1][Ou].type&&0==xu.p[wu].units[yu-1][Ou].destroyed){Au.push(xu.p[wu].units[yu-1][Ou]);var Du=this.rollDice(10);for(var Iu in Mu.push(Du),ku)Du=ku[Iu].modifyCombatRoll(this,yu,vu,yu,"ground",Du),t.game.players_info[vu-1].target_units=ku[Iu].modifyTargets(this,yu,vu,t.game.player,"ground",t.game.players_info[vu-1].target_units);Du+=this.game.players_info[yu-1].ground_combat_roll_modifier,Du+=this.game.players_info[yu-1].temporary_ground_combat_roll_modifier,Du+=xu.p[wu].units[yu-1][Ou].temporary_combat_modifier,Tu.push(Du),ju.push(0),Du>=xu.p[wu].units[yu-1][Ou].combat?(Pu++,Su++,Eu.push(1),Cu.push(xu.p[wu].units[yu-1][Ou].combat)):(Su++,Eu.push(0),Cu.push(xu.p[wu].units[yu-1][Ou].combat))}if(Pu<Su){var Ru=Su-Pu,Bu=this.game.players_info[yu-1].combat_dice_reroll+this.game.players_info[yu-1].ground_combat_dice_reroll;for(var qu in ku)Bu=ku[qu].modifyCombatRerolls(this,bu,yu,bu,"ground",Bu),t.game.players_info[vu-1].target_units=ku[qu].modifyTargets(this,yu,vu,t.game.player,"ground",t.game.players_info[vu-1].target_units);var Lu=Bu;Ru<Bu&&(Lu=Ru);for(var Nu=0;Nu<Lu;Nu++){for(var Fu=11,Uu=11,$u=0;$u<hits_to_misses.length;$u++)Cu[$u]<Fu&&0==Eu[$u]&&(Uu=$u,Fu=Cu[$u]);var zu=this.rollDice(10);for(var Hu in Mu[Uu]=zu,ju[Uu]=1,ku)zu=ku[Hu].modifyCombatRerolls(this,bu,yu,bu,"ground",zu),t.game.players_info[vu-1].target_units=ku[Hu].modifyTargets(this,yu,vu,t.game.player,"ground",t.game.players_info[vu-1].target_units);zu+=this.game.players_info[bu-1].ground_combat_roll_modifier,zu+=this.game.players_info[bu-1].temporary_ground_combat_roll_modifier,zu+=xu.p[wu].units[yu-1][Uu].temporary_combat_modifier,Tu[Uu]=zu,zu>=Cu[Uu]?(Pu++,Eu[Uu]=1):Eu[Uu]=-1}}var Gu={};Gu.attacker=yu,Gu.hits_or_misses=Eu,Gu.units_firing=Au,Gu.hits_on=Cu,Gu.unmodified_roll=Mu,Gu.modified_roll=Tu,Gu.reroll=ju,this.updateCombatLog(Gu),1==Pu?this.updateLog(this.returnFactionNickname(yu)+":  "+Pu+" hit"):this.updateLog(this.returnFactionNickname(yu)+":  "+Pu+" hits"),this.game.queue.push("assign_hits\t"+yu+"\t"+vu+"\tground\t"+_u+"\t"+wu+"\t"+Pu+"\tground_combat")}return 1}if("space_invasion"===n[0]){var Ku=n[1],Wu=n[2];return this.game.queue.splice(r,1),this.game.state.space_combat_sector=Wu,this.unloadStoredShipsIntoSector(Ku,Wu),this.game.state.space_combat_round=0,this.game.state.space_combat_ships_destroyed_attacker=0,this.game.state.space_combat_ships_destroyed_defender=0,Ku==this.game.player&&(this.addMove("continue\t"+Ku+"\t"+Wu),this.addMove("space_combat_end\t"+Ku+"\t"+Wu),this.addMove("space_combat_post\t"+Ku+"\t"+Wu),this.addMove("space_combat\t"+Ku+"\t"+Wu),this.addMove("space_combat_start\t"+Ku+"\t"+Wu),this.addMove("anti_fighter_barrage\t"+Ku+"\t"+Wu),this.addMove("pds_space_defense_post\t"+Ku+"\t"+Wu),this.addMove("pds_space_defense\t"+Ku+"\t"+Wu),this.endTurn()),0}if("space_combat_start"===n[0])return n[1],n[2],n[3],this.game.queue.splice(r,1),this.resetTargetUnits(),this.game.state.space_combat_attacker=-1,this.game.state.space_combat_defender=-1,this.game.state.space_combat_retreats=[],1;if("space_combat_end"===n[0]){var Vu=n[1],Yu=n[2];if(n[3],1==this.hasUnresolvedSpaceCombat(Vu,Yu)){if(this.game.player==Vu){if(this.addMove("space_combat_post\t"+Vu+"\t"+Yu),this.addMove("space_combat\t"+Vu+"\t"+Yu),-1!=this.game.state.space_combat_defender){var Ju=this.returnEventObjects();for(var Xu in Ju)Ju[Xu].spaceCombatRoundEnd(this,this.game.state.space_combat_attacker,this.game.state.space_combat_defender,Yu)}return this.endTurn(),0}return 0}if(1==this.game_space_combat_defender?this.game.queue.push("space_combat_over_player_menu\t"+this.game.state.space_combat_defender+"\t"+Yu):this.game.queue.push("space_combat_over_player_menu\t"+this.game.state.space_combat_attacker+"\t"+Yu),this.game.queue.splice(r,1),this.game.player==Vu){if(-1!=this.game.state.space_combat_defender){var Qu=this.returnEventObjects();for(var Zu in Qu)Qu[Zu].spaceCombatRoundEnd(this,this.game.state.space_combat_attacker,this.game.state.space_combat_defender,Yu)}this.endTurn()}return 0}if("space_combat"===n[0]){n[1];var ed=n[2],td=this.returnEventObjects();this.game.queue.splice(r,1);for(var ad=this.returnSpeakerOrder(),rd=0;rd<ad.length;rd++)for(var nd=0;nd<td.length;nd++)1==td[nd].spaceCombatTriggers(this,ad[rd],ed)&&this.game.queue.push("space_combat_event\t"+ad[rd]+"\t"+ed+"\t"+nd);return 1}if("space_combat_event"===n[0]){var id=this.returnEventObjects(),sd=parseInt(n[1]),od=n[2],cd=parseInt(n[3]);return this.game.queue.splice(r,1),id[cd].spaceCombatEvent(this,sd,od)}if("space_combat_post"===n[0]){var ld=parseInt(n[1]),ud=n[2];this.updateSectorGraphics(ud),this.game.queue.splice(r,1),this.game.state.space_combat_round++,this.game.state.assign_hits_to_cancel=0;for(var dd=0;dd<this.game.players_info.length;dd++)this.game.players_info[dd].units_i_destroyed_last_combat_round=this.game.players_info[dd].units_i_destroyed_last_combat_round,this.game.players_info[dd].units_i_destroyed_this_combat_round=[],this.game.players_info[dd].my_units_destroyed_last_combat_round=this.game.players_info[dd].my_units_destroyed_last_combat_round,this.game.players_info[dd].my_units_destroyed_this_combat_round=[];var pd=this.returnDefender(ld,ud);return-1==pd||(this.resetSpaceUnitTemporaryModifiers(ud),this.game.state.space_combat_attacker=ld,this.game.state.space_combat_defender=pd,1!=this.doesPlayerHaveShipsInSector(ld,ud)||1!=this.doesPlayerHaveShipsInSector(pd,ud)||(this.updateLog("Space Combat: round "+this.game.state.space_combat_round),this.game.queue.push("space_combat_player_menu\t"+pd+"\t"+ld+"\t"+ud),this.game.queue.push("space_combat_player_menu\t"+ld+"\t"+pd+"\t"+ud))),1}if("anti_fighter_barrage"===n[0]){for(var hd=parseInt(n[1]),fd=n[2],md=this.returnSectorAndPlanets(fd),gd=this.returnEventObjects(),bd=hd,yd=-1,vd=0;vd<md.s.units.length;vd++)vd+1!=hd&&md.s.units[vd].length>0&&(yd=vd+1,vd=md.s.units.length+1);if(this.updateSectorGraphics(fd),this.game.queue.splice(r,1),-1!=yd){this.game.queue.push("anti_fighter_barrage_post\t"+hd+"\t"+yd+"\t"+bd+"\t"+fd);for(var _d=this.returnSpeakerOrder(),wd=0;wd<_d.length;wd++)for(var xd=0;xd<gd.length;xd++)1==gd[xd].antiFighterBarrageEventTriggers(this,_d[wd],yd,bd,fd)&&this.game.queue.push("anti_fighter_barrage_event\t"+_d[wd]+"\t"+yd+"\t"+bd+"\t"+fd+"\t"+xd);this.game.queue.push("anti_fighter_barrage_post\t"+hd+"\t"+bd+"\t"+yd+"\t"+fd);for(var kd=0;kd<_d.length;kd++)for(var Sd=0;Sd<gd.length;Sd++)1==gd[Sd].antiFighterBarrageEventTriggers(this,_d[kd],bd,yd,fd)&&this.game.queue.push("anti_fighter_barrage_event\t"+_d[kd]+"\t"+bd+"\t"+yd+"\t"+fd+"\t"+Sd)}return 1}if("anti_fighter_barrage_event"===n[0]){var Pd=parseInt(n[1]),Ed=n[2],Cd=n[3],Ad=n[4],Md=n[5],Td=this.returnEventObjects();return this.game.queue.splice(r,1),Td[Md].antiFighterBarrageEvent(this,Pd,Ed,Cd,Ad)}if("anti_fighter_barrage_post"===n[0]){var jd=parseInt(n[1]),Od=parseInt(n[2]),Dd=parseInt(n[3]),Id=n[4],Rd=this.returnSectorAndPlanets(Id);if(Id=Rd.s.sector,1==this.doesPlayerHaveShipsInSector(Od,Id)&&1==this.doesPlayerHaveAntiFighterBarrageInSector(Od,Id)){this.updateLog(this.returnFactionNickname(Od)+" anti-fighter barrage...");for(var Bd=0,qd=0,Ld=[],Nd=[],Fd=[],Ud=[],$d=[],zd=[],Hd=0;Hd<Rd.s.units[Od-1].length;Hd++)if(Rd.s.units[Od-1][Hd].strength>0&&Rd.s.units[Od-1][Hd].anti_fighter_barrage>0){for(var Gd=0;Gd<Rd.s.units[Od-1][Hd].anti_fighter_barrage;Gd++){var Kd=this.rollDice(10);for(var Wd in Ud.push(Kd),a)Kd=a[Wd].modifyCombatRoll(this,Od,Dd,Od,"anti_fighter_barrage",Kd),qd=a[Wd].modifyUnitHits(this,Od,Dd,Od,"anti_fighter_barrage",Rd.s.units[Od-1][Hd],Kd,qd),t.game.players_info[Dd-1].target_units=a[Wd].modifyTargets(this,Od,Dd,t.game.player,"anti_fighter_barrage",t.game.players_info[Dd-1].target_units);Kd+=this.game.players_info[Od-1].space_combat_roll_modifier,Kd+=this.game.players_info[Od-1].temporary_space_combat_roll_modifier,Kd+=Rd.s.units[Od-1][Hd].temporary_combat_modifier,$d.push(Kd),zd.push(0),Kd>=Rd.s.units[Od-1][Hd].anti_fighter_barrage_combat?(qd++,Bd++,Nd.push(Rd.s.units[Od-1][Hd].anti_fighter_barrage_combat),Ld.push(1),Fd.push(Rd.s.units[Od-1][Hd])):(Bd++,Ld.push(0),Nd.push(Rd.s.units[Od-1][Hd].anti_fighter_barrage_combat),Fd.push(Rd.s.units[Od-1][Hd]))}if(qd<Bd){var Vd=Bd-qd,Yd=this.game.players_info[Od-1].combat_dice_reroll+this.game.players_info[Od-1].space_combat_dice_reroll;for(var Jd in a)Yd=a[Jd].modifyCombatRerolls(this,jd,Od,jd,"anti_fighter_barrage",Yd),t.game.players_info[Dd-1].target_units=a[Jd].modifyTargets(this,Od,Dd,t.game.player,"anti_fighter_barrage",t.game.players_info[Dd-1].target_units);var Xd=Yd;Vd<Yd&&(Xd=Vd);for(var Qd=0;Qd<Xd;Qd++){for(var Zd=11,ep=11,tp=null,ap=0;ap<hits_to_misses.length;ap++)Nd[ap]<Zd&&0==Ld[ap]&&(ep=ap,Zd=Nd[ap],tp=Fd[ap]);var rp=this.rollDice(10);for(var np in Ud[ep]=rp,a)rp=a[np].modifyCombatRerolls(this,jd,Od,jd,"anti_fighter_barrage",rp),qd=a[np].modifyUnitHits(this,Od,Dd,Od,"space",tp,rp,qd),t.game.players_info[Dd-1].target_units=a[np].modifyTargets(this,Od,Dd,t.game.player,"space",t.game.players_info[Dd-1].target_units);rp+=this.game.players_info[jd-1].space_combat_roll_modifier,rp+=this.game.players_info[jd-1].temporary_space_combat_roll_modifier,rp+=Rd.s.units[Od-1][ep].temporary_combat_modifier,$d[ep]=rp,zd[ep]=1,rp>=Nd[ep]?(qd++,Ld[ep]=1):Ld[ep]=-1}}}var ip={};ip.attacker=Od,ip.hits_or_misses=Ld,ip.units_firing=Fd,ip.hits_on=Nd,ip.unmodified_roll=Ud,ip.modified_roll=$d,ip.reroll=zd,this.updateCombatLog(ip),this.game.queue.push("assign_hits\t"+Od+"\t"+Dd+"\tanti_fighter_barrage\t"+Id+"\tanti_fighter_barrage\t"+qd+"\tanti_fighter_barrage"),1==qd?(this.updateLog(this.returnFactionNickname(Od)+":  "+qd+" hit"),this.game.queue.push("ACKNOWLEDGE\t"+t.returnFaction(Od)+" launches anti-fighter-barrage ("+qd+" hit)")):(this.updateLog(this.returnFactionNickname(Od)+":  "+qd+" hits"),this.game.queue.push("ACKNOWLEDGE\t"+t.returnFaction(Od)+" launches anti-fighter-barrage ("+qd+" hits)"))}return this.game.queue.splice(r,1),1}if("space_combat_over_player_menu"===n[0]){var sp=parseInt(n[1]),op=n[2];return this.game.queue.splice(r,1),this.game.player==sp&&this.playerPlaySpaceCombatOver(sp,op),1}if("space_combat_player_menu"===n[0]){var cp=parseInt(n[1]),lp=parseInt(n[2]),up=n[3];return this.game.queue.splice(r,1),this.updateSectorGraphics(up),this.game.player==cp&&this.playerPlaySpaceCombat(cp,lp,up),0}if("ground_combat_over_player_menu"===n[0]){var dp=parseInt(n[1]),pp=n[2],hp=parseInt(n[3]);return this.game.queue.splice(r,1),this.game.player==dp&&this.playerPlayGroundCombatOver(dp,pp,hp),1}if("ground_combat_player_menu"===n[0]){var fp=parseInt(n[1]),mp=parseInt(n[2]),gp=n[3],bp=n[4];return this.game.queue.splice(r,1),this.updateSectorGraphics(gp),this.game.player==fp?(this.playerPlayGroundCombat(fp,mp,gp,bp),0):0}if("bombardment"===n[0]){var yp=n[1],vp=n[2],_p=n[3],wp=this.returnEventObjects();this.game.queue.splice(r,1);for(var xp=this.returnSpeakerOrder(),kp=0;kp<xp.length;kp++)for(var Sp=0;Sp<wp.length;Sp++)1==wp[Sp].bombardmentTriggers(this,xp[kp],yp,vp,_p)&&this.game.queue.push("bombardment_event\t"+xp[kp]+"\t"+yp+"\t"+vp+"\t"+_p+"\t"+Sp);return 1}if("bombardment_event"===n[0]){var Pp=this.returnEventObjects(),Ep=parseInt(n[1]),Cp=parseInt(n[2]),Ap=n[3],Mp=n[4],Tp=parseInt(n[5]);return this.game.queue.splice(r,1),Pp[Tp].bombardmentEvent(this,Ep,Cp,Ap,Mp)}if("bombardment_post"===n[0]){var jp=parseInt(n[1]),Op=n[2],Dp=n[3];this.updateSectorGraphics(Op),this.game.queue.splice(r,1);var Ip=this.returnSectorAndPlanets(Op),Rp=Ip.p[Dp].owner;return-1==Rp?1:this.doesSectorContainPlayerUnit(jp,Op,"dreadnaught")||this.doesSectorContainPlayerUnit(jp,Op,"warsun")?(this.game.player==jp&&this.playerPlayBombardment(jp,Op,Dp),0):1}if("planetary_defense"===n[0]){var Bp=n[1],qp=n[2],Lp=n[3],Np=this.returnEventObjects();this.game.queue.splice(r,1);for(var Fp=this.returnSpeakerOrder(),Up=0;Up<Fp.length;Up++)for(var $p=0;$p<Np.length;$p++)1==Np[$p].planetaryDefenseTriggers(this,Bp,qp,Lp)&&this.game.queue.push("planetary_defense_event\t"+Fp[Up]+"\t"+qp+"\t"+Lp+"\t"+$p);return 1}if("planetary_defense_event"===n[0]){var zp=this.returnEventObjects(),Hp=parseInt(n[1]),Gp=n[2],Kp=n[3],Wp=parseInt(n[4]);return this.game.queue.splice(r,1),zp[Wp].planetaryDefenseEvent(this,Hp,Gp,Kp)}if("planetary_defense_post"===n[0]){parseInt(n[1]);var Vp=n[2];return n[3],this.updateSectorGraphics(Vp),this.game.queue.splice(r,1),1}if("ground_combat_start"===n[0]){n[1];var Yp=n[2],Jp=n[3];return this.game.queue.splice(r,1),this.game.state.ground_combat_round=0,this.game.state.ground_combat_sector=Yp,this.game.state.ground_combat_planet_idx=Jp,this.game.state.ground_combat_infantry_destroyed_attacker=0,this.game.state.ground_combat_infantry_destroyed_defender=0,this.game.state.ground_combat_attacker=-1,this.game.state.ground_combat_defender=-1,1}if("ground_combat_end"===n[0]){var Xp=n[1],Qp=n[2],Zp=n[3],eh=this.returnSectorAndPlanets(Qp);if(this.game.queue.splice(r,1),-1!=this.game.state.ground_combat_defender){var th=this.returnEventObjects();for(var ah in th)th[ah].groundCombatRoundEnd(this,this.game.state.ground_combat_attacker,this.game.state.ground_combat_defender,Qp,Zp)}if(1==this.hasUnresolvedGroundCombat(Xp,Qp,Zp))return this.game.player==Xp?(this.addMove("ground_combat_end\t"+Xp+"\t"+Qp+"\t"+Zp),this.addMove("ground_combat_post\t"+Xp+"\t"+Qp+"\t"+Zp),this.addMove("ground_combat\t"+Xp+"\t"+Qp+"\t"+Zp),this.endTurn(),0):0;1==this.game_ground_combat_defender?this.game.queue.push("ground_combat_over_player_menu\t"+this.game.state.ground_combat_defender+"\t"+Qp+"\t"+Zp):this.game.queue.push("ground_combat_over_player_menu\t"+this.game.state.ground_combat_attacker+"\t"+Qp+"\t"+Zp);var rh=t.returnNumberOfGroundForcesOnPlanet(Xp,Qp,Zp),nh=t.returnNumberOfGroundForcesOnPlanet(this.game.state.ground_combat_defender,Qp,Zp);return rh>0?(this.updateLog(eh.p[Zp].name+" conquered by "+this.returnFactionNickname(Xp)+" ("+rh+" infantry)"),this.updatePlanetOwner(Qp,Zp,Xp)):this.updateLog(eh.p[Zp].name+" defended by "+this.returnFactionNickname(this.game.state.ground_combat_defender)+" ("+nh+" infantry)"),this.game.queue.splice(r,1),1}if("ground_combat"===n[0]){n[1];var ih=n[2],sh=n[3],oh=this.returnEventObjects();this.game.queue.splice(r,1);for(var ch=this.returnSpeakerOrder(),lh=0;lh<ch.length;lh++)for(var uh=0;uh<oh.length;uh++)1==oh[uh].groundCombatTriggers(this,ch[lh],ih,sh)&&this.game.queue.push("ground_combat_event\t"+ch[lh]+"\t"+ih+"\t"+sh+"\t"+uh);return 1}if("ground_combat_event"===n[0]){var dh=this.returnEventObjects(),ph=parseInt(n[1]),hh=n[2],fh=n[3],mh=parseInt(n[4]);return this.game.queue.splice(r,1),dh[mh].groundCombatEvent(this,ph,hh,fh)}if("ground_combat_post"===n[0]){var gh=parseInt(n[1]),bh=n[2],yh=parseInt(n[3]),vh=this.returnSectorAndPlanets(bh);this.game.queue.splice(r,1),this.game.state.assign_hits_to_cancel=0,this.game.state.ground_combat_round++;for(var _h=0;_h<this.game.players_info.length;_h++)this.game.players_info[_h].units_i_destroyed_last_combat_round=this.game.players_info[_h].units_i_destroyed_last_combat_round,this.game.players_info[_h].units_i_destroyed_this_combat_round=[],this.game.players_info[_h].my_units_destroyed_last_combat_round=this.game.players_info[_h].my_units_destroyed_last_combat_round,this.game.players_info[_h].my_units_destroyed_this_combat_round=[];var wh=this.returnDefender(gh,bh,yh);return-1==wh?(vh.p[yh].owner!=gh&&(this.updateLog(this.returnFactionNickname(gh)+" seizes "+vh.p[yh].name),this.updatePlanetOwner(bh,yh,gh)),1):(this.resetGroundUnitTemporaryModifiers(bh,yh),this.game.state.ground_combat_attacker=gh,this.game.state.ground_combat_defender=wh,1==this.hasUnresolvedGroundCombat(gh,bh,yh)&&(this.updateLog("Round "+this.game.state.ground_combat_round+": "+this.returnPlayerInfantryOnPlanet(gh,vh.p[yh])+" "+this.returnFactionNickname(gh)+" infantry vs. "+this.returnPlayerInfantryOnPlanet(wh,vh.p[yh])+" "+this.returnFactionNickname(wh)+" infantry"),this.game.queue.push("ground_combat_player_menu\t"+wh+"\t"+gh+"\t"+bh+"\t"+yh),this.game.queue.push("ground_combat_player_menu\t"+gh+"\t"+wh+"\t"+bh+"\t"+yh)),1)}if("action_card"===n[0]){var xh=parseInt(n[1]),kh=n[2],Sh=this.returnEventObjects();"action"==this.action_cards[kh].type&&(this.game.state.active_player_moved=1),this.updateLog(this.returnFactionNickname(xh)+" plays "+this.action_cards[kh].name+"<p></p><div style='width:80%;font-size:1.0em;margin-left:auto;margin-right:auto;margin-top:15px;margin-bottom:15px'>"+this.action_cards[kh].text+"</div>");var Ph=this.returnActionCards();Ph[kh],this.game.queue.splice(r,1);var Eh=this.returnSpeakerOrder();this.game.players_info[this.game.player-1].can_intervene_in_action_card=0;for(var Ch=0;Ch<Eh.length;Ch++){for(var Ah=0;Ah<Sh.length;Ah++)1==Sh[Ah].playActionCardTriggers(this,Eh[Ch],xh,kh)&&this.game.queue.push("action_card_event\t"+Eh[Ch]+"\t"+xh+"\t"+kh+"\t"+Ah);Eh[Ch]!=xh&&this.game.queue.push("action_card_player_menu\t"+Eh[Ch]+"\t"+xh+"\t"+kh)}return 1}if("action_card_player_menu"===n[0]){var Mh=parseInt(n[1]),Th=parseInt(n[2]),jh=n[3];return this.game.queue.splice(r,1),Mh==Th?(this.updateStatus("Your opponents are being notified you have played "+this.action_cards[jh].name),0):(this.game.player==Mh?this.playerPlayActionCardMenu(Th,jh):this.updateStatus(this.returnFaction(Mh)+" is responding to action card "+this.action_cards[jh].name),0)}if("action_card_event"===n[0]){var Oh=this.returnEventObjects(),Dh=parseInt(n[1]),Ih=n[2],Rh=n[3],Bh=parseInt(n[4]);return this.game.queue.splice(r,1),Oh[Bh].playActionCardEvent(this,Dh,Ih,Rh)}if("action_card_post"===n[0]){var qh=parseInt(n[1]),Lh=n[2],Nh=this.returnActionCards(),Fh=Nh[Lh];return this.game.queue.splice(r,1),Fh.playActionCard(this,this.game.player,qh,Lh)}for(var Uh in a)if(!a[Uh].handleGameLoop(t,r,n))return 0;if(0==s)return 0}return 1}},{key:"convertSectorToSectorname",value:function(e){for(var t in this.game.board)if(this.game.board[t].tile==e)return t;return""}},{key:"convertPlanetIdentifierToSector",value:function(e){for(var t in this.game.board)for(var a=this.game.board[t].tile,r=this.game.sectors[a],n=0;n<r.planets.length;n++)if(r.planets[n]==e)return a;return null}},{key:"returnPlanetIdxOfPlanetIdentifierInSector",value:function(e,t){for(var a=this.returnSectorAndPlanets(t),r=0;r<a.p.length;r++)for(var n in this.game.planets)if(n==e&&a.p[r]==this.game.planets[n])return r;return-1}},{key:"returnPlayerTurnTracker",value:function(){var e={activate_system:0,production:0,invasion:0,action_card:0,trade:0,action:0};return e}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"prependMove",value:function(e){this.moves.unshift(e)}},{key:"endTurn",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.rmoves.length-1;t>=0;t--)this.moves.push(this.rmoves[t]);this.updateStatus("Waiting for information from peers...."),0!=e&&(extra.target=e),this.game.turn=this.moves,this.moves=[],this.rmoves=[],this.sendMessage("game",{})}},{key:"endGame",value:function(e,t){this.game.over=1,1==this.active_browser&&salert("The Game is Over!")}},{key:"resetConfirmsNeeded",value:function(e){if(this.game.confirms_needed=e,this.game.confirms_received=0,this.game.confirms_players=[],this.game.tmp_confirms_received=0,this.game.tmp_confirms_players=[],this.game.confirms_needed==this.game.players_info.length)for(var t=1;t<=this.game.players_info.length;t++)this.setPlayerActive(t)}},{key:"returnGameOptionsHTML",value:function(){var e=this.maxPlayers;try{e=document.querySelector(".game-wizard-players-select").value}catch(e){}for(var t='\n\n      <div style="padding:40px;width:100vw;height:100vh;overflow-y:scroll;display:grid;grid-template-columns: 200px auto">\n\n        <div style="top:0;left:0;margin-right: 20px;">\n\n            <label for="game_length ">Game Length:</label>\n            <select name="game_length">\n              <option value="4">4 VP</option>\n              <option value="8">8 VP</option>\n              <option value="10" selected>10 VP</option>\n              <option value="12">12 VP</option>\n              <option value="14">14 VP</option>\n            </select>\n\n            <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n\n        </div>\n        <div>\n\n    ',a=1;a<=e;a++)t+='\n            <label for="player'.concat(a,'" class="game-players-options game-players-options-').concat(a,'p">Player ').concat(a,':</label>\n            <select name="player').concat(a,'" id="game-players-select-').concat(a,'p" class="game-players-options game-players-options-').concat(a,'p">\n              <option value="random" default>random</option>\n              <option value="faction1" default>Sol Federation</option>\n              <option value="faction2">Universities of Jol Nar</option>\n              <option value="faction3">XXcha Kingdom</option>\n              <option value="faction4">Sardakk N\'Orr</option>\n              <option value="faction5">Brotherhood of Yin</option>\n              <option value="faction6">Yssaril Tribes</option>\n              <option value="faction7">Embers of Muaat</option>\n            </select>\n      ');return t+="\n        </div>\n      </div>\n    "}},{key:"returnPlayers",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=[],a=JSON.parse(JSON.stringify(this.returnFactions())),r=0;r<e;r++){0==r&&(col="color1"),1==r&&(col="color2"),2==r&&(col="color3"),3==r&&(col="color4"),4==r&&(col="color5"),5==r&&(col="color6");var n=Object.keys(a),i=n[this.rollDice(n.length)-1];0==r&&null!=this.game.options.player1&&"random"!=this.game.options.player1&&(i=this.game.options.player1),1==r&&null!=this.game.options.player2&&"random"!=this.game.options.player2&&(i=this.game.options.player2),2==r&&null!=this.game.options.player3&&"random"!=this.game.options.player3&&(i=this.game.options.player3),3==r&&null!=this.game.options.player4&&"random"!=this.game.options.player4&&(i=this.game.options.player4),4==r&&null!=this.game.options.player5&&"random"!=this.game.options.player5&&(i=this.game.options.player5),5==r&&null!=this.game.options.player6&&"random"!=this.game.options.player6&&(i=this.game.options.player6),delete a[i],t[r]={},t[r].can_intervene_in_action_card=0,t[r].secret_objectives_in_hand=0,t[r].action_cards_in_hand=0,t[r].action_cards_per_round=1,t[r].action_card_limit=7,t[r].action_cards_played=[],t[r].new_tokens_per_round=2,t[r].command_tokens=3,t[r].strategy_tokens=2,t[r].fleet_supply=3,t[r].fleet_supply_limit=16,t[r].faction=i,t[r].homeworld="",t[r].color=col,t[r].goods=0,t[r].commodities=0,t[r].commodity_limit=3,t[r].vp=0,t[r].passed=0,t[r].strategy_cards_played=[],t[r].strategy_cards_retained=[],t[r].cost_of_technology_primary=6,t[r].cost_of_technology_secondary=4,t[r].promissary_notes=[],t[r].infantry_limit=30,t[r].fighter_limit=30,t[r].carrier_limit=4,t[r].destroyer_limit=8,t[r].cruiser_limit=8,t[r].dreadnaught_limit=5,t[r].flagship_limit=1,t[r].warsun_limit=2,t[r].pds_limit=4,t[r].spacedock_limit=3,t[r].traded_this_turn=0,t[r].new_token_bonus_when_issued=0,t[r].action_cards_bonus_when_issued=0,t[r].fleet_move_bonus=0,t[r].temporary_fleet_move_bonus=0,t[r].ship_move_bonus=0,t[r].temporary_ship_move_bonus=0,t[r].fly_through_asteroids=0,t[r].fly_through_nebulas=0,t[r].fly_through_supernovas=0,t[r].move_into_supernovas=0,t[r].reinforce_infantry_after_successful_ground_combat=0,t[r].bacterial_weapon=0,t[r].evasive_bonus_on_pds_shots=0,t[r].perform_two_actions=0,t[r].move_through_sectors_with_opponent_ships=0,t[r].temporary_move_through_sectors_with_opponent_ships=0,t[r].assign_pds_hits_to_non_fighters=0,t[r].reallocate_four_infantry_per_round=0,t[r].may_produce_after_gaining_planet=0,t[r].extra_roll_on_bombardment_or_pds=0,t[r].stasis_on_opponent_combat_first_round=0,t[r].may_repair_damaged_ships_after_space_combat=0,t[r].may_assign_first_round_combat_shot=0,t[r].production_bonus=0,t[r].may_player_produce_without_spacedock=0,t[r].may_player_produce_without_spacedock_production_limit=0,t[r].may_player_produce_without_spacedock_cost_limit=0,t[r].may_produce_warsuns=0,t[r].target_units=[],t[r].planets_conquered_this_turn=[],t[r].objectives_scored_this_round=[],t[r].must_exhaust_at_round_start=[],t[r].deep_space_conduits=0,t[r].resupply_stations=0,t[r].turn_nullification=0,t[r].space_combat_roll_modifier=0,t[r].ground_combat_roll_modifier=0,t[r].pds_combat_roll_modifier=0,t[r].bombardment_combat_roll_modifier=0,t[r].space_combat_roll_bonus_shots=0,t[r].ground_combat_roll_bonus_shots=0,t[r].pds_combat_roll_bonus_shots=0,t[r].bombardment_combat_roll_bonus_shots=0,t[r].ground_combat_dice_reroll=0,t[r].space_combat_dice_reroll=0,t[r].pds_combat_dice_reroll=0,t[r].bombardment_combat_dice_reroll=0,t[r].combat_dice_reroll=0,t[r].temporary_immune_to_pds_fire=0,t[r].temporary_immune_to_planetary_defense=0,t[r].temporary_space_combat_roll_modifier=0,t[r].temporary_ground_combat_roll_modifier=0,t[r].temporary_pds_combat_roll_modifier=0,t[r].temporary_bombardment_combat_roll_modifier=0,t[r].units_i_destroyed_this_combat_round=[],t[r].units_i_destroyed_last_combat_round=[],t[r].my_units_destroyed_this_combat_round=[],t[r].my_units_destroyed_last_combat_round=[],t[r].temporary_green_tech_prerequisite=0,t[r].temporary_yellow_tech_prerequisite=0,t[r].temporary_red_tech_prerequisite=0,t[r].temporary_blue_tech_prerequisite=0,t[r].permanent_green_tech_prerequisite=0,t[r].permanent_yellow_tech_prerequisite=0,t[r].permanent_red_tech_prerequisite=0,t[r].permanent_blue_tech_prerequisite=0,t[r].temporary_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=0,t[r].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=0,t[r].temporary_infiltrate_infrastructure_on_invasion=0,t[r].permanent_infiltrate_infrastructure_on_invasion=0,t[r].temporary_opponent_cannot_retreat=0,t[r].permanent_opponent_cannot_retreat=0,t[r].permanent_research_technology_card_must_not_spend_resources=0,1==r&&(t[r].color="yellow"),2==r&&(t[r].color="green"),3==r&&(t[r].color="blue"),4==r&&(t[r].color="purple"),5==r&&(t[r].color="black"),t[r].planets=[],t[r].tech=[],t[r].tech_exhausted_this_turn=[],t[r].upgrades=[],t[r].strategy=[],t[r].objectives_scored=[],t[r].lost_planet_this_round=-1}return t}},{key:"playerTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main",t=this,a=(this.returnTechnology(),["action","main","instant"]),r=this.returnPlayerActionCards(t.game.player,a);if(this.updateLeaderboard(),this.updateTokenDisplay(),"main"==e){var n="player_color_"+this.game.player,i="";i+='<div class="terminal_header2 sf-readable"><div class="player_color_box '+n+'"></div>'+this.returnFaction(this.game.player)+":</div><p><ul class='terminal_header3'>",1==this.canPlayerPass(this.game.player)?1==this.game.state.active_player_moved?i+='<li class="option" id="endturn">end turn</li>':i+='<li class="option" id="pass">pass</li>':1==this.game.state.active_player_moved&&(i+='<li class="option" id="endturn">end turn</li>'),1==this.game.state.round&&0==this.game.state.active_player_moved&&(0==this.tutorial_move_clicked&&(i+='<li class="option" id="tutorial_move_ships">move ships</li>'),0==this.tutorial_produce_clicked&&(i+='<li class="option" id="tutorial_produce_units">produce units</li>')),this.game.players_info[this.game.player-1].command_tokens>0&&0==this.game.state.active_player_moved&&(i+='<li class="option" id="activate">activate sector</li>'),1==this.canPlayerPlayStrategyCard(this.game.player)&&0==this.game.state.active_player_moved&&(i+='<li class="option" id="select_strategy_card">play strategy card</li>'),r.length>0&&0==this.game.tracker.action_card&&1==this.canPlayerPlayActionCard(this.game.player)&&0==this.game.state.active_player_moved&&(i+='<li class="option" id="action">play action card</li>'),0==this.game.tracker.trade&&1==this.canPlayerTrade(this.game.player)&&(i+='<li class="option" id="trade">trade</li>');var s=0,o=[],c=[],l=this.returnEventObjects();if(0==this.game.state.active_player_moved)for(var u=0;u<l.length;u++)if(1==l[u].menuOptionTriggers(this,"main",this.game.player)){var d=l[u].menuOption(this,"main",this.game.player);i+=d.html,c.push(u),o.push(d.event),s=1}i+="</ul></p>",this.updateStatus(i),$(".option").on("click",(function(){var e=$(this).attr("id");if(1==s)for(var r=0;r<o.length;r++)if(e==o[r])return $(this).remove(),t.game.state.active_player_moved=1,void l[c[r]].menuOptionActivated(t,"main",t.game.player);return"activate"==e&&t.playerActivateSystem(),"tutorial_move_ships"==e?(t.tutorial_move_clicked=1,void t.playerAcknowledgeNotice('To move ships select "activate sector". Be careful as most ships can only move 1-hexagon and you cannot move ships from sectors that are already activated. You will be able to choose the ships to move, and load infantry and fighters into units that can carry them.',(function(){t.playerTurn()}))):"tutorial_produce_units"==e?(t.tutorial_produce_clicked=1,void t.playerAcknowledgeNotice('To produce units, select "activate sector" and activate a sector with a space dock (like your home system). You can only have as many non-fighter ships in any sector as your fleet supply, so move your ships out before producing more!',(function(){t.playerTurn()}))):("select_strategy_card"==e&&t.playerSelectStrategyCard((function(e){t.game.state.active_player_moved=1,t.addMove("strategy_card_after\t"+e+"\t"+t.game.player+"\t1"),t.addMove("strategy\t"+e+"\t"+t.game.player+"\t1"),t.addMove("strategy_card_before\t"+e+"\t"+t.game.player+"\t1"),t.endTurn()})),"action"==e&&t.playerSelectActionCard((function(e){"action"==t.action_cards[e].type&&(t.game.state.active_player_moved=1),t.addMove("action_card_post\t"+t.game.player+"\t"+e),t.addMove("action_card\t"+t.game.player+"\t"+e),t.addMove("lose\t"+t.game.player+"\taction_cards\t1"),t.endTurn()}),(function(){t.playerTurn()}),a),"trade"==e?(t.playerTrade(),0):("pass"==e&&(t.addMove("resolve\tplay"),t.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),t.addMove("player_end_turn\t"+t.game.player),t.addMove("pass\t"+t.game.player),t.endTurn()),void("endturn"==e&&(t.addMove("resolve\tplay"),t.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),t.addMove("player_end_turn\t"+t.game.player),t.endTurn()))))}))}}},{key:"playerPlayActionCardMenu",value:function(e,t){for(var a=this,r=["counter"],n=0;n<this.game.deck[1].hand.length;n++)this.game.deck[1].hand[n].indexOf("sabotage")>-1&&(this.game.players_info[this.game.player-1].can_intervene_in_action_card=1);if(!this.game.players_info[this.game.player-1].can_intervene_in_action_card){var i='<div class="action_card_instructions_hud">'+this.returnFaction(e)+" has played an action card:</div>";return i+='<div class="action_card_name_hud">'+a.action_cards[t].name+"</div>",i+='<div class="action_card_text_hud">',i+=this.action_cards[t].text,i+="</div>",this.playerAcknowledgeNotice(i,(function(){a.endTurn()})),0}var s='<div class="action_card_instructions_hud">'+this.returnFaction(e)+" has played an action card:</div>";s+='<div class="action_card_name_hud">'+a.action_cards[t].name+"</div>",s+='<div class="action_card_text_hud">',s+=this.action_cards[t].text,s+="</div>",s+="<ul>";var o=this.returnPlayerActionCards(this.game.player,r);o.length>0?(s+='<li class="option" id="cont">continue</li>',s+='<li class="option" id="action">play action card</li>'):s+='<li class="option" id="cont">continue</li>';for(var c=0,l=[],u=[],d=this.returnEventObjects(),p=0;p<d.length;p++)if(1==d[p].menuOptionTriggers(this,"action_card",this.game.player)){var h=d[p].menuOption(this,"action_card",this.game.player);s+=h.html,u.push(p),l.push(h.event),c=1}s+="</ul>",this.updateStatus(s),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");if(1==c)for(var i=0;i<l.length;i++)n==l[i]&&($(this).remove(),d[u[i]].menuOptionActivated(a,"action_card",a.game.player));return"action"==n&&a.playerSelectActionCard((function(t){a.game.players_info[a.game.player-1].action_cards_played.push(t),a.addMove("action_card_post\t"+a.game.player+"\t"+t),a.addMove("action_card\t"+a.game.player+"\t"+t),a.addMove("lose\t"+a.game.player+"\taction_cards\t1"),a.playerPlayActionCardMenu(e,t)}),(function(){a.playerPlayActionCardMenu(e,t)}),r),"cont"==n&&a.endTurn(),0}))}},{key:"playerPlayBombardment",value:function(e,t,a){var r=this;this.game.state.bombardment_sector=t,this.game.state.bombardment_planet_idx=a;var n=r.returnSectorAndPlanets(t);if(0==this.game.state.bombardment_against_cultural_planets&&"cultural"==n.p[a].type&&(this.updateLog("Bombardment not possible against cultural planets. Skipping."),this.endTurn()),0==this.game.state.bombardment_against_industrial_planets&&"industrial"==n.p[a].type&&(this.updateLog("Bombardment not possible against industrial planets. Skipping."),this.endTurn()),0==this.game.state.bombardment_against_hazardous_planets&&"hazardous"==n.p[a].type&&(this.updateLog("Bombardment not possible against hazardous planets. Skipping."),this.endTurn()),n.p[a].owner==r.game.player)return r.endTurn(),0;if(this.doesPlanetHavePDS(n.p[a])){if(!this.doesSectorContainPlayerUnit(e,t,"warsun"))return this.updateLog("Bombardment not possible against PDS-defended planets. Skipping."),r.endTurn(),0;this.updateLog("Warsuns make bombardment possible against PDS-defended planets...")}html='<div class="sf-readable">Do you wish to bombard '+n.p[a].name+"? </div><ul>",this.returnPlayerActionCards(this.game.player,["pre_bombardment"]).length>0?(html+='<li class="option" id="bombard">bombard planet</li>',html+='<li class="option" id="action">play action card</li>',html+='<li class="option" id="skip">skip bombardment</li>'):(html+='<li class="option" id="bombard">bombard planet</li>',html+='<li class="option" id="skip">skip bombardment</li>');for(var i=0,s=[],o=[],c=this.returnEventObjects(),l=0;l<c.length;l++)if(1==c[l].menuOptionTriggers(this,"pre_bombardment",this.game.player)){var u=c[l].menuOption(this,"pre_bombardment",this.game.player);html+=u.html,o.push(l),s.push(u.event),i=1}html+="</ul>",this.updateStatus(html),$(".option").on("click",(function(){var e=$(this).attr("id");if(1==i)for(var n=0;n<s.length;n++)e==s[n]&&($(this).remove(),c[o[n]].menuOptionActivated(r,"pre_bombardment",r.game.player));return"action"==e&&r.playerSelectActionCard((function(e){r.game.players_info[this.game.player-1].action_cards_played.push(e),r.addMove("action_card_post\t"+r.game.player+"\t"+e),r.addMove("action_card\t"+r.game.player+"\t"+e),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),r.playerPlayActionCardMenu(action_card_player,e)}),(function(){r.playerPlayActionCardMenu(action_card_player,card)}),["pre_bombardment"]),"bombard"==e&&(r.addMove("bombard\t"+r.game.player+"\t"+t+"\t"+a),r.endTurn()),"skip"==e&&r.endTurn(),0}))}},{key:"playerAcknowledgeNotice",value:function(e,t){var a='<div class="sf-readable">'+e+"</div><ul>";a+='<li class="textchoice" id="confirmit">I understand...</li>',a+="</ul></p>",this.updateStatus(a);try{$(".textchoice").off(),$(".textchoice").on("click",(function(){t()}))}catch(e){}return 0}},{key:"playerAssignHitsCapitalShips",value:function(e,t,a){var r=this,n=0,i=0,s=0,o=["destroyer","cruiser","carrier","dreadnaught","warsun","flagship"];html='<div class="sf-readable">You must assign '+a+" to your capital ships (if possible):</div><ul>",html+='<li class="option" id="assign">continue</li>',html+="</ul>",this.updateStatus(html),$(".option").on("click",(function(){if("assign"==$(this).attr("id")){var c=r.returnSectorAndPlanets(t),l="";l+='<div class="sf-readable">Assign <div style="display:inline" id="total_hits_to_assign">'+a+"</div> hits:</div>",l+="<ul>";for(var u=0;u<c.s.units[r.game.player-1].length;u++)if(0==c.s.units[r.game.player-1][u].destroyed&&c.s.units[r.game.player-1][u].strength>0){var d=c.s.units[r.game.player-1][u];if(i++,o.includes(d.type)&&s++,l+='<li class="textchoice player_ship_'+u+'" id="'+u+'">'+d.name,d.capacity>=1){for(var p="",h=0,f=0,m=0;m<c.s.units[r.game.player-1][u].storage.length;m++)"infantry"==c.s.units[r.game.player-1][u].storage[m].type&&f++,"fighter"==c.s.units[r.game.player-1][u].storage[m].type&&h++;(f>0||h>0)&&(p+=" ",f>0&&(p+=f+"i"),h>0&&(f>0&&(p+=", "),p+=h+"f"),p+=" "),l+=p}if(d.strength>1){i+=d.strength-1,l+=' <div style="display:inline" id="player_ship_'+u+'_hits">(';for(var g=1;g<d.strength;g++)l+="*";l+=")",l+="</div>"}l+="</li>"}if(l+="</ul>",0==i)return r.endTurn(),0;r.updateStatus(l),$(".textchoice").off(),$(".textchoice").on("click",(function(){var u=$(this).attr("id"),d=c.s.units[r.game.player-1][u];if(s>0){if(!o.includes(d.type))return void salert("You must first assign hits to the required unit types");s--}if(r.addMove("assign_hit\t"+e+"\t"+e+"\t"+r.game.player+"\tship\t"+t+"\t"+u+"\t0"),a--,n++,$("#total_hits_to_assign").innerHTML=a,d.strength>1){d.strength--;var p="#player_ship_"+u+"_hits",h="";if(d.strength>1){l+="(";for(var f=1;f<d.strength;f++)h+="*";h+=")"}$(p).html(h)}else d.strength=0,d.destroyed=0,$(this).remove();r.saveSystemAndPlanets(c),(0==a||n>=i)&&(r.updateStatus("Notifying players of hits assignment..."),r.endTurn(),r.updateStatus("Hits taken..."))}))}}))}},{key:"playerAssignHits",value:function(e,t,a,r,n,i){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",o=this,c=0,l=0,u=["assign_hits"];"pds"==n&&(u=["post_pds"]),html='<div class="sf-readable">You must assign '+i+" to your fleet:</div><ul>";var d=this.returnPlayerActionCards(o.game.player,u);d.length>0?(html+='<li class="option" id="assign">continue</li>',html+='<li class="option" id="action">play action card</li>'):html+='<li class="option" id="assign">continue</li>';var p="";"pds"==n&&(p="assign_hits_pds"),""==p&&"space"==a&&(p="assign_hits_space"),"ground"==a&&(p="assign_hits_ground"),"anti_fighter_barrage"==a&&(p="assign_hits_anti_fighter_barrage");for(var h=0,f=[],m=[],g=this.returnEventObjects(),b=0;b<g.length;b++)if(1==g[b].menuOptionTriggers(this,p,this.game.player)){var y=g[b].menuOption(this,p,this.game.player);html+=y.html,m.push(b),f.push(y.event),h=1}html+="</ul>",this.updateStatus(html),$(".option").on("click",(function(){var d=$(this).attr("id");if(1==h)for(var b=0;b<f.length;b++)d==f[b]&&(this.tech[o.game.players_info[o.game.player-1].tech[m]],g[m[b]].menuOptionActivated(o,p,o.game.player));if("action"==d&&o.playerSelectActionCard((function(e){o.addMove(o.game.state.assign_hits_queue_instruction),o.addMove("action_card_post\t"+o.game.player+"\t"+e),o.addMove("action_card\t"+o.game.player+"\t"+e),o.addMove("lose\t"+o.game.player+"\taction_cards\t1"),o.endTurn(),o.updateStatus("playing action card before hits assignment")}),(function(){o.playerAssignHits(e,t,a,r,n,i,s)}),u),"assign"==d){if(o.game.state.assign_hits_to_cancel>0&&((i-=o.game.state.assign_hits_to_cancel)<0&&(i=0),0==i))return o.updateLog("NOTIFY\t"+o.returnFactionNickname(o.game.player)+" does not take any hits"),o.endTurn(),0;var y=o.returnSectorAndPlanets(r),v="";v+='<div class="sf-readable">Assign <div style="display:inline" id="total_hits_to_assign">'+i+"</div> hits:</div>",v+="<ul>";var _=0,w=o.game.players_info[o.game.player-1].target_units;"anti_fighter_barrage"==a&&(w=["fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter","fighter"]);for(var x=0;x<y.s.units[o.game.player-1].length;x++)if(0==y.s.units[o.game.player-1][x].destroyed&&y.s.units[o.game.player-1][x].strength>0){var k=y.s.units[o.game.player-1][x];if(l++,w.includes(k.type)&&_++,v+='<li class="textchoice player_ship_'+x+'" id="'+x+'">'+k.name,k.capacity>=1){for(var S="",P=0,E=0,C=0;C<y.s.units[o.game.player-1][x].storage.length;C++)"infantry"==y.s.units[o.game.player-1][x].storage[C].type&&E++,"fighter"==y.s.units[o.game.player-1][x].storage[C].type&&P++;(E>0||P>0)&&(S+=" ",E>0&&(S+=E+"i"),P>0&&(E>0&&(S+=", "),S+=P+"f"),S+=" "),v+=S}if(k.strength>1){l+=k.strength-1,v+=' <div style="display:inline" id="player_ship_'+x+'_hits">(';for(var A=1;A<k.strength;A++)v+="*";v+=")",v+="</div>"}v+="</li>"}if(v+="</ul>",0==l)return console.log("ERROR: you had no hits left to assign, bug?"),console.log("SHIPS: "+JSON.stringify(y.s.units[o.game.player-1])),o.endTurn(),0;o.updateStatus(v),$(".textchoice").off(),$(".textchoice").on("click",(function(){var a=$(this).attr("id"),n=y.s.units[o.game.player-1][a];if(_>0){if(!w.includes(n.type))return void salert("You must first assign hits to the required unit types");_--}if(o.addMove("assign_hit\t"+e+"\t"+t+"\t"+o.game.player+"\tship\t"+r+"\t"+a+"\t0"),i--,c++,$("#total_hits_to_assign").innerHTML=i,n.strength>1){n.strength--;var s="#player_ship_"+a+"_hits",u="";if(n.strength>1){v+="(";for(var d=1;d<n.strength;d++)u+="*";u+=")"}$(s).html(u)}else n.strength=0,n.destroyed=0,$(this).remove();o.saveSystemAndPlanets(y),(0==i||c>=l)&&(o.updateStatus("Notifying players of hits assignment..."),o.endTurn(),o.updateStatus("Hits taken..."))}))}}))}},{key:"playerDestroyUnits",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=this,s=t,o=0,c=0,l=n.returnSectorAndPlanets(a);html='<div class="sf-readable">You must destroy '+t+" units in sector: "+n.game.sectors[a].name+":</div><ul>";var u=0,d=n.game.players_info[n.game.player-1].target_units;1==r&&((d=[]).push("destroyer"),d.push("carrier"),d.push("destroyer"),d.push("cruiser"),d.push("dreadnaught"),d.push("warsun"),d.push("flagship"));for(var p=0;p<l.s.units[n.game.player-1].length;p++){var h=l.s.units[n.game.player-1][p];c++,d.includes(h.type)&&u++,html+='<li class="textchoice player_ship_'+p+'" id="'+p+'">'+h.name+"</li>"}for(var f=0;i<l.p.length;f++)for(var m=0;m<l.p[f].units[n.game.player-1].length;m++){var g=l.p[f].units[n.game.player-1][m];c++,d.includes(g.type)&&u++,html+='<li class="textchoice player_unit_'+f+"_"+m+'" id="ground_unit_'+f+"_"+m+'">'+g.name+"</li>"}if(html+="</ul>",0==c)return this.addMove("NOTIFY\t"+this.returnFaction(e)+" has no ships to destroy"),this.endTurn(),0;n.updateStatus(html),$(".textchoice").off(),$(".textchoice").on("click",(function(){var t=$(this).attr("id"),r=0,i=0,p="ship";if(t.indexOf("_unit_")>0){p="ground";var h=t.split("_");r=h[1],i=h[2]}var f=null;if(f="ship"==p?l.s.units[n.game.player-1][t]:l.p[r].units[n.game.player-1][i],u>0){if(!d.includes(f.type))return void salert("You must first destroy the required unit types");u--}"ship"==p?n.addMove("destroy_unit\t"+e+"\t"+e+"\tspace\t"+a+"\t0\t"+t+"\t1"):n.addMove("destroy_unit\t"+e+"\t"+e+"\tground\t"+a+"\t"+r+"\t"+i+"\t1"),f.strength=0,f.destroyed=0,$(this).remove(),s--,o++,(0==s||o>=c)&&(n.updateStatus("Notifying players of units destroyed..."),n.endTurn())}))}},{key:"playerDestroyShips",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=this,i=t,s=0,o=0,c=n.returnSectorAndPlanets(a);html='<div class="sf-readable">You must destroy '+t+" ships in your fleet:</div><ul>";var l=0,u=n.game.players_info[n.game.player-1].target_units;1==r&&((u=[]).push("destroyer"),u.push("carrier"),u.push("destroyer"),u.push("cruiser"),u.push("dreadnaught"),u.push("warsun"),u.push("flagship"));for(var d=0;d<c.s.units[n.game.player-1].length;d++){var p=c.s.units[n.game.player-1][d];o++,u.includes(p.type)&&l++,html+='<li class="textchoice player_ship_'+d+'" id="'+d+'">'+p.name+"</li>"}if(html+="</ul>",0==o)return this.addMove("NOTIFY\t"+this.returnFaction(e)+" has no ships to destroy"),this.endTurn(),0;n.updateStatus(html),$(".textchoice").off(),$(".textchoice").on("click",(function(){var t=$(this).attr("id"),r=c.s.units[n.game.player-1][t];if(l>0){if(!u.includes(r.type))return void salert("You must first destroy the required unit types");l--}n.addMove("destroy_unit\t"+e+"\t"+e+"\tspace\t"+a+"\t0\t"+t+"\t1"),r.strength=0,r.destroyed=0,$(this).remove(),i--,s++,(0==i||s>=o)&&(n.updateStatus("Notifying players of hits assignment..."),n.endTurn())}))}},{key:"playerDestroyOpponentShips",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=this,i=0,s=0,o=n.returnSectorAndPlanets(a),c=n.returnOpponentInSector(e,a);if(-1==c)return this.addMove("NOTIFY\t"+this.returnFactionNickname(c)+" has no ships to destroy"),this.endTurn(),0;html='<div class="sf-readable">You may destroy '+t+" ships in opponent fleet:</div><ul>";var l=0,u=n.game.players_info[n.game.player-1].target_units;1==r&&((u=[]).push("destroyer"),u.push("carrier"),u.push("destroyer"),u.push("cruiser"),u.push("dreadnaught"),u.push("warsun"),u.push("flagship"));for(var d=0;d<o.s.units[c-1].length;d++){var p=o.s.units[c-1][d];s++,u.includes(p.type)&&l++,html+='<li class="textchoice player_ship_'+d+'" id="'+d+'">'+p.name+"</li>"}if(html+="</ul>",0==s)return this.addMove("NOTIFY\t"+this.returnFactionNickname(c)+" has no ships to destroy"),this.endTurn(),0;n.updateStatus(html),$(".textchoice").off(),$(".textchoice").on("click",(function(){var r=$(this).attr("id"),d=o.s.units[c-1][r];if(l>0){if(!u.includes(d.type))return void salert("You must first destroy the required unit types");l--}n.addMove("destroy_unit\t"+e+"\t"+c+"\tspace\t"+a+"\t0\t"+r+"\t1"),d.strength=0,d.destroyed=0,$(this).remove(),t--,i++,(0==t||i>=s)&&(n.updateStatus("Notifying players of destroyed ships..."),n.endTurn())}))}},{key:"playerPlaySpaceCombat",value:function(e,t,a){var r=this,n=(this.returnSectorAndPlanets(a),""),i=["space_combat"];this.game.state.space_combat_round>1&&i.push("space_combat_post");var s=e;r.game.player==e&&(s=t),this.game.state.space_combat_sector=a,n='<div class="sf-readable"><b>Space Combat: round '+this.game.state.space_combat_round+':</b><div class="combat_attacker">'+this.returnFaction(e)+'</div><div class="combat_attacker_fleet">'+this.returnPlayerFleetInSector(e,a)+'</div><div class="combat_defender">'+this.returnFaction(t)+'</div><div class="combat_defender_fleet">'+this.returnPlayerFleetInSector(t,a)+"</div><ul>",this.returnPlayerActionCards(this.game.player,i).length>0?(n+='<li class="option" id="attack">continue</li>',n+='<li class="option" id="action">play action card</li>'):n+='<li class="option" id="attack">continue</li>',this.canPlayerRetreat(r.game.player,e,t,a)&&(n+='<li class="option" id="retreat">announce retreat</li>');for(var o=0,c=[],l=[],u=this.returnEventObjects(),d=0;d<u.length;d++)if(1==u[d].menuOptionTriggers(this,"space_combat",this.game.player)){var p=u[d].menuOption(this,"space_combat",this.game.player);n+=p.html,l.push(d),c.push(p.event),o=1}n+="</ul>",this.updateStatus(n),$(".option").on("click",(function(){var n=$(this).attr("id");if(1==o)for(var d=0;d<c.length;d++)n==c[d]&&($(this).remove(),u[l[d]].menuOptionActivated(r,"space_combat",r.game.player));if("action"==n&&r.playerSelectActionCard((function(n){r.addMove("action_card_post\t"+r.game.player+"\t"+n),r.addMove("action_card\t"+r.game.player+"\t"+n),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),r.playerPlaySpaceCombat(e,t,a)}),(function(){r.playerPlaySpaceCombat(e,t,a)}),i),"attack"==n&&(r.prependMove("ships_fire\t"+e+"\t"+t+"\t"+a),r.endTurn()),"retreat"==n)if(r.canPlayerRetreat(r.game.player,e,t,a)){for(var p=r.returnSectorsWherePlayerCanRetreat(r.game.player,a),h='<div clss="sf-readable">Retreat into which Sector? </div><ul>',f=0;f<p.length;f++)h+='<li class="option" id="'+f+'">'+r.returnSectorAndPlanets(p[f]).s.name+"</li>";h+="</ul>",r.updateStatus(h),$(".option").off(),$(".option").on("click",(function(){var e=$(this).attr("id"),t=p[e];return r.addMove("announce_retreat\t"+r.game.player+"\t"+s+"\t"+a+"\t"+t),r.endTurn(),0}))}else r.playerPlaySpaceCombat(e,t,a)}))}},{key:"playerRespondToRetreat",value:function(e,t,a,r){var n=this,i=this.returnSectorAndPlanets(r),s=this.returnPlayerActionCards(this.game.player,["retreat"]),o='<div class="sf-readable">Your opponent has announced a retreat into '+i.s.name+" at the end of this round of combat: </div><p></p><ul>";s.length>0&&(o+='<li class="option" id="action">play action card</li>'),o+='<li class="option" id="permit">permit retreat</li>',o+="</ul>";for(var c=0,l=[],u=[],d=this.returnEventObjects(),p=0;p<d.length;p++)if(1==d[p].menuOptionTriggers(this,"retreat",this.game.player)){var h=d[p].menuOption(this,"retreat",this.game.player);o+=h.html,u.push(p),l.push(h.event),c=1}o+="</ul>",this.updateStatus(o),$(".option").off(),$(".option").on("click",(function(){var i=$(this).attr("id");if(1==c)for(var s=0;s<l.length;s++)i==l[s]&&($(this).remove(),d[u[s]].menuOptionActivated(n,"space_combat",n.game.player));"action"==i&&n.playerSelectActionCard((function(i){n.addMove("action_card_post\t"+n.game.player+"\t"+i),n.addMove("action_card\t"+n.game.player+"\t"+i),n.addMove("lose\t"+n.game.player+"\taction_cards\t1"),n.playerRespondToRetreat(e,t,a,r)}),function(){n.playerRespondToRetreat(e,t,a,r)}.relevant_action_cards),"permit"==i&&n.endTurn()}))}},{key:"playerPlayGroundCombatOver",value:function(e,t){var a=this,r=this.returnSectorAndPlanets(t),n=this.returnPlayerActionCards(this.game.player,["ground_combat_victory","ground_combat_over","ground_combat_loss"]),i="";i=e==r.p[planet_idx].owner?'<div class="sf-readable">Ground Combat is Over (you win): </div><ul>':'<div class="sf-readable">Space Combat is Over (you lose): </div><ul>',n.length>0?(i+='<li class="option" id="ok">acknowledge</li>',i+='<li class="option" id="action">action card</li>'):i+='<li class="option" id="ok">acknowledge</li>';for(var s=0,o=[],c=[],l=this.returnEventObjects(),u=0;u<l.length;u++)if(1==l[u].menuOptionTriggers(this,"ground_combat_over",this.game.player)){var d=l[u].menuOption(this,"ground_combat_over",this.game.player);i+=d.html,c.push(u),o.push(d.event),s=1}i+="</ul>",this.updateStatus(i),$(".option").off(),$(".option").on("click",(function(){var r=$(this).attr("id");if(1==s)for(var n=0;n<o.length;n++)r==o[n]&&($(this).remove(),l[c[n]].menuOptionActivated(a,"space_combat",a.game.player));"action"===r&&a.playerSelectActionCard((function(r){a.addMove("action_card_post\t"+a.game.player+"\t"+r),a.addMove("action_card\t"+a.game.player+"\t"+r),a.addMove("lose\t"+a.game.player+"\taction_cards\t1"),a.playerPlayGroundCombatOver(e,t,planet_idx)}),(function(){a.playerPlayGroundCombatOver(e,t,planet_idx)})),"ok"===r&&a.endTurn()}))}},{key:"playerPlaySpaceCombatOver",value:function(e,t){var a=this,r=(this.returnSectorAndPlanets(t),this.returnPlayerActionCards(this.game.player,["space_combat_victory","space_combat_over","space_combat_loss"])),n="";n=this.doesPlayerHaveShipsInSector(e,t)?'<div class="sf-readable">Space Combat is Over (you win): </div><ul>':'<div class="sf-readable">Space Combat is Over (you lose): </div><ul>',r.length>0?(n+='<li class="option" id="ok">acknowledge</li>',n+='<li class="option" id="action">action card</li>'):n+='<li class="option" id="ok">acknowledge</li>';for(var i=0,s=[],o=[],c=this.returnEventObjects(),l=0;l<c.length;l++)if(1==c[l].menuOptionTriggers(this,"space_combat_over",this.game.player)){var u=c[l].menuOption(this,"space_combat_over",this.game.player);n+=u.html,o.push(l),s.push(u.event),i=1}n+="</ul>",this.updateStatus(n),$(".option").on("click",(function(){var r=$(this).attr("id");if(1==i)for(var n=0;n<s.length;n++)r==s[n]&&($(this).remove(),c[o[n]].menuOptionActivated(a,"space_combat_over",a.game.player));"action"==r&&a.playerSelectActionCard((function(r){a.addMove("action_card_post\t"+a.game.player+"\t"+r),a.addMove("action_card\t"+a.game.player+"\t"+r),a.addMove("lose\t"+a.game.player+"\taction_cards\t1"),a.playerPlaySpaceCombatOver(e,t,planet_idx)}),(function(){a.playerPlaySpaceCombatOver(e,t,planet_idx)})),"ok"===r&&a.endTurn()}))}},{key:"playerPlayGroundCombat",value:function(e,t,a,r){var n=this,i=this.returnSectorAndPlanets(a),s="";this.game.state.ground_combat_sector=a,this.game.state.ground_combat_planet_idx=r;var o=this.returnNumberOfGroundForcesOnPlanet(e,a,r),c=this.returnNumberOfGroundForcesOnPlanet(t,a,r);s=i.p[r].owner!=e?'<div class="sf-readable">'+this.returnFactionNickname(e)+" are invading "+i.p[r].name+" with "+o+" infantry. "+this.returnFactionNickname(t)+" is defending with "+c+" infantry. This is round "+this.game.state.ground_combat_round+" of ground combat. </div><ul>":'<div class="sf-readable">'+this.returnFactionNickname(t)+" are invading "+i.p[r].name+" with "+c+" infantry. You have "+o+" infantry remaining. This is round "+this.game.state.ground_combat_round+" of ground combat. </div><ul>",this.returnPlayerActionCards(this.game.player,["combat","ground_combat"]).length>0?(s+='<li class="option" id="attack">continue</li>',s+='<li class="option" id="action">play action card</li>'):s+='<li class="option" id="attack">continue</li>';for(var l=0,u=[],d=[],p=this.returnEventObjects(),h=0;h<p.length;h++)if(1==p[h].menuOptionTriggers(this,"ground_combat",this.game.player)){var f=p[h].menuOption(this,"ground_combat",this.game.player);s+=f.html,d.push(h),u.push(f.event),l=1}s+="</ul>",this.updateStatus(s),$(".option").off(),$(".option").on("click",(function(){var i=$(this).attr("id");if(1==l)for(var s=0;s<u.length;s++)i==u[s]&&($(this).remove(),p[d[s]].menuOptionActivated(n,"ground_combat",n.game.player));"action"==i&&n.playerSelectActionCard((function(i){n.addMove("action_card_post\t"+n.game.player+"\t"+i),n.addMove("action_card\t"+n.game.player+"\t"+i),n.addMove("lose\t"+n.game.player+"\taction_cards\t1"),n.playerPlayGroundCombat(e,t,a,r)}),(function(){n.playerPlayGroundCombat(e,t,a,r)})),"attack"==i&&(n.prependMove("infantry_fire\t"+e+"\t"+t+"\t"+a+"\t"+r),n.endTurn())}))}},{key:"playerPlayPDSAttack",value:function(e,t,a){for(var r=this,n="",i=["pre_pds"],s=1,o=-1,c=r.returnSectorAndPlanets(a),l=0;l<c.s.units.length;l++)l+1!=t&&c.s.units[l].length>0&&(o=l+1);n='<div class="sf-readable">Do you wish to fire your PDS before moving into the sector?</div><ul>',-1!=o?r.game.players_info[o-1].temporary_immune_to_pds_fire&&(n='<div class="sf-readable">'+r.returnFaction(o)+" cannot be targeted by PDS fire during this invasion:</div><ul>",s=0):(n='<div class="sf-readable">You cannot target any ships with PDS fire and must skip firing:</div><ul>',s=0),n+='<li class="option" id="skip">skip PDS</li>',1==s&&(n+='<li class="option" id="fire">fire PDS</li>'),this.returnPlayerActionCards(e,i).length>0&&(n+='<li class="option" id="action">play action card</li>');for(var u=0,d=[],p=[],h=this.returnEventObjects(),f=0;f<h.length;f++)if(1==h[f].menuOptionTriggers(this,"pds",this.game.player)){var m=h[f].menuOption(this,"pds",this.game.player);n+=m.html,p.push(f),d.push(m.event),u=1}n+="</ul>",this.updateStatus(n),$(".option").on("click",(function(){var n=$(this).attr("id");if(1==u)for(var s=0;s<d.length;s++)n==d[s]&&($(this).remove(),h[p[s]].menuOptionActivated(r,"pds",r.game.player));"action"==n&&r.playerSelectActionCard((function(n){r.addMove("action_card_post\t"+r.game.player+"\t"+n),r.addMove("action_card\t"+r.game.player+"\t"+n),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),r.playerPlayPDSAttack(e,t,a)}),(function(){r.playerPlayPDSAttack(e,t,a)}),i),"skip"==n&&r.endTurn(),"fire"==n&&(r.prependMove("pds_fire\t"+r.game.player+"\t"+o+"\t"+a),r.endTurn())}))}},{key:"playerPlayPDSDefense",value:function(e,t,a){var r=this,n="",i=["pre_pds"],s=1;n='<div class="sf-readable">Do you wish to fire your PDS?</div><ul>',r.game.players_info[t-1].temporary_immune_to_pds_fire&&(n='<div class="sf-readable">Your attacker cannot be targeted by PDS fire during this invasion:</div><ul>',s=0),n+='<li class="option" id="skip">skip PDS</li>',1==s&&(n+='<li class="option" id="fire">fire PDS</li>'),this.returnPlayerActionCards(e,i).length>0&&(n+='<li class="option" id="action">play action card</li>');for(var o=0,c=[],l=[],u=this.returnEventObjects(),d=0;d<u.length;d++)if(1==u[d].menuOptionTriggers(this,"pds",this.game.player)){var p=u[d].menuOption(this,"pds",this.game.player);n+=p.html,l.push(d),c.push(p.event),o=1}n+="</ul>",this.updateStatus(n),$(".option").on("click",(function(){var n=$(this).attr("id");if(1==o)for(var s=0;s<c.length;s++)n==c[s]&&($(this).remove(),u[l[s]].menuOptionActivated(r,"pds",r.game.player));"action"==n&&r.playerSelectActionCard((function(n){r.addMove("action_card_post\t"+r.game.player+"\t"+n),r.addMove("action_card\t"+r.game.player+"\t"+n),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),r.playerPlayPDSDefense(e,t,a)}),(function(){r.playerPlayPDSDefense(e,t,a)}),i),"skip"==n&&r.endTurn(),"fire"==n&&(r.prependMove("pds_fire\t"+r.game.player+"\t"+t+"\t"+a),r.endTurn())}))}},{key:"playerResolveDeadlockedAgenda",value:function(e,t){var a=this,r="";r='<div class="sf-readable">The agenda has become deadlocked in the Senate. You - the Speaker - must resolve it: </div><ul>';for(var n=0;n<t.length;n++)r+='<li class="option" id="'+n+'">'+this.returnNameFromIndex(t[n])+"</li>";r+="</ul>",this.updateStatus(r),$(".option").off(),$(".option").on("click",(function(){var r=$(this).attr("id");return a.addMove("resolve_agenda\t"+e+"\tspeaker\t"+t[r]),a.endTurn(),0}))}},{key:"playerPlayPreAgendaStage",value:function(e,t,a){var r=this,n="",i=this.returnPlayerActionCards(r.game.player,["pre_agenda","rider"]);n=this.doesPlayerHaveRider(r.game.player)?'<div class="sf-readable">With your riders depending on how the other factions vote, your emissaries track the mood in the Senate closely...:</div><ul>':'<div class="sf-readable">As the Senators gather to vote on '+this.agenda_cards[t].name+", your emissaries nervously tally the votes in their head:</div><ul>",n+='<li class="option" id="skip">proceed into Senate</li>',i.length>0&&(n+='<li class="option" id="action">action card</li>');for(var s=0,o=[],c=[],l=this.returnEventObjects(),u=0;u<l.length;u++)if(1==l[u].menuOptionTriggers(this,"pre_agenda",this.game.player)){var d=l[u].menuOption(this,"pre_agenda",this.game.player);n+=d.html,c.push(u),o.push(d.event),s=1}n+="</ul>",this.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");if(1==s)for(var i=0;i<o.length;i++)n==o[i]&&($(this).remove(),l[c[i]].menuOptionActivated(r,"agenda",r.game.player));"action"==n&&r.playerSelectActionCard((function(n){r.addMove("action_card_post\t"+r.game.player+"\t"+n),r.addMove("action_card\t"+r.game.player+"\t"+n),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),r.playerPlayPreAgendaStage(e,t,a)}),(function(){r.playerPlayPreAgendaStage(e,t,a)}),["pre_agenda","rider"]),"skip"==n&&r.endTurn()}))}},{key:"playerPlayPostAgendaStage",value:function(e,t,a){var r=this,n="",i=["post_agenda"],s=this.returnPlayerActionCards(r.game.player,i);n=a.length>0?'<div class="sf-readable">The Senate has apparently voted for "'+this.returnNameFromIndex(a[0])+'". As the Speaker confirms the final tally, you get the feeling the issue may not be fully settled:</div><ul>':'<div class="sf-readable">No-one in the Senate bothered to show-up and vote, leaving the matter to be decided by the Speaker:</div><ul>',a.length>1&&(n='<div class="sf-readable">The voting has concluded in deadlock. The Speaker must resolve the agenda:</div><ul>'),n+='<li class="option" id="skip">await results</li>',s.length>0&&(n+='<li class="option" id="action">action card</li>');for(var o=0,c=[],l=[],u=this.returnEventObjects(),d=0;d<u.length;d++)if(1==u[d].menuOptionTriggers(this,"post_agenda",this.game.player)){var p=u[d].menuOption(this,"post_agenda",this.game.player);n+=p.html,l.push(d),c.push(p.event),o=1}n+="</ul>",this.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");if(1==o)for(var s=0;s<c.length;s++)n==c[s]&&($(this).remove(),u[l[s]].menuOptionActivated(r,"post_agenda",r.game.player));"action"==n&&r.playerSelectActionCard((function(n){r.addMove("action_card_post\t"+r.game.player+"\t"+n),r.addMove("action_card\t"+r.game.player+"\t"+n),r.addMove("lose\t"+r.game.player+"\taction_cards\t1"),r.playerPlayPostAgendaStage(e,t,a)}),(function(){r.playerPlayPostAgendaStage(e,t,a)}),i),"skip"==n&&r.endTurn()}))}},{key:"playerContinueTurn",value:function(e,t){var a=this;null==this.game.tracker.invasion&&(this.game.tracker=this.returnPlayerTurnTracker(),this.game.tracker.activate_system=1);var r="<div class='sf-readable'><div class='player_color_box player_color_"+this.game.player+"'></div>"+this.returnFaction(e)+": </div><ul>";""!=this.canPlayerScoreActionStageVictoryPoints(e)&&(r+='<li class="option" id="score">score secret objective</li>'),this.canPlayerProduceInSector(e,t)&&0==this.game.tracker.production&&(r+='<li class="option" id="produce">produce units</li>'),this.canPlayerInvadePlanet(e,t)&&0==this.game.tracker.invasion&&("new-byzantium"==t||"4_4"==t?(-1!=a.game.planets["new-byzantium"].owner||a.returnAvailableInfluence(a.game.player)+a.game.players_info[a.game.player-1].goods>=6)&&(r+='<li class="option" id="invade">invade planet</li>'):r+='<li class="option" id="invade">invade planet</li>'),this.canPlayerLandInfantry(e,t)&&0==this.game.tracker.invasion&&(r+='<li class="option" id="land">reassign infantry</li>'),0==this.game.tracker.trade&&1==this.canPlayerTrade(this.game.player)&&(r+='<li class="option" id="trade">trade</li>');for(var n=0,i=[],s=[],o=this.returnEventObjects(),c=0;c<o.length;c++)if(1==o[c].menuOptionTriggers(this,"continue",this.game.player)){var l=o[c].menuOption(this,"continue",this.game.player);r+=l.html,s.push(c),i.push(l.event),n=1}r+='<li class="option" id="endturn">end turn</li>',r+="</ul>",this.updateStatus(r),$(".option").on("click",(function(){var r=$(this).attr("id");if(1==n)for(var c=0;c<i.length;c++)r==i[c]&&($(this).remove(),o[s[c]].menuOptionActivated(a,"continue",a.game.player));if("endturn"==r)return a.addMove("resolve\tplay"),a.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),a.endTurn(),0;if("trade"==r)return a.addMove("continue\t"+a.game.player+"\t"+t),a.playerTurn(),0;if("land"==r)return a.addMove("continue\t"+a.game.player+"\t"+t),a.playerSelectInfantryToLand(t),0;if("produce"==r){var l=a.returnSpareFleetSupplyInSector(a.game.player,t);if(l<=1){var u="You have no spare fleet supply in this sector. Do you still wish to produce more ships?";return 1==l&&(u="You have fleet supply for 1 additional capital ship in this sector. Do you still wish to produce more ships?"),void(sconfirm(u)&&(a.addMove("continue\t"+a.game.player+"\t"+t),a.playerProduceUnits(t)))}a.addMove("continue\t"+a.game.player+"\t"+t),a.playerProduceUnits(t)}if("invade"==r){if(("new-byzantium"===t||"4_4"==t)&&-1==a.game.planets["new-byzantium"].owner)return a.returnAvailableInfluence(a.game.player)>=6?void a.playerSelectInfluence(6,(function(r){a.game.tracker.invasion=1,a.playerInvadePlanet(e,t)})):void salert("The first conquest of New Byzantium requires spending 6 influence, which you lack.");a.game.tracker.invasion=1,a.playerInvadePlanet(e,t)}"action"==r&&a.playerSelectActionCard((function(e){a.game.tracker.action_card=1,a.addMove("continue\t"+a.game.player+"\t"+t),a.addMove("action_card_post\t"+a.game.player+"\t"+e),a.addMove("action_card\t"+a.game.player+"\t"+e),a.addMove("lose\t"+a.game.player+"\taction_cards\t1"),a.endTurn()}),(function(){a.playerContinueTurn(e,t)})),"score"==r&&a.playerScoreActionStageVictoryPoints(a,(function(e,a,r){e.addMove("continue\t"+e.game.player+"\t"+t),a>0&&e.addMove("score\t"+e.game.player+"\t"+a+"\t"+r),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(r),e.endTurn()}))}))}},{key:"playerBuyTokens",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this;if(this.returnAvailableInfluence(this.game.player)<=2)return this.updateLog("You skip the initiative secondary, as you lack adequate influence..."),this.updateStatus("Skipping purchase of tokens as insufficient influence..."),1==t&&a.addMove("resolve\tstrategy\t1\t"+a.app.wallet.returnPublicKey()),this.endTurn(),0;var r='<div class="sf-readable">Do you wish to purchase any command or strategy tokens, or increase your fleet supply?</div><ul>';2==e&&(r='<div class="sf-readable">Leadership has been played. Do you wish to purchase any additional command or strategy tokens, or increase your fleet supply?</div><ul>',1==a.game.state.round&&(r="The Leadership strategy card has been played. This lets you spend 3 influence to purchase additional command tokens, strategy tokens or fleet supply. Do you wish to purchase any additional tokens: </p><ul>")),r+='<li class="buildchoice textchoice" id="skip">Do Not Purchase</li>',r+='<li class="buildchoice textchoice" id="command">Command Tokens  +<span class="command_total">0</span></li>',r+='<li class="buildchoice textchoice" id="strategy">Strategy Tokens +<span class="strategy_total">0</span></li>',r+='<li class="buildchoice textchoice" id="fleet">Fleet Supply  +<span class="fleet_total">0</span></li>',r+="</ul></p>",r+="",r+='<div id="buildcost" class="buildcost"><span class="buildcost_total">0</span> influence</div>',r+='<div id="confirm" class="buildchoice">click here to finish</div>',this.updateStatus(r);var n=0,i=0,s=0,o=0;a.lockInterface(),$(".buildchoice").off(),$(".buildchoice").on("click",(function(){if(a.mayUnlockInterface()){var e=$(this).attr("id");if("skip"==e)return 1==t&&a.addMove("resolve\tstrategy\t1\t"+a.app.wallet.returnPublicKey()),a.unlockInterface(),void a.endTurn();"confirm"==e&&(o=3*(s+n+i),1==t&&(a.addMove("resolve\tstrategy\t1\t"+a.app.wallet.returnPublicKey()),a.addPublickeyConfirm(a.app.wallet.returnPublicKey(),1)),a.unlockInterface(),a.playerSelectInfluence(o,(function(e){if(1==e)return a.addMove("purchase\t"+a.game.player+"\tcommand\t"+n),a.addMove("purchase\t"+a.game.player+"\tstrategy\t"+i),a.addMove("purchase\t"+a.game.player+"\tfleetsupply\t"+s),void a.endTurn();a.endTurn()}))),"command"==e&&n++,"strategy"==e&&i++,"fleet"==e&&s++;var r="."+e+"_total",c=parseInt($(r).html());c++,$(r).html(c),o=3*(n+i+s),$(".buildcost_total").html(o);var l=0;return o>a.returnAvailableInfluence(a.game.player)&&(salert("You cannot buy more tokens than you have influence available to pay"),l=1),1==l?(o=0,n=0,i=0,s=0,$(".command_total").html(0),$(".strategy_total").html(0),void $(".fleet_total").html(0)):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerBuyActionCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this,a='<div class="sf-readable">Do you wish to spend 1 strategy token to purchase 2 action cards?</div><ul>';2==e&&(a='<div class="sf-readable">Politics has been played: do you wish to spend 1 strategy token to purchase 2 action cards?</div><ul>',1==t.game.state.round&&(a="".concat(t.returnFaction(t.game.player)," has played the Politics strategy card. This lets you to spend 1 strategy token to purchase 2 action cards, which provide special one-time abilities. You have ").concat(t.game.players_info[t.game.player-1].strategy_tokens," strategy tokens. Purchase action cards: </p><ul>"))),a+='<li class="buildchoice textchoice" id="yes">Purchase Action Cards</li>',a+='<li class="buildchoice textchoice" id="no">Do Not Purchase Action Cards</li>',a+="</ul>",this.updateStatus(a),t.lockInterface(),$(".buildchoice").off(),$(".buildchoice").on("click",(function(){if(t.mayUnlockInterface())return t.unlockInterface(),"yes"==$(this).attr("id")?(t.addMove("resolve\tstrategy\t1\t"+t.app.wallet.returnPublicKey()),t.addPublickeyConfirm(t.app.wallet.returnPublicKey(),1),t.addMove("NOTIFY\t"+t.returnFaction(t.game.player)+" gets action cards"),t.addMove("gain\t"+t.game.player+"\taction_cards\t2"),t.addMove("DEAL\t2\t"+t.game.player+"\t2"),t.addMove("expend\t"+t.game.player+"\tstrategy\t1"),t.endTurn(),void t.updateStatus("submitted...")):(t.addMove("resolve\tstrategy\t1\t"+t.app.wallet.returnPublicKey()),t.addPublickeyConfirm(t.app.wallet.returnPublicKey(),1),t.endTurn(),void t.updateStatus("submitted..."));salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerBuySecretObjective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this,a='<div class="sf-readable">Do you wish to spend 1 strategy token to purchase a Secret Objective?</div><ul>';2==e&&(a='<div class="sf-readable">The Imperial Strategy card has been played: do you wish to spend 1 strategy token to purchase a Secret Objective?</div><ul>',1==t.game.state.round&&(a="".concat(t.returnFaction(t.game.player)," has played the Imperial strategy card. This lets you to spend 1 strategy token to purchase an additional secret bjective. You have ").concat(t.game.players_info[t.game.player-1].strategy_tokens," strategy tokens. Purchase secret objective: </p><ul>"))),a+='<li class="buildchoice textchoice" id="yes">Purchase Secret Objective</li>',a+='<li class="buildchoice textchoice" id="no">Do Not Purchase</li>',a+="</ul>",this.updateStatus(a),t.lockInterface(),$(".buildchoice").off(),$(".buildchoice").on("click",(function(){if(t.mayUnlockInterface())return t.unlockInterface(),"yes"==$(this).attr("id")?(t.addMove("resolve\tstrategy\t1\t"+t.app.wallet.returnPublicKey()),t.addPublickeyConfirm(t.app.wallet.returnPublicKey(),1),t.addMove("gain\t"+t.game.player+"\tsecret_objective\t1"),t.addMove("DEAL\t6\t"+t.game.player+"\t1"),t.addMove("expend\t"+t.game.player+"\tstrategy\t1"),t.endTurn(),void t.updateStatus("submitted...")):(t.addMove("resolve\tstrategy\t1\t"+t.app.wallet.returnPublicKey()),t.addPublickeyConfirm(t.app.wallet.returnPublicKey(),1),t.endTurn(),void t.updateStatus("submitted..."));salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerResearchTechnology",value:function(e){var t=this,a='<div class="sf-readable">You are eligible to upgrade to the following technologies: </div><ul>';for(var r in this.tech)this.canPlayerResearchTechnology(r)&&(a+='<li class="option" id="'+r+'">'+this.tech[r].name+"</li>");a+="</ul>",this.updateStatus(a),t.lockInterface(),$(".option").off(),$(".option").on("mouseenter",(function(){var e=$(this).attr("id");t.showTechCard(e)})),$(".option").on("mouseleave",(function(){var e=$(this).attr("id");t.hideTechCard(e)})),$(".option").on("click",(function(){if(t.mayUnlockInterface()){t.unlockInterface();var a=$(this).attr("id");t.hideTechCard(a),t.exhaustPlayerResearchTechnologyPrerequisites(a),e($(this).attr("id"))}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"canPlayerScoreActionStageVictoryPoints",value:function(e){for(var t="",a=0;a<this.game.deck[5].hand.length;a++)this.game.players_info[this.game.player-1].objectives_scored.includes(this.game.deck[5].hand[a])||this.canPlayerScoreVictoryPoints(this.game.player,this.game.deck[5].hand[a],3)&&"action"===this.secret_objectives[this.game.deck[5].hand[a]].phase&&(t+='<li class="option secret3" id="'+this.game.deck[5].hand[a]+'">'+this.secret_objectives[this.game.deck[5].hand[a]].name+"</li>");return t}},{key:"playerScoreActionStageVictoryPoints",value:function(e,t){var a="",r=e.game.player;a+='<div class="sf-readable">Do you wish to score a secret objective? </div><ul>',a+=this.canPlayerScoreActionStageVictoryPoints(r),a+='<li class="option cancel" id="cancel">cancel</li>',a+="</ul>",e.updateStatus(a),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var a=$(this).attr("id");if($(this).hasClass("stage1"),$(this).hasClass("stage2"),$(this).hasClass("secret3"),"no"===a)t(e,0,"");else{var r=a,n=1;e.secret_objectives[r]&&e.secret_objectives[r].vp>1&&(n=e.stage_ii_objectives[r].vp),t(e,n,r)}}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"canPlayerScoreVictoryPoints",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(""==t)return 0;var r=this;if(1==a){var n=this.returnStageIPublicObjectives();if(""!=n[t]&&1==n[t].canPlayerScoreVictoryPoints(r,e))return 1}if(2==a){var i=this.returnStageIIPublicObjectives();if(""!=i[t]&&1==i[t].canPlayerScoreVictoryPoints(r,e))return 1}if(3==a){var s=this.returnSecretObjectives();if(""!=s[t]&&1==s[t].canPlayerScoreVictoryPoints(r,e))return 1}return 0}},{key:"playerScoreSecretObjective",value:function(e,t){var a="";a+='<div class="sf-readable">Do you wish to score any Secret Objectives? </div><ul>';for(var r=0;r<e.game.deck[5].hand.length;r++)e.game.players_info[e.game.player-1].objectives_scored.includes(e.game.deck[5].hand[r])||e.canPlayerScoreVictoryPoints(e.game.player,e.game.deck[5].hand[r],3)&&(e.game.players_info[e.game.player-1].objectives_scored_this_round.includes(e.game.deck[5].hand[r])||(a+='1 VP Secret Objective: <li class="option secret3" id="'+e.game.deck[5].hand[r]+'">'+e.game.deck[5].cards[e.game.deck[5].hand[r]].name+"</li>"));a+='<li class="option" id="no">I choose not to score...</li>',a+="</ul>",e.updateStatus(a),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var a=$(this).attr("id");if("no"==a)t(e,0,"");else{var r=a,n=1;e.secret_objectives[r]&&e.secret_objectives[r].vp>1&&(n=e.secret_objectives[r].vp),t(e,n,r)}}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerScoreVictoryPoints",value:function(e,t){var a="";a+='<div class="sf-readable">Do you wish to score any public objectives? </div><ul>';for(var r=0;r<e.game.state.stage_i_objectives.length;r++)e.game.players_info[e.game.player-1].objectives_scored.includes(e.game.state.stage_i_objectives[r])||e.canPlayerScoreVictoryPoints(e.game.player,e.game.state.stage_i_objectives[r],1)&&(e.game.players_info[e.game.player-1].objectives_scored_this_round.includes(e.game.state.stage_i_objectives[r])||(a+='1 VP Public Objective: <li class="option stage1" id="'+e.game.state.stage_i_objectives[r]+'">'+e.game.deck[3].cards[e.game.state.stage_i_objectives[r]].name+"</li>"));for(var n=0;n<e.game.state.stage_ii_objectives.length;n++)e.game.players_info[e.game.player-1].objectives_scored.includes(e.game.state.stage_ii_objectives[n])||e.canPlayerScoreVictoryPoints(e.game.player,e.game.state.stage_ii_objectives[n],2)&&(e.game.players_info[e.game.player-1].objectives_scored_this_round.includes(e.game.state.stage_ii_objectives[n])||(a+='2 VP Public Objective: <li class="option stage2" id="'+e.game.state.stage_ii_objectives[n]+'">'+e.game.deck[4].cards[e.game.state.stage_ii_objectives[n]].name+"</li>"));a+='<li class="option" id="no">I choose not to score...</li>',a+="</ul>",e.updateStatus(a),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var a=$(this).attr("id");if($(this).hasClass("stage1"),$(this).hasClass("stage2"),$(this).hasClass("secret3"),"no"===a)t(e,0,"");else{var r=a,n=1;e.stage_ii_objectives[r]&&e.stage_ii_objectives[r].vp>1&&(n=e.stage_ii_objectives[r].vp),t(e,n,r)}}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerBuildInfrastructure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this,r="";r+=1==t?"<div class='sf-readable'>Which would you like to build: </div><ul>":"<div class='sf_readable'>You may also build an additional PDS: </div><ul>",r+='<li class="buildchoice" id="pds">Planetary Defense System</li>',1==t&&(r+='<li class="buildchoice" id="spacedock">Space Dock</li>'),r+="</ul>",this.updateStatus(r),a.lockInterface(),$(".buildchoice").off(),$(".buildchoice").on("mouseenter",(function(){var e=$(this).attr("id");a.showUnit(e)})),$(".buildchoice").on("mouseleave",(function(){var e=$(this).attr("id");a.hideUnit(e)})),$(".buildchoice").on("click",(function(){if(a.mayUnlockInterface()){a.unlockInterface(),$(".buildchoice").off();var r=$(this).attr("id");a.playerSelectPlanetWithFilter("Select a planet on which to build: ",(function(e){var t=0;if(a.game.planets[e].owner==a.game.player){for(var n=0;n<a.game.planets[e].units[a.game.player-1].length;n++)a.game.planets[e].units[a.game.player-1][n].type==r&&t++;return"pds"===r&&t>=a.game.state.pds_limit_per_planet||"spacedock"===r&&t>=1?0:1}return 0}),(function(t){"pds"==r&&(a.addMove("produce\t"+a.game.player+"\t1\t"+a.game.planets[t].idx+"\tpds\t"+a.game.planets[t].sector),e(a.game.planets[t].sector)),"spacedock"==r&&(a.addMove("produce\t"+a.game.player+"\t1\t"+a.game.planets[t].idx+"\tspacedock\t"+a.game.planets[t].sector),e(a.game.planets[t].sector))}),(function(){a.unlockInterface(),a.playerBuildInfrastructure(e,t)}))}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerProduceUnits",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=this,i=this.returnPlayerFleet(n.game.player),s={infantry:0,fighters:0,carriers:0,cruisers:0,dreadnaughts:0,destroyers:0,flagships:0,warsuns:0},o=this.returnSectorAndPlanets(e),c=n.returnAvailableResources(n.game.player);c+=n.game.players_info[n.game.player-1].production_bonus;for(var l=0,u=0;u<o.s.units[this.game.player-1].length;u++)l+=o.s.units[this.game.player-1][u].production;for(var d=0;d<o.p.length;d++)for(var p=0;p<o.p[d].units[this.game.player-1].length;p++)l+=o.p[d].units[this.game.player-1][p].production,"spacedock"===o.p[d].units[this.game.player-1][p].type&&(l+=o.p[d].resources);console.log("Calculated Production Limit: "+l),1==this.game.players_info[this.game.player-1].may_player_produce_without_spacedock&&(0==t&&this.game.players_info[this.game.player-1].may_player_produce_without_spacedock_production_limit>=0&&(t=this.game.players_info[this.game.player-1].may_player_produce_without_spacedock_production_limit),0==a&&this.game.players_info[this.game.player-1].may_player_produce_without_spacedock_cost_limit>=0&&(a=this.game.players_info[this.game.player-1].may_player_produce_without_spacedock_cost_limit)),l>t&&(t=l);var h='<div class="sf-readable">Produce Units in this Sector: ';0!=t&&(h+="("+t+" units max)"),0!=a&&(h+="("+a+" cost max)"),h+="</div><ul>",c>=1&&(h+='<li class="buildchoice" id="infantry">Infantry - <span class="infantry_total">0</span></li>'),c>=1&&(h+='<li class="buildchoice" id="fighter">Fighter - <span class="fighter_total">0</span></li>'),c>=1&&(h+='<li class="buildchoice" id="destroyer">Destroyer - <span class="destroyer_total">0</span></li>'),c>=3&&(h+='<li class="buildchoice" id="carrier">Carrier - <span class="carrier_total">0</span></li>'),c>=2&&(h+='<li class="buildchoice" id="cruiser">Cruiser - <span class="cruiser_total">0</span></li>'),c>=4&&(h+='<li class="buildchoice" id="dreadnaught">Dreadnaught - <span class="dreadnaught_total">0</span></li>'),c>=8&&this.canPlayerProduceFlagship(n.game.player)&&(h+='<li class="buildchoice" id="flagship">Flagship - <span class="flagship_total">0</span></li>'),1==n.game.players_info[n.game.player-1].may_produce_warsuns&&c>=12&&(h+='<li class="buildchoice" id="warsun">War Sun - <span class="warsun_total">0</span></li>'),h+="</ul>",h+="</p>",h+='<div id="buildcost" class="buildcost"><span class="buildcost_total">0 resources</span></div>',h+='<div id="confirm" class="buildchoice">click here to build</div>',this.updateStatus(h);var f=[];n.lockInterface(),$(".buildchoice").off(),$(".buildchoice").on("mouseenter",(function(){var e=$(this).attr("id");n.showUnit(e)})),$(".buildchoice").on("mouseleave",(function(){var e=$(this).attr("id");n.hideUnit(e)})),$(".buildchoice").on("click",(function(){if(n.mayUnlockInterface()){var o=$(this).attr("id");if("confirm"==o){$(".buildchoice").off();for(var c=0,u=0;u<f.length;u++)c+=n.returnUnitCost(f[u],n.game.player);return n.game.players_info[n.game.player-1].production_bonus>0&&(c-=n.game.players_info[n.game.player-1].production_bonus)<0&&(c=0),0==r?(n.addMove("resolve\tplay"),n.addMove("continue\t"+n.game.player+"\t"+e)):(n.addMove("resolve\tstrategy\t1\t"+n.app.wallet.returnPublicKey()),n.addPublickeyConfirm(n.app.wallet.returnPublicKey(),1),n.addMove("expend\t"+n.game.player+"\tstrategy\t1")),n.unlockInterface(),void n.playerSelectResources(c,(function(t){if(1!=t)salert("failure to find appropriate influence");else{n.addMove("post_production\t"+n.game.player+"\t"+e+"\t"+JSON.stringify(f));for(var a=0;a<f.length;a++){var r=n.returnPlayersLeastDefendedPlanetInSector(n.game.player,e);"infantry"!=f[a]&&(r=-1),n.addMove("produce\t"+n.game.player+"\t1\t"+r+"\t"+f[a]+"\t"+e),n.addMove("setvar\tstate\t0\tactive_player_has_produced\t1"),n.game.tracker.production=1}n.endTurn()}}))}for(var d=0,p=0;p<f.length;p++)d+=n.returnUnitCost(f[p],n.game.player);d+=n.returnUnitCost(o,n.game.player),n.game.players_info[n.game.player-1].production_bonus>0&&(d-=n.game.players_info[n.game.player-1].production_bonus);var h=0;if("fighter"==o&&s.fighters+i.fighters>n.game.players_info[n.game.player-1].fighter_limit&&(salert("You can only have "+n.game.players_info[n.game.player-1].fighter_limit+" fighters on the board"),h=1),"infantry"==o&&s.infantry+i.infantry>n.game.players_info[n.game.player-1].infantry_limit&&(salert("You can only have "+n.game.players_info[n.game.player-1].infantry_limit+" infantry on the board"),h=1),"destroyer"==o&&s.destroyers+i.destroyers>n.game.players_info[n.game.player-1].destroyer_limit&&(salert("You can only have "+n.game.players_info[n.game.player-1].destroyer_limit+" destroyers on the board"),h=1),"carrier"==o&&s.carriers+i.carriers>n.game.players_info[n.game.player-1].carrier_limit&&(salert("You can only have "+n.game.players_info[n.game.player-1].carrier_limit+" carriers on the board"),h=1),"cruiser"==o&&s.cruisers+i.cruisers>n.game.players_info[n.game.player-1].cruiser_limit&&(salert("You can only have "+n.game.players_info[n.game.player-1].cruiser_limit+" cruisers on the board"),h=1),"dreadnaught"==o&&s.dreadnaughts+i.dreadnaughts>n.game.players_info[n.game.player-1].dreadnaught_limit&&(salert("You can only have "+n.game.players_info[n.game.player-1].dreadnaught_limit+" dreadnaughts on the board"),h=1),"flagship"==o&&s.flagships+i.flagships>n.game.players_info[n.game.player-1].flagships_limit&&(salert("You can only have "+n.game.players_info[n.game.player-1].flagship_limit+" flagships on the board"),h=1),"warsun"==o&&s.warsuns+i.warsuns>n.game.players_info[n.game.player-1].warsun_limit&&(salert("You can only have "+n.game.players_info[n.game.player-1].warsun_limit+" warsuns on the board"),h=1),d>n.returnAvailableResources(n.game.player)&&(salert("You cannot build more than you have available to pay for it."),h=1),t<f.length&&t>0&&(salert("You cannot build more units than your production limit"),h=1),a<d&&a>0&&(salert("You cannot build units that cost more than your cost limit"),h=1),f.length+1>l&&(salert("You cannot build more units than your production limit"),h=1),1==h)return f=[],$(".infantry_total").html(0),$(".fighter_total").html(0),$(".destroyer_total").html(0),$(".carrier_total").html(0),$(".cruiser_total").html(0),$(".dreadnaught_total").html(0),$(".flagship_total").html(0),$(".warsun_total").html(0),(s={}).infantry=0,s.fighters=0,s.carriers=0,s.cruisers=0,s.dreadnaughts=0,s.destroyers=0,s.flagships=0,void(s.warsuns=0);f.push(o);for(var m=0,g=0;g<f.length;g++)m+=n.returnUnitCost(f[g],n.game.player);var b="."+o+"_total",y=parseInt($(b).html());y++,$(b).html(y),n.game.players_info[n.game.player-1].production_bonus>0&&(m-=n.game.players_info[n.game.player-1].production_bonus,n.updateLog("Production Costs reduced by 1"));var v=" resources";1==m&&(v=" resource"),$(".buildcost_total").html(m+v)}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerHandleTradeOffer",value:function(e,t,a,r){var n=this;if(t.promissaries&&t.promissaries.length>0)for(var i=0;i<t.promissaries.length;i++){var s=t.promissaries[i].promissary.split("-"),o=n.factions[s[0]].name;"".concat(o," - ").concat(n.promissary_notes[s[1]].name)}if(a.promissaries&&a.promissaries.length>0)for(var c=0;c<a.promissaries.length;c++){var l=a.promissaries[c].promissary.split("-"),u=n.factions[l[0]].name;"".concat(u," - ").concat(n.promissary_notes[l[1]].name)}var d='<div class="sf-readable">You have received a trade offer from '+n.returnFaction(e)+". ";d+=r,d+=": </div><ul>",d+='  <li class="option" id="yes">accept trade</li>',d+='  <li class="option" id="no">refuse trade</li>',d+="</ul>",n.updateStatus(d),$(".option").off(),$(".option").on("click",(function(){var r=$(this).attr("id");return"no"==r?(n.addMove("refuse_offer\t"+n.game.player+"\t"+e),n.endTurn(),0):"yes"==r?(n.addMove("trade\t"+e+"\t"+n.game.player+"\t"+JSON.stringify(t)+"\t"+JSON.stringify(a)),n.endTurn(),0):void 0}))}},{key:"playerTrade",value:function(){var e=this.returnFactions(),t=0,a=0,r=[],n=[],i=0,s=0,o=function(t,a,r,n){for(var o='<div class="sf-readable">Make Trade Offer to Faction: </div><ul>',c=0;c<t.game.players_info.length;c++)0==t.game.players_info[c].traded_this_turn&&c+1!=t.game.player&&t.arePlayersAdjacent(t.game.player,c+1)&&(o+='  <li class="option" id="'.concat(c,'">').concat(e[t.game.players_info[c].faction].name,"</li>"));o+='  <li class="option" id="cancel">cancel</li>',o+="</ul>",t.updateStatus(o),$(".option").off(),$(".option").on("click",(function(){var e=$(this).attr("id");if("cancel"==e)return t.playerTurn(),0;i=t.game.players_info[t.game.player-1].commodities+t.game.players_info[t.game.player-1].goods,s=t.game.players_info[parseInt(e)].commodities+t.game.players_info[parseInt(e)].goods,r(t,parseInt(e)+1,a,r,n)}))};o(this,o,(function(e,o,c,l,u){for(var d="no promissaries",p=0;p<n.length;p++){0==p&&(d="");var h=n[p].promissary.split("-"),f=e.factions[h[0]].name;p>0&&(d+=", "),d+="".concat(f," - ").concat(e.promissary_notes[h[1]].name)}for(var m="no promissaries",g=0;g<r.length;g++){0==g&&(m="");var b=r[g].promissary.split("-"),y=e.factions[b[0]].name;g>0&&(m+=", "),m+="".concat(y," - ").concat(e.promissary_notes[b[1]].name)}var v="<div class='sf-readable'>Make an Offer: </div><ul>";v+='<li id="to_offer" class="option">you give <span class="offer_total">'+t+"</span> trade goods</li>",v+='<li id="to_receive" class="option">you receive <span class="receive_total">'+a+"</span> trade goods</li>",v+='<li id="promissary_offer" class="option">you give <span class="give_promissary">'+m+"</span></li>",v+='<li id="promissary_receive" class="option">you receive <span class="receive_promissary">'+d+"</span></li>",v+='<li id="confirm" class="option">submit offer</li>',v+='<li id="cancel" class="option">cancel</li>',v+="</ul>",e.updateStatus(v),$(".option").off(),$(".option").on("click",(function(){var d=$(this).attr("id");if("to_offer"==d&&++t>i&&(t=0),"to_receive"==d&&++a>s&&(a=0),"cancel"!=d)if("promissary_offer"!=d)if("promissary_receive"!=d){if("confirm"==d){var p={};p.goods=$(".offer_total").html(),p.promissaries=r;var h={};h.goods=$(".receive_total").html(),h.promissaries=n,e.addMove("offer\t"+e.game.player+"\t"+o+"\t"+JSON.stringify(p)+"\t"+JSON.stringify(h)),e.updateStatus("trade offer submitted"),e.endTurn()}$(".offer_total").html(t),$(".receive_total").html(a)}else u(e,o,2,c,l,u);else u(e,o,1,c,l,u);else e.playerTurn()}))}),(function(e,t,a,i,s,o){if(1==a){for(var c='<div class="sf-readable">Add Promissary to YOUR Offer: </div><ul>',l=0;l<e.game.players_info[e.game.player-1].promissary_notes.length;l++){for(var u=e.game.players_info[e.game.player-1].promissary_notes[l],d=u.split("-"),p=e.factions[d[0]].name,h=0,f=0;f<r.length;f++)r[f].promissary===u&&(h=1);0==h&&(c+='  <li class="option" id="'.concat(l,'">').concat(p," - ").concat(e.promissary_notes[d[1]].name,"</li>"))}c+='  <li class="option" id="cancel">cancel</li>',e.updateStatus(c),$(".option").off(),$(".option").on("click",(function(){var a=$(this).attr("id");if("cancel"==a)return s(e,t,i,s,o),0;var n={player:e.game.player,promissary:e.game.players_info[e.game.player-1].promissary_notes[a]};r.push(n),s(e,t,i,s,o)}))}if(2==a){for(var m='<div class="sf-readable">Request Promissary FROM them: </div><ul>',g=0;g<e.game.players_info[t-1].promissary_notes.length;g++){for(var b=e.game.players_info[t-1].promissary_notes[g],y=b.split("-"),v=e.factions[y[0]].name,_=0,w=0;w<n.length;w++)n[w].promissary===b&&(_=1);0==_&&(m+='  <li class="option" id="'.concat(g,'">').concat(v," - ").concat(e.promissary_notes[y[1]].name,"</li>"))}m+='  <li class="option" id="cancel">cancel</li>',e.updateStatus(m),$(".option").off(),$(".option").on("click",(function(){var a=$(this).attr("id");if("cancel"==a)return s(e,t,i,s,o),0;var r={player:t,promissary:e.game.players_info[t-1].promissary_notes[a]};n.push(r),s(e,t,i,s,o)}))}}))}},{key:"playerSelectSector",value:function(e){$(".sector").off(),$(".sector").on("click",(function(){$(".sector").off();var t=$(this).attr("id");e(t)}))}},{key:"playerSelectPlanet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this,r="Select a system in which to select a planet: ";this.updateStatus(r),$(".sector").on("click",(function(){var n=$(this).attr("id"),i=a.returnSectorAndPlanets(n);if(2==t){for(var s=0,o=0;o<i.p.length;o++)i.p[o].owner==a.game.player&&(s=1);if(0==s)return void salert("Invalid Choice: you do not control planets in that sector")}r='<div class="sf-readable">Select a planet in this system: </div><ul>';for(var c=0;c<i.p.length;c++)0==t&&(r+='<li class="option" id="'+c+'">'+i.p[c].name+' - <span class="invadeplanet_'+c+'">0</span></li>'),1==t&&(r+='<li class="option" id="'+c+'">'+i.p[c].name+' - <span class="invadeplanet_'+c+'">0</span></li>'),2==t&&i.p[c].owner==a.game.player&&(r+='<li class="option" id="'+c+'">'+i.p[c].name+"</li>");r+="</ul>",a.updateStatus(r),$(".option").off(),$(".option").on("mouseenter",(function(){var e=$(this).attr("id");a.showPlanetCard(n,e),a.showSectorHighlight(n)})),$(".option").on("mouseleave",(function(){var e=$(this).attr("id");a.hidePlanetCard(n,e),a.hideSectorHighlight(n)})),$(".option").on("click",(function(){var t=$(this).attr("id");a.hidePlanetCard(n,t),e(n,t)}))}))}},{key:"playerSelectInfluence",value:function(e,t){if(0!=e){for(var a=this,r=this.returnPlayerUnexhaustedPlanetCards(this.game.player),n=[],i=0,s=a.game.players_info[a.game.player-1].goods,o="<div class='sf-readable'>Select "+e+" in influence: </div><ul>",c=0;c<r.length;c++)o+='<li class="cardchoice cardchoice-card" id="cardchoice_'+r[c]+'">'+this.returnPlanetCard(r[c])+"</li>";1==a.game.players_info[a.game.player-1].goods?o+='<li class="textchoice" id="trade_goods" style="clear:both">'+a.game.players_info[a.game.player-1].goods+" trade good</li>":o+='<li class="textchoice" id="trade_goods" style="clear:both">'+a.game.players_info[a.game.player-1].goods+" trade goods</li>",o+="</ul>",this.updateStatus(o),this.lockInterface(),$(".cardchoice , .textchoice").on("click",(function(){for(var o=$(this).attr("id"),c=o.split("_"),l="#"+o,u=c[1],d=0,p=0;p<r.length;p++)r[p]===u&&(d=p);if("trade_goods"==o?s>0&&(a.addMove("expend\t"+a.game.player+"\tgoods\t1"),s--,i+=1,1==s?$("#trade_goods").html(s+" trade good"):$("#trade_goods").html(s+" trade goods")):(a.addMove("expend\t"+a.game.player+"\tplanet\t"+r[d]),n.push(r[d]),$(l).off(),$(l).css("opacity","0.2"),i+=a.game.planets[r[d]].influence),e<=i){if(!a.mayUnlockInterface())return void salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.");a.unlockInterface(),$(".cardchoice , .textchoice").off(),t(1)}}))}else t(1)}},{key:"playerSelectStrategyAndCommandTokens",value:function(e,t){0==e&&t(1);var a=this,r=0,n="<div class='sf-readable'>Select "+e+" in Strategy and Command Tokens: </div><ul>";n+='<li class="textchoice" id="command">command tokens - <span class="available_command_tokens">'+a.game.players_info[a.game.player-1].command_tokens+"</span></li>",n+='<li class="textchoice" id="strategy">strategy tokens - <span class="available_strategy_tokens">'+a.game.players_info[a.game.player-1].strategy_tokens+"</span></li>",n+="</ul>",this.updateStatus(n),this.lockInterface(),$(".textchoice").on("click",(function(){var n=$(this).attr("id");if("strategy"==n){var i=parseInt($(".available_strategy_tokens").html());i>0&&(r++,$(".available_strategy_tokens").html(i-1),a.addMove("expend\t"+a.game.player+"\tstrategy\t1"))}if("command"==n){var s=parseInt($(".available_command_tokens").html());s>0&&(r++,$(".available_command_tokens").html(s-1),a.addMove("expend\t"+a.game.player+"\tcommand\t1"))}if(e<=r){if(!a.mayUnlockInterface())return void salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.");a.unlockInterface(),$(".textchoice").off(),t(1)}}))}},{key:"playerSelectResources",value:function(e,t){if(0!=e){for(var a=this,r=this.returnPlayerUnexhaustedPlanetCards(this.game.player),n=[],i=0,s=a.game.players_info[a.game.player-1].goods,o="<div class='sf-readable'>Select "+e+" in resources: </div><ul>",c=0;c<r.length;c++)o+='<li class="cardchoice cardchoice-card" id="cardchoice_'+r[c]+'">'+this.returnPlanetCard(r[c])+"</li>";1==a.game.players_info[a.game.player-1].goods?o+='<li class="textchoice" id="trade_goods" style="clear:both">'+a.game.players_info[a.game.player-1].goods+" trade good</li>":o+='<li class="textchoice" id="trade_goods" style="clear:both">'+a.game.players_info[a.game.player-1].goods+" trade goods</li>",o+="</ul>",this.updateStatus(o),this.lockInterface(),$(".cardchoice , .textchoice").on("click",(function(){for(var o=$(this).attr("id"),c=o.split("_"),l="#"+o,u=c[1],d=0,p=0;p<r.length;p++)r[p]===u&&(d=p);if("trade_goods"==o?s>0&&(a.addMove("expend\t"+a.game.player+"\tgoods\t1"),s--,i+=1,1==s?$("#trade_goods").html(s+" trade good"):$("#trade_goods").html(s+" trade goods")):(a.addMove("expend\t"+a.game.player+"\tplanet\t"+r[d]),n.push(r[d]),$(l).off(),$(l).css("opacity","0.2"),i+=parseInt(a.game.planets[r[d]].resources)),e<=i){if(!a.mayUnlockInterface())return void salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.");a.unlockInterface(),$(".cardchoice , .textchoice").off(),t(1)}}))}else t(1)}},{key:"playerSelectActionCard",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this,n=this.returnPlayerActionCards(this.game.player,a);if(0==n.length)return this.playerAcknowledgeNotice("You do not have any action cards that can be played now",(function(){return null!=t?(t(),0):(r.playerTurn(),0)})),0;var i="";i+="<div class='sf-readable'>Select an action card: </div><ul>";for(var s=0;s<n.length;s++)if(!this.game.players_info[this.game.player-1].action_cards_played.includes(n[s])){var o=r.action_cards[n[s]];i+='<li class="textchoice pointer" id="'+n[s]+'">'+o.name+"</li>"}i+='<li class="textchoice pointer" id="cancel">cancel</li>',i+="</ul>",this.updateStatus(i),$(".textchoice").off(),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&r.showActionCard(e)})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&r.hideActionCard(e)})),$(".textchoice").on("click",(function(){var a=$(this).attr("id");if("cancel"!=a&&r.hideActionCard(a),"cancel"===a)return t(),0;r.game.tracker&&(r.game.tracker.action_card=1),"action"==r.action_cards[a].type&&(r.game.state.active_player_moved=1),r.game.players_info[r.game.player-1].action_cards_played.push(a),e(a)}))}},{key:"playerSelectStrategyCard",value:function(e){var t=this.game.players_info[this.game.player-1].strategy,a=this.returnStrategyCards(),r=this,n="";for(var i in n+="<div class='sf-readable'>Select a strategy card: </div><ul>",t)this.game.players_info[this.game.player-1].strategy_cards_played.includes(t[i])||(n+='<li class="textchoice" id="'+t[i]+'">'+a[t[i]].name+"</li>");n+='<li class="textchoice pointer" id="cancel">cancel</li>',n+="</ul>",this.updateStatus(n),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&r.showStrategyCard(e)})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&r.hideStrategyCard(e)})),$(".textchoice").on("click",(function(){var t=$(this).attr("id");"cancel"!=t&&r.hideStrategyCard(t),"cancel"!==t?e(t):r.playerTurn()}))}},{key:"playerSelectStrategyCards",value:function(e){var t=this,a=this.returnStrategyCards(),r="player_color_"+this.game.player,n=this.returnPlayerActionCards(this.game.player,["strategy"]),i="<div class='terminal_header'><div class='player_color_box "+r+"'></div>"+this.returnFaction(this.game.player)+": select your strategy card:</div><ul>";this.game.state.round>1&&(i="<div class='terminal_header'>"+this.returnFaction(this.game.player)+": select your strategy card:</div><ul>"),n.length>0&&(i+='<li class="option" id="action">play action card</li>');var s=[];for(var o in this.strategy_cards)s.push("");for(var c=0;c<this.game.state.strategy_cards.length;c++){for(var l=parseInt(this.strategy_cards[this.game.state.strategy_cards[c]].rank);""!=s[l-1];)l++;s[l-1]='<li class="textchoice" id="'+this.game.state.strategy_cards[c]+'">'+a[this.game.state.strategy_cards[c]].name+"</li>"}for(var u=0;u<s.length;u++)""!=s[u]&&(i+=s[u]);i+="</ul></p>",this.updateStatus(i),$(".textchoice").off(),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&t.showStrategyCard(e)})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&t.hideStrategyCard(e)})),$(".textchoice").on("click",(function(){var a=$(this).attr("id");if("action"==a)return t.playerSelectActionCard((function(e){return t.addMove("pickstrategy\t"+t.game.player),t.addMove("action_card_post\t"+t.game.player+"\t"+e),t.addMove("action_card\t"+t.game.player+"\t"+e),t.addMove("lose\t"+t.game.player+"\taction_cards\t1"),t.endTurn(),0}),(function(){t.playerSelectActionCards(action_card_player,card)}),["action"]),0;t.hideStrategyCard(a),e(a)}))}},{key:"playerRemoveInfantryFromPlanets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,r=this,n="";n+='<div class="sf-readable">Remove '+t+" infantry from planets you control:</div>",n+="<ul>";var i=[];for(var s in this.game.planets){var o=this.game.planets[s];if(o.owner==e){for(var c=0,l=0;l<o.units[e-1].length;l++)"infantry"==o.units[e-1][l].type&&c++;c>0&&(n+='<li class="option textchoice" id="'+s+'">'+o.name+' - <div style="display:inline" id="'+s+'_infantry">'+c+"</div></li>")}}n+='<li class="option textchoice" id="end"></li>',n+="</ul>",this.updateStatus(n),$(".textchoice").off(),$(".textchoice").on("click",(function(){var n=$(this).attr("id");if("end"!=n){i.push({infantry:1,planet:n});var s="#"+n+"_infantry",o=$(s).html(),c=parseInt(o)-1;c<0&&(c=0),$(s).html(c),0==c&&$(this).remove(),i.length>=t&&$("#end").click()}else{for(var l=0;l<i.length;l++)for(var u=r.game.planets[i[l].planet],d=u.units[e-1].length,p=0;p<d;p++)"infantry"==u.units[e-1][p].type&&(u.units[e-1].splice(p,1),p=d+2,r.addMove("remove_infantry_from_planet\t"+e+"\t"+i[l].planet+"\t0"),r.addMove("NOTIFY\tREMOVING INFANTRY FROM PLANET: "+i[l].planet));a(i.length)}}))}},{key:"playerAddInfantryToPlanets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0,r=this,n="";n+='<div class="sf-readable">Add '+t+" infantry to planets you control:</div>",n+="<ul>";var i=[];for(var s in this.game.planets){var o=this.game.planets[s];if(o.owner==e){for(var c=0,l=0;l<o.units[e-1].length;l++)"infantry"==o.units[e-1][l].type&&c++;n+='<li class="option textchoice" id="'+s+'">'+o.name+' - <div style="display:inline" id="'+s+'_infantry">'+c+"</div></li>"}}n+='<li class="option textchoice" id="end"></li>',n+="</ul>",this.updateStatus(n),$(".textchoice").off(),$(".textchoice").on("click",(function(){var n=$(this).attr("id");if("end"!=n){i.push({infantry:1,planet:n});var s="#"+n+"_infantry",o=$(s).html(),c=parseInt(o)+1;$(s).html(c),i.length>=t&&$("#end").click()}else{for(var l=0;l<i.length;l++)r.addMove("add_infantry_to_planet\t"+e+"\t"+i[l].planet+"\t1");a(i.length)}}))}},{key:"playerSelectUnitsToMove",value:function(e){var t,a,r,n=[],i={max_hops:2};i.ship_move_bonus=this.game.players_info[this.game.player-1].ship_move_bonus+this.game.players_info[this.game.player-1].temporary_ship_move_bonus,i.fleet_move_bonus=this.game.players_info[this.game.player-1].fleet_move_bonus+this.game.players_info[this.game.player-1].temporary_fleet_move_bonus,i.ships_and_sectors=[],i.stuff_to_move=[],i.stuff_to_load=[],i.distance_adjustment=0,i.max_hops+=i.ship_move_bonus,i.max_hops+=i.fleet_move_bonus;var s=this.returnSectorsWithinHopDistance(e,i.max_hops,this.game.player);t=s.sectors,n=s.distance,a=s.hazards,r=s.hoppable;for(var o=0;o<n.length;o++)i.ship_move_bonus>0&&n[o]--,i.fleet_move_bonus>0&&n[o]--;i.ship_move_bonus>0&&(i.distance_adjustment+=i.ship_move_bonus),i.fleet_move_bonus>0&&(i.distance_adjustment+=i.fleet_move_bonus),i.ships_and_sectors=this.returnShipsMovableToDestinationFromSectors(e,t,n,a,r);var c=function(t,a,r){var n=0;a.ship_move_bonus>0&&(n+=a.ship_move_bonus),a.fleet_move_bonus>0&&(n+=a.fleet_move_bonus);for(var i=a.distance_adjustment-n,s="<div class='player_color_box player_color_"+t.game.player+"'></div> "+t.returnFaction(t.game.player)+": select ships to move<ul>",o=0;o<a.ships_and_sectors.length;o++){var c=t.returnSectorAndPlanets(a.ships_and_sectors[o].sector);s+='<b class="sector_name" id="'+a.ships_and_sectors[o].sector+'" style="margin-top:10px">'+c.s.name+"</b>",s+='<ul class="ship_selector">';for(var l=0;l<a.ships_and_sectors[o].ships.length;l++){for(var u=0,d=0;d<a.stuff_to_move.length;d++)1==a.stuff_to_move[d].already_moved&&(u=1),a.stuff_to_move[d].sector==a.ships_and_sectors[o].sector&&a.stuff_to_move[d].i==o&&a.stuff_to_move[d].ii==l&&(u=1);var p=0;"rift"===a.ships_and_sectors[o].hazards[l]&&(p=1),1==u?s+=0==p?'<li id="sector_'.concat(o,"_").concat(l,'" class=""><b>').concat(t.returnShipInformation(a.ships_and_sectors[o].ships[l]),"</b></li>"):'<li id="sector_'.concat(o,"_").concat(l,'" class=""><b>').concat(t.returnShipInformation(a.ships_and_sectors[o].ships[l]),"</b> - rift</li>"):a.ships_and_sectors[o].ships[l].move-(a.ships_and_sectors[o].adjusted_distance[l]+i)>=0&&(s+=0==p?'<li id="sector_'.concat(o,"_").concat(l,'" class="option">').concat(t.returnShipInformation(a.ships_and_sectors[o].ships[l]),"</li>"):'<li id="sector_'.concat(o,"_").concat(l,'" class="option">').concat(t.returnShipInformation(a.ships_and_sectors[o].ships[l])," - rift</li>"))}s+="</ul>"}s+="<hr />",s+='<div id="confirm" class="option">click here to move</div>',s+="<hr />",t.updateStatus(s);var h=".sector_name";$(h).on("mouseenter",(function(){var e=$(this).attr("id");t.addSectorHighlight(e)})),$(h).on("mouseleave",(function(){var e=$(this).attr("id");t.removeSectorHighlight(e)})),$(".option").off(),$(".option").on("click",(function(){var n=$(this).attr("id");if("confirm"!=n){if("clear"==n)return salert("To change movement options, please reload!"),void window.location.reload(!0);$(this).css("font-weight","bold"),this.classList.add("ship_selected");var i=n.split("_"),s=i[1],o=i[2],c=a.ships_and_sectors[s].distance,l=a.ships_and_sectors[s].sector,u=t.returnSectorAndPlanets(l),d=a.ships_and_sectors[s].ships[o],p=t.returnRemainingCapacity(d),f={i:s,ii:o,sector:l};c+a.distance_adjustment>d.move+a.fleet_move_bonus&&a.ship_move_bonus--,"fighter"==d.type&&(a.ships_and_sectors[s].ships[o].already_moved=1),a.stuff_to_move.push(f),r(t,a,r);for(var m=0,g=0;g<u.p.length;g++)for(var b=u.p[g].units[t.game.player-1],y=0;y<b.length;y++)"infantry"==b[y].type&&m++;for(var v=0;v<u.s.units[t.game.player-1].length;v++)"fighter"==u.s.units[t.game.player-1][v].type&&m++;for(var _=0;_<u.s.units[t.game.player-1].length;_++)if("fighter"==u.s.units[t.game.player-1][_].type){for(var w=0,x=0;x<a.stuff_to_move.length;x++)a.stuff_to_move[x].sector==l&&a.stuff_to_move[x].ii==_&&(w=1);1==w&&m--}if(p>0&&m>0){for(var k=0;k<a.stuff_to_load.length;k++){var S=a.stuff_to_load[k];S.i==s&&S.ii==o&&JSON.parse(a.stuff_to_load[k].unitjson).capacity_required}for(var P='<div class="sf-readable">This ship has <span class="capacity_remaining">'.concat(p,"</span> capacity. Infantry can capture planets and fighters can protect your fleet. Do you wish to add them? </div><ul>"),E=0;E<u.p.length;E++){for(var C=u.p[E].units[t.game.player-1],A=0,M=0;M<C.length;M++)"infantry"==C[M].type&&A++;A>0&&(P+='<li class="option textchoice" id="addinfantry_p_'+E+'">add infantry from '+u.p[E].name+' - <span class="add_infantry_remaining_'+E+'">'+A+"</span></li>")}for(var T=0,j=0;j<u.s.units[t.game.player-1].length;j++)if("fighter"==u.s.units[t.game.player-1][j].type){for(var O=0,D=0;D<a.stuff_to_move.length;D++)a.stuff_to_move[D].sector==l&&a.stuff_to_move[D].ii==j&&(O=1);0==O&&T++}P+='<li class="option textchoice" id="addfighter_s_s">add fighter - <span class="add_fighters_remaining">'+T+"</span></li>",P+='<li class="option textchoice" id="skip">finish</li>',P+="</ul></div>",$(".status-overlay").html(P),$(".status-overlay").show(),$(".status").hide(),$(".textchoice").off();for(var I=function(e){h="#addinfantry_p_"+e,$(h).on("mouseenter",(function(){t.addPlanetHighlight(l,e)})),$(h).on("mouseleave",(function(){t.removePlanetHighlight(l,e)}))},R=0;R<u.p.length;R++)I(R);h="#addfighter_s_s",$(h).on("mouseenter",(function(){t.addSectorHighlight(l)})),$(h).on("mouseleave",(function(){t.removeSectorHighlight(l)})),$(".textchoice").on("click",(function(){var e=$(this).attr("id").split("_"),r=e[0];if(p>0){if("addinfantry"===r){var n=e[2],i=".add_infantry_remaining_"+n,c=parseInt($(i).html()),d=parseInt($(".capacity_remaining").html()),h=t.unloadUnitFromPlanet(t.game.player,l,n,"infantry"),f=JSON.stringify(u.s.units[t.game.player-1][a.ships_and_sectors[s].ship_idxs[o]]);t.loadUnitByJSONOntoShip(t.game.player,l,a.ships_and_sectors[s].ship_idxs[o],h),$(i).html(c-1),$(".capacity_remaining").html(d-1);var m={};m.sector=l,m.source="planet",m.source_idx=n,m.unitjson=h,m.ship_idx=a.ships_and_sectors[s].ship_idxs[o],m.shipjson=f,m.i=s,m.ii=o,p--,a.stuff_to_load.push(m),1===d&&0==p&&($(".status").show(),$(".status-overlay").hide())}if("addfighter"===r){if(T<=0)return;var g=parseInt($(".add_fighters_remaining").html()),b=parseInt($(".capacity_remaining").html());$(".add_fighters_remaining").html(g-1),T--,$(".capacity_remaining").html(b-1);for(var y=a.ships_and_sectors.length,v=0;v<a.ships_and_sectors.length;v++)if(a.ships_and_sectors[v].sector===l)for(var _=a.ships_and_sectors[v].ships.length,w=0;w<_;w++)1==a.ships_and_sectors[v].ships[w].already_moved||"fighter"==a.ships_and_sectors[v].ships[w].type&&($("#sector_"+v+"_"+w).remove(),a.ships_and_sectors[v].ships[w]={},a.ships_and_sectors[v].adjusted_distance[w]=0,w=_+2,v=y+2);var x=t.removeSpaceUnit(t.game.player,l,"fighter"),k=JSON.stringify(u.s.units[t.game.player-1][a.ships_and_sectors[s].ship_idxs[o]]);t.loadUnitByJSONOntoShip(t.game.player,l,a.ships_and_sectors[s].ship_idxs[o],x);var S={};a.stuff_to_load.push(S),S.sector=l,S.source="ship",S.source_idx="",S.unitjson=x,S.ship_idx=a.ships_and_sectors[s].ship_idxs[o],S.shipjson=k,S.i=s,S.ii=o,p--,1==b&&0==p&&($(".status").show(),$(".status-overlay").hide())}}"skip"===r&&($(".status-overlay").hide(),$(".status").show())}))}}else{t.addMove("resolve\tplay"),t.addMove("space_invasion\t"+t.game.player+"\t"+e),t.addMove("check_fleet_supply\t"+t.game.player+"\t"+e);for(var B=0;B<a.stuff_to_move.length;B++){var q=a.stuff_to_move[B].i,L=a.stuff_to_move[B].ii,N=a.ships_and_sectors[q].hazards[L];t.addMove("move\t"+t.game.player+"\t1\t"+a.ships_and_sectors[a.stuff_to_move[B].i].sector+"\t"+e+"\t"+JSON.stringify(a.ships_and_sectors[a.stuff_to_move[B].i].ships[a.stuff_to_move[B].ii])+"\t"+N)}for(var F=a.stuff_to_load.length-1;F>=0;F--)t.addMove("load\t"+t.game.player+"\t0\t"+a.stuff_to_load[F].sector+"\t"+a.stuff_to_load[F].source+"\t"+a.stuff_to_load[F].source_idx+"\t"+a.stuff_to_load[F].unitjson+"\t"+a.stuff_to_load[F].shipjson);t.endTurn()}}))};c(this,i,c)}},{key:"playerSelectInfantryToLand",value:function(e){for(var t=this,a='<div id="status-message" class="imperial-status-message">Unload Infantry (source): <ul>',r=t.returnSectorAndPlanets(e),n=[],i=[],s=0;s<r.s.units[this.game.player-1].length;s++){var o=r.s.units[this.game.player-1][s];t.returnInfantryInUnit(o)>0&&(a+='<li class="option textchoice" id="addinfantry_s_'.concat(s,'">remove infantry from ').concat(o.name,' - <span class="add_infantry_remaining_s_').concat(s,'">').concat(t.returnInfantryInUnit(o),"</span></li>"))}for(var c=0;c<r.p.length;c++){var l=r.p[c];t.returnInfantryOnPlanet(l)>0&&(a+='<li class="option textchoice" id="addinfantry_p_'.concat(c,'">remove infantry from ').concat(l.name,' - <span class="add_infantry_remaining_p_').concat(c,'">').concat(t.returnInfantryOnPlanet(l),"</span></li>"))}a+="</ul>",a+="</div>",a+='<div id="confirm" class="option">click here to move</div>',t.updateStatus(a),$(".option").off(),$(".option").on("click",(function(){for(var a=$(this).attr("id"),s=[],o=0,c=0;c<r.p.length;c++)s.push(0);if("confirm"==a){for(var l=0;l<n.length;l++)t.addMove("unload_infantry\t"+t.game.player+"\t1\t"+e+"\tship\t"+n[l].ship_idx),o++;for(var u=0;u<i.length;u++)t.addMove("unload_infantry\t"+t.game.player+"\t1\t"+e+"\tplanet\t"+i[u].planet_idx),o++;for(var d='<div class="sf-readable" id="status-message">Reassign Infantry to Planets: <ul>',p=0;p<r.p.length;p++){for(var h=t.returnInfantryOnPlanet(r.p[p]),f=0;f<i.length;f++)i[f].planet_idx==p&&h--;d+='<li class="option textchoice" id="'.concat(p,'">').concat(r.p[p].name,' - <span class="infantry_on_').concat(p,'">').concat(h,"</span></li>")}d+='<div id="confirm" class="option">click here to move</div>',d+="</ul",d+="</div>",t.updateStatus(d),$(".option").off(),$(".option").on("click",(function(){var a=$(this).attr("id");if("confirm"==a&&t.endTurn(),o>0){o--;var r=".infantry_on_"+a,n=parseInt($(r).html());n++,$(r).html(n),t.addMove("load_infantry\t"+t.game.player+"\t1\t"+e+"\tplanet\t"+a)}}))}"clear"==a&&(salert("To change movement options, just reload!"),window.location.reload(!0));var m=a.split("_");if("p"===m[1]){var g=".add_infantry_remaining_p_"+m[2],b=parseInt($(g).html());b>0&&(i.push({planet_idx:m[2]}),$(g).html(b-1))}if("s"===m[1]){var y=".add_infantry_remaining_s_"+m[2],v=parseInt($(y).html());v>0&&(n.push({ship_idx:m[2]}),$(y).html(v-1))}}))}},{key:"playerInvadePlanet",value:function(e,t){var a=this,r=this.returnSectorAndPlanets(t),n=0,i=[],s=[],o=[];html='<div class="sf-readable">Which planet(s) do you invade: </div><ul>';for(var c=0;c<r.p.length;c++)r.p[c].owner!=e&&(html+='<li class="option sector_name" id="'+c+'">'+r.p[c].name+' - <span class="invadeplanet_'+c+'">0</span></li>');html+='<li class="option" id="confirm">launch invasion(s)</li>',html+="</ul>",this.updateStatus(html);var l=0,u=0,d=[],p=[];$(".option").off(),$(".sector_name").on("mouseenter",(function(){var e=$(this).attr("id");a.addPlanetHighlight(t,e)})),$(".sector_name").on("mouseleave",(function(){var e=$(this).attr("id");a.removePlanetHighlight(t,e)})),$(".option").on("click",(function(){var c=$(this).attr("id");if("confirm"===c){for(var h=0;h<o.length;h++)if(s.includes(o[h])){var f=r.p[o[h]].owner;a.prependMove("bombardment\t"+a.game.player+"\t"+t+"\t"+o[h]),a.prependMove("bombardment_post\t"+a.game.player+"\t"+t+"\t"+o[h]),a.prependMove("bombardment_post\t"+f+"\t"+t+"\t"+o[h]),a.prependMove("planetary_defense\t"+a.game.player+"\t"+t+"\t"+o[h]),a.prependMove("planetary_defense_post\t"+a.game.player+"\t"+t+"\t"+o[h]),a.prependMove("ground_combat_start\t"+a.game.player+"\t"+t+"\t"+o[h]),a.prependMove("ground_combat\t"+a.game.player+"\t"+t+"\t"+o[h]),a.prependMove("ground_combat_post\t"+a.game.player+"\t"+t+"\t"+o[h]),a.prependMove("ground_combat_end\t"+a.game.player+"\t"+t+"\t"+o[h])}return a.prependMove("continue\t"+a.game.player+"\t"+t),void a.endTurn()}o.includes(c)||o.push(c);for(var m=0;m<r.s.units[e-1].length;m++){for(var g=r.s.units[e-1][m],b=0;b<g.storage.length;b++)g.storage[b].type;r.s.units[e-1][m].capacity>0&&0==u&&(n+=r.s.units[e-1][m].capacity)}html='<div class="sf-readable">Select Ground Forces for Invasion of '+r.p[c].name+": </div><ul>";for(var y=0;y<r.p.length;y++)if(d.push(0),n>0&&r.p[y].units[e-1].length>0){for(var v=0;v<r.p[y].units[e-1].length;v++)"infantry"==r.p[y].units[e-1][v].type&&0==l&&d[y]++;html+='<li class="invadechoice textchoice option" id="invasion_planet_'+y+'">'+r.p[y].name+' - <span class="planet_'+y+'_infantry">'+d[y]+"</span></li>"}l=1;for(var _=0;_<r.s.units[e-1].length;_++){var w=r.s.units[e-1][_];p.push(0);for(var x=0;x<w.storage.length;x++)"infantry"===w.storage[x].type&&0==u&&p[_]++;p[_]>0&&(html+='<li class="invadechoice textchoice" id="invasion_ship_'+_+'">'+w.name+' - <span class="ship_'+_+'_infantry">'+p[_]+"</span></li>")}u=1,html+='<li class="invadechoice textchoice" id="finished_0_0">finish selecting</li>',html+="</ul></p>",$(".status-overlay").html(html),$(".status").hide(),$(".status-overlay").show(),$(".invadechoice").off(),$(".invadechoice").on("click",(function(){var e=$(this).attr("id").split("_"),r=e[0],o=e[1],l=e[2],u="."+o+"_"+l+"_infantry",h=parseInt($(u).html());if("invasion"==r){if("planet"==o){if(n<=0)return void salert("Invalid Choice! No space transport available!");d[l]--}else p[l]--;if(0==h)return void salert("You cannot attack with forces you do not have available.");var f=JSON.stringify(a.returnUnit("infantry",a.game.player)),m={};m.sector=t,m.source=o,m.source_idx=l,m.planet_idx=c,m.unitjson=f,i.push(m);var g=".invadeplanet_"+c,b=parseInt($(g).html());b++,$(g).html(b),h--,$(u).html(h)}if("finished"===r){for(var y=0;y<i.length;y++)a.addMove("land\t"+a.game.player+"\t1\t"+i[y].sector+"\t"+i[y].source+"\t"+i[y].source_idx+"\t"+i[y].planet_idx+"\t"+i[y].unitjson),s.includes(i[y].planet_idx)||s.push(i[y].planet_idx);return i=[],$(".status").show(),void $(".status-overlay").hide()}}))}))}},{key:"playerActivateSystem",value:function(){var e=this,t=0,a=0,r=0;e.updateStatus("Select a sector to activate: "),$(".sector").off(),$(".sector").on("mousedown",(function(e){a=e.clientX,r=e.clientY})),$(".sector").on("mouseup",(function(n){if(!(Math.abs(a-n.clientX)>4||Math.abs(r-n.clientY)>4||1==t)){var i=$(this).attr("id");if(0==e.canPlayerActivateSystem(i))salert("You cannot activate that system.");else{var s=e.returnSectorAndPlanets(i);if(!e.canPlayerMoveShipsIntoSector(e.game.player,i)&&!confirm("You cannot move ships into this sector. Are you sure you wish to activate it?"))return;if(e.returnPlayerHomeworldSector()==s.s.sector&&1==e.game.state.round&&!confirm("If you activate your homeworld you will not be able to move ships out of it until Round 2. Are you sure you want to do this?"))return;t=1;var o="#"+i;$(o).find(".hex_activated").css("background-color","var(--p"+e.game.player+")"),$(o).find(".hex_activated").css("opacity","0.3"),e.updateStatus('<div class=\'sf-readable\'>Activate this system?</div><ul><li class="option" id="yes">yes, do it</li><li class="option" id="no">choose again</li></ul>'),$(".option").off(),$(".option").on("click",(function(){"yes"===$(this).attr("id")?(s.s.activated[e.game.player-1]=1,e.addMove("activate_system_post\t"+e.game.player+"\t"+i),e.addMove("pds_space_attack_post\t"+e.game.player+"\t"+i),e.addMove("pds_space_attack\t"+e.game.player+"\t"+i),e.addMove("activate_system\t"+e.game.player+"\t"+i),e.addMove("expend\t"+e.game.player+"\tcommand\t1"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t1"),e.endTurn()):(t=0,$(o).find(".hex_activated").css("background-color","transparent"),$(o).find(".hex_activated").css("opacity","1"),e.playerActivateSystem())}))}}}))}},{key:"playerPostActivateSystem",value:function(e){var t=this,a=this.returnPlayerActionCards(t.game.player,["post_activate_system"]),r=t.game.player,n="<div class='sf-readable'>"+this.returnFaction(this.game.player)+": </div><ul>";t.canPlayerMoveShipsIntoSector(r,e)&&(n+='<li class="option" id="move">move into sector</li>'),this.canPlayerInvadePlanet(r,e)&&0==this.game.tracker.invasion&&("new-byzantium"==e||"4_4"==e?(-1!=t.game.planets["new-byzantium"].owner||t.returnAvailableInfluence(t.game.player)+t.game.players_info[t.game.player-1].goods>=6)&&(n+='<li class="option" id="invade">invade planet</li>'):n+='<li class="option" id="invade">invade planet</li>'),this.canPlayerLandInfantry(r,e)&&0==this.game.tracker.invasion&&(n+='<li class="option" id="land">reassign infantry</li>'),this.canPlayerProduceInSector(this.game.player,e)&&(n+='<li class="option" id="produce">produce units</li>'),this.canPlayerLandInfantry(r,e)&&0==this.game.tracker.invasion&&(n+='<li class="option" id="land">relocate infantry</li>'),a.length>0&&(n+='<li class="option" id="action">play action card</li>'),n+='<li class="option" id="finish">finish turn</li>',n+="</ul>",t.updateStatus(n),$(".option").on("click",(function(){var a=$(this).attr("id");if("action"==a&&t.playerSelectActionCard((function(a){t.addMove("activate_system_post\t"+t.game.player+"\t"+e),t.game.players_info[this.game.player-1].action_cards_played.push(a),t.addMove("action_card_post\t"+t.game.player+"\t"+a),t.addMove("action_card\t"+t.game.player+"\t"+a),t.addMove("lose\t"+t.game.player+"\taction_cards\t1")}),(function(){t.playerPlayActionCardMenu(action_card_player,card)}),["action"]),"invade"==a){if(("new-byzantium"===e||"4_4"==e)&&-1==t.game.planets["new-byzantium"].owner)return t.returnAvailableInfluence(t.game.player)>=6?void t.playerSelectInfluence(6,(function(a){t.game.tracker.invasion=1,t.playerInvadePlanet(r,e)})):void salert("The first conquest of New Byzantium requires spending 6 influence, which you lack.");t.game.tracker.invasion=1,t.playerInvadePlanet(r,e)}if("land"==a)return t.addMove("continue\t"+t.game.player+"\t"+e),t.playerSelectInfantryToLand(e),0;if("move"==a&&t.playerSelectUnitsToMove(e),"produce"==a){var n=t.returnSpareFleetSupplyInSector(r,e);if(n<=1){var i="You have no spare fleet supply in this sector. Do you still wish to produce more ships?";return 1==n&&(i="You have fleet supply for 1 additional capital ship in this sector. Do you still wish to produce more ships?"),void(confirm(i)&&t.playerProduceUnits(e))}t.playerProduceUnits(e)}"finish"==a&&(t.moves.includes("resolve\tplay")||t.addMove("resolve\tplay"),t.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),t.endTurn())}))}},{key:"playerAllocateNewTokens",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=this;if(this.game.player==e){var s={};s.current_command=this.game.players_info[e-1].command_tokens,s.current_strategy=this.game.players_info[e-1].strategy_tokens,s.current_fleet=this.game.players_info[e-1].fleet_supply,s.new_command=0,s.new_strategy=0,s.new_fleet=0,s.new_tokens=t;var o=function(t,i,s){var o='<div class="sf-readable">You have '+i.new_tokens+" tokens to allocate. How do you want to allocate them? </div><ul>";1==r&&(o='<div class="sf-readable">The Leadership card gives you '+i.new_tokens+" tokens to allocate. How do you wish to allocate them? </div><ul>"),2==r&&(o='<div class="sf-readable">Leadership has been played and you have purchased '+i.new_tokens+" additional tokens. How do you wish to allocate them? </div><ul>"),3==r&&(o='<div class="sf-readable">You have '+i.new_tokens+" new tokens to allocate: </div><ul>"),o+='<li class="option" id="command">Command Token - '+(parseInt(i.current_command)+parseInt(i.new_command))+"</li>",o+='<li class="option" id="strategy">Strategy Token - '+(parseInt(i.current_strategy)+parseInt(i.new_strategy))+"</li>",o+='<li class="option" id="fleet">Fleet Supply - '+(parseInt(i.current_fleet)+parseInt(i.new_fleet))+"</li>",o+="</ul>",t.updateStatus(o),t.lockInterface(),$(".option").off(),$(".option").on("click",(function(){var r=$(this).attr("id");"strategy"==r&&(i.new_strategy++,i.new_tokens--),"command"==r&&(i.new_command++,i.new_tokens--),"fleet"==r&&(i.new_fleet++,i.new_tokens--),0==i.new_tokens?(1==a&&(t.game.confirms_needed>0&&0==n?t.addMove("resolve\ttokenallocation\t1\t"+t.app.wallet.returnPublicKey()):t.addMove("resolve\ttokenallocation")),t.addMove("purchase\t"+e+"\tstrategy\t"+i.new_strategy),t.addMove("purchase\t"+e+"\tcommand\t"+i.new_command),t.addMove("purchase\t"+e+"\tfleetsupply\t"+i.new_fleet),t.unlockInterface(),t.endTurn()):(t.unlockInterface(),s(t,i,s))}))};o(i,s,o)}return 0}},{key:"playerSelectPlayerWithFilter",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this,i='<div class="sf-readable">'+e+"</div>";i+="<ul>";for(var s=0;s<this.game.players_info.length;s++)1==t(this.game.players_info[s])&&(i+='<li class="textchoice" id="'+(s+1)+'">'+this.returnFaction(s+1)+"</li>");null!=r&&(i+='<li class="textchoice" id="cancel">cancel</li>'),i+="</ul>",this.updateStatus(i),n.lockInterface(),$(".textchoice").off(),$(".textchoice").on("click",(function(){if(n.mayUnlockInterface()){n.unlockInterface();var e=$(this).attr("id");if("cancel"==e)return r(),0;a(e)}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectSectorWithFilter",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this,i='<div class="sf-readable">'+e+"</div>";for(var s in i+="<ul>",this.game.board)1==t(this.game.board[s].tile)&&(i+='<li class="textchoice" id="'+s+'">'+this.game.sectors[this.game.board[s].tile].name+"</li>");null!=r&&(i+='<li class="textchoice" id="cancel">cancel</li>'),i+="</ul>",this.updateStatus(i),this.lockInterface(),$(".textchoice").off(),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&n.showSectorHighlight(e)})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&n.hideSectorHighlight(e)})),$(".textchoice").on("click",(function(){if(n.mayUnlockInterface()){n.unlockInterface();var e=$(this).attr("id");if("cancel"!=e&&n.hideSectorHighlight(e),"cancel"==e)return r(),0;n.updateStatus(""),a(n.game.board[e].tile)}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectChoice",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"other",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this,i='<div class="sf-readable">'+e+"</div>";i+="<ul>";for(var s=0;s<t.length;s++)"player"==a&&("Unknown"!=this.returnFaction(t[s])?i+='<li class="textchoice" id="'+s+'">'+this.returnFaction(t[s])+"</li>":i+='<li class="textchoice" id="'+s+'">'+t[s]+"</li>"),"planet"==a&&(i+='<li class="textchoice" id="'+s+'">'+this.game.planets[t[s]].name+"</li>"),"sector"==a&&(i+='<li class="textchoice" id="'+s+'">'+this.game.sectors[this.game.board[t[s]].tile].name+"</li>"),"other"==a&&(i+='<li class="textchoice" id="'+s+'">'+t[s]+"</li>");i+="</ul>",this.updateStatus(i),this.lockInterface(),$(".textchoice").off(),$(".textchoice").on("click",(function(){if(n.mayUnlockInterface()){n.unlockInterface();var e=$(this).attr("id");r(e)}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectPlanetWithFilter",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this,i='<div class="sf-readable">'+e+"</div>";for(var s in i+="<ul>",this.game.planets)""!=this.game.planets[s].tile&&1==t(s)&&(i+='<li class="textchoice" id="'+s+'">'+this.game.planets[s].name+"</li>");null!=r&&(i+='<li class="textchoice" id="cancel">cancel</li>'),i+="</ul>",this.updateStatus(i),this.lockInterface(),$(".textchoice").off(),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&(n.showPlanetCard(n.game.planets[e].tile,n.game.planets[e].idx),n.showSectorHighlight(n.game.planets[e].tile))})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&(n.hidePlanetCard(n.game.planets[e].tile,n.game.planets[e].idx),n.hideSectorHighlight(n.game.planets[e].tile))})),$(".textchoice").on("click",(function(){if(n.mayUnlockInterface()){n.unlockInterface();var e=$(this).attr("id");if("cancel"!=e&&(n.hidePlanetCard(n.game.planets[e].tile,n.game.planets[e].idx),n.hideSectorHighlight(n.game.planets[e].tile)),"cancel"==e)return r(),n.hideSectorHighlight(e),0;n.updateStatus(""),n.hideSectorHighlight(e),a(e)}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectUnitInSectorWithFilter",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=this,s=[],o=[],c=[],l=[],u=0,d='<div class="sf-readable">'+e+"</div>";d+="<ul>";for(var p=this.returnSectorAndPlanets(t),h=0;h<p.s.units[i.game.player-1].length;h++)a(p.s.units[i.game.player-1][h])&&(s.push(p.s.units[i.game.player-1][h]),o.push(t),c.push(-1),l.push(h),u=1,d+='<li class="textchoice" id="'+(s.length-1)+'">'+p.s.name+" - "+s[s.length-1].name+"</li>");for(var f=0;f<p.p.length;f++)for(var m=0;m<p.p[f].units[i.game.player-1].length;m++)a(p.p[f].units[i.game.player-1][m])&&(s.push(p.p[f].units[i.game.player-1][m]),o.push(t),c.push(f),l.push(m),u=1,d+='<li class="textchoice" id="'+(s.length-1)+'">'+p.s.sector+" / "+p.p[f].name+" - "+s[s.length-1].name+"</li>");0==u&&(d+='<li class="textchoice" id="none">no unit available</li>'),null!=n&&(d+='<li class="textchoice" id="cancel">cancel</li>'),d+="</ul>",this.updateStatus(d),$(".textchoice").off(),this.lockInterface(),$(".textchoice").on("click",(function(){if(i.mayUnlockInterface()){i.unlockInterface();var e=$(this).attr("id");if("cancel"===e)return n(),i.hideSectorHighlight(e),0;if("none"!==e){var t={sector:o[e],planet_idx:c[e],unit_idx:l[e],unit:s[e]};i.updateStatus(""),r(t)}else r({sector:"",planet_idx:"",unit_idx:-1,unit:null})}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectOpponentUnitInSectorWithFilter",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=this,s=[],o=[],c=[],l=[],u=0,d='<div class="sf-readable">'+e+"</div>";d+="<ul>";for(var p=this.returnSectorAndPlanets(t),h=0;h<p.s.units.length;h++)if(h!=i.game.player-1)for(var f=0;f<p.s.units[h].length;f++)a(p.s.units[h][f])&&(s.push(p.s.units[h][f]),o.push(t),c.push(-1),l.push(f),u=1,d+='<li class="textchoice" id="'+(s.length-1)+'">'+p.s.name+" - "+s[s.length-1].name+"</li>");for(var m=0;m<p.p.length;m++)for(var g=0;g<p.s.units.length;g++)if(g!=i.game.player-1)for(var b=0;b<p.p[m].units[i.game.player-1].length;b++)a(p.p[m].units[i.game.player-1][b])&&(s.push(p.p[m].units[i.game.player-1][b]),o.push(t),c.push(m),l.push(b),u=1,d+='<li class="textchoice" id="'+(s.length-1)+'">'+p.s.sector+" / "+p.p[m].name+" - "+s[s.length-1].name+"</li>");0==u&&(d+='<li class="textchoice" id="none">no unit available</li>'),null!=n&&(d+='<li class="textchoice" id="cancel">cancel</li>'),d+="</ul>",this.updateStatus(d),this.lockInterface(),$(".textchoice").off(),$(".textchoice").on("click",(function(){if(i.mayUnlockInterface()){i.unlockInterface();var e=$(this).attr("id");if("cancel"===e)return n(),i.hideSectorHighlight(e),0;if("none"!==e){var t={sector:o[e],planet_idx:c[e],unit_idx:l[e],unit:s[e]};i.updateStatus(""),r(t)}else r({sector:"",planet_idx:"",unit_idx:-1,unit:null})}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}},{key:"playerSelectUnitInSectorFilter",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=this.returnSectorAndPlanets(t),s='<div class="sf-readable">'+e+"</div>";s+="<ul>";for(var o=0;o<this.game.players_info.length;o++)for(var c=0;c<i.s.units[o].length;c++)1==a(i.s.units[o][c])&&(s+='<li class="textchoice" id="'+t+"_"+o+"_"+o+'">'+this.returnFaction(o+1)+" - "+i.s.units[o][c].name+"</li>");null!=n&&(s+='<li class="textchoice" id="cancel">cancel</li>'),s+="</ul>",this.updateStatus(s),$(".textchoice").off(),$(".textchoice").on("click",(function(){var e=$(this).attr("id");if("cancel"==e)return n(),0;var t=e.split("_"),a=t[0],i=t[1],s=t[2];r({sector:a,player:i,unitidx:s})}))}},{key:"playerDiscardActionCards",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this;e<0&&a.endTurn();var r="<div class='sf-readable'>You must discard <div style='display:inline' class='totalnum' id='totalnum'>"+e+"</div> action card";e>1&&(r+="s"),r+=":</div>",r+="<ul>";for(var n=this.returnPlayerActionCards(a.game.player),i=0;i<n.length;i++)r+='<li class="textchoice" id="'+i+'">'+this.action_cards[n[i]].name+"</li>";r+="</ul>",this.updateStatus(r),$(".textchoice").off(),$(".textchoice").on("mouseenter",(function(){var e=$(this).attr("id");"cancel"!=e&&a.showActionCard(n[e])})),$(".textchoice").on("mouseleave",(function(){var e=$(this).attr("id");"cancel"!=e&&a.hideActionCard(n[e])})),$(".textchoice").on("click",(function(){var r=$(this).attr("id");e--,$(".totalnum").html(e),$(this).remove(),a.hideActionCard(r),a.game.players_info[a.game.player-1].action_cards_played.push(n[r]),a.addMove("lose\t"+a.game.player+"\taction_cards\t1"),0==e&&(null==t?(a.updateStatus("discarding..."),a.endTurn()):t())}))}},{key:"returnPlanets",value:function(){var e={planet1:{type:"hazardous",img:"/imperium/img/planets/CRYSTALIS.png",name:"Crystalis",resources:3,influence:0,bonus:""},planet2:{type:"hazardous",img:"/imperium/img/planets/TROTH.png",name:"Troth",resources:2,influence:0,bonus:""},planet3:{type:"industrial",img:"/imperium/img/planets/LONDRAK.png",name:"Londrak",resources:1,influence:2,bonus:""},planet4:{type:"hazardous",img:"/imperium/img/planets/CITADEL.png",name:"Citadel",resources:0,influence:4,bonus:"red"},planet5:{type:"industrial",img:"/imperium/img/planets/BELVEDYR.png",name:"Belvedyr",resources:1,influence:2,bonus:""},planet6:{type:"industrial",img:"/imperium/img/planets/SHRIVA.png",name:"Shriva",resources:2,influence:1,bonus:""},planet7:{type:"hazardous",img:"/imperium/img/planets/ZONDOR.png",name:"Zondor",resources:3,influence:1,bonus:""},planet8:{type:"hazardous",img:"/imperium/img/planets/CALTHREX.png",name:"Calthrex",resources:2,influence:3,bonus:""},planet9:{type:"cultural",img:"/imperium/img/planets/SOUNDRA-IV.png",name:"Soundra IV",resources:1,influence:3,bonus:""},planet10:{type:"cultural",img:"/imperium/img/planets/VIGOR.png",name:"Vigor",resources:1,influence:1,bonus:""},planet11:{type:"cultural",img:"/imperium/img/planets/UDON-II.png",name:"Udon II",resources:1,influence:2,bonus:""},planet12:{type:"cultural",img:"/imperium/img/planets/NEW-JYLANX.png",name:"New Jylanx",resources:2,influence:0,bonus:""},planet13:{type:"cultural",img:"/imperium/img/planets/TERRA-CORE.png",name:"Terra Core",resources:0,influence:2,bonus:""},planet14:{type:"cultural",img:"/imperium/img/planets/OLYMPIA.png",name:"Olympia",resources:1,influence:2,bonus:""},planet15:{type:"industrial",img:"/imperium/img/planets/GRANTON-MEX.png",name:"Granton Mex",resources:1,influence:0,bonus:"yellow"},planet16:{type:"hazardous",img:"/imperium/img/planets/HARKON-CALEDONIA.png",name:"Harkon Caledonia",resources:2,influence:1,bonus:""},planet17:{type:"cultural",img:"/imperium/img/planets/NEW-ILLIA.png",name:"New Illia",resources:3,influence:1,bonus:""},planet18:{type:"hazardous",img:"/imperium/img/planets/LAZAKS-CURSE.png",name:"Lazak's Curse",resources:1,influence:3,bonus:"red"},planet19:{type:"cultural",img:"/imperium/img/planets/VOLUNTRA.png",name:"Voluntra",resources:0,influence:2,bonus:""},planet20:{type:"hazardous",img:"/imperium/img/planets/XERXES-IV.png",name:"Xerxes IV",resources:3,influence:1,bonus:""},planet21:{type:"industrial",img:"/imperium/img/planets/SIRENS-END.png",name:"Siren's End",resources:1,influence:1,bonus:"green"},planet22:{type:"hazardous",img:"/imperium/img/planets/RIFTVIEW.png",name:"Riftview",resources:2,influence:1,bonus:""},planet23:{type:"cultural",img:"/imperium/img/planets/BROUGHTON.png",name:"Broughton",resources:1,influence:2,bonus:""},planet24:{type:"industrial",img:"/imperium/img/planets/FJORDRA.png",name:"Fjordra",resources:0,influence:3,bonus:""},planet25:{type:"cultural",img:"/imperium/img/planets/SINGHARTA.png",name:"Singharta",resources:1,influence:1,bonus:""},planet26:{type:"industrial",img:"/imperium/img/planets/NOVA-KLONDIKE.png",name:"Nova Klondike",resources:2,influence:2,bonus:""},planet27:{type:"industrial",img:"/imperium/img/planets/CONTOURI-I.png",name:"Contouri I",resources:1,influence:1,bonus:"green"},planet28:{type:"hazardous",img:"/imperium/img/planets/CONTOURI-II.png",name:"Contouri II",resources:2,influence:0,bonus:""},planet29:{type:"cultural",img:"/imperium/img/planets/HOTH.png",name:"Hoth",resources:2,influence:2,bonus:""},planet30:{type:"industrial",img:"/imperium/img/planets/UNSULLA.png",name:"Unsulla",resources:1,influence:2,bonus:""},planet31:{type:"industrial",img:"/imperium/img/planets/GROX-TOWERS.png",name:"Grox Towers",resources:1,influence:1,bonus:"blue"},planet32:{type:"hazardous",img:"/imperium/img/planets/GRAVITYS-EDGE.png",name:"Gravity's Edge",resources:2,influence:1,bonus:""},planet33:{type:"industrial",img:"/imperium/img/planets/POPULAX.png",name:"Populax",resources:3,influence:2,bonus:"yellow"},planet34:{type:"cultural",img:"/imperium/img/planets/OLD-MOLTOUR.png",name:"Old Moltour",resources:2,influence:0,bonus:""},"new-byzantium":{type:"diplomatic",img:"/imperium/img/planets/NEW-BYZANTIUM.png",name:"New Byzantium",resources:1,influence:6,bonus:""},planet36:{type:"cultural",img:"/imperium/img/planets/OUTERANT.png",name:"Outerant",resources:1,influence:3,bonus:""},planet37:{type:"industrial",img:"/imperium/img/planets/VESPAR.png",name:"Vespar",resources:2,influence:2,bonus:""},planet38:{type:"hazardous",img:"/imperium/img/planets/CRAW-POPULI.png",name:"Craw Populi",resources:1,influence:2,bonus:""},planet39:{type:"cultural",img:"/imperium/img/planets/YSSARI-II.png",name:"Yssari II",resources:0,influence:1,bonus:""},planet41:{type:"industrial",img:"/imperium/img/planets/LORSTRUCK.png",name:"Lorstruck",resources:1,influence:0,bonus:""},planet42:{type:"hazardous",img:"/imperium/img/planets/INDUSTRYL.png",name:"Industryl",resources:3,influence:1,bonus:""},planet43:{type:"cultural",img:"/imperium/img/planets/MECHANEX.png",name:"Mechanex",resources:1,influence:0,bonus:""},planet44:{type:"industrial",img:"/imperium/img/planets/HEARTHSLOUGH.png",name:"Hearthslough",resources:3,influence:0,bonus:""},planet45:{type:"hazardous",img:"/imperium/img/planets/INCARTH.png",name:"Incarth",resources:2,influence:0,bonus:""},planet46:{type:"cultural",img:"/imperium/img/planets/AANDOR.png",name:"Aandor",resources:2,influence:1,bonus:""},planet40:{type:"industrial",img:"/imperium/img/planets/HOPES-LURE.png",name:"Hope's Lure",resources:3,influence:2,bonus:""},planet47:{type:"hazardous",img:"/imperium/img/planets/QUANDAM.png",name:"Quandam",resources:1,influence:1,bonus:""},planet48:{type:"cultural",img:"/imperium/img/planets/BREST.png",name:"Brest",resources:3,influence:1,bonus:""},planet49:{type:"hazardous",img:"/imperium/img/planets/HIRAETH.png",name:"Hiraeth",resources:1,influence:1,bonus:""},planet50:{type:"cultural",img:"/imperium/img/planets/FIREHOLE.png",name:"Firehole",resources:3,influence:0,bonus:""},planet51:{type:"industrial",img:"/imperium/img/planets/QUARTIL.png",name:"Quartil",resources:3,influence:1,bonus:""},planet52:{type:"hazardous",img:"/imperium/img/planets/YODERUX.png",name:"Yoderux",resources:3,influence:1,bonus:""},planet53:{type:"homeworld",img:"/imperium/img/planets/JOL.png",name:"Jol",resources:1,influence:2,bonus:""},planet54:{type:"homeworld",img:"/imperium/img/planets/NAR.png",name:"Nar",resources:2,influence:3,bonus:""},planet55:{type:"homeworld",img:"/imperium/img/planets/ARCHION-REX.png",name:"Archion Rex",resources:2,influence:3,bonus:""},planet56:{type:"homeworld",img:"/imperium/img/planets/ARCHION-TAO.png",name:"Archion Tao",resources:1,influence:1,bonus:""},planet57:{type:"homeworld",img:"/imperium/img/planets/EARTH.png",name:"Earth",resources:4,influence:2,bonus:""},planet58:{type:"homeworld",img:"/imperium/img/planets/ARTIZZ.png",name:"Artizz",resources:4,influence:1,bonus:""},planet59:{type:"cultural",img:"/imperium/img/planets/STARTIDE.png",name:"Startide",resources:2,influence:0,bonus:""},planet60:{type:"industrial",img:"/imperium/img/planets/GIANTS-DRINK.png",name:"Giant's Drink",resources:1,influence:1,bonus:""},planet61:{type:"hazardous",img:"/imperium/img/planets/MIRANDA.png",name:"Miranda",resources:0,influence:2,bonus:""},planet62:{type:"industrial",img:"/imperium/img/planets/EBERBACH.png",name:"Eberbach",resources:2,influence:1,bonus:""},planet63:{type:"hazardous",img:"/imperium/img/planets/OTHO.png",name:"Otho",resources:1,influence:2,bonus:""},planet64:{type:"hazardous",img:"/imperium/img/planets/PERTINAX.png",name:"Pertinax",resources:2,influence:2,bonus:""},planet65:{type:"cultural",img:"/imperium/img/planets/COTILLARD.png",name:"Cotillard",resources:2,influence:2,bonus:""},planet66:{type:"cultural",img:"/imperium/img/planets/DOMINIC.png",name:"Dominic",resources:3,influence:1,bonus:""},planet67:{type:"industrial",img:"/imperium/img/planets/PESTULON.png",name:"Pestulon",resources:1,influence:1,bonus:"yellow"},planet68:{type:"hazardous",img:"/imperium/img/planets/XIAO-ZUOR.png",name:"Xiao Zuor",resources:1,influence:3,bonus:""},planet69:{type:"hazardous",img:"/imperium/img/planets/KROEBER.png",name:"Kroeber",resources:2,influence:0,bonus:""},planet70:{type:"hazardous",img:"/imperium/img/planets/LEGUIN.png",name:"Leguin",resources:0,influence:1,bonus:""},planet71:{type:"cultural",img:"/imperium/img/planets/SIGURD.png",name:"Sigurd's Cradle",resources:1,influence:3,bonus:""},planet72:{type:"cultural",img:"/imperium/img/planets/KLENCORY.png",name:"Klencory",resources:2,influence:2,bonus:""},planet73:{type:"homeworld",img:"/imperium/img/planets/ALTAIR-IV.png",name:"Altair-IV",resources:4,influence:4,bonus:""},planet74:{type:"homeworld",img:"/imperium/img/planets/MUASYM.png",name:"Muasym",resources:4,influence:1,bonus:""},planet75:{type:"homeworld",img:"/imperium/img/planets/SARRON.png",name:"Sarron",resources:1,influence:2,bonus:""},planet76:{type:"homeworld",img:"/imperium/img/planets/REPTILLION.png",name:"Reptillion",resources:2,influence:3,bonus:""}};for(var t in e){e[t].exhausted=0,e[t].locked=0,e[t].owner=-1,e[t].units=[this.totalPlayers],e[t].sector="",e[t].tile="",e[t].idx=-1,e[t].planet="",e[t].hw=0;for(var a=0;a<this.totalPlayers;a++)e[t].units[a]=[]}return e}},{key:"returnSectors",value:function(){var e={sector3:{img:"/imperium/img/sectors/sector3.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector4:{img:"/imperium/img/sectors/sector4.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector5:{img:"/imperium/img/sectors/sector5.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector6:{img:"/imperium/img/sectors/sector6.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector1:{img:"/imperium/img/sectors/sector1.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector2:{img:"/imperium/img/sectors/sector2.png",name:"Empty Space",type:0,hw:0,wormhole:0,mr:0,planets:[]},sector7:{img:"/imperium/img/sectors/sector7.png",name:"Gravity Rift",type:1,hw:0,wormhole:0,mr:0,planets:[]},sector72:{img:"/imperium/img/sectors/sector72.png",name:"Nebula",type:2,hw:0,wormhole:0,mr:0,planets:[]},sector34:{img:"/imperium/img/sectors/sector34.png",name:"Asteroid Field",type:3,hw:0,wormhole:0,mr:0,planets:[]},sector35:{img:"/imperium/img/sectors/sector35.png",name:"Asteroid Field",type:3,hw:0,wormhole:0,mr:0,planets:[]},sector71:{img:"/imperium/img/sectors/sector71.png",name:"Supernova",type:4,hw:0,wormhole:0,mr:0,planets:[]},sector54:{img:"/imperium/img/sectors/sector54.png",name:"Wormhole A",type:0,hw:0,wormhole:1,mr:0,planets:[]},sector56:{img:"/imperium/img/sectors/sector56.png",name:"Wormhole B",type:0,hw:0,wormhole:2,mr:0,planets:[]},sector55:{img:"/imperium/img/sectors/sector55.png",name:"Yoderux",type:0,hw:0,wormhole:1,mr:0,planets:["planet52"]},sector57:{img:"/imperium/img/sectors/sector57.png",name:"Quartil",type:0,hw:0,wormhole:2,mr:0,planets:["planet51"]},sector8:{img:"/imperium/img/sectors/sector8.png",name:"Crystalis / Troth",type:0,hw:0,wormhole:0,mr:0,planets:["planet1","planet2"]},sector9:{img:"/imperium/img/sectors/sector9.png",name:"Londrak / Citadel",type:0,hw:0,wormhole:0,mr:0,planets:["planet3","planet4"]},sector10:{img:"/imperium/img/sectors/sector10.png",name:"Belvedyr / Shriva",type:0,hw:0,wormhole:0,mr:0,planets:["planet5","planet6"]},sector11:{img:"/imperium/img/sectors/sector11.png",name:"Zondor / Calthrex",type:0,hw:0,wormhole:0,mr:0,planets:["planet7","planet8"]},sector12:{img:"/imperium/img/sectors/sector12.png",name:"Soundra-IV / Vigor",type:0,hw:0,wormhole:0,mr:0,planets:["planet9","planet10"]},sector15:{img:"/imperium/img/sectors/sector15.png",name:"Granton / Harkon",type:0,hw:0,wormhole:0,mr:0,planets:["planet15","planet16"]},sector16:{img:"/imperium/img/sectors/sector16.png",name:"New Illia / Lazaks Curse",type:0,hw:0,wormhole:0,mr:0,planets:["planet17","planet18"]},sector18:{img:"/imperium/img/sectors/sector18.png",name:"Siren's End / Riftview",type:0,hw:0,wormhole:0,mr:0,planets:["planet21","planet22"]},sector19:{img:"/imperium/img/sectors/sector19.png",name:"Broughton / Fjordra",type:0,hw:0,wormhole:0,mr:0,planets:["planet23","planet24"]},sector20:{img:"/imperium/img/sectors/sector20.png",name:"Singharta / Nova Klondike",type:0,hw:0,wormhole:0,mr:0,planets:["planet25","planet26"]},sector22:{img:"/imperium/img/sectors/sector22.png",name:"Hoth",type:0,hw:0,wormhole:0,mr:0,planets:["planet29"]},sector25:{img:"/imperium/img/sectors/sector25.png",name:"Gravity's Edge",type:0,hw:0,wormhole:0,mr:0,planets:["planet32"]},sector26:{img:"/imperium/img/sectors/sector26.png",name:"Populax",type:0,hw:0,wormhole:0,mr:0,planets:["planet33"]},sector27:{img:"/imperium/img/sectors/sector27.png",name:"Old Moultour",type:0,hw:0,wormhole:0,mr:0,planets:["planet34"]},"new-byzantium":{img:"/imperium/img/sectors/sector28.png",name:"New Byzantium",type:0,hw:0,wormhole:0,mr:1,planets:["new-byzantium"]},sector29:{img:"/imperium/img/sectors/sector29.png",name:"Outerant",type:0,hw:0,wormhole:0,mr:0,planets:["planet36"]},sector31:{img:"/imperium/img/sectors/sector31.png",name:"Craw Populi",type:0,hw:0,wormhole:0,mr:0,planets:["planet38"]},sector32:{img:"/imperium/img/sectors/sector32.png",name:"Yssari-II",type:0,hw:0,wormhole:0,mr:0,planets:["planet39"]},sector38:{img:"/imperium/img/sectors/sector38.png",name:"Lorstruck / Industryl",type:0,hw:0,wormhole:0,mr:0,planets:["planet41","planet42"]},sector39:{img:"/imperium/img/sectors/sector39.png",name:"Mechanix / Hearthslough",type:0,hw:0,wormhole:0,mr:0,planets:["planet43","planet44"]},sector40:{img:"/imperium/img/sectors/sector40.png",name:"Aandor / Incarth",type:0,hw:0,wormhole:0,mr:0,planets:["planet46","planet45"]},sector41:{img:"/imperium/img/sectors/sector41.png",name:"Hope's Lure",type:0,hw:0,wormhole:0,mr:0,planets:["planet40"]},sector42:{img:"/imperium/img/sectors/sector42.png",name:"Quandam",type:0,hw:0,wormhole:0,mr:0,planets:["planet47"]},sector43:{img:"/imperium/img/sectors/sector43.png",name:"Brest",type:0,hw:0,wormhole:0,mr:0,planets:["planet48"]},sector44:{img:"/imperium/img/sectors/sector44.png",name:"Hiraeth",type:0,hw:0,wormhole:0,mr:0,planets:["planet49"]},sector58:{img:"/imperium/img/sectors/sector58.png",name:"Startide",type:0,hw:0,wormhole:0,mr:0,planets:["planet59"]},sector59:{img:"/imperium/img/sectors/sector59.png",name:"Giant's Drink",type:0,hw:0,wormhole:0,mr:0,planets:["planet60"]},sector60:{img:"/imperium/img/sectors/sector60.png",name:"Miranda",type:0,hw:0,wormhole:0,mr:0,planets:["planet61"]},sector62:{img:"/imperium/img/sectors/sector62.png",name:"Otho",type:0,hw:0,wormhole:0,mr:0,planets:["planet63"]},sector65:{img:"/imperium/img/sectors/sector65.png",name:"Dominic",type:0,hw:0,wormhole:0,mr:0,planets:["planet66"]},sector67:{img:"/imperium/img/sectors/sector67.png",name:"Xiao-Zuor",type:0,hw:0,wormhole:0,mr:0,planets:["planet68"]},sector69:{img:"/imperium/img/sectors/sector69.png",name:"Sigurd's Cradle",type:0,hw:0,wormhole:0,mr:0,planets:["planet71"]},sector24:{img:"/imperium/img/sectors/sector24.png",name:"Sector 24",type:0,hw:0,wormhole:0,mr:0,planets:["planet31"]},sector66:{img:"/imperium/img/sectors/sector66.png",name:"Sector 66",type:0,hw:0,wormhole:0,mr:0,planets:["planet67"]},sector50:{img:"/imperium/img/sectors/sector50.png",name:"Jol Nar Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet53","planet54"]},sector51:{img:"/imperium/img/sectors/sector51.png",name:"XXCha Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet55","planet56"]},sector52:{img:"/imperium/img/sectors/sector52.png",name:"Sol Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet57"]},sector53:{img:"/imperium/img/sectors/sector53.png",name:"Sardaak Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet58"]},sector74:{img:"/imperium/img/sectors/sector74.png",name:"Yin Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet73"]},sector75:{img:"/imperium/img/sectors/sector75.png",name:"Ysarril Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet76","planet75"]},sector76:{img:"/imperium/img/sectors/sector76.png",name:"Muaat Homeworld",type:0,hw:1,wormhole:0,mr:0,planets:["planet74"]}};for(var t in e){e[t].units=[this.totalPlayers],e[t].activated=[this.totalPlayers],e[t].sector="",e[t].tile="";for(var a=0;a<this.totalPlayers;a++)e[t].units[a]=[],e[t].activated[a]=0}return e}},{key:"addWormholesToBoardTiles",value:function(e){var t=[];for(var a in this.game.sectors)0!=this.game.sectors[a].wormhole&&t.push(a);for(var r in e)if(this.game.board[r]){var n=this.game.board[r].tile;if(0!=this.game.sectors[n].wormhole)for(var i=0;i<t.length;i++)if(this.game.state.wormholes_adjacent||this.game.state.temporary_wormholes_adjacent){if(t[i]!=n&&0!=this.game.sectors[n].wormhole&&0!=this.game.sectors[t[i]].wormhole)for(var s in e)this.game.board[s]&&this.game.board[s].tile==t[i]&&(e[r].neighbours.includes(s)||e[r].neighbours.push(s))}else if(t[i]!=n&&this.game.sectors[n].wormhole==this.game.sectors[t[i]].wormhole)for(var o in e)this.game.board[o]&&this.game.board[o].tile==t[i]&&(e[r].neighbours.includes(o)||e[r].neighbours.push(o))}return e}},{key:"returnBoardTiles",value:function(){var e={"1_1":{neighbours:["1_2","2_1","2_2"]},"1_2":{neighbours:["1_1","1_3","2_2","2_3"]},"1_3":{neighbours:["1_2","1_4","2_3","2_4"]},"1_4":{neighbours:["1_3","2_4","2_5"]},"2_1":{neighbours:["1_1","2_2","3_1","3_2"]},"2_2":{neighbours:["1_1","1_2","2_1","2_3","3_2","3_3"]},"2_3":{neighbours:["1_2","1_3","2_2","2_4","3_3","3_4"]},"2_4":{neighbours:["1_3","1_4","2_3","2_5","3_4","3_5"]},"2_5":{neighbours:["1_4","2_4","3_5","3_6"]},"3_1":{neighbours:["2_1","3_2","4_1","4_2"]},"3_2":{neighbours:["2_1","2_2","3_1","3_3","4_2","4_3"]},"3_3":{neighbours:["2_2","2_3","3_2","3_4","4_3","4_4"]},"3_4":{neighbours:["2_3","2_4","3_3","3_5","4_4","4_5"]},"3_5":{neighbours:["2_4","3_4","3_6","4_5","4_6"]},"3_6":{neighbours:["2_5","3_5","4_6","4_7"]},"4_1":{neighbours:["3_1","4_2","5_1"]},"4_2":{neighbours:["3_1","3_2","4_1","4_3","5_1","5_2"]},"4_3":{neighbours:["3_2","3_3","4_2","4_4","5_2","5_3"]},"4_4":{neighbours:["3_3","3_4","4_3","4_5","5_3","5_4"]},"4_5":{neighbours:["3_4","3_5","4_4","4_6","5_4","5_5"]},"4_6":{neighbours:["3_5","3_6","4_5","4_7","5_5","5_6"]},"4_7":{neighbours:["3_6","4_6","5_6"]},"5_1":{neighbours:["4_1","4_2","5_2","6_1"]},"5_2":{neighbours:["4_2","4_3","5_1","5_3","6_1","6_2"]},"5_3":{neighbours:["4_3","4_4","5_2","5_4","6_2","6_3"]},"5_4":{neighbours:["4_4","4_5","5_3","5_5","6_3","6_4"]},"5_5":{neighbours:["4_5","4_6","5_4","5_6","6_4","6_5"]},"5_6":{neighbours:["4_6","4_7","5_5","6_5"]},"6_1":{neighbours:["5_1","5_2","6_2","7_1"]},"6_2":{neighbours:["5_2","5_3","6_1","6_3","7_1","7_2"]},"6_3":{neighbours:["5_3","5_4","6_2","6_4","7_2","7_3"]},"6_4":{neighbours:["5_4","5_5","6_3","6_5","7_3","7_4"]},"6_5":{neighbours:["5_5","5_6","6_4","7_4"]},"7_1":{neighbours:["6_1","6_2","7_2"]},"7_2":{neighbours:["6_2","6_3","7_1","7_3"]},"7_3":{neighbours:["6_3","6_4","7_2","7_4"]},"7_4":{neighbours:["6_4","6_5","7_3"]}};return e}},{key:"returnHomeworldSectors",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;return e<=2?["1_1","4_7"]:e<=3?["1_1","4_7","7_1"]:e<=4?["1_3","3_1","5_6","7_2"]:e<=5?["1_3","3_1","4_7","7_1","7_4"]:e<=6?["1_1","1_4","4_1","4_7","7_1","7_7"]:void 0}},{key:"returnState",value:function(){var e={speaker:1,round:0,turn:1,round_scoring:0,events:{},laws:[],agendas:[],vp_target:14};return this.game.options.game_length&&(e.vp_target=parseInt(this.game.options.game_length)),e.riders=[],e.choices=[],e.assign_hits_queue_instruction="",e.assign_hits_to_cancel="",e.active_player_moved=0,e.agendas_voting_information=[],e.strategy_cards=[],e.strategy_cards_bonus=[],e.stage_i_objectives=[],e.stage_ii_objectives=[],e.secret_objectives=[],e.votes_available=[],e.votes_cast=[],e.voted_on_agenda=[],e.voting_on_agenda=0,e.agendas_per_round=2,e.how_voted_on_agenda=[],e.temporary_assignments=["all"],e.temporary_rerolls=0,e.temporary_adjacency=[],e.wormholes_open=1,e.wormholes_adjacent=0,e.temporary_wormholes_adjacent=0,e.space_combat_round=0,e.space_combat_attacker=-1,e.space_combat_defender=-1,e.space_combat_ships_destroyed_attacker=0,e.space_combat_ships_destroyed_defender=0,e.ground_combat_round=0,e.ground_combat_attacker=-1,e.ground_combat_defender=-1,e.ground_combat_infantry_destroyed_attacker=0,e.ground_combat_infantry_destroyed_defender=0,e.bombardment_against_cultural_planets=1,e.bombardment_against_industrial_planets=1,e.bombardment_against_hazardous_planets=1,e.pds_limit_per_planet=2,e.pds_limit_total=4,e.retreat_cancelled=0,e.activated_sector="",e.bombardment_sector="",e.bombardment_planet_idx="",e.space_combat_sector="",e.ground_combat_sector="",e.ground_combat_planet_idx="",e}},{key:"returnEventObjects",value:function(e){for(var t=[],a=[],r=0;r<this.game.players_info.length;r++)for(var n=0;n<this.game.players_info[r].tech.length;n++)null!=this.tech[this.game.players_info[r].tech[n]]&&(a.includes(this.game.players_info[r].tech[n])||(t.push(this.tech[this.game.players_info[r].tech[n]]),a.push(this.game.players_info[r].tech[n])));for(var i in this.promissary_notes)t.push(this.promissary_notes[i]);for(var s=0;s<this.game.players_info.length;s++)null!=this.factions[this.game.players_info[s].faction]&&t.push(this.factions[this.game.players_info[s].faction]);for(var o=0;o<this.game.state.laws.length;o++)this.game.state.laws[o].agenda&&this.agenda_cards[this.game.state.laws[o].agenda].name&&t.push(this.agenda_cards[this.game.state.laws[o].agenda]);for(var c in this.action_cards)t.push(this.action_cards[c]);for(var l in this.secret_objectives)t.push(this.secret_objectives[l]);return t}},{key:"addEvents",value:function(e){return null==e.handleGameLoop&&(e.handleGameLoop=function(e,t,a){return 1}),null==e.initialize&&(e.initialize=function(e,t){return 0}),null==e.gainPlanet&&(e.gainPlanet=function(e,t,a){return 1}),null==e.gainPromissary&&(e.gainPromissary=function(e,t,a){return 1}),null==e.losePromissary&&(e.losePromissary=function(e,t,a){return 1}),null==e.gainTechnology&&(e.gainTechnology=function(e,t,a){return 1}),null==e.gainActionCards&&(e.gainActionCards=function(e,t,a){return 1}),null==e.gainFleetSupply&&(e.gainFleetSupply=function(e,t,a){return a}),null==e.gainTradeGoods&&(e.gainTradeGoods=function(e,t,a){return a}),null==e.gainCommodities&&(e.gainCommodities=function(e,t,a){return a}),null==e.gainFleetSupply&&(e.gainFleetSupply=function(e,t,a){return a}),null==e.gainStrategyCard&&(e.gainStrategyCard=function(e,t,a){return a}),null==e.gainCommandTokens&&(e.gainCommandTokens=function(e,t,a){return a}),null==e.gainStrategyTokens&&(e.gainStrategyTokens=function(e,t,a){return a}),null==e.losePlanet&&(e.losePlanet=function(e,t,a){return 1}),null==e.upgradeUnit&&(e.upgradeUnit=function(e,t,a){return a}),null==e.unitDestroyed&&(e.unitDestroyed=function(e,t,a){return a}),null==e.unitHit&&(e.unitHit=function(e,t,a){return a}),null==e.onNewRound&&(e.onNewRound=function(e,t,a){return 0}),null==e.onNewTurn&&(e.onNewTurn=function(e,t,a){return 0}),null==e.spaceCombatRoundEnd&&(e.spaceCombatRoundEnd=function(e,t,a,r){return 1}),null==e.antiFighterBarrageEventTriggers&&(e.antiFighterBarrageEventTriggers=function(e,t,a,r,n){return 0}),null==e.antiFighterBarrageEvent&&(e.antiFighterBarrageEvent=function(e,t,a,r,n){return 1}),null==e.groundCombatRoundEnd&&(e.groundCombatRoundEnd=function(e,t,a,r,n){return 1}),null==e.postProduction&&(e.postProduction=function(e,t,a){return 1}),null==e.strategyPrimaryEvent&&(e.strategyPrimaryEvent=function(e,t,a){return 0}),null==e.strategySecondaryEvent&&(e.strategySecondaryEvent=function(e,t,a){return 0}),null==e.strategyCardBeforeTriggers&&(e.strategyCardBeforeTriggers=function(e,t,a,r){return 0}),null==e.strategyCardBeforeEvent&&(e.strategyCardBeforeEvent=function(e,t,a,r){return 0}),null==e.strategyCardAfterTriggers&&(e.strategyCardAfterTriggers=function(e,t,a,r){return 0}),null==e.strategyCardAfterEvent&&(e.strategyCardAfterEvent=function(e,t,a,r){return 0}),null==e.playersChooseStrategyCardsBeforeTriggers&&(e.playersChooseStrategyCardsBeforeTriggers=function(e,t){return 0}),null==e.playersChooseStrategyCardsBeforeEvent&&(e.playersChooseStrategyCardsBeforeEvent=function(e,t){return 0}),null==e.playersChooseStrategyCardsAfterTriggers&&(e.playersChooseStrategyCardsAfterTriggers=function(e,t){return 0}),null==e.playersChooseStrategyCardsAfterEvent&&(e.playersChooseStrategyCardsAfterEvent=function(e,t){return 0}),null==e.menuOption&&(e.menuOption=function(e,t,a){return{}}),null==e.menuOptionTriggers&&(e.menuOptionTriggers=function(e,t,a){return 0}),null==e.menuOptionActivated&&(e.menuOptionActivated=function(e,t,a){return 0}),null==e.preAgendaStageTriggers&&(e.preAgendaStageTriggers=function(e,t,a){return 0}),null==e.preAgendaStageEvent&&(e.preAgendaStageEvent=function(e,t,a){return 1}),null==e.postAgendaStageTriggers&&(e.postAgendaStageTriggers=function(e,t,a){return 0}),null==e.postAgendaStageEvent&&(e.postAgendaStageEvent=function(e,t,a){return 1}),null==e.returnAgendaOptions&&(e.returnAgendaOptions=function(e){return["support","oppose"]}),null==e.repealAgenda&&(e.repealAgenda=function(e){return 1}),null==e.onPass&&(e.onPass=function(e,t){return 0}),null==e.modifyPDSRoll&&(e.modifyPDSRoll=function(e,t,a,r){return r}),null==e.modifySpaceCombatRoll&&(e.modifySpaceCombatRoll=function(e,t,a,r){return r}),null==e.modifyGroundCombatRoll&&(e.modifyGroundCombatRoll=function(e,t,a,r){return r}),null==e.modifyUnitHits&&(e.modifyUnitHits=function(e,t,a,r,n,i,s,o){return o}),null==e.modifyCombatRoll&&(e.modifyCombatRoll=function(e,t,a,r,n,i){return i}),null==e.modifyCombatRerolls&&(e.modifyCombatRerolls=function(e,t,a,r,n,i){return i}),null==e.modifyTargets&&(e.modifyTargets=function(e,t,a,r,n){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return i}),null==e.canPlayerScoreVictoryPoints&&(e.canPlayerScoreVictoryPoints=function(e,t){return 0}),null==e.scoreObjective&&(e.scoreObjective=function(e,t){return 1}),null==e.returnPDSUnitsWithinRange&&(e.returnPDSUnitsWithinRange=function(e,t,a,r,n,i){return i}),null==e.playActionCardTriggers&&(e.playActionCardTriggers=function(e,t,a,r){return 0}),null==e.playActionCardEvent&&(e.playActionCardEvent=function(e,t,a,r){return 0}),null==e.playActionCard&&(e.playActionCard=function(e,t,a,r){return 1}),null==e.playStrategyCardPrimaryTriggers&&(e.playStrategyCardPrimaryTriggers=function(e,t,a){return 0}),null==e.playStrategyCardPrimaryEvent&&(e.playStrategyCardPrimaryEvent=function(e,t,a){return 0}),null==e.playStrategyCardSecondaryTriggers&&(e.playStrategyCardSecondaryTriggers=function(e,t,a){return 0}),null==e.playStrategyCardSecondaryEvent&&(e.playStrategyCardSecondaryEvent=function(e,t,a){return 0}),null==e.activateSystemTriggers&&(e.activateSystemTriggers=function(e,t,a,r){return 0}),null==e.activateSystemEvent&&(e.activateSystemEvent=function(e,t,a,r){return 0}),null==e.pdsSpaceAttackTriggers&&(e.pdsSpaceAttackTriggers=function(e,t,a,r){return 0}),null==e.pdsSpaceAttackEvent&&(e.pdsSpaceAttackEvent=function(e,t,a,r){return 0}),null==e.pdsSpaceDefenseTriggers&&(e.pdsSpaceDefenseTriggers=function(e,t,a,r){return 0}),null==e.pdsSpaceDefenseEvent&&(e.pdsSpaceDefenseEvent=function(e,t,a,r){return 0}),null==e.spaceCombatTriggers&&(e.spaceCombatTriggers=function(e,t,a){return 0}),null==e.spaceCombatEvent&&(e.spaceCombatEvent=function(e,t,a){return 0}),null==e.bombardmentTriggers&&(e.bombardmentTriggers=function(e,t,a,r,n){return 0}),null==e.bombardmentEvent&&(e.bombardmentEvent=function(e,t,a,r,n){return 0}),null==e.planetaryDefenseTriggers&&(e.planetaryDefenseTriggers=function(e,t,a,r){return 0}),null==e.planetaryDefenseEvent&&(e.planetaryDefenseEvent=function(e,t,a,r){return 0}),null==e.groundCombatTriggers&&(e.groundCombatTriggers=function(e,t,a,r){return 0}),null==e.groundCombatEvent&&(e.groundCombatEvent=function(e,t,a,r){return 0}),null==e.playerEndTurnTriggers&&(e.playerEndTurnTriggers=function(e,t){return 0}),null==e.playerEndTurnEvent&&(e.playerEndTurnEvent=function(e,t){return 0}),e}},{key:"returnFaction",value:function(e){return null==this.game.players_info[e-1]||null==this.game.players_info[e-1]?"Unknown":this.returnFactionName(this,e)}},{key:"returnFactionNickname",value:function(e){return null==this.game.players_info[e-1]||null==this.game.players_info[e-1]?"Unknown":this.returnFactionNameNickname(this,e)}},{key:"returnFactionName",value:function(e,t){return e.returnFactions()[e.game.players_info[t-1].faction].name}},{key:"returnFactionNameNickname",value:function(e,t){return e.returnFactions()[e.game.players_info[t-1].faction].nickname}},{key:"returnPlayerHomeworld",value:function(e){return this.returnFactions()[this.game.players_info[e-1].faction].homeworld}},{key:"returnSpeaker",value:function(){return this.returnFactions()[this.game.players_info[this.game.state.speaker-1].faction].name}},{key:"returnSectorName",value:function(e){return this.game.sectors[this.game.board[e].tile].name}},{key:"returnPlanetName",value:function(e,t){return this.returnSectorAndPlanets(e).p[t].name}},{key:"returnPlayersWithHighestVP",value:function(){for(var e=0,t=[],a=this.game.players_info,r=0;r<a.length;r++)a[r].vp>e&&(e=a[r].vp);for(var n=0;n<a.length;n++)a[n].vp==e&&t.push(n+1);return t}},{key:"returnPlayersWithLowestVP",value:function(){for(var e=1e3,t=[],a=this.game.players_info,r=0;r<a.length;r++)a[r].vp<e&&(e=a[r].vp);for(var n=0;n<a.length;n++)a[n].vp==e&&t.push(n+1);return t}},{key:"returnNameOfUnknown",value:function(e){return null!=this.tech[e]?this.tech[e].name:null!=this.strategy_cards[e]?this.strategy_cards[e].name:null!=this.game.planets[e]?this.game.planets[e].name:null!=this.agenda_cards[e]?this.agenda_cards[e].name:null!=this.action_cards[e]?this.action_cards[e].name:null!=this.stage_i_objectives[e]?this.stage_i_objectives[e].name:null!=this.stage_ii_objectives[e]?this.stage_ii_objectives[e].name:null!=this.secret_objectives[e]?this.secret_objectives[e].name:null!=this.promissary_notes[e]?this.promissary_notes[e].name:e}},{key:"returnNameFromIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==e?"":0==e.indexOf("planet")&&this.game.planets[e]?this.game.planets[e].name:0==e.indexOf("sector")&&this.game.sectors[e]?this.game.sectors[e].sector:e}},{key:"returnActiveAgenda",value:function(){for(var e=this.game.queue.length-1;e>=0;e--){var t=this.game.queue[e].split("\t");if("agenda"==t[0])return t[1]}return""}},{key:"returnPlayerFleet",value:function(e){var t={fighters:0,infantry:0,carriers:0,cruisers:0,destroyers:0,dreadnaughts:0,flagship:0,warsuns:0,pds:0,spacedocks:0};for(var a in this.game.sectors)if(this.game.sectors[a].units[e-1])for(var r in this.game.sectors[a].units[e-1]){var n=this.game.sectors[a].units[e-1][r];"fighter"==n.type&&t.fighters++,"carrier"==n.type&&t.carriers++,"cruiser"==n.type&&t.cruisers++,"destroyer"==n.type&&t.destroyers++,"dreadnaught"==n.type&&t.dreadnaughts++,"flagship"==n.type&&t.flagship++,"warsun"==n.type&&t.warsun++}for(var i in this.game.planets)if(this.game.planets[i].units[e-1])for(var s in this.game.planets[i].units[e-1]){var o=this.game.planets[i].units[e-1][s];"infantry"==o.type&&t.infantry++,"spacedock"==o.type&&t.spacedock++,"pds"==o.type&&t.pds++}return t}},{key:"isPlayerOverCapacity",value:function(e,t){var a=this.returnShipsOverCapacity(e,t),r=this.returnFightersWithoutCapacity(e,t);return a>0||r>0?1:0}},{key:"returnSpareFleetSupplyInSector",value:function(e,t){for(var a=this.returnSectorAndPlanets(t),r=this.game.players_info[e-1].fleet_supply,n=0,i=0;i<a.s.units[e-1].length;i++){var s=a.s.units[e-1][i];"destroyer"==s.type&&n++,"carrier"==s.type&&n++,"cruiser"==s.type&&n++,"dreadnaught"==s.type&&n++,"flagship"==s.type&&n++,"warsun"==s.type&&n++,s.type}return r-n>0?r-n:0}},{key:"returnShipsOverCapacity",value:function(e,t){for(var a=this.returnSectorAndPlanets(t),r=this.game.players_info[e-1].fleet_supply,n=0,i=0;i<a.s.units[e-1].length;i++){var s=a.s.units[e-1][i];s.capacity,this.returnRemainingCapacity(s),"destroyer"==s.type&&n++,"carrier"==s.type&&n++,"cruiser"==s.type&&n++,"dreadnaught"==s.type&&n++,"flagship"==s.type&&n++,"warsun"==s.type&&n++,s.type}return n>r?n-r:0}},{key:"returnFightersWithoutCapacity",value:function(e,t){for(var a=this.returnSectorAndPlanets(t),r=this.game.players_info[e-1].fleet_supply,n=0,i=0,s=0,o=0,c=0;c<a.s.units[e-1].length;c++){var l=a.s.units[e-1][c];o+=l.capacity,n+=this.returnRemainingCapacity(l),"destroyer"==l.type&&i++,"carrier"==l.type&&i++,"cruiser"==l.type&&i++,"dreadnaught"==l.type&&i++,"flagship"==l.type&&i++,"warsun"==l.type&&i++,"fighter"==l.type&&s++}for(var u=0;u<a.p.length;u++)for(var d=0;d<a.p[u].units[e-1].length;d++)"spacedock"===a.p[u].units[e-1][d].type&&(s-=3)<0&&(s=0);return this.doesPlayerHaveTech(e,"fighter-ii")&&s+i-n>r?s-(n+(r-i)):s>o?s-o:0}},{key:"checkForVictory",value:function(){for(var e=0;e<this.game.players_info.length;e++)if(this.game.players_info[e].vp>=this.game.state.vp_target)return this.updateStatus("Game Over: "+this.returnFaction(e+1)+" has reached 14 VP"),1;return 0}},{key:"returnSectorsWherePlayerCanRetreat",value:function(e,t){t.indexOf("_")>-1&&(t=this.game.board[t].tile);for(var a=[],r=this.returnAdjacentSectors(t),n=0;n<r.length;n++){var i=0;this.doesSectorContainPlayerShips(e,r[n])&&!this.doesSectorContainNonPlayerShips(e,r[n])&&(i=1),this.doesSectorContainPlanetOwnedByPlayer(r[n],e)&&!this.doesSectorContainNonPlayerShips(e,r[n])&&(i=1),1==i&&a.push(r[n])}return a}},{key:"canPlayerRetreat",value:function(e,t,a,r){for(var n=this.returnAdjacentSectors(r),i=0;i<n.length;i++){if(this.doesSectorContainPlayerShips(e,n[i])&&!this.doesSectorContainNonPlayerShips(e,n[i]))return 1;if(this.doesSectorContainPlanetOwnedByPlayer(n[i],e)&&!this.doesSectorContainNonPlayerShips(e,n[i]))return 1}return 0}},{key:"canPlayerTrade",value:function(e){for(var t=0;t<this.game.players_info.length;t++)if(0==this.game.players_info[t].traded_this_turn&&t+1!=this.game.player&&this.arePlayersAdjacent(this.game.player,t+1)){if((this.game.players_info[this.game.player-1].commodities>0||this.game.players_info[this.game.player-1].goods>0)&&(this.game.players_info[t].commodities>0||this.game.players_info[t].goods>0))return 1;if(this.game.players_info[this.game.player-1].promissary_notes.length>0||this.game.players_info[t].promissary_notes.length>0)return 1}return 0}},{key:"canPlayerProduceFlagship",value:function(e){for(var t in this.game.sectors)if(this.game.sectors[t])for(var a=0;a<this.game.sectors[t].units[e-1].length;a++)if("flagship"===this.game.sectors[t].units[e-1][a].type)return 0;return 1}},{key:"canPlayerPlayStrategyCard",value:function(e){for(var t=0;t<this.game.players_info[e-1].strategy.length;t++)if(!this.game.players_info[e-1].strategy_cards_played.includes(this.game.players_info[e-1].strategy[t]))return 1;return 0}},{key:"canPlayerPass",value:function(e){return 1==this.canPlayerPlayStrategyCard(e)?0:1}},{key:"canPlayerPlayActionCard",value:function(e){return this.returnPlayerActionCards(this.game.player).length>0?1:0}},{key:"exhaustPlayerResearchTechnologyPrerequisites",value:function(e){var t=this.game.players_info[this.game.player-1].tech;if(t.includes(e))return 0;for(var a=JSON.parse(JSON.stringify(this.tech[e].prereqs)),r=this.tech[e].faction,n=this.tech[e].type,i=0;i<t.length;i++)if(this.tech[t[i]])for(var s=this.tech[t[i]].color,o=0;o<a.length;o++)a[o]==s&&(a.splice(o,1),o=a.length);if(1==this.game.players_info[this.game.player-1].permanent_blue_tech_prerequisite)for(var c=0;c<a.length;c++)"blue"==a[c]&&(a.splice(c,1),c=a.length);if(1==this.game.players_info[this.game.player-1].permanent_green_tech_prerequisite)for(var l=0;l<a.length;l++)"green"==a[l]&&(a.splice(l,1),l=a.length);if(1==this.game.players_info[this.game.player-1].permanent_red_tech_prerequisite)for(var u=0;u<a.length;u++)"red"==a[u]&&(a.splice(u,1),u=a.length);if(1==this.game.players_info[this.game.player-1].permanent_yellow_tech_prerequisite)for(var d=0;d<a.length;d++)"yellow"==a[d]&&(a.splice(d,1),d=a.length);if(1==this.game.players_info[this.game.player-1].temporary_blue_tech_prerequisite)for(var p=0;p<a.length;p++)"blue"==a[p]&&(a.splice(p,1),p=a.length,this.game.players_info[this.game.player-1].temporary_blue_tech_prerequisite=0);if(1==this.game.players_info[this.game.player-1].temporary_green_tech_prerequisite)for(var h=0;h<a.length;h++)"green"==a[h]&&(a.splice(h,1),h=a.length,this.game.players_info[this.game.player-1].temporary_green_tech_prerequisite=0);if(1==this.game.players_info[this.game.player-1].temporary_red_tech_prerequisite)for(var f=0;f<a.length;f++)"red"==a[f]&&(a.splice(f,1),f=a.length,this.game.players_info[this.game.player-1].temporary_red_tech_prerequisite=0);if(1==this.game.players_info[this.game.player-1].temporary_yellow_tech_prerequisite)for(var m=0;m<a.length;m++)"yellow"==a[m]&&(a.splice(m,1),m=a.length,this.game.players_info[this.game.player-1].temporary_yellow_tech_prerequisite=0);a.length>=1&&this.game.players_info[this.game.player-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade>=1&&a.splice(0,1),a.length>=1&&this.game.players_info[this.game.player-1].temporary_ignore_number_of_tech_prerequisites_on_nonunit_upgrade>=1&&(a.splice(0,1),this.game_players_info[this.game.player-1].temporary_ignore_number_of_tech_prerequisities_on_nonunit_upgrade=0);for(var g=this.returnPlayerPlanetTechSkips(this.game.player,1),b=0;b<a.length;b++)for(var y=0;y<g.length;y++)a[b]===g[y].color&&(this.addMove("expend\t"+this.game.player+"\tplanet\t"+g[y].planet),a.splice(b,1),g.splice(y,1),b--,y--);return 0!=a.length||"all"!=r&&r!=this.game.players_info[this.game.player-1].faction||"normal"!=n?0:1}},{key:"canPlayerResearchTechnology",value:function(e){var t=this.game.players_info[this.game.player-1].tech,a=this.game.players_info[this.game.player-1].faction;if(t.includes(e))return 0;if(null==this.tech[e])return console.log("Undefined Technology: "+e),0;var r=JSON.parse(JSON.stringify(this.tech[e].prereqs)),n=this.tech[e].faction,i=this.tech[e].type,s=(this.tech[e].replaces,this.returnPlayerPlanetTechSkips(this.game.player,1));for(var o in this.tech)if(this.tech[o].faction==a&&this.tech[o].replaces==e)return 0;if("ability"==i)return 0;if("special"==i&&n!=this.game.players_info[this.game.player-1].faction)return 0;for(var c=0;c<t.length;c++)if(this.tech[t[c]])for(var l=this.tech[t[c]].color,u=0;u<r.length;u++)r[u]==l&&(r.splice(u,1),u=r.length);if(1==this.game.players_info[this.game.player-1].temporary_blue_tech_prerequisite)for(var d=0;d<r.length;d++)"blue"==r[d]&&(r.splice(d,1),d=r.length);if(1==this.game.players_info[this.game.player-1].temporary_green_tech_prerequisite)for(var p=0;p<r.length;p++)"green"==r[p]&&(r.splice(p,1),p=r.length);if(1==this.game.players_info[this.game.player-1].temporary_red_tech_prerequisite)for(var h=0;h<r.length;h++)"red"==r[h]&&(r.splice(h,1),h=r.length);if(1==this.game.players_info[this.game.player-1].temporary_yellow_tech_prerequisite)for(var f=0;f<r.length;f++)"yellow"==r[f]&&(r.splice(f,1),f=r.length);if(1==this.game.players_info[this.game.player-1].permanent_blue_tech_prerequisite)for(var m=0;m<r.length;m++)"blue"==r[m]&&(r.splice(m,1),m=r.length);if(1==this.game.players_info[this.game.player-1].permanent_green_tech_prerequisite)for(var g=0;g<r.length;g++)"green"==r[g]&&(r.splice(g,1),g=r.length);if(1==this.game.players_info[this.game.player-1].permanent_red_tech_prerequisite)for(var b=0;b<r.length;b++)"red"==r[b]&&(r.splice(b,1),b=r.length);if(1==this.game.players_info[this.game.player-1].permanent_yellow_tech_prerequisite)for(var y=0;y<r.length;y++)"yellow"==r[y]&&(r.splice(y,1),y=r.length);1==r.length&&this.game.players_info[this.game.player-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade>=1&&r.splice(0,1),1==r.length&&this.game.players_info[this.game.player-1].temporary_ignore_number_of_tech_prerequisites_on_nonunit_upgrade>=1&&r.splice(0,1);for(var v=0;v<r.length;v++)for(var _=0;_<s.length;_++)r[v]===s[_].color&&(r.splice(v,1),s.splice(_,1),v--,_--);return 0!=r.length||"all"!=n&&n!=this.game.players_info[this.game.player-1].faction||"normal"!=i&&"special"!=i?0:1}},{key:"returnAvailableVotes",value:function(e){for(var t=this.returnPlayerPlanetCards(e),a=0,r=0;r<t.length;r++)a+=this.game.planets[t[r]].influence;return a}},{key:"returnPlayersLeastDefendedPlanetInSector",value:function(e,t){var a=this.returnSectorAndPlanets(t),r=100,n=0;if(0==a.p.length)return-1;for(var i=0;i<a.p.length;i++)a.p[i].owner==e&&a.p[i].units[e-1].length<r&&(r=a.p[i].units[e-1].length,n=i);return n}},{key:"returnPlayerFleetInSector",value:function(e,t){for(var a=this.returnSectorAndPlanets(t),r="",n=0;n<a.s.units[e-1].length;n++)if(0==a.s.units[e-1][n].destroyed&&(n>0&&(r+=", "),r+=a.s.units[e-1][n].name,a.s.units[e-1][n].storage.length>0)){for(var i=0,s=0,o=0;o<a.s.units[e-1][n].storage.length;o++)"infantry"==a.s.units[e-1][n].storage[o].type&&s++,"fighter"==a.s.units[e-1][n].storage[o].type&&i++;(s>0||i>0)&&(r+=" (",s>0&&(r+=s+"i"),i>0&&(s>0&&(r+=", "),r+=i+"f"),r+=")")}return r}},{key:"returnShipInformation",value:function(e){for(var t=e.name,a=1;a<e.strength;a++)1==a&&(t+=" ("),t+="*",a==e.strength-1&&(t+=")");for(var r=0,n=0,i=0;i<e.storage.length;i++)"infantry"==e.storage[i].type&&n++,"fighter"==e.storage[i].type&&r++;return r+n>0&&(t+=" (",n>0&&(t+=n+"i"),r>0&&(n>0&&(t+=", "),t+=r+"f"),t+=")"),t}},{key:"returnTotalResources",value:function(e){for(var t=this.returnPlayerPlanetCards(e),a=0,r=0;r<t.length;r++)a+=this.game.planets[t[r]].resources;return a+=this.game.players_info[e-1].goods}},{key:"returnTotalInfluence",value:function(e){for(var t=this.returnPlayerPlanetCards(e),a=0,r=0;r<t.length;r++)a+=this.game.planets[t[r]].influence;return a+=this.game.players_info[e-1].goods}},{key:"returnAvailableResources",value:function(e){for(var t=this.returnPlayerUnexhaustedPlanetCards(e),a=0,r=0;r<t.length;r++)a+=this.game.planets[t[r]].resources;return a+=this.game.players_info[e-1].goods}},{key:"returnAvailableInfluence",value:function(e){for(var t=this.returnPlayerUnexhaustedPlanetCards(e),a=0,r=0;r<t.length;r++)a+=this.game.planets[t[r]].influence;return a+=this.game.players_info[e-1].goods}},{key:"returnAvailableTradeGoods",value:function(e){return this.game.players_info[e-1].goods}},{key:"canPlayerActivateSystem",value:function(e){return 1==this.returnSectorAndPlanets(e).s.activated[this.game.player-1]?0:1}},{key:"returnDefender",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.returnSectorAndPlanets(t),n=-1;if(null==a){for(var i=0;i<r.s.units.length;i++)e!=i+1&&r.s.units[i].length>0&&(n=i+1);return n}for(var s=0;s<r.p[a].units.length;s++)e!=s+1&&r.p[a].units[s].length>0&&(n=s+1);return-1==n&&r.p[a].owner!=e?r.p[a].owner:n}},{key:"hasUnresolvedSpaceCombat",value:function(e,t){for(var a=this.returnSectorAndPlanets(t),r=0,n=0,i=0;i<a.s.units.length;i++)if(e!=i+1){if(a.s.units[i].length>0)for(var s=0;s<a.s.units[i].length;s++)0==a.s.units[i][s].destroyed&&(r=1)}else if(a.s.units[i].length>0)for(var o=0;o<a.s.units[i].length;o++)0==a.s.units[i][o].destroyed&&(n=1);return 0==r?0:1==r&&1==n?1:0}},{key:"hasUnresolvedGroundCombat",value:function(e,t,a){for(var r=this.returnSectorAndPlanets(t),n=-1,i=0;i<r.p[a].units.length;i++)r.p[a].units[i].length>0&&i+1!=e&&(n=i+1);return n==e?0:(attacker_forces=-1==e?0:this.returnNumberOfGroundForcesOnPlanet(e,t,a),defender_forces=-1==n?0:this.returnNumberOfGroundForcesOnPlanet(n,t,a),attacker_forces>0&&defender_forces>0?1:0)}},{key:"isPlanetExhausted",value:function(e){return 1==this.game.planets[e].exhausted?1:0}},{key:"returnAdjacentSectors",value:function(e){e.indexOf("_")>-1&&(e=this.game.board[e].tile);var t=[],a=this.addWormholesToBoardTiles(this.returnBoardTiles());for(var r in a)if(this.game.board[r]){var n=this.returnSectorAndPlanets(r);if(n&&n.s&&n.s.sector==e)for(var i=0;i<a[r].neighbours.length;i++){var s=this.returnSectorAndPlanets(a[r].neighbours[i]);s&&s.s&&t.push(s.s.sector)}}return t}},{key:"areSectorsAdjacent",value:function(e,t){var a=this.addWormholesToBoardTiles(this.returnBoardTiles());if(""===e)return 0;if(""===t)return 0;var r=this.returnSectorAndPlanets(e),n=this.returnSectorAndPlanets(t),i=r.s.tile,s=n.s.tile;if(""===i||""===s)return 0;if(a[i].neighbours.includes(s))return 1;if(a[s].neighbours.includes(i))return 1;for(var o=0;o<this.game.state.temporary_adjacency.length;o++){if(temporary_adjacency[o][0]==e&&temporary_adjacency[o][1]==t)return 1;if(temporary_adjacency[o][0]==t&&temporary_adjacency[o][1]==e)return 1}return 0}},{key:"arePlayersAdjacent",value:function(e,t){for(var a=this.returnSectorsWithPlayerUnits(e),r=this.returnSectorsWithPlayerUnits(t),n=0;n<a.length;n++)for(var i=0;i<r.length;i++){if(a[n]===r[i])return 1;if(this.areSectorsAdjacent(a[n],r[i]))return 1}return 0}},{key:"isPlayerAdjacentToSector",value:function(e,t){for(var a=this.returnSectorsWithPlayerUnits(e),r=0;r<a.length;r++){if(a[r]==t)return 1;if(this.areSectorsAdjacent(a[r],t))return 1}return 0}},{key:"isPlayerShipAdjacentToSector",value:function(e,t){for(var a=this.returnSectorsWithPlayerShips(e),r=0;r<a.length;r++){if(a[r]==t)return 1;if(this.areSectorsAdjacent(a[r],t))return 1}return 0}},{key:"returnPlanetsOnBoard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];for(var a in this.game.planets)""!=this.game.planets[a].tile&&(null==e||e(this.game.planets[a]))&&t.push(a);return t}},{key:"returnSectorsOnBoard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[];for(var a in this.game.sectors)this.game.sectors[a].tile&&(null==e||e(this.game.sectors[a]))&&t.push(a);return t}},{key:"returnSectorsWithPlayerShips",value:function(e){var t=[];for(var a in this.game.sectors)this.doesSectorContainPlayerShips(e,a)&&t.push(a);return t}},{key:"returnSectorsWithPlayerUnits",value:function(e){var t=[];for(var a in this.game.sectors)this.doesSectorContainPlayerUnits(e,a)&&t.push(a);return t}},{key:"canPlayerProduceInSector",value:function(e,t){if(1==this.game.players_info[e-1].may_player_produce_without_spacedock)return 1;for(var a=this.returnSectorAndPlanets(t),r=0;r<a.p.length;r++)for(var n=0;n<a.p[r].units[e-1].length;n++)if("spacedock"==a.p[r].units[e-1][n].type)return 1;return 0}},{key:"canPlayerLandInfantry",value:function(e,t){for(var a=0,r=[],n=0,i=this.returnInfantryInSpace(e,t),s=this.returnSectorAndPlanets(t),o=0;o<s.p.length;o++)s.p[o].owner==this.game.player&&(a++,r.push(this.returnInfantryOnPlanet(s.p[o])),n+=this.returnInfantryOnPlanet(s.p[o]));if(a>1){for(var c=0;c<r.length;c++)if(r[c]<=n)return 1}else if(a>0&&i)return 1;return 0}},{key:"canPlayerInvadePlanet",value:function(e,t){for(var a=this.returnSectorAndPlanets(t),r=0,n=0,i=0,s=0;s<a.p.length;s++)0==a.p[s].locked&&a.p[s].owner!=e&&(n=1);if(0==n)return 0;for(var o=0;o<a.s.units[e-1].length;o++){for(var c=a.s.units[e-1][o],l=0;l<c.storage.length;l++)"infantry"==c.storage[l].type&&(i+=1);c.capacity>0&&(r=1)}if(i>0)return 1;if(1==r)for(var u=0;u<a.p.length;u++)for(var d=0;d<a.p[u].units[e-1].length;d++)if("infantry"==a.p[u].units[e-1][d].type)return 1;return 0}},{key:"returnSpeakerFirstOrder",value:function(){for(var e=this.game.state.speaker,t=[],a=0;a<this.game.players.length;a++){var r=a+e;r>this.game.players.length&&(r-=this.game.players.length),t.push(r)}return t}},{key:"returnSpeakerOrder",value:function(){for(var e=this.game.state.speaker,t=[],a=0;a<this.game.players.length;a++){var r=a+e+1;r>this.game.players.length&&(r-=this.game.players.length),t.push(r)}return t}},{key:"returnInitiativeOrder",value:function(){var e=this.returnStrategyCards(),t=[],a=[];for(var r in e)t[r]=e[r].rank;for(var n=0;n<this.game.players_info.length;n++){a[n]=1e5;for(var i=0;i<this.game.players_info[n].strategy.length;i++){var s=t[this.game.players_info[n].strategy[i]];s<a[n]&&(a[n]=s)}}for(var o=a.length,c=[],l=0;l<o;l++){for(var u=1e5,d=0,p=0;p<a.length;p++)a[p]<u&&(u=a[p],d=p);a[d]=999999,c.push(d+1)}return c}},{key:"returnSectorsWithinHopDistance",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=[],n=[],i=[],s=[],o=this.addWormholesToBoardTiles(this.returnBoardTiles());r.push(e),n.push(0),i.push(""),s.push(1);for(var c=0;c<t;c++)for(var l=JSON.parse(JSON.stringify(r)),u=JSON.parse(JSON.stringify(i)),d=0;d<l.length;d++){var p="";if("rift"==u[d]&&(p="rift"),null!=this.game.board[l[d]]){var h=1,f=this.game.sectors[this.game.board[l[d]].tile].type;if(null==a||(1==this.game.players_info[a-1].move_through_sectors_with_opponent_ships||1==this.game.players_info[a-1].temporary_move_through_sectors_with_opponent_ships||this.doesSectorContainNonPlayerShips(a,l[d])&&(h=-1,console.log("now that we are here we can see sector: "+r[d]+" is unhoppable"),s[d]=-1),-1==s[d]&&(h=-1),3==f&&0==this.game.players_info[a-1].fly_through_asteroids&&(h=0),4==f&&0==this.game.players_info[a-1].fly_through_supernovas&&(h=0),2==f&&0==this.game.players_info[a-1].fly_through_nebulas&&(h=0)),1==f&&(p="rift",h=1),l[d]==e&&(h=1),-1==h){for(var g=o[l[d]].neighbours,b=0;b<g.length;b++)if(r.includes(g[b])){for(var y=1,v=0;v<r.length;v++)r[v]==g[b]&&i[v]==p&&(y=0);1==y&&(r.push(g[b]),s.push(-1),"rift"===p?n.push(c):n.push(c+1),i.push(p))}else r.push(g[b]),s.push(-1),"rift"===p?n.push(c):n.push(c+1),i.push(p);for(var _=0;_<this.game.state.temporary_adjacency.length;_++){if(l[d]==this.game.state.temporary_adjacency[_][0])if(r.includes(this.game.state.temporary_adjacency[_][1])){for(var w=1,x=0;x<r.length;x++)r[x]==this.game.state.temporary_adjacency[_][1]&&i[x]==p&&(w=0);1==w&&(r.push(g[m]),s.push(-1),"rift"===p?n.push(c):n.push(c+1),i.push(p))}else r.push(this.game.state.temporary_adjacency[_][1]),s.push(-1),"rift"===p?n.push(c):n.push(c+1),i.push(p);if(l[d]==this.game.state.temporary_adjacency[_][1])if(r.includes(this.game.state.temporary_adjacency[_][0])){for(var k=1,S=0;S<r.length;S++)r[S]==this.game.state.temporary_adjacency[_][0]&&i[S]==p&&(k=0);1==k&&(r.push(this.game.state.temporary_adjacency[_][0]),s.push(-1),"rift"===p?n.push(c):n.push(c+1),i.push(p))}else r.push(this.game.state.temporary_adjacency[_][0]),"rift"===p?n.push(c):n.push(c+1),s.push(-1),i.push(p)}}if(1==h){for(var P=o[l[d]].neighbours,E=0;E<P.length;E++)if(r.includes(P[E])){for(var C=1,A=0;A<r.length;A++)r[A]==P[E]&&(i[A]==p&&(C=0),-1==s[A]&&(C=1));1==C&&(r.push(P[E]),s.push(1),"rift"===p?n.push(c):n.push(c+1),i.push(p))}else r.push(P[E]),s.push(1),"rift"===p?n.push(c):n.push(c+1),i.push(p);for(var M=0;M<this.game.state.temporary_adjacency.length;M++){if(l[d]==this.game.state.temporary_adjacency[M][0])if(r.includes(this.game.state.temporary_adjacency[M][1])){for(var T=1,j=0;j<r.length;j++)r[j]==this.game.state.temporary_adjacency[M][1]&&i[j]==p&&(T=0);1==T&&(r.push(P[m]),s.push(1),"rift"===p?n.push(c):n.push(c+1),i.push(p))}else r.push(this.game.state.temporary_adjacency[M][1]),s.push(1),"rift"===p?n.push(c):n.push(c+1),i.push(p);if(l[d]==this.game.state.temporary_adjacency[M][1])if(r.includes(this.game.state.temporary_adjacency[M][0])){for(var O=1,D=0;D<r.length;D++)r[D]==this.game.state.temporary_adjacency[M][0]&&i[D]==p&&(O=0);1==O&&(r.push(this.game.state.temporary_adjacency[M][0]),s.push(1),"rift"===p?n.push(c):n.push(c+1),i.push(p))}else r.push(this.game.state.temporary_adjacency[M][0]),s.push(1),"rift"===p?n.push(c):n.push(c+1),i.push(p)}}}}for(var I=0;I<r.length;I++)if("rift"==i[I]&&n[I]==t&&null!=this.game.board[r[I]]){for(var R=o[r[I]].neighbours,B=0;B<R.length;B++)r.includes(R[B])||(s.push(1),r.push(R[B]),n.push(t),i.push("rift"));for(var q=0;q<this.game.state.temporary_adjacency.length;q++)r[I]==this.game.state.temporary_adjacency[q][0]&&(r.includes(this.game.state.temporary_adjacency[q][1])||(r.push(this.game.state.temporary_adjacency[q][1]),n.push(t),i.push("rift"),s.push(1))),r[I]==this.game.state.temporary_adjacency[q][1]&&(r.includes(this.game.state.temporary_adjacency[q][0])||(r.push(this.game.state.temporary_adjacency[q][0]),n.push(t),i.push("rift"),s.push(1)))}for(var L=r.length,N=0;N<L;N++)if("rift"===i[N])for(var F=0;F<r.length;F++)r[N]===r[F]&&n[N]>=n[F]&&N!=F&&(r.splice(N,1),s.splice(N,1),n.splice(N,1),i.splice(N,1),N--,L--,F=r.length+2);L=r.length;for(var U=0;U<L;U++)if(-1==s[U])for(var $=0;$<r.length;$++)r[U]===r[$]&&1==s[$]&&U!=$&&n[U]>=n[$]&&(r.splice(U,1),s.splice(U,1),n.splice(U,1),i.splice(U,1),U--,L--,$=r.length+2);var z={sectors:r,distance:n,hazards:i,hoppable:s};return z}},{key:"returnPDSOnPlanet",value:function(e){for(var t=0,a=0;a<e.units.length;a++)for(var r=0;r<e.units[a].length;r++)"pds"==e.units[a][r].type&&t++;return t}},{key:"returnSpaceDocksOnPlanet",value:function(e){for(var t=0,a=0;a<e.units.length;a++)for(var r=0;r<e.units[a].length;r++)"spacedock"==e.units[a][r].type&&t++;return t}},{key:"returnOpponentInSector",value:function(e,t){for(var a=this.returnSectorAndPlanets(t),r=0;r<a.s.units.length;r++)if(r+1!=e&&a.s.units[r].length>0)return r+1;return-1}},{key:"returnOpponentOnPlanet",value:function(e,t){for(var a=0;a<t.units.length;a++)if(a+1!=e&&t.units[a].length>0)return a+1;return-1}},{key:"returnPlayerInfantryOnPlanet",value:function(e,t){for(var a=0,r=0;r<t.units[e-1].length;r++)"infantry"==t.units[e-1][r].type&&a++;return a}},{key:"returnNonPlayerInfantryOnPlanet",value:function(e,t){for(var a=0,r=0;r<t.units.length;r++)if(r+1!=e)for(var n=0;n<t.units[r].length;n++)"infantry"==t.units[r][n].type&&a++;return a}},{key:"returnInfantryOnPlanet",value:function(e){for(var t=0,a=0;a<e.units.length;a++)for(var r=0;r<e.units[a].length;r++)"infantry"==e.units[a][r].type&&t++;return t}},{key:"returnInfantryInUnit",value:function(e){for(var t=0,a=0;a<e.storage.length;a++)"infantry"==e.storage[a].type&&t++;return t}},{key:"returnInfantryInSpace",value:function(e,t){for(var a=this.returnSectorAndPlanets(t),r=0,n=0;n<a.s.units[e-1].length;n++)if(0==a.s.units[e-1][n].destroyed&&a.s.units[e-1][n].storage.length>0)for(var i=0;i<a.s.units[e-1][n].storage.length;i++)"infantry"==a.s.units[e-1][n].storage[i].type&&r++;return r}},{key:"doesPlanetHavePDS",value:function(e){if(null==e.units){var t=this.game.planets[e];if(!t.units)return 0;e=t}for(var a=0;a<e.units.length;a++)for(var r=0;r<e.units[a].length;r++)if("pds"==e.units[a][r].type)return 1;return 0}},{key:"doesPlanetHaveSpaceDock",value:function(e){null==e.units&&(e=this.game.planets[e]);for(var t=0;t<e.units.length;t++)for(var a=0;a<e.units[t].length;a++)if("spacedock"==e.units[t][a].type)return 1;return 0}},{key:"doesPlanetHaveInfantry",value:function(e){null==e.units&&(e=this.game.planets[e]);for(var t=0;t<e.units.length;t++)for(var a=0;a<e.units[t].length;a++)if("infantry"==e.units[t][a].type)return 1;return 0}},{key:"doesPlanetHaveUnits",value:function(e){null==e.units&&(e=this.game.planets[e]);for(var t=0;t<e.units.length;t++)if(e.units[t].length>0)return 1;return 0}},{key:"doesPlanetHavePlayerInfantry",value:function(e,t){null==e.units&&(e=this.game.planets[e]);for(var a=0;a<e.units[t-1].length;a++)if("infantry"==e.units[i][a].type)return 1;return 0}},{key:"doesPlanetHavePlayerSpaceDock",value:function(e,t){for(var a=0;a<e.units[t-1].length;a++)if("spacedock"==e.units[i][a].type)return 1;return 0}},{key:"doesPlanetHavePlayerPDS",value:function(e,t){for(var a=0;a<e.units[t-1].length;a++)if("pds"==e.units[i][a].type)return 1;return 0}},{key:"doesPlayerHavePromissary",value:function(e,t){return this.game.players_info[e-1].promissary_notes.includes(t)?1:0}},{key:"returnPlayablePromissaryArray",value:function(e,t){for(var a=[],r=0;r<this.game.players_info.length;r++)r+1!=e&&a.push(this.game.players_info[r].faction+"-"+t);return a}},{key:"doesPlayerHaveRider",value:function(e){for(var t=0;t<this.game.state.riders.length;t++)if(this.game.state.riders[t].player==e)return 1;if(this.game.turn)for(var a=0;a<this.game.turn.length;a++)if(this.game.turn[a]){var r=this.game.turn[a].split("\t");if("rider"==r[0]&&r[1]==this.game.player)return 1}return 0}},{key:"doesPlayerHaveInfantryOnPlanet",value:function(e,t,a){return this.returnSectorAndPlanets(t).p[a].units[e-1].length>0?1:0}},{key:"doesPlayerHaveAntiFighterBarrageInSector",value:function(e,t){if(-1==e)return 0;var a=this.returnSectorAndPlanets(t);if(a.s.units[e-1].length>0)for(var r=0;r<a.s.units[e-1].length;r++)if(null==a.s.units[e-1][r])a.s.units[e-1].splice(r,1),r--;else if(0==a.s.units[e-1][r].destroyed&&"destroyer"==a.s.units[e-1][r].type)return 1;return 0}},{key:"doesPlayerHaveShipsInSector",value:function(e,t){if(-1==e)return 0;var a=this.returnSectorAndPlanets(t);if(a.s.units[e-1].length>0)for(var r=0;r<a.s.units[e-1].length;r++)if(null==a.s.units[e-1][r])a.s.units[e-1].splice(r,1),r--;else if(0==a.s.units[e-1][r].destroyed)return 1;return 0}},{key:"doesPlayerHaveUnitsInSector",value:function(e,t){if(-1==e)return 0;var a=this.returnSectorAndPlanets(t);if(a.s.units[e-1].length>0)for(var r=0;r<a.s.units[e-1].length;r++)if(null==a.s.units[e-1][r])a.s.units[e-1].splice(r,1),r--;else if(0==a.s.units[e-1][r].destroyed)return 1;for(var n=0;n<a.p.length;n++)if(a.p[n].units[e-1].length>0)return 1;return 0}},{key:"doesPlayerHaveUnitOnBoard",value:function(e,t){for(var a in this.game.sectors)for(var r=0;r<this.game.sectors[a].units[e-1].length;r++)if(this.game.sectors[a].units[e-1][r].type==t)return 1;for(var n in this.game.planets)for(var i=0;i<this.game.planets[n].units[e-1].length;i++)if(this.game.planets[n].units[e-1][i].type==t)return 1;return 1}},{key:"doesPlayerHavePDSUnitsWithinRange",value:function(e,t,a){this.returnSectorAndPlanets(a);var r,n,i=this.returnSectorsWithinHopDistance(a,1);r=i.sectors,n=i.distance;var s=this.returnPDSWithinRange(e,a,r,n),o=this.returnEventObjects();for(var c in o)for(var l=0;l<this.game.players_info.length;l++)s=o[c].returnPDSUnitsWithinRange(this,l+1,e,t,a,s);for(var u=0;u<s.length;u++)if(s[u].owner==t){if(s[u].sector==a)return 1;if(s[u].range>0)return 1}return 0}},{key:"returnPDSWithinRangeOfSector",value:function(e,t,a){for(var r,n,i=this.returnSectorAndPlanets(a),s=this.returnSectorsWithinHopDistance(a,1),o=-1,c=0;c<this.game.players_info.length;c++)i.s.units[c].length>0&&c+1!=e&&(o=c+1);r=s.sectors,n=s.distance;var l=this.returnPDSWithinRange(e,a,r,n),u=this.returnEventObjects();for(var d in u)for(var p=0;p<this.game.players_info.length;p++)l=u[d].returnPDSUnitsWithinRange(this,p+1,e,o,a,l);return l}},{key:"returnPDSWithinRange",value:function(e,t,a,r){this.returnEventObjects();for(var n=[],i=0;i<a.length;i++){for(var s=this.returnSectorAndPlanets(a[i]),o=0;o<this.game.players_info.length;o++)if(this.game.players_info[o].experimental_battlestation===a[i]){var c={};c.range=this.returnUnit("pds",o+1).range,c.combat=this.returnUnit("pds",o+1).combat,c.owner=o+1,c.sector=a[i],c.unit=this.returnUnit("pds",o+1),n.push(c)}if(null!=s)for(var l=0;l<s.p.length;l++)for(var u=0;u<s.p[l].units.length;u++)if(u!=e-1)for(var d=0;d<s.p[l].units[u].length;d++)if("pds"==s.p[l].units[u][d].type&&s.p[l].units[u][d].range>=r[i]){var p={};p.range=s.p[l].units[u][d].range,p.combat=s.p[l].units[u][d].combat,p.owner=u+1,p.sector=a[i],p.unit=s.p[l].units[u][d],n.push(p)}}return n}},{key:"returnNumberOfGroundForcesOnPlanet",value:function(e,t,a){if(-1==e)return 0;for(var r=this.returnSectorAndPlanets(t),n=0,i=0;i<r.p[a].units[e-1].length;i++)r.p[a].units[e-1][i].strength>0&&0==r.p[a].units[e-1][i].destroyed&&"infantry"===r.p[a].units[e-1][i].type&&0==r.p[a].units[e-1][i].destroyed&&n++;return n}},{key:"returnSectorAndPlanets",value:function(e){var t=null;if(null==this.game.board[e]){if(!this.game.sectors[e])return;t=this.game.sectors[e]}else{if(null==this.game.board[e].tile)return;t=this.game.sectors[this.game.board[e].tile]}if(null==t)return null;for(var a=[],r=0;r<t.planets.length;r++)a[r]=this.game.planets[t.planets[r]];return{s:t,p:a}}},{key:"saveSystemAndPlanets",value:function(e){for(var t in this.game.sectors)if(this.game.sectors[t].img==e.s.img){this.game.sectors[t]=e.s;for(var a=0;a<this.game.sectors[t].planets.length;a++)this.game.planets[this.game.sectors[t].planets[a]]=e.p[a]}}},{key:"returnOtherPlayerHomeworldPlanets",value:function(){arguments.length>0&&void 0!==arguments[0]||this.game.player;for(var e=[],t=0;t<this.game.players_info.length;t++)if(this.game.player!=t+1)for(var a=this.returnPlayerHomeworldPlanets(t+1),r=0;r<a.length;r++)e.push(a);return e}},{key:"returnPlayerHomeworldSector",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e&&(e=this.game.player);var t=this.game.board[this.game.players_info[e-1].homeworld].tile;return t}},{key:"returnPlayerHomeworldPlanets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e&&(e=this.game.player);var t=this.game.board[this.game.players_info[e-1].homeworld].tile;return this.game.sectors[t].planets}},{key:"returnPlayerPlanetTechSkips",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],r=this.returnPlayerPlanetCards(e,t),n=0;n<r.length;n++)this.game.planets[r[n]].bonus.indexOf("blue")>-1&&a.push({color:"blue",planet:r[n]}),this.game.planets[r[n]].bonus.indexOf("red")>-1&&a.push({color:"red",planet:r[n]}),this.game.planets[r[n]].bonus.indexOf("yellow")>-1&&a.push({color:"yellow",planet:r[n]}),this.game.planets[r[n]].bonus.indexOf("green")>-1&&a.push({color:"green",planet:r[n]});return a}},{key:"returnPlayerUnexhaustedPlanetCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==e&&(e=this.game.player),this.returnPlayerPlanetCards(e,1)}},{key:"returnPlayerExhaustedPlanetCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==e&&(e=this.game.player),this.returnPlayerPlanetCards(e,2)}},{key:"returnPlayerPlanetCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;null==e&&parseInt(this.game.player);var a=[];for(var r in this.game.planets)this.game.planets[r].owner==e&&(0==t&&a.push(r),1==t&&0==this.game.planets[r].exhausted&&a.push(r),2==t&&1==this.game.planets[r].exhausted&&a.push(r));return a}},{key:"returnPlayerActionCards",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];null==e&&(e=this.game.player);for(var a=[],r=0;r<this.game.deck[1].hand.length;r++)(0==t.length||t.includes(this.action_cards[this.game.deck[1].hand[r]].type))&&(this.game.players_info[e-1].action_cards_played.includes(this.game.deck[1].hand[r])||a.push(this.game.deck[1].hand[r]));return a}},{key:"returnPlayerObjectivesScored",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];null==e&&(e=this.game.player);for(var a=[],r=0;r<this.game.players_info[e-1].objectives_scored.length;r++){var n=this.game.players_info[e-1].objectives_scored[r];void 0!==this.stage_i_objectives[n]&&(0==t.length?a.push(this.stage_i_objectives_objectives[n]):t.includes("stage_i_objectives")&&a.push(this.stage_i_objectives[n])),void 0!==this.stage_ii_objectives[n]&&(0==t.length?a.push(this.stage_ii_objectives_objectives[n]):t.includes("stage_ii_objectives")&&a.push(this.stage_ii_objectives[n])),void 0!==this.secret_objectives[n]&&(0==t.length?a.push(this.secret_objectives_objectives[n]):t.includes("secret_objectives")&&a.push(this.secret_objectives[n]))}return a}},{key:"returnPlayerObjectives",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];null==e&&(e=this.game.player);var a=[];if(this.game.player==e)for(var r=0;r<this.game.deck[5].hand.length;r++)(0==t.length||t.includes("secret_objectives"))&&a.push(this.secret_objectives[this.game.deck[5].hand[r]]);for(var n=0;n<this.game.state.stage_i_objectives.length;n++)(0==t.length||t.includes("stage_i_objectives"))&&a.push(this.stage_i_objectives[this.game.state.stage_i_objectives[n]]);for(var i=0;i<this.game.state.stage_ii_objectives.length;i++)(0==t.length||t.includes("stage_ii_objectives"))&&a.push(this.stage_ii_objectives[this.game.state.stage_ii_objectives[i]]);return a}},{key:"returnPlanetCard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.game.planets[e];if(null==t)return'<div class="noncard">'+cardname+"</div>";var a='\n      <div class="planetcard" style="background-image: url(\''.concat(t.img,"');\">\n      </div>\n    ");return a}},{key:"returnStrategyCard",value:function(e){var t=this.returnStrategyCards()[e];return null==t?'<div class="noncard">'+e+"</div>":'\n      <div class="strategycard" style="background-image: url(\''.concat(t.img,'\');">\n        <div class="strategycard_name">').concat(t.name,"</div>\n      </div>\n    ")}},{key:"returnActionCard",value:function(e){this.returnActionCards()[e]}},{key:"doesSectorContainPlanetOwnedByPlayer",value:function(e,t){var a=this.returnSectorAndPlanets(e);if(!a)return 0;for(var r=0;r<a.p.length;r++)if(a.p[r].owner==t)return 1;return 0}},{key:"doesSectorContainUnit",value:function(e,t){var a=this.returnSectorAndPlanets(e);if(!a)return 0;for(var r=0;r<a.s.units.length;r++)for(var n=0;n<a.s.units[r].length;n++)if(a.s.units[r][n].type==t)return 1;return 0}},{key:"doesSectorContainPlayerShip",value:function(e,t){return this.doesSectorContainPlayerShips(e,t)}},{key:"doesSectorContainPlayerShips",value:function(e,t){var a=this.returnSectorAndPlanets(t);return a&&a.s.units[e-1].length>0?1:0}},{key:"doesSectorContainShips",value:function(e){var t=this.returnSectorAndPlanets(e);if(!t)return 0;for(var a=0;a<t.s.units.length;a++)if(t.s.units[a].length>0)return 1;return 0}},{key:"doesSectorContainPlayerUnits",value:function(e,t){var a=this.returnSectorAndPlanets(t);if(!a)return 0;if(a.s.units[e-1].length>0)return 1;for(var r=0;r<a.p.length;r++)if(a.p[r].units[e-1].length>0)return 1;return 0}},{key:"doesSectorContainNonPlayerUnit",value:function(e,t,a){for(var r=0;r<this.game.players_info.length;r++)if(r+1!=e&&this.doesSectorContainPlayerUnit(r+1,t,a))return 1;return 0}},{key:"doesSectorContainNonPlayerShips",value:function(e,t){for(var a=0;a<this.game.players_info.length;a++)if(a+1!=e&&this.doesSectorContainPlayerShips(a+1,t))return 1;return 0}},{key:"doesSectorContainPlayerUnit",value:function(e,t,a){var r=this.returnSectorAndPlanets(t);if(!r)return 0;for(var n=0;n<r.s.units[e-1].length;n++)if(r.s.units[e-1][n].type==a)return 1;for(var i=0;i<r.p.length;i++)for(var s=0;s<r.p[i].units[e-1].length;s++)if(r.p[i].units[e-1][s].type==a)return 1;return 0}},{key:"canPlayerMoveShipsIntoSector",value:function(e,t){if(0==this.game.players_info[e-1].move_into_supernovas&&4==this.returnSectorAndPlanets(t).s.type)return 0;if(!this.doesPlayerHaveTech(e,"antimass-deflectors")&&3==this.returnSectorAndPlanets(t).s.type)return 0;var a,r,n,i=[],s={max_hops:2};s.ship_move_bonus=this.game.players_info[this.game.player-1].ship_move_bonus+this.game.players_info[this.game.player-1].temporary_ship_move_bonus,s.fleet_move_bonus=this.game.players_info[this.game.player-1].fleet_move_bonus+this.game.players_info[this.game.player-1].temporary_fleet_move_bonus,s.ships_and_sectors=[],s.stuff_to_move=[],s.stuff_to_load=[],s.distance_adjustment=0,s.max_hops+=s.ship_move_bonus,s.max_hops+=s.fleet_move_bonus;var o=this.returnSectorsWithinHopDistance(t,s.max_hops,this.game.player);a=o.sectors,i=o.distance,r=o.hazards,n=o.hoppable;for(var c=0;c<i.length;c++)s.ship_move_bonus>0&&i[c]--,s.fleet_move_bonus>0&&i[c]--;return s.ship_move_bonus>0&&(s.distance_adjustment+=s.ship_move_bonus),s.fleet_move_bonus>0&&(s.distance_adjustment+=s.fleet_move_bonus),s.ships_and_sectors=this.returnShipsMovableToDestinationFromSectors(t,a,i,r,n),s.ships_and_sectors.length>0?1:0}},{key:"resetTechBonuses",value:function(){for(var e=this.returnTechnology(),t=0;t<this.game.players_info.length;t++)for(var a=0;a<this.game.players_info[t].tech.length;a++)e[this.game.players_info[t].tech[a]].onNewTurn()}},{key:"givePromissary",value:function(e,t,a){this.game.players_info[t-1].promissary_notes.push(a);for(var r=0;r<this.game.players_info[e-1].promissary_notes.length;r++)this.game.players_info[e-1].promissary_notes[r]===a&&(this.game.players_info[e-1].promissary_notes.splice(r,1),r=this.game.players_info[e-1].promissary_notes.length);for(var n=this.returnEventObjects(),i=0;i<n.length;i++)n[i].gainPromissary(this,t,a),n[i].losePromissary(this,e,a)}},{key:"handleFleetSupply",value:function(e,t){var a=this.returnSectorAndPlanets(t);t.indexOf("_")>0&&(t=a.s.sector);var r=this.returnShipsOverCapacity(e,t),n=this.returnFightersWithoutCapacity(e,t);if(r>0)return e==this.game.player&&(this.addMove("destroy_ships\t"+e+"\t"+r+"\t"+t+"\t1"),this.endTurn()),0;if(n>0){for(var i=this.returnSectorAndPlanets(t),s=0,o=0;o<i.s.units[e-1].length&&s<n;o++)"fighter"==i.s.units[e-1][o].type&&(i.s.units[e-1].splice(o,1),o--,s++);this.saveSystemAndPlanets(i)}return 1}},{key:"handleActionCardLimit",value:function(e){return this.game.players_info[e-1].action_cards_in_hand>this.game.players_info[e-1].action_card_limit?(this.game.player==e&&this.playerDiscardActionCards(this.game.players_info[e-1].action_cards_in_hand-this.game.players_info[e-1].action_card_limit),0):1}},{key:"resetSpaceUnitTemporaryModifiers",value:function(e){for(var t=this.returnSectorAndPlanets(e),a=0;a<t.s.units.length;a++)for(var r=0;r<t.s.units[a].length;r++)this.resetTemporaryModifiers(t.s.units[a][r])}},{key:"resetGroundUnitTemporaryModifiers",value:function(e,t){for(var a=this.returnSectorAndPlanets(e),r=0;r<a.p[t].units.length;r++)for(var n=0;n<a.p[t].units[r].length;n++)this.resetTemporaryModifiers(a.p[t].units[r][n])}},{key:"resetTargetUnits",value:function(){for(var e=0;e<this.game.players_info.length;e++)this.game.players_info[e].target_units=[]}},{key:"resetTurnVariables",value:function(e){this.game.players_info[e-1].planets_conquered_this_turn=[],this.game.players_info[e-1].may_player_produce_without_spacedock=0,this.game.players_info[e-1].may_player_produce_without_spacedock_production_limit=0,this.game.players_info[e-1].may_player_produce_without_spacedock_cost_limit=0,this.game.players_info[e-1].temporary_immune_to_pds_fire=0,this.game.players_info[e-1].temporary_immune_to_planetary_defense=0,this.game.players_info[e-1].temporary_space_combat_roll_modifier=0,this.game.players_info[e-1].temporary_ground_combat_roll_modifier=0,this.game.players_info[e-1].temporary_pds_combat_roll_modifier=0,this.game.players_info[e-1].temporary_bombardment_combat_roll_modifier=0,this.game.players_info[e-1].temporary_move_through_sectors_with_opponent_ships=0,this.game.players_info[e-1].temporary_fleet_move_bonus=0,this.game.players_info[e-1].temporary_ship_move_bonus=0,this.game.players_info[e-1].ground_combat_dice_reroll=0,this.game.players_info[e-1].space_combat_dice_reroll=0,this.game.players_info[e-1].pds_combat_dice_reroll=0,this.game.players_info[e-1].bombardment_combat_dice_reroll=0,this.game.players_info[e-1].combat_dice_reroll=0,this.game.players_info[e-1].experimental_battlestation="",this.game.players_info[e-1].lost_planet_this_round=-1,this.game.players_info[e-1].temporary_opponent_cannot_retreat=0;for(var t=0;t<this.game.players_info.length;t++)this.game.players_info[t].traded_this_turn=0;this.game.state.temporary_adjacency=[],this.game.state.temporary_wormhole_adjacency=0,this.game.state.retreat_cancelled=0}},{key:"deactivateSectors",value:function(){for(var e in this.game.sectors)for(var t=0;t<this.totalPlayers;t++){this.game.sectors[e].activated[t]=0;try{this.updateSectorGraphics(e)}catch(e){}}}},{key:"exhaustPlanet",value:function(e){this.game.planets[e].exhausted=1}},{key:"unexhaustPlanet",value:function(e){this.game.planets[e].exhausted=0}},{key:"updatePlanetOwner",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;e.indexOf("_")>-1&&(e=this.game.board[e].tile);var r="",n=this.returnSectorAndPlanets(e),i=a,s=n.p[t].owner;"new-byzantium"==e&&-1==n.p[t].owner&&-1!=a&&(this.game.players_info[a-1].vp+=1,this.updateLog(this.returnFaction(a)+" gains 1 VP for first conquest of New Byzantium"),this.updateLeaderboard());for(var o=0;o<n.p[t].units.length&&-1==a;o++)n.p[t].units[o].length>0&&(i=o+1);for(var c in-1!=i&&(n.p[t].owner=i,n.p[t].exhausted=1),this.game.planets)this.game.planets[c].name===n.p[t].name&&(r=c);if(s!=i){this.game.players_info[i-1].planets_conquered_this_turn.push(n.p[t].name);var l=this.returnEventObjects();for(var u in l)l[u].gainPlanet(this,i,r),-1!=s&&l[u].losePlanet(this,s,r)}this.saveSystemAndPlanets(n),this.updateSectorGraphics(e)}},{key:"eliminateDestroyedUnitsInSector",value:function(e,t){if(!((e=parseInt(e))<0)){var a=this.returnSectorAndPlanets(t),r=0;if(null!=a&&null!=a){for(var n=a.s.units[e-1].length,i=0;i<n;i++)null==a.s.units[e-1][i]?a.s.units[e-1].splice(i,1):1!=a.s.units[e-1][i].destroyed&&0!=a.s.units[e-1][i].strength||"spacedock"==a.s.units[e-1][i].type||"pds"==a.s.units[e-1][i].type||(r=1,a.s.units[e-1].splice(i,1),i--,n--);if(a.p)for(var s=0;s<a.p.length;s++)for(var o=a.p[s].units[e-1].length,c=0;c<o;c++)null==a.p[s].units[e-1][c]?a.p[s].units[e-1].splice(c,1):1!=a.p[s].units[e-1][c].destroyed&&0!=a.p[s].units[e-1][c].strength||"spacedock"==a.p[s].units[e-1][c].type||"pds"==a.p[s].units[e-1][c].type||(r=1,a.p[s].units[e-1].splice(c,1),c--,o--);1==r&&this.saveSystemAndPlanets(a)}}}},{key:"eliminateDestroyedUnitsOnPlanet",value:function(e,t,a){if(!(e<0)){for(var r=this.returnSectorAndPlanets(t),n=0;n<r.p[a].units[e-1].length;n++)null==r.p[a].units[e-1][n]?r.p[a].units[e-1].splice(n,1):1!=r.p[a].units[e-1][n].destroyed&&0!=r.p[a].units[e-1][n].strength||"spacedock"==r.p[a].units[e-1][n].type||"pds"==r.p[a].units[e-1][n].type||(r.p[a].units[e-1].splice(n,1),n--);this.saveSystemAndPlanets(r)}}},{key:"assignHitsToGroundForces",value:function(e,t,a,r,n){for(var i=this.returnEventObjects(),s=0,o=this.returnSectorAndPlanets(a),c=0;c<n;c++){for(var l=-1,u=-1,d=0;d<o.p[r].units[t-1].length;d++){var p=o.p[r].units[t-1][d];null!=p&&(p.strength>0&&-1==u&&0==p.destroyed&&(l=o.p[r].units[t-1].strength,u=d),p.strength>0&&p.strength<l&&-1!=u&&(l=p.strength,u=d))}if(u>-1&&(o.p[r].units[t-1][u].strength--,o.p[r].units[t-1][u].strength<=0))for(z_index in s++,o.p[r].units[t-1][u].destroyed=1,i)o.p[r].units[t-1][u]=i[z_index].unitDestroyed(this,e,o.p[r].units[t-1][u])}return this.saveSystemAndPlanets(o),s}},{key:"assignHitsToSpaceFleet",value:function(e,t,a,r){for(var n=this.returnEventObjects(),i=0,s=this.returnSectorAndPlanets(a),o=0;o<r;o++){for(var c=-1,l=-1,u=0;u<s.s.units[t-1].length;u++){var d=s.s.units[t-1][u];d.strength>0&&-1==l&&0==d.destroyed&&(c=s.s.units[t-1][u].strength,l=u),d.strength>0&&d.strength<c&&-1!=l&&(c=d.strength,l=u)}if(-1!=l&&(s.s.units[t-1][l].strength--,s.s.units[t-1][l].strength<=0))for(z_index in i++,s.s.units[t-1][l].destroyed=1,n)s.s.units[t-1][l]=n[z_index].unitDestroyed(this,e,s.s.units[t-1][l])}return this.saveSystemAndPlanets(s),i}},{key:"displayBoard",value:function(){for(var e in this.game.systems)this.updateSectorGraphics(e);this.addEventsToBoard()}},{key:"addEventsToBoard",value:function(){var e=this,t="",a=0,r=0;try{$(".sector").off(),$(".sector").on("mouseenter",(function(){t=$(this).attr("id"),e.showSector(t)})).on("mouseleave",(function(){t=$(this).attr("id"),e.hideSector(t)})),$(".sector").on("mousedown",(function(e){a=e.clientX,r=e.clientY})),$(".sector").on("mouseup",(function(n){Math.abs(a-n.clientX)>4||Math.abs(r-n.clientY)>4||(t=$(this).attr("id"),e.overlay.showOverlay(e.app,e,e.returnSectorInformationHTML(t)))}))}catch(e){}}},{key:"returnHowToPlayOverlay",value:function(){return'\n\n    <div class="how_to_play_overlay" id="how_to_play_overlay">\n\nPlayers start with 3 command tokens, 2 strategy tokens, and 3 fleet supply:\n\n<p></p>\n\n<img src="/imperium/img/player_tokens.png" class="demo_player_tokens" />\n\n<p></p>\n\nEvery turn players may:\n\n  <ol class="demo_ordered_list">\n    <li>Spend a command token to activate a sector</li>\n      <ul style="margin-left:20px">\n        <li style="list-style:none">- to move ships into the sector</li>\n        <li style="list-style:none">- to produce in the sector</li>\n      </ul>\n    <li>Play a strategy card</li>\n    <li>Pass</li>\n  </ol>\n\n<img src="/imperium/img/planets/BROUGHTON.png" class="demo_planet_card" />\n\n<p></p>\n\nPlanets give you <span class="resources_box">resources</span> and <span class="influence_box">influence</span>.\n\n<p></p>\n\n<div style="padding-left:30px;padding-right:30px;">\n<div class="how_to_play_resources_entry">\n<b>RESOURCES:</b>\n<p></p>\nuse resources to build units and research technology.\n</div>\n\n<div class="how_to_play_resources_entry">\n<b>INFLUENCE:</b>\n<p></p>\nuse influence to vote on agendas and buy command tokens.\n</div>\n</div>\n\n<h2 style="clear:both;margin-top:35px;">Faction Abilities:</h2>\n\n<img src="/imperium/img/factions/faction_dashboard.png" class="demo_planet_card" />\n\n<p></p>\n\nYour faction dashboard shows your total <span class="resources_box">resources</span> and <span class="influence_box">influence</span>. Also shown are trade goods and commodities:\n\n<div style="padding-left:30px;padding-right:30px;">\n<div class="how_to_play_resources_entry">\n<b>TRADE GOODS:</b>\n<p></p>\ntrade goods can be spent instead of resources or influence.\n</div>\n\n<div class="how_to_play_resources_entry">\n<b>COMMODITIES:</b>\n<p></p>\ncommodities are turned into trade goods by trading them with others.\n</div>\n</div>\n\nClick on any faction for a detailed sheet showing faction tech, planets and special abilities. Every faction is different. \n\n\t</div>\n      </div>\n\n    </div>\n\n    <style type="text/css">\n.resources_box {\n background-color:black;padding:4px;border:1px solid #fff;\n}\n.influence_box {\n  background-color:orange;padding:4px;border:1px solid #fff;\n}\n.demo_ordered_list {\n  margin-left: 30px; \n  font-family: courier;\n  margin-top: 2a0px;\n  margin-bottom: 20px;\n}\n.demo_planet_card {\n  float: right;\n  width: 150px;\n}\n.demo_player_tokens {\n  clear:both;\n  margin-left: auto;\n  margin-right: auto;\n  margin-top: 10px;\n  margin-bottom: 10px;\n  width: 200px;\n  display: inline-block;\n}\n.how_to_play_overlay {\n  padding:30px;\n  width: 800px;\n  max-width: 80vw;\n  max-height: 90vh;\n  font-family: \'orbitron-medium\', helvetica, arial;\n  line-height: 1.7em;\n  font-size: 1.1em;\n  background-image: url(\'/imperium/img/starscape-background4.jpg\');\n  background-size: cover;\n  color: white;\n  overflow-y: scroll;\n  font-size: 1.1em;\n}\n.how_to_play_resources_entry {\n  padding-top: 20px;\n}\n    </style>\n  '}},{key:"returnNewSecretObjectiveOverlay",value:function(e){var t=this.secret_objectives[e];return'\n    <div class="new_secret_objective_overlay" id="new_secret_objective_overlay">\n      <div style="width:100%"><div class="new_secret_objective_overlay_title">New Secret Objective</div></div>\n      <div style="width:100%"><div style="display:inline-block">\n      <div class="objectives_overlay_objectives_card" style="background-image: url('.concat(t.img,')">\n        <div class="objectives_card_name">').concat(t.name,'</div>\n        <div class="objectives_card_content">\n          ').concat(t.text,'\n        <div class="objectives_secret_notice">secret</div>\n      </div>\n      </div></div>\n    </div>\n  ')}},{key:"returnTechOverlay",value:function(){return'<div class="tech_overlay overlay" id="tech_overlay"><img src="/imperium/img/tech_tree.png"></div>'}},{key:"returnSectorInformationHTML",value:function(e){e.indexOf("_")>-1&&(e=this.game.board[e].tile);var t=this.returnSectorAndPlanets(e),a='\n    <div class="system_summary">\n      <div class="system_summary_text">\n  ';a+='<div class="system_summary_sector">',a+=t.s.name,a+="</div>";for(var r="",n=0;n<t.s.units.length;n++)t.s.units[n].length>0&&(r+=this.returnPlayerFleetInSector(n+1,e),n=t.s.units.length);""!=r&&(a+='<div class="system_summary_units">',a+=r,a+="</div>"),a+='\n    <div class="grid-2">\n  ';for(var i=0;i<t.p.length;i++){var s="UNCONTROLLED";-1!=t.p[i].owner&&(s=this.returnFactionNickname(t.p[i].owner)),a+='\n      <div class="system_summary_planet">\n        '.concat(s,"\n        <p style=\"margin-top:10px\" />\n        <div style='clear:both;margin-left:10px;margin-top:6px;'>\n          ").concat(this.returnInfantryOnPlanet(t.p[i])," infantry\n          <br />\n          ").concat(this.returnPDSOnPlanet(t.p[i])," PDS\n          <br />\n          ").concat(this.returnSpaceDocksOnPlanet(t.p[i]),' spacedocks\n        </div>\n      </div>\n      <div class="system_summary_planet_card" style="background-image: url(\'').concat(t.p[i].img,"');\"></div>\n    ")}return a+="\n    </div>\n  </div>\n  "}},{key:"updateCombatLog",value:function(e){for(var t=0,a=0,r=0;r<e.units_firing.length;r++)1==e.reroll[r]&&(t=1),e.modified_roll[r]!=e.unmodified_roll[r]&&(a=1);var n="";n+='<table class="combat_log">',n+="<tr>",n+='<th class="combat_log_th">'.concat(this.returnFactionNickname(e.attacker),"</th>"),n+='<th class="combat_log_th">HP</th>',n+='<th class="combat_log_th">Combat</th>',n+='<th class="combat_log_th">Roll</th>',a&&(n+='<th class="combat_log_th">Modified</th>'),t&&(n+='<th class="combat_log_th">Reroll</th>'),n+='<th class="combat_log_th">Hit</th>',n+="</tr>";for(var i=0;i<e.units_firing.length;i++)n+="<tr>",n+='<td class="combat_log_td">'.concat(e.units_firing[i].name,"</td>"),n+='<td class="combat_log_td">'.concat(e.units_firing[i].strength,"</td>"),n+='<td class="combat_log_td">'.concat(e.hits_on[i],"</td>"),n+='<td class="combat_log_td">'.concat(e.unmodified_roll[i],"</td>"),a&&(n+='<td class="combat_log_td">'.concat(e.modified_roll[i],"</td>")),t&&(n+='<td class="combat_log_td">'.concat(e.reroll[i],"</td>")),n+='<td class="combat_log_td">'.concat(e.hits_or_misses[i],"</td>"),n+="</tr>";n+="</table>",this.updateLog(n)}},{key:"setPlayerActive",value:function(e){$(".dash-faction-status-"+e).css("background-color","green")}},{key:"setPlayerInactive",value:function(e){$(".dash-faction-status-"+e).css("background-color","red")}},{key:"setPlayerActiveOnly",value:function(e){for(var t=1;t<=this.game.players_info.length;t++)e==t?this.setPlayerActive(t):this.setPlayerInactive(t)}},{key:"returnPlanetInformationHTML",value:function(e){var t=e;this.game.planets[e]&&(t=this.game.planets[e]);var a=this.returnInfantryOnPlanet(t),r=this.returnPDSOnPlanet(t),n=this.returnSpaceDocksOnPlanet(t),i="";i=this.game.planets[e].owner>0?"p"+this.game.planets[e].owner:"nowner";var s="";return a>0&&(s+='<div class="planet_infantry_count_label">Infantry</div><div class="planet_infantry_count">'+a+"</div>"),r>0&&(s+='<div class="planet_pds_count_label">PDS</div><div class="planet_pds_count">'+r+"</div>"),n>0&&(s+='<div class="planet_spacedock_count_label">Spacedock</div><div class="planet_spacedock_count">'+n+"</div>"),""!=this.game.planets[e].bonus&&(s+='<div class="planet_tech_label tech_'+this.game.planets[e].bonus+' bold">'+this.game.planets[e].bonus+" TECH</div><div></div>"),s=r+n+a>0||""!=this.game.planets[e].bonus?'<div class="sector_information_planetname '.concat(i,'">').concat(t.name,'</div><div class="sector_information_planet_content">')+s+"</div>":'<div class="sector_information_planetname '.concat(i,'">').concat(t.name,"</div>")}},{key:"returnFactionDashboard",value:function(){for(var e="",t=0;t<this.game.players_info.length;t++)e+='\n\n    <div data-id="'.concat(t+1,'" class="dash-faction p').concat(t+1,'">\n     <div data-id="').concat(t+1,'" class="dash-faction-name bk"></div>\n      <div data-id="').concat(t+1,'" class="dash-faction-info">\n\n        <div data-id="').concat(t+1,'" class="dash-item tooltip dash-item-resources resources">\n          <span data-id="').concat(t+1,'" class="avail"></span>\n          <span data-id="').concat(t+1,'" class="total"></span>\n        </div>\n\n        <div data-id="').concat(t+1,'" class="dash-item tooltip dash-item-influence influence">\n          <span data-id="').concat(t+1,'" class="avail"></span>\n          <span data-id="').concat(t+1,'" class="total"></span>\n        </div>\n\n        <div data-id="').concat(t+1,'" class="dash-item tooltip dash-item-trade trade">\n          <i data-id="').concat(t+1,'" class="fas fa-database pc white-stroke"></i>\n          <div data-id="').concat(t+1,'" id="dash-item-goods" class="dash-item-goods">\n            ').concat(this.game.players_info[t].goods,'\n          </div>\n        </div>\n\n      </div>\n\n      <div data-id="').concat(t+1,'" class="dash-faction-base">\n\t<div data-id="').concat(t+1,'" class="dash-faction-status-').concat(t+1,' dash-faction-status"></div>\n\tcommodities : <span data-id="').concat(t+1,'" class="dash-item-commodities">').concat(this.game.players_info[t].commodities,'</span> / <span data-id="').concat(t+1,'" class="dash-item-commodity-limit">').concat(this.game.players_info[t].commodity_limit,'</span>\n      </div>\n\n      <div data-id="').concat(t+1,'" class="dash-faction-speaker'),this.game.state.speaker==t+1?e+=' speaker">speaker':e+='">',e+="</div>\n    </div>\n    ";return e}},{key:"returnLawsOverlay",value:function(){var e=this.returnAgendaCards(),t='<div class="overlay_laws_container">';if(this.game.state.laws.length>0){t+='<ul style="clear:both;margin-top:10px;">';for(var a=0;a<this.game.state.laws.length;a++)t+='  <li style="background-image: url(\'/imperium/img/agenda_card_template.png\');background-size:cover;" class="overlay_agendacard card option" id="'.concat(a,'"><div class="overlay_agendatitle">').concat(e[this.game.state.laws[a].agenda].name,'</div><div class="overlay_agendacontent">').concat(e[this.game.state.laws[a].agenda].text,'</div><div class="overlay_law_option">').concat(this.returnNameOfUnknown(this.game.state.laws[a].option),"</div></li>");t+="</ul>"}return 0==this.game.state.laws.length&&0==this.game.state.agendas.length&&(t+='<div class="overlay_laws_header">There are no laws in force or agendas up for consideration at this time.</div>'),t+="</div>"}},{key:"returnAgendasOverlay",value:function(){var e=this.returnAgendaCards(),t='<div class="overlay_laws_container">';if(this.game.state.agendas.length>0){t+='<div class="overlay_laws_list">';for(var a=0;a<this.game.state.agendas.length;a++)t+='  <div style="background-image: url(\'/imperium/img/agenda_card_template.png\');" class="overlay_agendacard card option" id="'.concat(a,'"><div class="overlay_agendatitle">').concat(e[this.game.state.agendas[a]].name,'</div><div class="overlay_agendacontent">').concat(e[this.game.state.agendas[a]].text,"</div></div>");t+="</div>"}return 0==this.game.state.laws.length&&0==this.game.state.agendas.length&&(t+='<div class="overlay_laws_header">There are no laws in force or agendas up for consideration at this time.</div>'),t+="</div>"}},{key:"returnStrategyOverlay",value:function(){var e=[],t=[];for(var a in this.strategy_cards){for(var r="not picked",n=-1,i=0,s=0;s<this.game.state.strategy_cards.length;s++)a===this.game.state.strategy_cards[s]&&(i=this.game.state.strategy_cards_bonus[s]);var o="";i>0&&(o='<div class="strategy_card_bonus">    \n        <i class="fas fa-database white-stroke"></i>\n        <span>'.concat(i,"</span>\n      </div>"));for(var c=this.strategy_cards[a],l=0;l<this.game.players_info.length;l++)this.game.players_info[l].strategy.includes(a)&&(r="unplayed",n=l+1,this.game.players_info[l].strategy_cards_played.includes(a)&&(r="played"));var u='\n\t<div class="overlay_strategy_card_box">\n\t  <img class="overlay_strategy_card_box_img" src="/imperium/img/'.concat(c.img,'" style="width:100%" />\n\t  <div class="overlay_strategy_card_text">').concat(c.text,"</div>\n    ");"not picked"!=r&&(u+='\n\t  <div class="strategy_card_state p'.concat(n,'">\n\t    <div class="strategy_card_state_internal bk">').concat(r,"</div>\n          </div>\n       ")),u+="\n          ".concat(o,"\n\t</div>\n    "),t.push(u),e.push(this.strategy_cards[a].rank)}for(var d=[],p=0;t.length>0&&!(++p>100);){for(var h=100,f=-1,m=0;m<e.length;m++)h>e[m]&&(h=e[m],f=m);d.push(t[f]),t.splice(f,1),e.splice(f,1)}var g="";g+='<div class="overlay_strategy_container">';for(var b=0;b<d.length;b++)g+=d[b];return g+="</div>"}},{key:"returnUnitsOverlay",value:function(){var e='<div class="units-overlay-container" style="">',t=[];if(1==this.game.state.round){e+='\n      <div style="width:100%;text-align:center"><div class="units-overlay-title">Starting Units</div></div>\n      <div style="width:100%;text-align:center"><div class="units-overlay-text">check unit and movement properties anytime in the cards menu...</div></div>\n      <div class="unit-table">\n    ';var a=this.returnPlayerFleet(this.game.player);a.carriers>0&&t.push("carrier"),a.cruisers>0&&t.push("cruiser"),a.destroyers>0&&t.push("destroyer"),a.dreadnaughts>0&&t.push("dreadnaughts"),a.warsuns>0&&t.push("warsun"),a.fighters>0&&t.push("fighter"),a.infantry>0&&t.push("infantry"),a.flagships>0&&t.push("flagship"),a.pds>0&&t.push("pds"),a.spacedocks}else{var r=this.game.players_info[this.game.player-1];e+='\n      <div style="width:100%;text-align:center"><div class="units-overlay-title">Your Units</div></div>\n      <div style="width:100%;text-align:center"><div class="units-overlay-text">check available upgrades in your faction overlay...</div></div>\n      <div class="unit-table">\n    ',this.doesPlayerHaveTech(this.game.player,"infantry-ii")?t.push("infantry-ii"):t.push("infantry"),this.doesPlayerHaveTech(this.game.player,"fighter-ii")?t.push("fighter-ii"):t.push("fighter"),this.doesPlayerHaveTech(this.game.player,"destroyer-ii")?t.push("destroyer-ii"):t.push("destroyer"),this.doesPlayerHaveTech(this.game.player,"carrier-ii")?t.push("carrier-ii"):t.push("carrier"),this.doesPlayerHaveTech(this.game.player,"cruiser-ii")?t.push("cruiser-ii"):t.push("cruiser"),this.doesPlayerHaveTech(this.game.player,"dreadnaught-ii")?t.push("dreadnaught-ii"):t.push("dreadnaught"),this.doesPlayerHaveTech(this.game.player,"flagship-ii")?t.push("flagship-ii"):t.push("flagship"),this.doesPlayerHaveTech(this.game.player,"warsun-ii")?t.push("warsun-ii"):1==r.may_produce_warsuns&&t.push("warsun"),this.doesPlayerHaveTech(this.game.player,"spacedock-ii")?t.push("spacedock-ii"):t.push("spacedock"),this.doesPlayerHaveTech(this.game.player,"pds-ii")?t.push("pds-ii"):t.push("pds")}for(var n=0;n<t.length;n++)e+=this.returnUnitTableEntry(t[n]);return e+='\n\n    <div id="close-units-btn" class="button" style="">CONTINUE</div>\n\n  '}},{key:"returnUnitPopup",value:function(e){return'\n\n    <div class="unit_details_popup">\n      '.concat(this.returnUnitPopupEntry(e),"}\n    </div\n\n  ")}},{key:"returnUnitPopupEntry",value:function(e){var t=this.units[e];return t?'\n      <div class="unit-element" style="background:#333c;width:100%;padding:5%;border-radius:5px;font-size:0.7em;">\n        <div class="unit-box-ship unit-box-ship-'.concat(e,'" style="width:100%"></div>\n        <div class="unit-box" style="width:24.5%;height:auto;padding-bottom:10px;">\n\t  <div class="unit-box-num" style="font-size:2.8em">').concat(t.cost,'</div>\n\t  <div class="unit-box-desc" style="font-size:1.4em;padding-top:5px;">cost</div>\n\t</div>\n        <div class="unit-box" style="width:24.5%;height:auto;padding-bottom:10px;">\n\t  <div class="unit-box-num" style="font-size:2.8em">').concat(t.move,'</div>\n\t  <div class="unit-box-desc" style="font-size:1.4em;padding-top:5px;">move</div>\n\t</div>\n        <div class="unit-box" style="width:24.5%;height:auto;padding-bottom:10px;">\n\t  <div class="unit-box-num" style="font-size:2.8em">').concat(t.combat,'</div>\n\t  <div class="unit-box-desc" style="font-size:1.4em;padding-top:5px;">combat</div>\n\t</div>\n        <div class="unit-box" style="width:24.5%;height:auto;padding-bottom:10px;">\n\t  <div class="unit-box-num" style="font-size:2.8em">').concat(t.capacity,'</div>\n\t  <div class="unit-box-desc" style="font-size:1.4em;padding-top:5px;">carry</div>\n\t</div>\n        <div class="unit-description" style="font-size:1.1em">').concat(t.description,".</div>\n      </div>\n    "):""}},{key:"returnUnitTableEntry",value:function(e){var t=this.units[e],a=JSON.parse(JSON.stringify(t));return a.owner=this.game.player,(a=this.upgradeUnit(a,this.game.player))?(1==this.game.state.round&&"carrier"==a.type&&(a.description='<div style="padding: 10px; background-color:yellow;color:black">The CARRIER is the most important starting ship. Move it into a neighbouring sector and invade planets to gain their resources and influence.</div>'),'\n      <div class="unit-element">\n        <div class="unit-box-ship unit-box-ship-'.concat(e,'"></div>\n        <div class="unit-box">\n\t  <div class="unit-box-num">').concat(a.cost,'</div>\n\t  <div class="unit-box-desc">cost</div>\n\t</div>\n        <div class="unit-box">\n\t  <div class="unit-box-num">').concat(a.move,'</div>\n\t  <div class="unit-box-desc">move</div>\n\t</div>\n        <div class="unit-box">\n\t  <div class="unit-box-num">').concat(a.combat,'</div>\n\t  <div class="unit-box-desc">combat</div>\n\t</div>\n        <div class="unit-box">\n\t  <div class="unit-box-num">').concat(a.capacity,'</div>\n\t  <div class="unit-box-desc">carry</div>\n\t</div>\n        <div class="unit-description">').concat(a.description,".</div>\n      </div>\n    ")):""}},{key:"returnNewAgendasOverlay",value:function(){var e=this.returnAgendaCards(),t='\n    <div class="new_objectives_overlay_container" style="">\n      <div class="new_objectives_title">'.concat("New Agendas",'</div>\n      <div style="width:100%"><div class="new_objectives_text">check agendas under debate in the INFO menu...</div>\n    </div>\n    <div class="new_objectives_container">\n  ');if(this.game.state.agendas.length>0){t+='<div class="overlay_laws_list">';for(var a=0;a<this.game.state.agendas.length;a++)t+='  <div style="background-image: url(\'/imperium/img/agenda_card_template.png\');" class="overlay_agendacard card option" id="'.concat(a,'"><div class="overlay_agendatitle">').concat(e[this.game.state.agendas[a]].name,'</div><div class="overlay_agendacontent">').concat(e[this.game.state.agendas[a]].text,"</div></div>");t+="</div>"}return t+='\n      </div>\n      <div id="close-agendas-btn" class="button" style="">CONTINUE</div>\n    </div>\n  '}},{key:"returnNewObjectivesOverlay",value:function(){var e="Your Objectives";this.game.state.round>1&&(e="New Objectives");var t='\n    <div class="new_objectives_overlay_container" style="">\n      <div class="new_objectives_title">'.concat(e,"</div>\n  ");1==this.game.state.round?t+='\n      <div style="width:100%"><div class="new_objectives_text">check objectives, strategy cards and more in the CARDS menu...</div></div>\n    ':t+='\n      <div style="width:100%"><div class="new_objectives_text">view all public and secret objectives in the CARDS menu...</div></div>\n    ',t+='\n      <div class="new_objectives_container">\n  ';for(var a=0;a<this.game.state.new_objectives.length;a++){var r=this.game.state.new_objectives[a];if("secret"==r.type){var n=this.secret_objectives[r.card];t+='<div class="objectives_overlay_objectives_card" style="background-image: url('.concat(n.img,')">\n                 <div class="objectives_card_name">').concat(n.name,'</div>\n                 <div class="objectives_card_content">\n\t\t   ').concat(n.text,'\n\t\t   <div class="objectives_secret_notice">secret</div>\n\t\t </div>\n\t       </div>\n      ')}if("stage1"==r.type){var i=this.stage_i_objectives[r.card];t+='<div class="objectives_overlay_objectives_card" style="background-image: url('.concat(i.img,')">\n               <div class="objectives_card_name">').concat(i.name,'</div>\n               <div class="objectives_card_content">').concat(i.text,"</div>\n\t       </div>\n     ")}if("stage2"==r.type){var s=this.stage_ii_objectives[r.card];t+='<div class="objectives_overlay_objectives_card" style="background-image: url('.concat(s.img,')">\n               <div class="objectives_card_name">').concat(s.name,'</div>\n               <div class="objectives_card_content">').concat(s.text,'</div>\n               <div class="objectives_players_scored players_scored_').concat(a+1," p").concat(a+1,'"><div class="bk" style="width:100%;height:100%"></div></div>\n             </div>\n      ')}}return t+='\n      </div>\n      <div id="close-objectives-btn" class="button" style="">CONTINUE</div>\n    </div>\n  '}},{key:"returnNewActionCardsOverlay",value:function(e){for(var t='\n    <div class="new_action_cards_overlay_container" style="">\n      <div class="new_action_cards_title">'.concat("Your New Action Cards",'</div>\n      <div style="width:100%"><div class="new_objectives_text">click on your faction to see all your action cards anytime...</div></div>\n      <div class="new_action_cards">\n  '),a=0;a<e.length;a++)t+='\n      <div class="overlay_action_card bc">\n        <div class="action_card_name">'.concat(this.action_cards[e[a]].name,'</div>\n        <div class="action_card_content">').concat(this.action_cards[e[a]].text,"</div>\n      </div>\n    ");return t+='\n      </div>\n      <div id="close-action-cards-btn" class="button" style="">CONTINUE</div>\n    </div>\n  '}},{key:"returnObjectivesOverlay",value:function(){var e="";e+='<div class="objectives-overlay-container" style="">';for(var t=0;t<this.game.deck[5].hand.length;t++)if(!this.game.players_info[this.game.player-1].objectives_scored.includes(this.game.deck[5].hand[t])){var a=this.secret_objectives[this.game.deck[5].hand[t]];e+='<div class="objectives_overlay_objectives_card" style="background-image: url('.concat(a.img,')">\n                 <div class="objectives_card_name">').concat(a.name,'</div>\n                 <div class="objectives_card_content">').concat(a.text,'\n\t\t   <div class="objectives_secret_notice">secret</div>\n\t\t </div>\n\t       </div>\n      ')}for(var r=0;r<this.game.state.stage_i_objectives.length;r++){var n=this.stage_i_objectives[this.game.state.stage_i_objectives[r]];e+='<div class="objectives_overlay_objectives_card" style="background-image: url('.concat(n.img,')">\n               <div class="objectives_card_name">').concat(n.name,'</div>\n               <div class="objectives_card_content">').concat(n.text,'</div>\n               <div class="objectives_scorings">\n    ');for(var i=0;i<this.game.players_info.length;i++)for(var s=0;s<this.game.players_info[i].objectives_scored.length;s++)this.game.state.stage_i_objectives[r]===this.game.players_info[i].objectives_scored[s]&&(e+='<div class="objectives_players_scored players_scored_'.concat(i+1," p").concat(i+1,'"><div class="bk" style="width:100%;height:100%"></div></div>'));e+="</div>",e+="</div>"}e+="<p></p>";for(var o=0;o<this.game.state.stage_ii_objectives.length;o++){var c=this.stage_ii_objectives[this.game.state.stage_ii_objectives[o]];e+='<div class="objectives_overlay_objectives_card" style="background-image: url('.concat(c.img,')">\n               <div class="objectives_card_name">').concat(c.name,'</div>\n               <div class="objectives_card_content">').concat(c.text,'</div>\n               <div class="objectives_scorings">\n    ');for(var l=0;l<this.game.players_info.length;l++)for(var u=0;u<this.game.players_info[l].objectives_scored.length;u++)this.game.state.stage_ii_objectives[o]===this.game.players_info[l].objectives_scored[u]&&(e+='<div class="objectives_players_scored players_scored_'.concat(l+1," p").concat(l+1,'"><div class="bk" style="width:100%;height:100%"></div></div>'));e+="</div>",e+="</div>"}e+="<p></p>";for(var d=0;d<this.game.players_info.length;d++){d>0&&(e+="<p></p>");var p=this.returnPlayerObjectivesScored(d+1,["secret_objectives"]);for(var h in p)e+='<div class="objectives_overlay_objectives_card" style="background-image: url('.concat(p[h].img,')">\n               <div class="objectives_card_name">').concat(p[h].name,'</div>\n               <div class="objectives_card_content">').concat(p[h].text,'</div>\n               <div class="objectives_players_scored players_scored_').concat(d+1," p").concat(d+1,'"><div class="bk" style="width:100%;height:100%"></div></div>\n             </div>')}return e+="</div>"}},{key:"displayFactionDashboard",value:function(){var e=this,t=this;try{document.querySelector(".dashboard").innerHTML=this.returnFactionDashboard();for(var a="",r="",n=function(n){r=".dash-faction."+(a="p"+(n+1));var i=e.returnTotalResources(n+1)-e.game.players_info[n].goods,s=e.returnAvailableResources(n+1)-e.game.players_info[n].goods,o=e.returnTotalInfluence(n+1)-e.game.players_info[n].goods,c=e.returnAvailableInfluence(n+1)-e.game.players_info[n].goods;document.querySelector(".".concat(a," .dash-faction-name")).innerHTML=e.returnFaction(n+1),document.querySelector(".".concat(a," .resources .avail")).innerHTML=s,document.querySelector(".".concat(a," .resources .total")).innerHTML=i,document.querySelector(".".concat(a," .influence .avail")).innerHTML=c,document.querySelector(".".concat(a," .influence .total")).innerHTML=o,document.querySelector(".".concat(a," .dash-item-goods")).innerHTML=e.game.players_info[n].goods,document.querySelector(".".concat(a," .dash-item-commodities")).innerHTML=e.game.players_info[n].commodities,document.querySelector(".".concat(a," .dash-item-commodity-limit")).innerHTML=e.game.players_info[n].commodity_limit,document.querySelector(r).onclick=function(e){t.displayFactionSheet(n+1)}},i=0;i<this.game.players_info.length;i++)n(i);$(".dash-item-resources").on("mouseenter",(function(){t.showHelpCard("resources")})).on("mouseleave",(function(){t.hideHelpCard()})),$(".dash-item-influence").on("mouseenter",(function(){t.showHelpCard("influence")})).on("mouseleave",(function(){t.hideHelpCard()})),$(".dash-item-trade").on("mouseenter",(function(){t.showHelpCard("trade")})).on("mouseleave",(function(){t.hideHelpCard()}))}catch(e){console.log("ERROR: "+e)}}},{key:"displayFactionSheet",value:function(e){var t=this.returnFactionSheet(this,e);this.overlay.showOverlay(this.app,this,t)}},{key:"returnFactionSheet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=e.game.player);var a="",r="";null!=t&&(a="p"+t,r="bc"+t);var n='\n      <div class="faction_sheet_container '.concat(a," ").concat(r,'" style="overflow-y:scroll;padding:15px;;width:90vw;height:90vh;background-image:url(\'/imperium/img/factions/').concat(e.game.players_info[t-1].faction,'.jpg\');background-size:cover;">\n        <div class="faction_sheet_token_box" id="faction_sheet_token_box">\n          <div class="faction_sheet_token_box_title">Command</div>\n          <div class="faction_sheet_token_box_title">Strategy</div>\n          <div class="faction_sheet_token_box_title">Fleet</div>\n          <div>\t\n            <span class="fa-stack fa-3x">\n            <i class="fas fa-dice-d20 fa-stack-2x pc white-stroke"></i>\n            <span class="fa fa-stack-1x">\n            <span class="token_count commend_token_count">\n            ').concat(e.game.players_info[t-1].command_tokens,'\n            </span>\n            </span>\n            </span>\n          </div>\n          <div>\n            <span class="fa-stack fa-3x">\n            <i class="far fa-futbol fa-stack-2x pc white-stroke"></i>\n            <span class="fa fa-stack-1x">\n            <span class="token_count strategy_token_count">\n            ').concat(this.game.players_info[t-1].strategy_tokens,'\n            </span>\n            </span>\n            </span>\n          </div>\n          <div>\n            <span class="fa-stack fa-3x">\n            <i class="fas fa-space-shuttle fa-stack-2x pc white-stroke"></i>\n            <span class="fa fa-stack-1x">\n            <span class="token_count fleet_supply_count">\n            ').concat(this.game.players_info[t-1].fleet_supply,'\n            </span>\n            </span>\n            </span>\n          </div>\n        </div>\n        <div class="faction_sheet_active">\n   ');n+='\n      <div class="faction_sheet_tech_box" id="faction_sheet_abilities_box">\n    ';for(var s=0;s<e.game.players_info[t-1].tech.length;s++){var o=e.tech[e.game.players_info[t-1].tech[s]];"ability"==o.type&&(n+='\n          <div class="faction_sheet_tech_card bc">\n            <div class="tech_card_name">'.concat(o.name,'</div>\n            <div class="tech_card_content">').concat(o.text,'</div>\n            <div class="tech_card_level">♦♦</div>\n          </div>\n        '))}n+="</div>",n+='\n      <div class="faction_sheet_tech_box" id="faction_sheet_tech_box">\n    ';for(var c=0;c<e.game.players_info[t-1].tech.length;c++){var l=e.game.players_info[t-1].tech[c],u=e.tech[l];"ability"!=u.type&&(n+=e.returnTechCardHTML(l,"faction_sheet_tech_card"))}for(i in e.tech){var d=e.tech[i];"special"==d.type&&(e.game.players_info[t-1].tech.includes(i)||e.game.players_info[t-1].faction==d.faction&&(n+=e.returnTechCardHTML(i,"faction_sheet_tech_card faction_sheet_unearned_tech")))}n+="</div>";var p=e.returnPlayerActionCards(e.game.player);if(p.length>0)if(n+='\n      <div class="faction_sheet_action_card_box" id="faction_sheet_action_card_box">\n      ',e.game.player==t)for(var h=0;h<p.length;h++)n+='\n            <div class="faction_sheet_action_card bc">\n              <div class="action_card_name">'.concat(e.action_cards[p[h]].name,'</div>\n              <div class="action_card_content">').concat(e.action_cards[p[h]].text,"</div>\n            </div> \n\t  ");else for(var f=e.game.players_info[t-1].action_cards_in_hand,m=0;m<f;m++)n+='\n            <div class="faction_sheet_action_card faction_sheet_action_card_back bc">\n            </div> \n\t  ';for(var g=e.returnPlayerPlanetCards(t),b=0;b<g.length;b++){var y="";1==this.game.planets[g[b]].exhausted&&(y="exhausted"),n+='<div class="faction_sheet_planet_card bc '.concat(y,'" id="').concat(g[b],'" style="background-image: url(').concat(this.game.planets[g[b]].img,');"></div>')}return n+="\n      </div>\n    "}},{key:"addUIEvents",value:function(){if(0!=this.browser_active){$("#hexGrid").draggable(),document.querySelector(".leaderboardbox").addEventListener("click",(function(e){document.querySelector(".leaderboardbox").toggleClass("leaderboardbox-lock")})),document.documentElement.style.setProperty("--my-color","var(--p".concat(this.game.player,")")),this.displayFactionDashboard();var e=this.returnTokenDisplay();document.querySelector(".hud-header").append(this.app.browser.htmlToElement(e))}}},{key:"returnTokenDisplay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e&&(e=this.game.player);var t='\n    <div class="hud-token-count">\n      <div>\t\n        <span class="fa-stack fa-3x">\n        <i class="fas fa-dice-d20 fa-stack-2x pc white-stroke"></i>\n        <span class="fa fa-stack-1x">\n        <div id="token_display_command_token_count" class="token_count command_token_count">\n        '.concat(this.game.players_info[e-1].command_tokens,'\n        </div>\n        </span>\n        </span>\n      </div>\n      <div>\n        <span class="fa-stack fa-3x">\n        <i class="far fa-futbol fa-stack-2x pc white-stroke"></i>\n        <span class="fa fa-stack-1x">\n        <div id="token_display_strategy_token_count" class="token_count strategy_token_count">\n        ').concat(this.game.players_info[e-1].strategy_tokens,'\n        </div>\n        </span>\n        </span>\n      </div>\n      <div>\n        <span class="fa-stack fa-3x">\n        <i class="fas fa-space-shuttle fa-stack-2x pc white-stroke"></i>\n        <span class="fa fa-stack-1x">\n        <div id="token_display_fleet_supply_count" class="token_count fleet_supply_count">\n        ').concat(this.game.players_info[e-1].fleet_supply,"\n        </div>\n        </span>\n        </span>\n      </div>\n    </div>");return t}},{key:"showSector",value:function(e){var t=this.game.board[e].tile;this.showSectorHighlight(t)}},{key:"hideSector",value:function(e){var t=this.game.board[e].tile;this.hideSectorHighlight(t),$(".sector_graphics_space_"+e).fadeIn()}},{key:"updateTokenDisplay",value:function(){try{$("#token_display_command_token_count").html(this.game.players_info[this.game.player-1].command_tokens),$("#token_display_strategy_token_count").html(this.game.players_info[this.game.player-1].strategy_tokens),$("#token_display_fleet_supply_count").html(this.game.players_info[this.game.player-1].fleet_supply_tokens)}catch(e){}}},{key:"updateLeaderboard",value:function(){if(0!=this.browser_active){var e=this.returnFactions();try{try{if(this.game.state.vp_target<14)for(var t=14;t>this.game.state.vp_target;t--){var a="."+t+"-points";document.querySelector(a).style.display="none"}}catch(e){}document.querySelector(".round").innerHTML=this.game.state.round,document.querySelector(".turn").innerHTML=this.game.state.turn;var r='<div class="VP-track-label">Victory Points</div>',n=14;14!=this.game.state.vp_target&&this.game.state.vp_target>0&&(n=this.game.state.vp_target),this.game.options.vp&&(n=parseInt(this.game.options.vp));for(var i=n;i>=0;i--){r+='<div class="vp '+i+'-points"><div class="player-vp-background">'+i+"</div>",r+='<div class="vp-players">';for(var s=0;s<this.game.players_info.length;s++)this.game.players_info[s].vp==i&&(r+='  <div class="player-vp" style="background-color:var(--p'.concat(s+1,');"><div class="vp-faction-name">').concat(e[this.game.players_info[s].faction].name,"</div></div>"));r+="</div></div>"}document.querySelector(".leaderboard").innerHTML=r}catch(e){}}}},{key:"updateSectorGraphics",value:function(e){var t=this.returnSectorAndPlanets(e);if(null!=t&&null!=t&&null!=t.s&&null!=t.s)try{-1==e.indexOf("_")&&(e=t.s.tile);for(var a=0;a<this.game.players_info.length;a++)if(this.game.queue.length>0){var r=this.game.queue[this.game.queue.length-1].split("\t");"destroy_unit"!==r[0]&&"assign_hit"!==r[0]&&this.eliminateDestroyedUnitsInSector(a+1,e)}var n=0,i=0;if(1==t.s.activated[this.game.player-1]){var s="#"+e;$(s).find(".hex_activated").css("background-color","var(--p"+this.game.player+")"),$(s).find(".hex_activated").css("opacity","0.3")}else $("#"+e).find(".hex_activated").css("opacity","0.0");for(var o=0;o<t.s.units.length;o++){var c=o+1;if(t.s.type>0&&$("#hex_img_hazard_border_"+e).css("display","block"),t.s.units[c-1].length>0){var l="#hex_img_faction_border_"+e,u="player_color_"+c;$(l).removeClass("player_color_1"),$(l).removeClass("player_color_2"),$(l).removeClass("player_color_3"),$(l).removeClass("player_color_4"),$(l).removeClass("player_color_5"),$(l).removeClass("player_color_6"),$(l).addClass(u),$(l).css("display","block"),$(l).css("opacity","1"),n=1}if(t.s.units[c-1].length>0){updated_space_graphics=1,i=1;for(var d=0,p=0,h=0,f=0,m=0,g=0,b=0,y=0;y<t.s.units[c-1].length;y++){var v=t.s.units[c-1][y];"carrier"==v.type&&d++,"fighter"==v.type&&p++,"destroyer"==v.type&&h++,"cruiser"==v.type&&f++,"dreadnaught"==v.type&&m++,"flagship"==v.type&&g++,"warsun"==v.type&&b++}var _=[],w=[];if(p>0){var x=p;p>9&&(x=9);var k="white_space_frame_1_"+x+".png";w.push("white_space_fighter.png"),_.push(k)}if(h>0){var S=h;h>9&&(S=9);var P="white_space_frame_2_"+S+".png";w.push("white_space_destroyer.png"),_.push(P)}if(d>0){var E=d;d>9&&(E=9);var C="white_space_frame_3_"+E+".png";w.push("white_space_carrier.png"),_.push(C)}if(f>0){var A=f;f>9&&(A=9);var M="white_space_frame_4_"+A+".png";w.push("white_space_cruiser.png"),_.push(M)}if(m>0){var T=m;m>9&&(T=9);var j="white_space_frame_5_"+T+".png";w.push("white_space_dreadnaught.png"),_.push(j)}if(g>0){var O=g;g>9&&(O=9);var D="white_space_frame_6_"+O+".png";w.push("white_space_flagship.png"),_.push(D)}if(b>0){var I=b;b>9&&(I=9);var R="white_space_frame_7_"+I+".png";w.push("white_space_warsun.png"),_.push(R)}$("#hex_bg_"+e+" > .sector_graphics").remove();for(var B="#hex_bg_"+e,q="player_color_"+c,L=0;L<w.length;L++)$(B).append('<img class="sector_graphics '+q+" ship_graphic sector_graphics_space sector_graphics_space_"+e+'" src="/imperium/img/frame/'+w[L]+'" />');for(var N=0;N<_.length;N++)$(B).append('<img style="opacity:0.8" class="sector_graphics sector_graphics_space sector_graphics_space_'+e+'" src="/imperium/img/frame/'+_[N]+'" />')}}0==i&&$("#hex_bg_"+e+" > .sector_graphics").remove();for(var F=[],U=[],z=0;z<t.s.units.length;z++){for(var H=z+1,G=0,K=0;K<t.p.length;K++)G+=t.p[K].units[H-1].length;if(G>0){for(var W=0;W<t.p.length;W++){if(t.p[W].units[H-1].length>0&&0==n){var V="#hex_img_faction_border_"+e,Y="player_color_"+H;$(V).removeClass("player_color_1"),$(V).removeClass("player_color_2"),$(V).removeClass("player_color_3"),$(V).removeClass("player_color_4"),$(V).removeClass("player_color_5"),$(V).removeClass("player_color_6"),$(V).addClass(Y),$(V).css("display","block"),$(V).css("opacity","0.6"),n=1}for(var J=0,X=0,Q=0,Z=0;Z<t.p[W].units[H-1].length;Z++){var ee=t.p[W].units[H-1][Z];"infantry"==ee.type&&J++,"pds"==ee.type&&Q++,"spacedock"==ee.type&&X++}var te="";if(F.push("white_planet_center.png"),1==t.p.length?te="center":(0==W&&(te="top_left"),1==W&&(te="bottom_right")),U.push(te),J>0){var ae=J;J>9&&(ae=9);var re="white_planet_center_1_"+ae+".png";F.push(re),U.push(te)}if(X>0){var ne=X;X>9&&(ne=9);var ie="white_planet_center_2_"+ne+".png";F.push(ie),U.push(te)}if(Q>0){var se=Q;Q>9&&(se=9);var oe="white_planet_center_3_"+se+".png";F.push(oe),U.push(te)}}0==i&&($("#hex_bg_"+e+" > .sector_graphics").remove(),i=1),$("#hex_bg_"+e+" > .sector_graphics_planet").remove();for(var ce=0;ce<F.length;ce++)ce>0&&(U[ce],U[ce-1])}}if(0==n)for(var le=0;le<t.p.length;le++)if(-1!=t.p[le].owner){var ue="#hex_img_faction_border_"+e,de="player_color_"+t.p[le].owner;$(ue).removeClass("player_color_1"),$(ue).removeClass("player_color_2"),$(ue).removeClass("player_color_3"),$(ue).removeClass("player_color_4"),$(ue).removeClass("player_color_5"),$(ue).removeClass("player_color_6"),$(ue).addClass(de),$(ue).css("display","block"),$(ue).css("opacity","0.6"),n=1}}catch(e){}}},{key:"unhighlightSectors",value:function(){for(var e in this.game.sectors)this.removeSectorHighlight(e)}},{key:"showUnit",value:function(e){var t=this.returnUnitPopup(e);this.cardbox.showCardboxHTML("",t,"",(function(){}))}},{key:"hideUnit",value:function(e){this.cardbox.hideCardbox(1)}},{key:"showSectorHighlight",value:function(e){this.addSectorHighlight(e)}},{key:"hideSectorHighlight",value:function(e){this.removeSectorHighlight(e)}},{key:"addSectorHighlight",value:function(e){e.indexOf("_")>-1&&(e=this.game.board[e].tile);var t=this.returnSectorAndPlanets(e);try{0!=e.indexOf("planet")&&"new-byzantium"!=e||(e=this.game.planets[e].sector);var a=".sector_graphics_space_"+t.s.tile;if($(a).css("display","none"),!this.game.sectors[e].planets)return;if(0==this.game.sectors[e].planets.length)return;var r=document.querySelector("#hex_info_"+t.s.tile),n="";1==this.game.sectors[e].planets.length?(n=this.returnPlanetInformationHTML(this.game.sectors[e].planets[0]),r.innerHTML=n,r.classList.add("one_planet")):(n='<div class="top_planet">',n+=this.returnPlanetInformationHTML(this.game.sectors[e].planets[0]),n+='</div><div class="bottom_planet">',n+=this.returnPlanetInformationHTML(this.game.sectors[e].planets[1]),n+="</div>",r.innerHTML=n,r.classList.add("two_planet")),document.querySelector("#hexIn_"+t.s.tile).classList.add("bi")}catch(e){}}},{key:"removeSectorHighlight",value:function(e){try{0!=e.indexOf("planet")&&"new-byzantium"!=e||(e=this.game.planets[e].sector);var t=this.returnSectorAndPlanets(e),a=".sector_graphics_space_"+t.s.tile;$(a).css("display","all"),document.querySelector("#hexIn_"+t.s.tile).classList.remove("bi")}catch(e){}}},{key:"addPlanetHighlight",value:function(e,t){e.indexOf("_")>-1&&(e=this.game.board[e].tile),this.showSectorHighlight(e)}},{key:"removePlanetHighlight",value:function(e,t){this.hideSectorHighlight(e)}},{key:"showHelpCard",value:function(e){var t="";"resources"==e&&(t='<div style="width:100%; height: 100%"><img style="width:100%;height:auto;" src="/imperium/img/resources_dash_card.png" /></div>'),"influence"==e&&(t='<div style="width:100%; height: 100%"><img style="width:100%;height:auto;" src="/imperium/img/influence_dash_card.png" /></div>'),"trade"==e&&(t='<div style="width:100%; height: 100%"><img style="width:100%;height:auto;" src="/imperium/img/trade_dash_card.png" /></div>'),this.cardbox.showCardboxHTML(null,t)}},{key:"hideHelpCard",value:function(e){this.cardbox.hideCardbox(1)}},{key:"showActionCard",value:function(e){var t=this.action_cards[e],a='\n      <div class="overlay_action_card bc">\n        <div class="action_card_name">'.concat(t.name,'</div>\n        <div class="action_card_content">').concat(t.text,"</div>\n      </div>\n    ");this.cardbox.showCardboxHTML(t,a)}},{key:"hideActionCard",value:function(e){this.cardbox.hideCardbox(1)}},{key:"showStrategyCard",value:function(e){for(var t=this.returnStrategyCards()[e],a=0,r=0;r<this.game.state.strategy_cards.length;r++)t===this.game.state.strategy_cards[r]&&(a=this.game.state.strategy_cards_bonus[r]);var n="";a>0&&(n='<div class="strategy_card_bonus">    \n        <i class="fas fa-database white-stroke"></i>\n        <span>'.concat(a,"</span>\n      </div>")),this.cardbox.showCardboxHTML(t,'<img src="/imperium/img'+t.img+'" style="width:100%" /><div class="strategy_card_overlay">'+t.text+"</div>"+n)}},{key:"hideStrategyCard",value:function(e){this.cardbox.hideCardbox(1)}},{key:"showPlanetCard",value:function(e,t){var a=this.returnPlanets()[this.returnSectors()[this.game.board[e].tile].planets[t]];this.cardbox.showCardboxHTML(a,'<img src="'+a.img+'" style="width:100%" />')}},{key:"hidePlanetCard",value:function(e,t){this.cardbox.hideCardbox(1)}},{key:"showAgendaCard",value:function(e){var t=this.agenda_cards[e],a='\n      <div style="background-image: url(\'/imperium/img/agenda_card_template.png\');height:100%;" class="overlay_agendacard card option" id="'.concat(e,'">\n        <div class="overlay_agendatitle">').concat(t.name,'</div>\n        <div class="overlay_agendacontent">').concat(t.text,"</div>\n      </div>\n    ");this.cardbox.showCardboxHTML(t,a)}},{key:"hideAgendaCard",value:function(e,t){this.cardbox.hideCardbox(1)}},{key:"showTechCard",value:function(e){this.cardbox.showCardboxHTML(e,this.returnTechCardHTML(e))}},{key:"hideTechCard",value:function(e){this.cardbox.hideCardbox(1)}},{key:"returnShortGameOptionsArray",value:function(e){console.log("HERE: ");var t=c(h(b.prototype),"returnShortGameOptionsArray",this).call(this,e),a=[];for(var r in t)if(""!=t[r]){var n=r,i=e[r];"game_length"==r&&(n="VP"),a[n]=i}return a}},{key:"returnStrategyCards",value:function(){return this.strategy_cards}},{key:"importStrategyCard",value:function(e,t){null==t.name&&(t.name="Strategy Card"),null==t.rank&&(t.rank=1),t=this.addEvents(t),this.strategy_cards[e]=t}},{key:"playStrategyCardPrimary",value:function(e,t){for(var a=0;a<this.game.players_info.length;a++)this.strategy_cards[t]&&this.strategy_cards[t].strategyPrimaryEvent(this,a+1,e);return 0}},{key:"playStrategyCardSecondary",value:function(e,t){for(var a=0;a<this.game.players_info.length;a++)this.strategy_cards[t]&&this.strategy_cards[t].strategySecondaryEvent(this,a+1,e);return 0}},{key:"playStrategyCardTertiary",value:function(e,t){for(var a=0;a<this.game.players_info.length;a++)this.strategy_cards[t]&&this.strategy_cards[t].strategyTertiaryEvent(this,a+1,e);return 0}}])&&o(t.prototype,a),r&&o(t,r),b}(a(47));e.exports=f},function(e,t){this.importActionCard("infiltrate",{name:"Infiltrate",type:"instant",text:"The next time you invade a planet, you may takeover any existing PDS units or Space Docks",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_infiltrate_infrastructure_on_invasion=1,1}}),this.importActionCard("reparations",{name:"Reparations",type:"action",text:"If you have lost a planet this round, refresh one of your planets",playActionCard:function(e,t,a,r){if(-1!=e.game.players_info[a-1].lost_planet_this_round){var n=e.returnPlayerExhaustedPlanetCards(e.game.player);return e.playerSelectPlanetWithFilter("Select an exhausted planet to refresh: ",(function(e){return n.includes(e)?1:0}),(function(t){return e.addMove("unexhaust\tplanet\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(a)+" refreshes "+e.game.planets[t].name),e.endTurn(),0}),null),0}return 1}}),this.importActionCard("political-stability",{name:"Political Stability",type:"instant",text:"Pick a strategy card you have already played this round. You may keep this for next round",playActionCard:function(e,t,a,r){if(e.game.player==a){for(var n='<div class="sf-readable">Pick a Strategy Card to keep for next round: </div><ul>',i=0;i<e.game.players_info[a-1].strategy_cards_played.length;i++){var s=e.game.players_info[a-1].strategy_cards_played[i];n+='<li class="option" id="'+s+'">'+e.strategy_cards[s].name+"</li>"}for(var o=0;o<e.game.players_info[a-1].strategy.length;o++)if(!e.game.players_info[e.game.player-1].strategy_cards_played.includes(e.game.players_info[a-1].strategy[o])){var c=e.game.players_info[a-1].strategy[o];n+='<li class="option" id="'+c+'">'+e.strategy_cards[c].name+"</li>"}n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");return e.addMove("strategy_card_retained\t"+e.game.player+"\t"+t),e.endTurn(),0}))}return 0},handleGameLoop:function(e,t,a){if("strategy_card_retained"==a[0]){var r=parseInt(a[1]),n=a[2];return e.game.queue.splice(t,1),e.game.players_info[r-1].strategy_cards_retained.push(n),1}return 1}}),this.importActionCard("lost-star-chart",{name:"Lost Star Chart",type:"instant",text:"During this turn, all wormholes are adjacent to each other",playActionCard:function(e,t,a,r){return e.game.state.temporary_wormholes_adjacent=1,1}}),this.importActionCard("plague",{name:"Plague",type:"action",text:"ACTION: Select a planet. Roll a dice for each infantry on planet and destroy number of rolls 6 or higher.",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Select a planet to cripple with the plague:",(function(t){return e.doesPlanetHaveInfantry(t)}),(function(t){return e.addMove("plague\t"+e.game.player+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" unleashes a plague on "+e.game.planets[t].name),e.endTurn(),0}),null),0},handleGameLoop:function(e,t,a){if("plague"==a[0]){for(var r=parseInt(a[1]),n=a[2],i=e.game.planets[n].sector,s=e.game.planets[n].idx,o=e.returnSectorAndPlanets(i),c=e.returnEventObjects(),l=o.p[s].owner,u=0,d=0;d<o.p[s].units.length;d++)for(var p=0;p<o.p[s].units[d].length;p++){var h=o.p[s].units[d][p];if("infantry"==h.type)if(e.rollDice(10)>6){for(z_index in h.destroyed=1,c)h=c[z_index].unitDestroyed(this,r,h);u++}}return e.updateLog("The plague destroys "+u+" infantry"),e.eliminateDestroyedUnitsInSector(l,i),e.saveSystemAndPlanets(o),e.updateSectorGraphics(i),e.game.queue.splice(t,1),1}return 1}}),this.importActionCard("repeal-law",{name:"Repeal Law",type:"action",text:"ACTION: Repeal one law that is in effect.",playActionCard:function(e,t,a,r){if(e.game.player==a){for(var n='<div class="sf-readable">Pick a Law to Repeal: </div><ul>',i=0;i<e.game.state.laws.length;i++){var s=e.game.state.laws[i];n+='<li class="option" id="'+e.agenda_cards[s]+'">'+e.agenda_cards[r].name+"</li>"}n+='<li class="option" id="cancel">cancel</li>',n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");return"cancel"===t?(e.endTurn(),0):(e.addMove("repeal_law\t"+t),e.endTurn(),0)}))}return 0},handleGameLoop:function(e,t,a){if("repeal_law"==a[0]){var r=a[2];e.game.queue.splice(t,1);for(var n=0;n<e.game.state.laws.length;n++)if(e.game.state.laws[n]==r)return e.agenda_cards[r].repealAgenda(e),1;return 1}return 1}}),this.importActionCard("veto",{name:"Veto",type:"action",text:"ACTION: Select one agenda to remove from consideration and draw a replacement",playActionCard:function(e,t,a,r){if(e.game.player==a){var n="";for(n+="Select one agenda to quash in the Galactic Senate.<ul>",i=0;i<3;i++)n+='<li class="option" id="'+e.game.state.agendas[i]+'">'+e.agenda_cards[e.game.state.agendas[i]].name+"</li>";n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){var t=$(this).attr("id");e.hideAgendaCard(t),e.updateStatus("Quashing Agenda"),e.addMove("quash\t"+t+"\t1"),e.endTurn()}))}return 0}}),this.importActionCard("flank-speed1",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed2",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed3",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("flank-speed4",{name:"Flank Speed",type:"instant",text:"Gain +1 movement on all ships moved this turn",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_fleet_move_bonus=1,1}}),this.importActionCard("propulsion-research",{name:"Propulsion Research",type:"instant",text:"Gain +1 movement on a single ship moved this turn",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_ship_move_bonus=1,1}}),this.importActionCard("military-drills",{name:"Military Drills",type:"action",text:"ACTION: Gain two new command tokens",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerAllocateNewTokens(a,2),0}}),this.importActionCard("cripple-defenses",{name:"Cripple Defenses",type:"action",text:"ACTION: Select a planet and destroy all PDS units on that planet",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Select a planet to destroy all PDS units on that planet: ",(function(t){return e.doesPlanetHavePDS(t)}),(function(t){for(var a=(t=e.game.planets[t]).sector,r=(t.tile,t.idx),n=e.returnSectorAndPlanets(a),i=0;i<n.p[r].units.length;i++)for(var s=0;s<n.p[r].units[i].length;s++)"pds"==n.p[r].units[i][s].type&&e.addMove("destroy_unit\t"+e.game.player+"\t"+(i+1)+"\tground\t"+a+"\t"+r+"\t"+s+"\t1");return e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys all PDS units destroyed on "+n.p[r].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("reactor-meltdown",{name:"Reactor Meltdown",type:"action",text:"ACTION: Select a non-homeworld planet and destroy one Space Dock on that planet",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Select a non-homeworld planet and destroy one Space Dock on that planet: ",(function(t){if(0==(t=e.game.planets[t]).hw&&e.doesPlanetHaveSpaceDock(t))return 1}),(function(t){for(var a=(t=e.game.planets[t]).sector,r=(t.tile,t.idx),n=e.returnSectorAndPlanets(a),i=0;i<n.p[r].units.length;i++)for(var s=0;s<n.p[r].units[i].length;s++)"spacedock"==n.p[r].units[i][s].type&&e.addMove("destroy_unit\t"+e.game.player+"\t"+(i+1)+"\tground\t"+a+"\t"+r+"\t"+s+"\t1");return e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys all Space Docks on "+n.p[r].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("lost-mission",{name:"Lost Mission",type:"action",text:"ACTION: Place 1 Destroyer in a system with no existing ships",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Select a sector with no existing ships in which to place a Destroyer: ",(function(t){return!e.doesSectorContainShips(t)}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\tAdding destroyer to gamebaord"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("accidental-colonization",{name:"Accidental Colonization",type:"action",text:"ACTION: Gain control of one planet not controlled by any player",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Select a planet not controlled by another player: ",(function(t){return-1==(t=e.game.planets[t]).owner?1:0}),(function(t){var a=(t=e.game.planets[t]).sector;return e.addMove("gain_planet\t"+e.game.player+"\t"+a+"\t"+t.idx),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" gains planet "+t.name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("uprising",{name:"Uprising",type:"action",text:"ACTION: Exhaust a non-home planet card held by another player. Gain trade goods equal to resource value.",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Exhaust a non-homeworld planet card held by another player. Gain trade goods equal to resource value.",(function(t){return-1!=(t=e.game.planets[t]).owner&&t.owner!=e.game.player&&0==t.exhausted&&0==t.hw?1:0}),(function(t){var a=(t=e.game.planets[t]).resources;return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+a),e.addMove("expend\t"+e.game.player+"\tplanet\t"+t.planet),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausting "+t.name+" and gaining "+a+" trade goods"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("diaspora-conflict",{name:"Diaspora Conflict",type:"action",text:"ACTION: Exhaust a non-home planet card held by another player. Gain trade goods equal to resource value.",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Exhaust a planet card held by another player. Gain trade goods equal to resource value.",(function(t){return-1!=(t=e.game.planets[t]).owner&&t.owner!=e.game.player&&0==t.exhausted&&0==t.hw?1:0}),(function(t){var a=t,r=(t=e.game.planets[t]).resources;return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+r),e.addMove("expend\t"+e.game.player+"\tplanet\t"+a),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausting "+t.name+" and gaining "+r+" trade goods"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("economic-initiative",{name:"Economic Initiative",type:"action",text:"ACTION: Ready each cultural planet in your control",playActionCard:function(e,t,a,r){for(var n in e.game.planets)e.game.planets[n].owner==a&&"cultural"==e.game.planets[n].type&&(e.game.planets[n].exhausted=0);return 1}}),this.importActionCard("focused-research",{name:"Focused Research",type:"action",text:"ACTION: Spend 4 Trade Goods to Research 1 Technology",playActionCard:function(e,t,a,r){return e.game.players_info[e.game.player-1].goods<4?(e.updateLog("Player does not have enough trade goods to research a technology"),1):(e.game.player==a&&e.playerResearchTechnology((function(t){e.addMove("purchase\t"+e.game.player+"\ttech\t"+t),e.addMove("expend\t"+e.game.player+"\tgoods\t4"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" researches "+e.tech[t].name),e.endTurn()})),0)}}),this.importActionCard("frontline-deployment",{name:"Frontline Deployment",type:"action",text:"ACTION: Deploy three infantry on one planet you control",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Deploy three infantry to a planet you control: ",(function(t){return e.game.planets[t].owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys three infantry to "+t.name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("ghost-ship",{name:"Ghost Ship",type:"action",text:"ACTION: Place a destroyer in a sector with a wormhole and no enemy ships",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Place a destroyer in a sector with a wormhole and no enemy ships: ",(function(t){return 0==e.doesSectorContainShips(t)&&0!=e.game.sectors[t].wormhole?1:0}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys a Destroyer to "+e.game.sectors[t].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("war-effort",{name:"War Effort",type:"action",text:"ACTION: Place a cruiser in a sector with one of your ships",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Place a cruiser in a sector with one of your ships: ",(function(a){return 1==e.doesSectorContainPlayerShips(t,a)?1:0}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tcruiser\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" deploys a Cruiser to "+e.game.sectors[t].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("industrial-initiative",{name:"Industrial Initiative",type:"action",text:"ACTION: Gain a trade good for each industrial planet you control",playActionCard:function(e,t,a,r){var n=0;for(var i in e.game.planets)e.game.planets[i].owner==a&&"industrial"==e.game.planets[i].type&&n++;return n>0&&e.game.queue.push("purchase\t"+e.game.player+"\tgoods\t"+n),1}}),this.importActionCard("Insubordination",{name:"Insubordination",type:"action",text:"ACTION: Select a player and remove 1 token from their command pool",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlayerWithFilter("Select a player and remove one token from their command pool: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("expend\t"+t+"\tcommand\t1"),e.addMove("NOTIFY\t"+e.returnFactionNickname(t)+" loses one comand token"),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("Lucky Shot",{name:"Lucky Shot",type:"action",text:"ACTION: Destroy a destroyer, cruiser or dreadnaught in a sector with a planet you control",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Destroy a destroyer, cruiser or dreadnaught in a sector containing a planet you control: ",(function(t){return e.doesSectorContainPlanetOwnedByPlayer(t,e.game.player)&&(e.doesSectorContainUnit(t,"destroyer")||e.doesSectorContainUnit(t,"cruiser")||e.doesSectorContainUnit(t,"dreadnaught"))?1:0}),(function(t){e.playerSelectOpponentUnitInSectorWithFilter("Select opponent ship in this sector to destroy: ",t,(function(e){return"destroyer"==e.type||"cruiser"==e.type||"dreadnaught"==e.type?1:0}),(function(t){var a=t.sector,r=(parseInt(t.unit.owner),t.unit_idx),n=e.returnSectorAndPlanets(a),i=t.unit;return e.addMove("destroy_unit\t"+e.game.player+"\t"+i.owner+"\tspace\t"+a+"\t-1\t"+r+"\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" destroys a "+i.name+" in "+n.name),e.endTurn(),0}),null)}),(function(){e.playerTurn()})),0}}),this.importActionCard("mining-initiative-ac",{name:"Mining Initiative",type:"action",text:"ACTION: Gain trade goods equal to the highest resource value planet you control",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=0;for(var i in e.game.planets)e.game.planets[i].owner==a&&e.game.planets[i].resources>n&&(n=e.game.planets[i].resources);return e.addMove("purchase\t"+e.game.player+"\tgoods\t"+n),e.endTurn(),0}return 0}}),this.importActionCard("rise-of-a-messiah",{name:"Rise of a Messiah",type:"action",text:"ACTION: Add one infantry to each planet player controls",playActionCard:function(e,t,a,r){for(var n in e.game.planets)e.game.planets[n].owner==a&&(e.updateLog(e.returnFaction(a)+" adds 1 infantry to "+e.game.planets[n].name),e.addPlanetaryUnit(a,e.game.planets[n].sector,e.game.planets[n].idx,"infantry"));return 1}}),this.importActionCard("unstable-planet",{name:"Unstable Planet",type:"action",text:"ACTION: Choose a hazardous planet and exhaust it. Destroy 3 infantry on that planet if they exist",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlanetWithFilter("Select a hazardous planet and exhaust it. Destroy 3 infantry on that planet if they exist",(function(t){return"hazardous"==(t=e.game.planets[t]).type?1:0}),(function(r){e.addMove("expend\t"+t+"\tplanet\t"+r);var n=e.game.planets[r],i=parseInt(n.owner),s=(parseInt(n.resources),0);if(i>=0)for(var o=0;o<n.units[i-1].length;o++)s<3&&"infantry"==n.units[i-1][o].type&&(e.addMove("destroy_unit\t"+a+"\t"+i+"\tground\t"+n.sector+"\t"+n.idx+"\t1"),s++);return e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("Covert Operation",{name:"Covert Operation",type:"action",text:"ACTION: Choose a player. They give you one of their action cards, if possible",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectPlayerWithFilter("Select a player. They give you one of their action cards: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("pull\t"+e.game.player+"\t"+t+"\taction\trandom"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" pulls a random action card from "+e.returnFaction(t)),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("tactical-bombardment",{name:"Tactical Bombardment",type:"action",text:"ACTION: Choose a sector in which you have ships with bombardment. Exhaust all planets in that sector",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Select a sector in which you have ships with bombardment. Exhaust all planets in that sector",(function(a){return 1==e.doesSectorContainPlayerUnit(t,a,"dreadnaught")||1==e.doesSectorContainPlayerUnit(t,a,"warsun")?1:0}),(function(a){for(var r=e.game.sectors[a].planets,n=0;n<r.length;n++)e.addMove("expend\t"+t+"\tplanet\t"+r[n]),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" exhausts "+e.game.planets[r[n]].name);return e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("signal-jamming",{name:"Signal Jamming",type:"action",text:"ACTION: Choose a player. They must activate a system in or next to a system in which you have a ship",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Select a sector in which you have a ship or one adjacent to one: ",(function(t){return e.isPlayerShipAdjacentToSector(a,t)?1:0}),(function(t){e.playerSelectPlayerWithFilter("Select a player to signal jam in that sector: ",(function(t){return t!=e.game.player?1:0}),(function(a){return e.addMove("activate\t"+a+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(a)+" suffers signal jamming in "+e.game.sectors[t].name),e.endTurn(),0}),null)}),(function(){e.playerTurn()})),0}}),this.importActionCard("unexpected-action",{name:"Unexpected Action",type:"action",text:"ACTION: Deactivate a stystem you have activated. Gain one command or strategy token: ",playActionCard:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Select a sector that you have activated and deactivate it: ",(function(t){if(1==e.game.sectors[t].activated[a-1])return 1}),(function(t){return e.addMove("purchase\t"+a+"\tcommand\t1"),e.addMove("deactivate\t"+a+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(a)+" deactivates "+e.game.sectors[t].name),e.endTurn(),0}),(function(){e.playerTurn()})),0}}),this.importActionCard("in-the-silence-of-space",{name:"In the Silence of Space",type:"instant",text:"Your ships may move through sectors with other player ships this turn: ",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_move_through_sectors_with_opponent_ships=1,1}})},function(e,t){this.importActionCard("upgrade",{name:"Upgrade",type:"activate",text:"After you activate a system containing one of your ships, place a Dreadnaught from your reinforcements in that sector",playActionCard:function(e,t,a,r){var n=e.game.state.activated_sector;return e.doesSectorContainPlayerShips(a,n)&&e.addSpaceUnit(a,n,"dreadnaught"),1}}),this.importActionCard("disable",{name:"Disable",type:"activate",text:"Your fleet cannot be hit by PDS fire or Planetary Defense during this invasion",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_immune_to_pds_fire=1,e.game.players_info[a-1].temporary_immune_to_planetary_defense=1,1}})},function(e,t){this.importActionCard("bunker",{name:"Bunker",type:"bombardment_defender",text:"During this bombardment, attacker gets -4 applied to each bombardment roll.",playActionCard:function(e,t,a,r){for(var n=0;n<e.game.players_info.length;n++)e.game.players_info[n].temporary_bombardment_combat_roll_modifier=-4;return 1}}),this.importActionCard("thunder-from-the-heavens",{name:"Thunder from the Heavens",type:"bombardment_attacker",text:"During this bombardment, attacker gets +2 applied to each bombardment roll.",playActionCard:function(e,t,a,r){for(var n=0;n<e.game.players_info.length;n++)e.game.players_info[n].temporary_bombardment_combat_roll_modifier=2;return 1}})},function(e,t){this.importActionCard("sabotage1",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,a,r){for(var n=e.game.queue.length-1;n>=0;n--)if(0==e.game.queue[n].indexOf("action_card_")){var i=0;if(0==e.game.queue[n].indexOf("action_card_post")&&(i=1),e.game.queue.splice(n,1),1==i)return 1}return 1}}),this.importActionCard("sabotage2",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,a,r){for(var n=e.game.queue.length-1;n>=0;n--)if(0==e.game.queue[n].indexOf("action_card_")){var i=0;if(0==e.game.queue[n].indexOf("action_card_post")&&(i=1),e.game.queue.splice(n,1),1==i)return 1}return 1}}),this.importActionCard("sabotage3",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,a,r){for(var n=e.game.queue.length-1;n>=0;n--)if(0==e.game.queue[n].indexOf("action_card_")){var i=0;if(0==e.game.queue[n].indexOf("action_card_post")&&(i=1),e.game.queue.splice(n,1),1==i)return 1}return 1}}),this.importActionCard("sabotage4",{name:"Sabotage",type:"counter",text:"When another player plays an action card, you may cancel that action card",playActionCard:function(e,t,a,r){for(var n=e.game.queue.length-1;n>=0;n--)if(0==e.game.queue[n].indexOf("action_card_")){var i=0;if(0==e.game.queue[n].indexOf("action_card_post")&&(i=1),e.game.queue.splice(n,1),1==i)return 1}return 1}})},function(e,t){this.importActionCard("fire-team",{name:"Fire Team",type:"ground_combat",text:"Reroll up to 15 dice during this round of ground combat",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].combat_dice_reroll=15,1}}),this.importActionCard("parley",{name:"Parley",type:"ground_combat",text:"Return invading infantry to space if player ships exist in the sector",playActionCard:function(e,t,a,r){if(t==a){var n=e.game.state.ground_combat_sector,i=e.game.state.ground_combat_planet_idx,s=e.game.state.ground_combat_attacker,o=e.returnSectorAndPlanets(n),c=o.p[i].units[s-1];o.p[i].units[s-1]=[];for(var l=0;l<o.s.units[s-1].length;l++)for(;e.returnRemainingCapacity(o.s.units[s-1][l])>0&&c.length>0;)e.loadUnitByJSONOntoShip(s,n,l,JSON.stringify(c[0])),c.splice(0,1)}return e.updateSectorGraphics(sector),1}})},function(e,t){this.importActionCard("distinguished-councillor",{name:"Distinguished Coucillor",type:"post_agenda",text:"After the speaker has cast his votes, cast an additional 5 votes",playActionCard:function(e,t,a,r){return e.game.state.votes_cast[a-1]+=5,e.updateLog(e.returnFaction(a)+" casts an additional 5 votes with Distinguished Councillor"),1}}),this.importActionCard("bribery",{name:"Bribery",type:"post_agenda",text:"After the speaker has cast his vote, spend any number of trade goods to purchase additional votes",playActionCard:function(e,t,a,r){if(e.game.player==a){var n='<div class="sf-readable">Spend any number of trade goods to purchase additional votes: </div><ul>';if(e.game.players_info[a-1].goods>0){n+='<li class="textchoice" id="0">0 votes</li>';for(var i=1;i<=e.game.players_info[a-1].goods+1;i++)n+=1==i?'<li class="textchoice" id="1">'+i+" vote</li>":'<li class="textchoice" id="'+i+'">'+i+" votes</li>"}else n+='<li class="textchoice" id="0">0 votes</li>';n+="</ul>",e.updateStatus(n),$(".textchoice").off(),$(".textchoice").on("click",(function(){var t=$(this).attr("id");e.addMove("bribery\t"+a+"\t"+t),e.endTurn()}))}return 0},handleGameLoop:function(e,t,a){if("bribery"==a[0]){var r=parseInt(a[1]),n=parseInt(a[2]);return e.game.queue.splice(t,1),e.game.state.votes_cast[r-1].votes+=n,e.game.players_info[r-1].goods-=n,1==n?e.updateLog(e.returnFaction(r)+" bribes the Council for "+n+" additional vote"):e.updateLog(e.returnFaction(r)+" bribes the Council for "+n+" additional votes"),1}return 1}})},function(e,t){this.importActionCard("assassinate-representative",{name:"Assassinate Representative",type:"pre_agenda",text:"Choose a player. That player cannot vote on the Agenda",playActionCard:function(e,t,a,r){return a==e.game.player&&e.playerSelectPlayerWithFilter("Select a player who will not be able to vote on this Agenda: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("rider\t"+t+"\tassassinate-representative\t-1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" assassinates the "+e.returnFactionNickname(t)+" delegate"),e.endTurn(),0}),null),0}}),this.importActionCard("ancient-burial-sites",{name:"Ancient Burial Sites",type:"pre_agenda",text:"Chose a player. That player loses a maximum of four votes on this agenda",playActionCard:function(e,t,a,r){return a==e.game.player&&e.playerSelectPlayerWithFilter("Select a player to lose 4 votes: ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("ancient_burial\t"+e.game.player+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" finds soe dirt on the voting representative of "+e.returnFaction(t)),e.endTurn(),0}),null),0},handleGameLoop:function(e,t,a){if("ancient_burial"==a[0]){parseInt(a[1]);var r=parseInt(a[2]);return e.game.queue.splice(t,1),e.game.state.votes_available[r-1]-=4,e.game.state.votes_available[r-1]<0&&(e.game.state.votes_available[r-1]=0),1}return 1}})},function(e,t){this.importActionCard("leadership-rider",{name:"Leadership Rider",type:"rider",text:"Bet on agenda outcome to gain two strategy tokens and 1 command token",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=e.returnActiveAgenda(),i=e.agenda_cards[n].returnAgendaOptions(e),s=e.agenda_cards[n].elect;e.playerSelectChoice("On which choice do you wish to place your Leadership rider?",i,s,(function(t){e.addMove("rider\t"+e.game.player+"\tdiplomacy-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(imperium.self.game.player)+" has placed a Leadership Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,a,r){return e.game.players_info[a-1].strategy_tokens+=2,e.game.players_info[a-1].command_tokens+=1,e.updateLog(e.returnFaction(a)+" gains 2 strategy tokens and 1 command token"),1}}),this.importActionCard("diplomacy-rider",{name:"Diplomacy Rider",type:"rider",text:"Bet on agenda outcome to have others activate system with planet you control",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=e.returnActiveAgenda(),i=e.agenda_cards[n].returnAgendaOptions(e),s=e.agenda_cards[n].elect;e.playerSelectChoice("On which choice do you wish to place your Diplomacy rider?",i,s,(function(t){e.addMove("rider\t"+e.game.player+"\tdiplomacy-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Diplomacy Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,a,r){return a==e.game.player&&e.playerSelectSectorWithFilter("Select a sector with a planet you control to mire in diplomatic conflict: ",(function(t){for(var a=0;a<e.game.sectors[t].planets.length;a++)return e.game.planets[e.game.sectors[t].planets[a]].owner==e.game.player?1:0}),(function(t){for(var a=0;a<e.game.players_info.length;a++)e.addMove("activate\t"+(a+1)+"\t"+t);return e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" uses Diplomacy Rider to protect "+t),e.endTurn(),0}),null),0}}),this.importActionCard("politics-rider",{name:"Politics Rider",type:"rider",text:"Bet on agenda outcome to gain three action cards and the speaker token",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=e.returnActiveAgenda(),i=e.agenda_cards[n].returnAgendaOptions(e),s=e.agenda_cards[n].elect;e.playerSelectChoice("On which choice do you wish to place your Politics rider?",i,s,(function(t){e.addMove("rider\t"+e.game.player+"\tpolitics-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Politics Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,a,r){if(e.game.player==a){e.addMove("gain\t"+e.game.player+"\taction_cards\t3"),e.addMove("DEAL\t2\t"+e.game.player+"\t3"),e.addMove("NOTIFY\tdealing two action cards to player "+t);for(var n="Make which player the speaker? <ul>",i=0;i<e.game.players_info.length;i++)n+='<li class="textchoice" id="'+i+'">'+factions[e.game.players_info[i].faction].name+"</li>";n+="</ul>",e.updateStatus(n);e.game.player;$(".textchoice").off(),$(".textchoice").on("click",(function(){var t=parseInt($(this).attr("id"))+1;e.addMove("change_speaker\t"+t),e.endTurn()}))}return 0}}),this.importActionCard("construction-rider",{name:"Construction Rider",type:"rider",text:"Bet on agenda outcome to place a space dock on a planet you control",playActionCard:function(e,t,a,r){if(a==e.game.player){var n=e.returnActiveAgenda(),i=e.agenda_cards[n].returnAgendaOptions(e),s=e.agenda_cards[n].elect;e.playerSelectChoice("On which choice do you wish to place the Construction rider?",i,s,(function(t){e.addMove("rider\t"+e.game.player+"\tconstruction-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Construction Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,a,r){return a==e.game.player&&e.playerSelectPlanetWithFilter("Select a planet you control without a Space Dock: ",(function(t){return e.game.planets[t].owner==e.game.player&&0==e.doesPlanetHaveSpaceDock(t)?1:0}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t"+e.game.planets[t].idx+"\tspacedock\t"+e.game.planets[t].sector),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" builds a Space Dock in "+e.game.sectors[e.game.planets[t].sector].name),e.endTurn(),0}),null),0}}),this.importActionCard("trade-rider",{name:"Trade Rider",type:"rider",text:"Bet on agenda outcome to receive 5 trade goods",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=e.returnActiveAgenda(),i=e.agenda_cards[n].returnAgendaOptions(e),s=e.agenda_cards[n].elect;e.playerSelectChoice("On which choice do you wish to place your Trade rider?",i,s,(function(t){e.addMove("rider\t"+e.game.player+"\ttrade-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Trade Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,a,r){return e.game.queue.push("purchase\t"+a+"\tgoods\t5"),e.game.queue.push("NOTIFY\t"+e.returnFaction(e.game.player)+" gains 5 Trade Goods through their Trade Rider"),1}}),this.importActionCard("warfare-rider",{name:"Warfare Rider",type:"rider",text:"Bet on agenda outcome to place a dreadnaught in a system with one of your ships: ",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=e.returnActiveAgenda(),i=e.agenda_cards[n].returnAgendaOptions(e),s=e.agenda_cards[n].elect;e.playerSelectChoice("On which choice do you wish to place your Warfare Rider?",i,s,(function(t){e.addMove("rider\t"+e.game.player+"\twarfare-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Warfare Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,a,r){return e.game.player==a&&e.playerSelectSectorWithFilter("Select a sector which contains at least one of your ships: ",(function(t){return e.doesSectorContainPlayerShips(a,t)}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdreadnaught\t"+t),e.addMove("NOTIFY\tAdding dreadnaught to board"),e.endTurn(),0}),null),0}}),this.importActionCard("technology-rider",{name:"Technology Rider",type:"rider",text:"Bet on agenda outcome to research a technology for free",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=e.returnActiveAgenda(),i=e.agenda_cards[n].returnAgendaOptions(e),s=e.agenda_cards[n].elect;e.playerSelectChoice("On which choice do you wish to place your Technology rider?",i,s,(function(t){e.addMove("rider\t"+e.game.player+"\ttechnology-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed a Technology Rider on "+i[t]),e.endTurn()}))}return 0},playActionCardEvent:function(e,t,a,r){return e.game.player==a&&e.playerResearchTechnology((function(t){e.endTurn()})),0}}),this.importActionCard("imperial-rider",{name:"Imperial Rider",type:"rider",text:"Player gains 1 VP",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=e.returnActiveAgenda(),i=e.agenda_cards[n].returnAgendaOptions(e),s=e.agenda_cards[n].elect;e.playerSelectChoice("On which choice do you wish to place the Imperial rider?",i,s,(function(t){e.addMove("rider\t"+e.game.player+"\timperial-rider\t"+i[t]),e.addMove("NOTIFY\t"+e.returnFactionNickname(e.game.player)+" has placed an Imperial Rider on "+i[t]),e.endTurn()}))}},playActionCardEvent:function(e,t,a,r){return e.game.players_info[a-1].vp+=1,e.game.players_info[a-1].objectives_scored.push("imperial-rider"),1}})},function(e,t){this.importActionCard("intercept",{name:"Intercept",type:"retreat",text:"After your opponent declares a retreat in space combat, they cannot retreat",playActionCard:function(e,t,a,r){return e.game.players[a-1].temporary_opponent_cannot_retreat=1,1}}),this.importActionCard("courageous-to-the-end",{name:"Courageous to the End",type:"space_combat_after",text:"For one ship lost in last round of space combat, fire twice. With each hit your opponent must destroy a ship of their chosing",playActionCard:function(e,t,a,r){if(e.game.players_info[a-1].my_units_destroyed_last_combat_round.length>0){for(var n=10,i=0;i<e.game.players_info[a-1].my_units_destroyed_last_combat_round[i];i++){var s=e.game.players_info[a-1].my_units_destroyed_last_combat_round[i],o=e.returnUnit(s,t);o.combat<n&&(n=o.combat)}var c=e.rollDice(10),l=e.rollDice(10),u=e.game.state.space_combat_attacker;u==t&&(u=e.game.state.space_combat_defender);var d=0;return c>=n&&d++,l>=n&&d++,e.game.player==a&&(e.addMove("player_destroy_unit\t"+t+"\t"+u+"\t"+d+"\tspace\t"+e.game.state.space_combat_sector+"\t0"),e.endTurn()),0}return 1}}),this.importActionCard("salvage",{name:"Salvage",type:"space_combat_victory",text:"If you win a space combat, opponent gives you all their commodities",playActionCard:function(e,t,a,r){if(t==a){var n=e.game.players_info[e.game.state.space_combat_attacker],i=e.game.players_info[e.game.state.space_combat_defender];return i.commodities>0&&(n.goods+=i.commodities,e.updateLog(e.returnFaction(e.game.state.space_combat_attacker)+" takes "+i.commodities+" in trade goods from commodities lost in combat"),i.commodities=0),1}}}),this.importActionCard("shields-holding1",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,a,r){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("shields-holding2",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,a,r){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("shields-holding3",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,a,r){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("shields-holding4",{name:"Shields Holding",type:"assign_hits",text:"Cancel 2 hits in Space Combat",playActionCard:function(e,t,a,r){return e.game.state.assign_hits_to_cancel+=2,1}}),this.importActionCard("maneuvering-jets1",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,a,r){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("maneuvering-jets2",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,a,r){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("maneuvering-jets3",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,a,r){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("maneuvering-jets4",{name:"Maneuvering Jets",type:"post_pds",text:"Cancel 1 hit from a PDS firing upon your ships",playActionCard:function(e,t,a,r){return e.game.state.assign_hits_to_cancel++,1}}),this.importActionCard("emergency-repairs",{name:"Emergency Repairs",type:"assign_hits",text:"Repair all damaged ships not at full strength",playActionCard:function(e,t,a,r){for(var n=e.returnSectorAndPlanets(e.game.state.space_combat_sector),i=0;i<n.s.units[a-1].length;i++)n.s.units[a-1][i].strength<n.s.units[a-1][i].max_strength&&(n.s.units[a-1][i].strength=n.s.units[a-1][i].max_strength);return 1}}),this.importActionCard("experimental-fighter-prototype",{name:"Experimental Fighter Prototype",type:"space_combat",text:"Your fighters get +2 on their combat rolls for a single round of space combat",playActionCard:function(e,t,a,r){for(var n=e.returnSectorAndPlanets(e.game.state.space_combat_sector),i=0;i<n.s.units[a-1].length;i++){var s=n.s.units[a-1][i];"fighter"==s.type&&(s.temporary_combat_modifier+=2)}return 1}}),this.importActionCard("moral-boost",{name:"Moral Boost",type:"combat",text:"Apply +1 to each of your units' combat rolls during this round of combat",playActionCard:function(e,t,a,r){if(e.game.state.space_combat_sector)for(var n=e.returnSectorAndPlanets(e.game.state.space_combat_sector),s=0;s<n.s.units[a-1].length;s++){n.s.units[a-1][s].temporary_combat_modifier+=1}if(e.game.state.ground_combat_sector&&e.game.state.ground_combat_planet_idx)for(var o=e.returnSectorAndPlanets(e.game.state.space_combat_sector),c=0;i<o.p.length;c++)for(var l=0;l<o.p[c].units[a-1].length;l++){o.p[c].units[a-1][l].temporary_combat_modifier+=1}return 1}}),this.importActionCard("experimental-battlestation",{name:"Experimental Battlestation",type:"pre_pds",text:"After a player moves ships into a sector, a space dock in that or an adjacent sector can fire 3 PDS shots",playActionCard:function(e,t,a,r){e.updateLog("Experimental Battlestation");var n=e.game.state.activated_sector,i=e.returnAdjacentSectors(n);i.push(n);for(var s=0;s<i.length;s++)for(var o=e.returnSectorAndPlanets(i[s]),c=0;c<o.p.length;c++)if(o.p[c].owner==e.game.player&&e.doesPlayerHaveSpaceDock(o.p[c]))return e.game.players_info[a-1].experimental_battlestation=n,1;return 1}}),this.importActionCard("direct-hit1",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,a,r){for(var n=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),s=0;s<i.s.units.length;s++)if(s!=a-1)for(var o=0;o<i.s.units[s].length;o++)if(i.s.units[s][o].strength<i.s.units[a-1][o].max_strength){for(var c in i.s.units[s][o].strength=0,i.s.units[s][o].strength=0,n)n[c].unitDestroyed(e,attacker,i.p.units[s][o]);e.eliminateDestroyedUnitsInSector(s+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),o=i.s.units[s].length+2}return 1}}),this.importActionCard("direct-hit2",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,a,r){for(var n=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),s=0;s<i.s.units.length;s++)if(s!=a-1)for(var o=0;o<i.s.units[s].length;o++)if(i.s.units[s][o].strength<i.s.units[a-1][o].max_strength){for(var c in i.s.units[s][o].strength=0,i.s.units[s][o].strength=0,n)n[c].unitDestroyed(e,attacker,i.p.units[s][o]);e.eliminateDestroyedUnitsInSector(s+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),o=i.s.units[s].length+2}return 1}}),this.importActionCard("direct-hit3",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,a,r){for(var n=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),s=0;s<i.s.units.length;s++)if(s!=a-1)for(var o=0;o<i.s.units[s].length;o++)if(i.s.units[s][o].strength<i.s.units[a-1][o].max_strength){for(var c in i.s.units[s][o].strength=0,i.s.units[s][o].strength=0,n)n[c].unitDestroyed(e,attacker,i.p.units[s][o]);e.eliminateDestroyedUnitsInSector(s+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),o=i.s.units[s].length+2}return 1}}),this.importActionCard("direct-hit4",{name:"Direct Hit",type:"space_combat_after",text:"Destroy a ship that is damaged or not at full strength",playActionCard:function(e,t,a,r){for(var n=e.returnEventObjects(),i=e.returnSectorAndPlanets(e.game.state.space_combat_sector),s=0;s<i.s.units.length;s++)if(s!=a-1)for(var o=0;o<i.s.units[s].length;o++)if(i.s.units[s][o].strength<i.s.units[a-1][o].max_strength){for(var c in i.s.units[s][o].strength=0,i.s.units[s][o].strength=0,n)n[c].unitDestroyed(e,attacker,i.p.units[s][o]);e.eliminateDestroyedUnitsInSector(s+1,sector),e.saveSystemAndPlanets(i),e.updateSectorGraphics(sector),o=i.s.units[s].length+2}return 1}}),this.importActionCard("skilled-retreat1",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=e.game.state.space_combat_sector;e.returnAdjacentSectors(n);e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(n,t)&&t!=n&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+a+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(a)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+a+"\t"+t),e.addMove("activate\t"+a+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0},handleGameLoop:function(e,t,a){if("skilled_retreat"==a[0]){var r=parseInt(a[1]),n=a[2],i=a[3];e.game.queue.splice(t,1);for(var s=e.returnSectorAndPlanets(n),o=e.returnSectorAndPlanets(i),c=0;c<o.s.units[r-1].length;c++)s.s.units[r-1].push(o.s.units[r-1][c]);o.s.units[r-1]=[],e.saveSystemAndPlanets(s),e.saveSystemAndPlanets(o);for(var l=e.game.queue.length-1;l>=0;l--){"continue"!==e.game.queue[l].split("\t")[0]?e.game.queue.splice(l,1):l=-1}return e.updateSectorGraphics(o.s.sector),e.updateSectorGraphics(s.s.sector),e.handleFleetSupply(r,n)}return 1}}),this.importActionCard("skilled-retreat2",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=e.game.state.space_combat_sector;e.returnAdjacentSectors(n);e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(n,t)&&t!=n&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+a+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(a)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+a+"\t"+t),e.addMove("activate\t"+a+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0}}),this.importActionCard("skilled-retreat3",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=e.game.state.space_combat_sector;e.returnAdjacentSectors(n);e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(n,t)&&t!=n&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+a+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(a)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+a+"\t"+t),e.addMove("activate\t"+a+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0}}),this.importActionCard("skilled-retreat4",{name:"Skilled Retreat",type:"space_combat",text:"Retreat into an adjacent system without enemy ships. Space Battle ends tied",playActionCard:function(e,t,a,r){if(e.game.player==a){var n=e.game.state.space_combat_sector;e.returnAdjacentSectors(n);e.playerSelectSectorWithFilter("Select an adjacent sector without opponent ships into which to retreat: ",(function(t){return e.areSectorsAdjacent(n,t)&&t!=n&&!e.doesSectorContainNonPlayerShips(t)?1:0}),(function(t){e.addMove("skilled_retreat\t"+a+"\t"+t+"\t"+e.game.state.space_combat_sector),e.addMove("NOTIFY\t"+e.returnFaction(a)+" makes skilled retreat into "+e.game.sectors[t].name),e.addMove("activate\t"+a+"\t"+t),e.addMove("activate\t"+a+"\t"+e.game.state.space_combat_sector),e.endTurn()}),(function(){e.addMove("NOTIFY\tno suitable sectors available for skilled retreat"),e.endTurn()}))}return 0}})},function(e,t){this.importActionCard("public-disgrace",{name:"Public Disgrace",type:"activate",text:"Force a player who has already picked a strategy card to select another. They select before you do",playActionCard:function(e,t,a,r){return 0},handleGameLoop:function(e,t,a){if("public_disgrace"==a[0]){var r=parseInt(a[1]),n=parseInt(a[2]),i=a[3];e.game.queue.splice(t,1);for(var s=0;s<e.game.players_info[n-1].strategy.length;s++)e.game.players_info[n-1].strategy[s]==i&&e.game.players_info[n-1].strategy.splice(s,1);return e.game.queue.push("pickstrategy\t"+r),e.game.queue.push("reinsert_strategy_card\t"+i),e.game.queue.push("pickstrategy\t"+n),1}if("reinsert_strategy_card"==a[0]){var o=a[1];return e.game.state.strategy_cards.push(o),e.game.state.strategy_cards_bonus.push(0),1}return 1}})},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/agendas/agendas.js: Unterminated comment (1326:0)\n\n[0m [90m 1324 | [39m[0m\n[0m [90m 1325 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 1326 | [39m[90m/*****[39m[0m\n[0m [90m      | [39m[31m[1m^[22m[39m[0m\n[0m [90m 1327 | [39m[0m\n[0m [90m 1328 | [39m[90m  this.importAgendaCard('archived-secret', {[39m[0m\n[0m [90m 1329 | [39m[90m  \tname : \"Archived Secret\" ,[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.skipBlockComment (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:7744:32)\n    at Parser.skipSpace (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:7800:20)\n    at Parser.nextToken (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:7708:73)\n    at Parser.next (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:7648:10)\n    at Parser.eat (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:7653:12)\n    at Parser.isLineTerminator (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8905:17)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:15)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)")},function(e,t){this.importFaction("faction2",{id:"faction2",name:"Universities of Jol Nar",nickname:"Jol Nar",homeworld:"sector50",space_units:["carrier","carrier","dreadnaught","fighter"],ground_units:["infantry","infantry","pds","spacedock"],tech:["sarween-tools","neural-motivator","plasma-scoring","antimass-deflectors","faction2-analytic","faction2-brilliant","faction2-fragile","faction2-flagship"],background:"faction2.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Universities of Jol Nar, a physically weak faction which excells at science and technology. Survive long enough to amass enough protective technology and you can be a contender for the Imperial Throne. Good luck!</div>'}),this.importTech("faction2-flagship",{name:"XXCha Flagship",faction:"faction2",type:"ability",text:"Extra hit on every roll of 9 or 10 before modifications",modifyUnitHits:function(e,t,a,r,n,i,s,o){return e.doesPlayerHaveTech(r,"faction2-flagship")&&i.owner==r&&"flagship"==i.type&&s>8?(e.updateLog("Jol Nar flagship scores an additional hit through flagshup ability"),++o):o}}),this.importTech("faction2-analytic",{name:"Analytic",faction:"faction2",type:"ability",text:"Ignore 1 tech prerequisite on non-unit upgrades",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction2-analytic")&&(e.game.players_info[t-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=1)}}),this.importTech("faction2-fragile",{name:"Fragile",faction:"faction2",type:"ability",text:"-1 on all combat rolls",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction2-fragile")&&(e.game.players_info[t-1].permanent_ignore_number_of_tech_prerequisites_on_nonunit_upgrade=1)},modifyCombatRoll:function(e,t,a,r,n,i){return"space"!=n&&"ground"!=n||e.doesPlayerHaveTech(t,"faction2-fragile")&&(e.updateLog("Jol Nar combat rolls -1 due to fragility"),(i-=1)<1&&(i=1)),i}}),this.importTech("faction2-brilliant",{name:"Brilliant",faction:"faction2",type:"ability",text:"Tech primary is played when token spent to execute secondary",initialize:function(e,t){null==e.faction2_brilliant_swapped&&(e.faction2_brilliant_swapped=1,e.brilliant_original_event=e.strategy_cards.technology.strategySecondaryEvent,e.strategy_cards.technology.strategySecondaryEvent=function(e,t,a){e.doesPlayerHaveTech(t,"faction2-brilliant")&&t!=a&&e.game.player==t?(e.game.players_info[t-1].cost_of_technology_secondary=6,e.playerAcknowledgeNotice("The Tech strategy card has been played. You may expend a strategy token to research a technology. You can then purchase a second for 6 resources:",(function(){e.updateStatus('<p>Technology has been played. Do you wish to spend a strategy token to research a technology? </p><ul><li class="option" id="yes">Yes</li><li class="option" id="no">No</li></ul>'),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){if(e.unlockInterface(),"no"===$(this).attr("id"))return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0;e.playerResearchTechnology((function(a){e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("purchase\t"+t+"\ttechnology\t"+a),e.game.players_info[e.game.player-1].tech.push(a);var r=6,n="<p>Do you wish to spend 6 resources to research a second technology? </p><ul>";1!=e.game.players_info[t-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources||(n="<p>Do you wish to research a second technology for free?",r=0),e.returnAvailableResources(e.game.player)>=r&&(n+='<li class="option" id="yes">Yes</li>'),n+='<li class="option" id="no">No</li>',n+="</ul>",e.updateStatus(n),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var a=$(this).attr("id");return"yes"===a&&(e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources=0,e.playerSelectResources(r,(function(a){if(1!=a)return e.endTurn(),0;e.playerResearchTechnology((function(a){e.addMove("purchase\t"+t+"\ttechnology\t"+a),e.endTurn()}))}))),"no"===a?(e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}))}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}))):e.brilliant_original_event(e,t,a)})}}),this.importTech("faction2-eres-siphons",{name:"E-Res Siphons",faction:"faction2",type:"special",color:"yellow",prereqs:["yellow","yellow"],text:"Gain 4 trade goods whenever a system is activated containing your ships",initialize:function(e,t){null==e.game.players_info[t-1].eres_siphons&&(e.game.players_info[t-1].eres_siphons=0)},gainTechnology:function(e,t,a){"faction2-eres-siphons"==a&&(e.game.players_info[t-1].eres_siphons=1)},activateSystemTriggers:function(e,t,a,r){return 1==e.game.players_info[a-1].eres_siphons&&t!=a&&1==e.doesSectorContainPlayerShips(a,r)?1:0},postSystemActivation:function(e,t,a,r){e.game.players_info[a-1].goods+=4}}),this.importTech("faction2-deep-space-conduits",{name:"Deep Space Conduits",faction:"faction2",type:"special",color:"blue",prereqs:["blue","blue"],text:"Activate card to make activated system 1 hop away from all other systems with Jol Nar ships",initialize:function(e,t){null==e.game.players_info[t-1].deep_space_conduits&&(e.game.players_info[t-1].deep_space_conduits=0,e.game.players_info[t-1].deep_space_conduits_exhausted=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].deep_space_conduits&&(e.game.players_info[t-1].deep_space_conduits_exhausted=0)},gainTechnology:function(e,t,a){"faction2-deep-space-conduits"==a&&(e.game.players_info[t-1].deep_space_conduits=1,e.game.players_info[t-1].deep_space_conduits_exhausted=0)},activateSystemTriggers:function(e,t,a,r){return a==e.game.player&&t==a&&1==e.game.players_info[t-1].deep_space_conduits&&0==e.game.players_info[t-1].deep_space_conduits_exhausted&&e.doesSectorContainPlayerUnits(t,r)?1:0},activateSystemEvent:function(e,t,a,r){e.updateStatus('Do you wish to activate Deep Space Conduits: <ul><li class="textchoice" id="yes">activate</li><li class="textchoice" id="no">skip</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var n=$(this).attr("id");if("yes"==n){var i=e.returnSectorsWithPlayerUnits(t);e.game.players_info[t-1].deep_space_conduits_exhausted=1,e.addMove("setvar\tplayers\t"+a+"\tdeep_space_conduits_exhausted\tint\t1");for(var s=0;s<i.length;s++)e.addMove("adjacency\ttemporary\t"+i[s]+"\t"+r);e.endTurn()}"no"==n&&(e.updateStatus(),e.endTurn())}))}})},function(e,t){this.importFaction("faction7",{id:"faction7",name:"Embers of Muaat",nickname:"Muaat",homeworld:"sector76",space_units:["warsun","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","spacedock"],tech:["plasma-scoring","faction7-star-forge","faction7-gashlai-physiology","faction7-advanced-warsun-i","faction7-flagship"],background:"faction7.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Embers of Muaat, a faction which forges its instruments of war in the heat of lava-powered furnaces and whose technical research expands to conquering the heat of the very starts themselves. Goodl luck!</div>'}),this.importTech("faction7-star-forge",{name:"Star Forge",faction:"faction7",type:"ability",text:"Spend 1 strategy token to place 2 fighters or a destroy in sector with your warsun",initialize:function(e,t){null==e.game.players_info[t-1].star_forge&&(e.game.players_info[t-1].star_forge=0)},gainTechnology:function(e,t,a){"faction7-star-forge"==a&&(e.game.players_info[t-1].star_forge=1)},menuOption:function(e,t,a){var r={};return"main"===t&&(r.event="starforge",r.html='<li class="option" id="starforge">star forge</li>'),r},menuOptionTriggers:function(e,t,a){return e.doesPlayerHaveTech(a,"faction7-star-forge")&&"main"===t?1:0},menuOptionActivated:function(e,t,a){return e.game.player==a?(e.playerSelectSectorWithFilter("Star Forge spends 1 strategy token to drop 2 fighters or 1 destroyer in a sector containing your War Sun: ",(function(t){return e.doesSectorContainPlayerUnit(e.game.player,t,"warsun")}),(function(t){return e.addMove("produce\t"+e.game.player+"\t1\t-1\tdestroyer\t"+t),e.addMove("NOTIFY\tStar Forge adds destroyer to "+t),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn(),0}),(function(){e.playerTurn()})),0):0}}),this.importTech("faction7-gashlai-physiology",{name:"Gashlai Physiology",faction:"faction7",type:"ability",text:"Player may move through supernovas",initialize:function(e,t){null==e.game.players_info[t-1].gashlai_physiology&&(e.game.players_info[t-1].gashlai_physiology=0)},gainTechnology:function(e,t,a){"faction7-gashlai-physiology"==a&&(e.game.players_info[t-1].gashlai_physiology=1,e.game.players_info[t-1].fly_through_supernovas=1)}}),this.importTech("faction7-magmus-reactor",{name:"Magmus Reactor",faction:"faction7",type:"special",text:"Player may move into supernovas. Gain 1 trade good producing with Warsun or adjacent to Supernova",initialize:function(e,t){null==e.game.players_info[t-1].magmus_reactor&&(e.game.players_info[t-1].magmus_reactor=0)},gainTechnology:function(e,t,a){"faction7-magmus-reactor"==a&&(e.game.players_info[t-1].magmus_reactor=1,e.game.players_info[t-1].move_into_supernovas=1)},postProduction:function(e,t,a,r){if(1==e.game.players_info[t-1].magmus_reactor){var n=e.returnAdjacentSectors(a),i=0;if(e.doesSectorContainPlayerUnit(t,a,"warsun")&&(i=1),0==i)for(var s=0;s<n.length;s++){4==e.returnSectorAndPlanets(n[s]).s.type&&(i=1)}1==i&&(e.updateLog("Muatt gains 1 trade good from Magmus Reactor - producing in a sector with a Warsun or adjacent to a Supernova"),e.game.players_info[t-1].goods+=1,e.updateTokenDisplay(),e.displayFactionDashboard())}}}),this.importTech("faction7-flagship",{name:"Muaat Flagship",faction:"faction7",type:"ability",text:"May spend 1 strategy token to place a cruiser in your flagship system"}),this.importTech("faction7-advanced-warsun-i",{name:"Advanced Warsun I",faction:"faction7",replaces:"warsun",unit:1,type:"special",text:"A more dangerous and mobile warsun",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].faction7_advanced_warsun_i&&(e.game.players_info[t-1].faction7_advanced_warsun_i=0)},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction7_advanced_warsun_i=1,e.game.players_info[t-1].may_produce_warsuns=1},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction7_advanced_warsun_i&&"warsun"==a.type&&(a.cost=12,a.combat=3,a.move=1,a.capacity=6,a.bombardment_rolls=3,a.bombardment_combat=3),a}}),this.importTech("faction7-advanced-warsun-ii",{name:"Advanced Warsun II",faction:"faction7",replaces:"warsun",unit:1,type:"special",text:"A more dangerous and mobile warsun",prereqs:["red","red","red","yellow"],initialize:function(e,t){null==e.game.players_info[t-1].faction7_advanced_warsun_ii&&(e.game.players_info[t-1].faction7_advanced_warsun_ii=0)},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction7_advanced_warsun_ii=1},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction7_advanced_warsun_ii&&"warsun"==a.type&&(a.cost=10,a.combat=3,a.move=3,a.capacity=6,a.bombardment_rolls=3,a.bombardment_combat=3),a}})},function(e,t){this.importFaction("faction4",{id:"faction4",name:"Sardakk N'Orr",nickname:"Sardakk",homeworld:"sector53",space_units:["carrier","carrier","cruiser"],ground_units:["infantry","infantry","infantry","infantry","infantry","spacedock"],tech:["faction4-unrelenting","faction4-exotrireme-i","faction4-flagship"],background:"faction4.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Sardaak N\'Orr, an overpowered faction known for its raw strength in combat. Your brutal power makes you an intimidating faction on the board. Good luck!</div>'}),this.importTech("faction4-unrelenting",{name:"Unrelenting",faction:"faction4",type:"ability",text:"+1 on all combat rolls",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction4-unrelenting")&&(e.game.players_info[t-1].faction4_unrelenting=1)},modifyCombatRoll:function(e,t,a,r,n,i){return"space"!=n&&"ground"!=n||e.doesPlayerHaveTech(t,"faction4-unrelenting")&&(e.updateLog("Sardakk combat rolls +1 due to Sardakk"),(i+=1)>10&&(i=10)),i}}),this.importTech("faction4-flagship",{name:"Sardakk Flagship",faction:"faction4",type:"ability",text:"+1 on all combat rolls for ships in same sector",modifyCombatRoll:function(e,t,a,r,n,i){if("space"==n){e.doesSectorContainPlayerUnit(t,e.game.state.activated_sector,"flagship")&&(e.updateLog("Sardakk Flagship adds +1 to dice roll"),(i+=1)>10&&(i=10))}return i}}),this.importTech("faction4-exotrireme-i",{name:"Exotrireme I",faction:"faction4",replaces:"dreadnaught",unit:1,type:"special",text:"A more powerful dreadnaught",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].faction4_advanced_dreadnaught_i&&(e.game.players_info[t-1].faction4_advanced_dreadnaught_i=0)},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction4_advanced_dreadnaught_i=1},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction4_advanced_dreadnaught_i&&"dreadnaught"==a.type&&(a.cost=4,a.combat=5,a.move=1,a.capacity=1,a.strength=2,a.bombardment_rolls=2,a.bombardment_combat=4,a.description="The Exotrireme I is a more powerful dreadnaught not vulnerable to Direct Hit cards"),a}}),this.importTech("faction4-exotrireme-ii",{name:"Exotrireme II",faction:"faction4",replaces:"dreadnaught",unit:1,type:"special",prereqs:["blue","blue","yellow"],text:"A much more powerful dreadnaught",initialize:function(e,t){null==e.game.players_info[t-1].faction4_advanced_dreadnaught_ii&&(e.game.players_info[t-1].faction4_advanced_dreadnaught_ii=0)},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction4_advanced_dreadnaught_ii=1,e.game.players_info[t-1].faction4_advanced_dreadnaught_i=0},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction4_advanced_dreadnaught_ii&&"dreadnaught"==a.type&&(a.cost=4,a.combat=5,a.move=2,a.capacity=1,a.strength=2,a.bombardment_rolls=2,a.bombardment_combat=4,a.description="The Exotrireme II is a more powerful dreadnaught not vulnerable to Direct Hit cards. It may be destroyed after a round of space combat to destroy up to two opponent ships."),a},spaceCombatRoundEnd:function(e,t,a,r){return e.doesPlayerHaveTech(t,"faction4-exotrireme-ii")&&e.doesSectorContainPlayerUnit(t,r,"dreadnaught")&&e.addMove("faction4_exotrireme_ii_sacrifice\t"+t+"\t"+r),e.doesPlayerHaveTech(a,"faction4-exotrireme-ii")&&e.doesSectorContainPlayerUnit(a,r,"dreadnaught")&&e.addMove("faction4_exotrireme_ii_sacrifice\t"+a+"\t"+r),1},handleGameLoop:function(e,t,a){if("faction4_exotrireme_ii_sacrifice"==a[0]){var r=parseInt(a[1]),n=e.returnSectorAndPlanets(a[2]),i=e.returnOpponentInSector(r,a[2]);if(r==e.game.player){if(-1==i)return e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("NOTIFY\tNo target ships for Sardakk Exotrireme II faction ability"),e.endTurn(),0;for(var s=0,o=0;o<n.s.units[i-1].length;o++)n.s.units[i-1][o].strength>0&&(s=1);if(0==s)return e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("NOTIFY\tNo target ships for Sardakk Exotrireme II action ability"),e.endTurn(),0;html='<div class="sf-readable">Do you wish to sacrifice a Dreadnaught to destroy up to 2 opponent ships?</div><ul>';for(var c=0;c<n.s.units[e.game.player-1].length;c++)"dreadnaught"==n.s.units[e.game.player-1][c].type&&(html+='<li class="option" id="'.concat(c,'">sacrifice ').concat(e.returnShipInformation(n.s.units[e.game.player-1][c]),"</li>"));html+='<li class="option" id="no">do not sacrifice</li>',html+="</ul>",e.updateStatus(html),$(".option").on("click",(function(){var t=$(this).attr("id");return"no"===t?(e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.endTurn(),0):(e.addMove("resolve\tfaction4_exotrireme_ii_sacrifice"),e.addMove("faction4_exotrireme_ii_picktwo\t"+e.game.player+"\t"+a[2]),e.addMove("NOTIFY\tSardakk sacrifies Exotritreme II to destroy opponent ships"),e.addMove("destroy_unit\t"+e.game.player+"\t"+e.game.player+"\tspace\t"+a[2]+"\t0\t"+t+"\t1"),e.endTurn(),0)}))}return 0}if("faction4_exotrireme_ii_picktwo"==a[0]){var l=parseInt(a[1]);e.returnSectorAndPlanets(a[2]);return l==e.game.player?(e.addMove("resolve\tfaction4_exotrireme_ii_picktwo"),e.playerDestroyOpponentShips(l,2,a[2])):e.updateStatus("Exotrireme II engaging in suicide assault"),0}}}),this.importTech("faction4-particle-weave",{name:"Particle Weave",faction:"faction4",type:"special",prereqs:["red","red"],text:"Infantry vaporize 1 opponent for each hit received",initialize:function(e,t){null==e.game.players_info[t-1].faction4_particle_weave&&(e.game.players_info[t-1].faction4_particle_weave=0,e.game.players_info[t-1].faction4_particle_weave_opponent=0,e.game.players_info[t-1].faction4_particle_weave_my_forces=0)},gainTechnology:function(e,t,a){"faction4-particle-weave"==a&&(e.game.players_info[t-1].faction4_particle_weave=1)},groundCombatTriggers:function(e,t,a,r){if(e.doesPlayerHaveTech(t,"faction4-particle-weave")){var n=e.returnSectorAndPlanets(a).p[r];e.game.players_info[t-1].faction4_particle_weave_my_forces=n.units[t-1].length}return 0},groundCombatRoundEnd:function(e,t,a,r,n){if(e.doesPlayerHaveTech(t,"faction4-particle-weave")){var i=e.returnSectorAndPlanets(r),s=i.p[n];if(s.units[t-1].length<e.game.players_info[t-1].faction4_particle_weave_my_forces){e.updateLog("Sardakk Particle Weave vaporizes 1 opponent infantry...");for(var o=0;o<s.units[a-1].length;o++)"infantry"==s.units[a-1][o].type&&(s.units[a-1].splice(o,1),o=s.units[a-1].length+1)}e.saveSystemAndPlanets(i)}if(e.doesPlayerHaveTech(a,"faction4-particle-weave")){var c=e.returnSectorAndPlanets(r),l=c.p[n];if(l.units[a-1].length<e.game.players_info[a-1].faction4_particle_weave_my_forces){e.updateLog("Sardakk Particle Weave vaporizes 1 opponent infantry...");for(var u=0;u<l.units[t-1].length;u++)"infantry"==l.units[t-1][u].type&&(l.units[t-1].splice(u,1),u=l.units[t-1].length+1)}e.saveSystemAndPlanets(c)}return 1}})},function(e,t){this.importFaction("faction1",{id:"faction1",name:"Federation of Sol",nickname:"Sol",homeworld:"sector52",space_units:["carrier","carrier","destroyer","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","infantry","spacedock"],tech:["neural-motivator","antimass-deflectors","faction1-orbital-drop","faction1-versatile","faction1-flagship"],background:"faction1.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Sol Federation. a Terran faction under cellular military government. Your reinforced infantry and tactical flexibility will be important in your fight for the Imperial Throne. Good luck!</div>'}),this.importTech("faction1-flagship",{name:"Sol Flagship",faction:"faction1",text:"Flagship gains 1 infantry when player selects a strategy card",type:"ability",playersChooseStrategyCardsBeforeTriggers:function(e,t){return e.doesPlayerHaveTech(t,"faction1-flagship")&&e.returnPlayerFleet(t).flagship>0?1:0},playersChooseStrategyCardsBeforeEvent:function(e,t){for(var a in e.game.sectors)if(e.doesSectorContainPlayerUnit(t,a,"flagship"))for(var r=e.game.sectors[a],n=0;n<r.units[t-1].length;n++)if("flagship"==r.units[t-1][n].type)return e.loadUnitOntoShip(t,a,n,"infantry"),e.updateLog("Faction Ability: infantry added to Sol Flagship..."),1;return 1}}),this.importTech("faction1-orbital-drop",{name:"Orbital Drop",faction:"faction1",type:"ability",text:"Drop two infantry onto any controlled planet",initialize:function(e,t){null==e.game.players_info[t-1].orbital_drop&&(e.game.players_info[t-1].orbital_drop=0)},gainTechnology:function(e,t,a){"faction1-orbital-drop"==a&&(e.game.players_info[t-1].orbital_drop=1)},menuOption:function(e,t,a){var r={};return"main"===t&&(r.event="orbitaldrop",r.html='<li class="option" id="orbitaldrop">orbital drop</li>'),r},menuOptionTriggers:function(e,t,a){return e.doesPlayerHaveTech(a,"faction1-orbital-drop")&&"main"===t&&e.game.players_info[a-1].strategy_tokens>0&&0==e.game.state.active_player_moved?1:0},menuOptionActivated:function(e,t,a){if(e.game.player==a)return e.playerSelectPlanetWithFilter("Use Orbital Drop to reinforce which planet with two infantry: ",(function(t){return e.game.planets[t].owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sector),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" orbital drops 2 infantry onto "+t.name),e.endTurn(),0}),null),0}}),this.importTech("faction1-versatile",{name:"Versatile",faction:"faction1",type:"ability",text:"Gain an extra command token each round",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction1-versatile")&&(e.game.players_info[t-1].new_tokens_per_round=3)}}),this.importTech("faction1-advanced-carrier-ii",{name:"Advanced Carrier II",faction:"faction1",replaces:"carrier-ii",unit:1,type:"special",text:"A more sophisticated carrier",prereqs:["blue","blue"],initialize:function(e,t){null==e.game.players_info[t-1].faction1_advanced_carrier_ii&&(e.game.players_info[t-1].faction1_advanced_carrier_ii=0)},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction1_advanced_carrier_ii=1},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction1_advanced_carrier_ii&&"carrier"==a.type&&(a.cost=3,a.combat=9,a.move=2,a.capacity=8),a}}),this.importTech("faction1-advanced-infantry-ii",{name:"Special Ops II",faction:"faction1",replaces:"infantry-ii",unit:1,type:"special",text:"Battle-hardened infantry",prereqs:["green","green"],initialize:function(e,t){e.game.players_info[t-1].faction1_advanced_infantry_ii=0},gainTechnology:function(e,t,a){e.game.players_info[t-1].faction1_advanced_infantry_ii=1},upgradeUnit:function(e,t,a){return 1==e.game.players_info[a.owner-1].faction1_advanced_infantry_ii&&"infantry"==a.type&&(a.cost=.5,a.combat=6),a}})},function(e,t){this.importFaction("faction3",{id:"faction3",name:"XXCha Kingdom",nickname:"XXCha",homeworld:"sector51",space_units:["carrier","cruiser","cruiser","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","pds","spacedock"],tech:["graviton-laser-system","faction3-peace-accords","faction3-quash","faction3-flagship","assault-cannon"],background:"faction3.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the XXCha Kingdom, a faction which excels in diplomacy and defensive weaponry. With the proper alliances and political maneuvers your faction you can be a contender for the Imperial Throne. Good luck!</div>'}),this.importTech("faction3-flagship",{name:"XXCha Flagship",faction:"faction3",type:"ability",text:"3 space cannons which target adjacent systems attached to flagship",returnPDSUnitsWithinRange:function(e,t,a,r,n,i){if(!e.doesPlayerHaveTech(t,"faction3-flagship"))return i;if(e.returnPlayerFleet(t).flagship>0)for(var s=e.returnAdjacentSectors(n),o=0;o<s.length;o++)if(e.doesSectorContainPlayerUnit(t,s[o],"flagship")){var c={name:"XXCha Flagship #1"};c.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),c.unit.name="Flagship",c.range=1,c.combat=6,c.owner=t,c.sector=n;var l={name:"XXCha Flagship #2"};l.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),l.unit.name="Flagship",l.range=1,l.combat=6,l.owner=t,l.sector=n;var u={name:"XXCha Flagship #3"};return u.unit=JSON.parse(JSON.stringify(e.returnUnit("pds",t))),u.unit.name="Flagship",u.range=1,u.combat=6,u.owner=t,u.sector=n,i.push(c),i.push(l),i.push(u),i}return i}}),this.importTech("faction3-peace-accords",{name:"Peace Accords",faction:"faction3",type:"ability",text:"Colonize adjacent unprotected planet when diplomacy secondary is played",initialize:function(e,t){null==e.game.players_info[t-1].peace_accords&&(e.game.players_info[t-1].peace_accords=0)},gainTechnology:function(e,t,a){"faction3-peace-accords"==a&&(e.game.players_info[t-1].peace_accords=1)},strategyCardAfterTriggers:function(e,t,a,r){return 1==e.game.players_info[t-1].peace_accords?1:0},strategyCardAfterEvent:function(e,t,a,r){if("diplomacy"==r){for(var n=e.returnPlayerPlanetCards(t),i=[],s=[],o=[],c=0;c<n.length;c++)i.includes(e.game.planets[n[c]].sector)||(i.push(e.game.planets[n[c]].sector),s.push(e.game.planets[n[c]].sector));for(var l=0;l<i.length;l++)for(var u=e.returnAdjacentSectors(i[l]),d=0;d<u.length;d++)s.includes(u[d])||s.push(u[d]);for(var p=0;p<s.length;p++){var h=e.returnSectorAndPlanets(s[p]);if(h.p)for(var f=0;f<h.p.length;f++){h.p[f].owner!=t&&(e.doesPlanetHaveInfantry(h.p[f])||o.push(h.p[f].planet))}}return o.length<0?1:1==e.game.players_info[t-1].peace_accords?(e.game.player==t&&e.playerSelectPlanetWithFilter("Select a planet to annex via Peace Accords: ",(function(e){return o.includes(e)?1:0}),(function(t){return e.addMove("annex\t"+e.game.player+"\t"+e.game.planets[t].sector+"\t"+e.game.planets[t].idx),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" annexes "+e.game.planets[t].name+" via Peace Accords"),e.endTurn(),0}),(function(){return e.endTurn(),0})),0):1}return 1}}),this.importTech("faction3-quash",{name:"Quash",faction:"faction3",type:"ability",text:"Spend strategy token to quash upcoming agenda",initialize:function(e,t){null==e.game.players_info[t-1].quash&&(e.game.players_info[t-1].quash=0)},gainTechnology:function(e,t,a){"faction3-quash"==a&&(e.game.players_info[t-1].quash=1)},menuOption:function(e,t,a){var r={};return"main"===t&&(r.event="quash",r.html='<li class="option" id="quash">quash agenda</li>'),r},menuOptionTriggers:function(e,t,a){return e.doesPlayerHaveTech(a,"faction3-quash")&&"main"==t&&e.game.players_info[a-1].strategy_tokens>0&&0==e.game.state.active_player_moved?1:0},menuOptionActivated:function(e,t,a){if(e.game.player==a){var r="";for(r+="Select one agenda to quash in the Galactic Senate.<ul>",i=0;i<e.game.state.agendas.length;i++)""!=e.game.state.agendas[i]&&(r+='<li class="option" id="'+e.game.state.agendas[i]+'">'+e.agenda_cards[e.game.state.agendas[i]].name+"</li>");r+="</ul>",e.updateStatus(r),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){var t=$(this).attr("id");e.updateStatus("Quashing Agenda"),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.addMove("quash\t"+t+"\t1"),e.endTurn()}))}}}),this.importTech("faction3-instinct-training",{name:"Instinct Training",faction:"faction3",prereqs:["green"],color:"green",type:"special",text:"Expend strategy token to cancel opponent action card",initialize:function(e,t){null==e.game.players_info[t-1].instinct_training&&(e.game.players_info[t-1].instinct_training=0)},gainTechnology:function(e,t,a){"faction3-instinct-training"==a&&(e.game.players_info[t-1].instinct_training=1)},playActionCardTriggers:function(e,t,a,r){return 1==e.game.players_info[t-1].instinct_training?1:0},playActionCardEvent:function(e,t,a,r){return e.game.player==t&&(e.addMove("resolve\taction_card"),e.addMove("resolve\taction_card_post"),e.addMove("expend\t"+e.game.player+"strategy1"),e.endTurn()),0}}),this.importTech("faction3-field-nullification",{name:"Nullification Fields",faction:"faction3",type:"special",color:"yellow",prereqs:["yellow","yellow"],text:"Terminate the turn of active player who activates a system containing your ship",initialize:function(e,t){null==e.game.players_info[t-1].field_nullification&&(e.game.players_info[t-1].field_nullification=0,e.game.players_info[t-1].field_nullification_exhausted=0)},onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction3-field-nullification")&&(e.game.players_info[t-1].field_nullification_exhausted=0)},gainTechnology:function(e,t,a){"faction3-field-nullification"==a&&(e.game.players_info[t-1].field_nullification=1,e.game.players_info[t-1].field_nullification_exhausted=0)},activateSystemTriggers:function(e,t,a,r){return e.doesPlayerHaveTech(a,"faction3-field-nullification")&&e.doesSectorContainPlayerShips(a,r)&&t!=a?1:0},activateSystemEvent:function(e,t,a,r){if(e.doesPlayerHaveTech(a,"faction3-field-nullification")){if(1==e.game.players_info[a-1].field_nullification_exhausted)return 1;if(e.game.player!=a)return e.updateStatus(e.returnFaction(a)+" is deciding whether to use Nullification Fields"),0;return'<li class="textchoice" id="yes">activate nullification field</li>','<li class="textchoice" id="no">do not activate</li>',"</ul>",e.updateStatus('Do you wish to use Field Nullification to terminate this player\'s turn? <ul><li class="textchoice" id="yes">activate nullification field</li><li class="textchoice" id="no">do not activate</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var n=$(this).attr("id");"yes"==n&&(e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.addMove("field_nullification\t"+a+"\t"+t+"\t"+r),e.endTurn()),"no"==n&&e.endTurn()})),0}return 1},handleGameLoop:function(e,t,a){if("field_nullification"==a[0]){var r=parseInt(a[1]),n=parseInt(a[2]);a[3];return e.game.queue.splice(t,1),e.updateLog(e.returnFactionNickname(r)+" uses Nullification Fields to end "+e.returnFactionNickname(n)+" turn"),1}return 1}})},function(e,t){this.importFaction("faction5",{id:"faction5",name:"Yin Brotherhood",nickname:"Yin",homeworld:"sector74",space_units:["carrier","carrier","destroyer","fighter","fighter","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","spacedock"],tech:["sarween-tools","faction5-indoctrination","faction5-devotion","faction5-flagship"],background:"faction5.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Yin Brotherhood, a monastic order of religious zealots whose eagerness to sacrifice their lives for the collective good makes them terrifying in one-on-one combat. Direct their self-destructive passion and you can win the Imperial Throne. Good luck!</div>'}),this.importTech("faction5-indoctrination",{name:"Indoctrination",faction:"faction5",type:"ability",text:"Spend 2 influence to convert 1 enemy infantry at combat start",groundCombatTriggers:function(e,t,a,r){if(e.doesPlayerHaveTech(t,"faction5-indoctrination")&&(e.returnSectorAndPlanets(a).p[r].units[t-1].length>0&&e.returnAvailableInfluence(t)>=2&&e.game.state.ground_combat_round<2))return 1;return 0},groundCombatEvent:function(e,t,a,r){if(e.game.player==t)return e.returnSectorAndPlanets(a).p[r].units[t-1].length>0?e.playIndoctrination(e,t,a,r,(function(e){e.endTurn()})):e.endTurn(),0}}),this.importTech("faction5-devotion",{name:"Devotion",faction:"faction5",type:"ability",text:"Sacrifice destroyer or cruiser to assign 1 enemy hit at combat end",spaceCombatTriggers:function(e,t,a){return e.doesPlayerHaveTech(t,"faction5-devotion")&&e.doesPlayerHaveShipsInSector(t,a)&&e.game.state.space_combat_round>0?1:0},spaceCombatEvent:function(e,t,a){return e.game.player==t&&e.playDevotion(e,t,a,(function(){e.endTurn()})),0}}),this.importTech("faction5-impulse-core",{name:"Impulse Core",faction:"faction5",prereqs:["yellow","yellow"],color:"yellow",type:"special",text:"Sacrifice destroyer or cruiser at combat start, opponent takes hit on capital ship",spaceCombatTriggers:function(e,t,a){return e.doesPlayerHaveTech(t,"faction5-impulse-core")&&e.doesPlayerHaveShipsInSector(t,a)&&0==e.game.state.space_combat_round?1:0},spaceCombatEvent:function(e,t,a){return e.game.player==t&&e.playDevotion(e,t,a,(function(){e.endTurn()}),1),0}}),this.importTech("faction5-yin-spinner",{name:"Yin Spinner",faction:"faction5",prereqs:["green","green"],color:"green",type:"special",initialize:function(e,t){null==e.game.players_info[t-1].faction5_yin_spinner&&(e.game.players_info[t-1].faction5_yin_spinner=0)},gainTechnology:function(e,t,a){"faction5-yin-spinner"==a&&(e.game.players_info[t-1].faction5_yin_spinner=1)},playerEndTurnTriggers:function(e,t){return 1==e.game.players_info[t-1].faction5_yin_spinner&&e.game.player==t&&1==e.game.state.active_player_has_produced?1:0},playerEndTurnEvent:function(e,t){if(e.game.player!=t)return 0;e.playerSelectPlanetWithFilter("Yin Spinner Tech: place additional infantry on which planet?",(function(t){return(t=e.game.planets[t]).owner==e.game.player?1:0}),(function(t){return t=e.game.planets[t],e.addMove("produce\t"+e.game.player+"\t1\t"+t.idx+"\tinfantry\t"+t.sectors),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" spins extra infantry on "+t.name),e.endTurn(),0}),(function(){e.playerTurn()}))}}),this.importTech("faction5-flagship",{name:"Yin Flagship",faction:"faction5",type:"ability",text:"Wipes out all ships in sector when destroyed",unitDestroyed:function(e,t,a){if("flagship"==a.type&&e.doesPlayerHaveTech(a.owner,"faction5-flagship")){var r=e.game.state.activated_sector;""===r&&(r=e.game.state.space_combat_sector);var n=e.returnSectorAndPlanets(r);if(n){for(var i=0;i<n.s.units.length;i++)n.s.units[i]=[];for(var s=0;s<n.p.length;s++)for(var o=0;o<n.p[s].units.length;o++)n.p[s].units[o]=[];e.saveSystemAndPlanets(r),e.updateSectorGraphics(r),e.updateLog("The destruction of the Yin Flagship has caused a terrible calamity...")}}return a}}),this.playIndoctrination=function(e,t,a,r,n){if(this.game.player==t&&this.game.player==t){var i=e.returnSectorAndPlanets(a),s=i.p[r],o=e.returnOpponentOnPlanet(t,s);if(e.returnNonPlayerInfantryOnPlanet(t,s)<=0||-1==o)n(e);else if(i.p[r].units[o-1].length<=0)n(e);else{'<li class="textchoice" id="yes">yes</li>','<li class="textchoice" id="no">no</li>',"</ul>",this.updateStatus('<div class=\'sf-readable\'>Do you wish to spend 2 influence to convert 1 enemy infantry to your side?</div><ul><li class="textchoice" id="yes">yes</li><li class="textchoice" id="no">no</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var i=$(this).attr("id");"no"!==i?"yes"===i&&e.playerSelectInfluence(2,(function(i){1==i?(e.addMove("destroy_infantry_on_planet\t"+t+"\t"+a+"\t"+r+"\t1"),e.addMove("add_infantry_to_planet\t"+t+"\t"+s.planet+"\t1"),e.addMove("NOTIFY\tYin Indoctrination converts opposing infantry"),e.endTurn()):n(e)})):n(e)}))}}},this.playDevotion=function(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e.game.player!=t)return 0;var i=e.returnSectorAndPlanets(a),s=e.returnOpponentInSector(t,a),o=e.doesSectorContainPlayerUnit(t,a,"destroyer"),c=e.doesSectorContainPlayerUnit(t,a,"cruiser");if(1==o||1==c){if(-1!=s){var l="<div class='sf-readable'>Do you wish to sacrifice a Destroyer or Cruiser to assign 1 hit to an enemy ship?</div><ul>";return o&&(l+='<li class="textchoice" id="destroyer">sacrifice destroyer</li>'),c&&(l+='<li class="textchoice" id="cruiser">sacrifice cruiser</li>'),l+='<li class="textchoice" id="no">no</li>',l+="</ul>",e.updateStatus(l),$(".textchoice").off(),$(".textchoice").on("click",(function(){var s=$(this).attr("id");if("no"!==s){if("destroyer"===s){for(var o=0,c=0;c<i.s.units[t-1].length;c++)"destroyer"==i.s.units[t-1][c].type&&(o=c);return e.addMove("destroy_unit\t"+t+"\t"+t+"\tspace\t"+a+"\t0\t"+o+"\t1"),void e.playDevotionAssignHit(e,t,a,r,n)}if("cruiser"===s){for(var l=0,u=0;u<i.s.units[t-1].length;u++)"cruiser"==i.s.units[t-1][u].type&&(l=u);return e.addMove("destroy_unit\t"+t+"\t"+t+"\tspace\t"+a+"\t0\t"+l+"\t1"),void e.playDevotionAssignHit(e,t,a,r,n)}}else r(e)})),0}r(e)}else r(e)},this.playDevotionAssignHit=function(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=e.returnSectorAndPlanets(a),s=e.returnOpponentInSector(t,a);if(1==n)return this.addMove("assign_hits_capital_ship\t"+s+"\t"+a+"\t1"),void r();for(var o="<div class='sf-readable'>Assign 1 hit to which opponent ship?</div><ul>",c=0;c<i.s.units[s-1].length;c++){var l=i.s.units[s-1][c];if(o+='<li class="textchoice" id="'+c+'">'+l.name,l.capacity>=1){for(var u="",d=0,p=0,h=0;h<l.storage.length;h++)"infantry"==l.storage[h].type&&p++,"fighter"==i.s.units[e.game.player-1][c].storage[h].type&&d++;(p>0||d>0)&&(u+=" ",p>0&&(u+=p+"i"),d>0&&(p>0&&(u+=", "),u+=d+"f"),u+=" "),o+=u}o+="</li>"}o+="</ul>",e.updateStatus(o),$(".textchoice").off(),$(".textchoice").on("click",(function(){$(".textchoice").off();var n=$(this).attr("id");e.addMove("assign_hit\t"+t+"\t"+s+"\t"+t+"\tship\t"+a+"\t"+n+"\t1"),r(e)}))}},function(e,t){this.importFaction("faction6",{id:"faction6",name:"Yssaril Tribes",nickname:"Yssaril",homeworld:"sector75",space_units:["carrier","carrier","cruiser","fighter","fighter"],ground_units:["infantry","infantry","infantry","infantry","infantry","pds","spacedock"],tech:["neural-motivator","faction6-stall-tactics","faction6-scheming","faction6-crafty","faction6-flagship"],background:"faction6.jpg",promissary_notes:["trade","political","ceasefire","throne"],intro:'<div style="font-weight:bold">Welcome to Red Imperium!</div><div style="margin-top:10px;margin-bottom:15px;">You are playing as the Yssaril Tribe, a primitive race of swamp-dwelling creatures whose fast instincts and almost unerring ability to change tactics on-the-fly lead many to suspect more is at work than their primitive appearance belies. Good luck!</div>'}),this.importTech("faction6-stall-tactics",{name:"Stall Tactics",faction:"faction6",type:"ability",text:"Discard an Action Card to stall one turn",initialize:function(e,t){null==e.game.players_info[t-1].stall_tactics&&(e.game.players_info[t-1].stall_tactics=0)},gainTechnology:function(e,t,a){"faction6-stall-tactics"==a&&(e.game.players_info[t-1].stall_tactics=1)},menuOption:function(e,t,a){var r={};return"main"===t&&(r.event="stalltactics",r.html='<li class="option" id="stalltactics">discard action card (stall)</li>'),r},menuOptionTriggers:function(e,t,a){if(e.doesPlayerHaveTech(a,"faction6-stall-tactics")&&"main"===t&&e.returnPlayerActionCards(a).length>0)return 1;return 0},menuOptionActivated:function(e,t,a){return e.game.player==a&&e.playerDiscardActionCards(1,(function(){return e.addMove("resolve\tplay"),e.addMove("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.addMove("player_end_turn\t"+e.game.player),e.endTurn(),0})),0}}),this.importTech("faction6-crafty",{name:"Crafty",faction:"faction6",type:"ability",text:"Unlimited action cards. Game effects cannot change.",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"faction6-crafty")&&(e.game.players_info[t-1].action_card_limit=1e3)}}),this.importTech("faction6-scheming",{name:"Scheming",faction:"faction6",type:"ability",text:"Receive bonus card when gaining action cards, then discard one",initialize:function(e,t){null==e.game.players_info[t-1].faction6_scheming&&(e.game.players_info[t-1].faction6_scheming=0)},gainTechnology:function(e,t,a){"faction6-scheming"==a&&(e.game.players_info[t-1].faction6_scheming=1)},gainActionCards:function(e,t,a){return e.doesPlayerHaveTech(t,"faction6-scheming")&&(e.game.queue.push("yssaril_action_card_discard\t"+t+"\t1"),e.game.queue.push("gain\t"+t+"\taction_cards\t1\t0"),e.game.queue.push("DEAL\t2\t"+t+"\t1"),e.game.queue.push("NOTIFY\t"+e.returnFaction(t)+" gains bonus action card and must discard one")),1},handleGameLoop:function(e,t,a){if("yssaril_action_card_discard"==a[0]){var r=parseInt(a[1]),n=parseInt(a[2]);return e.game.queue.splice(t,1),e.game.player===r&&e.playerDiscardActionCards(n,(function(){e.endTurn()})),0}return 1}}),this.importTech("faction6-transparasteel-plating",{name:"Transparasteel Plating",faction:"faction6",prereqs:["green"],color:"green",type:"special",text:"Selectively terminate action cards from players who have passed on your turn",initialize:function(e,t){null==e.game.players_info[t-1].transparasteel_plating&&(e.game.players_info[t-1].transparasteel_plating=0)},gainTechnology:function(e,t,a){"faction6-transparasteel-plating"==a&&(e.game.players_info[t-1].transparasteel_plating=1)},playActionCardTriggers:function(e,t,a,r){return 1==e.game.players_info[t-1].transparasteel_plating&&e.game.player==t&&a!=t&&1==e.game.players_info[a-1].passed?1:0},playActionCardEvent:function(e,t,a,r){return e.game.player==t&&(e.addMove("resolve\taction_card"),e.addMove("resolve\taction_card_post"),e.addMove("expend\t"+e.game.player+"strategy1"),e.endTurn()),0}}),this.importTech("faction6-mageon-implants",{name:"Mageon Implants",faction:"faction6",prereqs:["green","green","green"],color:"green",type:"special",text:"Exhaust to look at other players action cards and take one.",initialize:function(e,t){null==e.game.players_info[t-1].mageon_implants&&(e.game.players_info[t-1].mageon_implants=0,e.game.players_info[t-1].mageon_implants_exhausted=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].mageon_implants&&(e.game.players_info[t-1].mageon_implants=1,e.game.players_info[t-1].mageon_implants_exhausted=0)},gainTechnology:function(e,t,a){"faction6-mageon-implants"==a&&(e.game.players_info[t-1].mageon_implants=1,e.game.players_info[t-1].mageon_implants_exhausted=0)},menuOption:function(e,t,a){return"main"==t?{event:"mageonimplants",html:'<li class="option" id="mageonimplants">exhaust mageon implants</li>'}:{}},menuOptionTriggers:function(e,t,a){return"main"==t&&0==e.game.players_info[a-1].mageon_implants_exhausted&&1==e.game.players_info[a-1].mageon_implants?1:0},menuOptionActivated:function(e,t,a){return e.playerSelectPlayerWithFilter("Select a player from which to take an action card (if possible): ",(function(t){return t!=e.game.player?1:0}),(function(t){return e.addMove("faction6_choose_card_triggered\t"+e.game.player+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" pulls a random action card from "+e.returnFaction(t)),e.endTurn(),0}),(function(){e.playerTurn()})),0},handleGameLoop:function(e,t,a){if("faction6_choose_card_triggered"==a[0]){var r=parseInt(a[1]),n=parseInt(a[2]);if(e.game.queue.splice(t,1),e.game.player===n){var i=e.returnPlayerActionCards();e.addMove("faction6_choose_card_return\t"+r+"\t"+n+"\t"+JSON.stringify(i)),e.endTurn()}return 0}if("faction6_choose_card_return"==a[0]){var s=parseInt(a[1]),o=parseInt(a[2]),c=JSON.parse(a[3]);if(e.game.queue.splice(t,1),e.game.player===s){for(var l='<div class="" style="margin-bottom:10px">Select '+e.returnFactionNickname(o)+" action card:</div><ul>",u=0;u<c.length;u++)l+='<li class="option" id="'.concat(u,'">').concat(e.action_cards[c[u]].name,"</li>");l+='<li class="option" id="cancel">skip</li>',e.updateStatus(l),$(".option").off(),$(".option").on("click",(function(){$(".option").off();var t=$(this).attr("id");return"skip"===t?(e.playerTurn(),0):(e.addMove("setvar\tplayers\t"+e.game.player+"\tmageon_implants_exhausted\tint\t1"),e.addMove("pull\t"+e.game.player+"\t"+o+"\taction\t"+c[t]),e.endTurn(),0)}))}return 0}return 1}}),this.importTech("faction6-flagship",{name:"Yssaril Flagship",faction:"faction6",type:"ability",text:"May move through sectors containing other ships",upgradeUnit:function(e,t,a){return e.doesPlayerHaveTech(a.owner,"faction6-flagship")&&"flagship"==a.type&&(a.may_fly_through_sectors_containing_other_ships=1,a.move=3),a}})},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-action-cards.js: Unexpected token, expected ";" (3:30)\n\n[0m [90m 1 | [39m  [0m\n[0m [90m 2 | [39m  [0m\n[0m[31m[1m>[22m[39m[90m 3 | [39m  returnActionCards(types[33m=[39m[]) {[0m\n[0m [90m   | [39m                              [31m[1m^[22m[39m[0m\n[0m [90m 4 | [39m[0m\n[0m [90m 5 | [39m    [36mif[39m (types[33m.[39mlength [33m==[39m [35m0[39m) { [36mreturn[39m [36mthis[39m[33m.[39maction_cards[33m;[39m }[0m\n[0m [90m 6 | [39m    [36melse[39m {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-agenda-cards.js: Unexpected token, expected ";" (2:22)\n\n[0m [90m 1 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 2 | [39m  returnAgendaCards() {[0m\n[0m [90m   | [39m                      [31m[1m^[22m[39m[0m\n[0m [90m 3 | [39m    [36mreturn[39m [36mthis[39m[33m.[39magenda_cards[33m;[39m[0m\n[0m [90m 4 | [39m  }[0m\n[0m [90m 5 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-display.js: Unexpected token, expected ";" (5:15)\n\n[0m [90m 3 | [39m[90m// redraw all sectors[39m[0m\n[0m [90m 4 | [39m[90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m 5 | [39mdisplayBoard() {[0m\n[0m [90m   | [39m               [31m[1m^[22m[39m[0m\n[0m [90m 6 | [39m  [36mfor[39m (let i [36min[39m [36mthis[39m[33m.[39mgame[33m.[39msystems) {[0m\n[0m [90m 7 | [39m    [36mthis[39m[33m.[39mupdateSectorGraphics(i)[33m;[39m[0m\n[0m [90m 8 | [39m  }[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-end.js: Unexpected token (5:0)\n\n[0m [90m 3 | [39m[0m\n[0m [90m 4 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 5 | [39m}[0m\n[0m [90m   | [39m[31m[1m^[22m[39m[0m\n[0m [90m 6 | [39m[0m\n[0m [90m 7 | [39mmodule[33m.[39mexports [33m=[39m [33mImperium[39m[33m;[39m[0m\n[0m [90m 8 | [39m  [0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.parseExprAtom (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:10227:20)\n    at Parser.parseExprSubscripts (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9789:23)\n    at Parser.parseUpdate (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9769:21)\n    at Parser.parseMaybeUnary (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9758:17)\n    at Parser.parseExprOps (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9628:23)\n    at Parser.parseMaybeConditional (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9602:23)\n    at Parser.parseMaybeAssign (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9565:21)\n    at Parser.parseExpression (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9517:23)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11462:23)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-events.js: Unexpected token, expected ";" (3:29)\n\n[0m [90m 1 | [39m[0m\n[0m [90m 2 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 3 | [39m  returnEventObjects(player) {[0m\n[0m [90m   | [39m                             [31m[1m^[22m[39m[0m\n[0m [90m 4 | [39m[0m\n[0m [90m 5 | [39m    let z [33m=[39m [][33m;[39m[0m\n[0m [90m 6 | [39m    let zz [33m=[39m [][33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-factions.js: Unexpected token, expected ";" (3:19)\n\n[0m [90m 1 | [39m  [0m\n[0m [90m 2 | [39m  [0m\n[0m[31m[1m>[22m[39m[90m 3 | [39m  returnFactions() {[0m\n[0m [90m   | [39m                   [31m[1m^[22m[39m[0m\n[0m [90m 4 | [39m    [36mreturn[39m [36mthis[39m[33m.[39mfactions[33m;[39m[0m\n[0m [90m 5 | [39m  }[0m\n[0m [90m 6 | [39m  [0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-gameloop.js: Unexpected token, expected ";" (6:27)\n\n[0m [90m 4 | [39m  [90m// Core Game Logic //[39m[0m\n[0m [90m 5 | [39m  [90m/////////////////////[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m  handleGameLoop(msg[33m=[39m[36mnull[39m) {[0m\n[0m [90m   | [39m                           [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m  [0m\n[0m [90m 8 | [39m    let imperium_self [33m=[39m [36mthis[39m[33m;[39m[0m\n[0m [90m 9 | [39m    let z [33m=[39m imperium_self[33m.[39mreturnEventObjects()[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-helpers.js: Unexpected token, expected ";" (6:37)\n\n[0m [90m 4 | [39m  [90m// utility function to convert sector32 to 3_2 or whatever[39m[0m\n[0m [90m 5 | [39m  [90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m  convertSectorToSectorname(sectorN) {[0m\n[0m [90m   | [39m                                     [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m[0m\n[0m [90m 8 | [39m    [36mfor[39m (let i [36min[39m [36mthis[39m[33m.[39mgame[33m.[39mboard) {[0m\n[0m [90m 9 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mboard[i][33m.[39mtile [33m==[39m sectorN) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-initialize.js: Unexpected token (3:2)\n\n[0m [90m 1 | [39m  [0m\n[0m [90m 2 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 3 | [39m  } [90m// end initializeGameObjects[39m[0m\n[0m [90m   | [39m  [31m[1m^[22m[39m[0m\n[0m [90m 4 | [39m[0m\n[0m [90m 5 | [39m[0m\n[0m [90m 6 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.parseExprAtom (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:10227:20)\n    at Parser.parseExprSubscripts (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9789:23)\n    at Parser.parseUpdate (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9769:21)\n    at Parser.parseMaybeUnary (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9758:17)\n    at Parser.parseExprOps (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9628:23)\n    at Parser.parseMaybeConditional (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9602:23)\n    at Parser.parseMaybeAssign (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9565:21)\n    at Parser.parseExpression (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9517:23)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11462:23)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-objectives.js: Unexpected token, expected ";" (2:27)\n\n[0m [90m 1 | [39m  [0m\n[0m[31m[1m>[22m[39m[90m 2 | [39m  returnSecretObjectives() {[0m\n[0m [90m   | [39m                           [31m[1m^[22m[39m[0m\n[0m [90m 3 | [39m    [36mreturn[39m [36mthis[39m[33m.[39msecret_objectives[33m;[39m[0m\n[0m [90m 4 | [39m  }[0m\n[0m [90m 5 | [39m  [0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-player.js: Unexpected token, expected ";" (3:23)\n\n[0m [90m 1 | [39m[0m\n[0m [90m 2 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 3 | [39mreturnPlayers(num [33m=[39m [35m0[39m) {[0m\n[0m [90m   | [39m                       [31m[1m^[22m[39m[0m\n[0m [90m 4 | [39m[0m\n[0m [90m 5 | [39m  [36mvar[39m players [33m=[39m [][33m;[39m[0m\n[0m [90m 6 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-promissary.js: Unexpected token, expected ";" (2:26)\n\n[0m [90m 1 | [39m  [0m\n[0m[31m[1m>[22m[39m[90m 2 | [39m  returnPromissaryNotes() {[0m\n[0m [90m   | [39m                          [31m[1m^[22m[39m[0m\n[0m [90m 3 | [39m    [36mreturn[39m [36mthis[39m[33m.[39mpromissary_notes[33m;[39m[0m\n[0m [90m 4 | [39m  }[0m\n[0m [90m 5 | [39m  [0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-start.js: Unexpected token (82:0)\n\n[0m [90m 80 | [39mconsole[33m.[39mlog([32m"INITIALIZE GAME OBJECTS"[39m)[33m;[39m[0m\n[0m [90m 81 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 82 | [39m[0m\n[0m [90m    | [39m[31m[1m^[22m[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.parseExprAtom (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:10227:20)\n    at Parser.parseExprSubscripts (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9789:23)\n    at Parser.parseUpdate (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9769:21)\n    at Parser.parseMaybeUnary (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9758:17)\n    at Parser.parseExprOps (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9628:23)\n    at Parser.parseMaybeConditional (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9602:23)\n    at Parser.parseMaybeAssign (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9565:21)\n    at Parser.parseExpression (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9517:23)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11462:23)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-state.js: Unexpected token, expected ";" (2:16)\n\n[0m [90m 1 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 2 | [39m  returnState() {[0m\n[0m [90m   | [39m                [31m[1m^[22m[39m[0m\n[0m [90m 3 | [39m [0m\n[0m [90m 4 | [39m    let state [33m=[39m {}[33m;[39m[0m\n[0m [90m 5 | [39m [0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-state-checks.js: Unexpected token, expected ";" (7:24)\n\n[0m [90m  5 | [39m  [90m// Return Factions //[39m[0m\n[0m [90m  6 | [39m  [90m/////////////////////[39m[0m\n[0m[31m[1m>[22m[39m[90m  7 | [39m  returnFaction(player) {[0m\n[0m [90m    | [39m                        [31m[1m^[22m[39m[0m\n[0m [90m  8 | [39m    [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayers_info[player[33m-[39m[35m1[39m] [33m==[39m [36mnull[39m) { [36mreturn[39m [32m"Unknown"[39m[33m;[39m }[0m\n[0m [90m  9 | [39m    [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayers_info[player[33m-[39m[35m1[39m] [33m==[39m undefined) { [36mreturn[39m [32m"Unknown"[39m[33m;[39m }[0m\n[0m [90m 10 | [39m    [36mreturn[39m [36mthis[39m[33m.[39mreturnFactionName([36mthis[39m[33m,[39m player)[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-state-updates.js: Unexpected token, expected ";" (10:21)\n\n[0m [90m  8 | [39m  [90m// available.[39m[0m\n[0m [90m  9 | [39m  [90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m  resetTechBonuses() {[0m\n[0m [90m    | [39m                     [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m    let technologies [33m=[39m [36mthis[39m[33m.[39mreturnTechnology()[33m;[39m[0m\n[0m [90m 13 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-strategy-cards.js: Unexpected token, expected ";" (8:24)\n\n[0m [90m  6 | [39m  [90m// in any particular round.[39m[0m\n[0m [90m  7 | [39m  [90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m  returnStrategyCards() {[0m\n[0m [90m    | [39m                        [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m    [36mreturn[39m [36mthis[39m[33m.[39mstrategy_cards[33m;[39m[0m\n[0m [90m 10 | [39m  }[0m\n[0m [90m 11 | [39m  [0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-tech.js: Unexpected token, expected ";" (16:21)\n\n[0m [90m 14 | [39m  [90m// unit --\x3e unit technology[39m[0m\n[0m [90m 15 | [39m  [90m// [39m[0m\n[0m[31m[1m>[22m[39m[90m 16 | [39m  returnTechnology() {[0m\n[0m [90m    | [39m                     [31m[1m^[22m[39m[0m\n[0m [90m 17 | [39m    [36mreturn[39m [36mthis[39m[33m.[39mtech[33m;[39m[0m\n[0m [90m 18 | [39m  }[0m\n[0m [90m 19 | [39m  [0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-ui.js: Unexpected token, expected ";" (5:16)\n\n[0m [90m 3 | [39m[90m// manually add arcade banner support[39m[0m\n[0m [90m 4 | [39m[90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m 5 | [39mrespondTo(type) {[0m\n[0m [90m   | [39m                [31m[1m^[22m[39m[0m\n[0m [90m 6 | [39m[0m\n[0m [90m 7 | [39m  [36mif[39m ([36msuper[39m[33m.[39mrespondTo(type) [33m!=[39m [36mnull[39m) {[0m\n[0m [90m 8 | [39m    [36mreturn[39m [36msuper[39m[33m.[39mrespondTo(type)[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-unit.js: Unexpected token, expected ";" (3:16)\n\n[0m [90m 1 | [39m  [0m\n[0m [90m 2 | [39m  [0m\n[0m[31m[1m>[22m[39m[90m 3 | [39m  returnUnits() {[0m\n[0m [90m   | [39m                [31m[1m^[22m[39m[0m\n[0m [90m 4 | [39m    [36mreturn[39m [36mthis[39m[33m.[39munits[33m;[39m[0m\n[0m [90m 5 | [39m  }[0m\n[0m [90m 6 | [39m  [0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/imperium/src/imperium-universe.js: Unexpected token, expected ";" (5:18)\n\n[0m [90m 3 | [39m  [90m// Return Planets //[39m[0m\n[0m [90m 4 | [39m  [90m////////////////////[39m[0m\n[0m[31m[1m>[22m[39m[90m 5 | [39m  returnPlanets() {[0m\n[0m [90m   | [39m                  [31m[1m^[22m[39m[0m\n[0m [90m 6 | [39m  [0m\n[0m [90m 7 | [39m    [36mvar[39m planets [33m=[39m {}[33m;[39m[0m\n[0m [90m 8 | [39m  [0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.semicolon (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8909:40)\n    at Parser.parseExpressionStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11871:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11467:19)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)')},function(e,t){this.importSecretObjective("military-catastrophe",{name:"Military Catastrophe",text:"Destroy the flagship of another player",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_military_catastrophe=0,0},spaceCombatRoundEnd:function(e,t,a,r){return e.game.players_info[e.game.player-1].units_i_destroyed_this_combat_round.includes("flagship")&&(e.game.state.secret_objective_military_catastrophe=1),0},groundCombatRoundEnd:function(e,t,a,r,n){return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_military_catastrophe?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("flagship-dominance",{name:"Blood Christening",text:"Achieve victory in a space combat in a system containing your flagship. Your flagship must survive this combat",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_flagship_dominance=0,0},spaceCombatRoundEnd:function(e,t,a,r){if(e.doesSectorContainPlayerUnit(e.game.player,r,"flagship")){var n=e.returnSectorAndPlanets(r);0==n.s.units[a-1].length&&t==e.game.player&&n.s.units[t-1].length>0&&(e.game.state.secret_objective_flagship_dominance=1),0==n.s.units[t-1].length&&a==e.game.player&&n.s.units[a-1].length>0&&(e.game.state.secret_objective_flagship_dominance=1)}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_flagship_dominance?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("nuke-them-from-orbit",{name:"Nuke them from Orbit",text:"Destroy the last of a player's ground forces using bombardment",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_nuke_from_orbit=0,e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=0,0},bombardmentTriggers:function(e,t,a,r,n){e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=0;for(var i=e.returnSectorAndPlanets(r).p[n],s=e.returnInfantryOnPlanet(i),o=0;o<i.units.length;o++)i.units[o].length>0&&o+1!=a&&(defender=o+1,e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=s);return 0},planetaryDefenseTriggers:function(e,t,a,r){if(e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked>0){var n=e.returnSectorAndPlanets(a);console.log("PIDX: "+r);var i=n.p[r];console.log("PLANET: "+JSON.stringify(i)),0==e.returnInfantryOnPlanet(i)&&(e.game.state.secret_objective_nuke_from_orbit_how_many_got_nuked=1)}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_nuke_from_orbit?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("anti-imperialism",{name:"Anti-Imperialism",text:"Achieve victory in combat with a player with the most VP",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_anti_imperialism=0,0},spaceCombatRoundEnd:function(e,t,a,r){e.game.state.secret_objective_anti_imperialism=0;var n=e.returnSectorAndPlanets(r),i=e.returnPlayersWithHighestVP();return e.game.player==t&&n.s.units[t-1].length>0&&0==e.hasUnresolvedSpaceCombat(t,r)&&i.includes(a)&&(e.game.state.secret_objective_anti_imperialism=1),e.game.player==a&&n.s.units[a-1].length>0&&0==e.hasUnresolvedSpaceCombat(a,r)&&i.includes(t)&&(e.game.state.secret_objective_anti_imperialism=1),0},groundCombatRoundEnd:function(e,t,a,r,n){var i=e.returnSectorAndPlanets(r).p[n],s=e.returnPlayersWithHighestVP();return e.game.player==t&&i.units[t-1].length>0&&0==i.units[a-1].length&&s.includes(a)&&(e.game.state.secret_objective_anti_imperialism=1),e.game.player==a&&i.units[a-1].length>0&&0==i.units[t-1].length&&s.includes(t)&&(e.game.state.secret_objective_anti_imperialism=1),0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_anti_imperialism?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("end-their-suffering",{name:"End Their Suffering",text:"Eliminate a player with the lowest VP from the board in Space or Ground Combat",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_end_their_suffering=0,0},spaceCombatRoundEnd:function(e,t,a,r){var n=e.returnSectorAndPlanets(r),i=e.returnPlayersWithLowestVP();if(e.game.player==t&&0==n.s.units[a-1].length&&i.includes(a)){for(var s in e.game.sectors)if(e.game.sectors[s].units[a-1].length>0)return;for(var o in e.game.planets)if(e.game.planets[o].units[a-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}if(e.game.player==a&&0==n.s.units[t-1].length&&i.includes(t)){for(var c in e.game.sectors)if(e.game.sectors[c].units[t-1].length>0)return;for(var l in e.game.planets)if(e.game.planets[l].units[t-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}return 0},groundCombatRoundEnd:function(e,t,a,r,n){var i=e.returnSectorAndPlanets(r).p[n],s=e.returnPlayersWithLowestVP();if(e.game.player==t&&0==i.units[a-1].length&&s.includes(a)){for(var o in e.game.sectors)if(e.game.sectors[o].units[a-1].length>0)return;for(var c in e.game.planets)if(e.game.planets[c].units[a-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}if(e.game.player==a&&0==i.units[t-1].length&&s.includes(t)){for(var l in e.game.sectors)if(e.game.sectors[l].units[t-1].length>0)return;for(var u in e.game.planets)if(e.game.planets[u].units[t-1].length>0)return;e.game.state.secret_objective_end_their_suffering=1}return 0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_end_their_suffering?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("establish-a-blockade",{name:"Establish a Blockade",text:"Have at least 1 ship in the same sector as an opponent's spacedock",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a in e.game.sectors)if(e.game.sectors[a].units[t-1].length>0)for(var r=e.returnSectorAndPlanets(a),n=0;n<r.p.length;n++)for(var i=0;i<r.p[n].units.length;i++)if(i+1!=t)for(var s=0;s<r.p[n].units[i].length;s++)if("spacedock"===r.p[n].units[i][s].type)return 1;return 0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("close-the-trap",{name:"Close the Trap",text:"Destroy another player's last ship in a system using a PDS",type:"secret",phase:"action",onNewTurn:function(e,t,a){return e.game.state.secret_objective_close_the_trap=0,e.game.state.secret_objective_close_the_trap_pds_fired=0,0},modifyPDSRoll:function(e,t,a,r){t==e.game.player&&(e.game.state.secret_objective_close_the_trap_pds_fired=1),a==e.game.player&&(e.game.state.secret_objective_close_the_trap_pds_fired=1)},modifySpaceCombatRoll:function(e,t,a,r){e.game.state.secret_objective_close_the_trap_pds_fired=0},spaceCombatRoundEnd:function(e,t,a,r){var n=e.returnSectorAndPlanets(r);return e.game.player==t&&n.s.units[t-1].length>0&&0==e.hasUnresolvedSpaceCombat(t,r)&&1==e.game.state.secret_objective_close_the_trap_pds_fired&&(e.game.state.secret_objective_close_the_trap=1,e.game.state.secret_objective_close_the_trap_pds_fired=1),e.game.player==a&&n.s.units[a-1].length>0&&0==e.hasUnresolvedSpaceCombat(a,r)&&1==e.game.state.secret_objective_close_the_trap_pds_fired&&(e.game.state.secret_objective_close_the_trap=1,e.game.state.secret_objective_close_the_trap_pds_fired=1),0},canPlayerScoreVictoryPoints:function(e,t){return 1==e.game.state.secret_objective_close_the_trap?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("galactic-observer",{name:"Galactic Observer",text:"Have at least 1 ship in 6 different sectors",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var a=0;for(var r in e.game.board){var n=e.game.board[r].tile;e.doesSectorContainPlayerShip(t,n)&&a++}return a>5?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("master-of-the-ion-cannon",{name:"Master Cannoneer",text:"Have at least 4 PDS units in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var a=0;for(var r in e.game.planets)for(var n=e.game.planets[r],i=0;i<n.units[t-1].length;i++)"pds"==n.units[t-1][i].type&&a++;return a>3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("war-engine",{name:"War Engine",text:"Have three spacedocks in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){var a=0;for(var r in e.game.planets)for(var n=e.game.planets[r],i=0;i<n.units[t-1].length;i++)"spacedock"==n.units[t-1][i].type&&a++;return a>2?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("wormhole-administrator",{name:"Wormhole Administrator",text:"Have at least 1 ship in systems containing alpha and beta wormholes respectively",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.returnSectorsWithPlayerShips(t),r=0,n=0,i=0;i<a.length;i++)1==e.game.sectors[a[i]].wormhole&&(r=1),2==e.game.sectors[a[i]].wormhole&&(n=1);return 1==r&&1==n?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("fleet-of-terror",{name:"Fleet of Terror",text:"Have five dreadnaughts in play",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnSectorsWithPlayerShips(t),n=0;n<r.length;n++)for(var i=0;i<e.game.sectors[r[n]].units[t-1].length;i++)"dreadnaught"===e.game.sectors[r[n]].units[t-1][i].type&&a++;return a>=5?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("cultural-diplomacy",{name:"Cultural Diplomacy",text:"Control at least 4 cultural planets",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnPlayerPlanetCards(t),n=0;n<r.length;n++)"cultural"===e.game.planets[r[n]].type&&a++;return a>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("act-of-espionage",{name:"Act of Espionage",text:"Discard five action cards from your hard",type:"secret",canPlayerScoreVictoryPoints:function(e,t){return e.returnPlayerActionCards(t).length>=5?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerDiscardActionCards(5,(function(){a(1)})):a(0)}}),this.importSecretObjective("space-to-breathe",{name:"Space to Breathe",text:"Have at least 1 ship in 3 systems with no planets",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.returnSectorsWithPlayerShips(t),r=0,n=0;n<a.length;n++)0==e.game.sectors[a[n]].planets.length&&r++;return r>=3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("ascendant-technocracy",{name:"Ascendant Technocracy",text:"Research 4 tech upgrades on the same color path",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0,i=0,s=0,o=0;o<a.length;o++)"blue"==e.tech[a[o]].color&&n++,"red"==e.tech[a[o]].color&&i++,"yellow"==e.tech[a[o]].color&&s++,"green"==e.tech[a[o]].color&&r++;return n>=4||s>=4||i>=4||r>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("penal-colonies",{name:"Penal Colonies",text:"Control four planets with hazardous conditions",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnPlayerPlanetCards(t),n=0;n<r.length;n++)"hazardous"===e.game.planets[r[n]].type&&a++;return a>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("master-of-production",{name:"Master of Production",text:"Control four planets with industrial civilizations",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnPlayerPlanetCards(t),n=0;n<r.length;n++)"industrial"===e.game.planets[r[n]].type&&a++;return a>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("faction-technologies",{name:"Faction Technologies",text:"Research 2 faction technologies",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0;n<a.length;n++)"special"==e.tech[a[n]].type&&0==a[n].indexOf("faction")&&r++;return r>=2?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("occupy-new-byzantium",{name:"Occupy New Byzantium",text:"Control New Byzantium and have at least 3 ships protecting the sector",type:"secret",canPlayerScoreVictoryPoints:function(e,t){return e.game.planets["new-byzantium"].owner==t&&e.game.sectors["new-byzantium"].units[t-1].length>=3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importSecretObjective("cast-a-long-shadow",{name:"Cast a Long Shadow",text:"Have at least 1 ship in a system adjacent to an opponent homeworld",type:"secret",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.returnHomeworldSectors(e.game.players_info.length),r=[],n=0;n<a.length;n++)e.game.board[a[n]].tile!=e.game.board[e.game.players_info[t-1].homeworld].tile&&r.push(e.game.board[a[n]].tile);for(var i=0;i<r.length;i++)if(e.isPlayerAdjacentToSector(t,r[i]))return 1;return 0},scoreObjective:function(e,t,a){a(1)}})},function(e,t){this.importStageIPublicObjective("planetary-unity",{name:"Planetary Unity",img:"/imperium/img/objective_card_1_template.png",text:"Control four planets of the same planet type",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=0,n=0,i=e.returnPlayerPlanetCards(t),s=0;s<i.length;s++){e.game.planets[i[s]];"hazardous"===e.game.planets[i[s]].type&&a++,"industrial"===e.game.planets[i[s]].type&&n++,"cultural"===e.game.planets[i[s]].type&&r++}return a>=4||r>=4||n>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIPublicObjective("forge-of-war",{name:"Forge of War",img:"/imperium/img/objective_card_1_template.png",text:"Research 2 unit upgrade technologies",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0;n<a.length;n++)1==e.tech[a[n]].unit&&r++;return r>=2?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIPublicObjective("diversified-research",{name:"Diversified Research",img:"/imperium/img/objective_card_1_template.png",text:"Research 2 technologies in two different color paths",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0,i=0,s=0,o=0;o<a.length;o++)"blue"==e.tech[a[o]].color&&n++,"red"==e.tech[a[o]].color&&i++,"yellow"==e.tech[a[o]].color&&s++,"green"==e.tech[a[o]].color&&r++;var c=0;return n>=2&&c++,s>=2&&c++,i>=2&&c++,r>=2&&c++,c>=2?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIPublicObjective("mining-conglomerate",{name:"Mining Conglomerate",img:"/imperium/img/objective_card_1_template.png",text:"Spend eight resources when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableResources(t)>=8?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectResources(8,(function(e){a(e)})):a(0)}}),this.importStageIPublicObjective("conquest-of-science",{name:"Conquest of Science",minPlayers:4,img:"/imperium/img/objective_card_1_template.png",text:"Control 3 planets with tech specialities",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnPlayerPlanetCards(t),n=0;n<r.length;n++)"red"==r[n].bonus&&a++,"blue"==r[n].bonus&&a++,"green"==r[n].bonus&&a++,"yellow"==r[n].bonus&&a++;return a>=3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIPublicObjective("colonization",{name:"Colonization",img:"/imperium/img/objective_card_1_template.png",text:"Control six planets outside your home system",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=0,n=0,i=0,s=e.returnPlayerPlanetCards(t),o=0;o<s.length;o++)"hazardous"===e.game.planets[s[o]].type&&a++,"industrial"===e.game.planets[s[o]].type&&n++,"cultural"===e.game.planets[s[o]].type&&r++,"diplomatic"===e.game.planets[s[o]].type&&i++;return r+a+n+i>=6?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIPublicObjective("grand-gesture",{name:"A Grand Gesture",img:"/imperium/img/objective_card_1_template.png",text:"Spend 3 command or strategy tokens when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.game.players_info[t-1].strategy_tokens+e.game.players_info[t-1].command_tokens>=3?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectStrategyAndCommandTokens(3,(function(e){a(e)})):a(0)}}),this.importStageIPublicObjective("establish-trade-outposts",{name:"Establish Trade Outposts",img:"/imperium/img/objective_card_1_template.png",text:"Spend 5 trade goods when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableTradeGoods(t)>=5?1:0},scoreObjective:function(e,t,a){e.game.players_info[t-1].goods-=5,e.displayFactionDashboard(),a(1)}}),this.importStageIPublicObjective("pecuniary-diplomacy",{name:"Pecuniary Diplomacy",img:"/imperium/img/objective_card_1_template.png",text:"Spend 8 influence when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableInfluence(t)>=8?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectInfluence(8,(function(e){a(e)})):a(0)}})},function(e,t){this.importStageIIPublicObjective("master-of-commerce",{name:"Master of Commerce",img:"/imperium/img/objective_card_2_template.png",text:"Spend 10 trade goods when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableTradeGoods(t)>=10?1:0},scoreObjective:function(e,t,a){e.game.players_info[t-1].goods-=10,e.displayFactionDashboard(),a(1)}}),this.importStageIIPublicObjective("display-of-dominance",{name:"Display of Dominance",img:"/imperium/img/objective_card_2_template.png",text:"Control at least 1 planet in another player's home sector",canPlayerScoreVictoryPoints:function(e,t){for(var a=[],r=0;r<e.game.players_info.length;r++)for(var n=e.game.board[e.game.players_info[t-1].homeworld].tile,i=e.returnSectorAndPlanets(n),s=0;s<i.p.length;s++)a.push(i.p[s].name);for(var o=e.returnPlayerPlanetCards(t),c=0;c<o.length;c++)if(a.includes(o[c].name))return 1;return 0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("technological-empire",{name:"Technological Empire",minPlayers:4,img:"/imperium/img/objective_card_2_template.png",text:"Control 5 planets with tech bonuses",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=e.returnPlayerPlanetCards(t),n=0;n<r.length;n++)"red"==r[n].bonus&&a++,"blue"==r[n].bonus&&a++,"green"==r[n].bonus&&a++,"yellow"==r[n].bonus&&a++;return a>=3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("establish-galactic-currency",{name:"Establish Galactic Currency",img:"/imperium/img/objective_card_2_template.png",text:"Spend 16 resources when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableResources(t)>=16?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectResources(16,(function(e){a(e)})):a(0)}}),this.importStageIIPublicObjective("master-of-science",{name:"Master of Science",img:"/imperium/img/objective_card_2_template.png",text:"Own 2 tech upgrades in each of 4 tech color paths",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0,i=0,s=0,o=0;o<a.length;o++)"blue"==e.tech[a[o]].color&&n++,"red"==e.tech[a[o]].color&&i++,"yellow"==e.tech[a[o]].color&&s++,"green"==e.tech[a[o]].color&&r++;var c=0;return n>=2&&c++,s>=2&&c++,i>=2&&c++,r>=2&&c++,c>=4?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("imperial-unity",{name:"Imperial Unity",img:"/imperium/img/objective_card_2_template.png",text:"Control 6 planets of the same planet type",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=0,n=0,i=0,s=e.returnPlayerPlanetCards(t),o=0;o<s.length;o++)"hazardous"===e.game.planets[s[o]].type&&a++,"industrial"===e.game.planets[s[o]].type&&n++,"cultural"===e.game.planets[s[o]].type&&r++,"diplomatic"===e.game.planets[s[o]].type&&i++;return a>=6||r>=6||n>=6||i>=6?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("advanced-technologies",{name:"Advanced Technologies",img:"/imperium/img/objective_card_2_template.png",text:"Research 3 unit upgrade technologies",canPlayerScoreVictoryPoints:function(e,t){for(var a=e.game.players_info[t-1].tech,r=0,n=0;n<a.length;n++)1==e.tech[a[n]].unit&&r++;return r>=3?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("colonial-dominance",{name:"Colonial Dominance",img:"/imperium/img/objective_card_2_template.png",text:"Control 11 planets outside your home system",canPlayerScoreVictoryPoints:function(e,t){for(var a=0,r=0,n=0,i=0,s=e.returnPlayerPlanetCards(t),o=0;o<s.length;o++)"hazardous"===e.game.planets[s[o]].type&&a++,"industrial"===e.game.planets[s[o]].type&&n++,"cultural"===e.game.planets[s[o]].type&&r++,"diplomatic"===e.game.planets[s[o]].type&&i++;return r+a+n+i>=11?1:0},scoreObjective:function(e,t,a){a(1)}}),this.importStageIIPublicObjective("power-broker",{name:"Power Broker",img:"/imperium/img/objective_card_2_template.png",text:"Spend 16 influence when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.returnAvailableInfluence(t)>=16?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectInfluence(16,(function(e){a(e)})):a(0)}}),this.importStageIIPublicObjective("cultural-revolution",{name:"Cultural Revolution",img:"/imperium/img/objective_card_2_template.png",text:"Spend 6 command or strategy tokens when scoring",canPlayerScoreVictoryPoints:function(e,t){return e.game.players_info[t-1].strategy_tokens+e.game.players_info[t-1].command_tokens>=6?1:0},scoreObjective:function(e,t,a){e.game.player==t?e.playerSelectStrategyAndCommandTokens(6,(function(e){a(e)})):a(0)}})},function(e,t){this.importPromissary("ceasefire",{name:"Ceasefire Promissary",faction:-1,text:"When the owner activates a sector that contains one of your units, you may trigger this to prevent them moving in units.",activateSystemTriggers:function(e,t,a,r){var n=e.game.players_info[t-1].faction+"-ceasefire";return e.doesPlayerHavePromissary(a,n)&&t!=a&&e.doesPlayerHaveUnitsInSector(a,r)?1:0},activateSystemEvent:function(e,t,a,r){if(e.game.player!=a)return e.updateStatus(e.returnFaction(a)+" is deciding whether to use Ceasefire"),0;var n='<div clss="sf-readable">Permit '+e.returnFaction(t)+" to activate sector or use ceasefire? </div><ul>";n+='<li class="option" id="activate">use ceasefire</li>',n+='<li class="option" id="nothing">do nothing</li>',n+="</ul>",e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var r=$(this).attr("id");return"nothing"===r?(e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" does not use Ceasefire"),e.endTurn(),0):"activate"===r?(e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" uses Ceasefire to end "+e.returnFaction(t)+" turn"),e.addMove("ceasefire\t"+t+"\t"+a),e.endTurn(),0):0}))},handleGameLoop:function(e,t,a){if("ceasefire"==a[0]){var r=parseInt(a[1]);a[2];e.game.queue.splice(t,1);for(var n=0,i=e.game.queue.length-1;i>=0;i--)0!=e.game.queue[i].indexOf("play")&&0==n?e.game.queue.splice(i,1):0==n&&(n=1,e.game.queue.push("resolve\tplay"),e.game.queue.push("setvar\tstate\t0\tactive_player_moved\tint\t0"),e.game.queue.push("player_end_turn\t"+r));return 1}return 1}}),this.importPromissary("trade",{name:"Trade Promissary",faction:-1,text:"When the owner replenishes commodities, this promissary triggers and you gain their commodities as trade goods",gainCommodities:function(e,t,a){for(var r=e.game.players_info[t-1].faction+"-trade",n=e.returnPromissaryPlayer(r),i=0;i<e.game.players_info.length;i++)if(i+1!=t&&e.doesPlayerHavePromissary(i+1,r))return e.game.players_info[i].goods+=a,e.givePromissary(t,i+1,r),e.updateLog(e.returnFaction(i+1)+" redeems their Trade Promissary from "+e.returnFaction(n)),0;return a}}),this.importPromissary("political",{name:"Political Promissary",faction:-1,text:"The owner of this card cannot participate in resolving this agenda",menuOption:function(e,t,a){var r={};return"pre_agenda"==t&&(r.event="political-promissary",r.html='<li class="option" id="political-promissary">Political Promissary</li>'),r},menuOptionTriggers:function(e,t,a){if("pre_agenda"!=t)return 0;for(var r=e.returnPlayablePromissaryArray(a,"political"),n=0;n<r.length;n++)if(e.game.players_info[e.game.player-1].promissary_notes.includes(r[n]))return 1;return 0},menuOptionActivated:function(e,t,a){if(e.game.player==a){for(var r='<div class="sf-readable">Select a Specific Promissary: </div><ul>',n=e.returnPlayablePromissaryArray(a,"political"),i=0;i<n.length;i++){var s=n[i].split("-"),o=e.returnPromissaryPlayer(n[i]);r+='<li class="option" id="'.concat(i,'">').concat(e.returnFactionName(o)," - ").concat(e.promissary_notes[s[1]].name,"</li>")}r+="</ul>",e.updateStatus(r),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id"),a=n[parseInt(t)],r=e.returnPromissaryPlayer(n[parseInt(t)]);return e.addMove("rider\t"+r+"\tpolitical-promissary\t-1"),e.addMove("give\t"+e.game.player+"\t"+a+"\tpromissary\t"+a),e.endTurn(),0}))}return 0}}),this.importPromissary("throne",{name:"Support for the Throne",faction:-1,text:"Gain 1 VP when you receive this card. Lose this card and 1 VP if the owner of this card is eliminated or you activate a system containing any of their units.",gainPromissary:function(e,t,a){a.indexOf("throne")>-1&&(e.returnPromissaryPlayer(a)!=t&&(e.game.players_info[t-1][a]=1,e.game.players_info[t-1].vp++,e.updateLog(e.returnFaction(t)+" gains 1 VP from Support for the Throne"),e.updateLeaderboard()))},losePromissary:function(e,t,a){a.indexOf("throne")>-1&&(e.returnPromissaryPlayer(a)!=t&&(e.game.players_info[t-1][a]=1,e.game.players_info[t-1].vp--,e.updateLog(e.returnFaction(t)+" loses 1 VP from Support for the Throne"),e.updateLeaderboard()))},activateSystemTriggers:function(e,t,a,r){e.returnSectorAndPlanets(r);for(var n=0;n<e.game.players_info.length;n++)if(n+1!=t&&e.doesPlayerHaveUnitsInSector(n+1,r)){var i=e.game.players_info[a-1].id+"-throne";e.doesPlayerHavePromissary(t,i)&&(e.game.players_info[t-1][i]=0,e.updateLog(e.returnFaction(t)+" loses 1 VP from Support for the Throne"),e.game.players_info[t-1].vp--,e.givePromissary(t,n+1,details))}return 0}})},function(e,t){this.importStrategyCard("construction",{name:"Construction",rank:4,img:"/strategy/BUILD.png",text:"Build a PDS or Space Dock. Then build a PDS.<hr />Other players may spend a strategy token and activate a sector to build a PDS or Space Dock in it.",strategyPrimaryEvent:function(e,t,a){e.game.player==a&&t==a&&(e.addMove("resolve\tstrategy"),e.addMove("strategy\tconstruction\t"+a+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerAcknowledgeNotice("You have played Construction. First you will have the option of producing a PDS or Space Dock. Then you will have the option of producing an additional PDS if you so choose.",(function(){e.playerBuildInfrastructure((function(t){e.playerBuildInfrastructure((function(t){e.updateSectorGraphics(t),e.endTurn()}),2)}),1)})))},strategySecondaryEvent:function(e,t,a){if(e.game.player!=a&&e.game.player==t){var r="<p>Construction has been played. Do you wish to spend 1 strategy token to build a PDS or Space Dock? This will activate the sector (if unactivated): </p><ul>";1==e.game.state.round&&(r='<p class="doublespace">'.concat(e.returnFaction(a)," has played the Construction strategy card. You may spend 1 strategy token to build a PDS or Space Dock on a planet you control (this will activate the sector). You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.playerBuildInfrastructure((function(t){e.addMove("activate\t"+e.game.player+"\t"+t),e.updateSectorGraphics(t),e.endTurn()}),1)),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}})},function(e,t){this.importStrategyCard("diplomacy",{name:"Diplomacy",rank:2,img:"/strategy/DIPLOMACY.png",text:"Pick a sector other than New Byzantium. Other players activate it. Refresh two planets.<hr />Other players may spend a strategy token to refresh two planets.",strategyPrimaryEvent:function(e,t,a){return e.game.player==a&&t==a&&(e.updateStatus("Select sector to quagmire in diplomatic negotiations, and refresh any planets in that system: "),e.playerSelectSector((function(t){t.indexOf("_")>-1&&(t=e.game.board[t].tile),e.addMove("resolve\tstrategy"),e.addMove("strategy\tdiplomacy\t"+a+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" uses Diplomacy to activate "+e.game.sectors[t].name);for(var r=0;r<e.game.players_info.length;r++)e.addMove("activate\t"+(r+1)+"\t"+t);var n=e.returnSectorAndPlanets(t);if(n.p)for(var i=0;i<n.p.length;i++)if(n.p[i].owner==e.game.player)for(var s in e.game.planets)n.p[i]==e.game.planets[s]&&e.addMove("unexhaust\t"+e.game.player+"\tplanet\t"+s);e.saveSystemAndPlanets(n),e.endTurn()}))),0},strategySecondaryEvent:function(e,t,a){if(e.game.player!=a&&e.game.player==t){var r="<p>Do you wish to spend 1 strategy token to unexhaust two planet cards? </p><ul>";1==e.game.state.round&&(r='<p class="doublespace">'.concat(e.returnFaction(a)," has just played the Diplomacy strategy card. This lets you to spend 1 strategy token to unexhaust two planet cards. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.updateStatus(r),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");if("yes"==t){for(var a=e.returnPlayerExhaustedPlanetCards(e.game.player),r=0,n=0,i="<p>Select planets to unexhaust: </p><ul>",s=".cardchoice",o=0;o<a.length;o++)n++,i+='<li class="cardchoice" id="cardchoice_'+a[o]+'">'+e.returnPlanetCard(a[o])+"</li>";0==n&&(i+='<li class="textchoice" id="cancel">cancel (no options)</li>',s=".textchoice"),i+="</ul>",n>=2&&(n=2),e.updateStatus(i),e.lockInterface(),$(s).off(),$(s).on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");if("cancel"===t)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),void e.endTurn();for(var i=t.split("_"),s="#"+t,o=i[1],c=0,l=0;l<a.length;l++)a[l]===o&&(c=l);r++,e.addMove("unexhaust\t"+e.game.player+"\tplanet\t"+a[c]),$(s).off(),$(s).css("opacity","0.2"),r>=n&&(e.prependMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn())}else salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}if("no"==t)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0}))}}})},function(e,t){this.importStrategyCard("imperial",{name:"Imperial",rank:8,img:"/strategy/EMPIRE.png",text:"You may score a public objective. If you control New Byzantium gain 1 VP. Otherwise gain a secret objective.<hr />All players score objectives in Initiative Order",strategyPrimaryEvent:function(e,t,a){if(e.game.player==a&&t==a){e.game.planets["new-byzantium"].owner==a?e.playerAcknowledgeNotice("You are granted an additional Victory Point for controlling New Byzantium during Imperial Scoring",(function(){e.playerAcknowledgeNotice("You will first be asked to score your public objective. The game will then allow other players to purchase secret objectives.",(function(){e.addMove("resolve\tstrategy"),e.addMove("strategy\timperial\t"+a+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerScoreVictoryPoints(e,(function(e,a,r){a>0&&(null!=e.stage_i_objectives[r]||null!=e.stage_ii_objectives[r])?null!=e.stage_i_objectives[r]?e.stage_i_objectives[r].scoreObjective(e,t,(function(){e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.addMove("score\t"+t+"\t"+a+"\t"+r),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(r),e.updateStatus("scoring completed"),e.endTurn()})):e.stage_ii_objectives[r].scoreObjective(e,t,(function(){e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.addMove("score\t"+t+"\t"+a+"\t"+r),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(r),e.updateStatus("scoring completed"),e.endTurn()})):(e.addMove("score\t"+e.game.player+"\t1\tnew-byzantium"),e.updateStatus("scoring completed"),e.endTurn())}),1)}))})):e.playerAcknowledgeNotice("As you do not control New Byzantium during Imperial Scoring, you will be issued an additional Secret Objective",(function(){e.playerAcknowledgeNotice("You will next be asked to score a public objective. The game will then allow other players to purchase secret objectives.",(function(){e.addMove("resolve\tstrategy"),e.addMove("strategy\timperial\t"+a+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerScoreVictoryPoints(e,(function(e,r,n){r>0&&(null!=e.stage_i_objectives[n]||null!=e.stage_ii_objectives[n])?null!=e.stage_i_objectives[n]?e.stage_i_objectives[n].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+r+"\t"+n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.updateStatus("scoring completed"),e.addMove("gain\t"+a+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+a+"\t1"),e.endTurn()})):e.stage_ii_objectives[n].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+r+"\t"+n),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(n),e.updateStatus("scoring completed"),e.addMove("gain\t"+a+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+a+"\t1"),e.endTurn()})):(e.addMove("gain\t"+a+"\tsecret_objective\t1"),e.addMove("DEAL\t6\t"+a+"\t1"),e.endTurn())}),1)}))}))}return 0},strategySecondaryEvent:function(e,t,a){return console.log("IMPERIAL SECONDARY: "+t+" 0- "+a),e.game.state.playing_strategy_card_secondary=1,e.game.player==t&&(console.log("CAN PLAYER BUY SECRET OBJECTIVE?"),console.log(e.game.player+" -- "+a+" -- "+e.game.players_info[t-1].strategy_tokens),e.game.player!=a&&e.game.players_info[t-1].strategy_tokens>0?e.playerBuySecretObjective(2):(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn())),0},strategyTertiaryEvent:function(e,t,a){if(e.game.state.playing_strategy_card_secondary=1,e.game.state.round_scoring=1,t==e.game.player){var r="",n="";return e.game.state.round_scoring=2,e.playerScoreSecretObjective(e,(function(a,i,s){n=i,r=s,e.playerScoreVictoryPoints(e,(function(a,i,s){if(e.updateStatus("scoring completed"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),n>0)return null!=e.secret_objectives[r]&&e.secret_objectives[r].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+n+"\t"+r),i>0?(null!=e.stage_i_objectives[s]&&e.stage_i_objectives[s].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+s),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(r),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(s),e.endTurn()})),null!=e.stage_ii_objectives[s]&&e.stage_ii_objectives[s].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+s),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(r),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(s),e.endTurn()}))):(e.game.players_info[e.game.player-1].objectives_scored_this_round.push(r),e.endTurn())})),0;i>0?(null!=e.stage_i_objectives[s]&&e.stage_i_objectives[s].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+s),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(s),e.endTurn()})),null!=e.stage_ii_objectives[s]&&e.stage_ii_objectives[s].scoreObjective(e,t,(function(){e.addMove("score\t"+t+"\t"+i+"\t"+s),e.game.players_info[e.game.player-1].objectives_scored_this_round.push(s),e.endTurn()}))):e.endTurn()}),2)})),0}}})},function(e,t){this.importStrategyCard("leadership",{name:"Leadership",rank:1,img:"/strategy/INITIATIVE.png",text:"You may gain and distribute three tokens.<hr />All players may purchase extra tokens at three influence per token.",strategyPrimaryEvent:function(e,t,a){return e.game.player==a&&t==a&&(e.addMove("resolve\tstrategy"),e.addMove("strategy\tleadership\t"+a+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.playerAllocateNewTokens(e.game.player,3,0,1,1)),0},strategySecondaryEvent:function(e,t,a){return t==e.game.player?(e.game.player,e.playerBuyTokens(2),0):1}})},function(e,t){this.importStrategyCard("politics",{name:"Politics",rank:3,img:"/strategy/POLITICS.png",text:"Pick a new Speaker. Gain 2 action cards. Vote on two agendas if New Byzantium is controlled.<hr />Other players may spend a strategy token to purchase two action cards.",strategyPrimaryEvent:function(e,t,a){if(e.game.player===a&&t==a){e.addMove("resolve\tstrategy"),e.addMove("gain\t"+e.game.player+"\taction_cards\t2"),e.addMove("DEAL\t2\t"+e.game.player+"\t2"),e.addMove("NOTIFY\t"+e.returnFaction(t)+" gains action cards"),e.addMove("strategy\tpolitics\t"+a+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length);for(var r=e.returnFactions(),n="Make which player the speaker? <ul>",i=0;i<e.game.players_info.length;i++)n+='<li class="option" id="'+i+'">'+r[e.game.players_info[i].faction].name+"</li>";n+="</ul>",e.updateStatus(n);e.game.player;$(".option").off(),$(".option").on("click",(function(){var t=parseInt($(this).attr("id"))+1;e.returnAgendaCards();return e.playerAcknowledgeNotice("You will receive two action cards once other players have decided whether to purchase action cards.",(function(){e.addMove("change_speaker\t"+t),e.endTurn()})),0}))}},strategySecondaryEvent:function(e,t,a){e.game.player==t&&(e.game.player!=a&&e.game.players_info[t-1].strategy_tokens>0?e.playerBuyActionCards(2):(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn()))},strategyTertiaryEvent:function(e,t,a){var r=[],n=e.returnAgendaCards(),s=0;if(e.game.player==t){e.game.state.votes_available=[],e.game.state.votes_cast=[],e.game.state.how_voted_on_agenda=[],e.game.state.voted_on_agenda=[],e.game.state.voting_on_agenda=0;for(var o=0;o<e.game.players_info.length;o++){e.game.state.votes_available.push(e.returnAvailableVotes(o+1)),e.game.state.votes_cast.push(0),e.game.state.how_voted_on_agenda[o]="abstain",e.game.state.voted_on_agenda[o]=[];for(var c=0;c<e.game.state.agendas_per_round+2;c++)e.game.state.voted_on_agenda[o].push(0)}}if(e.game.player===e.game.state.speaker){var l="";for(1==e.game.state.agendas_per_round&&(l+="Select one agenda to advance for consideration in the Galactic Senate.<ul>"),2==e.game.state.agendas_per_round&&(l+="Select two agendas to advance for consideration in the Galactic Senate.<ul>"),3==e.game.state.agendas_per_round&&(l+="Select three agendas to advance for consideration in the Galactic Senate.<ul>"),i=0;i<3&&i<e.game.state.agendas.length;i++)l+='<li class="option" id="'+e.game.state.agendas[i]+'">'+n[e.game.state.agendas[i]].name+"</li>";l+="</ul>",e.updateStatus(l),$(".option").off(),$(".option").on("mouseenter",(function(){var t=$(this).attr("id");e.showAgendaCard(t)})),$(".option").on("mouseleave",(function(){var t=$(this).attr("id");e.hideAgendaCard(t)})),$(".option").on("click",(function(){if(s++,r.push($(this).attr("id")),$(this).hide(),e.hideAgendaCard(r[r.length-1]),s>=e.game.state.agendas_per_round){for(i=1;i>=0;i--)e.addMove("resolve_agenda\t"+r[i]),e.addMove("post_agenda_stage_post\t"+r[i]),e.addMove("post_agenda_stage\t"+r[i]),e.addMove("agenda\t"+r[i]+"\t"+i),e.addMove("pre_agenda_stage_post\t"+r[i]),e.addMove("pre_agenda_stage\t"+r[i]),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length);e.endTurn()}}))}else e.updateStatus("The Speaker is selecting two Agendas for consideration by the Senate")}})},function(e,t){this.importStrategyCard("technology",{name:"Technology",rank:7,img:"/strategy/TECH.png",text:"Research a technology. You may spend 6 resources to research another.<hr />Other players may spend a strategy token and 4 resources to research a technology",strategyPrimaryEvent:function(e,t,a){e.game.player==a&&t==a&&e.playerAcknowledgeNotice("You will first have the option of researching a free-technology, and then invited to purchase an additional tech for 6 resources:",(function(){e.playerResearchTechnology((function(r){e.game.players_info[e.game.player-1].tech.push(r),e.addMove("resolve\tstrategy"),e.addMove("strategy\ttechnology\t"+a+"\t2"),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("purchase\t"+t+"\ttechnology\t"+r),e.endTurn()}))}))},strategySecondaryEvent:function(e,t,a){var r="",n=0;return e.game.player==t&&e.game.player!=a?(n=e.game.players_info[e.game.player-1].cost_of_technology_secondary,r="<p>Technology has been played. Do you wish to spend 4 resources and a strategy token to research a technology? </p><ul>",1==e.game.state.round&&(r='<p class="doublespace">'.concat(e.returnFaction(a)," has played the Technology strategy card. You may spend 4 resources and a strategy token to gain a permanent new unit or ability. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability?</p><ul>")),1!=e.game.players_info[t-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources||(r="<p>Technology has been played. Do you wish to spend a strategy token to research a technology? </p><ul>",n=0),e.returnAvailableResources(e.game.player)>=n&&e.game.players_info[t-1].strategy_tokens>0&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var a=$(this).attr("id");return"yes"===a&&(e.game.players_info[t-1].temporary_research_technology_card_must_not_spend_resources=0,e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.playerSelectResources(n,(function(a){1==a?e.playerResearchTechnology((function(a){e.addMove("purchase\t"+t+"\ttechnology\t"+a),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn()})):e.endTurn()}))),"no"===a?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")})),0):(e.game.player!=a||(r="<p>Do you wish to spend "+(n=e.game.players_info[e.game.player-1].cost_of_technology_primary)+" resources to research an additional technology? </p><ul>",1!=e.game.players_info[e.game.player-1].permanent_research_technology_card_must_not_spend_resources&&1!=e.game.players_info[e.game.player-1].temporary_research_technology_card_must_not_spend_resources||(r="<p>Do you wish to research an additional technology? </p><ul>",n=0),e.returnAvailableResources(e.game.player)>=n&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&(e.game.players_info[e.game.player-1].temporary_research_technology_card_must_not_spend_resources,e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.playerSelectResources(n,(function(t){1==t&&e.playerResearchTechnology((function(t){e.addMove("purchase\t"+e.game.player+"\ttechnology\t"+t),e.endTurn()}))}))),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))),0)}}),this.importAgendaCard("minister-of-technology",{name:"Minister of Technology",type:"Law",text:"Elect a player. They do not need to spend resources to research technology when the technology card is played",initialize:function(e){e.game.state.minster_of_technology=null,e.game.state.minster_of_technology_player=null;for(var t=0;t<e.game.players_info.length;t++)e.game.players_info[t].temporary_research_technology_card_must_not_spend_resources||(e.game.players_info[t].temporary_research_technology_card_must_not_spend_resources=0,e.game.players_info[t].permanent_research_technology_card_must_not_spend_resources=0)},returnAgendaOptions:function(e){for(var t=[],a=0;a<e.game.players_info.length;a++)t.push(e.returnFaction(a+1));return t},onPass:function(e,t){for(var a=0,r=0;r<e.game.players_info.length;r++)e.returnFaction(r+1)==t&&(a=r);e.game.state.minister_of_technology=1,e.game.state.minister_of_technology_player=a+1,e.game.players_info[a].permanent_research_technology_card_must_not_spend_resources=1,e.game.state.laws.push({agenda:"minister-of-technology",option:t})}}),this.importActionCard("unexpected-breakthrough",{name:"Unexpected Breakthrough",type:"action",text:"Do not spend resources to research technology the next time the Technology card is played",playActionCard:function(e,t,a,r){return e.game.players_info[a-1].temporary_research_technology_card_must_not_spend_resources=1,1}})},function(e,t){this.importStrategyCard("trade",{name:"Trade",rank:5,img:"/strategy/TRADE.png",text:"Gain 3 trade goods. Refresh your commodities and those of any other players.<hr />Unrefreshed players may spend a strategy token to refresh their commodities.",strategyPrimaryEvent:function(e,t,a){if(e.game.player==a&&t==a){e.addMove("resolve\tstrategy"),e.addMove("strategy\ttrade\t"+a+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("purchase\t"+e.game.player+"\tgoods\t3"),e.addMove("purchase\t"+e.game.player+"\tcommodities\t"+e.game.players_info[e.game.player-1].commodity_limit);for(var r=e.returnFactions(),n="<p>You will receive 3 trade goods and "+e.game.players_info[e.game.player-1].commodity_limit+" commodities. You may choose to replenish the commodities of any other players: </p><ul>",i=0;i<e.game.players_info.length;i++)i!=e.game.player-1&&(n+='<li class="option" id="'+i+'">'+r[e.game.players_info[i].faction].name+"</li>");n+='<li class="option" id="finish">done</li>',e.updateStatus(n),$(".option").off(),$(".option").on("click",(function(){var t=$(this).attr("id");"finish"!=t?(e.addMove("purchase\t"+(parseInt(t)+1)+"\tcommodities\t"+e.game.players_info[t].commodity_limit),$(this).hide()):e.endTurn()}))}},strategySecondaryEvent:function(e,t,a){if(e.game.player==t&&e.game.player!=a){if(e.game.players_info[t-1].commodities==e.game.players_info[t-1].commodity_limit)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.updateLog(e.returnFaction(t)+" skips the Trade secondary as they have already refreshed commodities"),e.endTurn(),1;var r="<p>Trade has been played. Do you wish to spend 1 strategy token to refresh your commodities? </p><ul>";if(1==e.game.state.round&&(r='<p class="doublespace">'.concat(e.returnFaction(a)," has played the Trade strategy card. You may spend 1 strategy token to refresh your faction commodities, which may be exchanged with your neighbours on the board for trade goods. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.game.players_info[e.game.player-1].commodities==e.game.players_info[e.game.player-1].commodity_limit)return e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("NOTIFY\t"+e.returnFaction(e.game.player)+" already has commodities and skips trade secondary"),e.endTurn(),0;e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface(),$(".option").off();var t=$(this).attr("id");return"yes"==t&&(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.addMove("purchase\t"+e.game.player+"\tcommodities\t"+e.game.players_info[e.game.player-1].commodity_limit),e.addMove("expend\t"+e.game.player+"\tstrategy\t1"),e.endTurn()),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}})},function(e,t){this.importStrategyCard("warfare",{name:"Warfare",rank:6,img:"/strategy/MILITARY.png",text:"De-activate a sector. Gain and distribute 1 free token.<hr />Other players may spend a strategy token to producein their home system",strategyPrimaryEvent:function(e,t,a){e.game.player==a&&t==a&&(e.updateStatus("Select sector to de-activate."),e.playerSelectSector((function(t){var r=e.returnSectorAndPlanets(t);e.addMove("resolve\tstrategy"),e.addMove("strategy\twarfare\t"+a+"\t2"),e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addMove("resetconfirmsneeded\t"+e.game.players_info.length),e.addMove("deactivate\t"+a+"\t"+t),e.addMove("NOTIFY\t"+e.returnFaction(a)+" deactivates "+r.s.name),e.playerAllocateNewTokens(e.game.player,1,0,3,0)})))},strategySecondaryEvent:function(e,t,a){if(e.game.player==t&&e.game.player!=a){var r="<p>Do you wish to spend 1 strategy token to produce in your home sector? </p><ul>";1==e.game.state.round&&(r='<p class="doublespace">'.concat(e.returnFaction(a)," has played the Warfare strategy card. You may spend 1 strategy token to produce in your Homeworld without activating the sector. You have ").concat(e.game.players_info[t-1].strategy_tokens," strategy tokens. Use this ability? </p><ul>")),e.game.players_info[t-1].strategy_tokens>0&&(r+='<li class="option" id="yes">Yes</li>'),r+='<li class="option" id="no">No</li>',r+="</ul>",e.updateStatus(r),e.lockInterface(),$(".option").off(),$(".option").on("click",(function(){if(e.mayUnlockInterface()){e.unlockInterface();var t=$(this).attr("id");return"yes"==t&&e.playerProduceUnits(e.game.players_info[e.game.player-1].homeworld,0,0,2,1),"no"==t?(e.addMove("resolve\tstrategy\t1\t"+e.app.wallet.returnPublicKey()),e.addPublickeyConfirm(e.app.wallet.returnPublicKey(),1),e.endTurn(),0):void 0}salert("The game engine is currently processing moves related to another player's move. Please wait a few seconds and reload your browser.")}))}}})},function(e,t){this.importTech("antimass-deflectors",{name:"Antimass Deflectors",color:"blue",prereqs:[],text:"You may move through asteroid fields and gain -1 when receiving PDS fire",initialize:function(e,t){null==e.game.players_info[t-1].antimass_deflectors&&(e.game.players_info[t-1].antimass_deflectors=0)},gainTechnology:function(e,t,a){"antimass-deflectors"==a&&(e.game.players_info[t-1].antimass_deflectors=1,e.game.players_info[t-1].fly_through_asteroids=1)}}),this.importTech("gravity-drive",{name:"Gravity Drive",color:"blue",prereqs:["blue"],text:"One ship may gain +1 movement when you activate a system",initialize:function(e,t){null==e.game.players_info[t-1].gravity_drive&&(e.game.players_info[t-1].gravity_drive=0)},gainTechnology:function(e,t,a){"gravity-drive"==a&&(e.game.players_info[t-1].gravity_drive=1,e.game.players_info[t-1].ship_move_bonus=1)}}),this.importTech("fleet-logistics",{name:"Fleet Logistics",color:"blue",prereqs:["blue","blue"],text:"You may perform two actions in any turn",onNewRound:function(e,t){e.doesPlayerHaveTech(t,"fleet-logistics")&&(e.game.players_info[t-1].fleet_logistics_turn=0)},onNewTurn:function(e,t){e.doesPlayerHaveTech(t,"fleet-logistics")&&e.game.players_info[t-1].fleet_logistics_turn++},initialize:function(e,t){null==e.game.players_info[t-1].fleet_logistics&&(e.game.players_info[t-1].fleet_logistics=0,e.game.players_info[t-1].fleet_logistics_exhausted=0,e.game.players_info[t-1].fleet_logistics_turn=0)},gainTechnology:function(e,t,a){"fleet-logistics"==a&&(e.game.players_info[t-1].fleet_logistics=1,e.game.players_info[t-1].fleet_logistics_exhausted=0,e.game.players_info[t-1].perform_two_actions=1)},menuOption:function(e,t,a){return"main"==t&&e.doesPlayerHaveTech(a,"fleet-logistics")?{event:"fleetlogistics",html:'<li class="option" id="fleetlogistics">use fleet logistics</li>'}:{}},menuOptionTriggers:function(e,t,a){return"main"==t&&e.doesPlayerHaveTech(a,"fleet-logistics")&&0==e.game.players_info[a-1].fleet_logistics_exhausted&&e.game.players_info[a-1].fleet_logistics_turn<2&&1==e.game.players_info[a-1].fleet_logistics?1:0},menuOptionActivated:function(e,t,a){return"main"==t&&(e.game.players_info[a-1].fleet_logistics_exhausted=1,e.updateLog(e.returnFaction(a)+" exhausts Fleet Logistics"),e.addMove("setvar\tplayers\t"+a+"\tfleet_logistics_exhausted\tint\t1"),e.addMove("play\t"+a),e.addMove("play\t"+a),e.addMove("NOTIFY\t"+a+" activates fleet logistics"),e.endTurn(),e.updateStatus("Activating Fleet Logistics")),0}}),this.importTech("lightwave-deflector",{name:"Light/Wave Deflector",color:"blue",prereqs:["blue","blue","blue"],text:"Your fleet may move through sectors with opponent ships",initialize:function(e,t){null==e.game.players_info[t-1].lightwave_deflector&&(e.game.players_info[t-1].lightwave_deflector=0)},gainTechnology:function(e,t,a){"lightwave-deflector"==a&&(e.game.players_info[t-1].lightwave_deflector=1,e.game.players_info[t-1].move_through_sectors_with_opponent_ships=1)}})},function(e,t){this.importTech("neural-motivator",{name:"Neural Motivator",color:"green",prereqs:[],text:"Gain an extra action card each turn",initialize:function(e,t){null==e.game.players_info[t-1].neural_motivator&&(e.game.players_info[t-1].neural_motivator=0)},gainTechnology:function(e,t,a){"neural-motivator"==a&&(e.game.players_info[t-1].neural_motivator=1,e.game.players_info[t-1].action_cards_bonus_when_issued=1)}}),this.importTech("dacxive-animators",{name:"Dacxive Animators",color:"green",prereqs:["green"],text:"Place an extra infantry on any planet after winning a defensive ground combat tbere",initialize:function(e,t){null==e.game.players_info[t-1].dacxive_animators&&(e.game.players_info[t-1].dacxive_animators=0)},gainTechnology:function(e,t,a){"dacxive-animators"==a&&(e.game.players_info[t-1].dacxive_animators=1)},groundCombatRoundEnd:function(e,t,a,r,n){var i=e.returnNumberOfGroundForcesOnPlanet(t,r,n),s=e.returnNumberOfGroundForcesOnPlanet(a,r,n);e.doesPlayerHaveTech(a,"dacxive-animators")&&i<s&&0==i&&(e.addPlanetaryUnit(a,r,n,"infantry"),e.updateLog(e.returnFaction(a)+" reinforces infantry with Dacxive Animators"))}}),this.importTech("hyper-metabolism",{name:"Hyper Metabolism",color:"green",prereqs:["green","green"],text:"Gain an extra command token each round",initialize:function(e,t){null==e.game.players_info[t-1].hyper_metabolism&&(e.game.players_info[t-1].hyper_metabolism=0)},gainTechnology:function(e,t,a){"hyper-metabolism"==a&&(e.game.players_info[t-1].hyper_metabolism=1,e.game.players_info[t-1].new_token_bonus_when_issued=1)}}),this.importTech("x89-bacterial-weapon",{name:"X-89 Bacterial Weapon",color:"green",prereqs:["green","green","green"],text:"Bombardment destroys all infantry on planet",initialize:function(e,t){null==e.game.players_info[t-1].x89_bacterial_weapon&&(e.game.players_info[t-1].x89_bacterial_weapon=0,e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0)},gainTechnology:function(e,t,a){"x89-bacterial-weapon"==a&&(e.game.players_info[t-1].x89_bacterial_weapon=1,e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0)},onNewRound:function(e,t){return e.game.players_info[t-1].x89_bacterial_weapon_exhausted=0,1},bombardmentTriggers:function(e,t,a,r){return 1==e.game.players_info[a-1].x89_bacterial_weapon&&0==e.game.players_info[a-1].x89_bacterial_weapon_exhausted&&(e.doesSectorContainPlayerUnit(a,r,"warsun")||e.doesSectorContainPlayerUnit(a,r,"dreadnaught"))?1:0},bombardmentEvent:function(e,t,a,r,n){if(e.game.player!=a)return 0;if(e.game.player!=t)return 0;e.returnSectorAndPlanets(r).p[n];return"<p>Do you wish to use Bacterial Weapons during Bombardment?</p><ul>",'<li class="option textchoice" id="attack">use bacterial weapons?</li>','<li class="option textchoice" id="skip">skip</li>',"</ul>",e.updateStatus('<p>Do you wish to use Bacterial Weapons during Bombardment?</p><ul><li class="option textchoice" id="attack">use bacterial weapons?</li><li class="option textchoice" id="skip">skip</li></ul>'),$(".textchoice").off(),$(".textchoice").on("click",(function(){var a=$(this).attr("id");"attack"==a&&(e.addMove("destroy_infantry_on_planet\t"+t+"\t"+r+"\t"+n+"\t100"),e.addMove("setvar\tplayers\t"+t+"\tx89_bacterial_weapon_exhausted\tint\t1"),e.addMove("NOTIFY\t"+e.returnFaction(t)+" uses X89 Bacterial Weapons"),e.endTurn()),"skip"==a&&(e.addMove("NOTIFY\t"+e.returnFaction(t)+" refrains from using X89 Bacterial Weapons"),e.endTurn())})),0}})},function(e,t){this.importTech("plasma-scoring",{name:"Plasma Scoring",color:"red",prereqs:[],text:"All PDS and bombardment fire gets +1 bonus shot",initialize:function(e,t){null==e.game.players_info[t-1].plasma_scoring&&(e.game.players_info[t-1].plasma_scoring=0)},gainTechnology:function(e,t,a){"plasma-scoring"==a&&(e.game.players_info[t-1].plasma_scoring=1,e.game.players_info[t-1].pds_combat_roll_bonus_shots++)},pdsSpaceAttackTriggers:function(e,t,a,r){return e.doesPlayerHaveTech(a,"plasma-scoring")&&1==e.doesPlayerHavePDSUnitsWithinRange(t,a,r)&&t!=a&&e.updateLog(e.returnFaction(a)+" gets +1 shot from Plasma Scoring"),0},pdsSpaceDefenseTriggers:function(e,t,a,r){return e.doesPlayerHaveTech(a,"plasma-scoring")&&1==e.doesPlayerHavePDSUnitsWithinRange(t,a,r)&&t!=a&&e.updateLog(e.returnFaction(a)+" gets +1 shot from Plasma Scoring"),0}}),this.importTech("magen-defense-grid",{name:"Magen Defense Grid",color:"red",text:"When ground combat begins on a planet with PDS or Space Dock, destroy one opponent infantry",prereqs:["red"],initialize:function(e,t){null==e.game.players_info[t-1].magen_defense_grid&&(e.game.players_info[t-1].magen_defense_grid=0)},onNewRound:function(e,t){return t==e.game.player&&(e.game.players_info[t-1].magen_defense_grid=1),1},groundCombatTriggers:function(e,t,a,r){if(e.game.state.ground_combat_round>=1)return 0;if(e.doesPlayerHaveTech(t,"magen-defense-grid")){var n=e.returnSectorAndPlanets(a).p[r];if(t==n.owner)for(var i=0;i<n.units[t-1].length;i++)if("spacedock"==n.units[t-1][i].type||"pds"==n.units[t-1][i].type)return e.updateLog("Magan Defense Grid triggers on "+n.name),1}return 0},groundCombatEvent:function(e,t,a,r){for(var n=e.returnSectorAndPlanets(a).p[r],i=n.owner,s=0;s<n.units.length;s++){var o=n.units[s].length;if(s!=i-1&&s<n.units.length)for(var c=0;c<o;c++){var l=s+1,u=t;"infantry"==n.units[s][c].type&&(e.assignHitsToGroundForces(u,l,a,r,1),e.eliminateDestroyedUnitsInSector(l,a),e.updateSectorGraphics(a),e.updateLog(e.returnFaction(l)+" loses 1 infantry to Magan Defense Grid"),c=n.units[s].length+3,s=n.units.length+3)}}return 1}}),this.importTech("duranium-armor",{name:"Duranium Armor",color:"red",prereqs:["red","red"],text:"Each round, you may repair any ship which has not taken damage this round",initialize:function(e,t){null==e.game.players_info[t-1].duranium_armor&&(e.game.players_info[t-1].duranium_armor=0,e.game.players_info[t-1].duranium_armor=0)},onNewRound:function(e,t,a){return t==e.game.player&&(e.game.players_info[t-1].duranium_armor=1,e.game.players_info[t-1].may_repair_damaged_ships_after_space_combat=1),1},spaceCombatRoundOver:function(e,t,a,r){var n=e.returnSectorAndPlanets(r);if(e.doesPlayerHaveTech(t,"duranium-armor"))for(var i=0;i<n.s.units[t-1].length;i++){var s=n.s.units[t-1][i];s.last_round_damaged<e.game.state.space_combat_round&&(s.strength=s.max_strength,e.updateLog(e.returnFaction(t)+" repairs ships with Duranium Armor"))}if(e.doesPlayerHaveTech(a,"duranium-armor"))for(var o=0;o<n.s.units[a-1].length;o++){var c=n.s.units[a-1][o];c.last_round_damaged<e.game.state.space_combat_round&&(c.strength=c.max_strength,e.updateLog(e.returnFaction(a)+" repairs ships with Duranium Armor"))}}}),this.importTech("assault-cannon",{name:"Assault Cannon",color:"red",prereqs:["red","red","red"],text:"If you have three or more capital ships in a sector, destroy one opponent capital ship",initialize:function(e,t){null==e.game.players_info[t-1].assault_cannont&&(e.game.players_info[t-1].assault_cannont=0)},onNewRound:function(e,t,a){return t==e.game.player&&(e.game.players_info[t-1].assault_cannont=1,e.game.players_info[t-1].may_assign_first_round_combat_shot=1),1},spaceCombatTriggers:function(e,t,a){e.game.state.activated_sector=a;for(var r=e.returnSectorAndPlanets(a),n=0,i=0;i<r.s.units.length;i++)if(i+1!=t&&e.doesPlayerHaveTech(i+1,"assault-cannon")){for(var s=0;s<r.s.units[i].length;s++){var o=r.s.units[i][s];"destroyer"==o.type&&n++,"carrier"==o.type&&n++,"cruiser"==o.type&&n++,"dreadnaught"==o.type&&n++,"flagship"==o.type&&n++,"warsun"==o.type&&n++}if(n>=3)for(var c=0;c<r.s.units[t-1].length;c++){var l=r.s.units[t-1][c];if("destroyer"==l.type)return 1;if("carrier"==l.type)return 1;if("cruiser"==l.type)return 1;if("dreadnaught"==l.type)return 1;if("flagship"==l.type)return 1;if("warsun"==l.type)return 1}}return 0},spaceCombatEvent:function(e,t,a){return e.game.players_info[t-1].target_units=["carrier","destroyer","cruiser","dreadnaught","flagship","warsun"],e.game.queue.push("destroy_ships\t"+t+"\t1\t"+e.game.state.activated_sector),e.game.queue.push("ACKNOWLEDGE\t"+e.returnFaction(t)+" must destroy 1 ship from Assault Cannon"),1}})},function(e,t){this.importTech("spacedock-ii",{name:"SpaceDock II",unit:1,prereqs:["yellow","yellow"],text:"May produce 4 more units than its planet resource value",initialize:function(e,t){if(1==e.game.players_info[t-1].spacedock_ii)return 1;e.game.players_info[t-1].spacedock_ii=0},gainTechnology:function(e,t,a){"spacedock-ii"==a&&(e.game.players_info[t-1].spacedock_ii=1)},upgradeUnit:function(e,t,a){return"spacedock"===a.type&&e.doesPlayerHaveTech(t,"spacedock-ii")?e.returnUnit("spacedock-ii",t,0):a}}),this.importTech("pds-ii",{name:"PDS II",unit:1,prereqs:["red","yellow"],text:"Hits on 5, able to fire into adjacent sectors",initialize:function(e,t){if(1==e.game.players_info[t-1].pds_ii)return 1;e.game.players_info[t-1].pds_ii=0},gainTechnology:function(e,t,a){"pds-ii"==a&&(e.game.players_info[t-1].pds_ii=1)},upgradeUnit:function(e,t,a){return"pds"===a.type&&e.doesPlayerHaveTech(t,"pds-ii")?e.returnUnit("pds-ii",t,0):a}}),this.importTech("carrier-ii",{name:"Carrier II",unit:1,prereqs:["blue","blue"],text:"Moves 2 hexes and carries 6 infantry or fighters",initialize:function(e,t){if(1==e.game.players_info[t-1].carrier_ii)return 1;e.game.players_info[t-1].carrier_ii=0},gainTechnology:function(e,t,a){"carrier-ii"==a&&(e.game.players_info[t-1].carrier_ii=1)},upgradeUnit:function(e,t,a){return"carrier"===a.type&&e.doesPlayerHaveTech(t,"carrier-ii")?(console.log("returning upgraded carrier..."),e.returnUnit("carrier-ii",t,0)):a}}),this.importTech("infantry-ii",{name:"Infantry II",unit:1,prereqs:["green","green"],text:"Chance of medical rescue and return to homeworld after unit is destroyed",initialize:function(e,t){if(1==e.game.players_info[t-1].infantry_ii)return 1;e.game.players_info[t-1].infantry_ii=0},gainTechnology:function(e,t,a){"infantry-ii"==a&&(e.game.players_info[t-1].infantry_ii=1)},upgradeUnit:function(e,t,a){return"infantry"==a.type&&e.doesPlayerHaveTech(t,"infantry-ii")?e.returnUnit("infantry-ii",t,0):a}}),this.importTech("destroyer-ii",{name:"Destroyer II",unit:1,prereqs:["red","red"],text:"Hits on 8 and has stronger anti-fighter barrage (6x3)",initialize:function(e,t){if(1==e.game.players_info[t-1].destroyer_ii)return 1;e.game.players_info[t-1].destroyer_ii=0},gainTechnology:function(e,t,a){"destroyer-ii"==a&&(e.game.players_info[t-1].destroyer_ii=1)},upgradeUnit:function(e,t,a){return"destroyer"==a.type&&e.doesPlayerHaveTech(t,"destroyer-ii")?e.returnUnit("destroyer-ii",t,0):a}}),this.importTech("fighter-ii",{name:"Fighter II",unit:1,prereqs:["green","blue"],text:"Hits on 8 and moves 2 hexes. May survive without carriers or support",initialize:function(e,t){if(1==e.game.players_info[t-1].fighter_ii)return 1;e.game.players_info[t-1].fighter_ii=0},gainTechnology:function(e,t,a){"fighter-ii"==a&&(e.game.players_info[t-1].fighter_ii=1)},upgradeUnit:function(e,t,a){return"fighter"==a.type&&e.doesPlayerHaveTech(t,"fighter-ii")?e.returnUnit("fighter-ii",t,0):a}}),this.importTech("cruiser-ii",{name:"Cruiser II",unit:1,prereqs:["green","yellow","red"],text:"Hits on 6, moves 3 sectors and can carry 1 fighter or infantry",initialize:function(e,t){if(1==e.game.players_info[t-1].cruiser_ii)return 1;e.game.players_info[t-1].cruiser_ii=0},gainTechnology:function(e,t,a){"cruiser-ii"==a&&(e.game.players_info[t-1].cruiser_ii=1)},upgradeUnit:function(e,t,a){return"cruiser"==a.type&&e.doesPlayerHaveTech(t,"cruiser-ii")?e.returnUnit("cruiser-ii",t,0):a}}),this.importTech("dreadnaught-ii",{name:"Dreadnaught II",unit:1,prereqs:["blue","blue","yellow"],text:"Hits on 5, moves 2 sectors and can carry 1 unit. 2 hits to destroy",initialize:function(e,t){if(1==e.game.players_info[t-1].dreadnaught_ii)return 1;e.game.players_info[t-1].dreadnaught_ii=0},gainTechnology:function(e,t,a){"dreadnaught-ii"==a&&(e.game.players_info[t-1].dreadnaught_ii=1)},upgradeUnit:function(e,t,a){return"dreadnaught"==a.type&&e.doesPlayerHaveTech(t,"dreadnaught-ii")?e.returnUnit("dreadnaught-ii",t,0):a}}),this.importTech("warsun",{name:"Warsun",unit:1,prereqs:["red","red","red","yellow"],text:"The Death Star: terrifying in combat, but fragile without supporting fleet",initialize:function(e,t){null==e.game.players_info[t-1].may_produce_warsuns&&(e.game.players_info[t-1].may_produce_warsuns=0)},gainTechnology:function(e,t,a){"warsun"==a&&(e.game.players_info[t-1].may_produce_warsuns=1)}})},function(e,t){this.importTech("sarween-tools",{name:"Sarween Tools",color:"yellow",text:"Reduce cost of units produced by -1 when using production",prereqs:[],initialize:function(e,t){null==e.game.players_info[t-1].sarween_tools&&(e.game.players_info[t-1].sarween_tools=0)},gainTechnology:function(e,t,a){"sarween-tools"==a&&(e.game.players_info[t-1].sarween_tools=1,e.game.players_info[t-1].production_bonus=1)}}),this.importTech("graviton-laser-system",{name:"Graviton Laser System",color:"yellow",text:"Exhaust card once per round to target capital ships with PDS fire",prereqs:["yellow"],initialize:function(e,t){null==e.game.players_info[t-1].graviton_laser_system&&(e.game.players_info[t-1].graviton_laser_system=0,e.game.players_info[t-1].graviton_laser_system_exhausted=0,e.game.players_info[t-1].graviton_laser_system_active=0)},onNewRound:function(e,t){1==e.game.players_info[t-1].graviton_laser_system&&(e.game.players_info[t-1].graviton_laser_system_exhausted=0,e.game.players_info[t-1].graviton_laser_system_active=0)},gainTechnology:function(e,t,a){"graviton-laser-system"==a&&(e.game.players_info[t-1].graviton_laser_system=1,e.game.players_info[t-1].graviton_laser_system_exhausted=0)},modifyTargets:function(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];return"pds"==n&&1==e.game.players_info[a-1].graviton_laser_system_active&&(i.includes("warsun")||i.push("warsun"),i.includes("flagship")||i.push("flagship"),i.includes("dreadnaught")||i.push("dreadnaught"),i.includes("cruiser")||i.push("cruiser"),i.includes("carrier")||i.push("carrier"),i.includes("destroyer")||i.push("destroyer")),i},menuOption:function(e,t,a){return"pds"==t?{event:"graviton",html:'<li class="option" id="graviton">use graviton laser targetting</li>'}:{}},menuOptionTriggers:function(e,t,a){return"pds"==t&&0==e.game.players_info[a-1].graviton_laser_system_exhausted&&1==e.game.players_info[a-1].graviton_laser_system?1:0},menuOptionActivated:function(e,t,a){return"pds"==t&&(e.updateLog(e.returnFaction(a)+" exhausts Graviton Laser System"),e.game.players_info[a-1].graviton_laser_system_exhausted=1,e.game.players_info[a-1].graviton_laser_system_active=1,e.addMove("setvar\tplayers\t"+a+"\tgraviton_laser_system_exhausted\tint\t1"),e.addMove("setvar\tplayers\t"+a+"\tgraviton_laser_system_active\tint\t1"),e.addMove("NOTIFY\t"+e.returnFactionNickname(a)+" activates Graviton Laser System")),0}}),this.importTech("transit-diodes",{name:"Transit Diodes",color:"yellow",prereqs:["yellow","yellow"],text:"Exhaust to reallocate 4 infantry between planets your control",initialize:function(e,t){null==e.game.players_info[t-1].transit_diodes&&(e.game.players_info[t-1].transit_diodes=0,e.game.players_info[t-1].transit_diodes_exhausted=0)},gainTechnology:function(e,t,a){"transit-diodes"==a&&(e.game.players_info[t-1].transit_diodes=1,e.game.players_info[t-1].transit_diodes_exhausted=0)},menuOption:function(e,t,a){return"main"==t?{event:"transitdiodes",html:'<li class="option" id="transitdiodes">use transit diodes</li>'}:{}},menuOptionTriggers:function(e,t,a){return"main"==t&&e.doesPlayerHaveTech(a,"transit-diodes")?1:0},menuOptionActivated:function(e,t,a){return"main"==t&&e.playerRemoveInfantryFromPlanets(a,4,(function(t){e.playerAddInfantryToPlanets(a,t,(function(){e.addMove("setvar\tplayers\t"+a+"\ttransit_diodes_exhausted\tint\t1"),e.addMove("NOTIFY\t"+a+" activates transit diodes"),e.addMove("NOTIFY\t"+e.returnFaction(a)+" has moved infantry"),e.endTurn()}))})),0}}),this.importTech("integrated-economy",{name:"Integrated Economy",color:"yellow",prereqs:["yellow","yellow","yellow"],text:"You may produce on a planet after capturing it, up to cost (resource) limit of planet.",initialize:function(e,t){null==e.game.players_info[t-1].integrated_economy&&(e.game.players_info[t-1].integrated_economy=0,e.game.players_info[t-1].integrated_economy_planet_invaded=0,e.game.players_info[t-1].integrated_economy_planet_invaded_resources=0)},gainTechnology:function(e,t,a){"integrated-economy"==a&&(e.game.players_info[t-1].integrated_economy=1,e.game.players_info[t-1].integrated_economy_planet_invaded=0,e.game.players_info[t-1].integrated_economy_planet_invaded_resources=0)},gainPlanet:function(e,t,a){e.doesPlayerHaveTech(t,"integrated-economy")&&(e.game.players_info[t-1].may_player_produce_without_spacedock=1,e.game.players_info[t-1].may_player_produce_without_spacedock_production_limit=0,console.log("P: "+a),e.game.players_info[t-1].may_player_produce_without_spacedock_cost_limit+=e.game.planets[a].resources)}})},function(e,t){this.importUnit("infantry",{name:"Infantry",type:"infantry",cost:.5,combat:8,strength:1,space:0,ground:1,can_be_stored:1,capacity_required:1,description:"Infantry invade planets, but cannot move between sectors without being carried on carriers or other ships with capacity."}),this.importUnit("fighter",{name:"Fighter",type:"fighter",cost:.5,move:1,combat:9,strength:1,can_be_stored:1,capacity_required:1,description:"Fighters are disposable ships deployed to protect capital ships. They must be transported on carriers or other ships with capacity."}),this.importUnit("pds",{name:"PDS",type:"pds",range:0,cost:5,combat:6,description:"PDS units fire on other ships that invade their sectors. They can also fire on foreign infantry that invade a planet."}),this.importUnit("spacedock",{name:"Spacedock",type:"spacedock",capacity:3,production:2,combat:0,range:0,description:"Spacedocks are used to produce infantry and other ships. They cannot produce ships in space if an opponent fighter is in the sector"}),this.importUnit("carrier",{name:"Carrier",type:"carrier",cost:3,move:1,combat:9,capacity:4,strength:1,description:"The Carrier is a troop and fighter transport ship. Load it with infantry and fighters and use it to conquer other sectors."}),this.importUnit("destroyer",{name:"Destroyer",type:"destroyer",cost:1,move:2,combat:9,strength:1,anti_fighter_barrage:2,anti_fighter_barrage_combat:9,description:"The Destroyer is an inexpensive but mobile ship designed to counter fighter swarms - its ANTI-FIGHTER BARRAGE (2 rolls hitting on 9 or higher) happens at the very start of space-combat"}),this.importUnit("cruiser",{name:"Cruiser",type:"cruiser",cost:2,move:2,combat:7,strength:1,description:"The Cruiser is a more powerful ship with a reasonable chance of landing hits in battle."}),this.importUnit("dreadnaught",{name:"Dreadnaught",type:"dreadnaught",cost:4,move:1,capacity:1,combat:6,strength:2,bombardment_rolls:1,bombardment_combat:5,description:"The Dreadnaught is a powerful combat ship able to SUSTAIN DAMAGE once before being destroyed in combat"}),this.importUnit("flagship",{name:"Flagship",type:"flagship",cost:8,move:1,capacity:1,combat:7,strength:2,description:"The Flagship is the pride of the fleet -- each faction's flagship confers specific abilities. See your factino sheet for more details"}),this.importUnit("warsun",{name:"War Sun",type:"warsun",cost:12,shots:3,move:1,capacity:3,combat:3,strength:2,bombardment_rolls:3,bombardment_combat:3,description:"The War Sun is death packaged in a mass of planet-destroying turbinium. Rumours of their lethality abound, as few have fought one and lived to tell the tale."}),this.importUnit("infantry-ii",{name:"Infantry II",type:"infantry",cost:.5,combat:7,strength:1,space:0,ground:1,can_be_stored:1,capacity_required:1,extension:1,description:"Infantry II are stronger and more resilient but cannot typically be moved between sectors without moving on carriers or other ships with capacity."}),this.importUnit("fighter-ii",{name:"Fighter II",type:"fighter",cost:.5,move:2,combat:8,strength:1,can_be_stored:1,capacity_required:1,extension:1,description:"Fighter II can move without being transported by other ships. Any ships inexcess of your carrying capacity could against your fleet supply."}),this.importUnit("spacedock-ii",{name:"Spacedock II",type:"spacedock",capacity:3,production:4,extension:1,description:"Spacedock II can produce more units whenever they produce."}),this.importUnit("pds-ii",{name:"PDS II",type:"pds",cost:5,combat:5,range:1,extension:1,description:"PDS II has a slightly more accurate targeting mechanism and can fire into adjacent sectors."}),this.importUnit("carrier-ii",{name:"Carrier II",type:"carrier",cost:3,move:2,combat:9,capacity:6,strength:1,extension:1,description:"Carrier II has upgraded ship capacity and is slightly more robust in combat"}),this.importUnit("destroyer-ii",{name:"Destroyer II",type:"destroyer",cost:1,move:2,combat:8,strength:1,extension:1,anti_fighter_barrage:3,anti_fighter_barrage_combat:6,description:"Destroyer II has improved ANTI-FIGHTER-BARRAGE (3x6) and is slightly more effective in general combat"}),this.importUnit("cruiser-ii",{name:"Cruiser II",type:"cruiser",cost:2,move:2,combat:7,strength:1,extension:1,description:"Cruiser II has extended range and the ability to support a small phalanx of ground troops"}),this.importUnit("dreadnaught-ii",{name:"Dreadnaught II",type:"dreadnaught",cost:4,move:2,capacity:1,combat:5,strength:2,extension:1,description:"Dreadnaught II has improved movement, can support a small ground team and is slightly more effective in space combat"})},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,a){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=u(e);if(t){var n=u(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=a(15),p=a(282),h=p.addToDOM,f=p.logToMatomo,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,a,r,d=o(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=d.call(this,e)).name="Matomo",t.description="Saito tracking tag",t.categories="Marketing",t.alreadyAdded=!1,c(t,l(t))}return t=p,(a=[{key:"initialize",value:function(e){i(u(p.prototype),"initialize",this).call(this,e),e.BROWSER&&(this.alreadyAdded||(this.alreadyAdded=!0,h()))}},{key:"respondTo",value:function(e){if("matomo_event_push"==e){var t={};return t.push=f,t}return null}}])&&n(t.prototype,a),r&&n(t,r),p}(d);e.exports=m},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=l(e);if(t){var n=l(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return o(this,a)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=a(283),d=(a(5),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(d,e);var t,a,r,l=s(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=l.call(this,e)).app=e,t.name="MyQRCode",t.description="Displays your QRcode as an option in the top menu for easy scanning by other users",t.categories="Core Utilities",t.link="/email?module=myqrcode",t.description="QR Code display utility for Saito",t.categories="UI Utilities",o(t,c(t))}return t=d,(a=[{key:"respondTo",value:function(e){if("email-appspace"==e){var t={render:function(e,t){u.render(e,t)},attachEvents:function(e,t){u.attachEvents(e,t)}};return t}return null}}])&&n(t.prototype,a),r&&n(t,r),d}(a(15)));e.exports=d},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,a){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d(e);if(t){var n=d(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return l(this,a)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var t,a,r,p=c(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=p.call(this,e)).name="Pandemic",t.description="Pandemic is a cooperative multiplayer board game in which players works together to try and fend off a global epidemic.",t.categories="Arcade Games Entertainment",t.useHUD=1,t.addHUDMenu=["Cards"],t.maxPlayers=4,t.minPlayers=2,t.type="Cooperative Boardgme",t.gameboardWidth=2602,t.moves=[],t.outbreaks=[],t.maxHandSize=7,t.active_moves=0,t.interface=1,t.hud.mode=0,t.hud.card_width=120,l(t,u(t))}return t=h,(a=[{key:"respondTo",value:function(e){return null!=s(d(h.prototype),"respondTo",this).call(this,e)?s(d(h.prototype),"respondTo",this).call(this,e):null}},{key:"showPlayerCards",value:function(e){for(var t="",a=this.game.players_info[e-1].cards,r=0;r<a.length;r++){var n=this.game.deck[1].cards[a[r]];t+='<div class="cardbox-hud" id="cardbox-hud-'.concat(r,'"><img src="/pandemic/img/').concat(n.img,'" /></div>')}t='<div class="display-cards">'.concat(t,"</div>"),this.overlay.showOverlay(this.app,this,t)}},{key:"initializeGame",value:function(e){if(this.updateStatus("<div class='status-message'>loading game...</div>"),this.loadGame(e),""!=this.game.status&&this.updateStatus('<div class="status-message">'+this.game.status+"</div>"),""==this.game.dice&&this.initializeDice(),null==this.game.cities){this.game.events=this.returnEvents(),this.game.cities=this.returnCities(),this.game.state=this.returnState(),this.game.players_info=this.returnPlayers(this.game.players.length),this.updateStatus('<div class="status-message">Generating the Game</div>'),this.game.queue=[],this.game.queue.push("round"),this.game.queue.push("initialize_player_deck");var t=2;this.game.opponents.length+1==3&&(t=3),this.game.opponents.length+1==2&&(t=4);for(var a=0;a<this.game.opponents.length+1;a++)this.game.queue.push("draw_player_card\t"+(a+1)+"\t"+t);this.game.queue.push("place_initial_infection"),this.game.queue.push("READY\t1");var r=this.returnPlayerCards();this.game.queue.push("SHUFFLE\t2"),this.game.queue.push("DECK\t2\t"+JSON.stringify(r)),this.game.queue.push("SHUFFLE\t1"),this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnInfectionCards()))}for(var n in this.game.cities){var i="#"+n;try{$(i).css("top",this.scale(this.game.cities[n].top)+"px"),$(i).css("left",this.scale(this.game.cities[n].left)+"px")}catch(e){}}if(this.showBoard(),1==this.browser_active){var s={extra:{}};s.extra.target=this.game.target,this.handleGameLoop(s)}}},{key:"initializeHTML",value:function(e){var t=this;if(0!=this.browser_active){var a=this;s(d(h.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(a){a.respondTo("chat-manager").render(e,t),a.respondTo("chat-manager").attachEvents(e,t)})),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"Log",id:"game-log",class:"game-log",callback:function(e,t){t.menu.hideSubMenus(),t.log.toggleLog()}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}}),this.menu.addMenuOption({text:"Cards",id:"game-cards",class:"game-cards",callback:function(e,t){t.menu.showSubMenu("game-cards")}});for(var r=function(e){t.menu.addSubMenuOption("game-cards",{text:"Player "+(e+1),id:"game-player-cards-"+(e+1),class:"game-player-cards-"+(e+1),callback:function(t,a){a.menu.hideSubMenus(),a.showPlayerCards(e+1)}})},n=0;n<this.game.players.length;n++)r(n);this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}}),this.menu.render(e,this),this.menu.attachEvents(e,this);for(var i=0,o=0,c=0;c<this.app.modules.mods.length;c++)if("chat"===this.app.modules.mods[c].slug)for(var l=0;l<this.game.players.length;l++)this.game.players[l]!=this.app.wallet.returnPublicKey()&&function(){0==i&&(t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),i=1),0==o&&(t.menu.addSubMenuOption("game-chat",{text:"Community",id:"game-chat-community",class:"game-chat-community",callback:function(e,t){t.menu.hideSubMenus(),n.mute_community_chat=0,n.sendEvent("chat-render-request",{}),n.openChatBox()}}),o=1);var e=[t.game.players[l],t.app.wallet.returnPublicKey()].sort(),a=t.app.crypto.hash(e.join("_")),r="Player "+(l+1),n=t.app.modules.mods[c];t.menu.addSubMenuOption("game-chat",{text:r,id:"game-chat-"+(l+1),class:"game-chat-"+(l+1),callback:function(t,i){i.menu.hideSubMenus(),n.createChatGroup(e,r),n.openChatBox(a),n.sendEvent("chat-render-request",{}),n.saveChat()}})}();this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}}),this.menu.render(e,this),this.menu.attachEvents(e,this),this.log.render(e,this),this.log.attachEvents(e,this),this.cardbox.render(e,this),this.cardbox.attachEvents(e,this),this.hud.addCardType("card","select",this.cardbox_callback),this.app.browser.isMobileBrowser(navigator.userAgent)?this.hud.card_width=120:this.cardbox.skip_card_prompt=1;try{e.browser.isMobileBrowser(navigator.userAgent)?(this.hammer.render(this.app,this),this.hammer.attachEvents(this.app,this,".gameboard")):(this.sizer.render(this.app,this),this.sizer.attachEvents(this.app,this,".gameboard"),$("#gameboard").draggable({stop:function(e,t){a.saveGamePreference(a.returnSlug()+"-board-offset",t.offset)}}))}catch(e){console.log("ERROR TRIGGERED: "+e)}}}},{key:"playerTurn",value:function(){var e=this;this.game.state.one_quiet_night=0,this.addMove("turn\t"+this.returnNextPlayer(this.game.player)),this.addMove("infect"),this.addMove("draw_player_card\t"+this.game.player+"\t2"),this.game.players_info[this.game.player-1].cards.length>this.maxHandSize?this.playerDiscardCards((function(){e.playerMakeMove(e.game.players_info[e.game.player-1].moves)})):this.playerMakeMove(this.game.players_info[this.game.player-1].moves)}},{key:"playerDiscardCards",value:function(e){var t=this;$(".card").off(),this.updateStatusAndListCards("Pick a card to discard: "),$(".card").on("click",(function(){var a=$(this).attr("id");a.indexOf("event")>-1&&confirm("Do you want to play this event card instead of discarding it?")?t.playEventCard((function(){t.game.players_info[t.game.player-1].cards.length>t.maxHandSize?t.playerDiscardCards(e):e()})):(t.addMove("discard\t"+t.game.player+"\t"+a),t.removeCardFromHand(t.game.player,a),t.game.players_info[t.game.player-1].cards.length<=t.maxHandSize?e():t.playerDiscardCards(e))}))}},{key:"removeEvents",value:function(){try{$(".card").off(),$(".city").off()}catch(e){}}},{key:"playerMakeMove",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0!=this.browser_active){var t=this,a=this.game.players_info[this.game.player-1],r=a.city;if(0!=e){this.active_moves=e;var n=.4,i=.4,s=.4,o=.4;(this.game.players_info[this.game.player-1].cards.includes("event1")||this.game.players_info[this.game.player-1].cards.includes("event2")||this.game.players_info[this.game.player-1].cards.includes("event3")||this.game.players_info[this.game.player-1].cards.includes("event4")||this.game.players_info[this.game.player-1].cards.includes("event5"))&&(o=1),1==this.isCityInfected(r)&&(n=1),1==this.canPlayerBuildResearchStation(r)&&(i=1),1==this.canPlayerDiscoverCure()&&(s=1),1==this.canPlayerShareKnowledge()&&(o=1);var c="<div class='status-message'>YOUR TURN: "+a.role+" in "+this.game.cities[a.city].name+" ["+e+"]:";c+="</div>",c+="<div class='status-icon-menu' style='width:550px;margin-left:auto;margin-right:auto;'>",c+='<div class="card menu_icon" id="move" style="margin-right:10px;margin-top:10px"><img class="menu_icon_icon" src="/pandemic/img/icons/MOVE.png" /></div>',c+='<div class="card menu_icon" id="treat" style="opacity:'+n+';margin-right:10px;margin-top:10px"><img class="menu_icon_icon" src="/pandemic/img/icons/TREAT.png" /></div>',c+='<div class="card menu_icon" id="build" style="opacity:'+i+';margin-right:10px;margin-top:10px"><img class="menu_icon_icon" src="/pandemic/img/icons/BUILD.png" /></div>',c+='<div class="card menu_icon" id="discover_cure" style="opacity:'+s+';margin-right:10px;margin-top:10px"><img class="menu_icon_icon" src="/pandemic/img/icons/CURE.png" /></div>',c+='<div class="card menu_icon" id="cards" style="opacity:'+o+';margin-top:10px"><img class="menu_icon_icon" src="/pandemic/img/icons/CARDS.png" /></div>',c+="</div>",$(".card").off(),this.updateStatus(c),$(".card").on("click",(function(){var c=$(this).attr("id");if("move"===c){var l="<div class='status-message'>YOUR TURN: "+a.role+" in "+t.game.cities[a.city].name+" ["+e+"]:<ul>";l+='<li class="card" id="move">drive / ferry</li>',l+='<li class="card" id="flight">direct flight</li>',t.game.players_info[t.game.player-1].cards.includes(r)&&(l+='<li class="card" id="flight">charter flight</li>'),t.game.state.research_stations.length>1&&t.game.state.research_stations.includes(r)&&(l+='<li class="card" id="shuttle">shuttle flight</li>'),l+="</ul>",l+="</div>",$(".card").off(),t.updateStatus(l),$(".card").on("click",(function(){var e=$(this).attr("id");"move"===e&&t.movePlayer(),"flight"===e&&t.directFlight(),"shuttle"===e&&t.shuttleFlight()}))}if("treat"===c){if(1!=n)return void salert("You may not treat disease");t.cureDisease()}if("discover_cure"===c){if(1!=s)return void salert("You may not discover a cure now");t.discoverCure()}if("cards"===c){if(1!=o)return void salert("You do not have event cards and cannot share cards with anyone now");t.game.players_info[this.game.player-1].cards.includes("event1")||t.game.players_info[this.game.player-1].cards.includes("event2")||t.game.players_info[this.game.player-1].cards.includes("event3")||t.game.players_info[this.game.player-1].cards.includes("event4")||t.game.players_info[this.game.player-1].cards.includes("event5");var u=0;1==t.canPlayerShareKnowledge()&&(u=1);var d="<div class='status-message'>Card Options: "+a.role+" in "+t.game.cities[a.city].name+" ["+e+"]:<ul>";1==u&&(d+='<li class="card" id="shareknowledge">give player card</li>'),d+="</ul>",d+="</div>",$(".card").off(),t.updateStatus(d),$(".card").on("click",(function(){var e=$(this).attr("id");return"eventcard"===e?(t.playEventCard(),0):"shareknowledge"===e?(t.shareKnowledge(),0):void 0}))}if("build"===c){if(1!=i)return void salert("You cannot build a research station here");t.buildResearchStation()}if("pass"===c)return t.endTurn(),0}))}else this.endTurn()}}},{key:"shareKnowledge",value:function(){for(var e=this,t=this.game.players_info[this.game.player-1],a=t.city,r=0,n=0;n<t.cards;n++)t.cards[n]==a&&(r=1);if(0==r&&(this.addMove("takecard\t"+this.game.player+"\t"+this.game.player+"\t"+a),this.game.players_info[this.game.player-1].cards.push(a),e.active_moves--,0==e.active_moves?e.endTurn():e.playerMakeMove(e.active_moves)),1==r){for(var i='<div class="status-message">Give card to whom?<ul>',s=0;s<this.game.players_info.length;s++)this.game.players_info[s].city==a&&s!=this.game.player-1&&(i+='<li class="card" id="'+(s+1)+'">Player '+(s+1)+"</li>");i+="</ul>",i+="</div>",this.updateStatus(i),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id"),r=parseInt(t)-1;this.addMove("takecard\t"+this.game.player+"\t"+r+"\t"+a),e.active_moves--,0==e.active_moves?e.endTurn():e.playerMakeMove(e.active_moves)}))}}},{key:"canPlayerShareKnowledge",value:function(){for(var e=this.game.players_info[this.game.player-1].city,t=0,a=0;a<this.game.players_info.length;a++)for(var r=0;r<this.game.players_info[a].cards.length;r++)this.game.players_info[a].cards[r]==e&&(t=1);if(0==t)return 0;players_in_city=0;for(var n=0;n<this.game.players_info.length;n++)this.game.players_info[n].city==e&&players_in_city++;return players_in_city>=2?1:0}},{key:"canPlayerDiscoverCure",value:function(){var e=this.game.players_info[this.game.player-1].cards,t=this.game.players_info[this.game.player-1].city;if(!this.game.state.research_stations.includes(t))return 0;var a=0,r=0,n=0,i=0,s=5;2==this.game.players_info[this.game.player-1].type&&(s=4);for(var o=0;o<e.length;o++)null!=this.game.deck[0].cards[e[o]]&&("yellow"==this.game.deck[0].cards[e[o]].virus&&r++,"red"==this.game.deck[0].cards[e[o]].virus&&n++,"black"==this.game.deck[0].cards[e[o]].virus&&i++,"blue"==this.game.deck[0].cards[e[o]].virus&&a++);return r>=s&&0==this.game.state.yellow_cure||a>=s&&0==this.game.state.blue_cure||i>=s&&0==this.game.state.black_cure||n>=s&&0==this.game.state.red_cure?1:0}},{key:"playEventCard",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.game.players_info[this.game.player-1].cards,a=this,r='<div class="status-message">Play an event card:<ul>',n=0;n<t.length;n++)"event1"!=t[n]&&"event2"!=t[n]&&"event3"!=t[n]&&"event4"!=t[n]&&"event5"!=t[n]||(r+='<li id="'+t[n]+'" class="card">'+this.game.deck[1].cards[t[n]].name+"</li>");r+="</ul>",r+="</div>",this.updateStatus(r),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id");if(a.addMove("discard\t"+a.game.player+"\t"+t),a.removeCardFromHand(a.game.player,t),"event1"==t){r='<div class="status-message">Pick a pawn to move to another city:<ul>';for(var n=0;n<a.game.players_info.length;n++)r+='<li id="'+(n+1)+'" class="card">Player '+(n+1)+" ("+a.game.players_info[n].role+")</li>";r+="</ul>",r+="</div>",a.updateStatus(r),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id"),n=[];for(var i in r='<div class="status-message">Move to which city:<ul>',a.game.cities)n.push(i);n.sort();for(var s=0;s<n.length;s++)r+='<li id="'+n[s]+'" class="card">'+a.game.cities[n[s]].name+"</li>";r+="</ul>",r+="</div>",a.updateStatus(r),$(".card").off(),$(".card").on("click",(function(){var r=$(this).attr("id");a.game.players_info[a.game.player-1].city=r,a.showBoard(),a.addMove("move\t"+t+"\t"+r),null==e?0==a.active_moves?a.endTurn():a.playerMakeMove(a.active_moves):e()}))}))}if("event2"==t){a.game.state.infection_drawn.sort(),r='<div class="status-message">Resilient Population: remove a card from the infection discard pile<ul>';for(var i=0;i<a.game.state.infection_drawn.length;i++)r+='<li class="card" id="'+a.game.state.infection_drawn[i]+'">'+a.game.cities[a.game.state.infection_drawn[i]].name+"</li>";r+="</ul>",r+="</div>",a.updateStatus(r),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id");a.addMove("resilientpopulation\t"+t),null==e?0==a.active_moves?a.endTurn():a.playerMakeMove(a.active_moves):e()}))}if("event3"==t&&(a.updateLog("One Quiet Night: skipping the next infection stage."),a.game.state.one_quiet_night=1,a.addMove("onequietnight"),null==e?0==a.active_moves?a.endTurn():a.playerMakeMove(a.active_moves):e()),"event4"==t){for(var s=[],o=[],c=0;c<6;c++)s.push(a.app.crypto.hexToString(a.game.deck[0].crypt[c]));for(var l='<div class="status-message">These are the top six cards of the infection pile. Put them back on the pile one-by-one:<ul>',u=0;u<s.length;u++)l+='<li id="'+s[u]+'" class="card">'+a.game.cities[s[u]].name+"</li>";l+="</ul>",l+="</div>",a.updateStatus(l),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id");if(o.push(t),$(this).remove(),6==o.length){var r="forecast\t6\t";r+=o[5],r+="\t",r+=o[4],r+="\t",r+=o[3],r+="\t",r+=o[2],r+="\t",r+=o[1],r+="\t",r+=o[0],a.addMove(r),null==e?0==a.active_moves?a.endTurn():a.playerMakeMove(a.active_moves):e()}}))}if("event5"==t){var d=[];for(var p in r='<div class="status-message">Pick a city for a free research station:<ul>',a.game.cities)d.push(p);d.sort();for(var h=0;h<d.length;h++)a.game.state.research_stations.includes(d[h])||(r+='<li id="'+d[h]+'" class="card">'+a.game.cities[d[h]].name+"</li>");r+="</ul>",r+="</div>",a.updateStatus(r),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id");6==a.game.state.research_stations.length?(a.game.state.research_stations[0]=a.game.state.research_stations[1],a.game.state.research_stations[1]=a.game.state.research_stations[2],a.game.state.research_stations[2]=a.game.state.research_stations[3],a.game.state.research_stations[3]=a.game.state.research_stations[4],a.game.state.research_stations[4]=a.game.state.research_stations[5],a.game.state.research_stations[5]=t):a.game.state.research_stations[a.game.state.research_stations.length]=t,a.addMove("buildresearchstation\t"+a.game.player+"\t"+t),a.showBoard(),null==e?0==a.active_moves?a.endTurn():a.playerMakeMove(a.active_moves):e()}))}}))}},{key:"discoverCure",value:function(){var e=this.game.players_info[this.game.player-1].cards,t=this,a=0,r=0,n=0,i=0,s=5;2==this.game.players_info[this.game.player-1].type&&(s=4);for(var o=0;o<e.length;o++)null!=this.game.deck[0].cards[e[o]]&&("yellow"==this.game.deck[0].cards[e[o]].virus&&r++,"red"==this.game.deck[0].cards[e[o]].virus&&n++,"black"==this.game.deck[0].cards[e[o]].virus&&i++,"blue"==this.game.deck[0].cards[e[o]].virus&&a++);var c='<div class="status-message">Research Cure:<ul>';r>=s&&0==this.game.state.yellow_cure&&(c+='<li id="yellow" class="card">yellow</li>'),a>=s&&0==this.game.state.blue_cure&&(c+='<li id="blue" class="card">blue</li>'),i>=s&&0==this.game.state.black_cure&&(c+='<li id="black" class="card">black</li>'),n>=s&&0==this.game.state.red_cure&&(c+='<li id="red" class="card">red</li>'),c+="</ul>",c+="</div>",this.updateStatus(c),$(".card").off(),$(".card").on("click",(function(){2==t.game.players_info[t.game.player-1].type&&(s=4);for(var e=$(this).attr("id"),a=t.game.players_info[t.game.player-1].cards,r=0,n=0;n<s&&r<a.length;r++)null!=t.game.deck[0].cards[a[r]]&&t.game.deck[0].cards[a[r]].virus==e&&(t.addMove("discard\t"+t.game.player+"\t"+a[r]),a.splice(r,1),r--,n++);"yellow"==e&&(t.game.state.yellow_cure=1),"red"==e&&(t.game.state.red_cure=1),"blue"==e&&(t.game.state.blue_cure=1),"black"==e&&(t.game.state.black_cure=1),1!=t.game.state.yellow_cure||1!=t.game.state.red_cure||1!=t.game.state.blue_cure||1!=t.game.state.black_cure?(t.addMove("curevirus\t"+t.game.player+"\t"+e),t.showBoard(),t.active_moves--,0==t.active_moves?t.endTurn():t.playerMakeMove(t.active_moves)):t.endGame("You win: all diseases cured")}))}},{key:"isCityInfected",value:function(e){return this.game.cities[e].virus.blue>0||this.game.cities[e].virus.black>0||this.game.cities[e].virus.red>0||this.game.cities[e].virus.yellow>0?1:0}},{key:"canPlayerBuildResearchStation",value:function(e){if(4==this.game.players_info[this.game.player-1].type){var t=this.game.players_info[this.game.player-1].city;if(!this.game.state.research_stations.includes(t))return 1}for(var a=0;a<this.game.players_info[this.game.player-1].cards.length;a++)if(this.game.players_info[this.game.player-1].cards[a]==e)return 1;return 0}},{key:"returnHopsToCityFromCity",value:function(e,t){var a=0,r=[],n=[];for(r.push(e);;){n=[],a++;for(var i=0;i<r.length;i++)for(var s=this.game.cities[r[i]].neighbours,o=0;o<s.length;o++){if(s[o]==t)return a;n.includes(s[o])||n.push(s[o])}r=n}}},{key:"movePlayer",value:function(){for(var e=this,t=this.game.players_info[this.game.player-1].city,a="<div class='status-message'>Move where: <ul>",r=0;r<this.game.cities[t].neighbours.length;r++){var n=this.game.cities[t].neighbours[r];a+='<li class="card" id="'+n+'">'+this.game.cities[n].name+"</li>"}a+="</ul></div>",this.updateStatus(a),$(".city").off(),$(".city").on("click",(function(){var a=$(this).attr("id");t=e.game.players_info[e.game.player-1].city;var r=e.returnHopsToCityFromCity(a,t);if(r>e.active_moves)alert("Invalid Move -- too many hops");else{e.game.players_info[e.game.player-1].city=a,e.active_moves-=r-1,e.showBoard();for(var n=0,i=0;i<e.moves.length;i++)e.moves[i].indexOf("move")>-1&&(e.moves[i]="move\t"+e.game.player+"\t"+a,n=1);0==n&&e.addMove("move\t"+e.game.player+"\t"+a),e.playerMakeMove(e.active_moves-1)}})),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id");e.game.players_info[e.game.player-1].city=t,e.showBoard();for(var a=0,r=0;r<e.moves.length;r++)e.moves[r].indexOf("move")>-1&&(e.moves[r]="move\t"+e.game.player+"\t"+t,a=1);0==a&&e.addMove("move\t"+e.game.player+"\t"+t),e.playerMakeMove(e.active_moves-1)}))}},{key:"cureDisease",value:function(){var e=this,t=this.game.players_info[this.game.player-1].city,a=0;if(this.game.cities[t].virus.blue>0&&a++,this.game.cities[t].virus.black>0&&a++,this.game.cities[t].virus.red>0&&a++,this.game.cities[t].virus.yellow>0&&a++,1==a){e.active_moves--;var r="blue",n=1;3==e.game.players_info[e.game.player-1].type&&(n=3);var i=e.game.players_info[e.game.player-1].city;return e.game.cities[i].virus.blue>0&&(1==e.game.state.blue_cure&&(cubes_to_cute=e.game.cities[i].virus.blue),e.game.cities[i].virus.blue-=n,e.game.state.blue_active-=n,r="blue"),e.game.cities[i].virus.red>0&&(1==e.game.state.red_cure&&(cubes_to_cute=e.game.cities[i].virus.red),e.game.cities[i].virus.red-=n,e.game.state.red_active-=n,r="red"),e.game.cities[i].virus.black>0&&(1==e.game.state.black_cure&&(cubes_to_cute=e.game.cities[i].virus.black),e.game.cities[i].virus.black-=n,e.game.state.black_active-=n,r="black"),e.game.cities[i].virus.yellow>0&&(1==e.game.state.yellow_cure&&(cubes_to_cute=e.game.cities[i].virus.yellow),e.game.cities[i].virus.yellow-=n,e.game.state.yellow_active-=n,r="yellow"),e.addMove("cure\t"+e.game.player+"\t"+i+"\t"+n+"\t"+r),e.showBoard(),void(0==e.active_moves?e.endTurn():e.playerMakeMove(e.active_moves))}var s="<div class='status-message'>Cure disease: ("+e.active_moves+" moves)<ul>";this.game.cities[t].virus.blue>0&&(s+='<li class="card" id="blue">blue</li>'),this.game.cities[t].virus.red>0&&(s+='<li class="card" id="red">red</li>'),this.game.cities[t].virus.black>0&&(s+='<li class="card" id="black">black</li>'),this.game.cities[t].virus.yellow>0&&(s+='<li class="card" id="yellow">yellow</li>'),s+='<li class="card" id="stop">stop</li>',s+="</ul></div>",this.updateStatus(s),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id");if("stop"!=t){e.active_moves--;var a=1;3==e.game.players_info[e.game.player-1].type&&(a=3);var r=e.game.players_info[e.game.player-1].city;e.addMove("cure\t"+e.game.player+"\t"+r+"\t"+a+"\t"+t),"blue"==t&&(1==e.game.state.blue_cure&&(cubes_to_cute=e.game.cities[r].virus.blue),e.game.cities[r].virus.blue-=a),"red"==t&&(e.game.cities[r].virus.red-=a),1==e.game.state.red_cure&&(cubes_to_cute=e.game.cities[r].virus.red),"black"==t&&(1==e.game.state.black_cure&&(cubes_to_cute=e.game.cities[r].virus.black),e.game.cities[r].virus.black-=a),"yellow"==t&&(1==e.game.state.yellow_cure&&(cubes_to_cute=e.game.cities[r].virus.yellow),e.game.cities[r].virus.yellow-=a),e.game.cities[r].virus.blue<0&&(e.game.cities[r].virus.blue=0),e.game.cities[r].virus.yellow<0&&(e.game.cities[r].virus.yellow=0),e.game.cities[r].virus.red<0&&(e.game.cities[r].virus.red=0),e.game.cities[r].virus.black<0&&(e.game.cities[r].virus.black=0),e.showBoard(),0==e.active_moves?e.endTurn():e.cureDisease()}else 0==e.active_moves?e.endTurn():e.playerMakeMove(e.active_moves)}))}},{key:"directFlight",value:function(){for(var e=this,t=(this.game.players_info[this.game.player-1].city,this.game.players_info[this.game.player-1].cards),a="<div class='status-message'>Take a direct flight: <ul>",r=0;r<t.length;r++)null!=this.game.cities[t[r]]&&(a+='<li class="card" id="'+t[r]+'">'+this.game.cities[t[r]].name+"</li>");a+='<li class="card" id="stop">stop</li>',a+="</ul>",a+="</div>",this.updateStatus(a),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id");if("stop"!=t){for(var a=0,r=0;r<e.moves.length;r++)e.moves[r].indexOf("move")>-1&&(e.moves[r]="move\t"+e.game.player+"\t"+t,a=1);0==a&&e.addMove("move\t"+e.game.player+"\t"+t),e.active_moves--,e.game.players_info[e.game.player-1].city=t,e.addMove("discard\t"+e.game.player+"\t"+t),e.removeCardFromHand(e.game.player,t),e.showBoard(),0==e.active_moves?e.endTurn():e.playerMakeMove(e.active_moves)}else e.playerMakeMove(e.active_moves)}))}},{key:"shuttleFlight",value:function(){for(var e=this,t=(this.game.players_info[this.game.player-1].city,"<div class='status-message'>Take a shuttle flight: <ul>"),a=0;a<this.game.state.research_stations.length;a++)t+='<li class="card" id="'+this.game.state.research_stations[a]+'">'+this.game.cities[this.game.state.research_stations[a]].name+"</li>";t+='<li class="card" id="stop">stop</li>',t+="</ul>",t+="</div>",this.updateStatus(t),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id");if("stop"!=t){for(var a=0,r=0;r<e.moves.length;r++)e.moves[r].indexOf("move")>-1&&(e.moves[r]="move\t"+e.game.player+"\t"+t,a=1);0==a&&e.addMove("move\t"+e.game.player+"\t"+t),e.active_moves--,e.game.players_info[e.game.player-1].city=t,e.addMove("discard\t"+e.game.player+"\t"+t),e.showBoard(),0==e.active_moves?e.endTurn():e.playerMakeMove(e.active_moves)}else e.playerMakeMove(e.active_moves)}))}},{key:"buildResearchStation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this;if(""==e){var a=this.game.players_info[this.game.player-1],r=a.city;if(4==a.type)return 6==t.game.state.research_stations.length?(t.game.state.research_stations[0]=t.game.state.research_stations[1],t.game.state.research_stations[1]=t.game.state.research_stations[2],t.game.state.research_stations[2]=t.game.state.research_stations[3],t.game.state.research_stations[3]=t.game.state.research_stations[4],t.game.state.research_stations[4]=t.game.state.research_stations[5],t.game.state.research_stations[5]=r):t.game.state.research_stations[t.game.state.research_stations.length]=r,t.addMove("discard\t"+t.game.player+"\t"+r),t.addMove("buildresearchstation\t"+t.game.player+"\t"+r),t.active_moves--,t.showBoard(),t.playerMakeMove(t.active_moves),0;for(var n=0;n<t.game.state.research_stations.length;n++)if(t.game.state.research_stations[n]==r)return t.active_moves--,t.showBoard(),void t.playerMakeMove(t.active_moves);6==t.game.state.research_stations.length?(t.game.state.research_stations[0]=t.game.state.research_stations[1],t.game.state.research_stations[1]=t.game.state.research_stations[2],t.game.state.research_stations[2]=t.game.state.research_stations[3],t.game.state.research_stations[3]=t.game.state.research_stations[4],t.game.state.research_stations[4]=t.game.state.research_stations[5],t.game.state.research_stations[5]=r):t.game.state.research_stations[t.game.state.research_stations.length]=r,t.addMove("discard\t"+t.game.player+"\t"+r),t.addMove("buildresearchstation\t"+t.game.player+"\t"+r);for(var i=0;i<a.cards.length;i++)if(a.cards[i]==r)return a.cards.splice(i,1),i=a.cards.length+2,t.active_moves--,t.showBoard(),void t.playerMakeMove(t.active_moves);t.active_moves--,t.showBoard(),t.playerMakeMove(t.active_moves)}else 6==t.game.state.research_stations.length?(t.game.state.research_stations[0]=t.game.state.research_stations[1],t.game.state.research_stations[1]=t.game.state.research_stations[2],t.game.state.research_stations[2]=t.game.state.research_stations[3],t.game.state.research_stations[3]=t.game.state.research_stations[4],t.game.state.research_stations[4]=t.game.state.research_stations[5],t.game.state.research_stations[5]=e):t.game.state.research_stations[t.game.state.research_stations.length]=e}},{key:"handleGameLoop",value:function(){var e=this,t=this;if(this.game.queue.length>0){console.log("QUEUE: "+this.game.queue),t.saveGame(t.game.id);var a=this.game.queue.length-1,r=this.game.queue[a].split("\t"),n=1;if("start"===r[0]&&this.game.queue.splice(a,1),"forecast"===r[0]){for(var i=parseInt(r[1]),s=0;s<i;s++){var o=r[s+2];this.updateLog(o+" on top of infection pile..."),this.game.deck[0].crypt[s]=this.app.crypto.stringToHex(o)}this.game.queue.splice(a,1)}if("resilientpopulation"===r[0]){for(var c=0;c<this.game.state.infection_drawn.length;c++)this.game.state.infection_drawn[c]==r[1]&&(this.game.state.infection_drawn.splice(c,1),c--);this.game.queue.splice(a,1)}if("resolve"===r[0]&&(this.game.queue.length<=1&&(this.game.queue=[]),this.game.queue.splice(a-1,2)),"discard"===r[0]){for(var l=parseInt(r[1]),u=r[2],d=0;d<this.game.players_info[l-1].cards.length;d++)this.game.players_info[l-1].cards[d]==u&&this.game.players_info[l-1].cards.splice(d,1);this.game.queue.splice(a-1,2)}if("round"===r[0]&&(this.game.queue.push("turn\t1"),this.game.state.welcome=0),"turn"===r[0])return 1==this.browser_active&&(0==this.game.state.welcome&&(this.overlay.showOverlay(this.app,this,this.returnWelcomeOverlay()),document.querySelector(".close_welcome_overlay").onclick=function(t){e.overlay.hideOverlay()},this.game.state.welcome=1),parseInt(r[1])==this.game.player?this.playerTurn():(this.removeEvents(),this.updateStatusAndListCards("Waiting for "+this.app.keys.returnUsername(this.game.players[parseInt(r[1])-1])+" ("+this.game.players_info[parseInt(r[1])-1].role+")"))),0;if("draw_player_card"===r[0]){this.updateLog(this.game.deck[1].crypt.length+" cards left in deck.");for(var p=parseInt(r[1])-1,h=parseInt(r[2]),f=0;f<h;f++){if(0==this.game.deck[1].crypt.length)return void this.endGame("No more cards. You have failed to contain the pandemic in time.");var m=h-f-1,g=this.drawPlayerCard(p);if("epidemic1"==g||"epidemic2"==g||"epidemic3"==g||"epidemic4"==g||"epidemic5"==g||"epidemic6"==g)return this.updateLog("EPIDEMIC!"),this.addMove("RESOLVE"),this.addMove("draw_player_card\t"+(p+1)+"\t"+m),this.addMove("epidemic"),this.game.queue.splice(a,1),this.endTurn(),0;console.log("PLAYER: "+p+" ---  need to overwrite now that players is pkeys"),this.game.players_info[p].cards.push(g)}this.game.queue.splice(a,1)}if("epidemic"===r[0]){this.game.state.infection_rate++,this.outbreaks=[];var b=this.drawInfectionCardFromBottomOfDeck(),y=this.game.deck[0].cards[b].virus;this.game.queue.push("ACKNOWLEDGE\tEPIDEMIC CARD! 3 "+y+" in "+b),this.addDiseaseCube(b,y),this.addDiseaseCube(b,y),this.addDiseaseCube(b,y),this.overlay.showOverlay(this.app,this,this.returnEpidemicOverlay(b)),document.quertySelector(".close_epidemic_overlay").onclick=function(t){e.overlay.hideOverlay()};for(var v=[],_=0;_<this.game.state.infection_drawn.length;_++){var w=this.rollDice(this.game.state.infection_drawn.length);v.push(this.app.crypto.stringToHex(this.game.state.infection_drawn[w-1])),this.game.state.infection_drawn.splice(w-1,1)}for(var x=0;x<this.game.deck[0].crypt.length;x++)v.push(this.game.deck[0].crypt[x]);this.game.deck[0].crypt=v,this.game.deck[0].discards=[],this.showBoard(),this.game.queue.splice(a,1)}if("infect"===r[0]){var k=2;if(this.game.state.infection_rate>2&&(k=3),this.game.state.infection_rate>4&&(k=4),this.updateLog("INFECTION STAGE: "+k+" cards to draw"),0==this.game.state.one_quiet_night){for(var S=0;S<k;S++){this.outbreaks=[];var P=this.drawInfectionCard(),E=this.game.deck[0].cards[P].virus,C=1;if("blue"==E&&1==this.game.state.blue_cure){var A=0;for(var M in this.game.cities)A+=this.game.cities[M].virus.blue;0==A&&(C=0)}if("black"==E&&1==this.game.state.black_cure){var T=0;for(var j in this.game.cities)T+=this.game.cities[j].virus.black;0==T&&(C=0)}if("red"==E&&1==this.game.state.red_cure){var O=0;for(var D in this.game.cities)O+=this.game.cities[D].virus.red;0==O&&(C=0)}if("yellow"==E&&1==this.game.state.yellow_cure){var I=0;for(var R in this.game.cities)I+=this.game.cities[R].virus.yellow;0==I&&(C=0)}1==C?(this.updateLog(this.game.cities[P].name+" adds 1 disease cube"),this.game.queue.push("ACKNOWLEDGE\tInfection: 1 "+E+" added to "+this.game.cities[P].name),this.addDiseaseCube(P,E)):this.updateLog("Cure prevents infection in "+this.game.cities[P].name)}this.game.state.one_quiet_night=0}this.showBoard(),this.game.queue.splice(a,1)}if("place_initial_infection"===r[0]){for(var B=3;B>0;B--)for(var q=0;q<3;q++){var L=this.drawInfectionCard(),N=this.game.deck[0].cards[L].virus,F=this.game.deck[0].discards[L].virus;"yellow"==N&&(this.game.cities[L].virus.yellow=B),"blue"==N&&(this.game.cities[L].virus.blue=B),"black"==N&&(this.game.cities[L].virus.black=B),"red"==N&&(this.game.cities[L].virus.red=B),this.updateLog(this.game.cities[L].name+" infected with "+B+" "+N+" -- "+F)}this.game.queue.splice(a,1)}if("initialize_player_deck"===r[0]){var U=4,$=this.game.deck[1].crypt.length,z=Math.floor($/U);null!=this.game.options.difficulty&&("medium"===this.game.options.difficulty&&(U=5),"hard"===this.game.options.difficulty&&(U=6)),this.game.deck[1].cards.epidemic1={img:"Epidemic.jpg"},this.game.deck[1].cards.epidemic2={img:"Epidemic.jpg"},this.game.deck[1].cards.epidemic3={img:"Epidemic.jpg"},this.game.deck[1].cards.epidemic4={img:"Epidemic.jpg"},this.game.deck[1].cards.epidemic5={img:"Epidemic.jpg"},this.game.deck[1].cards.epidemic6={img:"Epidemic.jpg"};for(var H=0,G=0;H<U;H++){var K="epidemic"+(H+1),W=this.rollDice(z);this.game.deck[1].crypt.splice(G+W,0,this.app.crypto.stringToHex(K)),G+=1,G+=z}var V=0;for(var Y in this.game.events)V++,this.game.deck[1].cards[Y]=this.game.events[Y];for(var J=0;J<V;J++){var X="event"+(J+1),Q=this.rollDice(this.game.deck[1].crypt.length-1);this.game.deck[1].crypt.splice(Q,0,this.app.crypto.stringToHex(X))}console.log("\n\n\nCARDS AS INITED: ");for(var Z=0;Z<this.game.deck[1].crypt.length;Z++)console.log(this.app.crypto.hexToString(this.game.deck[1].crypt[Z]));this.game.queue.splice(a,1)}if("curevirus"===r[0]){var ee=parseInt(r[1]),te=r[2];this.game.player!=ee&&("yellow"==te&&(t.game.state.yellow_cure=1),"red"==te&&(t.game.state.red_cure=1),"blue"==te&&(t.game.state.blue_cure=1),"black"==te&&(t.game.state.black_cure=1)),this.game.queue.splice(a,1)}if("onequietnight"===r[0]&&(this.game.state.one_quiet_night=1,this.game.queue.splice(a,1)),"buildresearchstation"===r[0]){var ae=parseInt(r[1]),re=r[2];this.game.player!=ae&&this.buildResearchStation(re),this.game.queue.splice(a,1)}if("notify"===r[0]&&(this.updateLog(r[1]),this.game.queue.splice(a,1)),"takecard"===r[0]){var ne=parseInt(r[1]),ie=parseInt(r[2]),se=r[3];ie!=this.game.player&&t.removeCardFromHand(this.game.player,se),ie==this.game.player&&ie!=ne&&t.game.players_info[ie-1].cards.push(se),this.game.player!==parseInt(r[1])&&(t.game.players_info[parseInt(r[1])-1].city=r[3],t.showBoard()),this.game.queue.splice(a,1)}return"move"===r[0]&&(t.updateLog(t.game.players_info[parseInt(r[1])-1].role+" moves to "+this.game.cities[r[2]].city),t.game.players_info[parseInt(r[1])-1].city=r[2],t.showBoard(),this.game.queue.splice(a,1)),"cure"===r[0]&&(this.game.player!==parseInt(r[1])&&(1==t.game.state.blue_cure&&"blue"==r[4]&&(r[3]=t.game.cities[r[2]].virus.blue),1==t.game.state.red_cure&&"red"==r[4]&&(r[3]=t.game.cities[r[2]].virus.red),1==t.game.state.yellow_cure&&"yellow"==r[4]&&(r[3]=t.game.cities[r[2]].virus.yellow),1==t.game.state.black_cure&&"black"==r[4]&&(r[3]=t.game.cities[r[2]].virus.black),"yellow"===r[4]&&(t.game.cities[r[2]].virus.yellow-=parseInt(r[3]),t.game.state.yellow_active-=parseInt(r[3])),"blue"===r[4]&&(t.game.cities[r[2]].virus.blue-=parseInt(r[3]),t.game.state.blue_active-=parseInt(r[3])),"black"===r[4]&&(t.game.cities[r[2]].virus.black-=parseInt(r[3]),t.game.state.black_active-=parseInt(r[3])),"red"===r[4]&&(t.game.cities[r[2]].virus.red-=parseInt(r[3]),t.game.state.red_active-=parseInt(r[3])),t.game.cities[r[2]].virus.yellow<0&&(t.game.cities[r[2]].virus.yellow=0),t.game.cities[r[2]].virus.red<0&&(t.game.cities[r[2]].virus.red=0),t.game.cities[r[2]].virus.blue<0&&(t.game.cities[r[2]].virus.blue=0),t.game.cities[r[2]].virus.black<0&&(t.game.cities[r[2]].virus.black=0),t.showBoard()),this.game.queue.splice(a,1)),0==n?(console.log("NOT CONTINUING"),0):1}}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"endTurn",value:function(){this.updateStatus("<div class='status-message'>Waiting for information from peers...</div>");var e={};e.target=this.returnNextPlayer(this.game.player),this.game.turn=this.moves,this.sendMessage("game",e),this.moves=[],this.saveGame(this.game.id)}},{key:"endGame",value:function(e){this.game.over=1,alert("GAME OVER: "+e),this.saveGame(this.game.id)}},{key:"drawInfectionCard",value:function(){var e=this.game.deck[0].crypt[0];return e=this.app.crypto.hexToString(e),this.game.state.infection_topcard=e,this.game.state.infection_drawn.push(e),this.game.deck[0].discards[e]=this.game.deck[0].cards[e],this.game.deck[0].crypt.splice(0,1),this.showBoard(),e}},{key:"triggerOutbreak",value:function(e,t){this.game.state.outbreak_rate++,this.updateLog("Outbreak in "+this.game.cities[e].name);for(var a=0;a<this.game.cities[e].neighbours.length;a++)this.outbreaks.includes(this.game.cities[e].neighbours[a])||(this.game.queue.push("ACKNOWLEDGE\tOutbreak! Virus expands beyond "+this.game.cities[e].name),this.addDiseaseCube(this.game.cities[e].neighbours[a],t))}},{key:"addDiseaseCube",value:function(e,t){if("blue"==t){if(this.game.cities[e].virus.blue++,this.game.state.blue_active++,this.game.state.blue_active>24)return void this.endGame("Blue Disease Outbreak Beyond Control");this.game.cities[e].virus.blue>3&&(this.game.cities[e].virus.blue=3,this.outbreaks.push(e),this.triggerOutbreak(e,t))}if("black"==t){if(this.game.cities[e].virus.black++,this.game.state.black_active++,this.game.state.black_active>24)return void this.endGame("Black Disease Outbreak Beyond Control");this.game.cities[e].virus.black>3&&(this.game.cities[e].virus.black=3,this.outbreaks.push(e),this.triggerOutbreak(e,t))}if("red"==t){if(this.game.cities[e].virus.red++,this.game.state.red_active++,this.game.state.red_active>24)return void this.endGame("Red Disease Outbreak Beyond Control");this.game.cities[e].virus.red>3&&(this.game.cities[e].virus.red=3,this.outbreaks.push(e),this.triggerOutbreak(e,t))}if("yellow"==t){if(this.game.cities[e].virus.yellow++,this.game.state.yellow_active++,this.game.state.yellow_active>24)return void this.endGame("Yellow Disease Outbreak Beyond Control");this.game.cities[e].virus.yellow>3&&(this.game.cities[e].virus.yellow=3,this.outbreaks.push(e),this.triggerOutbreak(e,t))}}},{key:"drawInfectionCardFromBottomOfDeck",value:function(){var e=this.game.deck[0].crypt[this.game.deck[0].crypt.length-1];return e=this.app.crypto.hexToString(e),this.game.state.infection_topcard=e,this.game.state.infection_drawn.push(e),this.game.deck[0].discards[e]=this.game.deck[0].cards[e],this.game.deck[0].crypt.splice(this.game.deck[0].crypt.length-1,1),this.showBoard(),e}},{key:"drawPlayerCard",value:function(){var e=this.game.deck[1].crypt[0];return e=this.app.crypto.hexToString(e),this.game.state.player_topcard=e,this.game.deck[1].discards[e]=this.game.deck[1].cards[e],this.game.deck[1].crypt.splice(0,1),this.showBoard(),e}},{key:"returnState",value:function(){var e={outbreak_rate:0,infection_rate:0,one_quiet_night:0,infection_topcard:"",player_topcard:"",infection_drawn:[],research_stations:[]};return e.research_stations[0]="atlanta",e.yellow_cure=0,e.blue_cure=0,e.red_cure=0,e.black_cure=0,e.yellow_active=0,e.blue_active=0,e.red_active=0,e.black_active=0,e}},{key:"returnPlayers",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=[],a=0;a<e;a++){t[a]={},t[a].city="atlanta",t[a].moves=4,t[a].cards=[],t[a].type=1;var r=["generalist","scientist","medic","operationsexpert"],n=r[this.rollDice(4)-1];0==a&&null!=this.game.options.player1&&"random"!=this.game.options.player1&&(n=this.game.options.player1),1==a&&null!=this.game.options.player2&&"random"!=this.game.options.player2&&(n=this.game.options.player2),2==a&&null!=this.game.options.player3&&"random"!=this.game.options.player3&&(n=this.game.options.player3),3==a&&null!=this.game.options.player4&&"random"!=this.game.options.player4&&(n=this.game.options.player4),"generalist"===n&&(t[a].role="Generalist",t[a].pawn="Pawn%20Generalist.png",t[a].card="Role%20-%20Generalist.jpg",t[a].desc="The Generalist may take an extra move every turn, performing 5 actions instead of 4",t[a].moves=5,t[a].type=1),"scientist"===n&&(t[a].role="Scientist",t[a].pawn="Pawn%20Scientist.png",t[a].card="Role%20-%20Scientist.jpg",t[a].desc="The Scientist may research a vaccine with only 4 cards instead of 5",t[a].type=2),"medic"===n&&(t[a].role="Medic",t[a].pawn="Pawn%20Medic.png",t[a].card="Role%20-%20Medic.jpg",t[a].desc="The Medic may remove all disease cubes in a city when they treat disease",t[a].type=3),"operationsexpert"===n&&(t[a].role="Operations Expert",t[a].pawn="Pawn%20Operations%20Expert.png",t[a].card="Role%20-%20Operations%20Expert.jpg",t[a].desc="The Operations Expert may build a research center in their current city as an action",t[a].type=4)}return t}},{key:"returnCities",value:function(){var e={sanfrancisco:{top:560,left:95,neighbours:["tokyo","manila","losangeles","chicago"],name:"San Francisco"},chicago:{top:490,left:340,neighbours:["sanfrancisco","losangeles","mexicocity","atlanta","montreal"],name:"Chicago"},montreal:{top:480,left:530,neighbours:["chicago","newyork","washington"],name:"Montreal"},newyork:{top:505,left:675,neighbours:["montreal","washington","london","madrid"],name:"New York"},washington:{top:625,left:615,neighbours:["montreal","newyork","miami","atlanta"],name:"Washington"},atlanta:{top:630,left:410,neighbours:["chicago","miami","washington"],name:"Atlanta"},losangeles:{top:750,left:135,neighbours:["sydney","sanfrancisco","mexicocity","chicago"],name:"Los Angeles"},mexicocity:{top:815,left:315,neighbours:["chicago","losangeles","miami","bogota","lima"],name:"Mexico City"},miami:{top:790,left:530,neighbours:["washington","atlanta","mexicocity","bogota"],name:"Miami"},bogota:{top:980,left:515,neighbours:["miami","mexicocity","lima","saopaulo","buenosaires"],name:"Bogota"},lima:{top:1180,left:445,neighbours:["santiago","bogota","mexicocity"],name:"Lima"},santiago:{top:1390,left:470,neighbours:["lima"],name:"Santiago"},buenosaires:{top:1355,left:670,neighbours:["saopaulo","bogota"],name:"Buenos Aires"},saopaulo:{top:1210,left:780,neighbours:["bogota","buenosaires","madrid","lagos"],name:"Sao Paulo"},lagos:{top:950,left:1150,neighbours:["saopaulo","khartoum","kinshasa"],name:"Lagos"},khartoum:{top:910,left:1395,neighbours:["cairo","lagos","kinshasa","johannesburg"],name:"Khartoum"},kinshasa:{top:1080,left:1275,neighbours:["lagos","khartoum","johannesburg"],name:"Kinshasa"},johannesburg:{top:1270,left:1385,neighbours:["kinshasa","khartoum"],name:"Johannesburg"},london:{top:390,left:1025,neighbours:["newyork","madrid","essen","paris"],name:"London"},madrid:{top:580,left:1005,neighbours:["newyork","paris","london","algiers","saopaulo"],name:"Madrid"},essen:{top:360,left:1220,neighbours:["stpetersburg","london","milan"],name:"Essen"},paris:{top:485,left:1170,neighbours:["london","essen","madrid","milan","algiers"],name:"Paris"},stpetersburg:{top:320,left:1430,neighbours:["essen","moscow","istanbul"],name:"St. Petersburg"},milan:{top:450,left:1300,neighbours:["essen","istanbul","paris"],name:"Milan"},algiers:{top:685,left:1220,neighbours:["madrid","paris","cairo","istanbul"],name:"Algiers"},cairo:{top:720,left:1360,neighbours:["khartoum","algiers","istanbul","baghdad","riyadh"],name:"Cairo"},istanbul:{top:560,left:1385,neighbours:["stpetersburg","milan","algiers","cairo","baghdad","moscow"],name:"Istanbul"},moscow:{top:450,left:1535,neighbours:["stpetersburg","tehran","istanbul"],name:"Moscow"},baghdad:{top:660,left:1525,neighbours:["cairo","riyadh","karachi","tehran","istanbul"],name:"Baghdad"},riyadh:{top:830,left:1545,neighbours:["cairo","istanbul","karachi"],name:"Riyadh"},tehran:{top:540,left:1665,neighbours:["moscow","karachi","baghdad","delhi"],name:"Tehran"},karachi:{top:720,left:1705,neighbours:["baghdad","tehran","delhi","riyadh","mumbai"],name:"Karachi"},mumbai:{top:865,left:1720,neighbours:["chennai","karachi","delhi"],name:"Mumbai"},delhi:{top:670,left:1845,neighbours:["tehran","karachi","mumbai","chennai","kolkata"],name:"Delhi"},chennai:{top:965,left:1870,neighbours:["mumbai","delhi","kolkata","bangkok","jakarta"],name:"Chennai"},kolkata:{top:715,left:1975,neighbours:["delhi","chennai","bangkok","hongkong"],name:"Kolkata"},bangkok:{top:880,left:2005,neighbours:["kolkata","hongkong","chennai","jakarta","hochiminhcity"],name:"Bangkok"},jakarta:{top:1130,left:2005,neighbours:["chennai","bangkok","hochiminhcity","sydney"],name:"Jakarta"},sydney:{top:1390,left:2420,neighbours:["jakarta","manila","losangeles"],name:"Sydney"},manila:{top:1e3,left:2305,neighbours:["sydney","hongkong","hochiminhcity","sanfrancisco","taipei"],name:"Manila"},hochiminhcity:{top:1010,left:2120,neighbours:["jakarta","bangkok","hongkong","manila"],name:"Ho Chi Minh City"},hongkong:{top:790,left:2115,neighbours:["hochiminhcity","shanghai","bangkok","kolkata","taipei","manila"],name:"Hong Kong"},taipei:{top:765,left:2270,neighbours:["shanghai","hongkong","manila","osaka"],name:"Taipei"},shanghai:{top:630,left:2095,neighbours:["beijing","hongkong","taipei","seoul","tokyo"],name:"Shanghai"},beijing:{top:500,left:2085,neighbours:["shanghai","seoul"],name:"Beijing"},seoul:{top:485,left:2255,neighbours:["beijing","shanghai","tokyo"],name:"Seoul"},tokyo:{top:565,left:2385,neighbours:["seoul","shanghai","sanfrancisco","osaka"],name:"Tokyo"},osaka:{top:710,left:2405,neighbours:["taipei","tokyo"],name:"Osaka"}};for(var t in e)e[t].virus={},e[t].virus.yellow=0,e[t].virus.red=0,e[t].virus.blue=0,e[t].virus.black=0;return e}},{key:"returnEvents",value:function(){var e={event1:{img:"Special%20Event%20-%20Airlift.jpg",name:"Airlift",virus:""},event2:{img:"Special%20Event%20-%20Resilient%20Population.jpg",name:"Resilient Population",virus:""},event3:{img:"Special%20Event%20-%20One%20Quiet%20Night.jpg",name:"One Quiet Night",virus:""},event4:{img:"Special%20Event%20-%20Forecast.jpg",name:"Forecast",virus:""},event5:{img:"Special%20Event%20-%20Government%20Grant.jpg",name:"Government Grant",virus:""}};return e}},{key:"returnInfectionCards",value:function(){var e={sanfrancisco:{img:"Infection%20Blue%20San%20Francisco.jpg",virus:"blue"},chicago:{img:"Infection%20Blue%20Chicago.jpg",virus:"blue"},montreal:{img:"Infection%20Blue%20Toronto.jpg",virus:"blue"},newyork:{img:"Infection%20Blue%20New%20York.jpg",virus:"blue"},washington:{img:"Infection%20Blue%20Washington.jpg",virus:"blue"},atlanta:{img:"Infection%20Blue%20Atlanta.jpg",virus:"blue"},losangeles:{img:"Infection%20Yellow%20Los%20Angeles.jpg",virus:"yellow"},mexicocity:{img:"Infection%20Yellow%20Mexico%20City.jpg",virus:"yellow"},miami:{img:"Infection%20Yellow%20Miami.jpg",virus:"yellow"},bogota:{img:"Infection%20Yellow%20Bogota.jpg",virus:"yellow"},lima:{img:"Infection%20Yellow%20Lima.jpg",virus:"yellow"},santiago:{img:"Infection%20Yellow%20Santiago.jpg",virus:"yellow"},buenosaires:{img:"Infection%20Yellow%20Buenos%20Aires.jpg",virus:"yellow"},saopaulo:{img:"Infection%20Yellow%20Sao%20Paulo.jpg",virus:"yellow"},lagos:{img:"Infection%20Yellow%20Lagos.jpg",virus:"yellow"},khartoum:{img:"Infection%20Yellow%20Khartoum.jpg",virus:"yellow"},kinshasa:{img:"Infection%20Yellow%20Kinsasha.jpg",virus:"yellow"},johannesburg:{img:"Infection%20Yellow%20Johannesburg.jpg",virus:"yellow"},london:{img:"Infection%20Blue%20London.jpg",virus:"blue"},madrid:{img:"Infection%20Blue%20Madrid.jpg",virus:"blue"},essen:{img:"Infection%20Blue%20Essen.jpg",virus:"blue"},paris:{img:"Infection%20Blue%20Paris.jpg",virus:"blue"},stpetersburg:{img:"Infection%20Blue%20St.%20Petersburg.jpg",virus:"blue"},milan:{img:"Infection%20Blue%20Milan.jpg",virus:"blue"},algiers:{img:"Infection%20Black%20Algiers.jpg",virus:"black"},cairo:{img:"Infection%20Black%20Cairo.jpg",virus:"black"},istanbul:{img:"Infection%20Black%20Istanbul.jpg",virus:"black"},moscow:{img:"Infection%20Black%20Moscow.jpg",virus:"black"},baghdad:{img:"Infection%20Black%20Baghdad.jpg",virus:"black"},riyadh:{img:"Infection%20Black%20Riyadh.jpg",virus:"black"},tehran:{img:"Infection%20Black%20Tehran.jpg",virus:"black"},karachi:{img:"Infection%20Black%20Karachi.jpg",virus:"black"},mumbai:{img:"Infection%20Black%20Mumbai.jpg",virus:"black"},delhi:{img:"Infection%20Black%20Delhi.jpg",virus:"black"},chennai:{img:"Infection%20Black%20Chennai.jpg",virus:"black"},kolkata:{img:"Infection%20Black%20Kolkata.jpg",virus:"black"},bangkok:{img:"Infection%20Red%20Bangkok.jpg",virus:"red"},jakarta:{img:"Infection%20Red%20Jakarta.jpg",virus:"red"},sydney:{img:"Infection%20Red%20Sydney.jpg",virus:"red"},manila:{img:"Infection%20Red%20Manila.jpg",virus:"red"},hochiminhcity:{img:"Infection%20Red%20Ho%20Chi%20Minh%20City.jpg",virus:"red"},hongkong:{img:"Infection%20Red%20Hong%20Kong.jpg",virus:"red"},taipei:{img:"Infection%20Red%20Taipei.jpg",virus:"red"},shanghai:{img:"Infection%20Red%20Shanghai.jpg",virus:"red"},beijing:{img:"Infection%20Red%20Beijing.jpg",virus:"red"},seoul:{img:"Infection%20Red%20Seoul.jpg",virus:"red"},tokyo:{img:"Infection%20Red%20Tokyo.jpg",virus:"red"},osaka:{img:"Infection%20Red%20Osaka.jpg",virus:"red"}};return e}},{key:"returnRoleCards",value:function(){var e={osaka:{img:"card_osaka.jpg"}};return e}},{key:"returnPlayerCards",value:function(){var e={sanfrancisco:{img:"Card%20Blue%20San%20Francisco.jpg",name:"San Francisco",virus:"blue"},chicago:{img:"Card%20Blue%20Chicago.jpg",name:"Chicago",virus:"blue"},montreal:{img:"Card%20Blue%20Toronto.jpg",name:"Montreal",virus:"blue"},newyork:{img:"Card%20Blue%20New%20York.jpg",name:"New York",virus:"blue"},washington:{img:"Card%20Blue%20Washington.jpg",name:"Washington",virus:"blue"},atlanta:{img:"Card%20Blue%20Atlanta.jpg",name:"Atlanta",virus:"blue"},london:{img:"Card%20Blue%20London.jpg",name:"London",virus:"blue"},madrid:{img:"Card%20Blue%20Madrid.jpg",name:"Madrid",virus:"blue"},essen:{img:"Card%20Blue%20Essen.jpg",name:"Essen",virus:"blue"},paris:{img:"Card%20Blue%20Paris.jpg",name:"Paris",virus:"blue"},stpetersburg:{img:"Card%20Blue%20St.%20Petersburg.jpg",name:"St. Petersburg",virus:"blue"},milan:{img:"Card%20Blue%20Milan.jpg",name:"Milan",virus:"blue"},losangeles:{img:"Card%20Yellow%20Los%20Angeles.jpg",name:"Los Angeles",virus:"yellow"},mexicocity:{img:"Card%20Yellow%20Mexico%20City.jpg",name:"Mexico City",virus:"yellow"},miami:{img:"Card%20Yellow%20Miami.jpg",name:"Miami",virus:"yellow"},bogota:{img:"Card%20Yellow%20Bogota.jpg",name:"Bogota",virus:"yellow"},lima:{img:"Card%20Yellow%20Lima.jpg",name:"Lima",virus:"yellow"},santiago:{img:"Card%20Yellow%20Santiago.jpg",name:"Santiago",virus:"yellow"},buenosaires:{img:"Card%20Yellow%20Buenos%20Aires.jpg",name:"Buenos Aires",virus:"yellow"},saopaulo:{img:"Card%20Yellow%20Sao%20Paulo.jpg",name:"Sao Paulo",virus:"yellow"},lagos:{img:"Card%20Yellow%20Lagos.jpg",name:"Lagos",virus:"yellow"},khartoum:{img:"Card%20Yellow%20Khartoum.jpg",name:"Khartoum",virus:"yellow"},kinshasa:{img:"Card%20Yellow%20Kinsasha.jpg",name:"Kinshasa",virus:"yellow"},johannesburg:{img:"Card%20Yellow%20Johannesburg.jpg",name:"Johannesburg",virus:"yellow"},algiers:{img:"Card%20Black%20Algiers.JPG",name:"Algiers",virus:"black"},cairo:{img:"Card%20Black%20Cairo.jpg",name:"Cairo",virus:"black"},istanbul:{img:"Card%20Black%20Istanbul.jpg",name:"Istanbul",virus:"black"},moscow:{img:"Card%20Black%20Moscow.jpg",name:"Moscow",virus:"black"},baghdad:{img:"Card%20Black%20Baghdad.jpg",name:"Baghdad",virus:"black"},riyadh:{img:"Card%20Black%20Riyadh.jpg",name:"Riyadh",virus:"black"},tehran:{img:"Card%20Black%20Tehran.jpg",name:"Tehran",virus:"black"},karachi:{img:"Card%20Black%20Karachi.jpg",name:"Karachi",virus:"black"},mumbai:{img:"Card%20Black%20Mumbai.jpg",name:"Mumbai",virus:"black"},delhi:{img:"Card%20Black%20Delhi.jpg",name:"New Delhi",virus:"black"},chennai:{img:"Card%20Black%20Chennai.jpg",name:"Chennai",virus:"black"},kolkata:{img:"Card%20Black%20Kolkata.jpg",name:"Kolkata",virus:"black"},bangkok:{img:"Card%20Red%20Bangkok.jpg",name:"Bangkok",virus:"red"},jakarta:{img:"Card%20Red%20Jakarta.jpg",name:"Jakarta",virus:"red"},sydney:{img:"Card%20Red%20Sydney.jpg",name:"Sydney",virus:"red"},manila:{img:"Card%20Red%20Manila.jpg",name:"Manila",virus:"red"},hochiminhcity:{img:"Card%20Red%20Ho%20Chi%20Minh%20City.jpg",name:"Ho Chi Minh City",virus:"red"},hongkong:{img:"Card%20Red%20Hong%20Kong.jpg",name:"Hong Kong",virus:"red"},taipei:{img:"Card%20Red%20Taipei.jpg",name:"Taipei",virus:"red"},shanghai:{img:"Card%20Red%20Shanghai.jpg",name:"Shanghai",virus:"red"},beijing:{img:"Card%20Red%20Beijing.jpg",name:"Beijing",virus:"red"},seoul:{img:"Card%20Red%20Seoul.jpg",name:"Seoul",virus:"red"},tokyo:{img:"Card%20Red%20Tokyo.jpg",name:"Tokyo",virus:"red"},osaka:{img:"Card%20Red%20Osaka.jpg",name:"Osaka",virus:"red"}};return e}},{key:"displayOutbreaks",value:function(){var e=982,t=90;0==this.game.state.infection_rate&&(e=982,t=90),1==this.game.state.infection_rate&&(e=1067,t=188),2==this.game.state.infection_rate&&(e=1142,t=90),3==this.game.state.infection_rate&&(e=1224,t=188),4==this.game.state.infection_rate&&(e=1302,t=90),5==this.game.state.infection_rate&&(e=1380,t=188),6==this.game.state.infection_rate&&(e=1452,t=90),7==this.game.state.infection_rate&&(e=1530,t=188),8==this.game.state.infection_rate&&(e=1606,t=90),$(".marker_outbreak").css("top",this.scale(e)+"px"),$(".marker_outbreak").css("left",this.scale(t)+"px")}},{key:"displayDecks",value:function(){if(""!=this.game.state.infection_topcard){var e='url("/pandemic/img/'+this.game.deck[0].cards[this.game.state.infection_topcard].img+'")';$(".infection_discard_pile").css("background-image",e)}if(""!=this.game.state.player_topcard){var t='url("/pandemic/img/'+this.game.deck[1].cards[this.game.state.player_topcard].img+'")';$(".player_discard_pile").css("background-image",t)}}},{key:"displayDisease",value:function(){for(var e in this.game.cities){var t="#"+e,a="",r=this.game.cities[e].virus.yellow;if(r>0){var n=50,i=50;r>1&&(n=0,i=100/r-10);for(var s=0;s<r;s++)a+='<img class="cube" src="/pandemic/img/cube_yellow.png" style="position:absolute;top:-'+this.scale(20)+"px;left:"+this.scale(n)+'px;" />',n+=i}if((r=this.game.cities[e].virus.red)>0){var o=50,c=50;r>1&&(o=0,c=100/r-10);for(var l=0;l<r;l++)a+='<img class="cube" src="/pandemic/img/cube_red.png" style="position:absolute;top:'+this.scale(o)+"px;left:"+this.scale(80)+'px;" />',o+=c}if((r=this.game.cities[e].virus.blue)>0){var u=50,d=50;r>1&&(u=0,d=100/r-10);for(var p=0;p<r;p++)a+='<img class="cube" src="/pandemic/img/cube_blue.png" style="position:absolute;top:'+this.scale(80)+"px;left:"+this.scale(u)+'px;" />',u+=d}if((r=this.game.cities[e].virus.black)>0){var h=50,f=50;r>1&&(h=0,f=100/r-10);for(var m=0;m<r;m++)a+='<img class="cube" src="/pandemic/img/cube_black.png" style="position:absolute;top:'+this.scale(h)+"px;left:-"+this.scale(20)+'px;" />',h+=f}$(t).html(a)}}},{key:"displayVials",value:function(){$(".vial_yellow").css("top",this.scale(1703)+"px"),$(".vial_yellow").css("left",this.scale(816)+"px"),$(".vial_red").css("top",this.scale(1703)+"px"),$(".vial_red").css("left",this.scale(936)+"px"),$(".vial_blue").css("top",this.scale(1703)+"px"),$(".vial_blue").css("left",this.scale(1068)+"px"),$(".vial_black").css("top",this.scale(1703)+"px"),$(".vial_black").css("left",this.scale(1182)+"px"),1==this.game.state.yellow_cure&&$(".vial_yellow").css("background-image",'url("/pandemic/img/Vial%20Yellow%20Eradicated.png")'),1==this.game.state.blue_cure&&$(".vial_blue").css("background-image",'url("/pandemic/img/Vial%20Blue%20Eradicated.png")'),1==this.game.state.black_cure&&$(".vial_black").css("background-image",'url("/pandemic/img/Vial%20Black%20Eradicated.png")'),1==this.game.state.red_cure&&$(".vial_red").css("background-image",'url("/pandemic/img/Vial%20Red%20Eradicated.png")')}},{key:"displayPlayers",value:function(){for(var e=0;e<this.game.players_info.length;e++){var t='url("/pandemic/img/'+this.game.players_info[e].pawn+'")',a=".player"+(e+1),r=this.game.players_info[e].city,n=this.game.cities[r].top,i=this.game.cities[r].left+30*e;$(a).css("top",this.scale(n)+"px"),$(a).css("left",this.scale(i)+"px"),$(a).css("background-image",t)}for(var s=this.game.players_info.length;s<6;s++)$(".player"+(s+1)).css("display","none")}},{key:"displayResearchStations",value:function(){for(var e=0;e<this.game.state.research_stations.length;e++){var t=".research_station"+(e+1),a=this.game.state.research_stations[e],r=this.game.cities[a].top+25,n=this.game.cities[a].left+25;$(t).css("top",this.scale(r)+"px"),$(t).css("left",this.scale(n)+"px"),$(t).css("display","block")}}},{key:"displayInfectionRate",value:function(){var e=350,t=1650;1==this.game.state.infection_rate&&(e=350,t=1745),2==this.game.state.infection_rate&&(e=350,t=1840),3==this.game.state.infection_rate&&(e=350,t=1935),4==this.game.state.infection_rate&&(e=350,t=2030),5==this.game.state.infection_rate&&(e=350,t=2125),6==this.game.state.infection_rate&&(e=350,t=2220),7==this.game.state.infection_rate&&(e=350,t=2315),$(".marker_infection_rate").css("top",this.scale(e)+"px"),$(".marker_infection_rate").css("left",this.scale(t)+"px")}},{key:"showBoard",value:function(){0!=this.browser_active&&($(".back_player_card").css("top",this.scale(1390)+"px"),$(".back_player_card").css("left",this.scale(1595)+"px"),$(".back_infection_card").css("top",this.scale(65)+"px"),$(".back_infection_card").css("left",this.scale(1590)+"px"),$(".player_discard_pile").css("top",this.scale(1390)+"px"),$(".player_discard_pile").css("left",this.scale(1960)+"px"),$(".infection_discard_pile").css("top",this.scale(65)+"px"),$(".infection_discard_pile").css("left",this.scale(2040)+"px"),this.displayInfectionRate(),this.displayOutbreaks(),this.displayDisease(),this.displayPlayers(),this.displayResearchStations(),this.displayDecks(),this.displayVials())}},{key:"returnCardList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"city",a=this.game.players_info[this.game.player-1].cards,r="";if(0==e.length)for(var n=0;n<a.length;n++)e.push(this.game.cities[a[n]].name);if(1==this.interface){for(i=0;i<e.length;i++)r+=this.returnCardItem(e[i],t);r='\n        <div class="status-cardbox">\n          '.concat(r,"\n        </div>")}else{for(r="<ul>",i=0;i<e.length;i++)r+=this.returnCardItem(e[i],t);r+="</ul>"}return r}},{key:"returnCardItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"city";return 1==this.interface?(this.game.cities[e],'<div id="'.concat(e.replace(/ /g,""),'" class="card cardbox-hud-image showcard cardbox-hud cardbox-hud-status">').concat(this.returnCardImage(e,t),"</div>")):(this.game.cities[e],'<li class="card" id="'+e+'">'+this.game.cities[e].name+"</li>")}},{key:"updateStatusAndListCards",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null==t&&(t=this.game.players_info[this.game.player-1].cards),html='\n      <div class="status-message">\n        '.concat(e,"\n      </div>\n      ").concat(this.returnCardList(t,"city"),"\n    "),this.updateStatus(html),this.addShowCardEvents()}},{key:"addShowCardEvents",value:function(){if(0!=this.browser_active){var e=this;this.hud.attachCardEvents(this.app,this),this.app.browser.isMobileBrowser(navigator.userAgent)||($(".showcard").off(),$(".showcard").mouseover((function(){var t=$(this).attr("id");e.showCard(t)})).mouseout((function(){var t=$(this).attr("id");e.hideCard(t)})))}}},{key:"addLogCardEvents",value:function(){if(0!=this.browser_active){var e=this;this.app.browser.isMobileBrowser(navigator.userAgent)||($(".logcard").off(),$(".logcard").mouseover((function(){var t=$(this).attr("id");e.showCard(t)})).mouseout((function(){var t=$(this).attr("id");e.hideCard(t)})))}}},{key:"returnCardImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"city",a="";if("city"==t&&(a=this.game.deck[1].cards[e]),"infection"==t&&(a=this.game.deck[0].cards[e]),null==a||null==a||""===a)return null;var r='<img class="cardimg" src="/pandemic/img/'.concat(a.img,'" />');return r}},{key:"hideCard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.cardbox.hideCardbox(e)}},{key:"showCard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"city",a=this.returnCardImage(e,t);a&&this.cardbox.showCardboxHTML(e,a)}},{key:"removeCardFromHand",value:function(e,t){for(var a=this.game.players_info[e-1].cards,r=0;r<a.length;r++)if(a[r]==t)return a.splice(r,1),void this.hideCard()}},{key:"returnGameOptionsHTML",value:function(){var e=this.maxPlayers;try{e=document.querySelector(".game-wizard-players-select").value}catch(e){}for(var t='\n\n      <div style="padding:40px;width:100vw;height:100vh;overflow-y:scroll;display:grid;grid-template-columns: 200px auto">\n\n        <div style="top:0;left:0;margin-right: 20px;">\n\n          <label for="difficulty">Difficulty:</label>\n          <select name="difficulty">\n            <option value="easy">easy</option>\n            <option value="medium" selected default>not so easy</option>\n            <option value="hard">damn hard</option>\n          </select>\n\n          <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n\n        </div>\n        <div>\n\n    ',a=1;a<=e;a++)t+='\n            <label for="player'.concat(a,'" class="game-players-options game-players-options-').concat(a,'p">Player ').concat(a,':</label>\n            <select name="player').concat(a,'" id="game-players-select-').concat(a,'p" class="game-players-options game-players-options-').concat(a,'p">\n              <option value="random" default>random</option>\n              <option value="generalist" default>generalist</option>\n              <option value="scientist">scientist</option>\n              <option value="medic">medic</option>\n              <option value="operationsexpert">operations expert</option>\n            </select>\n       ');return t+="\n        </div>\n      </div>\n    "}},{key:"returnQuickLinkGameOptions",value:function(e){var t={},a="",r="";for(var n in e)"player1"==n&&(a=e[n]),"player2"==n&&(r=e[n]);for(var n in e)t[n]=e[n];return t.player1=r,t.player2=a,t}},{key:"returnEpidemicOverlay",value:function(e){return'\n      <div class="epidemic_overlay">\n        Epidemic in '.concat(this.game.cities[e].name,'!!!\n\n        <p></p>\n\n        <div class="button" class="close_epidemic_overlay" id="close_epidemic_overlay">close</div>\n      </div>\n    ')}},{key:"returnWelcomeOverlay",value:function(){for(var e='\n\n<div class="welcome_overlay">\n\n    ',t=0;t<this.game.players_info.length;t++){for(var a=this.game.players_info[t],r="",n=a.cards,i=0;i<n.length;i++)i>0&&(r+=", "),r+=this.game.deck[1].cards[n[i]].name;e+='\n        <div class="player_info_box">\n\t    <div class="player_role_card">\n\t      <img src="/pandemic/img/'.concat(a.card,'" />\n\t    </div>\n\t    <div class="player_role_description">\n\t      <table>\n\t\t<tr>\n\t\t  <td class="player_role_description_header">Player: </td>\n\t\t  <td>').concat(this.app.keys.returnUsername(this.game.players[t]),'</td>\n\t        </td>\n\t\t<tr>\n\t\t  <td class="player_role_description_header">Role: </td>\n\t\t  <td>').concat(a.role,'</td>\n\t        </td>\n\t\t<tr>\n\t\t  <td class="player_role_description_header">Description: </td>\n\t\t  <td>Medics can remove all cubes from a city when treating disease</td>\n\t        </tr>\n\t\t<tr>\n\t\t  <td class="player_role_description_header">Cards: </td>\n\t\t  <td>')+r+"</td>\n\t        </tr>\n\t      </table>\n\t    </div>\n        </div>\n      "}return e+='\n        <display style="width:100%"><div style="display:inline-block;margin-left:auto;margin-right:auto" class="button close_welcome_overlay" id="close_welcome_overlay">close</div></div>\n      </div>\n    '}}])&&n(t.prototype,a),r&&n(t,r),h}(a(47));e.exports=p},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,a){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=u(e);if(t){var n=u(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=a(47),p=(a(5),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,a,r,d=o(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=d.call(this,e)).app=e,t.name="Poker",t.description="BETA version of Texas Hold'em Poker for the Saito Arcade. With five cards on the table and two in your hand, can you bet and bluff your way to victory? This game is a playable demo under active development!",t.categories="Games Arcade Entertainment",t.type="Classic Cardgame",t.card_img_dir="/poker/img/cards",t.useHUD=0,t.minPlayers=2,t.maxPlayers=6,t.interface=1,t.boardgameWidth=5100,t.settlement=[],t.updateHTML="",c(t,l(t))}return t=p,(a=[{key:"respondTo",value:function(e){if(null!=i(u(p.prototype),"respondTo",this).call(this,e))return i(u(p.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/poker/img/arcade/arcade-banner-background.png",title:"Poker"};return t}return"arcade-create-game"==e?{slug:this.slug,title:this.name,description:this.description,publisher_message:this.publisher_message,returnGameOptionsHTML:this.returnGameOptionsHTML.bind(this),minPlayers:this.minPlayers,maxPlayers:this.maxPlayers}:null}},{key:"initializeQueue",value:function(){this.game.queue=[],this.game.queue.push("round"),this.game.queue.push("READY"),2==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),3==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),4==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),5==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t5\t2"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t5"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t5"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),6==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t6\t2"),this.game.queue.push("DEAL\t1\t5\t2"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t6"),this.game.queue.push("DECKENCRYPT\t1\t5"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t6"),this.game.queue.push("DECKXOR\t1\t5"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),7==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t7\t2"),this.game.queue.push("DEAL\t1\t6\t2"),this.game.queue.push("DEAL\t1\t5\t2"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t7"),this.game.queue.push("DECKENCRYPT\t1\t6"),this.game.queue.push("DECKENCRYPT\t1\t5"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t7"),this.game.queue.push("DECKXOR\t1\t6"),this.game.queue.push("DECKXOR\t1\t5"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),8==this.game.players.length&&(this.game.queue.push("POOL\t1"),this.game.queue.push("DEAL\t1\t8\t2"),this.game.queue.push("DEAL\t1\t7\t2"),this.game.queue.push("DEAL\t1\t6\t2"),this.game.queue.push("DEAL\t1\t5\t2"),this.game.queue.push("DEAL\t1\t4\t2"),this.game.queue.push("DEAL\t1\t3\t2"),this.game.queue.push("DEAL\t1\t2\t2"),this.game.queue.push("DEAL\t1\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t8"),this.game.queue.push("DECKENCRYPT\t1\t7"),this.game.queue.push("DECKENCRYPT\t1\t6"),this.game.queue.push("DECKENCRYPT\t1\t5"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t8"),this.game.queue.push("DECKXOR\t1\t7"),this.game.queue.push("DECKXOR\t1\t6"),this.game.queue.push("DECKXOR\t1\t5"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnDeck()))}},{key:"initializeHTML",value:function(e){var t=this;i(u(p.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(a){a.respondTo("chat-manager").render(e,t),a.respondTo("chat-manager").attachEvents(e,t)})),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"Log",id:"game-log",class:"game-log",callback:function(e,t){t.menu.hideSubMenus(),t.log.toggleLog()}}),this.menu.addSubMenuOption("game-game",{text:"Stats",id:"game-stats",class:"game-stats",callback:function(e,t){t.menu.hideSubMenus(),t.handleStatsMenu()}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}}),this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}});for(var a=0,r=0,n=0;n<this.app.modules.mods.length;n++)if("chat"===this.app.modules.mods[n].slug)for(var s=0;s<this.game.players.length;s++)this.game.players[s]!=this.app.wallet.returnPublicKey()&&function(){0==a&&(t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),a=1),0==r&&(t.menu.addSubMenuOption("game-chat",{text:"Community",id:"game-chat-community",class:"game-chat-community",callback:function(e,t){t.menu.hideSubMenus(),c.mute_community_chat=0,c.sendEvent("chat-render-request",{}),c.openChatBox()}}),r=1);var e=[t.game.players[s],t.app.wallet.returnPublicKey()].sort(),i=t.app.crypto.hash(e.join("_")),o="Player "+(s+1),c=t.app.modules.mods[n];t.menu.addSubMenuOption("game-chat",{text:o,id:"game-chat-"+(s+1),class:"game-chat-"+(s+1),callback:function(t,a){a.menu.hideSubMenus(),c.createChatGroup(e,o),c.openChatBox(i),c.sendEvent("chat-render-request",{}),c.saveChat()}})}();this.menu.render(e,this),this.menu.attachEvents(e,this),this.log.render(e,this),this.log.attachEvents(e,this)}},{key:"initializeGame",value:function(e){""!=this.game.status&&this.updateStatus(this.game.status),""==this.game.dice&&this.initializeDice(),0==this.game.deck.length&&(this.game.state=this.returnState(this.game.players.length),this.updateStatus("Generating the Game"),this.game.state.required_pot=this.game.state.big_blind,this.initializeQueue()),this.browser_active&&this.displayBoard()}},{key:"startNextRound",value:function(){this.game.state.turn=0,this.game.state.round++,console.log("Round: "+this.game.state.round),this.game.state.big_blind_player--,this.game.state.small_blind_player--,this.game.state.button_player--,this.game.state.big_blind_player<1&&(this.game.state.big_blind_player=this.game.players.length),this.game.state.small_blind_player<1&&(this.game.state.small_blind_player=this.game.players.length),this.game.state.button_player<1&&(this.game.state.button_player=this.game.players.length),this.game.state.tournament_blinds_level_up>0&&(this.game.state.tournament_blinds_per_level--,this.game.state.tournament_blinds_per_level<0&&(this.updateLog("Blinds increased to: "+game.state.big_blind+"/"+game.state.small_blind),this.game.state.tournament_blinds_per_level=this.game.state.tournament_blinds_per_level_max)),this.game.state.flipped=0,this.game.state.plays_since_last_raise=-1,this.game.state.started=0,this.game.state.pot=0,this.game.state.big_blind_paid=0,this.game.state.small_blind_paid=0,this.game.state.required_pot=0,this.game.state.last_raise=this.game.state.big_blind,this.game.state.required_pot=this.game.state.big_blind;for(var e=0;e<this.game.players.length;e++)this.game.state.passed[e]=0,this.game.state.player_pot[e]=0;if(this.game.state.player_credit.length>2)for(var t=0;t<this.game.state.player_credit.length;t++)this.game.state.player_credit[t]<=0&&(this.game.state.passed[t]=1,this.game.state.player_credit[t]=0,this.game.player==t+1&&this.updateLog("You have been removed from the game."),this.game.state.player_names.splice(t,1),this.game.state.player_pot.splice(t,1),this.game.state.player_credit.splice(t,1),this.game.state.passed.splice(t,1),this.removePlayer(this.game.players[t]),this.game.state.big_blind_player>this.game.players.length&&(this.game.state.big_blind_player=1,this.game.state.small_blind_player=2),this.game.state.small_blind_player>this.game.players.length&&(this.game.state.small_blind_player=1),this.game.queue=[],t--);for(var a=0;a<this.game.players.length;a++)this.game.players[a]===this.app.wallet.returnPublicKey()&&(this.game.player=a+1);this.updateLog("Table "+this.game.id.substring(0,10)+", Seat #"+this.game.state.button_player+" is the button\n\n");for(var r=0;r<this.game.players.length;r++)this.updateLog("Seat "+(r+1)+": "+this.game.state.player_names[r]+" ("+this.game.state.player_credit+")");if(this.updateLog("Round: "+this.game.state.round),document.querySelectorAll(".plog").forEach((function(e){e.innerHTML=""})),this.initializeQueue(),""!=this.game.crypto)for(var n=0;n<this.settlement.length;n++)this.game.queue.push(this.settlement[n]);this.settlement=[],this.displayBoard()}},{key:"handleGameLoop",value:function(){var e=this;if(this.game.queue.length>0){var t=this.game.queue.length-1,a=this.game.queue[t].split("\t"),r=1;if(console.log("QUEUE: "+JSON.stringify(this.game.queue)),"notify"==a[0]&&(this.updateLog(a[1]),this.game.queue.splice(t,1)),"winner"===a[0])return this.updateStatus("Game Over: "+this.game.state.player_names[a[1]-1]+" wins!"),this.updateLog("Game Over: "+this.game.state.player_names[a[1]-1]+" wins!"),this.showSplash("<h1>Game Over: "+this.game.state.player_names[a[1]-1]+" wins!</h1>"+this.updateHTML),this.game.winner=this.game.players[a[1]-1],this.resignGame(this.game.id),0;if("resolve"===a[0])return this.game.queue.splice(t-1,2),1;if("turn"===a[0]){var n=parseInt(a[1]);this.displayBoard();for(var i=0,s=0;s<this.game.state.player_credit.length;s++)(this.game.state.player_credit[s]>0||0==this.game.state.passed[s]&&this.game.state.turn>2)&&i++;if(1==i&&1==this.game.state.turn){for(var o=0;o<this.game.state.player_credit.length;o++)if(this.game.state.player_credit[o]>0&&o==this.game.player-1)return this.addMove("winner\t"+this.game.player),this.endTurn(),0;return this.updateStatus("Game Over"),0}for(var c=0,l=0,u=0;u<this.game.state.passed.length;u++)0==this.game.state.passed[u]&&c++;if(1==c){for(var d=0;d<this.game.state.passed.length;d++)0==this.game.state.passed[d]&&(this.game.state.pot,this.game.state.player_pot,this.updateLog(this.game.state.player_names[d]+" wins "+this.game.state.pot),this.game.state.player_credit[d]+=this.game.state.pot,l=d);if(""!=this.game.crypto)for(var p=0;p<this.game.players.length;p++)this.game.state.player_pot[p]>0&&(this.game.player-1==l?p!=l&&this.settlement.push("RECEIVE\t"+this.game.players[p]+"\t"+this.game.players[l]+"\t"+this.game.state.player_pot[p]+"\t"+(new Date).getTime()+"\t"+this.game.crypto):p!=l&&(this.settlement.push("RECEIVE\t"+this.game.players[p]+"\t"+this.game.players[l]+"\t"+this.game.state.player_pot[p]+"\t"+(new Date).getTime()+"\t"+this.game.crypto),this.settlement.push("SEND\t"+this.game.players[p]+"\t"+this.game.players[l]+"\t"+this.game.state.player_pot[p]+"\t"+(new Date).getTime()+"\t"+this.game.crypto)));return this.startNextRound(),1}if(this.game.state.plays_since_last_raise>=this.game.players.length){if(5==this.game.state.flipped){this.game.state.player_cards={},this.game.state.player_cards_reported=0,this.game.state.player_cards_required=0;for(var h=-1,f=0;f<this.game.state.passed.length;f++)0==this.game.state.passed[f]&&(-1==h&&(h=f),this.game.state.player_cards_required++,this.game.state.player_cards[f]=[]);return h==this.game.player-1&&(this.addMove("reveal\t"+this.game.player+"\t"+this.game.deck[0].hand[0]+"\t"+this.game.deck[0].hand[1]),this.endTurn()),0}var m=1;0==this.game.state.flipped&&(m=3),this.game.state.flipped+=m,this.game.queue.push("announce");for(var g=0;g<m;g++){for(var b=this.game.players.length-1;b>=0;b--)this.game.queue.push("FLIPCARD\t1\t1\t1\t"+(b+1));this.game.queue.push("FLIPRESET\t1")}return 0==this.game.player&&this.game.queue.push("OBSERVER_CHECKPOINT"),this.game.state.plays_since_last_raise=0,1}return this.game.state.plays_since_last_raise++,0==this.game.state.plays_since_last_raise&&this.game.state.plays_since_last_raise++,this.game.state.turn++,1==this.game.state.passed[n-1]?(this.game.queue.splice(t,1),1):parseInt(a[1])==this.game.player?(this.playerTurn(),0):(this.updateStatus("Waiting for "+this.game.state.player_names[a[1]-1]),this.updatePlayerLog(parseInt(a[1]),"player turn"),0)}if("announce"===a[0])return this.game.queue.splice(t,1),0===this.game.state.flipped&&this.updateLog("*** HOLE CARDS *** ["+this.cardToHuman(this.game.deck[0].hand[0])+" "+this.cardToHuman(this.game.deck[0].hand[1])+"]"),3===this.game.state.flipped&&this.updateLog("*** FLOP *** ["+this.cardToHuman(this.game.pool[0].hand[0])+" "+this.cardToHuman(this.game.pool[0].hand[1])+" "+this.cardToHuman(this.game.pool[0].hand[2])+"]"),4===this.game.state.flipped&&this.updateLog("*** TURN *** ["+this.cardToHuman(this.game.pool[0].hand[0])+" "+this.cardToHuman(this.game.pool[0].hand[1])+" "+this.cardToHuman(this.game.pool[0].hand[2])+"] ["+this.cardToHuman(this.game.pool[0].hand[3])+"]"),5===this.game.state.flipped&&this.updateLog("*** TURN *** ["+this.cardToHuman(this.game.pool[0].hand[0])+" "+this.cardToHuman(this.game.pool[0].hand[1])+" "+this.cardToHuman(this.game.pool[0].hand[2])+"] ["+this.cardToHuman(this.game.pool[0].hand[3])+"] ["+this.cardToHuman(this.game.pool[0].hand[4])+"]"),1;if("reveal"===a[0]){var y=this,v=parseInt(a[1]),_=a[2],w=a[3];this.game.state.player_cards[v-1].push(this.returnCardFromDeck(_)),this.game.state.player_cards[v-1].push(this.returnCardFromDeck(w)),this.game.state.player_cards[v-1].push(this.returnCardFromDeck(this.game.pool[0].hand[0])),this.game.state.player_cards[v-1].push(this.returnCardFromDeck(this.game.pool[0].hand[1])),this.game.state.player_cards[v-1].push(this.returnCardFromDeck(this.game.pool[0].hand[2])),this.game.state.player_cards[v-1].push(this.returnCardFromDeck(this.game.pool[0].hand[3])),this.game.state.player_cards[v-1].push(this.returnCardFromDeck(this.game.pool[0].hand[4]));var x=[];this.game.state.player_cards_reported++;for(var k=-1,S=v;S<this.game.state.passed.length;S++)0==this.game.state.passed[S]&&-1==k&&(k=S);if(this.game.state.player_cards_reported==this.game.state.player_cards_required){var P=null,E="",C=[];for(var A in this.game.state.player_cards)if(P=this.game.state.player_cards[A],0==C.length)C.splice(0,0,{player:parseInt(A)+1,player_hand:this.scoreHand(P)});else{for(var M=C.length,T=0,j=0;j<M;j++)y.pickWinner(C[j].player_hand,y.scoreHand(P))>1&&(T=j+1);C.splice(T,0,{player:parseInt(A)+1,player_hand:y.scoreHand(P)})}x.push(C[C.length-1].player-1);for(var O=C.length-1;O>0;O--)3==y.pickWinner(C[C.length-1].player_hand,C[O-1].player_hand)&&x.push(C[O-1].player-1);var D="";if(1==x.length?D+="<h2>"+this.game.state.player_names[x[0]]+" takes the pot!</h2>":(x.forEach((function(t){D+=e.game.state.player_names[t]+", "})),D="<h2>"+D.replace(/,([^,])$/,"").replace(/,([^,]*)$/," and$1")+" split the pot!</h2>"),C.forEach((function(t){y.updateLog(y.game.state.player_names[t.player-1]+": "+t.player_hand.hand_description+" <br />&nbsp;&nbsp;"+y.toHuman(t.player_hand.cards_to_score)),E=e.toHTMLHAND(t.player_hand.cards_to_score)+E,E="<h3>"+y.game.state.player_names[t.player-1]+": "+t.player_hand.hand_description+"</h3>"+E})),E=D+E,this.updateLog(D),this.showSplash(E),this.updateHTML=E,x.length>1){for(var I=Math.floor(this.game.state.pot/x.length),R=0;R<x.length;R++)this.updateLog(this.game.state.player_names[x[R]]+" splits pot and wins "+I),this.game.state.player_credit[x[R]]+=I;this.game.state.player_pot[this.game.player-1],x.length;for(var B=0;B<x.length;B++)if(""!=this.game.crypto)for(var q=0;q<this.game.players;q++)!x.includes(q)&&this.game.state.player_pot[q]>0&&(this.settlement.push("RECEIVE\t"+this.game.players[q]+"\t"+this.game.players[x[B]]+"\t"+this.game.state.player_pot[q]/x.length+"\t"+(new Date).getTime()+"\t"+this.game.crypto),this.settlement.push("SEND\t"+this.game.players[q]+"\t"+this.game.players[x[B]]+"\t"+this.game.state.player_pot[q]/x.length+"\t"+(new Date).getTime()+"\t"+this.game.crypto))}else if(this.updateLog(this.game.state.player_names[x[0]]+" wins "+this.game.state.pot),this.game.state.player_credit[x[0]]+=this.game.state.pot,""!=this.game.crypto)for(var L=0;L<this.game.players;L++)!x.includes(L)&&this.game.state.player_pot[L]>0&&(this.settlement.push("RECEIVE\t"+this.game.players[L]+"\t"+this.game.players[x[0]]+"\t"+this.game.state.player_pot[L]+"\t"+(new Date).getTime()+"\t"+this.game.crypto),this.settlement.push("SEND\t"+this.game.players[L]+"\t"+this.game.players[x[0]]+"\t"+this.game.state.player_pot[L]+"\t"+(new Date).getTime()+"\t"+this.game.crypto));return this.startNextRound(),1}return this.game.player-1==k&&(this.addMove("reveal\t"+this.game.player+"\t"+this.game.deck[0].hand[0]+"\t"+this.game.deck[0].hand[1]),this.endTurn()),0}if("round"===a[0]){if(this.displayBoard(),0==this.game.state.turn&&(this.game.state.player_credit[this.game.state.big_blind_player-1]<=this.game.state.big_blind?(this.game.state.player_credit[this.game.state.big_blind_player-1]==this.game.state.big_blind?this.updateLog(this.game.state.player_names[this.game.state.big_blind_player-1]+" posts big blind "+this.game.state.big_blind):this.updateLog(this.game.state.player_names[this.game.state.big_blind_player-1]+" posts remaining tokens as big blind and is removed from game"),this.game.state.player_pot[this.game.state.big_blind_player-1]+=this.game.state.player_credit[this.game.state.big_blind_player-1],this.game.state.pot+=this.game.state.player_credit[this.game.state.big_blind_player-1],this.game.state.player_credit[this.game.state.big_blind_player-1]=0,this.game.state.passed[this.game.state.big_blind_player-1]=1):(this.updateLog(this.game.state.player_names[this.game.state.big_blind_player-1]+" posts big blind "+this.game.state.big_blind),this.game.state.player_pot[this.game.state.big_blind_player-1]+=this.game.state.big_blind,this.game.state.pot+=this.game.state.big_blind,this.game.state.player_credit[this.game.state.big_blind_player-1]-=this.game.state.big_blind),this.game.state.player_credit[this.game.state.small_blind_player-1]<=this.game.state.small_blind?(this.game.state.player_credit[this.game.state.small_blind_player-1]<=this.game.state.small_blind?this.updateLog(this.game.state.player_names[this.game.state.small_blind_player-1]+" posts small blind "+this.game.state.small_blind):this.updateLog(this.game.state.player_names[this.game.state.small_blind_player-1]+" posts remaining tokens as small blind and is removed from the game"),this.game.state.player_pot[this.game.state.small_blind_player-1]+=this.game.state.player_credit[this.game.state.small_blind_player-1],this.game.state.pot+=this.game.state.player_credit[this.game.state.small_blind_player-1],this.game.state.player_credit[this.game.state.small_blind_player-1]=0,this.game.state.passed[this.game.state.small_blind_player-1]=1):(this.updateLog(this.game.state.player_names[this.game.state.small_blind_player-1]+" posts small blind "+this.game.state.small_blind),this.game.state.player_pot[this.game.state.small_blind_player-1]+=this.game.state.small_blind,this.game.state.pot+=this.game.state.small_blind,this.game.state.player_credit[this.game.state.small_blind_player-1]-=this.game.state.small_blind)),this.game.state.turn++,this.game.state.required_pot<this.game.state.big_blind&&(this.game.state.required_pot=this.game.state.big_blind),this.updateStatus("Opponent is Speaking"),0==this.game.state.flipped&&this.game.state.plays_since_last_raise<this.game.players.length)for(var N=this.game.state.big_blind_player;N<=this.game.state.big_blind_player+this.game.players.length-1;N++){var F=N%this.game.players.length;0==F&&(F=this.game.players.length),this.game.queue.push("turn\t"+F)}else for(var U=this.game.state.button_player;U<=this.game.state.button_player+this.game.players.length-1;U++){var $=U%this.game.players.length;0==$&&($=this.game.players.length),this.game.queue.push("turn\t"+$)}1==this.game.state.turn&&this.game.queue.push("announce")}if("call"===a[0]){var z=parseInt(a[1]),H=0;this.updatePlayerLog(z,"call"),this.game.state.required_pot>this.game.state.player_pot[z-1]&&(H=this.game.state.required_pot-this.game.state.player_pot[z-1]),this.updateLog(this.game.state.player_names[z-1]+" calls"),this.game.state.small_blind_player==z&&0==this.game.state.flipped&&(this.game.state.plays_since_last_raise=this.game.players.length-1),this.game.state.player_credit[z-1]-=H,this.game.state.player_pot[z-1]+=H,this.game.state.pot+=H,this.game.queue.splice(t,1)}if("fold"===a[0]){var G=parseInt(a[1]);this.updatePlayerLog(G,"fold"),this.updateLog(this.game.state.player_names[G-1]+" folds"),this.game.state.passed[G-1]=1,this.game.queue.splice(t,1);for(var K=0,W=-1,V=0;V<this.game.state.passed.length;V++)0==this.game.state.passed&&(K++,W=V);if(1==K){if(this.game.state.player_credit[W]=this.game.state.pot,""!=this.game.crypto)for(var Y=0;Y<this.game.players.length;Y++)Y!=W&&(this.game.player-1==W?Y!=W&&this.settlement.push("RECEIVE\t"+this.game.players[Y]+"\t"+this.game.players[W]+"\t"+this.game.state.player_pot[Y]+"\t"+(new Date).getTime()+"\t"+this.game.crypto):Y!=W&&(this.settlement.push("RECEIVE\t"+this.game.players[Y]+"\t"+this.game.players[W]+"\t"+this.game.state.player_pot[Y]+"\t"+(new Date).getTime()+"\t"+this.game.crypto),this.settlement.push("SEND\t"+this.game.players[Y]+"\t"+this.game.players[W]+"\t"+this.game.state.player_pot[Y]+"\t"+(new Date).getTime()+"\t"+this.game.crypto)));this.startNextRound()}}if("check"===a[0]){var J=parseInt(a[1]);this.game.queue.splice(t,1),this.updateLog(this.game.state.player_names[J-1]+" checks.")}if("raise"==a[0]){var X=parseInt(a[1]),Q=parseInt(a[2]),Z=0,ee=0;this.game.state.plays_since_last_raise=1,this.game.state.required_pot>this.game.state.player_pot[X-1]?(ee=Q-(Z=this.game.state.required_pot-this.game.state.player_pot[X-1]),this.game.state.player_credit[X-1]-=Z,this.game.state.player_pot[X-1]+=Z,this.game.state.pot+=Z,this.game.state.player_credit[X-1]-=ee,this.game.state.player_pot[X-1]+=ee,this.game.state.required_pot+=ee,this.game.state.pot+=ee,ee>0&&(this.game.state.last_raise=ee),ee>0?(this.updateLog(this.game.state.player_names[X-1]+" raises "+ee+" to "+this.game.state.player_pot[X-1]),this.updatePlayerLog(X,"raises "+ee)):this.updateLog(this.game.state.player_names[X-1]+" calls "+Z+".")):(this.game.state.player_credit[X-1]-=Q,this.game.state.player_pot[X-1]+=Q,this.game.state.required_pot+=Q,this.game.state.pot+=Q,this.game.state.last_raise=Q,this.updateLog(this.game.state.player_names[X-1]+" raises "+Q+" to "+this.game.state.player_pot[X-1]),this.updatePlayerLog(X,"raises "+Q)),this.game.queue.splice(t,1)}if(0==r)return console.log("NOT CONTINUING"),0}return 1}},{key:"playerTurn",value:function(){if(0!=this.browser_active){var e=this;e.moves.includes("resolve\tturn")||e.addMove("resolve\tturn"),this.displayBoard();var t=this.game.state.required_pot-this.game.state.player_pot[this.game.player-1],a=this.game.state.last_raise,r="",n=1,i=1;this.game.state.player_credit[this.game.state.player-1]<t&&(n=0),this.game.state.player_credit[this.game.state.player-1]<t+this.game.state.last_raise&&(i=0);var s=e.game.options.stake*e.game.players.length;if(e.game.state.player_credit.forEach((function(t,a){s>t&&0==e.game.state.passed[a]&&(s=t)})),s<=t&&(i=0),0==n&&0==i)return this.updateStatus("You can only fold..."),this.addMove("fold\t"+e.game.player),void this.endTurn();r+='<div class="menu-player" style="text-align:left;width:100%">',r+='<div style="float:right;" class="saito-balance">'.concat(this.game.state.player_credit[this.game.player-1]," ").concat(this.game.crypto,"</div>Your move:</div>"),r+="<ul>";var o=this.game.state.required_pot-this.game.state.player_pot[this.game.player-1];o<0&&(o=0),this.game.state.required_pot>this.game.state.player_pot[this.game.player-1]?(r+='<li class="menu_option" id="fold">fold</li>',1==n&&o<=0&&(r+='<li class="menu_option" id="call">call</li>'),1==n&&o>0&&(r+='<li class="menu_option" id="call">call ('+o+")</li>"),1==i&&o<=0&&(r+='<li class="menu_option" id="raise">raise</li>'),1==i&&o>0&&(r+='<li class="menu_option" id="raise">raise ('+o+"+)</li>"),r+="</ul>",this.updateStatus(r,1)):this.game.state.required_pot<=this.game.state.player_credit[this.game.player-1]?(r+='<li class="menu_option" id="fold">fold</li>',r+='<li class="menu_option" id="check">check</li>',1==i&&(r+='<li class="menu_option" id="raise">raise</li>'),r+="</ul>",this.updateStatus(r,1)):(r+='<li class="menu_option" id="fold">fold</li>',r+='<li class="menu_option" id="check">check</li>',r+="</ul>",this.updateStatus(r,1)),$(".menu_option").off(),$(".menu_option").on("click",(function(){var t=$(this).attr("id");if("fold"===t&&(e.addMove("fold\t"+e.game.player),e.endTurn()),"check"===t&&(e.addMove("check\t"+e.game.player),e.endTurn()),"call"===t&&(e.addMove("call\t"+e.game.player),e.endTurn()),"raise"===t){a=parseInt(a);var n=e.game.state.player_credit[e.game.player-1],i=(e.game.state.player_credit[e.game.player-1],e.game.options.stake*e.game.players.length),s=0;e.game.state.player_credit.forEach((function(t,a){i>t&&0==e.game.state.passed[a]&&(i=t,s=a)})),e.game.state.last_raise=parseInt(e.game.state.last_raise);var c=e.game.state.required_pot-e.game.state.player_pot[e.game.player-1];c<0&&(c=0),r=c>0?"Match "+c+" and raise: <p></p><ul>":"Please select an option below: <p></p><ul>",r+='<li class="menu_option" id="0">cancel raise</li>',console.log("raise required: "+a),console.log("credit remaining: "+n),console.log("smallest stack: "+i);for(var l=0;l<6;l++){var u=a+l*e.game.state.last_raise;console.log("this raise: "+u),n>u&&i>u?u-c>0&&(r+='<li class="menu_option" id="'+(u-c)+'">raise '+(u-c)+"</li>"):i<u&&(i==n?(r+='<li class="menu_option" id="'+(i-c)+'">raise '+(i-c)+" ("+e.game.state.player_names[s]+" all in)</li>",l=6):(r+='<li class="menu_option" id="'+i+'">raise '+i+" ("+e.game.state.player_names[s]+" all in)</li>",l=6))}r+="</ul>",e.updateStatus(r),$(".menu_option").off(),$(".menu_option").on("click",(function(){var t=$(this).attr("id");o>0&&(t=parseInt(t)+parseInt(o)),0!=t?(e.addMove("raise\t"+e.game.player+"\t"+t),e.endTurn()):e.playerTurn()}))}}))}}},{key:"displayBoard",value:function(){if(0!=this.browser_active)try{this.displayPlayers(),this.displayHand(),this.displayTable()}catch(e){console.log("err: "+e)}}},{key:"returnState",value:function(e){var t={round:0,new_round:0,turn:0,flipped:0,player_cards:{},player_cards_reported:0,player_cards_required:0,plays_since_last_raise:-1,started:0,pot:0,player_names:[],player_pot:[],player_credit:[],passed:[],big_blind:50,small_blind:25,big_blind_player:1,small_blind_player:2,button_player:3,small_blind_is_button:0};2==e&&(t.button_player=2),t.big_blind_paid=0,t.small_blind_paid=0,t.required_pot=0,t.last_raise=t.big_blind,t.blinds_idx=0,t.blinds_array=[{big:.001,small:5e-4},{big:.002,small:1e-4},{big:.004,small:.002},{big:.008,small:.004},{big:.015,small:.008},{big:.03,small:.015},{big:.06,small:.03},{big:.12,small:.06},{big:.25,small:.12},{big:.5,small:.25},{big:1,small:.5},{big:2,small:1},{big:4,small:2},{big:8,small:4},{big:15,small:8},{big:30,small:15},{big:60,small:30},{big:120,small:60},{big:250,small:120},{big:500,small:250},{big:1e3,small:500}],t.tournament_blinds_per_level=12,t.tournament_blinds_per_level_max=12,"increase"===this.game.options.blinds?t.tournament_blinds_level_up=1:t.tournament_blinds_level_up=0,null!=this.game.options.crypto&&(this.game.crypto=this.game.options.crypto);for(var a=0;a<e;a++)t.passed[a]=0;for(var r=0;r<e;r++)t.player_pot[r]=0;for(var n=0;n<e;n++)t.player_names[n]=this.app.keys.returnIdentifierByPublicKey(this.game.players[n],1),t.player_names[n].indexOf("@")>0&&(t.player_names[n]=t.player_names[n].substring(0,t.player_names[n].indexOf("@"))),t.player_names[n]===this.game.players[n]&&(t.player_names[n]=this.game.players[n].substring(0,10)+"...");for(var i=0;i<e;i++)t.player_credit[i]=100,null!=this.game.options.stake&&(t.player_credit[i]=parseInt(this.game.options.stake));if(null!=this.game.options.big_blind){for(var s=0,o=0;o<t.blinds_array.length;o++)this.game.options.big_blind===t.blinds_array[o].big&&(t.blinds_idx=o,s=1,t.big_blind=parseInt(t.blinds_array[o].big),t.small_blind=t.big_blind/2,t.last_raise=parseInt(t.big_blind));0==s&&(t.big_blind=parseInt(this.game.options.big_blind),t.small_blind=t.big_blind/2,t.last_raise=parseInt(t.big_blind))}return console.log("STATE: "+JSON.stringify(t)),t}},{key:"returnCardFromDeck",value:function(e){var t=this.returnDeck()[e];return t.name.substring(0,t.name.indexOf("."))}},{key:"returnDeck",value:function(){var e={1:{name:"S1.png"},2:{name:"S2.png"},3:{name:"S3.png"},4:{name:"S4.png"},5:{name:"S5.png"},6:{name:"S6.png"},7:{name:"S7.png"},8:{name:"S8.png"},9:{name:"S9.png"},10:{name:"S10.png"},11:{name:"S11.png"},12:{name:"S12.png"},13:{name:"S13.png"},14:{name:"C1.png"},15:{name:"C2.png"},16:{name:"C3.png"},17:{name:"C4.png"},18:{name:"C5.png"},19:{name:"C6.png"},20:{name:"C7.png"},21:{name:"C8.png"},22:{name:"C9.png"},23:{name:"C10.png"},24:{name:"C11.png"},25:{name:"C12.png"},26:{name:"C13.png"},27:{name:"H1.png"},28:{name:"H2.png"},29:{name:"H3.png"},30:{name:"H4.png"},31:{name:"H5.png"},32:{name:"H6.png"},33:{name:"H7.png"},34:{name:"H8.png"},35:{name:"H9.png"},36:{name:"H10.png"},37:{name:"H11.png"},38:{name:"H12.png"},39:{name:"H13.png"},40:{name:"D1.png"},41:{name:"D2.png"},42:{name:"D3.png"},43:{name:"D4.png"},44:{name:"D5.png"},45:{name:"D6.png"},46:{name:"D7.png"},47:{name:"D8.png"},48:{name:"D9.png"},49:{name:"D10.png"},50:{name:"D11.png"},51:{name:"D12.png"},52:{name:"D13.png"}};return e}},{key:"updatePlayerLog",value:function(e,t){var a="#player-info-log-"+e,r=document.querySelector(a);r&&(r.innerHTML=t)}},{key:"returnPlayersBoxArray",value:function(){var e=[];return 2==this.game.players.length&&(e=[1,4]),3==this.game.players.length&&(e=[1,3,5]),4==this.game.players.length&&(e=[1,3,4,5]),5==this.game.players.length&&(e=[1,2,3,5,6]),6==this.game.players.length&&(e=[1,2,3,4,5,6]),e}},{key:"returnViewBoxArray",value:function(){var e=[];return 2==this.game.players.length&&(e=[3,5]),3==this.game.players.length&&(e=[3,4,5]),4==this.game.players.length&&(e=[2,3,5,6]),5==this.game.players.length&&(e=[2,3,4,5,6]),e}},{key:"displayPlayers",value:function(){var e="",t="";this.game.players.includes(this.app.wallet.returnPublicKey())?(e=this.returnPlayersBoxArray(),t=this.game.players.indexOf(this.app.wallet.returnPublicKey())):(document.querySelector(".status").innerHTML="You are out of the game.<br />Feel free to hang out and chat.",document.querySelector(".cardfan").classList.add("hidden"),e=this.returnViewBoxArray());for(var a=2;a<7;a++){var r=document.querySelector("#player-info-"+a);e.includes(a)?r.style.display="block":r.style.display="none"}for(var n=0;n<this.game.players.length;n++){var i=n-t;i<0&&(i+=this.game.players.length);var s="#player-info-"+e[i],o=document.querySelector(s),c='\n      <div class="player-info-hand hand tinyhand" id="player-info-hand-'.concat(n+1,'">\n      ');c+='\n          <img class="card" src="'.concat(this.card_img_dir,'/red_back.png">\n          <img class="card" src="').concat(this.card_img_dir,'/red_back.png">\n      '),c+='\n        </div>\n        <div class="player-info-name" id="player-info-name-'.concat(n+1,'">').concat(this.game.state.player_names[n],'</div>\n        <div class="player-info-chips" id="player-info-chips-').concat(n+1,'">').concat(this.game.state.player_credit[n]," ").concat(this.game.crypto,"</div> \n        \n      "),o.querySelector(".info").innerHTML=c,""==o.querySelector(".plog").innerHTML&&(o.querySelector(".plog").innerHTML+='<div class="player-info-log" id="player-info-log-'.concat(n+1,'"></div>'))}document.querySelector(".dealer").innerHTML=this.game.state.big_blind_player;var l=1+(this.game.players.length+this.game.state.big_blind_player+1)%this.game.players.length;document.querySelector("#player-info-name-"+l).classList.add("dealerbutton"),document.querySelector("#player-info-name-"+this.game.state.big_blind_player).classList.add("bigblind"),document.querySelector("#player-info-name-"+this.game.state.small_blind_player).classList.add("smallblind")}},{key:"displayHand",value:function(){this.cardfan.render(this.app,this),this.cardfan.attachEvents(this.app,this)}},{key:"displayTable",value:function(){document.querySelector("#deal").innerHTML="";for(var e=0;e<5||e<this.game.pool[0].hand.length;e++){var t={};e<this.game.pool[0].hand.length?t=this.game.pool[0].cards[this.game.pool[0].hand[e]]:t.name="red_back.png";var a='<img class="card" src="'.concat(this.card_img_dir,"/").concat(t.name,'">');document.querySelector("#deal").innerHTML+=a}document.querySelector(".pot").innerHTML=this.game.state.pot}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"endTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.updateStatus("Waiting for information from peers....");try{$(".menu_option").off()}catch(e){}var t={};t.target=this.returnNextPlayer(this.game.player),0!=e&&(t.target=e),this.game.turn=this.moves,this.moves=[],this.sendMessage("game",t)}},{key:"pickWinner",value:function(e,t){for(var a=0,r=0;r<e.cards_to_score.length;r++)e.cards_to_score[r]!==t.cards_to_score[r]&&(a=1);if(0==a)return 3;if("royal flush"==e.hand_description&&"royal flush"==t.hand_description)for(var n=0;n<e.cards_to_score.length;n++)return this.returnHigherCard(e.cards_to_score[n],t.cards_to_score[n])==e.cards_to_score[n]?1:2;if("royal flush"==e.hand_description)return 1;if("royal flush"==t.hand_description)return 2;if("straight flush"==e.hand_description&&"straight flush"==t.hand_description){for(var i=0;i<e.cards_to_score.length;i++){if(this.returnHigherNumberCard(e.cards_to_score[i],t.cards_to_score[i])==e.cards_to_score[i])return 1;if(this.returnHigherNumberCard(e.cards_to_score[i],t.cards_to_score[i])==t.cards_to_score[i])return 2}return 3}if("straight flush"==e.hand_description)return 1;if("straight flush"==t.hand_description)return 2;if("four-of-a-kind"==e.hand_description&&"four-of-a-kind"==t.hand_description)return this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==e.cards_to_score[0]?1:this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==t.cards_to_score[0]?2:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==e.cards_to_score[4]?1:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==t.cards_to_score[4]?2:3;if("four-of-a-kind"==e.hand_description)return 1;if("four-of-a-kind"==t.hand_description)return 2;if("full house"==e.hand_description&&"full house"==t.hand_description)return this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==e.cards_to_score[0]?1:this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==t.cards_to_score[0]?2:this.returnHigherNumberCard(e.cards_to_score[3],t.cards_to_score[3])==e.cards_to_score[3]?1:this.returnHigherNumberCard(e.cards_to_score[3],t.cards_to_score[3])==t.cards_to_score[3]?2:3;if("full house"==e.hand_description)return 1;if("full house"==t.hand_description)return 2;if("flush"==e.hand_description&&"flush"==t.hand_description){for(var s=0;s<e.cards_to_score.length;s++){if(this.returnHigherCard(e.cards_to_score[s],t.cards_to_score[s])==e.cards_to_score[s])return 1;if(this.returnHigherCard(e.cards_to_score[s],t.cards_to_score[s])==t.cards_to_score[s])return 2}return 3}if("flush"==e.hand_description)return 1;if("flush"==t.hand_description)return 2;if("straight"==e.hand_description&&"straight"==t.hand_description){for(var o=0;o<e.cards_to_score.length;o++){if(this.returnHigherNumberCard(e.cards_to_score[o],t.cards_to_score[o])==e.cards_to_score[o])return 1;if(this.returnHigherNumberCard(e.cards_to_score[o],t.cards_to_score[o])==t.cards_to_score[o])return 2}return 3}if("straight"==e.hand_description)return 1;if("straight"==t.hand_description)return 2;if("three-of-a-kind"==e.hand_description&&"three-of-a-kind"==t.hand_description){if(this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==e.cards_to_score[0])return 1;if(this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==t.cards_to_score[0])return 2;for(var c=3;c<5;c++){if(this.returnHigherNumberCard(e.cards_to_score[c],t.cards_to_score[c])==e.cards_to_score[c])return 1;if(this.returnHigherNumberCard(e.cards_to_score[c],t.cards_to_score[c])==t.cards_to_score[c])return 2}return 3}if("three-of-a-kind"==e.hand_description)return 1;if("three-of-a-kind"==t.hand_description)return 2;if("two pair"==e.hand_description&&"two pair"==t.hand_description)return this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==e.cards_to_score[0]?1:this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==t.cards_to_score[0]?2:this.returnHigherNumberCard(e.cards_to_score[2],t.cards_to_score[2])==e.cards_to_score[2]?1:this.returnHigherNumberCard(e.cards_to_score[2],t.cards_to_score[2])==t.cards_to_score[2]?2:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==e.cards_to_score[4]?1:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==t.cards_to_score[4]?2:3;if("two pair"==e.hand_description)return 1;if("two pair"==t.hand_description)return 2;if("pair"==e.hand_description&&"pair"==t.hand_description)return this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==e.cards_to_score[0]?1:this.returnHigherNumberCard(e.cards_to_score[0],t.cards_to_score[0])==t.cards_to_score[0]?2:this.returnHigherNumberCard(e.cards_to_score[2],t.cards_to_score[2])==e.cards_to_score[2]?1:this.returnHigherNumberCard(e.cards_to_score[2],t.cards_to_score[2])==t.cards_to_score[2]?2:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==e.cards_to_score[4]?1:this.returnHigherNumberCard(e.cards_to_score[4],t.cards_to_score[4])==t.cards_to_score[4]?2:3;if("pair"==e.hand_description)return 1;if("pair"==t.hand_description)return 2;if("highest card"==e.hand_description&&"highest card"==t.hand_description){for(var l=0;l<e.cards_to_score.length;l++){if(this.returnHigherNumberCard(e.cards_to_score[l],t.cards_to_score[l])==e.cards_to_score[l])return 1;if(this.returnHigherNumberCard(e.cards_to_score[l],t.cards_to_score[l])==t.cards_to_score[l])return 2}return 3}return"highest card"==e.hand_description?1:"highest card"==t.hand_description?2:void 0}},{key:"scoreHand",value:function(e){var t=this.convertHand(e),a=t.suite,r=t.val,n=0,i=[],s=[],o=[],c=[];for(n=1;n<14;){var l=this.isTwo(a,r,n);0==l?n=14:(i.push(l),n=l+1)}for(i.sort((function(e,t){return e-t})),n=1;n<14;){var u=this.isThree(a,r,n);0==u?n=14:(s.push(u),n=u+1)}for(s.sort((function(e,t){return e-t})),n=1;n<14;){var d=this.isFour(a,r,n);0==d?n=14:(o.push(d),n=d+1)}for(n=1;n<10;){var p=this.isStraight(a,r,n);0==p?n=11:(c.push(p),n=p+1)}for(var h=0;h<o.length;h++){for(var f=0;f<s.length;f++)s[f]===o[h]&&s.splice(f,1);for(f=0;f<i.length;f++)i[f]===o[h]&&i.splice(f,1)}for(var m=0;m<s.length;m++)for(f=0;f<i.length;f++)i[f]===s[m]&&i.splice(f,1);var g=[],b="",y=[];if(c.includes(10)&&""!=this.isFlush(a,r)){var v=this.isFlush(a,r);if(1==this.isCardSuite(a,r,1,v)&&1==this.isCardSuite(a,r,13,v)&&1==this.isCardSuite(a,r,12,v)&&1==this.isCardSuite(a,r,11,v)&&1==this.isCardSuite(a,r,10,v))return g.push("1"+v),g.push("13"+v),g.push("12"+v),g.push("11"+v),g.push("10"+v),b="royal flush",{cards_to_score:this.sortByValue(g),hand_description:b}}if(c.length>0&&""!=this.isFlush(a,r))for(var _=this.isFlush(a,r),w=c.length-1;w>=0;w--)if(1==this.isCardSuite(a,r,c[w]+4,_)&&1==this.isCardSuite(a,r,c[w]+3,_)&&1==this.isCardSuite(a,r,c[w]+2,_)&&1==this.isCardSuite(a,r,c[w]+1,_)&&1==this.isCardSuite(a,r,c[w],_))return g.push(c[w]+4+_),g.push(c[w]+3+_),g.push(c[w]+2+_),g.push(c[w]+1+_),g.push(c[w]+_),b="straight flush",{cards_to_score:this.sortByValue(g),hand_description:b};if(o.length>0)return o.includes(1)?(g=["C1","D1","H1","S1"],y=this.returnHighestCard(a,r,g),g.push(y),{cards_to_score:g,hand_description:b="four-of-a-kind"}):(g=["C"+o[o.length-1],"D"+o[o.length-1],"H"+o[o.length-1],"S"+o[o.length-1]],y=this.returnHighestCard(a,r,g),b="four-of-a-kind",g.push(y),{cards_to_score:g,hand_description:b});if(2==s.length&&(s[0]>s[1]?i.push(s.pop()):i.push(s.shift())),s.length>0&&i.length>0){for(var x="C",k=0;k<r.length;k++)r[k]==s[s.length-1]&&(this.isHigherSuite(a[k],x)&&(x=a[k]),g.push(a[k]+r[k]));y=x+s[s.length-1];for(var S=0;S<r.length;S++)r[S]==i[i.length-1]&&g.push(a[S]+r[S]),g.length>5&&g.pop();return{cards_to_score:g,hand_description:b="full house",highest_card:y}}if(""!=this.isFlush(a,r)){for(var P=this.isFlush(a,r),E=[],C=0;C<r.length;C++)a[C]==P&&E.push(r[C]);E.sort((function(e,t){return e-t})),E.splice(0,E.length-5);for(var A=E.length-1;A>=0;A--)g.push(P+E[A]);return b="flush",{cards_to_score:this.sortByValue(g),hand_description:b}}if(this.isStraight(a,r)>0){var M=this.isStraight(a,r);if(b="straight",10==M)return g.push(this.returnHighestSuiteCard(a,r,1)),g.push(this.returnHighestSuiteCard(a,r,13)),g.push(this.returnHighestSuiteCard(a,r,12)),g.push(this.returnHighestSuiteCard(a,r,11)),g.push(this.returnHighestSuiteCard(a,r,10)),{cards_to_score:g,hand_description:b};if(1==M)return g.push(this.returnHighestSuiteCard(a,r,5)),g.push(this.returnHighestSuiteCard(a,r,4)),g.push(this.returnHighestSuiteCard(a,r,3)),g.push(this.returnHighestSuiteCard(a,r,2)),g.push(this.returnHighestSuiteCard(a,r,1)),{cards_to_score:g,hand_description:b};for(var T=4;T>=0;T--)g.push(this.returnHighestSuiteCard(a,r,M+T));return{cards_to_score:this.sortByValue(g),hand_description:b}}if(s.length>0){for(var j=s[s.length-1],O=[],D=r.length,I=0;I<D;I++)r[I]==j&&(O.push(a[I]+r[I]),r.splice(I,1),a.splice(I,1),D--,I--);for(var R=0;R<O.length;R++)g.push(O[R]);for(var B=this.returnHighestCard(a,r),q=this.returnHighestCard(a,r,[B]),L=this.sortByValue([B,q]),N=0;N<L.length;N++)g.push(L[N]);return{cards_to_score:g,hand_description:b="three-of-a-kind"}}if(i.length>1){i.sort((function(e,t){return e-t})),3==i.length&&(1==i[0]&&i.push(i.shift()),i.shift());var F=i[i.length-1],U=i[i.length-2];y=F>U?F:U,1==U&&(y=U);for(var $=r.length,z=0;z<$;z++)r[z]==y&&(g.push(a[z]+r[z]),r.splice(z,1),a.splice(z,1),$--,z--);$=r.length;for(var H=0;H<$;H++)r[H]!=F&&r[H]!=U||(g.push(a[H]+r[H]),r.splice(H,1),a.splice(H,1),$--,H--);var G=this.returnHighestCard(a,r,g);return g.push(G),{cards_to_score:g,hand_description:b="two pair"}}if(i.length>0){for(var K=i[i.length-1],W=[],V=r.length,Y=0;Y<V;Y++)r[Y]==K&&(W.push(a[Y]+r[Y]),r.splice(Y,1),a.splice(Y,1),V--,Y--);var J=this.returnHighestCard(a,r),X=this.returnHighestCard(a,r,[J]),Q=this.returnHighestCard(a,r,[J,X]),Z=this.sortByValue([J,X,Q]);g.push(W[0]),g.push(W[1]);for(var ee=0;ee<Z.length;ee++)g.push(Z[ee]);return{cards_to_score:g,hand_description:b="pair"}}var te=this.returnHighestCard(a,r),ae=this.returnHighestCard(a,r,[te]),re=this.returnHighestCard(a,r,[te,ae]),ne=this.returnHighestCard(a,r,[te,ae,re]),ie=this.returnHighestCard(a,r,[te,ae,re,ne]);return g.push(te),g.push(ae),g.push(re),g.push(ne),g.push(ie),b="highest card",y=te,{cards_to_score:this.sortByValue(g),hand_description:b}}},{key:"convertHand",value:function(e){for(var t={suite:[],val:[]},a=0;a<e.length;a++)t.suite.push(e[a][0]),t.val.push(parseInt(e[a].substring(1)));return t}},{key:"sortByValue",value:function(e){var t=[],a=0;t.push(e[0]);for(var r=1;r<e.length;r++){a=0;for(var n=0;n<t.length;n++)this.returnHigherCard(e[r],t[n])==t[n]&&(a=n+1);t.splice(a,0,e[r])}return t}},{key:"returnHigherCard",value:function(e,t){var a=e[0],r=parseInt(e.substring(1)),n=t[0],i=parseInt(t.substring(1));return 1==r&&(r=14),1==i&&(i=14),r>i?e:i>r?t:i==r?a==n?0:this.isHigherSuite(a,n)?e:t:void 0}},{key:"returnHigherNumberCard",value:function(e,t){var a=parseInt(e.substring(1)),r=parseInt(t.substring(1));return 1==a&&(a=14),1==r&&(r=14),a>r?e:r>a?t:r==a?0:void 0}},{key:"isHigherSuite",value:function(e,t){return"S"===e?1:"S"==t?0:"H"===e?1:"H"==t?0:"D"===e?1:"D"==t?0:"C"===e?1:"C"==t?0:void 0}},{key:"returnHighestSuiteCard",value:function(e,t,a){for(var r="C",n="",i=0;i<t.length;i++)t[i]==a&&(""!=n?this.isHigherSuite(r,e[i])&&(r=e[i],n=e[i]+t[i]):(r=e[i],n=e[i]+t[i]));return n}},{key:"returnHighestCard",value:function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=0,n="C",i=0;i<t.length;i++)a.includes(e[i]+t[i])?console.log("you are barred from the pub"):(1==t[i]&&(14==r?this.isHigherSuite(e[i],n)&&(n=e[i]):(r=14,n=e[i])),t[i]==r&&this.isHigherSuite(e[i],n)&&(n=e[i]),t[i]>r&&(r=t[i],n=e[i]));return 14==r&&(r=1),n+r}},{key:"isFlush",value:function(e,t){for(var a=0,r=0,n=0,i=0,s=0;s<e.length;s++)"C"==e[s]&&a++,"D"==e[s]&&i++,"H"==e[s]&&n++,"S"==e[s]&&r++;return a>=5?"C":r>=5?"S":n>=5?"H":i>=5?"D":""}},{key:"isFour",value:function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=a-1;r<13;r++)for(var n=0,i=0;i<t.length;i++)if(t[i]==r+1&&4==++n)return r+1;return 0}},{key:"isThree",value:function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=a-1;r<13;r++)for(var n=0,i=0;i<t.length;i++)if(t[i]==r+1&&3==++n)return r+1;return 0}},{key:"isTwo",value:function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=a-1;r<13;r++)for(var n=0,i=0;i<t.length;i++)if(t[i]==r+1&&2==++n)return r+1;return 0}},{key:"isStraight",value:function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=a-1;r<10;r++){if(9==r)return t.includes(13)&&t.includes(12)&&t.includes(11)&&t.includes(10)&&t.includes(1)?10:0;if(t.includes(r+1)&&t.includes(r+2)&&t.includes(r+3)&&t.includes(r+4)&&t.includes(r+5))return r+1}return 0}},{key:"isCardSuite",value:function(e,t,a,r){for(var n=0;n<t.length;n++)if(t[n]==a&&e[n]==r)return 1;return 0}},{key:"cardToHuman",value:function(e){var t=this.game.deck[0].cards[e].name;return-1!=(t=(t=(t=(t=(t=(t=t.replace(".png","")).replace("13","K")).replace("12","Q")).replace("11","J")).replace("1","A")).replace("A0","10")).indexOf("H")&&(t=t.replace("H","")+"h"),-1!=t.indexOf("D")&&(t=t.replace("D","")+"d"),-1!=t.indexOf("S")&&(t=t.replace("S","")+"s"),-1!=t.indexOf("C")&&(t=t.replace("C","")+"c"),t}},{key:"toHuman",value:function(e){var t=" <span class='htmlhand'>";return e.forEach((function(e){e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("H","<span style='color:red'><span class='suit'>&hearts;</span>")).replace("D","<span style='color:red'><span class='suit'>&diams;</span>")).replace("S","<span style='color:black'><span class='suit'>&spades;</span>")).replace("C","<span style='color:black'><span class='suit'>&clubs;</span>")).replace("13","K")).replace("12","Q")).replace("11","J")).replace("1","A")).replace("A0","10"),t+=e="<span class='htmlCard'>"+e+"</span></span>"})),t+="</span> "}},{key:"toHTMLHAND",value:function(e){_this=this;var t=" <span class='htmlCards'>";return e.forEach((function(e){t+='<img class="card" src="'.concat(_this.card_img_dir,"/").concat(e,'.png">')})),t+="</span> "}},{key:"returnGameOptionsHTML",value:function(){for(var e='\n      <h1 class="overlay-title">Start a Poker Game</h1>\n          <div class="overlay-input">\n            <label for="stake">Initial Stake:</label>\n            <select name="stake">\n              <option value="100">100</option>\n              <option value="500">500</option>\n              <option value="1000" selected="selected">1000</option>\n              <option value="5000" >5000</option>\n              <option value="10000">10000</option>\n            </select>\n          </div>\n          <div class="overlay-input">\n            <label for="big_blind">Starting Blinds:</label>\n            <select name="big_blind">\n              <option value="0.001">0.001</option>\n              <option value="0.008">0.008</option>\n              <option value="0.03">0.03</option>\n              <option value="0.12">0.12</option>\n              <option value="0.25">0.25</option>\n              <option value="1">1</option>\n              <option value="8">8</option>\n              <option value="30" selected>30</option>\n              <option value="120">120</option>\n              <option value="250">250</option>\n              <option value="500">500</option>\n            </select>\n          </div>\n          <div class="overlay-input">\n            <label for="crypto">Play Money:</label>\n            <select name="crypto">\n              <option value="" selected>none</option>\n              <option value="SAITO">SAITO</option>\n    ',t=0;t<this.app.modules.mods.length;t++)""!=this.app.modules.mods[t].ticker&&null!=this.app.modules.mods[t].ticker&&(e+='<option value="'.concat(this.app.modules.mods[t].ticker,'">').concat(this.app.modules.mods[t].ticker,"</option>"));return e+='\n            </select>\n          </div>\n          <div class="overlay-input">\n            <label for="stake">Blinds:</label>\n            <select name="blinds">\n              <option value="static">static blinds</option>\n              <option value="increase">increasing blinds</option>\n            </select>\n          </div>\n          <div class="overlay-input">\n            <label for="observer_mode">Observer Mode:</label>\n            <select name="observer">\n              <option value="enable" selected>enable</option>\n              <option value="disable">disable</option>\n            </select>\n          </div>\n\n      <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n\n    '}},{key:"returnFormattedGameOptions",value:function(e){var t={};for(var a in e)"stake"==a&&(t[a]=e[a]),"crypto"==a&&(t[a]=e[a]),"blinds"==a&&(t[a]=e[a]),"big_blind"==a&&(t[a]=e[a]);return t}},{key:"showSplash",value:function(e){var t=document.querySelector(".shim");t.classList.remove("hidden"),t.firstElementChild.innerHTML=e,t.addEventListener("click",(function(e){t.classList.add("hidden"),t.firstElementChild.innerHTML=""}))}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{if(document.querySelector(".p1 > .info").style.display=0==t?"block":"none",1==this.lock_interface)return;if(this.game.status=e,1==this.browser_active){var a=document.querySelector(".status");this.game.players.includes(this.app.wallet.returnPublicKey())&&(a.innerHTML=e)}}catch(e){}}},{key:"handleStatsMenu",value:function(){this.overlay.showOverlay(this.app,this,'\n      <div class="game-overlay-menu" id="game-overlay-menu">\n        <div>Game Statistics:</div>\n        <div class="statistics-info">\n        We\'re adding statistics, tracking and other information to help improve player games. If you\'re comfortable with JAVASCRIPT / HTML / CSS and want to help, please reach out.\n        </div>\n      </div>\n    ')}},{key:"increaseBlinds",value:function(){return this.game.state.blinds_idx++,1}}])&&n(t.prototype,a),r&&n(t,r),p}(d));e.exports=p},function(e,t){e.exports=PostMainTemplate=function(e,t){return'\n  <div id="post-container" class="post-container">\n    <div id="post-sidebar" class="post-sidebar">\n      <div id="email-chat" class="email_chat"></div>\n    </div>\n    <div id="post-main" class="post-main">\n      <div id="post-details" class="post-details"></div>\n      <div id="post-add-comment" class="post-add-comment"></div>\n      <div id="post-comments" class="post-comments"></div>\n    </div>\n  </div>\n    '}},function(e,t,a){var r=a(296),n=a(94);e.exports=NewPost={render:function(e,t){document.body.append(n(r(e,t)))},attachEvents:function(e,t){document.querySelector(".new-post-btn").addEventListener("click",(function(a){var r=document.querySelector(".new-post-content").value;newtx=t.post.createPostTransaction(r),e.network.propagateTransaction(newtx)})),document.querySelector(".post-close").addEventListener("click",(function(e){document.querySelector(".new-post-wrapper")&&document.querySelector(".new-post-wrapper").destroy()}))}}},function(e,t,a){var r=a(297),n=a(94);e.exports=ShowPost={render:function(e,t,a){var i=JSON.parse(a);document.body.append(n(r(e,t,i)))},attachEvents:function(e,t,a){var r=JSON.parse(a);document.querySelector(".show-post-update-btn")&&document.querySelector(".show-post-update-btn").addEventListener("click",(function(a){showtx=t.post.createPostTransaction(r.content,"update"),e.network.propagateTransaction(showtx)}))}}},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,a){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d(e);if(t){var n=d(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return u(this,a)}}function u(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=a(5),h=a(15),f=a(291),m=a(294),g=a(285),b=a(68),y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(k,e);var t,r,n,u,h,y,v,_,w,x=l(k);function k(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,k),(t=x.call(this,e)).name="Post",t.header=null,t.events=["chat-render-request"],t.renderMethod="none",t.post={},t.post.domain="saito",t.posts=[],t.comments=[],t.icon_fa="fa fa-map-signs",t.description="Simple forum for persistent posts and discussions",t.categories="Social Messaging",t}return t=k,(r=[{key:"receiveEvent",value:function(e,t){"chat-render-request"==e&&this.browser_active&&(m.render(this.app,this),m.attachEvents(this.app,this))}},{key:"respondTo",value:function(e){if(null!=o(d(k.prototype),"respondTo",this).call(this,e))return o(d(k.prototype),"respondTo",this).call(this,e);if("arcade-posts"==e){var t={};return t.render=this.renderArcade,t.attachEvents=function(){},t}return"header-dropdown"==e?{name:this.appname?this.appname:this.name,icon_fa:this.icon_fa,browser_active:this.browser_active,slug:this.returnSlug()}:null}},{key:"returnServices",value:function(){var e=[];return e.push({service:"post"}),e}},{key:"initializeHTML",value:function(e){null==this.header&&(this.header=new b(e,this)),this.header.render(e,this),this.header.attachEvents(e,this),m.render(this.app,this),m.attachEvents(this.app,this),f.render(e,this),f.attachEvents(e,this)}},{key:"onConfirmation",value:function(e,t,a,r){if(0==r.BROWSER&&0==a){var n=t.returnMessage();if("Post"===n.module){var i=r.modules.returnModule("Post");"post"==n.type&&(i.receivePostTransaction(t),this.render()),"comment"==n.type&&(i.receiveCommentTransaction(t),this.render()),"edit"==n.type&&(i.receiveEditTransaction(t),this.render()),"editpost"==n.type&&(i.receiveEditPostTransaction(t),this.render()),"report"==n.type&&(i.receiveReportTransaction(t),this.render()),"delete"==n.type&&(i.receiveDeleteTransaction(t),this.render())}}}},{key:"onPeerHandshakeComplete",value:function(e,t){var a=this;"none"!=this.renderMethod&&this.sendPeerDatabaseRequestWithFilter("Post",'SELECT id, children, img, lite_tx FROM posts WHERE parent_id = "" ORDER BY ts DESC LIMIT 12',(function(e){if(e&&e.rows)for(var t=0;t<e.rows.length;t++)a.posts.push(new p.transaction(JSON.parse(e.rows[t].lite_tx))),a.posts[a.posts.length-1].children=e.rows[t].children,a.posts[a.posts.length-1].img=e.rows[t].img;a.render()}),(function(e){if(e.peer.services)for(var t=0;t<e.peer.services.length;t++)if("post"===e.peer.services[t].service)return 1;return 0}))}},{key:"render",value:function(){"main"===this.renderMethod&&(f.render(this.app,this),f.attachEvents(this.app,this)),"arcade"===this.renderMethod&&(g.render(this.app,this),g.attachEvents(this.app,this))}},{key:"renderArcade",value:function(e,t){t.renderMethod="arcade",t.render(e,t)}},{key:"grabImage",value:function(e,t){var r=this,n=a(1196),i=new n;i.register(new n.FileExtension),i.register(new n.MimeType),i.register(new n.Opengraph),i.register(new n.Webpage),i.resolve(e,(function(e){if(e){var a={$img:e.image,$id:t};r.app.storage.executeDatabase("UPDATE posts SET img = $img WHERE id = $id;",a,"post")}else console.log("No image found")}))}},{key:"createPostTransaction",value:function(e,t,a,r,n){var i=this.app.wallet.createUnsignedTransaction();return i.msg.module="Post",i.msg.type="post",i.msg.title=e,i.msg.comment=t,i.msg.link=a,i.msg.forum=r,i.msg.images=n,this.app.wallet.signTransaction(i)}},{key:"receivePostTransaction",value:(w=i(regeneratorRuntime.mark((function e(t){var a,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.returnMessage(),r=JSON.stringify(t.transaction),(n=new p.transaction(JSON.parse(JSON.stringify(t.transaction)))).msg.comment="",n.msg.images=[],n=this.app.wallet.signTransaction(n),n=JSON.stringify(n.transaction),""!=a.title){e.next=9;break}return e.abrupt("return");case 9:return i={$pid:t.transaction.sig,$pthread_id:t.transaction.sig,$pparent_id:"",$ptype:"post",$ppublickey:t.transaction.from[0].add,$ptitle:a.title,$pimg:"",$ptext:a.comment,$pforum:a.forum,$plink:a.link,$pfulltx:r,$plitetx:n,$pts:t.transaction.ts,$pchildren:0,$pflagged:0,$pdeleted:0},e.next=13,this.app.storage.executeDatabase("\n        INSERT INTO \n            posts (\n                id,\n                thread_id,\n                parent_id, \n                type,\n\t\tpublickey,\n                title,\n                img,\n                text,\n\t\tforum,\n\t\tlink,\n                tx, \n                lite_tx, \n                ts,\n                children,\n                flagged,\n                deleted\n                ) \n            VALUES (\n                $pid ,\n\t        $pthread_id ,\n                $pparent_id ,\n                $ptype ,\n\t\t$ppublickey ,\n\t\t$ptitle ,\n\t\t$pimg ,\n\t\t$ptext ,\n\t\t$pforum ,\n\t\t$plink ,\n\t\t$pfulltx ,\n\t\t$plitetx ,\n\t\t$pts ,\n\t\t$pchildren ,\n\t\t$pflagged ,\n\t\t$pdeleted\n            );\n        ",i,"post");case 13:""!=a.link&&this.grabImage(a.link,t.transaction.sig);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"createEditPostTransaction",value:function(e,t,a,r,n,i){var s=this.app.wallet.createUnsignedTransaction();return s.msg.module="Post",s.msg.type="editpost",s.msg.title=e,s.msg.comment=t,s.msg.link=a,s.msg.forum=r,s.msg.images=n,s.msg.post_id=i,this.app.wallet.signTransaction(s)}},{key:"receiveEditPostTransaction",value:(_=i(regeneratorRuntime.mark((function e(t){var a,r,n,i,s,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.returnMessage(),r=JSON.stringify(t.transaction),(n=new p.transaction(JSON.parse(JSON.stringify(t.transaction)))).msg.comment="",n.msg.images=[],n=this.app.wallet.signTransaction(n),n=JSON.stringify(n.transaction),""!=a.title){e.next=9;break}return e.abrupt("return");case 9:return i=0,s="SELECT parent_id FROM posts WHERE id = $id",o={$id:a.post_id},e.next=14,this.app.storage.queryDatabase(s,o,"post");case 14:return(c=e.sent)&&c.length>0&&""===c[0].parent_id&&(i=1),s="SELECT publickey, children, flagged, deleted FROM posts WHERE id = $id",o={$id:a.post_id},e.next=20,this.app.storage.queryDatabase(s,o,"post");case 20:if(!(c=e.sent)){e.next=43;break}if(!(c.length>0)){e.next=43;break}if(c[0].children,c[0].publickey!==t.transaction.from[0].add){e.next=43;break}return s="DELETE FROM posts WHERE publickey = $author AND id = $id",o={$author:t.transaction.from[0].add,$id:a.post_id},e.next=29,this.app.storage.executeDatabase(s,o,"post");case 29:return s="\n        INSERT INTO \n            posts (\n                id,\n                thread_id,\n                parent_id, \n                type,\n\t\tpublickey,\n                title,\n                img,\n                text,\n\t\tforum,\n\t\tlink,\n                tx, \n                lite_tx, \n                ts,\n                children,\n                flagged,\n                deleted\n                ) \n            VALUES (\n                $pid ,\n\t        $pthread_id ,\n                $pparent_id ,\n                $ptype ,\n\t\t$ppublickey ,\n\t\t$ptitle ,\n\t\t$pimg ,\n\t\t$ptext ,\n\t\t$pforum ,\n\t\t$plink ,\n\t\t$pfulltx ,\n\t\t$plitetx ,\n\t\t$pts ,\n\t\t$pchildren ,\n\t\t$pflagged ,\n\t\t$pdeleted\n            );\n        ",o={$pid:t.transaction.sig,$pthread_id:t.transaction.sig,$pparent_id:"",$ptype:"post",$ppublickey:t.transaction.from[0].add,$ptitle:a.title,$pimg:"",$ptext:a.comment,$pforum:a.forum,$plink:a.link,$pfulltx:r,$plitetx:n,$pts:t.transaction.ts,$pchildren:c[0].children,$pflagged:c[0].flagged,$pdeleted:c[0].deleted},e.next=33,this.app.storage.executeDatabase(s,o,"post");case 33:return""!=a.link&&this.grabImage(a.link,t.transaction.sig),s="UPDATE posts SET parent_id = $new_parent_id WHERE parent_id = $old_parent_id",o={$new_parent_id:t.transaction.sig,$old_parent_id:a.post_id},e.next=38,this.app.storage.executeDatabase(s,o,"post");case 38:if(1!=i){e.next=43;break}return s="UPDATE posts SET thread_id = $new_parent_id WHERE thread_id = $old_parent_id",o={$new_parent_id:t.transaction.sig,$old_parent_id:a.post_id},e.next=43,this.app.storage.executeDatabase(s,o,"post");case 43:case"end":return e.stop()}}),e,this)}))),function(e){return _.apply(this,arguments)})},{key:"createEditTransaction",value:function(e,t){var a=this.app.wallet.createUnsignedTransaction();return a.msg.module="Post",a.msg.type="edit",a.msg.sig=e,a.msg.comment=t,this.app.wallet.signTransaction(a)}},{key:"receiveEditTransaction",value:(v=i(regeneratorRuntime.mark((function e(t){var a,r,n,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.returnMessage(),r=0,n="SELECT parent_id FROM posts WHERE id = $id",i={$id:a.sig},e.next=6,this.app.storage.queryDatabase(n,i,"post");case 6:return(s=e.sent)&&s.length>0&&""===s[0].parent_id&&(r=1),n="SELECT publickey FROM posts WHERE id = $id",i={$id:a.sig},e.next=12,this.app.storage.queryDatabase(n,i,"post");case 12:if(!(s=e.sent)){e.next=29;break}if(!(s.length>0)){e.next=29;break}if(s[0].publickey!==t.transaction.from[0].add){e.next=29;break}return n="UPDATE posts SET id = $newid, text = $text, tx = $tx WHERE publickey = $author AND id = $id",o={$id:a.sig,$text:a.comment,$tx:JSON.stringify(t.transaction),$author:t.transaction.from[0].add},c="$id",l=a.sig,c in o?Object.defineProperty(o,c,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[c]=l,i=o,e.next=20,this.app.storage.executeDatabase(n,i,"post");case 20:return n="UPDATE posts SET parent_id = $new_parent_id WHERE parent_id = $old_parent_id",i={$new_parent_id:t.transaction.sig,$old_parent_id:a.sig},e.next=24,this.app.storage.executeDatabase(n,i,"post");case 24:if(1!=r){e.next=29;break}return n="UPDATE posts SET thread_id = $new_parent_id WHERE thread_id = $old_parent_id",i={$new_parent_id:t.transaction.sig,$old_parent_id:a.sig},e.next=29,this.app.storage.executeDatabase(n,i,"post");case 29:case"end":return e.stop()}var o,c,l}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"createCommentTransaction",value:function(e,t){var a=this.app.wallet.createUnsignedTransaction();return a.msg.module="Post",a.msg.type="comment",a.msg.parent_id=e,a.msg.thread_id=e,a.msg.title="",a.msg.comment=t,a.msg.link="",a.msg.forum="",a.msg.images=[],this.app.wallet.signTransaction(a)}},{key:"receiveCommentTransaction",value:(y=i(regeneratorRuntime.mark((function e(t){var a,r,n,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.returnMessage(),r=JSON.stringify(t.transaction),(n=new p.transaction(JSON.parse(JSON.stringify(t.transaction)))).msg.comment="",n.msg.images=[],n=this.app.wallet.signTransaction(n),n=JSON.stringify(n.transaction),i="\n        INSERT INTO \n            posts (\n                id,\n                thread_id,\n                parent_id, \n                type,\n                publickey,\n                title,\n                text,\n                forum,\n                link,\n                img,\n                tx, \n                lite_tx, \n                ts,\n                children,\n                flagged,\n                deleted\n                ) \n            VALUES (\n                $pid ,\n                $pthread_id ,\n                $pparent_id ,\n                $ptype ,\n                $ppublickey ,\n                $ptitle ,\n                $ptext ,\n                $pforum ,\n                $pimg ,\n                $plink ,\n                $ptx ,\n                $plite_tx ,\n                $pts ,\n                $pchildren ,\n                $pflagged ,\n                $pdeleted\n            );\n        ",s={$pid:t.transaction.sig,$pthread_id:a.thread_id,$pparent_id:a.parent_id,$ptype:"comment",$ppublickey:t.transaction.from[0].add,$ptitle:"",$ptext:a.comment,$pforum:"",$pimg:"",$plink:"",$ptx:r,$plite_tx:n,$pts:t.transaction.ts,$pchildren:0,$pflagged:0,$pdeleted:0},e.next=11,this.app.storage.executeDatabase(i,s,"post");case 11:return i="UPDATE posts SET children = children+1 WHERE id = $pid",s={$pid:a.thread_id},e.next=15,this.app.storage.executeDatabase(i,s,"post");case 15:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)})},{key:"createReportTransaction",value:function(e,t){var a=this.app.wallet.createUnsignedTransaction();return a.msg.module="Post",a.msg.type="report",a.msg.post_id=e,this.app.wallet.signTransaction(a)}},{key:"receiveReportTransaction",value:(h=i(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.returnMessage(),r={$pid:a.post_id},e.next=5,this.app.storage.executeDatabase("\n        UPDATE posts SET flagged = 1 WHERE id = $pid\n    ",r,"post");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"createDeleteTransaction",value:function(e){var t=this.app.wallet.createUnsignedTransaction();return t.msg.module="Post",t.msg.type="delete",t.msg.post_id=e,this.app.wallet.signTransaction(t)}},{key:"receiveDeleteTransaction",value:(u=i(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.returnMessage(),r={$post_id:a.post_id,$author:t.transaction.from[0].add},e.next=5,this.app.storage.executeDatabase("\n        UPDATE \n          posts\n        SET\n          deleted = 1\n        WHERE\n          id = $post_id\n        AND\n          publickey = $author \n      ",r,"post");case 5:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"returnPosts",value:function(e){}}])&&s(t.prototype,r),n&&s(t,n),k}(h);e.exports=y},function(e,t,a){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,a){var r=a(519),n={input:!0,option:!0,optgroup:!0,select:!0,button:!0,datalist:!0,textarea:!0},i={tr:{tr:!0,th:!0,td:!0},th:{th:!0},td:{thead:!0,th:!0,td:!0},body:{head:!0,link:!0,script:!0},li:{li:!0},p:{p:!0},h1:{p:!0},h2:{p:!0},h3:{p:!0},h4:{p:!0},h5:{p:!0},h6:{p:!0},select:n,input:n,output:n,button:n,datalist:n,textarea:n,option:{option:!0},optgroup:{optgroup:!0}},s={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},o={__proto__:null,math:!0,svg:!0},c={__proto__:null,mi:!0,mo:!0,mn:!0,ms:!0,mtext:!0,"annotation-xml":!0,foreignObject:!0,desc:!0,title:!0},l=/\s|\//;function u(e,t){this._options=t||{},this._cbs=e||{},this._tagname="",this._attribname="",this._attribvalue="",this._attribs=null,this._stack=[],this._foreignContext=[],this.startIndex=0,this.endIndex=null,this._lowerCaseTagNames="lowerCaseTags"in this._options?!!this._options.lowerCaseTags:!this._options.xmlMode,this._lowerCaseAttributeNames="lowerCaseAttributeNames"in this._options?!!this._options.lowerCaseAttributeNames:!this._options.xmlMode,this._options.Tokenizer&&(r=this._options.Tokenizer),this._tokenizer=new r(this._options,this),this._cbs.onparserinit&&this._cbs.onparserinit(this)}a(1)(u,a(51).EventEmitter),u.prototype._updatePosition=function(e){null===this.endIndex?this._tokenizer._sectionStart<=e?this.startIndex=0:this.startIndex=this._tokenizer._sectionStart-e:this.startIndex=this.endIndex+1,this.endIndex=this._tokenizer.getAbsoluteIndex()},u.prototype.ontext=function(e){this._updatePosition(1),this.endIndex--,this._cbs.ontext&&this._cbs.ontext(e)},u.prototype.onopentagname=function(e){if(this._lowerCaseTagNames&&(e=e.toLowerCase()),this._tagname=e,!this._options.xmlMode&&e in i)for(var t;(t=this._stack[this._stack.length-1])in i[e];this.onclosetag(t));!this._options.xmlMode&&e in s||(this._stack.push(e),e in o?this._foreignContext.push(!0):e in c&&this._foreignContext.push(!1)),this._cbs.onopentagname&&this._cbs.onopentagname(e),this._cbs.onopentag&&(this._attribs={})},u.prototype.onopentagend=function(){this._updatePosition(1),this._attribs&&(this._cbs.onopentag&&this._cbs.onopentag(this._tagname,this._attribs),this._attribs=null),!this._options.xmlMode&&this._cbs.onclosetag&&this._tagname in s&&this._cbs.onclosetag(this._tagname),this._tagname=""},u.prototype.onclosetag=function(e){if(this._updatePosition(1),this._lowerCaseTagNames&&(e=e.toLowerCase()),(e in o||e in c)&&this._foreignContext.pop(),!this._stack.length||e in s&&!this._options.xmlMode)this._options.xmlMode||"br"!==e&&"p"!==e||(this.onopentagname(e),this._closeCurrentTag());else{var t=this._stack.lastIndexOf(e);if(-1!==t)if(this._cbs.onclosetag)for(t=this._stack.length-t;t--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=t;else"p"!==e||this._options.xmlMode||(this.onopentagname(e),this._closeCurrentTag())}},u.prototype.onselfclosingtag=function(){this._options.xmlMode||this._options.recognizeSelfClosing||this._foreignContext[this._foreignContext.length-1]?this._closeCurrentTag():this.onopentagend()},u.prototype._closeCurrentTag=function(){var e=this._tagname;this.onopentagend(),this._stack[this._stack.length-1]===e&&(this._cbs.onclosetag&&this._cbs.onclosetag(e),this._stack.pop())},u.prototype.onattribname=function(e){this._lowerCaseAttributeNames&&(e=e.toLowerCase()),this._attribname=e},u.prototype.onattribdata=function(e){this._attribvalue+=e},u.prototype.onattribend=function(){this._cbs.onattribute&&this._cbs.onattribute(this._attribname,this._attribvalue),this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue),this._attribname="",this._attribvalue=""},u.prototype._getInstructionName=function(e){var t=e.search(l),a=t<0?e:e.substr(0,t);return this._lowerCaseTagNames&&(a=a.toLowerCase()),a},u.prototype.ondeclaration=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("!"+t,"!"+e)}},u.prototype.onprocessinginstruction=function(e){if(this._cbs.onprocessinginstruction){var t=this._getInstructionName(e);this._cbs.onprocessinginstruction("?"+t,"?"+e)}},u.prototype.oncomment=function(e){this._updatePosition(4),this._cbs.oncomment&&this._cbs.oncomment(e),this._cbs.oncommentend&&this._cbs.oncommentend()},u.prototype.oncdata=function(e){this._updatePosition(1),this._options.xmlMode||this._options.recognizeCDATA?(this._cbs.oncdatastart&&this._cbs.oncdatastart(),this._cbs.ontext&&this._cbs.ontext(e),this._cbs.oncdataend&&this._cbs.oncdataend()):this.oncomment("[CDATA["+e+"]]")},u.prototype.onerror=function(e){this._cbs.onerror&&this._cbs.onerror(e)},u.prototype.onend=function(){if(this._cbs.onclosetag)for(var e=this._stack.length;e>0;this._cbs.onclosetag(this._stack[--e]));this._cbs.onend&&this._cbs.onend()},u.prototype.reset=function(){this._cbs.onreset&&this._cbs.onreset(),this._tokenizer.reset(),this._tagname="",this._attribname="",this._attribs=null,this._stack=[],this._cbs.onparserinit&&this._cbs.onparserinit(this)},u.prototype.parseComplete=function(e){this.reset(),this.end(e)},u.prototype.write=function(e){this._tokenizer.write(e)},u.prototype.end=function(e){this._tokenizer.end(e)},u.prototype.pause=function(){this._tokenizer.pause()},u.prototype.resume=function(){this._tokenizer.resume()},u.prototype.parseChunk=u.prototype.write,u.prototype.done=u.prototype.end,e.exports=u},function(e,t,a){e.exports=ge;var r=a(1217),n=a(1219),i=a(1220),s=a(1221),o=0,c=o++,l=o++,u=o++,d=o++,p=o++,h=o++,f=o++,m=o++,g=o++,b=o++,y=o++,v=o++,_=o++,w=o++,x=o++,k=o++,S=o++,P=o++,E=o++,C=o++,A=o++,M=o++,T=o++,j=o++,O=o++,D=o++,I=o++,R=o++,B=o++,q=o++,L=o++,N=o++,F=o++,U=o++,$=o++,z=o++,H=o++,G=o++,K=o++,W=o++,V=o++,Y=o++,J=o++,X=o++,Q=o++,Z=o++,ee=o++,te=o++,ae=o++,re=o++,ne=o++,ie=o++,se=o++,oe=o++,ce=o++,le=0,ue=le++,de=le++,pe=le++;function he(e){return" "===e||"\n"===e||"\t"===e||"\f"===e||"\r"===e}function fe(e,t,a){var r=e.toLowerCase();return e===r?function(e){e===r?this._state=t:(this._state=a,this._index--)}:function(n){n===r||n===e?this._state=t:(this._state=a,this._index--)}}function me(e,t){var a=e.toLowerCase();return function(r){r===a||r===e?this._state=t:(this._state=u,this._index--)}}function ge(e,t){this._state=c,this._buffer="",this._sectionStart=0,this._index=0,this._bufferOffset=0,this._baseState=c,this._special=ue,this._cbs=t,this._running=!0,this._ended=!1,this._xmlMode=!(!e||!e.xmlMode),this._decodeEntities=!(!e||!e.decodeEntities)}ge.prototype._stateText=function(e){"<"===e?(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._state=l,this._sectionStart=this._index):this._decodeEntities&&this._special===ue&&"&"===e&&(this._index>this._sectionStart&&this._cbs.ontext(this._getSection()),this._baseState=c,this._state=ne,this._sectionStart=this._index)},ge.prototype._stateBeforeTagName=function(e){"/"===e?this._state=p:"<"===e?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===e||this._special!==ue||he(e)?this._state=c:"!"===e?(this._state=x,this._sectionStart=this._index+1):"?"===e?(this._state=S,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==e&&"S"!==e?u:L,this._sectionStart=this._index)},ge.prototype._stateInTagName=function(e){("/"===e||">"===e||he(e))&&(this._emitToken("onopentagname"),this._state=m,this._index--)},ge.prototype._stateBeforeCloseingTagName=function(e){he(e)||(">"===e?this._state=c:this._special!==ue?"s"===e||"S"===e?this._state=N:(this._state=c,this._index--):(this._state=h,this._sectionStart=this._index))},ge.prototype._stateInCloseingTagName=function(e){(">"===e||he(e))&&(this._emitToken("onclosetag"),this._state=f,this._index--)},ge.prototype._stateAfterCloseingTagName=function(e){">"===e&&(this._state=c,this._sectionStart=this._index+1)},ge.prototype._stateBeforeAttributeName=function(e){">"===e?(this._cbs.onopentagend(),this._state=c,this._sectionStart=this._index+1):"/"===e?this._state=d:he(e)||(this._state=g,this._sectionStart=this._index)},ge.prototype._stateInSelfClosingTag=function(e){">"===e?(this._cbs.onselfclosingtag(),this._state=c,this._sectionStart=this._index+1):he(e)||(this._state=m,this._index--)},ge.prototype._stateInAttributeName=function(e){("="===e||"/"===e||">"===e||he(e))&&(this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=b,this._index--)},ge.prototype._stateAfterAttributeName=function(e){"="===e?this._state=y:"/"===e||">"===e?(this._cbs.onattribend(),this._state=m,this._index--):he(e)||(this._cbs.onattribend(),this._state=g,this._sectionStart=this._index)},ge.prototype._stateBeforeAttributeValue=function(e){'"'===e?(this._state=v,this._sectionStart=this._index+1):"'"===e?(this._state=_,this._sectionStart=this._index+1):he(e)||(this._state=w,this._sectionStart=this._index,this._index--)},ge.prototype._stateInAttributeValueDoubleQuotes=function(e){'"'===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=m):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=ne,this._sectionStart=this._index)},ge.prototype._stateInAttributeValueSingleQuotes=function(e){"'"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=m):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=ne,this._sectionStart=this._index)},ge.prototype._stateInAttributeValueNoQuotes=function(e){he(e)||">"===e?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=m,this._index--):this._decodeEntities&&"&"===e&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=ne,this._sectionStart=this._index)},ge.prototype._stateBeforeDeclaration=function(e){this._state="["===e?M:"-"===e?P:k},ge.prototype._stateInDeclaration=function(e){">"===e&&(this._cbs.ondeclaration(this._getSection()),this._state=c,this._sectionStart=this._index+1)},ge.prototype._stateInProcessingInstruction=function(e){">"===e&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=c,this._sectionStart=this._index+1)},ge.prototype._stateBeforeComment=function(e){"-"===e?(this._state=E,this._sectionStart=this._index+1):this._state=k},ge.prototype._stateInComment=function(e){"-"===e&&(this._state=C)},ge.prototype._stateAfterComment1=function(e){this._state="-"===e?A:E},ge.prototype._stateAfterComment2=function(e){">"===e?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=c,this._sectionStart=this._index+1):"-"!==e&&(this._state=E)},ge.prototype._stateBeforeCdata1=fe("C",T,k),ge.prototype._stateBeforeCdata2=fe("D",j,k),ge.prototype._stateBeforeCdata3=fe("A",O,k),ge.prototype._stateBeforeCdata4=fe("T",D,k),ge.prototype._stateBeforeCdata5=fe("A",I,k),ge.prototype._stateBeforeCdata6=function(e){"["===e?(this._state=R,this._sectionStart=this._index+1):(this._state=k,this._index--)},ge.prototype._stateInCdata=function(e){"]"===e&&(this._state=B)},ge.prototype._stateAfterCdata1=function(e){this._state="]"===e?q:R},ge.prototype._stateAfterCdata2=function(e){">"===e?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=c,this._sectionStart=this._index+1):"]"!==e&&(this._state=R)},ge.prototype._stateBeforeSpecial=function(e){"c"===e||"C"===e?this._state=F:"t"===e||"T"===e?this._state=J:(this._state=u,this._index--)},ge.prototype._stateBeforeSpecialEnd=function(e){this._special!==de||"c"!==e&&"C"!==e?this._special!==pe||"t"!==e&&"T"!==e?this._state=c:this._state=ee:this._state=G},ge.prototype._stateBeforeScript1=me("R",U),ge.prototype._stateBeforeScript2=me("I",$),ge.prototype._stateBeforeScript3=me("P",z),ge.prototype._stateBeforeScript4=me("T",H),ge.prototype._stateBeforeScript5=function(e){("/"===e||">"===e||he(e))&&(this._special=de),this._state=u,this._index--},ge.prototype._stateAfterScript1=fe("R",K,c),ge.prototype._stateAfterScript2=fe("I",W,c),ge.prototype._stateAfterScript3=fe("P",V,c),ge.prototype._stateAfterScript4=fe("T",Y,c),ge.prototype._stateAfterScript5=function(e){">"===e||he(e)?(this._special=ue,this._state=h,this._sectionStart=this._index-6,this._index--):this._state=c},ge.prototype._stateBeforeStyle1=me("Y",X),ge.prototype._stateBeforeStyle2=me("L",Q),ge.prototype._stateBeforeStyle3=me("E",Z),ge.prototype._stateBeforeStyle4=function(e){("/"===e||">"===e||he(e))&&(this._special=pe),this._state=u,this._index--},ge.prototype._stateAfterStyle1=fe("Y",te,c),ge.prototype._stateAfterStyle2=fe("L",ae,c),ge.prototype._stateAfterStyle3=fe("E",re,c),ge.prototype._stateAfterStyle4=function(e){">"===e||he(e)?(this._special=ue,this._state=h,this._sectionStart=this._index-5,this._index--):this._state=c},ge.prototype._stateBeforeEntity=fe("#",ie,se),ge.prototype._stateBeforeNumericEntity=fe("X",ce,oe),ge.prototype._parseNamedEntityStrict=function(){if(this._sectionStart+1<this._index){var e=this._buffer.substring(this._sectionStart+1,this._index),t=this._xmlMode?s:n;t.hasOwnProperty(e)&&(this._emitPartial(t[e]),this._sectionStart=this._index+1)}},ge.prototype._parseLegacyEntity=function(){var e=this._sectionStart+1,t=this._index-e;for(t>6&&(t=6);t>=2;){var a=this._buffer.substr(e,t);if(i.hasOwnProperty(a))return this._emitPartial(i[a]),void(this._sectionStart+=t+1);t--}},ge.prototype._stateInNamedEntity=function(e){";"===e?(this._parseNamedEntityStrict(),this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):(e<"a"||e>"z")&&(e<"A"||e>"Z")&&(e<"0"||e>"9")&&(this._xmlMode||this._sectionStart+1===this._index||(this._baseState!==c?"="!==e&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--)},ge.prototype._decodeNumericEntity=function(e,t){var a=this._sectionStart+e;if(a!==this._index){var n=this._buffer.substring(a,this._index),i=parseInt(n,t);this._emitPartial(r(i)),this._sectionStart=this._index}else this._sectionStart--;this._state=this._baseState},ge.prototype._stateInNumericEntity=function(e){";"===e?(this._decodeNumericEntity(2,10),this._sectionStart++):(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--)},ge.prototype._stateInHexEntity=function(e){";"===e?(this._decodeNumericEntity(3,16),this._sectionStart++):(e<"a"||e>"f")&&(e<"A"||e>"F")&&(e<"0"||e>"9")&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,16),this._index--)},ge.prototype._cleanup=function(){this._sectionStart<0?(this._buffer="",this._bufferOffset+=this._index,this._index=0):this._running&&(this._state===c?(this._sectionStart!==this._index&&this._cbs.ontext(this._buffer.substr(this._sectionStart)),this._buffer="",this._bufferOffset+=this._index,this._index=0):this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=this._sectionStart,this._bufferOffset+=this._sectionStart),this._sectionStart=0)},ge.prototype.write=function(e){this._ended&&this._cbs.onerror(Error(".write() after done!")),this._buffer+=e,this._parse()},ge.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var e=this._buffer.charAt(this._index);this._state===c?this._stateText(e):this._state===l?this._stateBeforeTagName(e):this._state===u?this._stateInTagName(e):this._state===p?this._stateBeforeCloseingTagName(e):this._state===h?this._stateInCloseingTagName(e):this._state===f?this._stateAfterCloseingTagName(e):this._state===d?this._stateInSelfClosingTag(e):this._state===m?this._stateBeforeAttributeName(e):this._state===g?this._stateInAttributeName(e):this._state===b?this._stateAfterAttributeName(e):this._state===y?this._stateBeforeAttributeValue(e):this._state===v?this._stateInAttributeValueDoubleQuotes(e):this._state===_?this._stateInAttributeValueSingleQuotes(e):this._state===w?this._stateInAttributeValueNoQuotes(e):this._state===x?this._stateBeforeDeclaration(e):this._state===k?this._stateInDeclaration(e):this._state===S?this._stateInProcessingInstruction(e):this._state===P?this._stateBeforeComment(e):this._state===E?this._stateInComment(e):this._state===C?this._stateAfterComment1(e):this._state===A?this._stateAfterComment2(e):this._state===M?this._stateBeforeCdata1(e):this._state===T?this._stateBeforeCdata2(e):this._state===j?this._stateBeforeCdata3(e):this._state===O?this._stateBeforeCdata4(e):this._state===D?this._stateBeforeCdata5(e):this._state===I?this._stateBeforeCdata6(e):this._state===R?this._stateInCdata(e):this._state===B?this._stateAfterCdata1(e):this._state===q?this._stateAfterCdata2(e):this._state===L?this._stateBeforeSpecial(e):this._state===N?this._stateBeforeSpecialEnd(e):this._state===F?this._stateBeforeScript1(e):this._state===U?this._stateBeforeScript2(e):this._state===$?this._stateBeforeScript3(e):this._state===z?this._stateBeforeScript4(e):this._state===H?this._stateBeforeScript5(e):this._state===G?this._stateAfterScript1(e):this._state===K?this._stateAfterScript2(e):this._state===W?this._stateAfterScript3(e):this._state===V?this._stateAfterScript4(e):this._state===Y?this._stateAfterScript5(e):this._state===J?this._stateBeforeStyle1(e):this._state===X?this._stateBeforeStyle2(e):this._state===Q?this._stateBeforeStyle3(e):this._state===Z?this._stateBeforeStyle4(e):this._state===ee?this._stateAfterStyle1(e):this._state===te?this._stateAfterStyle2(e):this._state===ae?this._stateAfterStyle3(e):this._state===re?this._stateAfterStyle4(e):this._state===ne?this._stateBeforeEntity(e):this._state===ie?this._stateBeforeNumericEntity(e):this._state===se?this._stateInNamedEntity(e):this._state===oe?this._stateInNumericEntity(e):this._state===ce?this._stateInHexEntity(e):this._cbs.onerror(Error("unknown _state"),this._state),this._index++}this._cleanup()},ge.prototype.pause=function(){this._running=!1},ge.prototype.resume=function(){this._running=!0,this._index<this._buffer.length&&this._parse(),this._ended&&this._finish()},ge.prototype.end=function(e){this._ended&&this._cbs.onerror(Error(".end() after done!")),e&&this.write(e),this._ended=!0,this._running&&this._finish()},ge.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData(),this._cbs.onend()},ge.prototype._handleTrailingData=function(){var e=this._buffer.substr(this._sectionStart);this._state===R||this._state===B||this._state===q?this._cbs.oncdata(e):this._state===E||this._state===C||this._state===A?this._cbs.oncomment(e):this._state!==se||this._xmlMode?this._state!==oe||this._xmlMode?this._state!==ce||this._xmlMode?this._state!==u&&this._state!==m&&this._state!==y&&this._state!==b&&this._state!==g&&this._state!==_&&this._state!==v&&this._state!==w&&this._state!==h&&this._cbs.ontext(e):(this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData())):(this._parseLegacyEntity(),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData()))},ge.prototype.reset=function(){ge.call(this,{xmlMode:this._xmlMode,decodeEntities:this._decodeEntities},this._cbs)},ge.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index},ge.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)},ge.prototype._emitToken=function(e){this._cbs[e](this._getSection()),this._sectionStart=-1},ge.prototype._emitPartial=function(e){this._baseState!==c?this._cbs.onattribdata(e):this._cbs.ontext(e)}},function(e,t,a){var r=a(100),n=/\s+/g,i=a(521),s=a(1222);function o(e,t,a){"object"==typeof e?(a=t,t=e,e=null):"function"==typeof t&&(a=t,t=c),this._callback=e,this._options=t||c,this._elementCB=a,this.dom=[],this._done=!1,this._tagStack=[],this._parser=this._parser||null}var c={normalizeWhitespace:!1,withStartIndices:!1,withEndIndices:!1};o.prototype.onparserinit=function(e){this._parser=e},o.prototype.onreset=function(){o.call(this,this._callback,this._options,this._elementCB)},o.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this._handleCallback(null))},o.prototype._handleCallback=o.prototype.onerror=function(e){if("function"==typeof this._callback)this._callback(e,this.dom);else if(e)throw e},o.prototype.onclosetag=function(){var e=this._tagStack.pop();this._options.withEndIndices&&e&&(e.endIndex=this._parser.endIndex),this._elementCB&&this._elementCB(e)},o.prototype._createDomElement=function(e){if(!this._options.withDomLvl1)return e;var t;for(var a in t="tag"===e.type?Object.create(s):Object.create(i),e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t},o.prototype._addDomElement=function(e){var t=this._tagStack[this._tagStack.length-1],a=t?t.children:this.dom,r=a[a.length-1];e.next=null,this._options.withStartIndices&&(e.startIndex=this._parser.startIndex),this._options.withEndIndices&&(e.endIndex=this._parser.endIndex),r?(e.prev=r,r.next=e):e.prev=null,a.push(e),e.parent=t||null},o.prototype.onopentag=function(e,t){var a={type:"script"===e?r.Script:"style"===e?r.Style:r.Tag,name:e,attribs:t,children:[]},n=this._createDomElement(a);this._addDomElement(n),this._tagStack.push(n)},o.prototype.ontext=function(e){var t,a=this._options.normalizeWhitespace||this._options.ignoreWhitespace;if(!this._tagStack.length&&this.dom.length&&(t=this.dom[this.dom.length-1]).type===r.Text)a?t.data=(t.data+e).replace(n," "):t.data+=e;else if(this._tagStack.length&&(t=this._tagStack[this._tagStack.length-1])&&(t=t.children[t.children.length-1])&&t.type===r.Text)a?t.data=(t.data+e).replace(n," "):t.data+=e;else{a&&(e=e.replace(n," "));var i=this._createDomElement({data:e,type:r.Text});this._addDomElement(i)}},o.prototype.oncomment=function(e){var t=this._tagStack[this._tagStack.length-1];if(t&&t.type===r.Comment)t.data+=e;else{var a={data:e,type:r.Comment},n=this._createDomElement(a);this._addDomElement(n),this._tagStack.push(n)}},o.prototype.oncdatastart=function(){var e={children:[{data:"",type:r.Text}],type:r.CDATA},t=this._createDomElement(e);this._addDomElement(t),this._tagStack.push(t)},o.prototype.oncommentend=o.prototype.oncdataend=function(){this._tagStack.pop()},o.prototype.onprocessinginstruction=function(e,t){var a=this._createDomElement({name:e,data:t,type:r.Directive});this._addDomElement(a)},e.exports=o},function(e,t){var a=e.exports={get firstChild(){var e=this.children;return e&&e[0]||null},get lastChild(){var e=this.children;return e&&e[e.length-1]||null},get nodeType(){return n[this.type]||n.element}},r={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"},n={element:1,text:3,cdata:4,comment:8};Object.keys(r).forEach((function(e){var t=r[e];Object.defineProperty(a,e,{get:function(){return this[t]||null},set:function(e){return this[t]=e,e}})}))},function(e,t,a){var r=e.exports;[a(1224),a(1232),a(1233),a(1234),a(1235),a(1236)].forEach((function(e){Object.keys(e).forEach((function(t){r[t]=e[t].bind(r)}))}))},function(e,t,a){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(524)),i=r(a(1228)),s=r(a(525)),o=r(a(1229));function c(e){var t=Object.keys(e).join("|"),a=u(e),r=new RegExp("&(?:"+(t+="|#[xX][\\da-fA-F]+|#\\d+")+");","g");return function(e){return String(e).replace(r,a)}}t.decodeXML=c(s.default),t.decodeHTMLStrict=c(n.default);var l=function(e,t){return e<t?1:-1};function u(e){return function(t){return"#"===t.charAt(1)?"X"===t.charAt(2)||"x"===t.charAt(2)?o.default(parseInt(t.substr(3),16)):o.default(parseInt(t.substr(2),10)):e[t.slice(1,-1)]}}t.decodeHTML=function(){for(var e=Object.keys(i.default).sort(l),t=Object.keys(n.default).sort(l),a=0,r=0;a<t.length;a++)e[r]===t[a]?(t[a]+=";?",r++):t[a]+=";";var s=new RegExp("&(?:"+t.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),o=u(n.default);function c(e){return";"!==e.substr(-1)&&(e+=";"),o(e)}return function(e){return String(e).replace(s,c)}}()},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},function(e){e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(e,t,a){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=c(r(a(525)).default),i=l(n);t.encodeXML=f(n,i);var s=c(r(a(524)).default),o=l(s);function c(e){return Object.keys(e).sort().reduce((function(t,a){return t[e[a]]="&"+a+";",t}),{})}function l(e){var t=[],a=[];return Object.keys(e).forEach((function(e){return 1===e.length?t.push("\\"+e):a.push(e)})),a.unshift("["+t.join("")+"]"),new RegExp(a.join("|"),"g")}t.encodeHTML=f(s,o);var u=/[^\0-\x7F]/g,d=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;function p(e){return"&#x"+e.charCodeAt(0).toString(16).toUpperCase()+";"}function h(e,t){return"&#x"+(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)-56320+65536).toString(16).toUpperCase()+";"}function f(e,t){return function(a){return a.replace(t,(function(t){return e[t]})).replace(d,h).replace(u,p)}}var m=l(n);t.escape=function(e){return e.replace(m,p).replace(d,h).replace(u,p)}},function(e,t,a){e.exports=o;var r=a(518),n=a(1238).Writable,i=a(75).StringDecoder,s=a(9).Buffer;function o(e,t){var a=this._parser=new r(e,t),s=this._decoder=new i;n.call(this,{decodeStrings:!1}),this.once("finish",(function(){a.end(s.end())}))}a(1)(o,n),o.prototype._write=function(e,t,a){e instanceof s&&(e=this._decoder.write(e)),this._parser.write(e),a()}},function(e,t){var a={};function r(e,t){this.count=e,this.dataCodewords=t,this.__defineGetter__("Count",(function(){return this.count})),this.__defineGetter__("DataCodewords",(function(){return this.dataCodewords}))}function n(e,t,a){this.ecCodewordsPerBlock=e,this.ecBlocks=a?new Array(t,a):new Array(t),this.__defineGetter__("ECCodewordsPerBlock",(function(){return this.ecCodewordsPerBlock})),this.__defineGetter__("TotalECCodewords",(function(){return this.ecCodewordsPerBlock*this.NumBlocks})),this.__defineGetter__("NumBlocks",(function(){for(var e=0,t=0;t<this.ecBlocks.length;t++)e+=this.ecBlocks[t].length;return e})),this.getECBlocks=function(){return this.ecBlocks}}function i(e,t,a,r,n,i){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=new Array(a,r,n,i);for(var s=0,o=a.ECCodewordsPerBlock,c=a.getECBlocks(),l=0;l<c.length;l++){var u=c[l];s+=u.Count*(u.DataCodewords+o)}this.totalCodewords=s,this.__defineGetter__("VersionNumber",(function(){return this.versionNumber})),this.__defineGetter__("AlignmentPatternCenters",(function(){return this.alignmentPatternCenters})),this.__defineGetter__("TotalCodewords",(function(){return this.totalCodewords})),this.__defineGetter__("DimensionForVersion",(function(){return 17+4*this.versionNumber})),this.buildFunctionPattern=function(){var e=this.DimensionForVersion,t=new y(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var a=this.alignmentPatternCenters.length,r=0;r<a;r++)for(var n=this.alignmentPatternCenters[r]-2,i=0;i<a;i++)0==r&&(0==i||i==a-1)||r==a-1&&0==i||t.setRegion(this.alignmentPatternCenters[i]-2,n,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},this.getECBlocksForLevel=function(e){return this.ecBlocks[e.ordinal()]}}function s(e,t,a,r,n,i,o,c,l){this.a11=e,this.a12=r,this.a13=o,this.a21=t,this.a22=n,this.a23=c,this.a31=a,this.a32=i,this.a33=l,this.transformPoints1=function(e){for(var t=e.length,a=this.a11,r=this.a12,n=this.a13,i=this.a21,s=this.a22,o=this.a23,c=this.a31,l=this.a32,u=this.a33,d=0;d<t;d+=2){var p=e[d],h=e[d+1],f=n*p+o*h+u;e[d]=(a*p+i*h+c)/f,e[d+1]=(r*p+s*h+l)/f}},this.transformPoints2=function(e,t){for(var a=e.length,r=0;r<a;r++){var n=e[r],i=t[r],s=this.a13*n+this.a23*i+this.a33;e[r]=(this.a11*n+this.a21*i+this.a31)/s,t[r]=(this.a12*n+this.a22*i+this.a32)/s}},this.buildAdjoint=function(){return new s(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},this.times=function(e){return new s(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}function o(e,t){this.bits=e,this.points=t}function c(e){this.image=e,this.resultPointCallback=null,this.sizeOfBlackWhiteBlackRun=function(e,t,a,r){var n=Math.abs(r-t)>Math.abs(a-e);if(n){var i=e;e=t,t=i,i=a,a=r,r=i}for(var s=Math.abs(a-e),o=Math.abs(r-t),c=-s>>1,l=t<r?1:-1,u=e<a?1:-1,d=0,p=e,h=t;p!=a;p+=u){var f=n?h:p,m=n?p:h;if(1==d?this.image[f+m*P.width]&&d++:this.image[f+m*P.width]||d++,3==d){var g=p-e,b=h-t;return Math.sqrt(g*g+b*b)}if((c+=o)>0){if(h==r)break;h+=l,c-=s}}var y=a-e,v=r-t;return Math.sqrt(y*y+v*v)},this.sizeOfBlackWhiteBlackRunBothWays=function(e,t,a,r){var n=this.sizeOfBlackWhiteBlackRun(e,t,a,r),i=1,s=e-(a-e);s<0?(i=e/(e-s),s=0):s>=P.width&&(i=(P.width-1-e)/(s-e),s=P.width-1);var o=Math.floor(t-(r-t)*i);return i=1,o<0?(i=t/(t-o),o=0):o>=P.height&&(i=(P.height-1-t)/(o-t),o=P.height-1),s=Math.floor(e+(s-e)*i),(n+=this.sizeOfBlackWhiteBlackRun(e,t,s,o))-1},this.calculateModuleSizeOneWay=function(e,t){var a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.X),Math.floor(e.Y),Math.floor(t.X),Math.floor(t.Y)),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.X),Math.floor(t.Y),Math.floor(e.X),Math.floor(e.Y));return isNaN(a)?r/7:isNaN(r)?a/7:(a+r)/14},this.calculateModuleSize=function(e,t,a){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,a))/2},this.distance=function(e,t){var a=e.X-t.X,r=e.Y-t.Y;return Math.sqrt(a*a+r*r)},this.computeDimension=function(e,t,a,r){var n=7+(Math.round(this.distance(e,t)/r)+Math.round(this.distance(e,a)/r)>>1);switch(3&n){case 0:n++;break;case 2:n--;break;case 3:throw"Error"}return n},this.findAlignmentInRegion=function(e,t,a,r){var n=Math.floor(r*e),i=Math.max(0,t-n),s=Math.min(P.width-1,t+n);if(s-i<3*e)throw"Error";var o=Math.max(0,a-n),c=Math.min(P.height-1,a+n);return new j(this.image,i,o,s-i,c-o,e,this.resultPointCallback).find()},this.createTransform=function(e,t,a,r,n){var i,o,c,l,u=n-3.5;return null!=r?(i=r.X,o=r.Y,c=l=u-3):(i=t.X-e.X+a.X,o=t.Y-e.Y+a.Y,c=l=u),s.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,c,l,3.5,u,e.X,e.Y,t.X,t.Y,i,o,a.X,a.Y)},this.sampleGrid=function(e,t,r){return a.sampleGrid3(e,r,t)},this.processFinderPatternInfo=function(e){var t=e.TopLeft,a=e.TopRight,r=e.BottomLeft,n=this.calculateModuleSize(t,a,r);if(n<1)throw"Error";var s=this.computeDimension(t,a,r,n),c=i.getProvisionalVersionForDimension(s),l=c.DimensionForVersion-7,u=null;if(c.AlignmentPatternCenters.length>0)for(var d=a.X-t.X+r.X,p=a.Y-t.Y+r.Y,h=1-3/l,f=Math.floor(t.X+h*(d-t.X)),m=Math.floor(t.Y+h*(p-t.Y)),g=4;g<=16;g<<=1){u=this.findAlignmentInRegion(n,f,m,g);break}var b=this.createTransform(t,a,r,u,s);return new o(this.sampleGrid(this.image,b,s),null==u?new Array(r,t,a):new Array(r,t,a,u))},this.detect=function(){var e=(new M).findFinderPattern(this.image);return this.processFinderPatternInfo(e)}}a.checkAndNudgePoints=function(e,t){for(var a=P.width,r=P.height,n=!0,i=0;i<t.length&&n;i+=2){var s=Math.floor(t[i]),o=Math.floor(t[i+1]);if(s<-1||s>a||o<-1||o>r)throw"Error.checkAndNudgePoints ";n=!1,-1==s?(t[i]=0,n=!0):s==a&&(t[i]=a-1,n=!0),-1==o?(t[i+1]=0,n=!0):o==r&&(t[i+1]=r-1,n=!0)}n=!0;for(i=t.length-2;i>=0&&n;i-=2){s=Math.floor(t[i]),o=Math.floor(t[i+1]);if(s<-1||s>a||o<-1||o>r)throw"Error.checkAndNudgePoints ";n=!1,-1==s?(t[i]=0,n=!0):s==a&&(t[i]=a-1,n=!0),-1==o?(t[i+1]=0,n=!0):o==r&&(t[i+1]=r-1,n=!0)}},a.sampleGrid3=function(e,t,r){for(var n=new y(t),i=new Array(t<<1),s=0;s<t;s++){for(var o=i.length,c=s+.5,l=0;l<o;l+=2)i[l]=.5+(l>>1),i[l+1]=c;r.transformPoints1(i),a.checkAndNudgePoints(e,i);try{for(l=0;l<o;l+=2){e[Math.floor(i[l])+P.width*Math.floor(i[l+1])]&&n.set_Renamed(l>>1,s)}}catch(e){throw"Error.checkAndNudgePoints"}}return n},a.sampleGridx=function(e,t,r,n,i,o,c,l,u,d,p,h,f,m,g,b,y,v){var _=s.quadrilateralToQuadrilateral(r,n,i,o,c,l,u,d,p,h,f,m,g,b,y,v);return a.sampleGrid3(e,t,_)},i.VERSION_DECODE_INFO=new Array(31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017),i.VERSIONS=new Array(new i(1,new Array,new n(7,new r(1,19)),new n(10,new r(1,16)),new n(13,new r(1,13)),new n(17,new r(1,9))),new i(2,new Array(6,18),new n(10,new r(1,34)),new n(16,new r(1,28)),new n(22,new r(1,22)),new n(28,new r(1,16))),new i(3,new Array(6,22),new n(15,new r(1,55)),new n(26,new r(1,44)),new n(18,new r(2,17)),new n(22,new r(2,13))),new i(4,new Array(6,26),new n(20,new r(1,80)),new n(18,new r(2,32)),new n(26,new r(2,24)),new n(16,new r(4,9))),new i(5,new Array(6,30),new n(26,new r(1,108)),new n(24,new r(2,43)),new n(18,new r(2,15),new r(2,16)),new n(22,new r(2,11),new r(2,12))),new i(6,new Array(6,34),new n(18,new r(2,68)),new n(16,new r(4,27)),new n(24,new r(4,19)),new n(28,new r(4,15))),new i(7,new Array(6,22,38),new n(20,new r(2,78)),new n(18,new r(4,31)),new n(18,new r(2,14),new r(4,15)),new n(26,new r(4,13),new r(1,14))),new i(8,new Array(6,24,42),new n(24,new r(2,97)),new n(22,new r(2,38),new r(2,39)),new n(22,new r(4,18),new r(2,19)),new n(26,new r(4,14),new r(2,15))),new i(9,new Array(6,26,46),new n(30,new r(2,116)),new n(22,new r(3,36),new r(2,37)),new n(20,new r(4,16),new r(4,17)),new n(24,new r(4,12),new r(4,13))),new i(10,new Array(6,28,50),new n(18,new r(2,68),new r(2,69)),new n(26,new r(4,43),new r(1,44)),new n(24,new r(6,19),new r(2,20)),new n(28,new r(6,15),new r(2,16))),new i(11,new Array(6,30,54),new n(20,new r(4,81)),new n(30,new r(1,50),new r(4,51)),new n(28,new r(4,22),new r(4,23)),new n(24,new r(3,12),new r(8,13))),new i(12,new Array(6,32,58),new n(24,new r(2,92),new r(2,93)),new n(22,new r(6,36),new r(2,37)),new n(26,new r(4,20),new r(6,21)),new n(28,new r(7,14),new r(4,15))),new i(13,new Array(6,34,62),new n(26,new r(4,107)),new n(22,new r(8,37),new r(1,38)),new n(24,new r(8,20),new r(4,21)),new n(22,new r(12,11),new r(4,12))),new i(14,new Array(6,26,46,66),new n(30,new r(3,115),new r(1,116)),new n(24,new r(4,40),new r(5,41)),new n(20,new r(11,16),new r(5,17)),new n(24,new r(11,12),new r(5,13))),new i(15,new Array(6,26,48,70),new n(22,new r(5,87),new r(1,88)),new n(24,new r(5,41),new r(5,42)),new n(30,new r(5,24),new r(7,25)),new n(24,new r(11,12),new r(7,13))),new i(16,new Array(6,26,50,74),new n(24,new r(5,98),new r(1,99)),new n(28,new r(7,45),new r(3,46)),new n(24,new r(15,19),new r(2,20)),new n(30,new r(3,15),new r(13,16))),new i(17,new Array(6,30,54,78),new n(28,new r(1,107),new r(5,108)),new n(28,new r(10,46),new r(1,47)),new n(28,new r(1,22),new r(15,23)),new n(28,new r(2,14),new r(17,15))),new i(18,new Array(6,30,56,82),new n(30,new r(5,120),new r(1,121)),new n(26,new r(9,43),new r(4,44)),new n(28,new r(17,22),new r(1,23)),new n(28,new r(2,14),new r(19,15))),new i(19,new Array(6,30,58,86),new n(28,new r(3,113),new r(4,114)),new n(26,new r(3,44),new r(11,45)),new n(26,new r(17,21),new r(4,22)),new n(26,new r(9,13),new r(16,14))),new i(20,new Array(6,34,62,90),new n(28,new r(3,107),new r(5,108)),new n(26,new r(3,41),new r(13,42)),new n(30,new r(15,24),new r(5,25)),new n(28,new r(15,15),new r(10,16))),new i(21,new Array(6,28,50,72,94),new n(28,new r(4,116),new r(4,117)),new n(26,new r(17,42)),new n(28,new r(17,22),new r(6,23)),new n(30,new r(19,16),new r(6,17))),new i(22,new Array(6,26,50,74,98),new n(28,new r(2,111),new r(7,112)),new n(28,new r(17,46)),new n(30,new r(7,24),new r(16,25)),new n(24,new r(34,13))),new i(23,new Array(6,30,54,74,102),new n(30,new r(4,121),new r(5,122)),new n(28,new r(4,47),new r(14,48)),new n(30,new r(11,24),new r(14,25)),new n(30,new r(16,15),new r(14,16))),new i(24,new Array(6,28,54,80,106),new n(30,new r(6,117),new r(4,118)),new n(28,new r(6,45),new r(14,46)),new n(30,new r(11,24),new r(16,25)),new n(30,new r(30,16),new r(2,17))),new i(25,new Array(6,32,58,84,110),new n(26,new r(8,106),new r(4,107)),new n(28,new r(8,47),new r(13,48)),new n(30,new r(7,24),new r(22,25)),new n(30,new r(22,15),new r(13,16))),new i(26,new Array(6,30,58,86,114),new n(28,new r(10,114),new r(2,115)),new n(28,new r(19,46),new r(4,47)),new n(28,new r(28,22),new r(6,23)),new n(30,new r(33,16),new r(4,17))),new i(27,new Array(6,34,62,90,118),new n(30,new r(8,122),new r(4,123)),new n(28,new r(22,45),new r(3,46)),new n(30,new r(8,23),new r(26,24)),new n(30,new r(12,15),new r(28,16))),new i(28,new Array(6,26,50,74,98,122),new n(30,new r(3,117),new r(10,118)),new n(28,new r(3,45),new r(23,46)),new n(30,new r(4,24),new r(31,25)),new n(30,new r(11,15),new r(31,16))),new i(29,new Array(6,30,54,78,102,126),new n(30,new r(7,116),new r(7,117)),new n(28,new r(21,45),new r(7,46)),new n(30,new r(1,23),new r(37,24)),new n(30,new r(19,15),new r(26,16))),new i(30,new Array(6,26,52,78,104,130),new n(30,new r(5,115),new r(10,116)),new n(28,new r(19,47),new r(10,48)),new n(30,new r(15,24),new r(25,25)),new n(30,new r(23,15),new r(25,16))),new i(31,new Array(6,30,56,82,108,134),new n(30,new r(13,115),new r(3,116)),new n(28,new r(2,46),new r(29,47)),new n(30,new r(42,24),new r(1,25)),new n(30,new r(23,15),new r(28,16))),new i(32,new Array(6,34,60,86,112,138),new n(30,new r(17,115)),new n(28,new r(10,46),new r(23,47)),new n(30,new r(10,24),new r(35,25)),new n(30,new r(19,15),new r(35,16))),new i(33,new Array(6,30,58,86,114,142),new n(30,new r(17,115),new r(1,116)),new n(28,new r(14,46),new r(21,47)),new n(30,new r(29,24),new r(19,25)),new n(30,new r(11,15),new r(46,16))),new i(34,new Array(6,34,62,90,118,146),new n(30,new r(13,115),new r(6,116)),new n(28,new r(14,46),new r(23,47)),new n(30,new r(44,24),new r(7,25)),new n(30,new r(59,16),new r(1,17))),new i(35,new Array(6,30,54,78,102,126,150),new n(30,new r(12,121),new r(7,122)),new n(28,new r(12,47),new r(26,48)),new n(30,new r(39,24),new r(14,25)),new n(30,new r(22,15),new r(41,16))),new i(36,new Array(6,24,50,76,102,128,154),new n(30,new r(6,121),new r(14,122)),new n(28,new r(6,47),new r(34,48)),new n(30,new r(46,24),new r(10,25)),new n(30,new r(2,15),new r(64,16))),new i(37,new Array(6,28,54,80,106,132,158),new n(30,new r(17,122),new r(4,123)),new n(28,new r(29,46),new r(14,47)),new n(30,new r(49,24),new r(10,25)),new n(30,new r(24,15),new r(46,16))),new i(38,new Array(6,32,58,84,110,136,162),new n(30,new r(4,122),new r(18,123)),new n(28,new r(13,46),new r(32,47)),new n(30,new r(48,24),new r(14,25)),new n(30,new r(42,15),new r(32,16))),new i(39,new Array(6,26,54,82,110,138,166),new n(30,new r(20,117),new r(4,118)),new n(28,new r(40,47),new r(7,48)),new n(30,new r(43,24),new r(22,25)),new n(30,new r(10,15),new r(67,16))),new i(40,new Array(6,30,58,86,114,142,170),new n(30,new r(19,118),new r(6,119)),new n(28,new r(18,47),new r(31,48)),new n(30,new r(34,24),new r(34,25)),new n(30,new r(20,15),new r(61,16)))),i.getVersionForNumber=function(e){if(e<1||e>40)throw"ArgumentException";return i.VERSIONS[e-1]},i.getProvisionalVersionForDimension=function(e){if(e%4!=1)throw"Error getProvisionalVersionForDimension";try{return i.getVersionForNumber(e-17>>2)}catch(e){throw"Error getVersionForNumber"}},i.decodeVersionInformation=function(e){for(var t=4294967295,a=0,r=0;r<i.VERSION_DECODE_INFO.length;r++){var n=i.VERSION_DECODE_INFO[r];if(n==e)return this.getVersionForNumber(r+7);var s=d.numBitsDiffering(e,n);s<t&&(a=r+7,t=s)}return t<=3?this.getVersionForNumber(a):null},s.quadrilateralToQuadrilateral=function(e,t,a,r,n,i,s,o,c,l,u,d,p,h,f,m){var g=this.quadrilateralToSquare(e,t,a,r,n,i,s,o);return this.squareToQuadrilateral(c,l,u,d,p,h,f,m).times(g)},s.squareToQuadrilateral=function(e,t,a,r,n,i,o,c){var l=c-i,u=t-r+i-c;if(0==l&&0==u)return new s(a-e,n-a,e,r-t,i-r,t,0,0,1);var d=a-n,p=o-n,h=e-a+n-o,f=r-i,m=d*l-p*f,g=(h*l-p*u)/m,b=(d*u-h*f)/m;return new s(a-e+g*a,o-e+b*o,e,r-t+g*r,c-t+b*c,t,g,b,1)},s.quadrilateralToSquare=function(e,t,a,r,n,i,s,o){return this.squareToQuadrilateral(e,t,a,r,n,i,s,o).buildAdjoint()};var l=new Array(new Array(21522,0),new Array(20773,1),new Array(24188,2),new Array(23371,3),new Array(17913,4),new Array(16590,5),new Array(20375,6),new Array(19104,7),new Array(30660,8),new Array(29427,9),new Array(32170,10),new Array(30877,11),new Array(26159,12),new Array(25368,13),new Array(27713,14),new Array(26998,15),new Array(5769,16),new Array(5054,17),new Array(7399,18),new Array(6608,19),new Array(1890,20),new Array(597,21),new Array(3340,22),new Array(2107,23),new Array(13663,24),new Array(12392,25),new Array(16177,26),new Array(14854,27),new Array(9396,28),new Array(8579,29),new Array(11994,30),new Array(11245,31)),u=new Array(0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4);function d(e){this.errorCorrectionLevel=p.forBits(e>>3&3),this.dataMask=7&e,this.__defineGetter__("ErrorCorrectionLevel",(function(){return this.errorCorrectionLevel})),this.__defineGetter__("DataMask",(function(){return this.dataMask})),this.GetHashCode=function(){return this.errorCorrectionLevel.ordinal()<<3|this.dataMask},this.Equals=function(e){var t=e;return this.errorCorrectionLevel==t.errorCorrectionLevel&&this.dataMask==t.dataMask}}function p(e,t,a){this.ordinal_Renamed_Field=e,this.bits=t,this.name=a,this.__defineGetter__("Bits",(function(){return this.bits})),this.__defineGetter__("Name",(function(){return this.name})),this.ordinal=function(){return this.ordinal_Renamed_Field}}d.numBitsDiffering=function(e,t){return u[15&(e^=t)]+u[15&E(e,4)]+u[15&E(e,8)]+u[15&E(e,12)]+u[15&E(e,16)]+u[15&E(e,20)]+u[15&E(e,24)]+u[15&E(e,28)]},d.decodeFormatInformation=function(e){var t=d.doDecodeFormatInformation(e);return null!=t?t:d.doDecodeFormatInformation(21522^e)},d.doDecodeFormatInformation=function(e){for(var t=4294967295,a=0,r=0;r<l.length;r++){var n=l[r],i=n[0];if(i==e)return new d(n[1]);var s=this.numBitsDiffering(e,i);s<t&&(a=n[1],t=s)}return t<=3?new d(a):null},p.forBits=function(e){if(e<0||e>=b.length)throw"ArgumentException";return b[e]};var h=new p(0,1,"L"),f=new p(1,0,"M"),m=new p(2,3,"Q"),g=new p(3,2,"H"),b=new Array(f,h,g,m);function y(e,t){if(t||(t=e),e<1||t<1)throw"Both dimensions must be greater than 0";this.width=e,this.height=t;var a=e>>5;0!=(31&e)&&a++,this.rowSize=a,this.bits=new Array(a*t);for(var r=0;r<this.bits.length;r++)this.bits[r]=0;this.__defineGetter__("Width",(function(){return this.width})),this.__defineGetter__("Height",(function(){return this.height})),this.__defineGetter__("Dimension",(function(){if(this.width!=this.height)throw"Can't call getDimension() on a non-square matrix";return this.width})),this.get_Renamed=function(e,t){var a=t*this.rowSize+(e>>5);return 0!=(1&E(this.bits[a],31&e))},this.set_Renamed=function(e,t){var a=t*this.rowSize+(e>>5);this.bits[a]|=1<<(31&e)},this.flip=function(e,t){var a=t*this.rowSize+(e>>5);this.bits[a]^=1<<(31&e)},this.clear=function(){for(var e=this.bits.length,t=0;t<e;t++)this.bits[t]=0},this.setRegion=function(e,t,a,r){if(t<0||e<0)throw"Left and top must be nonnegative";if(r<1||a<1)throw"Height and width must be at least 1";var n=e+a,i=t+r;if(i>this.height||n>this.width)throw"The region must fit inside the matrix";for(var s=t;s<i;s++)for(var o=s*this.rowSize,c=e;c<n;c++)this.bits[o+(c>>5)]|=1<<(31&c)}}function v(e,t){this.numDataCodewords=e,this.codewords=t,this.__defineGetter__("NumDataCodewords",(function(){return this.numDataCodewords})),this.__defineGetter__("Codewords",(function(){return this.codewords}))}function _(e){var t=e.Dimension;if(t<21||1!=(3&t))throw"Error BitMatrixParser";this.bitMatrix=e,this.parsedVersion=null,this.parsedFormatInfo=null,this.copyBit=function(e,t,a){return this.bitMatrix.get_Renamed(e,t)?a<<1|1:a<<1},this.readFormatInformation=function(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var a=5;a>=0;a--)e=this.copyBit(8,a,e);if(this.parsedFormatInfo=d.decodeFormatInformation(e),null!=this.parsedFormatInfo)return this.parsedFormatInfo;var r=this.bitMatrix.Dimension;e=0;var n=r-8;for(t=r-1;t>=n;t--)e=this.copyBit(t,8,e);for(a=r-7;a<r;a++)e=this.copyBit(8,a,e);if(this.parsedFormatInfo=d.decodeFormatInformation(e),null!=this.parsedFormatInfo)return this.parsedFormatInfo;throw"Error readFormatInformation"},this.readVersion=function(){if(null!=this.parsedVersion)return this.parsedVersion;var e=this.bitMatrix.Dimension,t=e-17>>2;if(t<=6)return i.getVersionForNumber(t);for(var a=0,r=e-11,n=5;n>=0;n--)for(var s=e-9;s>=r;s--)a=this.copyBit(s,n,a);if(this.parsedVersion=i.decodeVersionInformation(a),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==e)return this.parsedVersion;a=0;for(s=5;s>=0;s--)for(n=e-9;n>=r;n--)a=this.copyBit(s,n,a);if(this.parsedVersion=i.decodeVersionInformation(a),null!=this.parsedVersion&&this.parsedVersion.DimensionForVersion==e)return this.parsedVersion;throw"Error readVersion"},this.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),a=w.forReference(e.DataMask),r=this.bitMatrix.Dimension;a.unmaskBitMatrix(this.bitMatrix,r);for(var n=t.buildFunctionPattern(),i=!0,s=new Array(t.TotalCodewords),o=0,c=0,l=0,u=r-1;u>0;u-=2){6==u&&u--;for(var d=0;d<r;d++)for(var p=i?r-1-d:d,h=0;h<2;h++)n.get_Renamed(u-h,p)||(l++,c<<=1,this.bitMatrix.get_Renamed(u-h,p)&&(c|=1),8==l&&(s[o++]=c,l=0,c=0));i^=!0}if(o!=t.TotalCodewords)throw"Error readCodewords";return s}}v.getDataBlocks=function(e,t,a){if(e.length!=t.TotalCodewords)throw"ArgumentException";for(var r=t.getECBlocksForLevel(a),n=0,i=r.getECBlocks(),s=0;s<i.length;s++)n+=i[s].Count;for(var o=new Array(n),c=0,l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.Count;s++){var d=u.DataCodewords,p=r.ECCodewordsPerBlock+d;o[c++]=new v(d,new Array(p))}}for(var h=o[0].codewords.length,f=o.length-1;f>=0;){if(o[f].codewords.length==h)break;f--}f++;var m=h-r.ECCodewordsPerBlock,g=0;for(s=0;s<m;s++)for(l=0;l<c;l++)o[l].codewords[s]=e[g++];for(l=f;l<c;l++)o[l].codewords[m]=e[g++];var b=o[0].codewords.length;for(s=m;s<b;s++)for(l=0;l<c;l++){var y=l<f?s:s+1;o[l].codewords[y]=e[g++]}return o};var w={};function x(e,t){if(null==t||0==t.length)throw"System.ArgumentException";this.field=e;var a=t.length;if(a>1&&0==t[0]){for(var r=1;r<a&&0==t[r];)r++;if(r==a)this.coefficients=e.Zero.coefficients;else{this.coefficients=new Array(a-r);for(var n=0;n<this.coefficients.length;n++)this.coefficients[n]=0;for(var i=0;i<this.coefficients.length;i++)this.coefficients[i]=t[r+i]}}else this.coefficients=t;this.__defineGetter__("Zero",(function(){return 0==this.coefficients[0]})),this.__defineGetter__("Degree",(function(){return this.coefficients.length-1})),this.__defineGetter__("Coefficients",(function(){return this.coefficients})),this.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},this.evaluateAt=function(e){if(0==e)return this.getCoefficient(0);var t=this.coefficients.length;if(1==e){for(var a=0,r=0;r<t;r++)a=k.addOrSubtract(a,this.coefficients[r]);return a}var n=this.coefficients[0];for(r=1;r<t;r++)n=k.addOrSubtract(this.field.multiply(e,n),this.coefficients[r]);return n},this.addOrSubtract=function(t){if(this.field!=t.field)throw"GF256Polys do not have same GF256 field";if(this.Zero)return t;if(t.Zero)return this;var a=this.coefficients,r=t.coefficients;if(a.length>r.length){var n=a;a=r,r=n}for(var i=new Array(r.length),s=r.length-a.length,o=0;o<s;o++)i[o]=r[o];for(var c=s;c<r.length;c++)i[c]=k.addOrSubtract(a[c-s],r[c]);return new x(e,i)},this.multiply1=function(e){if(this.field!=e.field)throw"GF256Polys do not have same GF256 field";if(this.Zero||e.Zero)return this.field.Zero;for(var t=this.coefficients,a=t.length,r=e.coefficients,n=r.length,i=new Array(a+n-1),s=0;s<a;s++)for(var o=t[s],c=0;c<n;c++)i[s+c]=k.addOrSubtract(i[s+c],this.field.multiply(o,r[c]));return new x(this.field,i)},this.multiply2=function(e){if(0==e)return this.field.Zero;if(1==e)return this;for(var t=this.coefficients.length,a=new Array(t),r=0;r<t;r++)a[r]=this.field.multiply(this.coefficients[r],e);return new x(this.field,a)},this.multiplyByMonomial=function(e,t){if(e<0)throw"System.ArgumentException";if(0==t)return this.field.Zero;for(var a=this.coefficients.length,r=new Array(a+e),n=0;n<r.length;n++)r[n]=0;for(n=0;n<a;n++)r[n]=this.field.multiply(this.coefficients[n],t);return new x(this.field,r)},this.divide=function(e){if(this.field!=e.field)throw"GF256Polys do not have same GF256 field";if(e.Zero)throw"Divide by 0";for(var t=this.field.Zero,a=this,r=e.getCoefficient(e.Degree),n=this.field.inverse(r);a.Degree>=e.Degree&&!a.Zero;){var i=a.Degree-e.Degree,s=this.field.multiply(a.getCoefficient(a.Degree),n),o=e.multiplyByMonomial(i,s),c=this.field.buildMonomial(i,s);t=t.addOrSubtract(c),a=a.addOrSubtract(o)}return new Array(t,a)}}function k(e){this.expTable=new Array(256),this.logTable=new Array(256);for(var t=1,a=0;a<256;a++)this.expTable[a]=t,(t<<=1)>=256&&(t^=e);for(a=0;a<255;a++)this.logTable[this.expTable[a]]=a;var r=new Array(1);r[0]=0,this.zero=new x(this,new Array(r));var n=new Array(1);n[0]=1,this.one=new x(this,new Array(n)),this.__defineGetter__("Zero",(function(){return this.zero})),this.__defineGetter__("One",(function(){return this.one})),this.buildMonomial=function(e,t){if(e<0)throw"System.ArgumentException";if(0==t)return this.zero;for(var a=new Array(e+1),r=0;r<a.length;r++)a[r]=0;return a[0]=t,new x(this,a)},this.exp=function(e){return this.expTable[e]},this.log=function(e){if(0==e)throw"System.ArgumentException";return this.logTable[e]},this.inverse=function(e){if(0==e)throw"System.ArithmeticException";return this.expTable[255-this.logTable[e]]},this.multiply=function(e,t){return 0==e||0==t?0:1==e?t:1==t?e:this.expTable[(this.logTable[e]+this.logTable[t])%255]}}w.forReference=function(e){if(e<0||e>7)throw"System.ArgumentException";return w.DATA_MASKS[e]},w.DATA_MASKS=new Array(new function(){this.unmaskBitMatrix=function(e,t){for(var a=0;a<t;a++)for(var r=0;r<t;r++)this.isMasked(a,r)&&e.flip(r,a)},this.isMasked=function(e,t){return 0==(e+t&1)}},new function(){this.unmaskBitMatrix=function(e,t){for(var a=0;a<t;a++)for(var r=0;r<t;r++)this.isMasked(a,r)&&e.flip(r,a)},this.isMasked=function(e,t){return 0==(1&e)}},new function(){this.unmaskBitMatrix=function(e,t){for(var a=0;a<t;a++)for(var r=0;r<t;r++)this.isMasked(a,r)&&e.flip(r,a)},this.isMasked=function(e,t){return t%3==0}},new function(){this.unmaskBitMatrix=function(e,t){for(var a=0;a<t;a++)for(var r=0;r<t;r++)this.isMasked(a,r)&&e.flip(r,a)},this.isMasked=function(e,t){return(e+t)%3==0}},new function(){this.unmaskBitMatrix=function(e,t){for(var a=0;a<t;a++)for(var r=0;r<t;r++)this.isMasked(a,r)&&e.flip(r,a)},this.isMasked=function(e,t){return 0==(E(e,1)+t/3&1)}},new function(){this.unmaskBitMatrix=function(e,t){for(var a=0;a<t;a++)for(var r=0;r<t;r++)this.isMasked(a,r)&&e.flip(r,a)},this.isMasked=function(e,t){var a=e*t;return(1&a)+a%3==0}},new function(){this.unmaskBitMatrix=function(e,t){for(var a=0;a<t;a++)for(var r=0;r<t;r++)this.isMasked(a,r)&&e.flip(r,a)},this.isMasked=function(e,t){var a=e*t;return 0==((1&a)+a%3&1)}},new function(){this.unmaskBitMatrix=function(e,t){for(var a=0;a<t;a++)for(var r=0;r<t;r++)this.isMasked(a,r)&&e.flip(r,a)},this.isMasked=function(e,t){return 0==((e+t&1)+e*t%3&1)}}),k.QR_CODE_FIELD=new k(285),k.DATA_MATRIX_FIELD=new k(301),k.addOrSubtract=function(e,t){return e^t};var S={};S.rsDecoder=new function(e){this.field=e,this.decode=function(e,t){for(var a=new x(this.field,e),r=new Array(t),n=0;n<r.length;n++)r[n]=0;var i=!0;for(n=0;n<t;n++){var s=a.evaluateAt(this.field.exp(n));r[r.length-1-n]=s,0!=s&&(i=!1)}if(!i){var o=new x(this.field,r),c=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),o,t),l=c[0],u=c[1],d=this.findErrorLocations(l),p=this.findErrorMagnitudes(u,d,!1);for(n=0;n<d.length;n++){var h=e.length-1-this.field.log(d[n]);if(h<0)throw"ReedSolomonException Bad error location";e[h]=k.addOrSubtract(e[h],p[n])}}},this.runEuclideanAlgorithm=function(e,t,a){if(e.Degree<t.Degree){var r=e;e=t,t=r}for(var n=e,i=t,s=this.field.One,o=this.field.Zero,c=this.field.Zero,l=this.field.One;i.Degree>=Math.floor(a/2);){var u=n,d=s,p=c;if(s=o,c=l,(n=i).Zero)throw"r_{i-1} was zero";i=u;for(var h=this.field.Zero,f=n.getCoefficient(n.Degree),m=this.field.inverse(f);i.Degree>=n.Degree&&!i.Zero;){var g=i.Degree-n.Degree,b=this.field.multiply(i.getCoefficient(i.Degree),m);h=h.addOrSubtract(this.field.buildMonomial(g,b)),i=i.addOrSubtract(n.multiplyByMonomial(g,b))}o=h.multiply1(s).addOrSubtract(d),l=h.multiply1(c).addOrSubtract(p)}var y=l.getCoefficient(0);if(0==y)throw"ReedSolomonException sigmaTilde(0) was zero";var v=this.field.inverse(y),_=l.multiply2(v),w=i.multiply2(v);return new Array(_,w)},this.findErrorLocations=function(e){var t=e.Degree;if(1==t)return new Array(e.getCoefficient(1));for(var a=new Array(t),r=0,n=1;n<256&&r<t;n++)0==e.evaluateAt(n)&&(a[r]=this.field.inverse(n),r++);if(r!=t)throw"Error locator degree does not match number of roots";return a},this.findErrorMagnitudes=function(e,t,a){for(var r=t.length,n=new Array(r),i=0;i<r;i++){for(var s=this.field.inverse(t[i]),o=1,c=0;c<r;c++)i!=c&&(o=this.field.multiply(o,k.addOrSubtract(1,this.field.multiply(t[c],s))));n[i]=this.field.multiply(e.evaluateAt(s),this.field.inverse(o)),a&&(n[i]=this.field.multiply(n[i],s))}return n}}(k.QR_CODE_FIELD),S.correctErrors=function(e,t){for(var a=e.length,r=new Array(a),n=0;n<a;n++)r[n]=255&e[n];var i=e.length-t;try{S.rsDecoder.decode(r,i)}catch(e){throw e}for(n=0;n<t;n++)e[n]=r[n]},S.decode=function(e){for(var t=new _(e),a=t.readVersion(),r=t.readFormatInformation().ErrorCorrectionLevel,n=t.readCodewords(),i=v.getDataBlocks(n,a,r),s=0,o=0;o<i.length;o++)s+=i[o].NumDataCodewords;for(var c=new Array(s),l=0,u=0;u<i.length;u++){var d=i[u],p=d.Codewords,h=d.NumDataCodewords;S.correctErrors(p,h);for(o=0;o<h;o++)c[l++]=p[o]}return new O(c,a.VersionNumber,r.Bits)};var P={};function E(e,t){return e>=0?e>>t:(e>>t)+(2<<~t)}P.imagedata=null,P.width=0,P.height=0,P.qrCodeSymbol=null,P.debug=!1,P.maxImgSize=1048576,P.sizeOfDataLengthInfo=[[10,9,8,8],[12,11,16,10],[14,13,16,12]],P.callback=null,P.vidSuccess=function(e){P.localstream=e,P.webkit?P.video.src=window.webkitURL.createObjectURL(e):P.moz?(P.video.mozSrcObject=e,P.video.play()):P.video.src=e,P.gUM=!0,P.canvas_qr2=document.createElement("canvas"),P.canvas_qr2.id="qr-canvas",P.qrcontext2=P.canvas_qr2.getContext("2d"),P.canvas_qr2.width=P.video.videoWidth,P.canvas_qr2.height=P.video.videoHeight,setTimeout(P.captureToCanvas,500)},P.vidError=function(e){P.gUM=!1},P.captureToCanvas=function(){if(P.gUM)try{if(0==P.video.videoWidth)return void setTimeout(P.captureToCanvas,500);P.canvas_qr2.width=P.video.videoWidth,P.canvas_qr2.height=P.video.videoHeight,P.qrcontext2.drawImage(P.video,0,0);try{P.decode()}catch(e){console.log(e),setTimeout(P.captureToCanvas,500)}}catch(e){console.log(e),setTimeout(P.captureToCanvas,500)}},P.setWebcam=function(e){var t=navigator;P.video=document.getElementById(e);var a=!0;if(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices)try{navigator.mediaDevices.enumerateDevices().then((function(e){e.forEach((function(e){console.log("deb1"),"videoinput"===e.kind&&e.label.toLowerCase().search("back")>-1&&(a=[{sourceId:e.deviceId}]),console.log(e.kind+": "+e.label+" id = "+e.deviceId)}))}))}catch(e){console.log(e)}else console.log("no navigator.mediaDevices.enumerateDevices");t.getUserMedia?t.getUserMedia({video:a,audio:!1},P.vidSuccess,P.vidError):t.webkitGetUserMedia?(P.webkit=!0,t.webkitGetUserMedia({video:a,audio:!1},P.vidSuccess,P.vidError)):t.mozGetUserMedia&&(P.moz=!0,t.mozGetUserMedia({video:a,audio:!1},P.vidSuccess,P.vidError))},P.decode=function(e){if(0==arguments.length){if(P.canvas_qr2)var t=P.canvas_qr2,a=P.qrcontext2;else a=(t=document.getElementById("qr-canvas")).getContext("2d");return P.width=t.width,P.height=t.height,P.imagedata=a.getImageData(0,0,P.width,P.height),P.result=P.process(a),null!=P.callback&&P.callback(P.result),P.result}var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var e=document.getElementById("out-canvas");if(null!=e){var t=e.getContext("2d");t.clearRect(0,0,320,240),t.drawImage(r,0,0,320,240)}var a=document.createElement("canvas"),n=a.getContext("2d"),i=r.height,s=r.width;if(r.width*r.height>P.maxImgSize){var o=r.width/r.height;s=o*(i=Math.sqrt(P.maxImgSize/o))}a.width=s,a.height=i,n.drawImage(r,0,0,a.width,a.height),P.width=a.width,P.height=a.height;try{P.imagedata=n.getImageData(0,0,a.width,a.height)}catch(e){return P.result="Cross domain image reading not supported in your browser! Save it to your computer then drag and drop the file!",void(null!=P.callback&&P.callback(P.result))}try{P.result=P.process(n)}catch(e){console.log(e),P.result="error decoding QR Code"}null!=P.callback&&P.callback(P.result)},r.onerror=function(){null!=P.callback&&P.callback("Failed to load the image")},r.src=e},P.isUrl=function(e){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},P.decode_url=function(e){var t="";try{t=escape(e)}catch(a){console.log(a),t=e}var a="";try{a=decodeURIComponent(t)}catch(e){console.log(e),a=t}return a},P.decode_utf8=function(e){return P.isUrl(e)?P.decode_url(e):e},P.process=function(e){var t=(new Date).getTime(),a=P.grayScaleToBitmap(P.grayscale());if(P.debug){for(var r=0;r<P.height;r++)for(var n=0;n<P.width;n++){var i=4*n+r*P.width*4;P.imagedata.data[i]=(a[n+r*P.width],0),P.imagedata.data[i+1]=(a[n+r*P.width],0),P.imagedata.data[i+2]=a[n+r*P.width]?255:0}e.putImageData(P.imagedata,0,0)}var s=new c(a).detect();if(P.debug){for(r=0;r<s.bits.Height;r++)for(n=0;n<s.bits.Width;n++){i=4*n*2+2*r*P.width*4;P.imagedata.data[i]=(s.bits.get_Renamed(n,r),0),P.imagedata.data[i+1]=(s.bits.get_Renamed(n,r),0),P.imagedata.data[i+2]=s.bits.get_Renamed(n,r)?255:0}e.putImageData(P.imagedata,0,0)}for(var o=S.decode(s.bits).DataByte,l="",u=0;u<o.length;u++)for(var d=0;d<o[u].length;d++)l+=String.fromCharCode(o[u][d]);var p=(new Date).getTime()-t;return console.log(p),P.decode_utf8(l)},P.getPixel=function(e,t){if(P.width<e)throw"point error";if(P.height<t)throw"point error";var a=4*e+t*P.width*4;return(33*P.imagedata.data[a]+34*P.imagedata.data[a+1]+33*P.imagedata.data[a+2])/100},P.binarize=function(e){for(var t=new Array(P.width*P.height),a=0;a<P.height;a++)for(var r=0;r<P.width;r++){var n=P.getPixel(r,a);t[r+a*P.width]=n<=e}return t},P.getMiddleBrightnessPerArea=function(e){for(var t=Math.floor(P.width/4),a=Math.floor(P.height/4),r=new Array(4),n=0;n<4;n++){r[n]=new Array(4);for(var i=0;i<4;i++)r[n][i]=new Array(0,0)}for(var s=0;s<4;s++)for(var o=0;o<4;o++){r[o][s][0]=255;for(var c=0;c<a;c++)for(var l=0;l<t;l++){var u=e[t*o+l+(a*s+c)*P.width];u<r[o][s][0]&&(r[o][s][0]=u),u>r[o][s][1]&&(r[o][s][1]=u)}}for(var d=new Array(4),p=0;p<4;p++)d[p]=new Array(4);for(s=0;s<4;s++)for(o=0;o<4;o++)d[o][s]=Math.floor((r[o][s][0]+r[o][s][1])/2);return d},P.grayScaleToBitmap=function(e){for(var t=P.getMiddleBrightnessPerArea(e),a=t.length,r=Math.floor(P.width/a),n=Math.floor(P.height/a),i=new ArrayBuffer(P.width*P.height),s=new Uint8Array(i),o=0;o<a;o++)for(var c=0;c<a;c++)for(var l=0;l<n;l++)for(var u=0;u<r;u++)s[r*c+u+(n*o+l)*P.width]=e[r*c+u+(n*o+l)*P.width]<t[c][o];return s},P.grayscale=function(){for(var e=new ArrayBuffer(P.width*P.height),t=new Uint8Array(e),a=0;a<P.height;a++)for(var r=0;r<P.width;r++){var n=P.getPixel(r,a);t[r+a*P.width]=n}return t};function C(e,t,a){this.x=e,this.y=t,this.count=1,this.estimatedModuleSize=a,this.__defineGetter__("EstimatedModuleSize",(function(){return this.estimatedModuleSize})),this.__defineGetter__("Count",(function(){return this.count})),this.__defineGetter__("X",(function(){return this.x})),this.__defineGetter__("Y",(function(){return this.y})),this.incrementCount=function(){this.count++},this.aboutEquals=function(e,t,a){if(Math.abs(t-this.y)<=e&&Math.abs(a-this.x)<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r/this.estimatedModuleSize<=1}return!1}}function A(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2],this.__defineGetter__("BottomLeft",(function(){return this.bottomLeft})),this.__defineGetter__("TopLeft",(function(){return this.topLeft})),this.__defineGetter__("TopRight",(function(){return this.topRight}))}function M(){this.image=null,this.possibleCenters=[],this.hasSkipped=!1,this.crossCheckStateCount=new Array(0,0,0,0,0),this.resultPointCallback=null,this.__defineGetter__("CrossCheckStateCount",(function(){return this.crossCheckStateCount[0]=0,this.crossCheckStateCount[1]=0,this.crossCheckStateCount[2]=0,this.crossCheckStateCount[3]=0,this.crossCheckStateCount[4]=0,this.crossCheckStateCount})),this.foundPatternCross=function(e){for(var t=0,a=0;a<5;a++){var r=e[a];if(0==r)return!1;t+=r}if(t<7)return!1;var n=Math.floor((t<<8)/7),i=Math.floor(n/2);return Math.abs(n-(e[0]<<8))<i&&Math.abs(n-(e[1]<<8))<i&&Math.abs(3*n-(e[2]<<8))<3*i&&Math.abs(n-(e[3]<<8))<i&&Math.abs(n-(e[4]<<8))<i},this.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},this.crossCheckVertical=function(e,t,a,r){for(var n=this.image,i=P.height,s=this.CrossCheckStateCount,o=e;o>=0&&n[t+o*P.width];)s[2]++,o--;if(o<0)return NaN;for(;o>=0&&!n[t+o*P.width]&&s[1]<=a;)s[1]++,o--;if(o<0||s[1]>a)return NaN;for(;o>=0&&n[t+o*P.width]&&s[0]<=a;)s[0]++,o--;if(s[0]>a)return NaN;for(o=e+1;o<i&&n[t+o*P.width];)s[2]++,o++;if(o==i)return NaN;for(;o<i&&!n[t+o*P.width]&&s[3]<a;)s[3]++,o++;if(o==i||s[3]>=a)return NaN;for(;o<i&&n[t+o*P.width]&&s[4]<a;)s[4]++,o++;if(s[4]>=a)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-r)>=2*r?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,o):NaN},this.crossCheckHorizontal=function(e,t,a,r){for(var n=this.image,i=P.width,s=this.CrossCheckStateCount,o=e;o>=0&&n[o+t*P.width];)s[2]++,o--;if(o<0)return NaN;for(;o>=0&&!n[o+t*P.width]&&s[1]<=a;)s[1]++,o--;if(o<0||s[1]>a)return NaN;for(;o>=0&&n[o+t*P.width]&&s[0]<=a;)s[0]++,o--;if(s[0]>a)return NaN;for(o=e+1;o<i&&n[o+t*P.width];)s[2]++,o++;if(o==i)return NaN;for(;o<i&&!n[o+t*P.width]&&s[3]<a;)s[3]++,o++;if(o==i||s[3]>=a)return NaN;for(;o<i&&n[o+t*P.width]&&s[4]<a;)s[4]++,o++;if(s[4]>=a)return NaN;var c=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(c-r)>=r?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,o):NaN},this.handlePossibleCenter=function(e,t,a){var r=e[0]+e[1]+e[2]+e[3]+e[4],n=this.centerFromEnd(e,a),i=this.crossCheckVertical(t,Math.floor(n),e[2],r);if(!isNaN(i)&&(n=this.crossCheckHorizontal(Math.floor(n),Math.floor(i),e[2],r),!isNaN(n))){for(var s=r/7,o=!1,c=this.possibleCenters.length,l=0;l<c;l++){var u=this.possibleCenters[l];if(u.aboutEquals(s,i,n)){u.incrementCount(),o=!0;break}}if(!o){var d=new C(n,i,s);this.possibleCenters.push(d),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(d)}return!0}return!1},this.selectBestPatterns=function(){var e=this.possibleCenters.length;if(e<3)throw"Couldn't find enough finder patterns (found "+e+")";if(e>3){for(var t=0,a=0,r=0;r<e;r++){var n=this.possibleCenters[r].EstimatedModuleSize;t+=n,a+=n*n}var i=t/e;this.possibleCenters.sort((function(e,t){var a=Math.abs(t.EstimatedModuleSize-i),r=Math.abs(e.EstimatedModuleSize-i);return a<r?-1:a==r?0:1}));var s=Math.sqrt(a/e-i*i),o=Math.max(.2*i,s);for(r=this.possibleCenters.length-1;r>=0;r--){var c=this.possibleCenters[r];Math.abs(c.EstimatedModuleSize-i)>o&&this.possibleCenters.splice(r,1)}}return this.possibleCenters.length>3&&this.possibleCenters.sort((function(e,t){return e.count>t.count?-1:e.count<t.count?1:0})),new Array(this.possibleCenters[0],this.possibleCenters[1],this.possibleCenters[2])},this.findRowSkip=function(){var e=this.possibleCenters.length;if(e<=1)return 0;for(var t=null,a=0;a<e;a++){var r=this.possibleCenters[a];if(r.Count>=2){if(null!=t)return this.hasSkipped=!0,Math.floor((Math.abs(t.X-r.X)-Math.abs(t.Y-r.Y))/2);t=r}}return 0},this.haveMultiplyConfirmedCenters=function(){for(var e=0,t=0,a=this.possibleCenters.length,r=0;r<a;r++){var n=this.possibleCenters[r];n.Count>=2&&(e++,t+=n.EstimatedModuleSize)}if(e<3)return!1;var i=t/a,s=0;for(r=0;r<a;r++)n=this.possibleCenters[r],s+=Math.abs(n.EstimatedModuleSize-i);return s<=.05*t},this.findFinderPattern=function(e){this.image=e;var t=P.height,a=P.width,r=Math.floor(3*t/228);r<3&&(r=3);for(var n=!1,i=new Array(5),s=r-1;s<t&&!n;s+=r){i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0;for(var o=0,c=0;c<a;c++)if(e[c+s*P.width])1==(1&o)&&o++,i[o]++;else if(0==(1&o))if(4==o)if(this.foundPatternCross(i)){if(this.handlePossibleCenter(i,s,c))if(r=2,this.hasSkipped)n=this.haveMultiplyConfirmedCenters();else{var l=this.findRowSkip();l>i[2]&&(s+=l-i[2]-r,c=a-1)}else{do{c++}while(c<a&&!e[c+s*P.width]);c--}o=0,i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0}else i[0]=i[2],i[1]=i[3],i[2]=i[4],i[3]=1,i[4]=0,o=3;else i[++o]++;else i[o]++;if(this.foundPatternCross(i))this.handlePossibleCenter(i,s,a)&&(r=i[0],this.hasSkipped&&(n=this.haveMultiplyConfirmedCenters()))}var u=this.selectBestPatterns();return P.orderBestPatterns(u),new A(u)}}function T(e,t,a){this.x=e,this.y=t,this.count=1,this.estimatedModuleSize=a,this.__defineGetter__("EstimatedModuleSize",(function(){return this.estimatedModuleSize})),this.__defineGetter__("Count",(function(){return this.count})),this.__defineGetter__("X",(function(){return Math.floor(this.x)})),this.__defineGetter__("Y",(function(){return Math.floor(this.y)})),this.incrementCount=function(){this.count++},this.aboutEquals=function(e,t,a){if(Math.abs(t-this.y)<=e&&Math.abs(a-this.x)<=e){var r=Math.abs(e-this.estimatedModuleSize);return r<=1||r/this.estimatedModuleSize<=1}return!1}}function j(e,t,a,r,n,i,s){this.image=e,this.possibleCenters=new Array,this.startX=t,this.startY=a,this.width=r,this.height=n,this.moduleSize=i,this.crossCheckStateCount=new Array(0,0,0),this.resultPointCallback=s,this.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},this.foundPatternCross=function(e){for(var t=this.moduleSize,a=t/2,r=0;r<3;r++)if(Math.abs(t-e[r])>=a)return!1;return!0},this.crossCheckVertical=function(e,t,a,r){var n=this.image,i=P.height,s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var o=e;o>=0&&n[t+o*P.width]&&s[1]<=a;)s[1]++,o--;if(o<0||s[1]>a)return NaN;for(;o>=0&&!n[t+o*P.width]&&s[0]<=a;)s[0]++,o--;if(s[0]>a)return NaN;for(o=e+1;o<i&&n[t+o*P.width]&&s[1]<=a;)s[1]++,o++;if(o==i||s[1]>a)return NaN;for(;o<i&&!n[t+o*P.width]&&s[2]<=a;)s[2]++,o++;if(s[2]>a)return NaN;var c=s[0]+s[1]+s[2];return 5*Math.abs(c-r)>=2*r?NaN:this.foundPatternCross(s)?this.centerFromEnd(s,o):NaN},this.handlePossibleCenter=function(e,t,a){var r=e[0]+e[1]+e[2],n=this.centerFromEnd(e,a),i=this.crossCheckVertical(t,Math.floor(n),2*e[1],r);if(!isNaN(i)){for(var s=(e[0]+e[1]+e[2])/3,o=this.possibleCenters.length,c=0;c<o;c++){if(this.possibleCenters[c].aboutEquals(s,i,n))return new T(n,i,s)}var l=new T(n,i,s);this.possibleCenters.push(l),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(l)}return null},this.find=function(){for(var t=this.startX,n=this.height,i=t+r,s=a+(n>>1),o=new Array(0,0,0),c=0;c<n;c++){var l=s+(0==(1&c)?c+1>>1:-(c+1>>1));o[0]=0,o[1]=0,o[2]=0;for(var u=t;u<i&&!e[u+P.width*l];)u++;for(var d=0;u<i;){if(e[u+l*P.width])if(1==d)o[d]++;else if(2==d){var p;if(this.foundPatternCross(o))if(null!=(p=this.handlePossibleCenter(o,l,u)))return p;o[0]=o[2],o[1]=1,o[2]=0,d=1}else o[++d]++;else 1==d&&d++,o[d]++;u++}if(this.foundPatternCross(o))if(null!=(p=this.handlePossibleCenter(o,l,i)))return p}if(0!=this.possibleCenters.length)return this.possibleCenters[0];throw"Couldn't find enough alignment patterns"}}function O(e,t,a){this.blockPointer=0,this.bitPointer=7,this.dataLength=0,this.blocks=e,this.numErrorCorrectionCode=a,t<=9?this.dataLengthMode=0:t>=10&&t<=26?this.dataLengthMode=1:t>=27&&t<=40&&(this.dataLengthMode=2),this.getNextBits=function(e){var t=0;if(e<this.bitPointer+1){for(var a=0,r=0;r<e;r++)a+=1<<r;return a<<=this.bitPointer-e+1,t=(this.blocks[this.blockPointer]&a)>>this.bitPointer-e+1,this.bitPointer-=e,t}if(e<this.bitPointer+1+8){var n=0;for(r=0;r<this.bitPointer+1;r++)n+=1<<r;return t=(this.blocks[this.blockPointer]&n)<<e-(this.bitPointer+1),this.blockPointer++,t+=this.blocks[this.blockPointer]>>8-(e-(this.bitPointer+1)),this.bitPointer=this.bitPointer-e%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),t}if(e<this.bitPointer+1+16){n=0;var i=0;for(r=0;r<this.bitPointer+1;r++)n+=1<<r;var s=(this.blocks[this.blockPointer]&n)<<e-(this.bitPointer+1);this.blockPointer++;var o=this.blocks[this.blockPointer]<<e-(this.bitPointer+1+8);this.blockPointer++;for(r=0;r<e-(this.bitPointer+1+8);r++)i+=1<<r;return i<<=8-(e-(this.bitPointer+1+8)),t=s+o+((this.blocks[this.blockPointer]&i)>>8-(e-(this.bitPointer+1+8))),this.bitPointer=this.bitPointer-(e-8)%8,this.bitPointer<0&&(this.bitPointer=8+this.bitPointer),t}return 0},this.NextMode=function(){return this.blockPointer>this.blocks.length-this.numErrorCorrectionCode-2?0:this.getNextBits(4)},this.getDataLength=function(e){for(var t=0;e>>t!=1;)t++;return this.getNextBits(P.sizeOfDataLengthInfo[this.dataLengthMode][t])},this.getRomanAndFigureString=function(e){var t=e,a=0,r="",n=new Array("0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":");do{if(t>1){var i=(a=this.getNextBits(11))%45;r+=n[Math.floor(a/45)],r+=n[i],t-=2}else 1==t&&(r+=n[a=this.getNextBits(6)],t-=1)}while(t>0);return r},this.getFigureString=function(e){var t=e,a=0,r="";do{t>=3?((a=this.getNextBits(10))<100&&(r+="0"),a<10&&(r+="0"),t-=3):2==t?((a=this.getNextBits(7))<10&&(r+="0"),t-=2):1==t&&(a=this.getNextBits(4),t-=1),r+=a}while(t>0);return r},this.get8bitByteArray=function(e){var t=e,a=0,r=new Array;do{a=this.getNextBits(8),r.push(a),t--}while(t>0);return r},this.getKanjiString=function(e){var t=e,a=0,r="";do{var n=((a=this.getNextBits(13))/192<<8)+a%192,i=0;i=n+33088<=40956?n+33088:n+49472,r+=String.fromCharCode(i),t--}while(t>0);return r},this.parseECIValue=function(){var e=0,t=this.getNextBits(8);(0==(128&t)&&(e=127&t),128==(192&t))&&(e=(63&t)<<8|this.getNextBits(8));192==(224&t)&&(e=(31&t)<<16|this.getNextBits(8));return e},this.__defineGetter__("DataByte",(function(){for(var e=new Array;;){var t=this.NextMode();if(0==t){if(e.length>0)break;throw"Empty data block"}if(1!=t&&2!=t&&4!=t&&8!=t&&7!=t)throw"Invalid mode: "+t+" in (block:"+this.blockPointer+" bit:"+this.bitPointer+")";if(7==t)var a=this.parseECIValue();else{var r=this.getDataLength(t);if(r<1)throw"Invalid data length: "+r;switch(t){case 1:for(var n=this.getFigureString(r),i=new Array(n.length),s=0;s<n.length;s++)i[s]=n.charCodeAt(s);e.push(i);break;case 2:for(n=this.getRomanAndFigureString(r),i=new Array(n.length),s=0;s<n.length;s++)i[s]=n.charCodeAt(s);e.push(i);break;case 4:a=this.get8bitByteArray(r);e.push(a);break;case 8:n=this.getKanjiString(r);e.push(n)}}}return e}))}P.orderBestPatterns=function(e){function t(e,t){var a=e.X-t.X,r=e.Y-t.Y;return Math.sqrt(a*a+r*r)}var a,r,n,i=t(e[0],e[1]),s=t(e[1],e[2]),o=t(e[0],e[2]);if(s>=i&&s>=o?(r=e[0],a=e[1],n=e[2]):o>=s&&o>=i?(r=e[1],a=e[0],n=e[2]):(r=e[2],a=e[0],n=e[1]),function(e,t,a){var r=t.x,n=t.y;return(a.x-r)*(e.y-n)-(a.y-n)*(e.x-r)}(a,r,n)<0){var c=a;a=n,n=c}e[0]=a,e[1]=r,e[2]=n},e.exports=P},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,a){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=u(e);if(t){var n=u(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return l(this,a)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=a(15),p=a(1242),h=a(298),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(m,e);var t,a,r,l,d,f=c(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=f.call(this,e)).name="QRScanner",t.description="Adds QRCode scanning functionality to Saito",t.categories="Core",t.video=null,t.canvas=null,t.canvas_context=null,t.isStreamInit=!1,t.scanner_callback=null,t.description="Helper module with QR code scanning functionality.",t.categories="Dev Data Utilities",t.constraints={audio:!1,video:{facingMode:"environment"}},t.decoder=null,t.last_scanned_raw=null,t.last_scanned_at=null,t.debounce_timeout=750,t.events=["encrypt-key-exchange-confirm"],t}return t=m,(a=[{key:"initialize",value:function(e){s(u(m.prototype),"initialize",this).call(this,e)}},{key:"initializeHTML",value:function(e){}},{key:"attachEvents",value:function(e){var t=this;document.querySelector(".launch-scanner").addEventListener("click",(function(e){t.startScanner()}))}},{key:"startQRDecoderInitializationLoop",value:function(){var e=this;x=this.attemptQRDecode(),1==x?console.log("working..."):(console.log("wait 100...."),setTimeout((function(){e.startQRDecoderInitializationLoop()}),100))}},{key:"startScanner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(0!=this.app.BROWSER&&document&&!document.querySelector(".qrscanner-container")){this.scanner_callback=null,e&&(this.scanner_callback=e),document.body.innerHTML=this.returnScannerHTML();var t=this;t.start(document.getElementById("qr-video"),document.getElementById("qr-canvas"))}}},{key:"startEmbeddedScanner",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(0!=this.app.BROWSER&&document&&!document.querySelector(".qrscanner-container")){this.scanner_callback=null,t&&(this.scanner_callback=t),e.innerHTML=this.returnScannerHTML();var a=this;a.start(document.getElementById("qr-video"),document.getElementById("qr-canvas"))}}},{key:"startQRDecoder",value:function(){var e=this;x=this.attemptQRDecode(),1==x||setTimeout((function(){e.startQRDecoder()}),100)}},{key:"returnScannerHTML",value:function(){return'\n      <div class="qrscanner-container">\n        <div id="qr-target" class="qr-target"></div>\n        <div id="scanline" class="scanline"></div>\n        <div class="video-container">\n          <video playsinline autoplay id="qr-video" class="qr-video"></video>\n        </div>\n        <canvas style="display: none" id="qr-canvas"></canvas>\n      </div>\n\n    '}},{key:"start",value:(l=regeneratorRuntime.mark((function e(t,a){var r,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.video=t,this.canvas=a,this.canvas_context=this.canvas.getContext("2d"),this.decoder=new Worker("/qrscanner/quirc_worker.js"),this.decoder.onmessage=function(e){n.onDecoderMessage(e)},e.prev=5,e.next=8,navigator.mediaDevices.getUserMedia(this.constraints);case 8:r=e.sent,this.handleSuccess(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),this.handleError(e.t0);case 15:this.startQRDecoderInitializationLoop();case 16:case"end":return e.stop()}}),e,this,[[5,12]])})),d=function(){var e=this,t=arguments;return new Promise((function(a,r){var i=l.apply(e,t);function s(e){n(i,a,r,s,o,"next",e)}function o(e){n(i,a,r,s,o,"throw",e)}s(void 0)}))},function(e,t){return d.apply(this,arguments)})},{key:"stop",value:function(){this.decoder.terminate(),this.video&&this.video.srcObject.getTracks().forEach((function(e){return e.stop()}))}},{key:"render",value:function(){}},{key:"attemptQRDecode",value:function(){if(!this.isStreamInit)return 0;try{if(this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,this.canvas_context.drawImage(this.video,0,0,this.canvas.width,this.canvas.height),0==this.canvas.width)return;var e=this.canvas_context.getImageData(0,0,this.canvas.width,this.canvas.height);return e.data&&this.decoder.postMessage(e),1}catch(e){return 0}return 0}},{key:"onDecoderMessage",value:function(e){var t=this;if("done"!=e.data){var a=e.data.payload_string,r=Date.now();a!=this.last_scanned_raw||this.last_scanned_at<r-this.debounce_timeout?(this.last_scanned_raw=a,this.last_scanned_at=r,this.handleDecodedMessage(a)):a==this.last_scanned_raw&&(this.last_scanned_at=r)}setTimeout((function(){t.attemptQRDecode()}),0)}},{key:"handleDecodedMessage",value:function(e){if(null!=this.scanner_callback)return this.decoder.terminate(),void this.scanner_callback(e);this.app.crypto.isPublicKey(e)?(this.decoder.terminate(),h.render(this.app,{publickey:e,header:p}),h.attachEvents(this.app,{publickey:e,header:p})):this.sendEvent("qrcode",e)}},{key:"decodeFromFile",value:function(e){var t=this,a=new FileReader;a.onload=function(e){t.canvas_context.clearRect(0,0,t.canvas.width,t.canvas.height)},a.readAsDataURL(e)}},{key:"handleSuccess",value:function(e){window.stream=e,this.video.srcObject=e,this.isStreamInit=!0}},{key:"handleError",value:function(e){console.log("navigator.MediaDevices.getUserMedia error: ",e.message,e.name)}},{key:"receiveEvent",value:function(e,t){"encrypt-key-exchange-confirm"===e&&document.getElementById("qr-canvas")&&this.initializing_key&&window.location.assign("/chat")}}])&&i(t.prototype,a),r&&i(t,r),m}(d);e.exports=f},function(e,t,a){var r=a(302);e.exports=RegistryAppspace={render:function(e,t){document.querySelector(".email-appspace").innerHTML=r()},attachEvents:function(e,t){document.querySelector(".registry-submit").addEventListener("click",(function(e){var a=document.getElementById("identifier-requested").value;t.registry.registerIdentifier(a)}))}}},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d(e);if(t){var n=d(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return l(this,a)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}a(19),a(5);var p=a(15),h=a(303),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(m,e);var t,a,r,n,d,p,f=c(m);function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=f.call(this,e)).app=e,t.name="Registry",t.description="Adds support for the Saito DNS system, so that users can register user-generated names. Runs DNS server on core nodes.",t.categories="Core Utilities Messaging",t.publickey="zYCCXRZt2DyPD9UmxRfwFgLTNAqCd5VE8RuNneg4aNMK",l(t,u(t))}return t=m,(a=[{key:"returnServices",value:function(){var e=[];return e.push({service:"registry",domain:"saito"}),e}},{key:"respondTo",value:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"do-registry-prompt"==a?{doRegistryPrompt:(e=i(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sprompt("Pick a handle or nickname. <br /><sub>Alphanumeric characters only - Do not include an @</sub.>");case 2:if(a=e.sent,e.prev=3,!t.tryRegisterIdentifier(a)){e.next=9;break}return e.abrupt("return",a);case 9:throw"Unknown error";case 10:e.next=19;break;case 12:if(e.prev=12,e.t0=e.catch(3),"Alphanumeric Characters only"!=e.t0.message){e.next=18;break}salert("Alphanumeric Characters only"),e.next=19;break;case 18:throw e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,12]])}))),function(){return e.apply(this,arguments)})}:null}},{key:"showModal",value:function(){h.render(this.app,this),h.attachEvents(this.app,this)}},{key:"tryRegisterIdentifier",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"@saito",a=this.app.wallet.createUnsignedTransaction(this.publickey,this.app.wallet.wallet.default_fee,this.app.wallet.wallet.default_fee);if(null==a)throw console.log("NULL TX CREATED IN REGISTRY MODULE"),Error("NULL TX CREATED IN REGISTRY MODULE");if("string"==typeof e||e instanceof String){var r=/^[0-9A-Za-z]+$/;if(!r.test(e))throw Error("Alphanumeric Characters only");return a.msg.module="Registry",a.msg.identifier=e+t,a=this.app.wallet.signTransaction(a),this.app.network.propagateTransaction(a),!0}throw TypeError("identifier must be a string")}},{key:"registerIdentifier",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"@saito",a=this.app.wallet.createUnsignedTransaction(this.publickey,this.app.wallet.wallet.default_fee,this.app.wallet.wallet.default_fee);if(null!=a){if("string"==typeof e||e instanceof String){var r=/^[0-9A-Za-z]+$/;return r.test(e)?(a.msg.module="Registry",a.msg.identifier=e+t,a=this.app.wallet.signTransaction(a),this.app.network.propagateTransaction(a),!0):(salert("Alphanumeric Characters only"),!1)}}else console.log("NULL TX CREATED IN REGISTRY MODULE")}},{key:"onPeerHandshakeComplete",value:function(e,t){var a=e.modules.returnModule("Registry");null!=a.app.options.server?a.publickey=a.app.wallet.returnPublicKey():a.publickey=t.peer.publickey}},{key:"onConfirmation",value:(p=i(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o,c,l,u,d,p,h,f,m,g,b,y,v,_,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.modules.returnModule("Registry"),s=a.returnMessage(),0!=r){e.next=24;break}if("Registry"!==s.module){e.next=23;break}if(!a.isTo(i.publickey)||n.wallet.returnPublicKey()!==i.publickey){e.next=23;break}return console.log(i.publickey+" -- "+n.wallet.returnPublicKey()),s.request,o=s.identifier,c=a.transaction.from[0].add,l=(new Date).getTime(),u=t.block.id,d=t.returnHash(),p=o+c+u+d,h=i.app.wallet.signMessage(p),f=this.publickey,e.next=19,i.addRecord(o,c,l,u,d,0,h,f,1);case 19:return m=e.sent,g=a.returnPaymentTo(i.publickey),1==m?((b=i.app.wallet.createUnsignedTransaction(a.transaction.from[0].add,0,g)).msg.module="Email",b.msg.origin="Registry",b.msg.title="Address Registration Success!",b.msg.message="<p>You have successfully registered the identifier: <span class='boldred'>"+o+"</span></p>",b.msg.identifier=o,b.msg.signed_message=p,b.msg.sig=h,b=i.app.wallet.signTransaction(b),i.app.network.propagateTransaction(b)):((y=i.app.wallet.createUnsignedTransaction(a.transaction.from[0].add,0,g)).msg.module="Email",y.msg.title="Address Registration Failed!",y.msg.message="<p>The identifier you requested (<span class='boldred'>"+o+"</span>) has already been registered.</p>",y.msg.identifier=o,y.msg.signed_message="",y.msg.sig="",y=i.app.wallet.signTransaction(y),i.app.network.propagateTransaction(y)),e.abrupt("return");case 23:if("Email"==s.module&&a.transaction.from[0].add==i.publickey&&a.transaction.to[0].add==i.app.wallet.returnPublicKey()&&null!=a.msg.identifier&&null!=a.msg.signed_message&&null!=a.msg.sig){v=a.msg.identifier,_=a.msg.signed_message,w=a.msg.sig;try{console.log("a"),i.app.crypto.verifyMessage(_,w,i.publickey)&&(console.log("b"),i.app.keys.addKey(a.transaction.to[0].add,v,!0,"",t.block.id,t.returnHash(),1),console.log("c"))}catch(e){console.log("ERROR verifying username registration message: "+e)}}case 24:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r){return p.apply(this,arguments)})},{key:"addRecord",value:(d=i(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s,o,c,l,u,d,p,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:"",a=h.length>1&&void 0!==h[1]?h[1]:"",r=h.length>2&&void 0!==h[2]?h[2]:0,n=h.length>3&&void 0!==h[3]?h[3]:0,i=h.length>4&&void 0!==h[4]?h[4]:"",s=h.length>5&&void 0!==h[5]?h[5]:0,o=h.length>6&&void 0!==h[6]?h[6]:"",c=h.length>7&&void 0!==h[7]?h[7]:"",l=h.length>8&&void 0!==h[8]?h[8]:1,u="INSERT INTO records (\n        identifier, \n        publickey, \n        unixtime, \n        bid, \n        bsh, \n        lock_block, \n        sig,\n        signer, \n        lc\n      ) VALUES (\n        $identifier, \n        $publickey,\n        $unixtime, \n        $bid, \n        $bsh, \n        $lock_block, \n        $sig, \n        $signer, \n        $lc\n      )",d={$identifier:t,$publickey:a,$unixtime:r,$bid:n,$bsh:i,$lock_block:s,$sig:o,$signer:c,$lc:l},e.next=13,this.app.storage.executeDatabase(u,d,"registry");case 13:return u="SELECT * FROM records WHERE identifier = $identifier AND publickey = $publickey AND unixtime = $unixtime AND bid = $bid AND bsh = $bsh AND lock_block = $lock_block AND sig = $sig AND signer = $signer AND lc = $lc",e.next=16,this.app.storage.queryDatabase(u,d,"registry");case 16:if(p=e.sent,console.log(u),console.log(d),console.log("\n\n\nRES: "+JSON.stringify(p)),0!=p.length){e.next=24;break}return e.abrupt("return",0);case 24:return e.abrupt("return",1);case 25:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"onChainReorganization",value:(n=i(regeneratorRuntime.mark((function e(t,a,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={$bid:t,$bsh:a},e.next=4,this.app.storage.executeDatabase("UPDATE records SET lc = $lc WHERE bid = $bid AND bsh = $bsh",n,"registry");case 4:return e.abrupt("return");case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return n.apply(this,arguments)})},{key:"shouldAffixCallbackToModule",value:function(e){return e==this.name||"Email"==e?1:0}},{key:"sendSuccessResponse",value:function(e){var t=e.returnPaymentTo(this.app.wallet.returnPublicKey()),a=registry_self.app.wallet.createUnsignedTransaction(to,0,t);null!=a?(a.msg.module="Email",a.msg.data="You have successfully registered your address",a.msg.title="Address Registration Success!",a=this.app.wallet.signTransaction(e),this.app.network.propagateTransaction(a)):console.log("NULL TX CREATED IN REGISTRY MODULE")}},{key:"sendFailureResponse",value:function(e){var t=e.returnPaymentTo(this.app.wallet.returnPublicKey()),a=registry_self.app.wallet.createUnsignedTransaction(to,0,t);null!=a?(a.msg.module="Email",a.msg.data="You have successfully registered your address",a.msg.title="Address Registration Success!",a=this.app.wallet.signTransaction(e),this.app.network.propagateTransaction(a)):console.log("NULL TX CREATED IN REGISTRY MODULE")}}])&&s(t.prototype,a),r&&s(t,r),m}(p);e.exports=f},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=u(e);if(t){var n=u(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=a(5),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(f,e);var t,a,r,u,p,h=o(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=h.call(this,e)).app=e,t.name="Relay",t.description="Adds support for off-chain, realtime communications channels through relay servers, for mobile users and real-time gaming needs.",t.categories="Utilities Core",t.description="Simple Message Relay for Saito",t.categories="Utilities Communications",c(t,l(t))}return t=f,(a=[{key:"returnServices",value:function(){var e=[];return e.push({service:"relay"}),e}},{key:"sendRelayMessage",value:function(e,t,a){Array.isArray(e)||(recipient=e,(e=[]).push(recipient));var r=new d.transaction;r.transaction.from.push(new d.slip(this.app.wallet.returnPublicKey()));for(var n=0;n<e.length;n++)r.transaction.to.push(new d.slip(e[n]));r.transaction.ts=(new Date).getTime(),r.msg.request=t,r.msg.data=a;for(var i=r=this.app.wallet.signTransaction(r),s=0;s<this.app.network.peers.length;s++)if(this.app.network.peers[s].peer&&this.app.network.peers[s].peer.modules&&this.app.network.peers[s].peer.modules.length>0&&this.app.network.peers[s].peer.modules.includes(this.name)){var o=this.app.network.peers[s];if(!e.includes(o.peer.publickey)){var c=new d.transaction;c.transaction.from.push(new d.slip(this.app.wallet.returnPublicKey()));for(var l=0;l<e.length;l++)c.transaction.to.push(new d.slip(e[l]));c.transaction.ts=(new Date).getTime(),c.msg=r.transaction,c=this.app.wallet.signTransaction(c),(i=new d.transaction).transaction.from.push(new d.slip(this.app.wallet.returnPublicKey())),i.transaction.to.push(new d.slip(o.peer.publickey)),i.transaction.ts=(new Date).getTime(),i.msg=c.transaction,i=this.app.wallet.signTransaction(i)}o.sendRequest("relay peer message",i.transaction)}}},{key:"sendRelayMessageWithRetry",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};t.request=e,this.app.network.peers[0].sendRequestWithCallbackAndRetry("relayPeerMessage2",t,a.bind(this))}},{key:"sendRelayMessageToRecipientWithRetry",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};a.request=e,a.recipient=t,this.app.network.peers[0].sendRequestWithCallbackAndRetry("relayPeerMessageToRecipient",a,r.bind(this))}},{key:"handlePeerRequest",value:(u=regeneratorRuntime.mark((function e(t,a,r){var n,i,s,o,c,l,u,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.length>3&&void 0!==p[3]?p[3]:null,e.prev=1,t.modules.returnModule("Relay"),"relayPeerMessageToRecipient"===a.request&&a.data&&a.data.request&&a.data.recipient&&(null!=(i=this.app.network.returnPeerByPublicKey(a.data.recipient))?null===n?i.sendRequest(a.data.request,a.data):(console.log("should get here..."),i.sendRequestWithCallbackAndRetry(a.data.request,a.data,(function(e){console.log("callback in peer relay..."),console.log(e),n(e)}))):n({err:"Peer not found"})),"relayPeerMessage2"===a.request&&(console.log("relay peer message2"),console.log(a),a.data&&a.data.request&&(null===n?this.app.network.sendRequest(a.data.request,a.data):(console.log("here?"),this.app.network.sendRequestWithCall(a.data.request,a.data,(function(e){console.log("callback in relay..."),console.log(e),n(e)}))))),"relay peer message"!==a.request){e.next=15;break}if(a.data,!((s=new d.transaction(a.data)).transaction.to.length<=0)){e.next=10;break}return e.abrupt("return");case 10:if(null!=s.transaction.to[0].add){e.next=12;break}return e.abrupt("return");case 12:if(o=s.returnMessage(),c=new d.transaction(s.returnMessage()),s.isTo(t.wallet.returnPublicKey())&&null!=o.request)t.modules.handlePeerRequest(o,r,n),null!=n&&n({err:"",success:1});else{for(l=0,u=0;u<t.network.peers.length;u++)c.isTo(t.network.peers[u].peer.publickey)&&(l=1,t.network.peers[u].sendRequest("relay peer message",c.msg,(function(){null!=n&&n({err:"",success:1})})));0==l&&null!=n&&n({err:"ERROR 141423: peer not found in relay module",success:0})}case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.log("RELAY MOD ERROR"),console.log(e.t0);case 21:case"end":return e.stop()}}),e,this,[[1,17]])})),p=function(){var e=this,t=arguments;return new Promise((function(a,r){var i=u.apply(e,t);function s(e){n(i,a,r,s,o,"next",e)}function o(e){n(i,a,r,s,o,"throw",e)}s(void 0)}))},function(e,t,a){return p.apply(this,arguments)})}])&&i(t.prototype,a),r&&i(t,r),f}(a(15));e.exports=p},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=l(e);if(t){var n=l(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return o(this,a)}}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?c(e):t}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=a(306),d=(a(5),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(d,e);var t,a,r,l=s(d);function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=l.call(this,e)).app=e,t.name="Settings",t.description="Convenient Email plugin for managing Saito account settings",t.utilities="Core Utilities",t.link="/email?module=settings",t.description="User settings module.",t.categories="Admin Users",o(t,c(t))}return t=d,(a=[{key:"respondTo",value:function(e){if("email-appspace"==e){var t={render:function(e,t){u.render(e,t)},attachEvents:function(e,t){u.attachEvents(e,t)}};return t}return null}}])&&n(t.prototype,a),r&&n(t,r),d}(a(15)));e.exports=d},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,a){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=l(e);if(t){var n=l(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}a(5);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,a,r,c=o(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).name="Solitrio",t.description="Once you've started playing Solitrio, how can you go back to old-fashioned Solitaire? This one-player card game is the perfect way to pass a flight from Hong Kong to pretty much anywhere. Arrange the cards on the table from 2-10 ordered by suite. Harder than it looks.",t.categories="Arcade Games Entertainment",t.maxPlayers=1,t.minPlayers=1,t.type="Solitaire Cardgame",t.description="Solitaire card game made famous by the good folks at Cathay Pacific Information Technology Services.",t.categories="Cardgame Game Solitaire",t.boardgameWidth=5100,t}return t=u,(a=[{key:"toggleIntro",value:function(){this.overlay.showOverlay(this.app,this,'\n\n      <div class="intro">\n\n\tCards appear in four rows. There are four blank spaces.\n\n\t<p></p>\n\n\tPut the following card of the same suite in any open space. The Eight of Spades may be placed after the Seven of Spades.\n\n\t<p></p>\n\n\tIf you clear the front card in a row, you may move any TWO into that slot.\n\n\t<p></p>\n\n\tYou have two "chances" to reset the board (click on the "Ace"). This preserves existing chains but randomizes the remaining cards. \n\n\t<p></p>\n\n\tYour goal is to order the board before you run out of "chances".\n\n      </div>\n\n    ')}},{key:"initializeGame",value:function(e){this.updateStatus("loading game..."),this.loadGame(e),this.saveGame(),this.loadGame(this.game.id),""!=this.game.status&&this.updateStatus(this.game.status),""==this.game.dice&&this.initializeDice(),this.updateStatus("Generating the Game"),this.game.queue.push("round"),this.game.queue.push("DEAL\t1\t1\t40"),this.game.queue.push("SHUFFLE\t1\t1"),this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnDeck())),this.game.board={},this.game.state=this.returnState(),this.saveGame(e),$(".slot").css("min-height",$(".card").css("min-height"))}},{key:"initializeHTML",value:function(e){var t=this;i(l(u.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(a){a.respondTo("chat-manager").render(e,t),a.respondTo("chat-manager").attachEvents(e,t)})),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"How to Play",id:"game-intro",class:"game-intro",callback:function(e,t){t.menu.hideSubMenus(),t.toggleIntro()}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}}),this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}});for(var a=0;a<this.app.modules.mods.length;a++)"chat"===this.app.modules.mods[a].slug&&function(){var e=t.app.modules.mods[a];t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),t.menu.addSubMenuOption("game-chat",{text:"Community",id:"game-chat-community",class:"game-chat-community",callback:function(t,a){a.menu.hideSubMenus(),e.mute_community_chat=0,e.sendEvent("chat-render-request",{}),e.openChatBox()}})}();this.menu.render(e,this),this.menu.attachEvents(e,this)}},{key:"requestInterface",value:function(e){return"arcade-sidebar"==e?{title:this.name}:null}},{key:"returnState",value:function(){var e={recycles_remaining:2};return e}},{key:"playerTurn",value:function(){this.displayBoard(),this.updateStatus("Play Solitrio like your life Depends on it!")}},{key:"attachEventsToBoard",value:function(){var e=this,t="";$(".slot").off(),$(".slot").on("click",(function(){var a=$(this).attr("id");if(t===a)return e.untoggleCard(a),void(t="");if(t!=a){if(""==t){if("E"===a[0])return;return t=a,void e.toggleCard(a)}if(e.canCardPlaceInSlot(t,a)){var r=JSON.stringify(e.game.board[t]),n=JSON.stringify(e.game.board[a]);return e.game.board[t]=JSON.parse(n),e.game.board[a]=JSON.parse(r),e.untoggleCard(a),e.untoggleCard(t),t="",e.displayBoard(),void console.log(a+" can send move now "+t)}return alert("Cannot Card Place in Slot..."),e.untoggleCard(t),t="",void e.displayBoard()}}))}},{key:"canCardPlaceInSlot",value:function(e,t){var a=t.split("_"),r=this.game.board[e].name;if(console.log(e+" -- "+t),"slot1"===a[1]&&"2"==r[1])return 1;"slot2"==a[1]&&(precessor=a[0]+"_slot1"),"slot3"==a[1]&&(precessor=a[0]+"_slot2"),"slot4"==a[1]&&(precessor=a[0]+"_slot3"),"slot5"==a[1]&&(precessor=a[0]+"_slot4"),"slot6"==a[1]&&(precessor=a[0]+"_slot5"),"slot7"==a[1]&&(precessor=a[0]+"_slot6"),"slot8"==a[1]&&(precessor=a[0]+"_slot7"),"slot9"==a[1]&&(precessor=a[0]+"_slot8"),"slot10"==a[1]&&(precessor=a[0]+"_slot9");var n=parseInt(this.game.board[precessor].name.substring(1)),i=parseInt(r.substring(1)),s=this.game.board[precessor].name[0],o=this.game.board[e].name[0];return i==n+1&&o===s?1:0}},{key:"toggleCard",value:function(e){e="#"+e,$(e).css("opacity","0.75")}},{key:"untoggleCard",value:function(e){e="#"+e,$(e).css("opacity","1.0")}},{key:"handleGameLoop",value:function(){if(1==this.game.over)return this.updateStatus("Game Over: Player "+winner.toUpperCase()+" wins"),0;if(this.displayBoard(),this.game.queue.length>0){var e=this.game.queue.length-1,t=this.game.queue[e].split("\t"),a=1;if("turn"===t[0]&&(this.game.queue.splice(e,1),parseInt(t[1])==this.game.player&&this.playerTurn(),a=0),"round"===t[0]&&(this.displayUserInterface(),this.game.board.row1_slot1=this.game.deck[0].cards[this.game.deck[0].hand[0]],this.game.board.row1_slot2=this.game.deck[0].cards[this.game.deck[0].hand[1]],this.game.board.row1_slot3=this.game.deck[0].cards[this.game.deck[0].hand[2]],this.game.board.row1_slot4=this.game.deck[0].cards[this.game.deck[0].hand[3]],this.game.board.row1_slot5=this.game.deck[0].cards[this.game.deck[0].hand[4]],this.game.board.row1_slot6=this.game.deck[0].cards[this.game.deck[0].hand[5]],this.game.board.row1_slot7=this.game.deck[0].cards[this.game.deck[0].hand[6]],this.game.board.row1_slot8=this.game.deck[0].cards[this.game.deck[0].hand[7]],this.game.board.row1_slot9=this.game.deck[0].cards[this.game.deck[0].hand[8]],this.game.board.row1_slot10=this.game.deck[0].cards[this.game.deck[0].hand[9]],this.game.board.row2_slot1=this.game.deck[0].cards[this.game.deck[0].hand[10]],this.game.board.row2_slot2=this.game.deck[0].cards[this.game.deck[0].hand[11]],this.game.board.row2_slot3=this.game.deck[0].cards[this.game.deck[0].hand[12]],this.game.board.row2_slot4=this.game.deck[0].cards[this.game.deck[0].hand[13]],this.game.board.row2_slot5=this.game.deck[0].cards[this.game.deck[0].hand[14]],this.game.board.row2_slot6=this.game.deck[0].cards[this.game.deck[0].hand[15]],this.game.board.row2_slot7=this.game.deck[0].cards[this.game.deck[0].hand[16]],this.game.board.row2_slot8=this.game.deck[0].cards[this.game.deck[0].hand[17]],this.game.board.row2_slot9=this.game.deck[0].cards[this.game.deck[0].hand[18]],this.game.board.row2_slot10=this.game.deck[0].cards[this.game.deck[0].hand[19]],this.game.board.row3_slot1=this.game.deck[0].cards[this.game.deck[0].hand[20]],this.game.board.row3_slot2=this.game.deck[0].cards[this.game.deck[0].hand[21]],this.game.board.row3_slot3=this.game.deck[0].cards[this.game.deck[0].hand[22]],this.game.board.row3_slot4=this.game.deck[0].cards[this.game.deck[0].hand[23]],this.game.board.row3_slot5=this.game.deck[0].cards[this.game.deck[0].hand[24]],this.game.board.row3_slot6=this.game.deck[0].cards[this.game.deck[0].hand[25]],this.game.board.row3_slot7=this.game.deck[0].cards[this.game.deck[0].hand[26]],this.game.board.row3_slot8=this.game.deck[0].cards[this.game.deck[0].hand[27]],this.game.board.row3_slot9=this.game.deck[0].cards[this.game.deck[0].hand[28]],this.game.board.row3_slot10=this.game.deck[0].cards[this.game.deck[0].hand[29]],this.game.board.row4_slot1=this.game.deck[0].cards[this.game.deck[0].hand[30]],this.game.board.row4_slot2=this.game.deck[0].cards[this.game.deck[0].hand[31]],this.game.board.row4_slot3=this.game.deck[0].cards[this.game.deck[0].hand[32]],this.game.board.row4_slot4=this.game.deck[0].cards[this.game.deck[0].hand[33]],this.game.board.row4_slot5=this.game.deck[0].cards[this.game.deck[0].hand[34]],this.game.board.row4_slot6=this.game.deck[0].cards[this.game.deck[0].hand[35]],this.game.board.row4_slot7=this.game.deck[0].cards[this.game.deck[0].hand[36]],this.game.board.row4_slot8=this.game.deck[0].cards[this.game.deck[0].hand[37]],this.game.board.row4_slot9=this.game.deck[0].cards[this.game.deck[0].hand[38]],this.game.board.row4_slot10=this.game.deck[0].cards[this.game.deck[0].hand[39]],this.displayBoard(),a=0),"play"===t[0]&&this.game.queue.splice(e,1),"call"===t[0]&&this.game.queue.splice(e,1),"fold"===t[0]&&this.game.queue.splice(e,1),"raise"===t[0]&&this.game.queue.splice(e,1),0==a)return console.log("NOT CONTINUING"),0}return 1}},{key:"displayBoard",value:function(){if(0!=this.browser_active){try{for(var e in this.game.board)$("#"+e).html(this.returnCardImageHTML(this.game.board[e].name))}catch(e){}this.attachEventsToBoard()}}},{key:"returnCardImageHTML",value:function(e){return"E"==e[0]?"":'<img src="/solitrio/img/cards/'+e+'.png" />'}},{key:"returnDeck",value:function(){var e={2:{name:"S2"},3:{name:"S3"},4:{name:"S4"},5:{name:"S5"},6:{name:"S6"},7:{name:"S7"},8:{name:"S8"},9:{name:"S9"},10:{name:"S10"},12:{name:"C2"},13:{name:"C3"},14:{name:"C4"},15:{name:"C5"},16:{name:"C6"},17:{name:"C7"},18:{name:"C8"},19:{name:"C9"},20:{name:"C10"},22:{name:"H2"},23:{name:"H3"},24:{name:"H4"},25:{name:"H5"},26:{name:"H6"},27:{name:"H7"},28:{name:"H8"},29:{name:"H9"},30:{name:"H10"},32:{name:"D2"},33:{name:"D3"},34:{name:"D4"},35:{name:"D5"},36:{name:"D6"},37:{name:"D7"},38:{name:"D8"},39:{name:"D9"},40:{name:"D10"},41:{name:"E1"},42:{name:"E2"},43:{name:"E3"},44:{name:"E4"}};return e}},{key:"endTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.updateStatus("Waiting for information from peers...."),$(".menu_option").off();var t={};t.target=this.returnNextPlayer(this.game.player),0!=e&&(t.target=e),this.game.turn=this.moves,this.moves=[],this.sendMessage("game",t)}},{key:"displayUserInterface",value:function(){var e=this,t="Order cards by suite from 2 to 10. You may randomize the unarranged cards ";2==this.game.state.recycles_remaining&&(t+="two more times.",$(".chances").text("two chances")),1==this.game.state.recycles_remaining&&(t+="one more time.",$(".chances").text("one chance")),0==this.game.state.recycles_remaining&&(t+="no more times.",$(".chances").text("no chances")),this.game.state.recycles_remaining>0&&(t+=' <p></p><div id="recycles_remaining">click here to cycle the board</div>'),this.updateStatus(t),$(".logobox").off(),$(".logobox").on("click",(function(){e.recycleBoard(),e.game.state.recycles_remaining--,e.displayUserInterface()})),$("#recycles_remaining").off(),$("#recycles_remaining").on("click",(function(){0!=this.game.state.recycles_remaining?(e.recycleBoard(),e.game.state.recycles_remaining--,e.displayUserInterface()):salert("Sorry! No more chances!")}))}},{key:"recycleBoard",value:function(){for(var e=0,t=0,a=0,r=0,n=[],i=1;i<5;i++)for(var s="",o=1,c=1;c<11&&1==o;c++){var l="row"+i+"_slot"+c,u=this.returnCardSuite(l),d=this.returnCardNumber(l);1==c&&2==d?s=u:s!==u&&(o=0),s==u&&1==o&&d==c+1?(1==i&&(e=c),2==i&&(t=c),3==i&&(a=c),4==i&&(r=c)):o=0}for(var p=e+1;p<11;p++){var h="row1_slot"+p;n.push(this.game.board[h])}for(var f=t+1;f<11;f++){var m="row2_slot"+f;n.push(this.game.board[m])}for(var g=a+1;g<11;g++){var b="row3_slot"+g;n.push(this.game.board[b])}for(var y=r+1;y<11;y++){var v="row4_slot"+y;n.push(this.game.board[v])}n.sort((function(){return Math.random()-.5}));for(var _=0,w=e+1;w<11;w++){var x="row1_slot"+w;this.game.board[x]=n[_],_++}for(var k=t+1;k<11;k++){var S="row2_slot"+k;this.game.board[S]=n[_],_++}for(var P=a+1;P<11;P++){var E="row3_slot"+P;this.game.board[E]=n[_],_++}for(var C=r+1;C<11;C++){var A="row4_slot"+C;this.game.board[A]=n[_],_++}this.saveGame(this.game.id),this.displayBoard()}},{key:"returnCardSuite",value:function(e){return this.game.board[e].name[0]}},{key:"returnCardNumber",value:function(e){return this.game.board[e].name.substring(1)}},{key:"addMove",value:function(e){this.moves.push(e)}}])&&n(t.prototype,a),r&&n(t,r),u}(a(47));e.exports=u},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,a){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=u(e);if(t){var n=u(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?l(e):t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=a(47),p=(a(93),function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,a,r,c=o(d);function d(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=c.call(this,e)).app=e,t.name="Thirteen",t.slug="thirteen",t.description="Thirteen Days is a mid-length simulation of the Cuban Missile Crisis created by Asger Granerud and Daniel Skjold Pedersenmade.",t.publisher_message='Thirteen Days is owned by <a href="http://jollyrogergames.com/game/13-days/">Jolly Roger Games</a>. This module includes the open source Vassal module explicitly authorized by the publisher. Vassal module requirements are that at least one player per game has purchased a copy of the game. Please support Jolly Roger Games and purchase your copy <a href="http://jollyrogergames.com/game/13-days/">here</a>',t.type="Strategy Boardgame",t.categories="Games Arcade Entertainment",t.gameboardWidth=2450,t.moves=[],t.log_length=150,t.gameboardZoom=.9,t.gameboardMobileZoom=.67,t.minPlayers=2,t.maxPlayers=2,t.rounds_in_turn=1,t.all_battlegrounds=["cuba_pol","cuba_mil","atlantic","turkey","berlin","italy","un","television","alliances"],t.menuItems=["lang"],t.hud.mode=0,t.opponent_cards_in_hand=0,t.chengeable_callback=function(e){};var a=l(t);return t.cardbox_callback=function(e){a.changeable_callback(e)},t}return t=d,(a=[{key:"respondTo",value:function(e){if(null!=i(u(d.prototype),"respondTo",this).call(this,e))return i(u(d.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/thirteen/img/arcade/arcade-banner-background.png",title:"Thirteen Days"};return t}return null}},{key:"initializeHTML",value:function(e){var t=this;if(0!=this.browser_active){i(u(d.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(a){a.respondTo("chat-manager").render(e,t),a.respondTo("chat-manager").attachEvents(e,t)})),this.overlay.render(e,this),this.overlay.attachEvents(e,this),this.log.render(e,this),this.log.attachEvents(e,this),this.cardbox.render(e,this),this.cardbox.attachEvents(e,this),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"Log",id:"game-log",class:"game-log",callback:function(e,t){t.menu.hideSubMenus(),t.log.toggleLog()}}),this.menu.addMenuOption({text:"Cards",id:"game-cards",class:"game-cards",callback:function(e,t){t.menu.hideSubMenus(),t.handleCardsMenu()}});for(var a=0,r=0,n=0;n<this.app.modules.mods.length;n++)if("chat"===this.app.modules.mods[n].slug)for(var s=0;s<this.game.players.length;s++)this.game.players[s]!=this.app.wallet.returnPublicKey()&&function(){0==a&&(t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),a=1),0==r&&(t.menu.addSubMenuOption("game-chat",{text:"Community",id:"game-chat-community",class:"game-chat-community",callback:function(e,t){t.menu.hideSubMenus(),c.mute_community_chat=0,c.sendEvent("chat-render-request",{}),c.openChatBox(newgroup.id)}}),r=1);var e=[t.game.players[s],t.app.wallet.returnPublicKey()].sort(),i=t.app.crypto.hash(e.join("_")),o="Player "+(s+1),c=t.app.modules.mods[n];t.menu.addSubMenuOption("game-chat",{text:o,id:"game-chat-"+(s+1),class:"game-chat-"+(s+1),callback:function(t,a){a.menu.hideSubMenus(),c.createChatGroup(e,o),c.openChatBox(i),c.sendEvent("chat-render-request",{}),c.saveChat()}})}();this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}}),this.menu.render(e,this),this.menu.attachEvents(e,this),this.hud.render(e,this),this.hud.addCardType("logcard","",null),this.hud.addCardType("showcard","select",this.cardbox_callback),e.browser.isMobileBrowser(navigator.userAgent)||(this.cardbox.skip_card_prompt=1),this.hud.card_width=160,this.hud.render(e,this),this.hud.attachEvents(e,this);try{e.browser.isMobileBrowser(navigator.userAgent)?(this.hammer.render(this.app,this),this.hammer.attachEvents(this.app,this,".gameboard")):(this.sizer.render(this.app,this),this.sizer.attachEvents(this.app,this,".gameboard"))}catch(e){}}}},{key:"handleCardsMenu",value:function(){var e=this;e.overlay.showOverlay(e.app,e,'\n      <div class="game-overlay-menu" id="game-overlay-menu">\n        <div>SELECT DECK:</div>\n       <ul>\n          <li class="menu-item" id="hand">Your Hand</li>\n          <li class="menu-item" id="unplayed">Unplayed Cards</li>\n        </ul>\n      </div>\n    '),$(".menu-item").on("click",(function(){var t,a=$(this).attr("id"),r=e.game.deck[0],n="";switch(a){case"hand":t=r.hand;break;case"unplayed":t=Object.keys(e.returnUnplayedCards())}n+='<div class="cardlist-container">';for(var i=0;i<t.length;i++)n+='<div class="cardlist-card">',null!=t[i]&&(n+=e.returnCardImage(t[i],1)),n+="</div>";n+="</div>",0==t.length&&(n='\n          <div style="text-align:center; margin: auto;">\n            There are no cards in '.concat(a,"\n          </div>\n        ")),e.overlay.showOverlay(e.app,e,n)}))}},{key:"initializeGame",value:function(e){""!=this.game.status&&this.updateStatus(this.game.status),null==this.game.state&&(this.game.state=this.returnState()),null==this.game.flags&&(this.game.flags=this.returnFlags()),null==this.game.arenas&&(this.game.arenas=this.returnArenas()),null==this.game.prestige&&(this.game.prestige=this.returnPrestigeTrack()),null==this.game.rounds&&(this.game.rounds=this.returnRoundTrack()),null==this.game.defcon&&(this.game.defcon=this.returnDefconTracks()),0==this.game.deck.length&&(console.log("\n\n\n\n"),console.log("---------------------------"),console.log("---------------------------"),console.log("------ initialize game ----"),console.log("---------------------------"),console.log("---------------------------"),console.log("---------------------------"),console.log("\n\n\n\n"),this.updateStatus("<div class='status-message' id='status-message'>generating the game</div>"),this.game.queue.push("round"),this.game.queue.push("READY"),this.game.queue.push("DECKENCRYPT\t2\t2"),this.game.queue.push("DECKENCRYPT\t2\t1"),this.game.queue.push("DECKXOR\t2\t2"),this.game.queue.push("DECKXOR\t2\t1"),this.game.queue.push("DECK\t2\t"+JSON.stringify(this.returnStrategyCards())),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1"),this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnAgendaCards())),this.game.queue.push("init"),""===this.game.dice&&this.initializeDice());try{for(var t in $(".country").css("width",this.scale(260)+"px"),$(".us").css("width",this.scale(130)+"px"),$(".ussr").css("width",this.scale(130)+"px"),$(".us").css("height",this.scale(100)+"px"),$(".ussr").css("height",this.scale(100)+"px"),this.game.arenas){var a="#"+t,r=a+" > .us > img",n=a+" > .ussr > img";$(a).css("top",this.scale(this.game.arenas[t].top)+"px"),$(a).css("left",this.scale(this.game.arenas[t].left)+"px"),$(r).css("height",this.scale(100)+"px"),$(n).css("height",this.scale(100)+"px"),this.game.arenas[t].us>0&&this.showInfluence(t),this.game.arenas[t].ussr>0&&this.showInfluence(t)}for(var t in this.game.prestige){var i="."+t;$(i).css("top",this.scale(this.game.prestige[t].top)+"px"),$(i).css("left",this.scale(this.game.prestige[t].left)+"px")}for(var t in $(".prestige_slot").css("height",this.scale(50)+"px"),$(".prestige_slot").css("width",this.scale(50)+"px"),this.game.flags){var s="#"+t;$(s).css("top",this.scale(this.game.flags[t].top)+"px"),$(s).css("left",this.scale(this.game.flags[t].left)+"px")}for(var t in $(".flag").css("height",this.scale(60)+"px"),$(".flag").css("width",this.scale(60)+"px"),this.game.defcon){var o="."+t;$(o).css("top",this.scale(this.game.defcon[t].top)+"px"),$(o).css("left",this.scale(this.game.defcon[t].left)+"px")}for(var t in $(".round_slot").css("height",this.scale(60)+"px"),$(".round_slot").css("width",this.scale(60)+"px"),this.game.rounds){var c="."+t;$(c).css("top",this.scale(this.game.rounds[t].top)+"px"),$(c).css("left",this.scale(this.game.rounds[t].left)+"px")}$(".round_slot").css("height",this.scale(50)+"px"),$(".round_slot").css("width",this.scale(50)+"px"),$(".agenda_deck").css("top",this.scale(830)+"px"),$(".agenda_deck").css("left",this.scale(2068)+"px"),$(".agenda_deck").css("height",this.scale(362)+"px"),$(".agenda_deck").css("width",this.scale(264)+"px"),$(".strategy_deck").css("top",this.scale(1360)+"px"),$(".strategy_deck").css("left",this.scale(465)+"px"),$(".strategy_deck").css("height",this.scale(362)+"px"),$(".strategy_deck").css("width",this.scale(264)+"px")}catch(e){}this.showBoard()}},{key:"handleGameLoop",value:function(){var e=this;if(this.game.player,this.game.player,1==this.game.over){var t="ussr";2==this.game.winner&&(t="us");var a=$("#sage_game_id").attr("class");return a===this.game.id&&this.updateStatus("<div class='status-message' id='status-message'><span>game over:</span> "+t.touppercase()+"</span> <span>wins</span></div>"),0}if(this.game.queue.length>0){console.log("queue: "+JSON.stringify(this.game.queue));var r=this.game.queue.length-1,n=this.game.queue[r].split("\t");if("init"===n[0]){if(this.game.players[0],null!=this.game.options.player1){if("random"==this.game.options.player1){var i=this.rollDice(6);this.game.options.player1=i<=3?"us":"ussr"}this.game.players[0]===this.app.wallet.returnPublicKey()?"us"==this.game.options.player1?this.game.player=2:this.game.player=1:"us"==this.game.options.player1?this.game.player=1:this.game.player=2}return this.game.queue.splice(r,1),1}if("reshuffle_discarded_agenda_cards"===n[0]){var s=this.returnDiscardedCards(1);return Object.keys(s).length>0&&(e.game.queue.push("SHUFFLE\t1"),e.game.queue.push("DECKRESTORE\t1"),e.game.queue.push("DECKENCRYPT\t1\t2"),e.game.queue.push("DECKENCRYPT\t1\t1"),e.game.queue.push("DECKXOR\t1\t2"),e.game.queue.push("DECKXOR\t1\t1"),e.game.queue.push("flush\tdiscards\t1"),e.game.queue.push("DECK\t1\t"+JSON.stringify(s)),e.game.queue.push("DECKBACKUP\t1"),e.updateLog("cards remaining: "+e.game.deck[0].crypt.length),e.updateLog("shuffling discarded agenda cards back into the deck...")),this.game.queue.splice(r,1),1}if("pick_agenda_card"===n[0]){var o=parseInt(n[1]),c=this.returnAgendaCards();if(this.game.player==o){var l="";1==this.game.player&&(l="USSR pick your Agenda Card: "),2==this.game.player&&(l="US pick your Agenda Card: "),this.updateStatusAndListCards(l,this.game.deck[0].hand,(function(t){e.addMove("RESOLVE");for(var a=0;a<e.game.deck[0].hand.length;a++)e.addMove("flag\t"+e.game.player+"\t"+c[e.game.deck[0].hand[a]].flag),e.game.deck[0].hand[a]==t&&(1==o&&(e.game.state.ussr_agenda_selected=t),2==o&&(e.game.state.us_agenda_selected=t)),e.addMove("discard\t"+e.game.player+"\t1\t"+e.game.deck[0].hand[a]+"\t0");e.endTurn()}))}else if(1==o){var u="";1==this.game.player&&(u="Your (USSR) agenda cards. Waiting for opponent to select: "),2==this.game.player&&(u="Your (US) agenda cards. Waiting for opponent to select:"),this.updateStatusAndListCards(u,this.game.deck[0].hand,(function(e){}))}else 1==this.game.player&&this.updateStatusAndListCards("waiting for US to pick its agenda card: ",this.game.deck[0].hand,(function(e){})),2==this.game.player&&this.updateStatusAndListCards("waiting for USSR to pick its agenda card: ",this.game.deck[0].hand,(function(e){}));return 0}if("discard"===n[0]){var d=parseInt(n[1]),p=parseInt(n[2])-1,h=n[3],f=1;n[3]&&(f=parseInt(n[3]));var m="ussr";2==d&&(m="us"),1==f&&this.updateLog("<span>"+m+' discards</span> <span class="logcard" id="'+h+'">'+this.game.deck[p].cards[h].name+"</span>");for(var g=0;g<this.game.deck[p].hand.length;g++)h==this.game.deck[p].hand[g]&&(this.game.deck[p].discards[h]=this.game.deck[p].hand[h],this.removeCardFromHand(h));return this.game.queue.splice(r,1),1}if("setvar"===n[0]){if("opponent_cards_in_hand"==n[1]&&(this.opponent_cards_in_hand=parseInt(n[2])),"personal_letter"==n[1]&&(2==parseInt(n[2])&&(this.game.state.personal_letter=1),1==parseInt(n[2])&&(this.game.state.personal_letter=2)),"add_command_token_bonus"==n[1]){var b=parseInt(n[2]);1==b?this.game.state.ussr_command_token_bonus++:this.game.state.us_command_token_bonus++}if("remove_command_token_bonus"==n[1]){var y=parseInt(n[2]);1==y?this.game.state.ussr_command_token_bonus--:this.game.state.us_command_token_bonus--}if("cannot_deflate_defcon_from_events"==n[1]){var v=parseInt(n[2]);1==v?this.game.state.ussr_cannot_deflate_defcon_from_events=1:this.game.state.us_cannot_deflate_defcon_from_events=2}return this.game.queue.splice(r,1),1}if("flush"===n[0]){var _=parseInt(n[2])-1;return"discards"==n[1]&&(this.game.deck[_].discards={}),this.game.queue.splice(r,1),1}if("flag"==n[0]){var w=parseInt(n[1]),x=n[2];return 1==w?this.game.state.ussr_agendas.push(x):this.game.state.us_agendas.push(x),this.showBoard(),this.game.queue.splice(r,1),1}if("move_strategy_card_into_alliances"==n[0])return 1==this.game.player?(this.game.state.ussr_alliances.push(this.game.deck[0].hand[0]),this.removeCardFromHand(this.game.deck[0].hand[0])):(this.game.state.us_alliances.push(this.game.deck[0].hand[0]),this.removeCardFromHand(this.game.deck[0].hand[0])),this.game.queue.splice(r,1),1;if("defcon_check"==n[0]){var k=0,S=0;return(this.game.state.defcon1_us>6||this.game.state.defcon2_us>6&&this.game.state.defcon3_us>6)&&(k=1),this.game.state.defcon1_us>3&&this.game.state.defcon2_us>3&&this.game.state.defcon3_us>3&&(k=1),(this.game.state.defcon1_ussr>6||this.game.state.defcon2_ussr>6&&this.game.state.defcon3_ussr>6)&&(S=1),this.game.state.defcon1_ussr>3&&this.game.state.defcon2_ussr>3&&this.game.state.defcon3_ussr>3&&(S=1),1==k&&1==S?(this.updateStatus("<div class='status-message' id='status-message'>US and USSR both lose from DEFCON</div>"),0):1==k?(this.endGame("ussr","US DEFCON too high"),0):1==S?(this.endGame("us","US DEFCON too high"),0):(this.game.queue.splice(r,1),1)}if("tally_alliances"==n[0])return console.log("tallying alliances before scoring"),this.game.queue.splice(r,1),1;if("scoring_result"==n[0]){var P=parseInt(n[1]),E=parseInt(n[2]);return this.updateLog("vp change: "+E),1==P&&(this.total_scoring_this_round=0,this.total_scoring_this_round+=E),2==P&&(this.total_scoring_this_round+=E,this.total_scoring_this_round>5&&(this.total_scoring_this_round=5,this.addMove("notify\tUSSR restricted to 5 prestige gain this round")),this.total_scoring_this_round<-5&&(this.total_scoring_this_round=-5,this.addMove("notify\tUS restricted to 5 prestige gain this round")),this.total_scoring_this_round<0&&this.updateLog("US gains "+-1*this.total_scoring_this_round+" Prestige"),this.total_scoring_this_round>0&&this.updateLog("USSR gains "+this.total_scoring_this_round+" Prestige"),0==this.total_scoring_this_round&&this.updateLog("US and USSR tie for Prestige..."),this.game.state.prestige_track+=this.total_scoring_this_round,this.game.state.prestige_track>12&&(this.game.state.prestige_track=12),this.game.state.prestige_track<2&&(this.game.state.prestige_track=2)),this.game.queue.splice(r,1),1}if("scoring_phase"==n[0]){var C=parseInt(n[1]),A=this.returnAgendaCards();return this.game.player==C&&(1==C&&(this.addMove("scoring_result\t1\t"+A[this.game.state.ussr_agenda_selected].score()),this.addMove("notify\tUSSR choses to score "+A[this.game.state.ussr_agenda_selected].name),this.endTurn()),2==C&&(this.addMove("scoring_result\t2\t"+A[this.game.state.us_agenda_selected].score()),this.addMove("notify\tUS choses to score "+A[this.game.state.us_agenda_selected].name),this.endTurn())),this.game.queue.splice(r,1),0}if("world_opinion_phase"==n[0]){this.game.queue.splice(r,1);var M=n[1];if("television"==M){var T=0;return this.game.arenas.television.us>this.game.arenas.television.ussr&&(T=2),this.game.arenas.television.us<this.game.arenas.television.ussr&&(T=1),0==T?(this.updateLog("no-one gets the Television  bonus this turn"),1):this.game.player==T?(1==this.game.player&&this.updateStatus("<div class='status-message' id='status-message'>USSR receives Television Battleground bonus: adjust one DEFCON track one level.</div>"),2==this.game.player&&this.updateStatus("<div class='status-message' id='status-message'>USSR receives Television Battleground bonus: adjust one DEFCON track one level.</div>"),this.eventShiftDefcon(this.game.player,this.game.player,[1,2,3],1,1,(function(){e.endTurn()})),0):(1==this.game.player&&this.updateStatus("<div class='status-message' id='status-message'>US is taking Television Battleground bonus</div>"),2==this.game.player&&this.updateStatus("<div class='status-message' id='status-message'>USSR is taking Television Battleground bonus</div>"),0)}if("un"==M){var j=0;return this.game.arenas.un.us>this.game.arenas.un.ussr&&(j=2),this.game.arenas.un.us<this.game.arenas.un.ussr&&(j=1),0==j?(this.updateLog("no-one gets the United Nations bonus this turn"),1):(1==j&&this.updateLog("USSR secures the Personal Letter"),2==j&&this.updateLog("US secures the Personal Letter"),this.game.state.personal_letter=j,1)}if("alliances"==M){var O=0;return this.game.arenas.alliances.us>this.game.arenas.alliances.ussr&&(O=2),this.game.arenas.alliances.us<this.game.arenas.alliances.ussr&&(O=1),0==O?(this.updateLog("no-one gets the Alliances bonus this turn"),1):this.game.player==O?(1==this.game.player&&this.updateStatus("<div class='status-message' id='status-message'>You are pulling the Alliances Battleground Bonus: pulling strategy card</div>"),2==this.game.player&&this.updateStatus("<div class='status-message' id='status-message'>You are pulling the Alliances Battleground Bonus: pulling strategy card</div>"),this.addMove("aftermath_or_discard\t"+this.game.player),this.addMove("DEAL\t2\t1\t1"),this.endTurn(),0):(1==this.game.player&&this.updateStatus("<div class='status-message' id='status-message'>Alliances Battleground Bonus: US is pulling strategy card</div>"),2==this.game.player&&this.updateStatus("<div class='status-message' id='status-message'>Alliances Battleground Bonus: USSR is pulling strategy card</div>"),0)}}if("aftermath_or_discard"==n[0]){var D=parseInt(n[1]),I=this.returnStrategyCards();if(this.game.queue.splice(r,1),this.game.player==D){var R=this.game.deck[1].hand[0],B='<div class="status-message" id="status-message">You have pulled <span class="showcard" id="'+R+'">'+I[R].name+"</span> as Aftermath bonus card:<ul>";B+='<li class="card" id="discard">discard card</li>',B+='<li class="card" id="'+R+'">put in aftermath</li></ul></div>',e.updateStatus(B),e.addShowCardEvents((function(t){if("discard"==t)return e.addMove("discard\t"+e.game.player+"\t1\t"+t+"\t1"),e.addMove("notify\tWorld Opinion bonus card is discarded"),void e.endTurn();1==e.game.player&&e.game.state.aftermath_ussr.push(t),2==e.game.player&&e.game.state.aftermath_us.push(t),e.endTurn()}))}return 0}if("pullcard"==n[0]){this.game.queue.splice(r,1);var q=parseInt(n[1]);if(this.game.player==q)return this.rollDice(),0;this.rollDice(this.game.deck[1].hand.length,(function(t){var a=parseInt(t)-1;if(0==e.game.deck[1].hand.length)return e.addMove("notify\topponent has no Strategy Card s to discard"),e.endTurn(),0;var r=e.game.deck[1].hand[a];return e.addMove("share_card\t"+e.game.player+"\t"+r),e.endTurn(),0}))}if("share_card"==n[0]){var L=parseInt(n[1]),N=n[2],F=this.returnStrategyCards();if(this.game.player==L)this.removeCardFromHand(N);else{var U='<div class="status-message" id="status-message">you have pulled <span class="showcard" id="'+N+'">'+F[N].name+"</span><ul>";U+='<li class="card" id="discard">discard card</li>',U+='<li class="card" id="'+N+'">play card</li>',U+="</div>",e.updateStatus(U),e.addShowCardEvents((function(t){"discard"==t?(1==e.game.player&&e.notify("notify\tUSSR discards the card without triggering the event"),2==e.game.player&&e.notify("notify\tUS discards the card without triggering the event"),e.endTurn()):e.playerPlayStrategyCard(t)}))}return this.game.queue.splice(r,1),0}if("notify"===n[0])return this.updateLog(n[1]),this.game.queue.splice(r,1),1;if("round"==n[0])return console.log(JSON.stringify(this.game.deck[0])),this.game.state.round++,4==this.game.state.round?(this.game.state.prestige>7&&this.endGame("ussr","prestige track"),this.game.state.prestige<7&&this.endGame("us","prestige track"),7==this.game.state.prestige&&this.endGame("us/ussr","tie game"),0):(this.game.state.round>1&&(1==this.game.player&&(this.game.state.aftermath_ussr.push(this.game.deck[1].hand[0]),this.removeCardFromHand(this.game.deck[1].hand[0])),2==this.game.player&&(this.game.state.aftermath_us.push(this.game.deck[1].hand[0]),this.removeCardFromHand(this.game.deck[1].hand[0]))),this.game.deck[1].hand=[],this.game.state.ussr_command_token_bonus=0,this.game.state.us_command_token_bonus=0,this.game.state.ussr_cannot_deflate_defcon_from_events=0,this.game.state.us_cannot_deflate_defcon_from_events=0,3==this.game.state.round&&this.game.queue.push("tally_alliances"),this.game.queue.push("defcon_check"),this.game.queue.push("scoring_phase\t2"),this.game.queue.push("scoring_phase\t1"),this.game.queue.push("world_opinion_phase\talliances"),this.game.queue.push("world_opinion_phase\tun"),this.game.queue.push("world_opinion_phase\ttelevision"),this.game.queue.push("move_strategy_card_into_alliances"),"ussr"===this.returnInitiative()?(this.game.queue.push("play\t1"),this.game.queue.push("play\t2"),this.game.queue.push("play\t1"),this.game.queue.push("play\t2"),this.game.queue.push("play\t1"),this.game.queue.push("play\t2"),this.game.queue.push("play\t1"),this.game.queue.push("play\t2")):(this.game.queue.push("play\t2"),this.game.queue.push("play\t1"),this.game.queue.push("play\t2"),this.game.queue.push("play\t1"),this.game.queue.push("play\t2"),this.game.queue.push("play\t1"),this.game.queue.push("play\t2"),this.game.queue.push("play\t1")),this.game.queue.push("DEAL\t2\t1\t5"),this.game.queue.push("DEAL\t2\t2\t5"),this.game.state.us_agendas=[],this.game.state.ussr_agendas=[],this.game.queue.push("reshuffle_discarded_agenda_cards"),this.game.queue.push("pick_agenda_card\t2"),this.game.queue.push("pick_agenda_card\t1"),this.updateLog("3 agenda cards dealt to each player"),this.game.queue.push("DEAL\t1\t1\t3"),this.game.queue.push("DEAL\t1\t2\t3"),this.game.queue.push("SHUFFLE\t1"),this.updateLog("all defcon tracks increased by 1"),this.game.state.defcon1_us++,this.game.state.defcon1_ussr++,this.game.state.defcon2_us++,this.game.state.defcon2_ussr++,this.game.state.defcon3_us++,this.game.state.defcon3_ussr++,this.showBoard(),1);if("increase_defcon"==n[0]){var z=parseInt(n[1]),H=parseInt(n[2]),G=parseInt(n[3]),K=-1;return null!=n[4]&&(K=parseInt(n[4])),this.game.player==K?(this.game.queue.splice(r,1),1):(1==z&&(1==H&&(this.game.state.defcon1_ussr+=G,this.game.state.defcon1_ussr>8&&(this.game.state.defcon1_ussr=8)),2==H&&(this.game.state.defcon2_ussr+=G,this.game.state.defcon2_ussr>8&&(this.game.state.defcon2_ussr=8)),3==H&&(this.game.state.defcon3_ussr+=G,this.game.state.defcon3_ussr>8&&(this.game.state.defcon3_ussr=8))),2==z&&(1==H&&(this.game.state.defcon1_us+=G,this.game.state.defcon1_us>8&&(this.game.state.defcon1_us=8)),2==H&&(this.game.state.defcon2_us+=G,this.game.state.defcon2_us>8&&(this.game.state.defcon2_us=8)),3==H&&(this.game.state.defcon3_us+=G,this.game.state.defcon3_us>8&&(this.game.state.defcon3_us=8))),this.showBoard(),this.game.queue.splice(r,1),1)}if("decrease_defcon"==n[0]){var W=parseInt(n[1]),V=parseInt(n[2]),Y=parseInt(n[3]),J=-1;if(null!=n[4]&&(J=parseInt(n[4])),this.game.queue.splice(r,1),this.game.player==J)return 1;1==W&&(1==V&&(this.game.state.defcon1_ussr-=Y,this.game.state.defcon1_ussr<1&&(this.game.state.defcon1_ussr=1)),2==V&&(this.game.state.defcon2_ussr-=Y,this.game.state.defcon2_ussr<1&&(this.game.state.defcon2_ussr=1)),3==V&&(this.game.state.defcon3_ussr-=Y,this.game.state.defcon3_ussr<1&&(this.game.state.defcon3_ussr=1))),2==W&&(1==V&&(this.game.state.defcon1_us-=Y,this.game.state.defcon1_us<1&&(this.game.state.defcon1_us=1)),2==V&&(this.game.state.defcon2_us-=Y,this.game.state.defcon2_us<1&&(this.game.state.defcon2_us=1)),3==V&&(this.game.state.defcon3_us-=Y,this.game.state.defcon3_us<1&&(this.game.state.defcon3_us=1))),this.showBoard()}if("place_command_tokens"==n[0]){var X=parseInt(n[1]),Q=n[2];return console.log("SHOULD PLACE: "+X),this.game.player==X&&this.playerPlaceCommandTokens(X,Q),this.game.queue.splice(r,1),0}if("trigger_opponent_event"==n[0]){var Z=parseInt(n[1]),ee=n[2],te=this.returnStrategyCards();1==Z&&1==this.game.state.ussr_cannot_deflate_defcon_from_events&&(this.game.state.ussr_cannot_deflate_defcon_from_events=2),2==Z&&1==this.game.state.us_cannot_deflate_defcon_from_events&&(this.game.state.us_cannot_deflate_defcon_from_events=2);var ae="";if(1==Z&&(ae="USSR"),2==Z&&(ae="US"),ae+=' plays <span class="logcard" id="'+ee+'">'+te[ee].name+"</span>",this.updateLog(ae),this.game.player==Z){var re="<div class='status-message' id='status-message'>"+te[ee].name+": "+te[ee].text+' <p></p><ul><li class="card" id="done">finish turn</li></ul></div>';this.updateStatus(re),te[ee].event(Z)}return this.game.queue.splice(r,1),0}if("event_command_influence"==n[0]){var ne=parseInt(n[1]),ie=n[2],se=parseInt(n[3]);return this.game.player==ne&&this.playerPlaceCommandTokens(ne,ie,se),this.game.queue.splice(r,1),0}if("event_add_influence"==n[0]){var oe=parseInt(n[1]),ce=parseInt(n[2]),le=JSON.parse(this.app.crypto.base64ToString(n[3])),ue=parseInt(n[4]),de=parseInt(n[5]),pe=parseInt(n[6]);return this.game.player==oe&&this.eventAddInfluence(oe,ce,le,ue,de,pe,(function(){e.endTurn()})),this.game.queue.splice(r,1),0}if("add_influence"==n[0]){var he=parseInt(n[1]),fe=n[2],me=parseInt(n[3]),ge=n[4];return ge!=this.game.player&&(1==he?ge!=this.game.player&&(this.game.state.influence_on_board_ussr+me>17&&(me=17-this.game.state.influence_on_board_ussr,this.updateLog("USSR can only have 17 influence on the board at any time. Reducing placement")),this.game.arenas[fe].ussr+=me,this.game.arenas[fe].ussr>5&&(this.game.arenas[fe].ussr=5)):ge!=this.game.player&&(this.game.state.influence_on_board_us+me>17&&(me=17-this.game.state.influence_on_board_us,this.updateLog("USSR can only have 17 influence on the board at any time. Reducing placement")),this.game.arenas[fe].us+=me,this.game.arenas[fe].us>5&&(this.game.arenas[fe].us=5))),this.showBoard(),this.game.queue.splice(r,1),1}if("event_remove_influence"==n[0]){var be=parseInt(n[1]),ye=parseInt(n[2]),ve=JSON.parse(this.app.crypto.base64ToString(n[3])),_e=parseInt(n[4]),we=parseInt(n[5]),xe=parseInt(n[6]);return this.game.player==be&&this.eventRemoveInfluence(be,ye,ve,_e,we,xe,(function(){e.endTurn()})),this.showBoard(),this.game.queue.splice(r,1),1}if("remove_influence"==n[0]){var ke=parseInt(n[1]),Se=n[2],Pe=parseInt(n[3]),Ee=n[4];return Ee!=this.game.player&&(1==ke?ke!=this.game.player&&(this.game.arenas[Se].ussr-=Pe,this.game.arenas[Se].ussr<0&&(this.game.arenas[Se].ussr=0)):ke!=this.game.player&&(this.game.arenas[Se].us-=Pe,this.game.arenas[Se].us<0&&(this.game.arenas[Se].us=0))),this.game.queue.splice(r,1),this.showBoard(),1}if("event_increase_defcon"==n[0]){var Ce=parseInt(n[1]),Ae=parseInt(n[2]),Me=JSON.parse(this.app.crypto.base64ToString(n[3])),Te=parseInt(n[4]),je=parseInt(n[5]);return this.game.player!=Ce&&this.eventShiftDefcon(Ce,Ae,Me,Te,je,(function(){e.endTurn()}),"increase"),this.game.queue.splice(r,1),0}if("event_decrease_defcon"==n[0]){var Oe=parseInt(n[1]),De=parseInt(n[2]),Ie=JSON.parse(this.app.crypto.base64ToString(n[3])),Re=parseInt(n[4]),Be=parseInt(n[5]);return this.game.player!=Oe&&this.eventShiftDefcon(Oe,De,Ie,Re,Be,(function(){e.endTurn()}),"decrease"),this.game.queue.splice(r,1),0}if("event_shift_defcon"==n[0]){var qe=parseInt(n[1]),Le=parseInt(n[2]),Ne=JSON.parse(this.app.crypto.base64ToString(n[3])),Fe=parseInt(n[4]),Ue=parseInt(n[5]);return this.game.player==qe&&this.eventShiftDefcon(qe,Le,Ne,Fe,Ue,(function(){e.endTurn()})),this.game.queue.splice(r,1),0}if("prestige"==n[0]){var $e=parseInt(n[1]),ze=parseInt(n[2]);1==$e?(this.game.state.prestige_track+=ze,this.updateLog("USSR gains "+ze+" prestige")):(this.game.state.prestige_track+=ze,this.updateLog("US gains "+ze+" prestige")),this.game.state.prestige_track>12&&(this.game.state.prestige_track=12),this.game.state.prestige_track<2&&(this.game.state.prestige_track=2),this.game.queue.splice(r,1),this.showBoard()}if("bayofpigs"==n[0]){if(this.game.queue.splice(r,1),2==this.game.player){var He="<div class='status-message' id='status-message'>you must either remove two influence from alliance battleground or choose not to use events to lower defcon for this round: <p></p><ul>";He+='<li class="card" id="remove">remove influence</li>',He+='<li class="card" id="restrict">defcon restriction</li>',He+="</ul></div>",e.updateStatus(He),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id");"remove"==t&&e.eventRemoveInfluence(2,2,["un","alliances","television"],2,2,0,(function(t){e.endTurn()})),"restrict"==t&&(e.addMove("setvar\tcannot_deflate_defcon_from_events\t2"),e.endTurn())}))}return 0}if("play"==n[0])return this.game.state.ussr_cannot_deflate_defcon_from_events>1&&(this.game.state.ussr_cannot_deflate_defcon_from_events=1),this.game.state.us_cannot_deflate_defcon_from_events>1&&(this.game.state.us_cannot_deflate_defcon_from_events=1),this.game.state.turn=parseInt(n[1]),this.game.queue.splice(r,1),this.playerTurn(),0}return 1}},{key:"removeEventsFromBoard",value:function(){$(".country").off()}},{key:"playerTurn",value:function(){var e=this;if(this.game.state.personal_letter_bonus=0,this.removeEventsFromBoard(),this.game.state.turn!=this.game.player)this.hideCard(),1==this.game.player&&this.updateStatusAndListCards("waiting for US to move..."),2==this.game.player&&this.updateStatusAndListCards("waiting for USSR to move...");else{var t="";1==this.game.player&&(t="USSR pick a card to play: "),2==this.game.player&&(t="US pick a card to play: ");for(var a=[],r=0;r<this.game.deck[1].hand.length;r++)a.push(this.game.deck[1].hand[r]);this.game.player==this.game.state.personal_letter&&a.push("personal_letter"),console.log("CARDS: "+JSON.stringify(a)),this.updateStatusAndListCards(t,a,(function(r){if("personal_letter"==r){e.game.state.personal_letter_bonus=1;for(var n=[],i=0;i<a.length;i++)"personal_letter"!=a[i]&&n.push(a[i]);1==e.game.player&&(t="USSR pick a card to play (+1 bonus): "),2==e.game.player&&(t="US pick a card to play (+1 bonus): "),e.addMove("setvar\tpersonal_letter\t"+e.game.player),e.updateStatusAndListCards(t,n,(function(t){e.addMove("discard\t"+e.game.player+"\t2\t"+t+"\t1"),e.playerPlayStrategyCard(t)}))}else e.addMove("discard\t"+e.game.player+"\t2\t"+r+"\t1"),e.playerPlayStrategyCard(r)}))}}},{key:"playerPlayStrategyCard",value:function(e){var t=this,a=this.returnStrategyCards(),r=a[e],n="",i="ussr";2==this.game.player&&(i="us"),"neutral"==r.side||r.side==i?(n='<div class="status-message" id="status-message">how would you like to play this card: <p></p><ul>',n+='<li class="card" id="playevent">play for event</li>',n+='<li class="card" id="playcommand">play for command</li>',n+="</ul></div>"):(n="<div class='status-message' id='status-message'>how would you like to play this card: <p></p><ul>",n+='<li class="card" id="playcommand">play for command</li>',n+="</ul></div>"),t.updateStatus(n),$(".card").off(),$(".card").on("click",(function(){var r=$(this).attr("id");if($(".card").off(),"playevent"==r)return t.hideCard(),1==t.game.player&&t.addMove("notify\tUSSR plays <span class='logcard' id='"+e+"'>"+a[e].name+"</span> for event"),2==t.game.player&&t.addMove("notify\tUS plays <span class='logcard' id='"+e+"'>"+a[e].name+"</span> for event"),void t.playerTriggerEvent(t.game.player,e);if("playcommand"!=r);else{var n="us",i=1;t.hideCard(),1==t.game.player&&(n="ussr",i=2);var s=t.returnStrategyCards();"neutral"==s[e].side||s[e].side==n?t.playerPlaceCommandTokens(t.game.player,e):(t.updateLog("opponent playing event first..."),t.addMove("place_command_tokens\t"+t.game.player+"\t"+e),t.addMove("trigger_opponent_event\t"+i+"\t"+e),1==t.game.player&&t.addMove("notify\tUSSR plays <span class='logcard' id='"+e+"'>"+a[e].name+"</span> for command"),2==t.game.player&&t.addMove("notify\tUS plays <span class='logcard' id='"+e+"'>"+a[e].name+"</span> for command"),t.endTurn())}}))}},{key:"addInfluence",value:function(e,t,a){if(1==e&&this.game.state.influence_on_board_ussr+a>17&&(a=17-this.game.state.influence_on_board_ussr,this.updateLog("USSR can only have 17 influence on the board at any time. Reducing placement")),2==e&&this.game.state.influence_on_board_us+a>17&&(a=17-this.game.state.influence_on_board_us,this.updateLog("US can only have 17 influence on the board at any time. Reducing placement")),1==e){if(this.game.arenas[t].ussr+=a,this.game.arenas[t].ussr>5)return this.game.arenas[t].ussr=5,!0;this.updateLog("USSR gains "+a+" influence in "+this.game.arenas[t].name)}else{if(this.game.arenas[t].us+=a,this.game.arenas[t].us>5)return this.game.arenas[t].us=5,!0;this.updateLog("US gains "+a+" influence in "+this.game.arenas[t].name)}return!0}},{key:"removeInfluence",value:function(e,t,a){if(1==e){if(this.game.arenas[t].ussr-=a,this.game.arenas[t].ussr<0)return this.game.arenas[t].ussr=0,!0;this.updateLog("USSR removes "+a+" influence in "+this.game.arenas[t].name)}else{if(this.game.arenas[t].us-=a,this.game.arenas[t].us<0)return this.game.arenas[t].us=0,!0;this.updateLog("US removes "+a+" influence in "+this.game.arenas[t].name)}return!0}},{key:"eventIncreaseDefcon",value:function(e,t,a,r,n){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.eventShiftDefcon(e,t,a,r,n,i,"increase")}},{key:"eventDecreaseDefcon",value:function(e,t,a,r,n){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;this.eventShiftDefcon(e,t,a,r,n,i,"decrease")}},{key:"eventShiftDefcon",value:function(e,t,a,r,n){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"both";if("decrease"==s){if(1==e&&1==this.game.state.ussr_cannot_deflate_defcon_from_events)return this.updateLog("USSR cannot deflate defcon from events this turn"),void i();if(2==e&&1==this.game.state.us_cannot_deflate_defcon_from_events)return this.updateLog("US cannot deflate defcon from events this turn"),void i()}var o=this,c={},l=0,u=-1,d=0,p=0;100==r&&(a.length>1&&(p=-1),d=1,r=n),c.choosetrack=function(){o.removeEventsFromBoard(),"done"==$(this).attr("id")&&i();var e="<div class='status-message' id='status-message'>Adjust which DEFCON track: <p></p><ul>";1==d?0==p?(e+='<li class="card" id="1">political</li>',e+='<li class="card" id="2">military</li>',e+='<li class="card" id="3">world opinion</li>'):p<0?(a.includes(1)&&(e+='<li class="card" id="1">military</li>'),a.includes(2)&&(e+='<li class="card" id="2">political</li>'),a.includes(3)&&(e+='<li class="card" id="3">world opinion</li>')):(1==p&&(e+='<li class="card" id="1">military</li>'),2==p&&(e+='<li class="card" id="2">political</li>'),3==p&&(e+='<li class="card" id="3">world opinion</li>')):(a.includes(1)&&(e+='<li class="card" id="1">military</li>'),a.includes(2)&&(e+='<li class="card" id="2">political</li>'),a.includes(3)&&(e+='<li class="card" id="3">world opinion</li>')),e+='<li class="card" id="done">finish move</li>',e+="</ul>",e+="</div>",o.updateStatus(e),$(".card").off(),$(".card").on("click",(function(){"done"!=(u=$(this).attr("id"))?(p=u,c.choosedirection()):i()}))},c.choosedirection=function(){o.removeEventsFromBoard();var e="<div class='status-message' id='status-message'>escalate or de-escalate defcon track? <p></p><ul>";"decrease"!=s&&(e+='<li class="card" id="increase">escalate defcon</li>'),"increase"!=s&&(e+='<li class="card" id="decrease">de-escalate defcon</li>'),e+='<li class="card" id="done">done</li>',e+="</ul></div>",o.updateStatus(e),$(".card").off(),$(".card").on("click",(function(){$(".done").off(),$(".done").on("click",(function(){null!=i&&i()}));var e=$(this).attr("id");if(l++,"increase"==e&&(1==t?(1==u&&o.game.state.defcon1_ussr++,2==u&&o.game.state.defcon2_ussr++,3==u&&o.game.state.defcon3_ussr++):(1==u&&o.game.state.defcon1_us++,2==u&&o.game.state.defcon2_us++,3==u&&o.game.state.defcon3_us++),o.addMove("increase_defcon\t"+t+"\t"+u+"\t1\t"+o.game.player)),"decrease"==e&&(1==t?(1==u&&o.game.state.defcon1_ussr--,2==u&&o.game.state.defcon2_ussr--,3==u&&o.game.state.defcon3_ussr--):(1==u&&o.game.state.defcon1_us--,2==u&&o.game.state.defcon2_us--,3==u&&o.game.state.defcon3_us--),o.addMove("decrease_defcon\t"+t+"\t"+u+"\t1\t"+o.game.player)),o.showBoard(),!(100==r&&l>=n))return l>=r?void(null!=i&&i()):void c.choosetrack();i()}))},c.choosetrack()}},{key:"eventAddInfluence",value:function(e,t,a,r,n){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=document.getElementById("done");if(!o){var c=r;100==r&&(c=n),this.updateStatus("<div class='status-message' id='status-message'>Add "+c+' Influence: <p></p><ul><li class="card" id="done">finish turn</li></ul></div>')}var l=this,u="";$("#done").off(),$("#done").on("click",(function(){null!=s&&s()}));var d=[],p=0;this.removeEventsFromBoard();for(var h=0;h<a.length;h++){d[a[h]]=0;var f="#"+a[h];$(f).off(),$(f).on("click",(function(){var a=$(this).attr("id");if(100!=r||""==u||a==u)if(100==r&&""==u&&(u=a),d[a]>=n)salert("you cannot place more influence there.");else if(l.addInfluence(t,a,1)){p++,d[a]++,l.addMove("add_influence\t"+t+"\t"+a+"\t1\t"+l.game.player),l.showBoard(),p>=n&&100==r&&(r=n);var o=0;if(1==e&&17==l.game.state.influence_on_board_ussr&&(o=1),2==e&&17==l.game.state.influence_on_board_us&&(o=1),p>=r||1==o){if(1==o&&salert("You have hit your limit of 17 influence cubes on the board. Ending placement"),1==i)for(var c in d){var h=d[c]-1;if(h>0){var f=1;"cuba_mil"==c&&(f=1),"atlantic"==c&&(f=1),"berlin"==c&&(f=1),"cuba_pol"==c&&(f=2),"turkey"==c&&(f=2),"italy"==c&&(f=2),"un"==c&&(f=3),"television"==c&&(f=3),"alliances"==c&&(f=3),1==l.game.player?(1==f&&(l.game.state.defcon1_ussr+=h),2==f&&(l.game.state.defcon2_ussr+=h),3==f&&(l.game.state.defcon3_ussr+=h),l.game.state.defcon1_ussr<0&&(l.game.state.defcon1_ussr=0),l.game.state.defcon2_ussr<0&&(l.game.state.defcon2_ussr=0),l.game.state.defcon3_ussr<0&&(l.game.state.defcon3_ussr=0)):(1==f&&(l.game.state.defcon1_us+=h),2==f&&(l.game.state.defcon2_us+=h),3==f&&(l.game.state.defcon3_us+=h),l.game.state.defcon1_us<0&&(l.game.state.defcon1_us=0),l.game.state.defcon2_us<0&&(l.game.state.defcon2_us=0),l.game.state.defcon3_us<0&&(l.game.state.defcon3_us=0)),l.showBoard(),l.addMove("increase_defcon\t"+l.game.player+"\t"+f+"\t"+h+"\t"+l.game.player)}}null!=s&&s()}}else salert("you cannot place more influence there.");else salert("you can only add to one country. click done when done.")}))}}},{key:"eventRemoveInfluence",value:function(e,t,a,r,n){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=$("#done");o||(100==r&&(num_to_announce=n),this.updateStatus("<div class='status-message' id='status-message'>Remove "+num_to_announce+' Influence: <p></p><ul><li class="card" id="done">finish turn</li></ul></div>'));var c=this,l="",u=-1,d={},p=0;$("#done").off(),$("#done").on("click",(function(){null!=s&&s()}));for(var h=0;h<a.length;h++){d[a[h]]=0;var f="#"+a[h];$(f).off(),$(f).on("click",(function(){var a=$(this).attr("id");if(101==r){var o=0;1==t&&(o=c.game.arenas[a].ussr),2==t&&(o=c.game.arenas[a].us);for(var h=0,f=o;f>0;f-=2)h++;if(c.removeInfluence(t,a,h))return c.addMove("remove_influence\t"+e+"\t"+a+"\t"+h+"\t"+c.game.player),c.showBoard(),void s()}if(100==r&&""!=l&&a!=l&&salert("you can only remove from one country. click done when done."),100==r&&""==l&&(l=a,1==t&&(u=c.game.arenas[a].ussr),2==t&&(u=c.game.arenas[a].us)),d[a]>n)salert("you cannot remove more influence there.");else if(c.removeInfluence(t,a,1)){if(p++,d[a]++,c.addMove("remove_influence\t"+t+"\t"+a+"\t1\t"+c.game.player),c.showBoard(),p>=n&&100==r&&(r=n),p>=r){if(1==i)for(var m in d){var g=d[m]-1;if(g>0){var b=1;"cuba_mil"==m&&(b=1),"atlantic"==m&&(b=1),"berlin"==m&&(b=1),"cuba_pol"==m&&(b=2),"turkey"==m&&(b=2),"italy"==m&&(b=2),"un"==m&&(b=3),"television"==m&&(b=3),"alliances"==m&&(b=3),1==c.game.player?(1==b&&(c.game.state.defcon1_ussr-=g),2==b&&(c.game.state.defcon2_ussr-=g),3==b&&(c.game.state.defcon3_ussr-=g),c.game.state.defcon1_ussr<0&&(c.game.state.defcon1_ussr=0),c.game.state.defcon2_ussr<0&&(c.game.state.defcon2_ussr=0),c.game.state.defcon3_ussr<0&&(c.game.state.defcon3_ussr=0)):(1==b&&(c.game.state.defcon1_us-=g),2==b&&(c.game.state.defcon2_us-=g),3==b&&(c.game.state.defcon3_us-=g),c.game.state.defcon1_us<0&&(c.game.state.defcon1_us=0),c.game.state.defcon2_us<0&&(c.game.state.defcon2_us=0),c.game.state.defcon3_us<0&&(c.game.state.defcon3_us=0)),c.showBoard(),c.addMove("decrease_defcon\t"+c.game.player+"\t"+b+"\t"+g)}}null!=s&&s()}u>-1&&p>=u&&null!=s&&s()}else salert("you cannot remove more influence there.")}))}}},{key:"playerTriggerEvent",value:function(e,t){this.returnStrategyCards()[t].event(e)}},{key:"playerPlaceCommandTokens",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=this,n=r.returnStrategyCards();-1==a&&(a=n[t].tokens),a+=this.game.state.personal_letter_bonus,1==e&&(a+=this.game.state.ussr_command_token_bonus),2==e&&(a+=this.game.state.us_command_token_bonus),a<1&&(a=1);var i="<div class='status-message' id='status-message'>";1==e&&(i+="USSR "),2==e&&(i+="US "),i+="pick an area to add/remove up to "+a+" cubes:</div>",this.updateStatus(i),$(".country").off(),$(".country").on("click",(function(){var e=$(this).attr("id");i="<div class='status-message' id='status-message'>do you wish to add or remove command tokens? <p></p><ul>",i+='<li class="card" id="addtokens">add command tokens</li>',i+='<li class="card" id="removetokens">remove command tokens</li>',i+="</ul></div>",r.updateStatus(i),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id");"addtokens"==t&&(i="<div class='status-message' id='status-message'>how many command tokens do you wish to add? <p></p><ul>",a>=1&&(i+='<li class="card" id="1">one</li>'),a>=2&&(i+='<li class="card" id="2">two</li>'),a>=3&&(i+='<li class="card" id="3">three</li>'),a>=4&&(i+='<li class="card" id="4">four</li>'),a>=5&&(i+='<li class="card" id="5">five</li>'),i+="</ul>",i+="</div>",r.updateStatus(i),$(".card").off(),$(".card").on("click",(function(){var t=parseInt($(this).attr("id")),a=t-1,n=1;"cuba_mil"==e&&(n=1),"atlantic"==e&&(n=1),"berlin"==e&&(n=1),"cuba_pol"==e&&(n=2),"turkey"==e&&(n=2),"italy"==e&&(n=2),"un"==e&&(n=3),"television"==e&&(n=3),"alliances"==e&&(n=3),r.addInfluence(r.game.player,e,t)&&(1==r.game.player&&r.addMove("notify\tUSSR adds "+t+" cubes to "+e+"\t1"),2==r.game.player&&r.addMove("notify\tUS adds "+t+" cubes to "+e+"\t2"),r.addMove("add_influence\t"+r.game.player+"\t"+e+"\t"+t+"\t"+r.game.player),a>0&&(1==r.game.player&&r.addMove("notify\tUSSR increase DEFCON in "+n+"\t1"),2==r.game.player&&r.addMove("notify\tUS increase DEFCON in "+n+"\t1"),r.addMove("increase_defcon\t"+r.game.player+"\t"+n+"\t"+a)),r.endTurn())}))),"removetokens"==t&&(i="<div class='status-message' id='status-message'>how many command tokens do you wish to remove? <p></p><ul>",a>=1&&(i+='<li class="card" id="1">one</li>'),a>=2&&(i+='<li class="card" id="2">two</li>'),a>=3&&(i+='<li class="card" id="3">three</li>'),a>=4&&(i+='<li class="card" id="4">four</li>'),a>=5&&(i+='<li class="card" id="5">five</li>'),i+="</ul></div>",r.updateStatus(i),$(".card").off(),$(".card").on("click",(function(){var t=parseInt($(this).attr("id")),a=t-1,n=1;"cuba_mil"==e&&(n=1),"atlantic"==e&&(n=1),"berlin"==e&&(n=1),"cuba_pol"==e&&(n=2),"turkey"==e&&(n=2),"italy"==e&&(n=2),"un"==e&&(n=3),"television"==e&&(n=3),"alliances"==e&&(n=3),r.removeInfluence(r.game.player,e,t)&&(r.addMove("remove_influence\t"+r.game.player+"\t"+e+"\t"+t+"\t"+r.game.player),a>0&&r.addMove("decrease_defcon\t"+r.game.player+"\t"+n+"\t"+a),r.endTurn())})))}))}))}},{key:"returnInitiative",value:function(){return 7==this.game.state.prestige_track?"ussr":this.game.state.prestige_track<7?"us":this.game.state.prestige_track>7?"ussr":void 0}},{key:"showRoundTrack",value:function(){for(var e=1;e<5;e++){var t=".round_"+e;this.game.state.round==e?$(t).html('<img src="/thirteen/img/Round%20Marker.png" />'):$(t).html("")}}},{key:"showDefconTracks",value:function(){for(var e=1;e<4;e++)for(var t=1;t<9;t++){var a="",r=".defcon_track_"+e+"_"+t;1==e&&(this.game.state.defcon1_us==t&&(a+='<img src="/thirteen/img/Blue%20Disc.png" class="defcon_disc_us" />'),this.game.state.defcon1_ussr==t&&(a+='<img src="/thirteen/img/Red%20Disc.png" class="defcon_disc_ussr" />')),2==e&&(this.game.state.defcon2_us==t&&(a+='<img src="/thirteen/img/Blue%20Disc.png" class="defcon_disc_us" />'),this.game.state.defcon2_ussr==t&&(a+='<img src="/thirteen/img/Red%20Disc.png" class="defcon_disc_ussr" />')),3==e&&(this.game.state.defcon3_us==t&&(a+='<img src="/thirteen/img/Blue%20Disc.png" class="defcon_disc_us" />'),this.game.state.defcon3_ussr==t&&(a+='<img src="/thirteen/img/Red%20Disc.png" class="defcon_disc_ussr" />')),$(r).html(a)}}},{key:"showPrestigeTrack",value:function(){for(var e=1;e<14;e++){var t=".prestige_slot_"+e;this.game.state.prestige_track==e?$(t).html('<img src="/thirteen/img/VP%20Marker.png" />'):$(t).html("")}}},{key:"showArenas",value:function(){for(var e in this.game.state.influence_on_board_us=0,this.game.state.influence_on_board_ussr=0,this.game.arenas)this.showInfluence(e)}},{key:"showFlags",value:function(){for(var e in this.game.flags)$("#"+e).html("");for(var t=0;t<this.game.state.us_agendas.length;t++){var a="#"+this.game.state.us_agendas[t];$(a).append('<img src="/thirteen/img/nUS%20Tile%20with%20bleed.png" style="z-index:12;left:0px;position:relative;top:0px;"/>')}for(var r=0;r<this.game.state.ussr_agendas.length;r++){var n="#"+this.game.state.ussr_agendas[r];$(n).append('<img src="/thirteen/img/nUSSR%20Tile%20with%20bleed.png" style="z-index:10;left:0px;position:relative;top:0px;" />')}}},{key:"showBoard",value:function(){0!=this.browser_active&&(this.showArenas(),this.showFlags(),this.showRoundTrack(),this.showPrestigeTrack(),this.showDefconTracks())}},{key:"showInfluence",value:function(e){var t="#"+e+" > .us",a="#"+e+" > .ussr",r="",n="",i=0;if(i=this.game.arenas[e].us,this.game.state.influence_on_board_us+=i,i>0){i>1&&100/i-10;for(var s=0;s<i;s++){var o=0,c=0;0==s&&(o=-10,c=15),1==s&&(o=0,c=14),2==s&&(o=-34,c=12),3==s&&(o=-25,c=10),4==s&&(o=-135,c=44),r+='<img class="cube" src="/thirteen/img/Blue%20Cube.png" style="position:relative;top:'+this.scale(o)+"px;left:"+this.scale(c)+'px;" />'}}if(i=this.game.arenas[e].ussr,this.game.state.influence_on_board_ussr+=i,i>0){i>1&&100/i-10;for(var l=0,u=0,d=0;d<i;d++)0==d&&(u=-10,l=15),1==d&&(u=0,l=14),2==d&&(u=-34,l=12),3==d&&(u=-25,l=10),4==d&&(u=-135,l=44),n+='<img class="cube" src="/thirteen/img/Red%20Cube.png" style="-webkit-transform:scaleX(-1);transform: scaleX(-1);position:relative;top:'+this.scale(u)+"px;left:"+this.scale(l)+'px;" />'}$(t).html(r),$(a).html(n)}},{key:"returnState",value:function(){var e={aftermath_us:[],aftermath_ussr:[],prestige_track:7,round:0,influence_on_board_us:2,influence_on_board_ussr:2,defcon1_us:1,defcon1_ussr:2,defcon2_us:2,defcon2_ussr:1,defcon3_us:1,defcon3_ussr:1,personal_letter:1,personal_letter_bonus:0,us_agendas:[],ussr_agendas:[],us_agenda_selected:"",ussr_agenda_selected:"",us_alliances:[],ussr_alliances:[],ussr_command_token_bonus:0,us_command_token_bonus:0,ussr_cannot_deflate_defcon_from_events:0,us_cannot_deflate_defcon_from_events:0,initiative:"ussr"};return e}},{key:"returnRoundTrack",value:function(){var e={round_1:{top:1122,left:526},round_2:{top:1110,left:598},round_3:{top:1100,left:664},round_4:{top:1090,left:750}};return e}},{key:"returnPrestigeTrack",value:function(){var e={prestige_slot_1:{top:172,left:1050},prestige_slot_2:{top:172,left:1120},prestige_slot_3:{top:173,left:1180},prestige_slot_4:{top:174,left:1230},prestige_slot_5:{top:174,left:1280},prestige_slot_6:{top:175,left:1335},prestige_slot_7:{top:175,left:1385},prestige_slot_8:{top:175,left:1440},prestige_slot_9:{top:176,left:1490},prestige_slot_10:{top:177,left:1545},prestige_slot_11:{top:178,left:1595},prestige_slot_12:{top:179,left:1650},prestige_slot_13:{top:180,left:1725}};return e}},{key:"returnDefconTracks",value:function(){var e={defcon_track_1_1:{top:1123,left:1814},defcon_track_2_1:{top:1123,left:1877},defcon_track_3_1:{top:1123,left:1940},defcon_track_1_2:{top:1061,left:1814},defcon_track_2_2:{top:1061,left:1877},defcon_track_3_2:{top:1061,left:1940},defcon_track_1_3:{top:998,left:1814},defcon_track_2_3:{top:998,left:1877},defcon_track_3_3:{top:998,left:1940},defcon_track_1_4:{top:936,left:1814},defcon_track_2_4:{top:936,left:1877},defcon_track_3_4:{top:936,left:1940},defcon_track_1_5:{top:872,left:1814},defcon_track_2_5:{top:872,left:1877},defcon_track_3_5:{top:872,left:1940},defcon_track_1_6:{top:811,left:1814},defcon_track_2_6:{top:811,left:1877},defcon_track_3_6:{top:811,left:1940},defcon_track_1_7:{top:749,left:1814},defcon_track_2_7:{top:749,left:1877},defcon_track_3_7:{top:749,left:1940},defcon_track_1_8:{top:684,left:1814},defcon_track_2_8:{top:684,left:1877},defcon_track_3_8:{top:684,left:1940}};return e}},{key:"returnFlags",value:function(){var e={cuba_pol_flag:{top:500,left:710},cuba_mil_flag:{top:845,left:810},atlantic_flag:{top:510,left:1040},berlin_flag:{top:290,left:1340},turkey_flag:{top:290,left:1660},italy_flag:{top:530,left:1615},un_flag:{top:710,left:1300},television_flag:{top:965,left:1190},alliances_flag:{top:885,left:1630},military_flag:{top:567,left:1815},political_flag:{top:567,left:1877},world_opinion_flag:{top:566,left:1940},personal_letter_flag:{top:1280,left:1150}};return e}},{key:"returnArenas",value:function(){var e={cuba_pol:{top:570,left:520,us:0,ussr:0,name:"Cuba (political)"},cuba_mil:{top:915,left:620,us:0,ussr:1,name:"Cuba (military)"},atlantic:{top:580,left:850,us:0,ussr:0,name:"Atlantic"},berlin:{top:360,left:1150,us:0,ussr:1,name:"Berlin"},turkey:{top:360,left:1470,us:1,ussr:0,name:"Turkey"},italy:{top:600,left:1425,us:1,ussr:0,name:"Italy"},un:{top:780,left:1110,us:0,ussr:0,name:"United Nations"},television:{top:1035,left:1e3,us:0,ussr:0,name:"Television"},alliances:{top:955,left:1440,us:0,ussr:0,name:"Alliances"}};return e}},{key:"returnAgendaCards",value:function(){var e={},t=this;return e.a01b={img:"Agenda Card 01b.png",name:"Military Track",flag:"military_flag",score:function(){var e=0,a=0;return t.game.state.defcon1_us>3&&t.game.state.defcon1_us<6&&t.game.state.defcon1_us++,t.game.state.defcon1_ussr>3&&t.game.state.defcon1_ussr<6&&t.game.state.defcon1_ussr++,t.game.state.defcon1_us>t.game.state.defcon1_ussr&&(e=2,a=t.game.state.defcon1_us-t.game.state.defcon1_ussr),t.game.state.defcon1_us<t.game.state.defcon1_ussr&&(e=1,a=t.game.state.defcon1_ussr-t.game.state.defcon1_us),0==e?0:1==e?a+1:2==e?-1*(a+1):void 0}},e.a02b={img:"Agenda Card 02b.png",name:"Military Track",flag:"military_flag",score:function(){var e=0,a=0;return t.game.state.defcon1_us>3&&t.game.state.defcon1_us<6&&t.game.state.defcon1_us++,t.game.state.defcon1_ussr>3&&t.game.state.defcon1_ussr<6&&t.game.state.defcon1_ussr++,t.game.state.defcon1_us>t.game.state.defcon1_ussr&&(e=2,a=t.game.state.defcon1_us-t.game.state.defcon1_ussr),t.game.state.defcon1_us<t.game.state.defcon1_ussr&&(e=1,a=t.game.state.defcon1_ussr-t.game.state.defcon1_us),0==e?0:1==e?a+1:2==e?-1*(a+1):void 0}},e.a03b={img:"Agenda Card 03b.png",name:"Political Track",flag:"political_flag",score:function(){var e=0,a=0;return t.game.state.defcon2_us>3&&t.game.state.defcon2_us<6&&t.game.state.defcon2_us++,t.game.state.defcon2_ussr>3&&t.game.state.defcon2_ussr<6&&t.game.state.defcon2_ussr++,t.game.state.defcon2_us>t.game.state.defcon2_ussr&&(e=2,a=t.game.state.defcon2_us-t.game.state.defcon2_ussr),t.game.state.defcon2_us<t.game.state.defcon2_ussr&&(e=1,a=t.game.state.defcon2_ussr-t.game.state.defcon2_us),0==e?0:1==e?a+1:2==e?-1*(a+1):void 0}},e.a04b={img:"Agenda Card 04b.png",name:"Political Track",flag:"political_flag",score:function(){var e=0,a=0;return t.game.state.defcon2_us>3&&t.game.state.defcon2_us<6&&t.game.state.defcon2_us++,t.game.state.defcon2_ussr>3&&t.game.state.defcon2_ussr<6&&t.game.state.defcon2_ussr++,t.game.state.defcon2_us>t.game.state.defcon2_ussr&&(e=2,a=t.game.state.defcon2_us-t.game.state.defcon2_ussr),t.game.state.defcon2_us<t.game.state.defcon2_ussr&&(e=1,a=t.game.state.defcon2_ussr-t.game.state.defcon2_us),0==e?0:1==e?a+1:2==e?-1*(a+1):void 0}},e.a05b={img:"Agenda Card 05b.png",name:"World Opinion Track",flag:"world_opinion_flag",score:function(){var e=0,a=0;return t.game.state.defcon3_us>3&&t.game.state.defcon333_us<6&&t.game.state.defcon3_us++,t.game.state.defcon3_ussr>3&&t.game.state.defcon3_ussr<6&&t.game.state.defcon3_ussr++,t.game.state.defcon3_us>t.game.state.defcon3_ussr&&(e=2,a=t.game.state.defcon3_us-t.game.state.defcon3_ussr),t.game.state.defcon3_us<t.game.state.defcon3_ussr&&(e=1,a=t.game.state.defcon3_ussr-t.game.state.defcon3_us),0==e?0:1==e?a+1:2==e?-1*(a+1):void 0}},e.a06b={img:"Agenda Card 06b.png",name:"World Opinion Track",flag:"world_opinion_flag",score:function(){var e=0,a=0;return t.game.state.defcon3_us>3&&t.game.state.defcon3_us<6&&t.game.state.defcon3_us++,t.game.state.defcon3_ussr>3&&t.game.state.defcon3_ussr<6&&t.game.state.defcon3_ussr++,t.game.state.defcon3_us>t.game.state.defcon3_ussr&&(e=2,a=t.game.state.defcon3_us-t.game.state.defcon3_ussr),t.game.state.defcon3_us<t.game.state.defcon3_ussr&&(e=1,a=t.game.state.defcon3_ussr-t.game.state.defcon3_us),0==e?0:1==e?a+1:2==e?-1*(a+1):void 0}},e.a07b={img:"Agenda Card 07b.png",name:"Turkey",flag:"turkey_flag",score:function(){var e=0,a=0;return t.game.arenas.turkey.us>t.game.arenas.turkey.ussr&&(e=2,a=t.game.arenas.turkey.us-t.game.arenas.turkey.ussr),t.game.arenas.turkey.us<t.game.arenas.turkey.ussr&&(e=1,a=t.game.arenas.turkey.ussr-t.game.arenas.turkey.us),0==e?0:1==e?a+1:2==e?-1*(a+1):void 0}},e.a08b={img:"Agenda Card 08b.png",name:"Berlin",flag:"berlin_flag",score:function(){var e=0,a=0;return t.game.arenas.berlin.us>t.game.arenas.berlin.ussr&&(e=2,a=t.game.arenas.berlin.us-t.game.arenas.berlin.ussr),t.game.arenas.berlin.us<t.game.arenas.berlin.ussr&&(e=1,a=t.game.arenas.berlin.ussr-t.game.arenas.berlin.us),0==e?0:1==e?a+1:2==e?-1*(a+1):void 0}},e.a09b={img:"Agenda Card 09b.png",name:"Italy",flag:"italy_flag",score:function(){var e=0,a=0;return t.game.arenas.italy.us>t.game.arenas.italy.ussr&&(e=2,a=t.game.arenas.turkey.us-t.game.arenas.italy.ussr),t.game.arenas.italy.us<t.game.arenas.italy.ussr&&(e=1,a=t.game.arenas.italy.ussr-t.game.arenas.italy.us),0==e?0:1==e?a+1:2==e?-1*(a+1):void 0}},e.a10b={img:"Agenda Card 10b.png",name:"Cuba (pol)",flag:"cuba_pol_flag",score:function(){var e=0,a=0;return t.game.arenas.cuba_pol.us>t.game.arenas.cuba_pol.ussr&&(e=2,a=t.game.arenas.cuba_pol.us-t.game.arenas.cuba_pol.ussr),t.game.arenas.cuba_pol.us<t.game.arenas.cuba_pol.ussr&&(e=1,a=t.game.arenas.cuba_pol.ussr-t.game.arenas.cuba_pol.us),1==e&&(t.game.arenas.cuba_mil.ussr>t.game.arenas.cuba_mil.us&&a++,t.game.arenas.atlantic.ussr>t.game.arenas.atlantic.us&&a++),2==e&&(t.game.arenas.cuba_mil.ussr<t.game.arenas.cuba_mil.us&&a++,t.game.arenas.atlantic.ussr<t.game.arenas.atlantic.us&&a++),0==e?0:1==e?a+0:2==e?-1*(a+0):void 0}},e.a11b={img:"Agenda Card 11b.png",name:"Cuba (mil)",flag:"cuba_mil_flag",score:function(){var e=0,a=0;return t.game.arenas.cuba_mil.us>t.game.arenas.cuba_mil.ussr&&(e=2,a=t.game.arenas.cuba_mil.us-t.game.arenas.cuba_mil.ussr),t.game.arenas.cuba_mil.us<t.game.arenas.cuba_mil.ussr&&(e=1,a=t.game.arenas.cuba_mil.ussr-t.game.arenas.cuba_mil.us),1==e&&(t.game.arenas.cuba_pol.ussr>t.game.arenas.cuba_pol.us&&a++,t.game.arenas.atlantic.ussr>t.game.arenas.atlantic.us&&a++),2==e&&(t.game.arenas.cuba_pol.ussr<t.game.arenas.cuba_pol.us&&a++,t.game.arenas.atlantic.ussr<t.game.arenas.atlantic.us&&a++),0==e?0:1==e?a+0:2==e?-1*(a+0):void 0}},e.a12b={img:"Agenda Card 12b.png",name:"Atlantic",flag:"atlantic_flag",score:function(){var e=0,a=0;return t.game.arenas.atlantic.us>t.game.arenas.atlantic.ussr&&(e=2,a=t.game.arenas.atlantic.us-t.game.arenas.atlantic.ussr),t.game.arenas.atlantic.us<t.game.arenas.atlantic.ussr&&(e=1,a=t.game.arenas.atlantic.ussr-t.game.arenas.atlantic.us),1==e&&(t.game.arenas.cuba_pol.ussr>t.game.arenas.cuba_pol.us&&a++,t.game.arenas.cuba_mil.ussr>t.game.arenas.cuba_mil.us&&a++),2==e&&(t.game.arenas.cuba_pol.ussr<t.game.arenas.cuba_pol.us&&a++,t.game.arenas.cuba_mil.ussr<t.game.arenas.cuba_mil.us&&a++),0==e?0:1==e?a+0:2==e?-1*(a+0):void 0}},e.a13b={img:"Agenda Card 13b.png",name:"Personal Letter",flag:"personal_letter_flag",score:function(){return 1==t.game.state.personal_letter?2:2==t.game.state.personal_letter?-2:void 0}},e}},{key:"returnStrategyCards",value:function(){var e=this,t={};return t.s01b={img:"Strategy Card 01b.png",name:"Speech to the Nation",text:"Place up to three influence cubes in total on one or more world opinion battlegrounds. max 2 per battleground",side:"neutral",tokens:3,defcon:0,event:function(t){e.updateStatus("<div class='status-message' id='status-message'>Place up to three influence cubes in total on one or more world opinion battlegrounds. max 2 per battleground: <p></p><ul><li class=\"card\" id=\"done\">finish</li></ul></div>"),e.eventAddInfluence(t,t,["un","television","alliances"],3,2,0,(function(t){e.endTurn()}))}},t.s02b={img:"Strategy Card 02b.png",name:"The Guns of August",text:"Escalate/deflate one of your DEFCON tracks by up to 2 steps. Then Command 1 Influence cube",side:"neutral",tokens:3,defcon:1,event:function(t){e.eventShiftDefcon(t,t,[1,2,3],100,2,(function(a){e.updateStatus("<div class='status-message' id='status-message'>Place up to one influence one or more battlegrounds: <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.playerPlaceCommandTokens(t,"s02b")}))}},t.s03b={img:"Strategy Card 03b.png",name:"Fifty-Fifty",text:"The player with the most Influence on the Television battleground may escalate / deflate two of their DEFCON tracks by 1 step (any mix)",side:"neutral",tokens:3,defcon:0,event:function(t){var a=0;if(e.game.arenas.television.us>e.game.arenas.television.ussr&&(a=2),e.game.arenas.television.us<e.game.arenas.television.ussr&&(a=1),0==a)e.addMove("notify\tNeither player has more influence in Television Battleground"),e.endTurn();else if(e.game.player==a)e.updateStatus("<div class='status-message' id='status-message'>You may escalate or de-escalate up to 2 DEFCON tracks by up to 1 step each</div>"),e.eventShiftDefcon(t,t,[1,2,3],1,1,(function(a){e.eventShiftDefcon(t,t,[1,2,3],1,1,(function(t){e.endTurn()}))}));else{var r=e.app.crypto.stringToBase64(JSON.stringify([1,2,3]));e.addMove("event_shift_defcon\t"+a+"\t"+a+"\t"+r+"\t1\t1"),e.addMove("event_shift_defcon\t"+a+"\t"+a+"\t"+r+"\t1\t1"),e.addMove("notify\tplayer dominant in Television may escalate or de-escalate up to 2 DEFCON tracks by up to 1 step each"),e.endTurn()}}},t.s04b={img:"Strategy Card 04b.png",name:"SOPs",text:"All your Command actions have +1 Influence cube for this round",side:"neutral",tokens:1,defcon:0,event:function(t){var a="USSR";2==e.game.player&&(a="US"),e.updateLog("You get +1 bonus to your command tokens for remainder of turn"),1==t?e.addMove("setvar\tadd_command_token_bonus\t1"):e.addMove("setvar\tadd_command_token_bonus\t2"),e.addMove("notify\t"+a+" adds +1 bonus to command tokens this turn"),e.endTurn()}},t.s05b={img:"Strategy Card 05b.png",name:"Close Allies",text:"Place up to 2 Influence cubes in total on one more political battlegrounds",side:"neutral",tokens:2,defcon:0,event:function(t){e.updateStatus("<div class='status-message' id='status-message'>Place up to two influence cubes in total on one or more political battlegrounds: <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.eventAddInfluence(t,t,["cuba_pol","italy","turkey"],2,2,0,(function(t){e.endTurn()}))}},t.s06b={img:"Strategy Card 06b.png",name:"Intelligence Reports",text:"Draw one random Strategy card from your opponent's hand. Play it as normal or discard it. Opponent draws a replacement card",side:"neutral",tokens:2,defcon:1,event:function(t){var a=1;1==e.game.player&&(a=2),e.addMove("DEAL\t2\t"+a+"\t1"),e.addMove("pullcard\t"+e.game.player),e.endTurn()}},t.s07b={img:"Strategy Card 07b.png",name:"Summit Meeting",text:"Discard any number of Strategy cards from your hand. Draw one Strategy card per card so discarded",side:"neutral",tokens:2,defcon:0,event:function(t){for(var a=0,r="<div class='status-message' id='status-message'>Select cards to discard:<ul>",n=0;n<e.game.deck[1].hand.length;n++)r+='<li class="card showcard '+e.game.deck[1].hand[n]+'" id="'+e.game.deck[1].hand[n]+'">'+e.game.deck[1].cards[e.game.deck[1].hand[n]].name+"</li>";r+='</ul> When you are done discarding <span class="card dashed" id="finished">click here</span>.</div>',e.updateStatus(r),e.addShowCardEvents((function(t){if("finished"==t){if(e.addMove("DEAL\t2\t"+e.game.player+"\t"+a),a>e.game.deck[1].crypt.length){var r=e.returnDiscardedCards(1);Object.keys(r).length>0&&(e.addMove("SHUFFLE\t2"),e.addMove("DECKRESTORE\t2"),e.addMove("DECKENCRYPT\t2\t2"),e.addMove("DECKENCRYPT\t2\t1"),e.addMove("DECKXOR\t2\t2"),e.addMove("DECKXOR\t2\t1"),e.addMove("flush\tdiscards\t2"),e.addMove("DECK\t2\t"+JSON.stringify(r)),e.addMove("DECKBACKUP\t2"),e.updateLog("cards remaining: "+e.game.deck[1].crypt.length),e.updateLog("Shuffling discarded cards back into the deck..."))}e.endTurn()}else a++,$("."+t).remove(),e.removeCardFromHand(t),e.addMove("discard\t"+e.game.player+"\t2\t"+t)}))}},t.s08b={img:"Strategy Card 08b.png",name:"To the Brink",text:"Play on opponent. All their Command actions have -1 Influence cube for this round (to a minimum of 1 Influence cube)",side:"neutral",tokens:2,defcon:0,event:function(t){1==t?(e.addMove("setvar\tremove_command_token_bonus\t2"),e.addMove("notify\tUS player command actions have -1 bonus this round")):(e.addMove("setvar\tremove_command_token_bonus\t1"),e.addMove("notify\tUSSR player command actions have -1 bonus this round")),e.endTurn()}},t.s09b={img:"Strategy Card 09b.png",name:"Nuclear Submarines",text:"Place up to 2 Influence cubes in total on one or more military battlegrounds",side:"neutral",tokens:1,defcon:0,event:function(t){e.updateStatus("<div class='status-message' id='status-message'>Place up to two influence cubes in total on one or more military battlegrounds: <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.eventAddInfluence(t,t,["cuba_mil","atlantic","berlin"],2,2,0,(function(t){e.endTurn()}))}},t.s10b={img:"Strategy Card 10b.png",name:"U Thant",text:"Deflate all your DEFCON tracks by 1 step",side:"neutral",tokens:1,defcon:0,event:function(t){e.updateLog("Decreasing all of your DEFCON tracks by 1:"),e.addMove("decrease_defcon\t"+t+"\t1\t1"),e.addMove("decrease_defcon\t"+t+"\t2\t1"),e.addMove("decrease_defcon\t"+t+"\t3\t1"),e.endTurn()}},t.s11b={img:"Strategy Card 11b.png",name:"Containment",text:"Play on opponent. They can't use Events from cards they played themselves to deflate their DEFCON tracks for this round",side:"neutral",tokens:2,defcon:0,event:function(t){1==t?e.addMove("setvar\tcannot_deflate_defcon_from_events\t2"):e.addMove("setvar\tcannot_deflate_defcon_from_events\t1"),e.endTurn()}},t.s12b={img:"Strategy Card 12b.png",name:"A Face-Saver",text:"Command 3 Influence cubes. Then opponent may Command 1 Influence cube",side:"neutral",tokens:1,defcon:1,event:function(t){var a=1;1==e.game.player&&(a=2),e.addMove("event_command_influence\t"+a+"\ts12b\t1"),e.updateStatus('<div class=\'status-message\' id=\'status-message\'>Command 3 Influence cubes, then opponent may command 1 Influence cube: <p></p><ul><li class="card" id="done" id="done">finish turn</li></ul></div>'),e.playerPlaceCommandTokens(e.game.player,"s12b",3)}},t.s13b={img:"Strategy Card 13b.png",name:"Scramble",text:"Place 1 Influence cube on each of up to three different battlegrounds",side:"neutral",tokens:3,defcon:0,event:function(t){e.updateStatus("<div class='status-message' id='status-message'>Place up to three influence cubes on up to three battlegrounds (1 each): <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.eventAddInfluence(t,t,e.all_battlegrounds,3,1,0,(function(t){e.endTurn()}))}},t.s14b={img:"Strategy Card 14b.png",name:"Mathematical Precision",text:"Escalate/deflate the US political DEFCON track by up to 2 steps. Then Command 1 Influence cube",side:"us",tokens:3,defcon:1,event:function(t){e.eventShiftDefcon(t,t,[2],2,2,(function(a){e.updateStatus("<div class='status-message' id='status-message'>Place one influence cubes on one battleground: <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.eventAddInfluence(t,t,["cuba_pol","cuba_mil","atlantic","turkey","berlin","italy","un","television","alliances"],1,1,1,(function(t){e.endTurn()}))}))}},t.s15b={img:"Strategy Card 15b.png",name:"Excomm",text:"Place up to 4 Influence cubes in total on battlegrounds where the US player currently has no Influence cubes. Max 2 per battleground",side:"us",tokens:3,defcon:1,event:function(t){var a=[];for(var r in e.game.arenas)0==e.game.arenas[r].us&&a.push(r);e.updateStatus("<div class='status-message' id='status-message'>Place up to 4 Influence in battlegrounds where the US currently has no influence. Max 2 per battleround: <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.eventAddInfluence(t,t,a,4,2,1,(function(t){e.endTurn()}))}},t.s16b={img:"Strategy Card 16b.png",name:"Public Protests",text:"Remove any number of US Influence cubes from any one battleground",side:"us",tokens:3,defcon:0,event:function(t){var a=[];for(var r in e.game.arenas)e.game.arenas[r].us>0&&a.push(r);if(0==a.length)return e.addMove("notify\tUS has no influence to remove from any battleground."),void e.endTurn();e.updateStatus("<div class='status-message' id='status-message'>Select a battleground from which to remove US influence: <p></p><ul><li class=\"card\" id=\"done\">done</li></ul></div>"),e.removeEventsFromBoard(),$(".done").off(),$(".done").on("click",(function(){e.endTurn()})),e.eventRemoveInfluence(e.game.player,2,a,5,5,0,(function(){e.endTurn()}))}},t.s17b={img:"Strategy Card 17b.png",name:"Lessons of Munich",text:"Place up to 4 Influence ubes in total on Berlin, Italy, and Turkey Battlegrounds. Max 2 per battleground",side:"us",tokens:3,defcon:0,event:function(t){e.eventAddInfluence(t,t,["berlin","italy","turkey"],4,2,0,(function(t){e.endTurn()}))}},t.s18b={img:"Strategy Card 18b.png",name:"Operation Mongoose",text:"US gains 1 Prestige. Then USSR may escalate / deflate a US DEFCON track by 1 step",side:"us",tokens:2,defcon:0,event:function(t){var a=e.app.crypto.stringToBase64(JSON.stringify([1,2,3]));e.updateLog("US gains 1 prestige, USSR may shift 1 US DEFCON track"),e.addMove("event_shift_defcon\t1\t2\t"+a+"\t1\t1"),e.addMove("prestige\t2\t1"),e.endTurn()}},t.s19b={img:"Strategy Card 19b.png",name:"Air Strike",text:"EITHER remove half the USSR Influence cubes from one Cuba battleground (rounded up) OR place up to 2 Influence cubes on the Alliances battleground",side:"us",tokens:2,defcon:0,event:function(t){e.updateStatus('<div class=\'status-message\' id=\'status-message\'>Which would you like to do, remove half of USSR influence from one Cuban battleground (rounded up) or place up to 2 Influence on the Alliances battleground? <p></p><ul><li class="card" id="remove_from_cuba">remove from cuba</li><li class="card" id="add_alliances">place in alliances</li></ul></div>'),$(".card").off(),$(".card").on("click",(function(){var t=$(this).attr("id");"remove_from_cuba"==t&&(e.updateStatus("<div class='status-message' id='status-message'>Click on a Cuban battleground to remove half of the USSR influence:</div>"),e.eventRemoveInfluence(2,1,["cuba_pol","cuba_mil"],101,1,0,(function(){e.endTurn()}))),"add_alliances"==t&&(e.updateStatus("<div class='status-message' id='status-message'>Add two influence to the Alliances battleground</div>"),e.eventAddInfluence(2,2,["alliances"],2,2,0,(function(){e.endTurn()})))}))}},t.s20b={img:"Strategy Card 20b.png",name:"Non-Invasion Pledge",text:"Remove up to 2 USSR Influence cubes from the Turkey battleground. Then escalate/deflate the US political DEFCON track by up to 2 steps",side:"us",tokens:2,defcon:0,event:function(t){e.eventRemoveInfluence(t,2,["turkey"],2,2,0,(function(a){e.eventDecreaseDefcon(t,t,["political"],2,2,(function(t){e.endTurn()}))}))}},t.s21b={img:"Strategy Card 21b.png",name:"Offensive Missiles",text:"If US political DEFCON track is in the DEFCON 3 area, place up to 1 Influence cube on all political battlegrounds",side:"us",tokens:2,defcon:0,event:function(t){e.app.crypto.stringToBase64(JSON.stringify(["cuba_pol","italy","turkey"])),e.game.state.defcon2_us<4?(e.updateStatus("<div class='status-message' id='status-message'>Place up to 3 Influence in Cuba (pol), Italy and Turkey: <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.eventAddInfluence(2,2,["cuba_pol","italy","turkey"],3,1,0,(function(){e.addMove("notify\tUS installs offensive missiles in political chokepoints"),e.endTurn()}))):(e.addMove("notify\tUS political defcon track is lower than 3, skipping Offensive Missiles"),e.endTurn())}},t.s22b={img:"Strategy Card 22b.png",name:"Invasion of Cuba",text:"Escalate the US military DEFCON track by up to 2 steps. You may then deflate another US DEFCON track by the same number of steps",side:"us",tokens:1,defcon:0,event:function(t){var a=e.app.crypto.stringToBase64(JSON.stringify([1])),r=e.app.crypto.stringToBase64(JSON.stringify([2,3]));e.addMove("event_decrease_defcon\t2\t2\t"+r+"\t100\t2\t0"),e.addMove("event_increase_defcon\t2\t2\t"+a+"\t2\t2\t0"),e.endTurn()}},t.s23b={img:"Strategy Card 23b.png",name:"Quarantine",text:"Place up to 2 Influence cubes on the Atlantic battleground",side:"us",tokens:1,defcon:0,event:function(t){e.updateStatus("<div class='status-message' id='status-message'>Place up to 2 Influence on the Atlantic battleground: <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.eventAddInfluence(t,t,["atlantic"],2,2,0,(function(t){e.endTurn()}))}},t.s24b={img:"Strategy Card 24b.png",name:"U-2 Photographs",text:"Command 3 Influence cubes on to one military battleground",side:"us",tokens:1,defcon:1,event:function(t){e.eventAddInfluence(t,t,["cuba_mil","berlin","atlantic"],3,3,1,(function(t){e.endTurn()}))}},t.s25b={img:"Strategy Card 25b.png",name:"Wave and Smile",text:"Remove up to 2 US Influence cubes in total from one or more battlerounds. Place them on other battlegrounds",side:"us",tokens:2,defcon:0,event:function(t){var a=e.app.crypto.stringToBase64(JSON.stringify(e.all_battlegrounds));e.addMove("event_add_influence\t2\t2\t"+a+"\t2\t2\t0"),e.updateStatus("<div class='status-message' id='status-message'>Remove up to 2 US influence cubes in total from one or more battlegrounds. Place them on other battlegrounds: <p></p><li class=\"card\" id=\"done\">click here when done</li></ul></div>"),e.eventRemoveInfluence(t,t,e.all_battlegrounds,2,2,0,(function(){e.endTurn()}))}},t.s26b={img:"Strategy Card 26b.png",name:"Eyeball to Eyeball",text:"If US is more escalated than USSR on the military DEFCON track, place up to 3 Influence cubes in total on one or both Cuba battlegrounds",side:"us",tokens:1,defcon:1,event:function(t){if(e.game.state.defcon1_us>e.game.state.defcon1_ussr){var a=e.app.crypto.stringToBase64(JSON.stringify(["cuba_mil","cuba_pol"]));e.addMove("event_add_influence\t2\t2\t"+a+"\t3\t3\t1")}else e.addMove("notify\tUS is not higher than USSR on military defcon track. Skipping event");e.endTurn()}},t.s27b={img:"Strategy Card 27b.png",name:"MRBMs & IRBMs",text:"Escalate/deflate the USSR military DEFCON track by up to 2 steps. Then Command 1 Influence cube",side:"ussr",tokens:3,defcon:1,event:function(t){e.eventShiftDefcon(1,1,[1],100,2,(function(t){var a=e.app.crypto.stringToBase64(JSON.stringify(e.all_battlegrounds));e.addMove("event_add_influence\t1\t1\t"+a+"\t1\t1\t1"),e.endTurn()}))}},t.s28b={img:"Strategy Card 28b.png",name:"Moscow is the Brain",text:"Place up to 4 Influence dubes in total on battlegrounds where the USSR player currently has Influence cubes. Max 2 per battleground",side:"ussr",tokens:3,defcon:1,event:function(t){e.updateStatus("<div class='status-message' id='status-message'>Place up to 4 Influence cubes in total on battlegrounds where the USSR player currently has Influence cubes. Max 2 per battleground: <p></p><ul><li class=\"card\" id=\"done\">done</li></ul></div>");var a=[];for(var r in e.game.arenas)e.game.arenas[r].ussr>0&&a.push(r);e.eventAddInfluence(1,1,a,4,2,1,(function(t){e.endTurn()}))}},t.s29b={img:"Strategy Card 29b.png",name:"Missile Trade",text:"Remove up to 3 USSR Influence cubes in total from one or more battlegrounds",side:"ussr",tokens:3,defcon:1,event:function(t){e.updateStatus("<div class='status-message' id='status-message'>Remove up to 3 USSR Influence cubes in total from one or more battlegrounds: <p></p><ul><li class=\"card\" id=\"done\">done</li></ul></div>"),e.eventRemoveInfluence(1,1,e.all_battlegrounds,3,3,1,(function(t){e.endTurn()}))}},t.s30b={img:"Strategy Card 30b.png",name:"Fidel Castro",text:"Place up to 3 Influence cubes in total on one or both Cuba battlegrounds",side:"ussr",tokens:3,defcon:0,event:function(t){e.eventAddInfluence(t,t,["cuba_mil","cuba_pol"],3,3,0,(function(t){e.endTurn()}))}},t.s31b={img:"Strategy Card 31b.png",name:"Berlin Blockade",text:"USSR gains 2 Prestige. Then US player may escalate/deflate a USSR DEFCON track by up to 2 steps",side:"ussr",tokens:2,defcon:0,event:function(t){var a=e.app.crypto.stringToBase64(JSON.stringify([1,2,3]));e.addMove("event_shift_defcon\t2\t1\t"+a+"\t2\t2"),e.addMove("prestige\t2\t1"),e.addMove("notify\tUSSR gains 2 prestige"),e.endTurn()}},t.s32b={img:"Strategy Card 32b.png",name:"Suez-Hungary",text:"Keep placing 1 USSR Influence cube on the Italy battleground until the USSR runs out, reaches 5, or has one more Influence cube there than the US player",side:"ussr",tokens:2,defcon:0,event:function(t){e.updateLog("USSR plays Suez-Hungary");var a=e.game.arenas.italy.us+1;a>5&&(a=5);var r=a-e.game.arenas.italy.ussr;r>0&&(e.addMove("add_influence\t1\titaly\t"+r+"\t-1"),e.addMove("notify\tUSSR adds "+r+" in Italy")),e.endTurn()}},t.s33b={img:"Strategy Card 33b.png",name:"Maskirovka",text:"If USSR military DEFCON track is in the DEFCON 3 area, place up to 1 Influence cube on all military battlegrounds",side:"ussr",tokens:2,defcon:0,event:function(t){var a=e.app.crypto.stringToBase64(JSON.stringify(["cuba_mil","atlantic","berlin"]));e.game.state.defcon1_ussr<4?(e.addMove("event_add_influence\t1\t1\t"+a+"\t3\t1\t0"),e.addMove("notify\tUSSR places influence in military battlegrounds")):e.addMove("notify\tUSSR military defcon track is higher than 3."),e.endTurn()}},t.s34b={img:"Strategy Card 34b.png",name:"Bay of Pigs",text:"Play on opponent. They EITHER remove 2 Influence cubes from the Alliances battleground OR they can't play Events to deflate their DEFCON tracks for this round",side:"ussr",tokens:2,defcon:0,event:function(t){e.addMove("bayofpigs"),e.endTurn()}},t.s35b={img:"Strategy Card 35b.png",name:"Turn Back the Ships",text:"Deflate the most escalated USSR DEFCON track by up to 2 steps (if tied, pick one)",side:"ussr",tokens:1,defcon:0,event:function(t){var a=0,r=[];e.game.state.defcon1_ussr>a&&(a=e.game.state.defcon1_ussr),e.game.state.defcon2_ussr>a&&(a=e.game.state.defcon2_ussr),e.game.state.defcon3_ussr>a&&(a=e.game.state.defcon3_ussr),e.game.state.defcon1_ussr>=a&&r.push(1),e.game.state.defcon2_ussr>=a&&r.push(2),e.game.state.defcon3_ussr>=a&&r.push(3),e.eventDecreaseDefcon(t,t,r,2,2,(function(t){e.endTurn()}))}},t.s36b={img:"Strategy Card 36b.png",name:"Strategic Balance",text:"Place up to 3 Influence cubes on the Atlantic battleground",side:"ussr",tokens:1,defcon:1,event:function(t){e.updateStatus("<div class='status-message' id='status-message'>Place up to 3 Influence on the Atlantic battleground: <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.eventAddInfluence(t,t,["atlantic"],3,3,1,(function(t){e.endTurn()}))}},t.s37b={img:"Strategy Card 37b.png",name:"National Liberation",text:"Command 3 Influence cubes on to one political battleground",side:"ussr",tokens:1,defcon:1,event:function(t){e.updateStatus("<div class='status-message' id='status-message'>Command 3 Influence cubes on to one political battleground: <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.eventAddInfluence(t,t,["cuba_pol","italy","turkey"],3,3,1,(function(t){e.endTurn()}))}},t.s38b={img:"Strategy Card 38b.png",name:"U-2 Downed",text:"Place up to 2 Influence cubes on the Turkey battleground. Remove half the US Influence cubes from one Cuba battleground (rounded up)",side:"ussr",tokens:2,defcon:0,event:function(t){e.updateStatus("<div class='status-message' id='status-message'>Add up to 2 influence cubes in Turkey: <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.eventAddInfluence(t,t,["turkey"],2,2,0,(function(a){e.updateStatus("<div class='status-message' id='status-message'>Remove half of US influence from one Cuban battleground: <p></p><ul><li class='card' id='done'>click here when done</li></ul></div>"),e.eventRemoveInfluence(t,2,["cuba_pol","cuba_mil"],101,2,0,(function(t){e.endTurn()}))}))}},t.s39b={img:"Strategy Card 39b.png",name:"Defensive Missiles",text:"Place up to 2 Influence cubes in total on the Television and United Nations battlegrounds",side:"ussr",tokens:1,defcon:1,event:function(t){e.eventAddInfluence(t,t,["un","television"],2,2,1,(function(t){e.endTurn()}))}},t}},{key:"playEvent",value:function(e,t){return"culturaldiplomacy"==t?(this.updateLog("Do something here"),1):0}},{key:"returnGameOptionsHTML",value:function(){return'\n\n            <label for="player1">Play as:</label>\n            <select name="player1">\n              <option value="random">random</option>\n              <option value="ussr" default>USSR</option>\n              <option value="us">US</option>\n            </select>\n\n            <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n\n\n          '}},{key:"returnFormattedGameOptions",value:function(e){var t={};for(var a in e)"player1"==a?"random"==e[a]?t[a]=e[a]:t[a]="ussr"==e[a]?"ussr":"us":t[a]=e[a];return t}},{key:"formatStatusHeader",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a='<i class="fa fa-arrow-left" id="back_button"></i>';return'\n    <div class="status-header">\n      '.concat(t?a:"",'\n      <div style="text-align: center;">\n        ').concat(e,"\n      </div>\n    </div>\n    ")}},{key:"returnCardItem",value:function(e){if("personal_letter"==e)return'<div id="personal_letter" class="card cardbox-hud cardbox-hud-status">'.concat(this.returnCardImage(e),'<img class="cardimg showcard" id="personal_letter" src="/thirteen/img/Agenda%20Card%2013b.png" /></div>');for(var t=0;t<this.game.deck.length;t++)if(null!=this.game.deck[t].cards[e])return'<div id="'.concat(e.replace(/ /g,""),'" class="card cardbox-hud cardbox-hud-status">').concat(this.returnCardImage(e),"</div>");return'<li class="card showcard" id="'+e+'">'+e+"</li>"}},{key:"endGame",value:function(e,t){this.game.over=1,"us"==e&&(this.game.winner=2),"ussr"==e&&(this.game.winner=1),this.game.winner==this.game.player&&(this.game.over=0,this.resignGame()),1==this.browser_active&&(this.displayModal("<span>The Game is Over</span> - <span>"+e.toUpperCase()+"</span> <span>wins by</span> <span>"+t+"<span>"),this.updateStatus("<div class='status-message' id='status-message'><span>The Game is Over</span> - <span>"+e.toUpperCase()+"</span> <span>wins by</span> <span>"+t+"<span></div>"))}},{key:"returnUnplayedCards",value:function(){var e={};for(var t in this.game.deck[1].cards)e[t]=this.game.deck[1].cards[t];for(var a in this.game.deck[1].discards)delete e[a];for(var r in this.game.deck[1].removed)delete e[r];for(var n=0;n<this.game.deck[1].hand.length;n++)delete e[this.game.deck[1].hand[n]];return e}}])&&n(t.prototype,a),r&&n(t,r),d}(d));e.exports=p},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/absurdum/brexit.js: 'return' outside of function (18:6)\n\n[0m [90m 16 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mwargames_concession [33m+=[39m [35m2[39m[33m;[39m[0m\n[0m [90m 17 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 18 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 19 | [39m    }[0m\n[0m [90m 20 | [39m[0m\n[0m [90m 21 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/absurdum/kissingerisawarcriminal.js: 'return' outside of function (6:8)\n\n[0m [90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 5 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing Kissinger:</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m[0m\n[0m [90m 8 | [39m      }[0m\n[0m [90m 9 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/cold_war_crazies/berlinairlift.js: 'return' outside of function (10:6)\n\n[0m [90m  8 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mberlinairlift [33m=[39m [35m1[39m[33m;[39m[0m\n[0m [90m  9 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m      [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m    }[0m\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/cold_war_crazies/communistrevolution.js: \'return\' outside of function (13:1)\n\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m      [36mif[39m (me [33m==[39m [32m"us"[39m) {[0m\n[0m[31m[1m>[22m[39m[90m 13 | [39m\t[36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m\t[31m[1m^[22m[39m[0m\n[0m [90m 14 | [39m      }[0m\n[0m [90m 15 | [39m      [36mif[39m (me [33m==[39m [32m"ussr"[39m) {[0m\n[0m [90m 16 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/cold_war_crazies/philadelphia.js: \'return\' outside of function (9:1)\n\n[0m [90m  7 | [39m[0m\n[0m [90m  8 | [39m      [36mif[39m (me [33m==[39m [32m"ussr"[39m) {[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m\t[36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m\t[31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m      }[0m\n[0m [90m 11 | [39m      [36mif[39m (me [33m==[39m [32m"us"[39m) {[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/cold_war_crazies/sinoindian.js: 'return' outside of function (14:1)\n\n[0m [90m 12 | [39m      [36mif[39m (twilight_self[33m.[39mwhoHasTheChinaCard() [33m!=[39m player) {[0m\n[0m [90m 13 | [39m\ttwilight_self[33m.[39mupdateLog([32m\"Sino-Indian War cannot trigger, as player does not have the China Card\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 14 | [39m\t[36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m\t[31m[1m^[22m[39m[0m\n[0m [90m 15 | [39m      }[0m\n[0m [90m 16 | [39m[0m\n[0m [90m 17 | [39m      [36mif[39m (me [33m!=[39m player) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/cold_war_crazies/sovietcoup.js: \'return\' outside of function (13:3)\n\n[0m [90m 11 | [39m\t[36mif[39m (player [33m==[39m [32m"us"[39m) {[0m\n[0m [90m 12 | [39m\t  let burn [33m=[39m twilight_self[33m.[39mrollDice([35m6[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 13 | [39m\t  [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m\t  [31m[1m^[22m[39m[0m\n[0m [90m 14 | [39m\t}[0m\n[0m [90m 15 | [39m\t[0m\n[0m [90m 16 | [39m        twilight_self[33m.[39maddMove([32m"resolve\\tsovietcoup"[39m)[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/cold_war_crazies/titostalin.js: 'return' outside of function (12:6)\n\n[0m [90m 10 | [39m      twilight_self[33m.[39mgame[33m.[39mcountries[[32m'yugoslavia'[39m][33m.[39mbg [33m=[39m [35m1[39m[33m;[39m[0m\n[0m [90m 11 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 12 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 13 | [39m[0m\n[0m [90m 14 | [39m    }\t[0m\n[0m [90m 15 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/community/berlinagreement.js: 'return' outside of function (35:8)\n\n[0m [90m 33 | [39m      [36mif[39m (placeable[33m.[39mlength [33m==[39m [35m0[39m) {[0m\n[0m [90m 34 | [39m        [36mthis[39m[33m.[39mupdateLog(player [33m+[39m [32m\" cannot place 1 additional OP\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 35 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 36 | [39m      } [36melse[39m {[0m\n[0m [90m 37 | [39m[0m\n[0m [90m 38 | [39m        [36mif[39m (player [33m==[39m opponent) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/community/culturaldiplomacy.js: 'return' outside of function (62:6)\n\n[0m [90m 60 | [39m      }[0m\n[0m [90m 61 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 62 | [39m      [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 63 | [39m    }[0m\n[0m [90m 64 | [39m[0m\n[0m [90m 65 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/community/gouzenkoaffair.js: \'return\' outside of function (11:6)\n\n[0m [90m  9 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39moptional[33m.[39mgouzenkoaffair [33m=[39m [35m1[39m[33m;[39m[0m\n[0m [90m 10 | [39m      [36mthis[39m[33m.[39mshowInfluence([32m"canada"[39m[33m,[39m [32m"ussr"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 11 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 12 | [39m    }[0m\n[0m [90m 13 | [39m[0m\n[0m [90m 14 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/community/handshake.js: 'return' outside of function (12:6)\n\n[0m [90m 10 | [39m        [36mthis[39m[33m.[39mupdateSpaceRace()[33m;[39m[0m\n[0m [90m 11 | [39m      }[0m\n[0m[31m[1m>[22m[39m[90m 12 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 13 | [39m    }[0m\n[0m [90m 14 | [39m[0m\n[0m [90m 15 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/community/poliovaccine.js: 'return' outside of function (10:8)\n\n[0m [90m  8 | [39m      [36mif[39m (my_go [33m==[39m [35m0[39m) {[0m\n[0m [90m  9 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Waiting for Opponent to play Polio Vaccine</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m      }[0m\n[0m [90m 13 | [39m      [36mif[39m (my_go [33m==[39m [35m1[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/community/rustinredsquare.js: 'return' outside of function (9:6)\n\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mupdateDefcon()[33m;[39m[0m\n[0m [90m  8 | [39m      [36mthis[39m[33m.[39mupdateMilitaryOperations()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m    }[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/abmtreaty.js: 'return' outside of function (27:6)\n\n[0m [90m 25 | [39m      }[0m\n[0m [90m 26 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 27 | [39m      [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 28 | [39m    }[0m\n[0m [90m 29 | [39m[0m\n[0m [90m 30 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/africa.js: 'return' outside of function (15:6)\n\n[0m [90m 13 | [39m[0m\n[0m [90m 14 | [39m      [36mthis[39m[33m.[39mupdateVictoryPoints()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 15 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 16 | [39m    }[0m\n[0m [90m 17 | [39m[0m\n[0m [90m 18 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/aldrichames.js: 'return' outside of function (11:8)\n\n[0m [90m  9 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 10 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is revealing its cards to USSR</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 11 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 12 | [39m      }[0m\n[0m [90m 13 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m 14 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>USSR is playing Aldrich Ames</div>\"[39m)[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/allende.js: \'return\' outside of function (8:6)\n\n[0m [90m  6 | [39m    [36mif[39m (card [33m==[39m [32m"allende"[39m) {[0m\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"chile"[39m[33m,[39m [35m2[39m[33m,[39m [32m"ussr"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m    }[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/alliance.js: 'return' outside of function (21:6)\n\n[0m [90m 19 | [39m      [36mthis[39m[33m.[39mupdateLog([32m\"<span>US VP bonus is:</span> \"[39m [33m+[39m us_bonus)[33m;[39m[0m\n[0m [90m 20 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 21 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 22 | [39m[0m\n[0m [90m 23 | [39m    }[0m\n[0m [90m 24 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/arabisraeli.js: 'return' outside of function (10:8)\n\n[0m [90m  8 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mcampdavid [33m==[39m [35m1[39m) {[0m\n[0m [90m  9 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"Arab-Israeli conflict cancelled by Camp David Accords\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m      }[0m\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m      let target [33m=[39m [35m4[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/armsrace.js: 'return' outside of function (33:6)\n\n[0m [90m 31 | [39m[0m\n[0m [90m 32 | [39m      [36mthis[39m[33m.[39mupdateVictoryPoints()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 33 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 34 | [39m[0m\n[0m [90m 35 | [39m    }[0m\n[0m [90m 36 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/asia.js: 'return' outside of function (15:6)\n\n[0m [90m 13 | [39m[0m\n[0m [90m 14 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 15 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 16 | [39m    }[0m\n[0m [90m 17 | [39m[0m\n[0m [90m 18 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/asknot.js: 'return' outside of function (11:8)\n\n[0m [90m  9 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 10 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Waiting for US to play Ask Not What Your Country Can Do For You</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 11 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m      }[0m\n[0m [90m 14 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/awacs.js: \'return\' outside of function (10:6)\n\n[0m [90m  8 | [39m      [36mthis[39m[33m.[39mcountries[[32m"saudiarabia"[39m][33m.[39mus [33m+=[39m [35m2[39m[33m;[39m[0m\n[0m [90m  9 | [39m      [36mthis[39m[33m.[39mshowInfluence([32m"saudiarabia"[39m[33m,[39m [32m"us"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m    }[0m\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/beartrap.js: 'return' outside of function (8:6)\n\n[0m [90m  6 | [39m    [36mif[39m (card [33m==[39m [32m\"beartrap\"[39m) {[0m\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mbeartrap [33m=[39m [35m1[39m[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m    }[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/blockade.js: 'return' outside of function (13:8)\n\n[0m [90m 11 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39moptional[33m.[39mberlinagreement [33m==[39m [35m1[39m) {[0m\n[0m [90m 12 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"Berlin Agreement prevents Blockade.\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 13 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 14 | [39m      }[0m\n[0m [90m 15 | [39m[0m\n[0m [90m 16 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/brezhnev.js: 'return' outside of function (7:6)\n\n[0m [90m  5 | [39m    [36mif[39m (card [33m==[39m [32m\"brezhnev\"[39m) {[0m\n[0m [90m  6 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mbrezhnev [33m=[39m [35m1[39m[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  7 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m  8 | [39m    }[0m\n[0m [90m  9 | [39m[0m\n[0m [90m 10 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/brushwar.js: 'return' outside of function (10:8)\n\n[0m [90m  8 | [39m      [36mif[39m (me [33m!=[39m player) {[0m\n[0m [90m  9 | [39m        let burned [33m=[39m [36mthis[39m[33m.[39mrollDice([35m6[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m      }[0m\n[0m [90m 12 | [39m      [36mif[39m (me [33m==[39m player) {[0m\n[0m [90m 13 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/cambridge.js: 'return' outside of function (7:8)\n\n[0m [90m  5 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"<span>The Cambridge Five cannot be played as an event in Late Wa</span>\"[39m)[33m;[39m[0m\n[0m [90m  6 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'><span>The Cambridge Five cannot be played as an event in Late War</span></div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  7 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m  8 | [39m      }[0m\n[0m [90m  9 | [39m[0m\n[0m [90m 10 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/campdavid.js: \'return\' outside of function (19:6)\n\n[0m [90m 17 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"egypt"[39m[33m,[39m [35m1[39m[33m,[39m [32m"us"[39m)[33m;[39m[0m\n[0m [90m 18 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"jordan"[39m[33m,[39m [35m1[39m[33m,[39m [32m"us"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 19 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 20 | [39m    }[0m\n[0m [90m 21 | [39m[0m\n[0m [90m 22 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/centralamerica.js: 'return' outside of function (14:6)\n\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m      [36mthis[39m[33m.[39mupdateVictoryPoints()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 14 | [39m      [36mreturn[39m [35m1[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 15 | [39m    }[0m\n[0m [90m 16 | [39m[0m\n[0m [90m 17 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/che.js: 'return' outside of function (26:8)\n\n[0m [90m 24 | [39m      [36mif[39m (valid_targets [33m==[39m [35m0[39m) {[0m\n[0m [90m 25 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"No valid targets for Che\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 26 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 27 | [39m      } [0m\n[0m [90m 28 | [39m        [0m\n[0m [90m 29 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/chernobyl.js: 'return' outside of function (6:8)\n\n[0m [90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 5 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing Chernobyl</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m[0m\n[0m [90m 8 | [39m      }[0m\n[0m [90m 9 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/china.js: 'return' outside of function (17:6)\n\n[0m [90m 15 | [39m        [36mthis[39m[33m.[39mdisplayChinaCard()[33m;[39m[0m\n[0m [90m 16 | [39m      }[0m\n[0m[31m[1m>[22m[39m[90m 17 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 18 | [39m    }[0m\n[0m [90m 19 | [39m[0m\n[0m [90m 20 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/cia.js: 'return' outside of function (9:8)\n\n[0m [90m  7 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m  8 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>USSR is playing CIA Created</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m      }[0m\n[0m [90m 11 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/colonial.js: 'return' outside of function (9:8)\n\n[0m [90m  7 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m  8 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing Colonial Rear Guards</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m      }[0m\n[0m [90m 12 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/comecon.js: 'return' outside of function (6:35)\n\n[0m [90m 4 | [39m    [36mif[39m (card [33m==[39m [32m\"comecon\"[39m) {[0m\n[0m [90m 5 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) { [36mreturn[39m [35m0[39m[33m;[39m }[0m\n[0m [90m   | [39m                                   [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 8 | [39m[0m\n[0m [90m 9 | [39m        [36mvar[39m twilight_self [33m=[39m [36mthis[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/containment.js: 'return' outside of function (8:6)\n\n[0m [90m  6 | [39m    [36mif[39m (card [33m==[39m [32m\"containment\"[39m) {[0m\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mcontainment [33m=[39m [35m1[39m[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m    }[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/cubanmissile.js: \'return\' outside of function (10:6)\n\n[0m [90m  8 | [39m      [36mif[39m (player [33m==[39m [32m"ussr"[39m) { [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mcubanmissilecrisis [33m=[39m [35m2[39m[33m;[39m }[0m\n[0m [90m  9 | [39m      [36mif[39m (player [33m==[39m [32m"us"[39m) { [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mcubanmissilecrisis [33m=[39m [35m1[39m[33m;[39m }[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m    }[0m\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/culturalrev.js: 'return' outside of function (69:18)\n\n[0m [90m 67 | [39m                  [36mthis[39m[33m.[39mgame[33m.[39mdeck[[35m0[39m][33m.[39mhand[33m.[39msplice(i[33m,[39m [35m1[39m)[33m;[39m[0m\n[0m [90m 68 | [39m                  [36mthis[39m[33m.[39mdisplayChinaCard()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 69 | [39m                  [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m                  [31m[1m^[22m[39m[0m\n[0m [90m 70 | [39m                }[0m\n[0m [90m 71 | [39m              }[0m\n[0m [90m 72 | [39m            } [36melse[39m {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/deathsquads.js: \'return\' outside of function (8:6)\n\n[0m [90m  6 | [39m      [36mif[39m (player [33m==[39m [32m"ussr"[39m) { [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mdeathsquads[33m--[39m[33m;[39m }[0m\n[0m [90m  7 | [39m      [36mif[39m (player [33m==[39m [32m"us"[39m) { [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mdeathsquads[33m++[39m[33m;[39m }[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m    }[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/debtcrisis.js: 'return' outside of function (5:8)\n\n[0m [90m 3 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 4 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US playing Latin American Debt Crisis</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 5 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 6 | [39m      }[0m\n[0m [90m 7 | [39m[0m\n[0m [90m 8 | [39m      let cards_available [33m=[39m [35m0[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/decolonization.js: 'return' outside of function (13:8)\n\n[0m [90m 11 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m 12 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>USSR is playing Decolonization</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 13 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 14 | [39m      }[0m\n[0m [90m 15 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 16 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/defectors.js: 'return' outside of function (10:8)\n\n[0m [90m  8 | [39m          [36mthis[39m[33m.[39mupdateDefcon()[33m;[39m[0m\n[0m [90m  9 | [39m        }[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m      }[0m\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m      [90m//[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/degaulle.js: \'return\' outside of function (11:6)\n\n[0m [90m  9 | [39m      [36mthis[39m[33m.[39mremoveInfluence([32m"france"[39m[33m,[39m [35m2[39m[33m,[39m [32m"us"[39m)[33m;[39m[0m\n[0m [90m 10 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"france"[39m[33m,[39m [35m1[39m[33m,[39m [32m"ussr"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 11 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 12 | [39m    }[0m\n[0m [90m 13 | [39m[0m\n[0m [90m 14 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/destalinization.js: 'return' outside of function (9:8)\n\n[0m [90m  7 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m  8 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>USSR is playing Destalinization</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m      }[0m\n[0m [90m 12 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/duckandcover.js: 'return' outside of function (20:8)\n\n[0m [90m 18 | [39m        }[0m\n[0m [90m 19 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 20 | [39m        [36mreturn[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 21 | [39m[0m\n[0m [90m 22 | [39m      } [36melse[39m {[0m\n[0m [90m 23 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/easteuropean.js: 'return' outside of function (9:8)\n\n[0m [90m  7 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m  8 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing East European Unrest</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m      }[0m\n[0m [90m 11 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/europe.js: 'return' outside of function (13:6)\n\n[0m [90m 11 | [39m      [36mif[39m (player [33m==[39m [32m\"ussr\"[39m) { [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mstats[33m.[39mussr_scorings[33m++[39m[33m;[39m }[0m\n[0m [90m 12 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 13 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 14 | [39m    }[0m\n[0m [90m 15 | [39m[0m\n[0m [90m 16 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/evilempire.js: 'return' outside of function (14:6)\n\n[0m [90m 12 | [39m      [36mthis[39m[33m.[39mupdateVictoryPoints()[33m;[39m[0m\n[0m [90m 13 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 14 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 15 | [39m[0m\n[0m [90m 16 | [39m    }[0m\n[0m [90m 17 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/fidel.js: \'return\' outside of function (11:6)\n\n[0m [90m  9 | [39m        [36mthis[39m[33m.[39mplaceInfluence([32m"cuba"[39m[33m,[39m ([35m3[39m[33m-[39mussrinf)[33m,[39m [32m"ussr"[39m)[33m;[39m[0m\n[0m [90m 10 | [39m      }[0m\n[0m[31m[1m>[22m[39m[90m 11 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 12 | [39m    }[0m\n[0m [90m 13 | [39m[0m\n[0m [90m 14 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/fiveyearplan.js: 'return' outside of function (16:8)\n\n[0m [90m 14 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m 15 | [39m        let burnrand [33m=[39m [36mthis[39m[33m.[39mrollDice()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 16 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 17 | [39m      }[0m\n[0m [90m 18 | [39m[0m\n[0m [90m 19 | [39m      [90m//[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/flowerpower.js: 'return' outside of function (9:8)\n\n[0m [90m  7 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mevilempire [33m==[39m [35m1[39m) {[0m\n[0m [90m  8 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"Flower Power prevented by Evil Empire\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m      }[0m\n[0m [90m 11 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mflowerpower [33m=[39m [35m1[39m[33m;[39m[0m\n[0m [90m 12 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/formosan.js: 'return' outside of function (9:6)\n\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mformosan [33m=[39m [35m1[39m[33m;[39m[0m\n[0m [90m  8 | [39m      $([32m'.formosan_resolution'[39m)[33m.[39mshow()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m    }[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/glastnost.js: 'return' outside of function (23:8)\n\n[0m [90m 21 | [39m        [36mthis[39m[33m.[39mendTurn()[33m;[39m[0m\n[0m [90m 22 | [39m      } [36melse[39m {[0m\n[0m[31m[1m>[22m[39m[90m 23 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 24 | [39m      }[0m\n[0m [90m 25 | [39m[0m\n[0m [90m 26 | [39m      [36mreturn[39m [35m0[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11686:51)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/grainsales.js: 'return' outside of function (17:8)\n\n[0m [90m 15 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Waiting for random card from USSR</div>\"[39m)[33m;[39m[0m\n[0m [90m 16 | [39m        let burnrand [33m=[39m [36mthis[39m[33m.[39mrollDice()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 17 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 18 | [39m      }[0m\n[0m [90m 19 | [39m[0m\n[0m [90m 20 | [39m      [90m//[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/howilearned.js: 'return' outside of function (117:6)\n\n[0m [90m 115 | [39m        })[33m;[39m[0m\n[0m [90m 116 | [39m      }[0m\n[0m[31m[1m>[22m[39m[90m 117 | [39m      [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m     | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 118 | [39m    }[0m\n[0m [90m 119 | [39m[0m\n[0m [90m 120 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/indopaki.js: 'return' outside of function (13:8)\n\n[0m [90m 11 | [39m      [36mif[39m (me [33m!=[39m player) {[0m\n[0m [90m 12 | [39m        let burned [33m=[39m [36mthis[39m[33m.[39mrollDice([35m6[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 13 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 14 | [39m      }[0m\n[0m [90m 15 | [39m      [36mif[39m (me [33m==[39m player) {[0m\n[0m [90m 16 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/indreds.js: 'return' outside of function (6:8)\n\n[0m [90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 5 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing Independent Reds</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m      }[0m\n[0m [90m 8 | [39m[0m\n[0m [90m 9 | [39m      let yugo_ussr [33m=[39m [36mthis[39m[33m.[39mcountries[[32m'yugoslavia'[39m][33m.[39mussr[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/irancontra.js: 'return' outside of function (8:6)\n\n[0m [90m  6 | [39m    [36mif[39m (card [33m==[39m [32m\"irancontra\"[39m) {[0m\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mirancontra [33m=[39m [35m1[39m[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m    }[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/iranianhostage.js: \'return\' outside of function (9:6)\n\n[0m [90m  7 | [39m      [36mif[39m ([36mthis[39m[33m.[39mcountries[[32m"iran"[39m][33m.[39mus [33m>[39m [35m0[39m) { [36mthis[39m[33m.[39mremoveInfluence([32m"iran"[39m[33m,[39m [36mthis[39m[33m.[39mcountries[[32m"iran"[39m][33m.[39mus[33m,[39m [32m"us"[39m)[33m;[39m }[0m\n[0m [90m  8 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"iran"[39m[33m,[39m [35m2[39m[33m,[39m [32m"ussr"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m    }[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/iraniraq.js: 'return' outside of function (10:8)\n\n[0m [90m  8 | [39m      [36mif[39m (me [33m!=[39m player) {[0m\n[0m [90m  9 | [39m        let burned [33m=[39m [36mthis[39m[33m.[39mrollDice([35m6[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m      }[0m\n[0m [90m 12 | [39m      [36mif[39m (me [33m==[39m player) {[0m\n[0m [90m 13 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/ironlady.js: 'return' outside of function (24:6)\n\n[0m [90m 22 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mironlady [33m=[39m [35m1[39m[33m;[39m[0m\n[0m [90m 23 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 24 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 25 | [39m    }[0m\n[0m [90m 26 | [39m[0m\n[0m [90m 27 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/johnpaul.js: \'return\' outside of function (12:6)\n\n[0m [90m 10 | [39m      [36mthis[39m[33m.[39mremoveInfluence([32m"poland"[39m[33m,[39m [35m2[39m[33m,[39m [32m"ussr"[39m)[33m;[39m[0m\n[0m [90m 11 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"poland"[39m[33m,[39m [35m1[39m[33m,[39m [32m"us"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 12 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 13 | [39m    }[0m\n[0m [90m 14 | [39m[0m\n[0m [90m 15 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/junta.js: 'return' outside of function (81:6)\n\n[0m [90m 79 | [39m        }[0m\n[0m [90m 80 | [39m      }[0m\n[0m[31m[1m>[22m[39m[90m 81 | [39m      [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 82 | [39m    }[0m\n[0m [90m 83 | [39m[0m\n[0m [90m 84 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/kal007.js: 'return' outside of function (16:8)\n\n[0m [90m 14 | [39m        [36mthis[39m[33m.[39maddMove([32m\"limit\\tcoups\"[39m)[33m;[39m[0m\n[0m [90m 15 | [39m        [36mthis[39m[33m.[39mendTurn()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 16 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 17 | [39m      } [36melse[39m {[0m\n[0m [90m 18 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m 19 | [39m      }[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/kitchendebates.js: 'return' outside of function (85:6)\n\n[0m [90m 83 | [39m      }[0m\n[0m [90m 84 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 85 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 86 | [39m    }[0m\n[0m [90m 87 | [39m[0m\n[0m [90m 88 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/koreanwar.js: 'return' outside of function (32:6)\n\n[0m [90m 30 | [39m        [36mthis[39m[33m.[39mupdateMilitaryOperations()[33m;[39m[0m\n[0m [90m 31 | [39m      }[0m\n[0m[31m[1m>[22m[39m[90m 32 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 33 | [39m[0m\n[0m [90m 34 | [39m    }[0m\n[0m [90m 35 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/liberation.js: 'return' outside of function (6:8)\n\n[0m [90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m 5 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>USSR is playing Liberation Theology</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m      }[0m\n[0m [90m 8 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 9 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/lonegunman.js: 'return' outside of function (10:8)\n\n[0m [90m  8 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m  9 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing Lone Gunman</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m      }[0m\n[0m [90m 13 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/marine.js: 'return' outside of function (18:8)\n\n[0m [90m 16 | [39m      [36mif[39m (ustroops [33m==[39m [35m0[39m) {[0m\n[0m [90m 17 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"US has no influence in the Middle-East\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 18 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 19 | [39m      }[0m\n[0m [90m 20 | [39m[0m\n[0m [90m 21 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/marshall.js: 'return' outside of function (9:8)\n\n[0m [90m  7 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m  8 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing Marshall Plan</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m      }[0m\n[0m [90m 12 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/mideast.js: 'return' outside of function (14:6)\n\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m      [36mthis[39m[33m.[39mupdateVictoryPoints()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 14 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 15 | [39m    }[0m\n[0m [90m 16 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/missileenvy.js: 'return' outside of function (20:8)\n\n[0m [90m 18 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m instigator) {[0m\n[0m [90m 19 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Opponent is returning card for Missile Envy</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 20 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 21 | [39m[0m\n[0m [90m 22 | [39m      }[0m\n[0m [90m 23 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/muslimrevolution.js: 'return' outside of function (4:47)\n\n[0m [90m 2 | [39m    [36mif[39m (card [33m==[39m [32m\"muslimrevolution\"[39m) {[0m\n[0m [90m 3 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mawacs [33m==[39m [35m1[39m) { [36mreturn[39m [35m1[39m[33m;[39m }[0m\n[0m [90m   | [39m                                               [31m[1m^[22m[39m[0m\n[0m [90m 5 | [39m[0m\n[0m [90m 6 | [39m      [36mvar[39m countries_to_purge [33m=[39m [35m2[39m[33m;[39m[0m\n[0m [90m 7 | [39m      let countries_with_us_influence [33m=[39m [35m0[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/nasser.js: 'return' outside of function (19:6)\n\n[0m [90m 17 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m\"egypt\"[39m[33m,[39m [35m2[39m[33m,[39m [32m\"ussr\"[39m)[33m;[39m[0m\n[0m [90m 18 | [39m      [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Nasser - Soviets add two influence in Egypt. US loses half (rounded-up) of all influence in Egypt.</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 19 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 20 | [39m[0m\n[0m [90m 21 | [39m[0m\n[0m [90m 22 | [39m    }[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/nato.js: 'return' outside of function (21:6)\n\n[0m [90m 19 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"NATO cannot trigger before Warsaw Pact or Marshall Plan. Moving to discard pile.\"[39m)[33m;[39m[0m\n[0m [90m 20 | [39m      }[0m\n[0m[31m[1m>[22m[39m[90m 21 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 22 | [39m    }[0m\n[0m [90m 23 | [39m[0m\n[0m [90m 24 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/naziscientist.js: 'return' outside of function (8:6)\n\n[0m [90m  6 | [39m    [36mif[39m (card [33m==[39m [32m\"naziscientist\"[39m) {[0m\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39madvanceSpaceRace(player)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m    }[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/nixon.js: 'return' outside of function (55:6)\n\n[0m [90m 53 | [39m      }[0m\n[0m [90m 54 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 55 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 56 | [39m    }[0m\n[0m [90m 57 | [39m[0m\n[0m [90m 58 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/norad.js: 'return' outside of function (8:6)\n\n[0m [90m  6 | [39m    [36mif[39m (card [33m==[39m [32m\"norad\"[39m) {[0m\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mnorad [33m=[39m [35m1[39m[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m    }[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/northseaoil.js: 'return' outside of function (8:6)\n\n[0m [90m  6 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mnorthseaoil [33m=[39m [35m1[39m[33m;[39m[0m\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mnorthseaoil_bonus [33m=[39m [35m1[39m[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m    }[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/nuclearsubs.js: 'return' outside of function (8:6)\n\n[0m [90m  6 | [39m    [36mif[39m (card [33m==[39m [32m\"nuclearsubs\"[39m) {[0m\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mnuclearsubs [33m=[39m [35m1[39m[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m    }[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/nucleartestban.js: 'return' outside of function (21:6)\n\n[0m [90m 19 | [39m      [36mthis[39m[33m.[39mupdateDefcon()[33m;[39m[0m\n[0m [90m 20 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 21 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 22 | [39m    }[0m\n[0m [90m 23 | [39m[0m\n[0m [90m 24 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/oas.js: 'return' outside of function (10:8)\n\n[0m [90m  8 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m  9 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing OAS</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m      }[0m\n[0m [90m 13 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/olympic.js: 'return' outside of function (14:8)\n\n[0m [90m 12 | [39m      [36mif[39m (player [33m==[39m me) {[0m\n[0m [90m 13 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Opponent is deciding whether to boycott the Olympics</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 14 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 15 | [39m      } [36melse[39m {[0m\n[0m [90m 16 | [39m[0m\n[0m [90m 17 | [39m        let twilight_self [33m=[39m [36mthis[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/onesmallstep.js: 'return' outside of function (25:6)\n\n[0m [90m 23 | [39m      }[0m\n[0m [90m 24 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 25 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 26 | [39m    }[0m\n[0m [90m 27 | [39m[0m\n[0m [90m 28 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/opec.js: 'return' outside of function (22:6)\n\n[0m [90m 20 | [39m      }[0m\n[0m [90m 21 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 22 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 23 | [39m[0m\n[0m [90m 24 | [39m    }[0m\n[0m [90m 25 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/ortega.js: 'return' outside of function (17:8)\n\n[0m [90m 15 | [39m      [36mif[39m (can_coup [33m==[39m [35m0[39m) {[0m\n[0m [90m 16 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"notify\\tUSSR does not have valid coup target\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 17 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 18 | [39m      }[0m\n[0m [90m 19 | [39m[0m\n[0m [90m 20 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mcubanmissilecrisis [33m==[39m [35m1[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/panamacanal.js: \'return\' outside of function (10:6)\n\n[0m [90m  8 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"venezuela"[39m[33m,[39m [35m1[39m[33m,[39m [32m"us"[39m)[33m;[39m[0m\n[0m [90m  9 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"costarica"[39m[33m,[39m [35m1[39m[33m,[39m [32m"us"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m    }[0m\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/pershing.js: 'return' outside of function (9:8)\n\n[0m [90m  7 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m  8 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>USSR playing Pershing II Deployed</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m      }[0m\n[0m [90m 12 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/portuguese.js: \'return\' outside of function (9:6)\n\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"seafricanstates"[39m[33m,[39m [35m2[39m[33m,[39m [32m"ussr"[39m)[33m;[39m[0m\n[0m [90m  8 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"angola"[39m[33m,[39m [35m2[39m[33m,[39m [32m"ussr"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m    }[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/puppet.js: 'return' outside of function (6:8)\n\n[0m [90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 5 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing Puppet Governments</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m      }[0m\n[0m [90m 8 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m 9 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/quagmire.js: 'return' outside of function (9:6)\n\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mnorad [33m=[39m [35m0[39m[33m;[39m[0m\n[0m [90m  8 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mquagmire [33m=[39m [35m1[39m[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m    }[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/reagan.js: 'return' outside of function (17:6)\n\n[0m [90m 15 | [39m      }[0m\n[0m [90m 16 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 17 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 18 | [39m    }[0m\n[0m [90m 19 | [39m[0m\n[0m [90m 20 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/redscare.js: \'return\' outside of function (9:6)\n\n[0m [90m  7 | [39m      [36mif[39m (player [33m==[39m [32m"ussr"[39m) { [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mredscare_player2 [33m+=[39m [35m1[39m[33m;[39m }[0m\n[0m [90m  8 | [39m      [36mif[39m (player [33m==[39m [32m"us"[39m) { [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mredscare_player1 [33m+=[39m [35m1[39m[33m;[39m }[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m    }[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/reformer.js: 'return' outside of function (8:8)\n\n[0m [90m  6 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m  7 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Waiting for USSR to play The Reformer</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m[0m\n[0m [90m 10 | [39m      }[0m\n[0m [90m 11 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/romanian.js: \'return\' outside of function (12:6)\n\n[0m [90m 10 | [39m        [36mthis[39m[33m.[39mplaceInfluence([32m"romania"[39m[33m,[39m ([35m3[39m[33m-[39mussrinf)[33m,[39m [32m"ussr"[39m)[33m;[39m[0m\n[0m [90m 11 | [39m      }[0m\n[0m[31m[1m>[22m[39m[90m 12 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 13 | [39m    }[0m\n[0m [90m 14 | [39m[0m\n[0m [90m 15 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/sadat.js: \'return\' outside of function (11:6)\n\n[0m [90m  9 | [39m      }[0m\n[0m [90m 10 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"egypt"[39m[33m,[39m [35m1[39m[33m,[39m [32m"us"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 11 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 12 | [39m    }[0m\n[0m [90m 13 | [39m[0m\n[0m [90m 14 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/saltnegotiations.js: 'return' outside of function (21:8)\n\n[0m [90m 19 | [39m      [36mif[39m (discardlength [33m==[39m [35m0[39m) {[0m\n[0m [90m 20 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"No cards in discard pile\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 21 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 22 | [39m      }[0m\n[0m [90m 23 | [39m[0m\n[0m [90m 24 | [39m      let my_go [33m=[39m [35m0[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/seasia.js: 'return' outside of function (14:6)\n\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m      [36mthis[39m[33m.[39mupdateVictoryPoints()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 14 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 15 | [39m    }[0m\n[0m [90m 16 | [39m[0m\n[0m [90m 17 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/shuttle.js: 'return' outside of function (8:6)\n\n[0m [90m  6 | [39m    [36mif[39m (card [33m==[39m [32m\"shuttle\"[39m) {[0m\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mshuttlediplomacy [33m=[39m [35m1[39m[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m    }[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/socgov.js: 'return' outside of function (9:8)\n\n[0m [90m  7 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mironlady [33m==[39m [35m1[39m) {[0m\n[0m [90m  8 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"Iron Lady cancels Socialist Governments\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m      }[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/solidarity.js: \'return\' outside of function (10:6)\n\n[0m [90m  8 | [39m        [36mthis[39m[33m.[39mplaceInfluence([32m"poland"[39m[33m,[39m [35m3[39m[33m,[39m [32m"us"[39m)[33m;[39m[0m\n[0m [90m  9 | [39m      }[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m    }[0m\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/southafrican.js: 'return' outside of function (6:8)\n\n[0m [90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m 5 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>USSR is playing South African Unrest</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m[0m\n[0m [90m 8 | [39m      }[0m\n[0m [90m 9 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/southamerica.js: 'return' outside of function (14:6)\n\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m      [36mthis[39m[33m.[39mupdateVictoryPoints()[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 14 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 15 | [39m    }[0m\n[0m [90m 16 | [39m[0m\n[0m [90m 17 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/specialrelation.js: 'return' outside of function (8:10)\n\n[0m [90m  6 | [39m        [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m  7 | [39m          [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing Special Relationship</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  8 | [39m          [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m          [31m[1m^[22m[39m[0m\n[0m [90m  9 | [39m        }[0m\n[0m [90m 10 | [39m[0m\n[0m [90m 11 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing Special Relationship</div>\"[39m)[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/starwars.js: 'return' outside of function (6:8)\n\n[0m [90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mspace_race_us [33m<=[39m [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mspace_race_ussr) {[0m\n[0m [90m 5 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"US is not ahead of USSR in the space race\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m      }[0m\n[0m [90m 8 | [39m[0m\n[0m [90m 9 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mstarwars [33m=[39m [35m1[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/suezcrisis.js: 'return' outside of function (9:8)\n\n[0m [90m  7 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m  8 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>USSR is playing Suez Crisis</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m      }[0m\n[0m [90m 11 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/summit.js: 'return' outside of function (38:8)\n\n[0m [90m 36 | [39m      [36mif[39m (is_winner [33m==[39m [35m0[39m) {[0m\n[0m [90m 37 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"<span>Summit: no winner</span>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 38 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 39 | [39m      } [36melse[39m {[0m\n[0m [90m 40 | [39m[0m\n[0m [90m 41 | [39m        [90m//[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/teardown.js: 'return' outside of function (19:6)\n\n[0m [90m 17 | [39m      }[0m\n[0m [90m 18 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 19 | [39m      [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 20 | [39m    }[0m\n[0m [90m 21 | [39m[0m\n[0m [90m 22 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/tehran.js: 'return' outside of function (24:8)\n\n[0m [90m 22 | [39m      [36mif[39m (usc [33m==[39m [35m0[39m) {[0m\n[0m [90m 23 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"US does not control any Middle-East Countries\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 24 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 25 | [39m      }[0m\n[0m [90m 26 | [39m[0m\n[0m [90m 27 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mourmanintehran [33m=[39m [35m1[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/terrorism.js: 'return' outside of function (52:107)\n\n[0m [90m 50 | [39m        [36mif[39m (cards_for_select[33m.[39mlength [33m<[39m cards_to_discard) { cards_to_discard [33m=[39m cards_for_select[33m.[39mlength[33m;[39m }[0m\n[0m [90m 51 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 52 | [39m        [36mif[39m (cards_to_discard [33m==[39m [35m0[39m) { [36mthis[39m[33m.[39maddMove([32m\"notify\\tUSSR has no cards to discard\"[39m)[33m;[39m [36mthis[39m[33m.[39mendTurn()[33m;[39m [36mreturn[39m [35m0[39m[33m;[39m }[0m\n[0m [90m    | [39m                                                                                                           [31m[1m^[22m[39m[0m\n[0m [90m 53 | [39m        [36mthis[39m[33m.[39mrollDice(cards_for_select[33m.[39mlength[33m,[39m [36mfunction[39m(roll) {[0m\n[0m [90m 54 | [39m            roll [33m=[39m parseInt(roll)[33m-[39m[35m1[39m[33m;[39m[0m\n[0m [90m 55 | [39m            let card [33m=[39m cards_for_select[roll][33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/truman.js: 'return' outside of function (18:8)\n\n[0m [90m 16 | [39m      [36mif[39m (options_purge[33m.[39mlength [33m==[39m [35m0[39m) {[0m\n[0m [90m 17 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"USSR has no influence that can be removed by Truman\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 18 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 19 | [39m      }[0m\n[0m [90m 20 | [39m[0m\n[0m [90m 21 | [39m      [36mif[39m (options_purge[33m.[39mlength [33m==[39m [35m1[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/u2.js: 'return' outside of function (12:6)\n\n[0m [90m 10 | [39m      [36mthis[39m[33m.[39mupdateVictoryPoints()[33m;[39m[0m\n[0m [90m 11 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 12 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 13 | [39m    }[0m\n[0m [90m 14 | [39m[0m\n[0m [90m 15 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/unintervention.js: 'return' outside of function (16:8)\n\n[0m [90m 14 | [39m[0m\n[0m [90m 15 | [39m      [36mif[39m (player [33m!=[39m me) {[0m\n[0m[31m[1m>[22m[39m[90m 16 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 17 | [39m      } [36melse[39m {[0m\n[0m [90m 18 | [39m[0m\n[0m [90m 19 | [39m        let twilight_self [33m=[39m [36mthis[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/usjapan.js: \'return\' outside of function (13:6)\n\n[0m [90m 11 | [39m        [36mthis[39m[33m.[39mplaceInfluence([32m"japan"[39m[33m,[39m (targetinf [33m-[39m usinf)[33m,[39m [32m"us"[39m)[33m;[39m[0m\n[0m [90m 12 | [39m      }[0m\n[0m[31m[1m>[22m[39m[90m 13 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 14 | [39m    }[0m\n[0m [90m 15 | [39m[0m\n[0m [90m 16 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/ussuri.js: 'return' outside of function (52:10)\n\n[0m [90m 50 | [39m        [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 51 | [39m          [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>US is playing USSURI River Skirmish</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 52 | [39m          [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m          [31m[1m^[22m[39m[0m\n[0m [90m 53 | [39m[0m\n[0m [90m 54 | [39m        }[0m\n[0m [90m 55 | [39m        [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/vietnamrevolts.js: \'return\' outside of function (9:6)\n\n[0m [90m  7 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mvietnam_revolts [33m=[39m [35m1[39m[33m;[39m[0m\n[0m [90m  8 | [39m      [36mthis[39m[33m.[39mplaceInfluence([32m"vietnam"[39m[33m,[39m [35m2[39m[33m,[39m [32m"ussr"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m    }[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/voiceofamerica.js: 'return' outside of function (10:8)\n\n[0m [90m  8 | [39m      [36mif[39m (ops_to_purge [33m>[39m ops_removable) { ops_to_purge [33m=[39m ops_removable[33m;[39m }[0m\n[0m [90m  9 | [39m      [36mif[39m (ops_to_purge [33m<=[39m [35m0[39m) {[0m\n[0m[31m[1m>[22m[39m[90m 10 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 11 | [39m      }[0m\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/wargames.js: 'return' outside of function (6:8)\n\n[0m [90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mdefcon [33m!=[39m [35m2[39m) {[0m\n[0m [90m 5 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"Wargames event cannot trigger as DEFCON is not at 2\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m      }[0m\n[0m [90m 8 | [39m[0m\n[0m [90m 9 | [39m      let twilight_self [33m=[39m [36mthis[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/warsawpact.js: 'return' outside of function (11:8)\n\n[0m [90m  9 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m 10 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Waiting for USSR to play Warsaw Pact</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 11 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 12 | [39m      }[0m\n[0m [90m 13 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 14 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/willybrandt.js: 'return' outside of function (6:8)\n\n[0m [90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mteardown [33m==[39m [35m1[39m) {[0m\n[0m [90m 5 | [39m        [36mthis[39m[33m.[39mupdateLog([32m\"Willy Brandt canceled by Tear Down this Wall\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m        [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m      }[0m\n[0m [90m 8 | [39m[0m\n[0m [90m 9 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mvp [33m-=[39m [35m1[39m[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error('Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/wwby.js: \'return\' outside of function (19:8)\n\n[0m [90m 17 | [39m          [36mthis[39m[33m.[39mendGame([32m"ussr"[39m[33m,[39m [32m"defcon"[39m)[33m;[39m[0m\n[0m [90m 18 | [39m        }[0m\n[0m[31m[1m>[22m[39m[90m 19 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 20 | [39m      }[0m\n[0m [90m 21 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m 22 | [39m    }[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)')},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/core/yuri.js: 'return' outside of function (9:6)\n\n[0m [90m  7 | [39m    [36mif[39m (card [33m==[39m [32m\"yuri\"[39m) {[0m\n[0m [90m  8 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39myuri [33m=[39m [35m1[39m[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m  9 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m    | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 10 | [39m    }[0m\n[0m [90m 11 | [39m[0m\n[0m [90m 12 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/end_of_history/breakthroughatlopnor.js: 'return' outside of function (36:31)\n\n[0m [90m 34 | [39m      [36mfor[39m ([36mvar[39m i [36min[39m [36mthis[39m[33m.[39mcountries) { [36mif[39m ([36mthis[39m[33m.[39mcountries[i][33m.[39mus [33m>[39m [35m0[39m) { ops_removable [33m+=[39m [36mthis[39m[33m.[39mcountries[i][33m.[39mus[33m;[39m } }[0m\n[0m [90m 35 | [39m      [36mif[39m (ops_to_purge [33m>[39m ops_removable) { ops_to_purge [33m=[39m ops_removable[33m;[39m }[0m\n[0m[31m[1m>[22m[39m[90m 36 | [39m      [36mif[39m (ops_to_purge [33m<=[39m [35m0[39m) { [36mreturn[39m [35m1[39m[33m;[39m }[0m\n[0m [90m    | [39m                               [31m[1m^[22m[39m[0m\n[0m [90m 37 | [39m[0m\n[0m [90m 38 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) { [36mreturn[39m [35m0[39m[33m;[39m }[0m\n[0m [90m 39 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/end_of_history/eurocommunism.js: 'return' outside of function (6:8)\n\n[0m [90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 5 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Eurocommunism: US is removing 4 USSR influence from Western Europe (max 2 per country)</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m[0m\n[0m [90m 8 | [39m      }[0m\n[0m [90m 9 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/end_of_history/greatsociety.js: 'return' outside of function (6:6)\n\n[0m [90m 4 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mgreatsociety [33m=[39m [35m1[39m[33m;[39m[0m\n[0m [90m 5 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m   | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m    }[0m\n[0m [90m 8 | [39m[0m\n[0m [90m 9 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/end_of_history/imftreaty.js: 'return' outside of function (17:8)\n\n[0m [90m 15 | [39m      [36mif[39m (my_go [33m==[39m [35m0[39m) {[0m\n[0m [90m 16 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Opponent is playing INF Treaty</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 17 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 18 | [39m      }[0m\n[0m [90m 19 | [39m[0m\n[0m [90m 20 | [39m      [36mthis[39m[33m.[39maddMove([32m\"resolve\\tinftreaty\"[39m)[33m;[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/end_of_history/manwhosavedtheworld.js: 'return' outside of function (4:6)\n\n[0m [90m 2 | [39m    [36mif[39m (card [33m==[39m [32m\"manwhosavedtheworld\"[39m) {[0m\n[0m [90m 3 | [39m      [36mthis[39m[33m.[39mgame[33m.[39mstate[33m.[39mevents[33m.[39mmanwhosavedtheworld [33m=[39m player[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 4 | [39m      [36mreturn[39m [35m1[39m[33m;[39m[0m\n[0m [90m   | [39m      [31m[1m^[22m[39m[0m\n[0m [90m 5 | [39m    }[0m\n[0m [90m 6 | [39m[0m\n[0m [90m 7 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/end_of_history/nationbuilding.js: 'return' outside of function (11:8)\n\n[0m [90m  9 | [39m      [36mif[39m (player [33m!=[39m me) {[0m\n[0m [90m 10 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Opponent is playing Nation Building</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 11 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 12 | [39m[0m\n[0m [90m 13 | [39m      } [36melse[39m {[0m\n[0m [90m 14 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/end_of_history/perestroika.js: 'return' outside of function (6:8)\n\n[0m [90m 4 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m2[39m) {[0m\n[0m [90m 5 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>USSR is playing Perestroika</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m   | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m      }[0m\n[0m [90m 8 | [39m      [36mif[39m ([36mthis[39m[33m.[39mgame[33m.[39mplayer [33m==[39m [35m1[39m) {[0m\n[0m [90m 9 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/cards/end_of_history/peronism.js: 'return' outside of function (14:8)\n\n[0m [90m 12 | [39m      [36mif[39m (player [33m!=[39m me) {[0m\n[0m [90m 13 | [39m        [36mthis[39m[33m.[39mupdateStatus([32m\"<div class='status-message' id='status-message'>Opponent deciding to add influence to or coup or realign Argentina</div>\"[39m)[33m;[39m[0m\n[0m[31m[1m>[22m[39m[90m 14 | [39m        [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m    | [39m        [31m[1m^[22m[39m[0m\n[0m [90m 15 | [39m[0m\n[0m [90m 16 | [39m      } [36melse[39m {[0m\n[0m [90m 17 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseBlock (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11883:10)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11407:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseIfStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11685:28)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11376:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/twilight-end.js: 'return' outside of function (6:4)\n\n[0m [90m 4 | [39m    [90m// return 0 so other cards do not trigger infinite loop[39m[0m\n[0m [90m 5 | [39m    [90m//[39m[0m\n[0m[31m[1m>[22m[39m[90m 6 | [39m    [36mreturn[39m [35m0[39m[33m;[39m[0m\n[0m [90m   | [39m    [31m[1m^[22m[39m[0m\n[0m [90m 7 | [39m  }[0m\n[0m [90m 8 | [39m[0m\n[0m [90m 9 | [39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.parseReturnStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11692:12)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11379:21)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)\n    at Parser.parseTopLevel (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11262:10)\n    at Parser.parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:12967:10)\n    at parse (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:13020:38)\n    at parser (/opt/saito-lite/node_modules/@babel/core/lib/parser/index.js:54:34)\n    at parser.next (<anonymous>)\n    at normalizeFile (/opt/saito-lite/node_modules/@babel/core/lib/transformation/normalize-file.js:99:38)\n    at normalizeFile.next (<anonymous>)\n    at run (/opt/saito-lite/node_modules/@babel/core/lib/transformation/index.js:31:50)")},function(e,t){throw new Error("Module build failed (from ./node_modules/babel-loader/lib/index.js):\nSyntaxError: /opt/saito-lite/bundler/default/mods/twilight/src/twilight-start.js: Unexpected token (9951:0)\n\n[0m [90m 9949 | [39m[0m\n[0m [90m 9950 | [39m[0m\n[0m[31m[1m>[22m[39m[90m 9951 | [39m[0m\n[0m [90m      | [39m[31m[1m^[22m[39m[0m\n    at Parser._raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:764:17)\n    at Parser.raiseWithData (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:757:17)\n    at Parser.raise (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:751:17)\n    at Parser.unexpected (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:8927:16)\n    at Parser.parseExprAtom (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:10227:20)\n    at Parser.parseExprSubscripts (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9789:23)\n    at Parser.parseUpdate (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9769:21)\n    at Parser.parseMaybeUnary (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9758:17)\n    at Parser.parseExprOps (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9628:23)\n    at Parser.parseMaybeConditional (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9602:23)\n    at Parser.parseMaybeAssign (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9565:21)\n    at Parser.parseExpression (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:9517:23)\n    at Parser.parseStatementContent (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11462:23)\n    at Parser.parseStatement (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11331:17)\n    at Parser.parseBlockOrModuleBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11913:25)\n    at Parser.parseBlockBody (/opt/saito-lite/node_modules/@babel/parser/lib/index.js:11899:10)")},function(e,t,a){function r(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=s(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function u(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,a){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=m(e);if(t){var n=m(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return f(this,a)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=a(47),b=(a(93),0),y=0,v=null,_=null,w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(w,e);var t,a,s,o,f,g=h(w);function w(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,w),(t=g.call(this,e)).app=e,t.name="Twilight",t.slug="twilight",t.description="Twilight Struggle is a card-driven strategy game for two players, with its theme taken from the Cold War.\n      One player plays the United States (US), and the other plays the Soviet Union (USSR).",t.publisher_message="Twilight Struggle is owned by GMT Games. This module is made available under an open source license provided by GMT Games for usage in open source game engines. Publisher requirements is that at least one player per game has purchased a copy of the game.",t.categories="Games Arcade Entertainment",t.boardgameWidth=5100,t.moves=[],t.cards=[],t.is_testing=0,t.confirm_moves=1,t.log_length=150,t.interface=1,t.gameboardZoom=.9,t.gameboardMobileZoom=.67,t.minPlayers=2,t.maxPlayers=2,t.type="Strategy Boardgame",t.categories="Bordgame Game",t.hud.mode=0,t}return t=w,(a=[{key:"respondTo",value:function(e){if(null!=d(m(w.prototype),"respondTo",this).call(this,e))return d(m(w.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/twilight/img/arcade/arcade-banner-background.png",title:"Twilight Struggle"};return t}return null}},{key:"handleCardsMenu",value:function(){var e=this;e.overlay.showOverlay(e.app,e,'\n      <div class="game-overlay-menu" id="game-overlay-menu">\n        <div>SELECT DECK:</div>\n       <ul>\n          <li class="menu-item" id="hand">Your Hand</li>\n          <li class="menu-item" id="discards">Discarded Cards</li>\n          <li class="menu-item" id="removed">Removed Events</li>\n          <li class="menu-item" id="unplayed">Unplayed Cards</li>\n        </ul>\n      </div>\n    '),$(".menu-item").on("click",(function(){var t,a=$(this).attr("id"),r=e.game.deck[0],n="";switch(a){case"hand":t=r.hand;break;case"discards":t=Object.keys(r.discards);break;case"removed":t=Object.keys(r.removed);break;case"unplayed":t=Object.keys(e.returnUnplayedCards())}n+='<div class="cardlist-container">';for(var i=0;i<t.length;i++)n+='<div class="cardlist-card">',null!=t[i]&&(n+=e.returnCardImage(t[i],1)),n+="</div>";n+="</div>",0==t.length&&(n='\n          <div style="text-align:center; margin: auto;">\n            There are no cards in '.concat(a,"\n          </div>\n        ")),e.overlay.showOverlay(e.app,e,n)}))}},{key:"handleExportMenu",value:function(){var e=this;e.overlay.showOverlay(e.app,e,'\n      <div class="game-overlay-menu" id="game-overlay-menu">\n        <div>Export Options:</div>\n       <ul>\n          <li class="menu-item" id="private">Private <div style="font-size:0.8em;clear:both">Create a backup file that saves the game along with the (encrypted) hands of each player. Only the current players will be able to restore the game.</div></li>\n        </ul>\n      </div>\n    '),$(".menu-item").on("click",(function(){$(this).attr("id"),e.overlay.showOverlay(e.app,e,"All players are backing up their game...")}))}},{key:"handleStatsMenu",value:function(){var e=0,t=0;for(var a in this.countries){var r=a;1==this.countries[r].bg&&(1==this.isControlled("us",a)&&e++,1==this.isControlled("ussr",a)&&t++)}var n='\n      <div class="game-overlay-menu statistics-overlay" id="game-overlay-menu">\n        <div>Headline Statistics</div>\n\t<table class="headline-statistics-table" style="max-width:80vw; width:50%;">\n\t  <atr>\n\t    <th></th>\n\t    <th>US</th>\n\t    <th>USSR</th>\n\t  </tr>\n\t  <tr>\n\t    <td><b>Played OPS</b></td>\n\t    <td>'.concat(this.game.state.stats.us_ops,"</td>\n\t    <td>").concat(this.game.state.stats.ussr_ops,"</td>\n\t  </tr>\n\t  <tr>\n\t    <td><b>Spaced OPS</b></td>\n\t    <td>").concat(this.game.state.stats.us_ops_spaced,"</td>\n\t    <td>").concat(this.game.state.stats.ussr_ops_spaced,"</td>\n\t  </tr>\n\t  <tr>\n\t    <td><b>Scoring Cards</b></td>\n\t    <td>").concat(this.game.state.stats.us_scorings,"</td>\n\t    <td>").concat(this.game.state.stats.ussr_scorings,"</td>\n    </tr>\n    <tr>\n      <td><b>Battlegrounds Controlled</b></td>\n      <td>").concat(e,"</td>\n      <td>").concat(t,"</td>\n    </tr>\n\t  <tr>\n\t    <td><b>Coups</b></td>\n\t    <td>");this.game.state.stats.us_coups.length>0&&(n+=JSON.stringify(this.game.state.stats.us_coups)),n+="</td><td>",this.game.state.stats.ussr_coups.length>0&&(n+=JSON.stringify(this.game.state.stats.ussr_coups)),n+='</td>\n\t  </tr>\n        </table>\n\t<div style="margin-top:20px;margin-bottom:10px;clear:both">Round-by-Round Statistics</div>\n\t<table class="statistics-round-table">\n\t  <tr>\n\t';for(var i=0;i<11;i++)n+=0==i?"<th></th>":"<th>R".concat(i,"</th>");n+="\n\t  </tr>\n       ";for(var s=0;s<10;s++){n+="<tr>",0==s&&(n+='<td style="text-align:left">OPS</td>'),1==s&&(n+='<td style="text-align:left">VP</td>'),2==s&&(n+='<td style="text-align:left">US Scoring</td>'),3==s&&(n+='<td style="text-align:left">USSR Scoring</td>');for(var o=0;o<10;o++)0==s&&(o>this.game.state.stats.round.length?n+="<td> - </td>":o==this.game.state.stats.round.length?n+="<td>".concat(this.game.state.stats.us_ops-this.game.state.stats.ussr_ops,"</th>"):n+="<td>".concat(this.game.state.stats.round[o].us_ops-this.game.state.stats.round[o].ussr_ops,"</th>")),1==s&&(o>this.game.state.stats.round.length?n+="<td> - </td>":o==this.game.state.stats.round.length?n+="<td>".concat(this.game.state.vp,"</th>"):n+="<td>".concat(this.game.state.stats.round[o].vp,"</th>")),2==s&&(o>this.game.state.stats.round.length?n+="<td> - </td>":o==this.game.state.stats.round.length?n+="<td>".concat(this.game.state.stats.us_scorings,"</th>"):n+="<td>".concat(this.game.state.stats.round[o].us_scorings,"</th>")),3==s&&(o>this.game.state.stats.round.length?n+="<td> - </td>":o==this.game.state.stats.round.length?n+="<td>".concat(this.game.state.stats.ussr_scorings,"</th>"):n+="<td>".concat(this.game.state.stats.round[o].ussr_scorings,"</th>"));n+="</tr>"}n+="\n        </table>\n    ",n+="\n      </div>\n    ",this.overlay.showOverlay(this.app,this,n)}},{key:"handleDisplayMenu",value:function(){var e=this;e.overlay.showOverlay(e.app,e,'\n      <div class="game-overlay-menu" id="game-overlay-menu">\n        <div>DISPLAY MODE:</div>\n       <ul>\n          <li class="menu-item" id="english">English</li>\n          <li class="menu-item" id="chinese">简体中文</li>\n          <li class="menu-item" id="enable_observer_mode">Observer Mode</li>\n        </ul>\n      </div>'),$(".menu-item").on("click",(function(){var t=$(this).attr("id");if("enable_observer_mode"===t){e.game.saveGameState=1;var a={game_id:e.game.id,player:e.app.wallet.returnPublicKey(),module:e.game.module},r=e.app.crypto.stringToBase64(JSON.stringify(a)),n=window.location.href.split("/"),i='<div class="status-message" id="status-message">Observer Mode will be enabled on your next move (reload to cancel). Make your move and then share this link:';i+='<div style="padding:15px;font-size:0.9em;overflow-wrap:anywhere">'+n[0]+"//"+n[2]+"/arcade/?i=watch&msg="+r+"</div>",i+="</div>",e.overlay.showOverlay(e.app,e,i)}return"text"===t&&(e.displayModal("Card Menu options changed to text-mode. Please reload."),e.interface=0,e.saveGamePreference("interface",0),setTimeout((function(){window.location.reload()}),1e3)),"graphics"===t&&(e.displayModal("Card Menu options changed to graphical mode. Please reload."),e.interface=1,e.saveGamePreference("interface",1),setTimeout((function(){window.location.reload()}),1e3)),"english"===t&&(e.displayModal("Language Settings","Card settings changed to English"),e.lang="en",e.saveGamePreference("lang","en"),setTimeout((function(){window.location.reload()}),1e3)),"chinese"===t&&(e.displayModal("语言设定","卡牌语言改成简体中文"),e.lang="zh",e.saveGamePreference("lang","zh"),setTimeout((function(){window.location.reload()}),1e3)),"enable_hud_vertical"==t?($(".hud").addClass("hud-vertical").removeClass("hud-long").removeClass("hud-square").removeAttr("style"),e.hud.mode=2,e.hud.initial_render=0,e.hud.render(e.app,e),e.hud.attachEvents(e.app,e),void e.hud.attachCardEvents(e.app,e)):"enable_hud_square"==t?($(".hud").addClass("hud-square").removeClass("hud-long").removeClass("hud-vertical").removeAttr("style"),e.hud.mode=1,e.hud.initial_render=0,e.hud.render(e.app,e),e.hud.attachEvents(e.app,e),e.hud.attachCardEvents(e.app,e),void e.overlay.hideOverlay()):"enable_hud_horizontal"==t?($(".hud").addClass("hud-long").removeClass("hud-vertical").removeClass("hud-square").removeAttr("style"),e.hud.mode=0,e.hud.initial_render=0,e.hud.render(e.app,e),e.hud.attachEvents(e.app,e),e.hud.attachCardEvents(e.app,e),void e.overlay.hideOverlay()):void 0}))}},{key:"handlePlayerMenu",value:(o=regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{t=this.game.opponents[0],this.app.crypto.isPublicKey(t)&&(t=t.substring(0,16)),a='\n        <div class="status-message" id="status-message">\n          <div>Opponent: '.concat(t,"</div>\n        </div>\n      "),this.overlay.showOverlay(this.app,this,a)}catch(e){console.log(e)}case 1:case"end":return e.stop()}}),e,this)})),f=function(){var e=this,t=arguments;return new Promise((function(a,r){var n=o.apply(e,t);function i(e){l(n,a,r,i,s,"next",e)}function s(e){l(n,a,r,i,s,"throw",e)}i(void 0)}))},function(){return f.apply(this,arguments)})},{key:"handleLogMenuItem",value:function(){$(".status-overlay").html('<div style="padding: 0.5em">'.concat($(".log").html(),"</div>")),this.addLogCardEvents()}},{key:"initializeHTML",value:function(e){var t=this;if(0!=this.browser_active){d(m(w.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(a){a.respondTo("chat-manager").render(e,t),a.respondTo("chat-manager").attachEvents(e,t)}));try{1==this.app.options.gameprefs.twilight_expert_mode?this.confirm_moves=0:this.confirm_moves=1}catch(e){}this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"Log",id:"game-log",class:"game-log",callback:function(e,t){t.menu.hideSubMenus(),t.log.toggleLog()}});var a="Newbie Mode";1==this.confirm_moves&&(a="Expert Mode"),this.menu.addSubMenuOption("game-game",{text:a,id:"game-confirm",class:"game-confirm",callback:function(e,t){t.menu.hideSubMenus(),0==t.confirm_moves?(t.confirm_moves=1,t.saveGamePreference("twilight_expert_mode",0),window.location.reload()):(t.confirm_moves=0,t.saveGamePreference("twilight_expert_mode",1),window.location.reload())}}),this.menu.addSubMenuOption("game-game",{text:"Stats",id:"game-stats",class:"game-stats",callback:function(e,t){t.menu.hideSubMenus(),t.handleStatsMenu()}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}}),this.menu.addMenuOption({text:"Cards",id:"game-cards",class:"game-cards",callback:function(e,t){t.menu.hideSubMenus(),t.handleCardsMenu()}}),this.menu.addMenuOption({text:"Display",id:"game-display",class:"game-display",callback:function(e,t){t.menu.hideSubMenus(),t.handleDisplayMenu()}});for(var r=0,n=0,i=0;i<this.app.modules.mods.length;i++)if("chat"===this.app.modules.mods[i].slug)for(var s=0;s<this.game.players.length;s++)this.game.players[s]!=this.app.wallet.returnPublicKey()&&function(){0==r&&(t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),r=1),0==n&&(t.menu.addSubMenuOption("game-chat",{text:"Community",id:"game-chat-community",class:"game-chat-community",callback:function(e,t){t.menu.hideSubMenus(),c.sendEvent("chat-render-request",{}),c.mute_community_chat=0,c.openChatBox()}}),n=1);var e=[t.game.players[s],t.app.wallet.returnPublicKey()].sort(),a=t.app.crypto.hash(e.join("_")),o="Player "+(s+1),c=t.app.modules.mods[i];t.menu.addSubMenuOption("game-chat",{text:o,id:"game-chat-"+(s+1),class:"game-chat-"+(s+1),callback:function(t,r){r.menu.hideSubMenus(),c.createChatGroup(e,o),c.openChatBox(a),c.sendEvent("chat-render-request",{}),c.saveChat()}})}();this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}}),this.menu.render(e,this),this.menu.attachEvents(e,this),this.log.render(e,this),this.log.attachEvents(e,this),this.cardbox.render(e,this),this.cardbox.attachEvents(e,this),this.hud.addCardType("logcard","",null),this.hud.addCardType("showcard","select",this.cardbox_callback),this.hud.addCardType("card","select",this.cardbox_callback),e.browser.isMobileBrowser(navigator.userAgent)?this.hud.card_width=110:this.cardbox.skip_card_prompt=1;try{if(e.browser.isMobileBrowser(navigator.userAgent))this.hammer.render(this.app,this),this.hammer.attachEvents(this.app,this,".gameboard");else{var o=this;this.sizer.render(this.app,this),this.sizer.attachEvents(this.app,this,".gameboard"),$("#gameboard").draggable({stop:function(e,t){o.saveGamePreference(o.returnSlug()+"-board-offset",t.offset)}})}}catch(e){}this.hud.render(e,this),this.hud.attachEvents(e,this)}}},{key:"initializeGame",value:function(e){if(null!=this.app.options&&null!=this.app.options.gameprefs&&(0==this.app.options.gameprefs.interface&&(this.interface=0),1==this.app.options.gameprefs.interface&&(this.interface=1),1==this.app.options.gameprefs.twilight_expert_mode?this.confirm_moves=0:this.confirm_moves=1),""!=this.game.status&&this.updateStatus(this.game.status),this.game.log&&this.game.log.length>0)for(var t=this.game.log.length-1;t>=0;t--)this.updateLog(this.game.log[t]);if(this.game.vp_needed=20,!this.game.state){if(this.game.countries=this.returnCountries(),this.game.state=this.returnState(),console.log("\n\n\n\n"),console.log("---------------------------"),console.log("---------------------------"),console.log("------ INITIALIZE GAME ----"),console.log("---------------------------"),console.log("---------------------------"),console.log("---------------------------"),console.log("DECK: "+this.game.options.deck),console.log("\n\n\n\n"),this.updateStatus("<div class='status-message' id='status-message'>Generating the Game</div>"),this.game.queue.push("round"),null!=this.game.options.usbonus&&this.game.options.usbonus>0&&this.game.queue.push("placement_bonus\t2\t"+this.game.options.usbonus),this.game.queue.push("placement\t2"),this.game.queue.push("placement\t1"),this.game.queue.push("READY"),this.game.queue.push("DEAL\t1\t2\t8"),this.game.queue.push("DEAL\t1\t1\t8"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1"),1==this.is_testing){this.game.options={},this.game.options.culturaldiplomacy=1,this.game.options.gouzenkoaffair=1,this.game.options.berlinagreement=1,this.game.options.handshake=1,this.game.options.rustinredsquare=1,this.game.options.poliovaccine=1,this.game.options.deck="endofhistory";var a=this.returnEarlyWarCards(),r=this.returnMidWarCards(),n=this.returnLateWarCards(),i=Object.assign({},a,r),s=Object.assign({},i,n);this.game.options.deck="coldwarcrazies";var o=this.returnEarlyWarCards(),c=this.returnMidWarCards(),l=this.returnLateWarCards(),u=Object.assign({},o,s),d=Object.assign({},c,u),p=Object.assign({},l,d);this.game.options.deck="absurdum";var h=this.returnEarlyWarCards(),f=this.returnMidWarCards(),m=this.returnLateWarCards(),g=Object.assign({},h,p),b=Object.assign({},f,g);Object.assign({},m,b),this.game.queue.push("DECK\t1\t"+JSON.stringify(p))}else this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnEarlyWarCards()));this.game.queue.push("init"),""===this.game.dice&&this.initializeDice()}this.countries=this.game.countries;try{$(".country").css("width",this.scale(202)+"px"),$(".us").css("width",this.scale(100)+"px"),$(".ussr").css("width",this.scale(100)+"px"),$(".us").css("height",this.scale(100)+"px"),$(".ussr").css("height",this.scale(100)+"px"),$(".formosan_resolution").css("width",this.scale(202)+"px"),$(".formosan_resolution").css("height",this.scale(132)+"px"),$(".formosan_resolution").css("top",this.scale(this.countries.taiwan.top-32)+"px"),$(".formosan_resolution").css("left",this.scale(this.countries.taiwan.left)+"px"),this.updateDefcon(),this.updateActionRound(),this.updateSpaceRace(),this.updateVictoryPoints(),this.updateMilitaryOperations(),this.updateRound()}catch(e){}for(var y in this.countries){var v="#"+y,_=v+" > .us > img",w=v+" > .ussr > img";try{$(v).css("top",this.scale(this.countries[y].top)+"px"),$(v).css("left",this.scale(this.countries[y].left)+"px"),$(_).css("height",this.scale(100)+"px"),$(w).css("height",this.scale(100)+"px"),this.countries[y].us>0&&this.showInfluence(y,"us"),this.countries[y].ussr>0&&this.showInfluence(y,"ussr")}catch(e){}}try{var x=this;$(".scoring_card").off(),$(".scoring_card").mouseover((function(){var e=this.id,t=x.calculateScoring(e,1),a=t.us.vp-t.ussr.vp,r="white";a>0&&(r="blue"),a<0&&(r="red"),(a>x.game.vp_needed||a<-1*x.game.vp_needed)&&(a="WIN"),$(".display_card#".concat(e)).show(),$(".display_vp#".concat(e)).html('VP: <div style="color:'.concat(r,'">&nbsp').concat(a,"</div>"))})).mouseout((function(){var e=this.id;$(".display_card#".concat(e)).hide()}))}catch(e){}}},{key:"handleGameLoop",value:function(){var e=this,t=this,a="ussr";2===this.game.player&&(a="us"),0===this.game.player&&(a="observer");try{this.game.deck[0]&&this.game.deck[0].cards&&(this.game.deck[0].cards.china=this.returnChinaCard())}catch(e){}if(1==this.game.over){var r="ussr";return 2==this.game.winner&&(r="us"),$("#sage_game_id").attr("class")===this.game.id&&this.updateStatus("<div class='status-message' id='status-message'><span>Game Over:</span> "+r.toUpperCase()+"</span> <span>wins</span></div>"),0}if(this.game.queue.length>0){var n=this.game.queue.length-1,i=this.game.queue[n].split("\t"),s=1;if("init"==i[0]){var o=0;if(0!==this.game.player||this.game.players.includes(this.app.wallet.returnPublicKey())||(o=1,this.rollDice(6)),0===o&&(this.game.players[0],null!=this.game.options.player1)){if("random"==this.game.options.player1){var l=this.rollDice(6);this.game.options.player1=l<=3?"us":"ussr"}0==o&&(this.game.players[1]===this.app.wallet.returnPublicKey()?"us"==this.game.options.player1?this.game.player=2:this.game.player=1:"us"==this.game.options.player1?this.game.player=1:this.game.player=2)}this.game.queue.splice(n,1)}if("update_observers"===i[0]){var u=i[1];return this.game.player==u&&(this.addMove("observer_cards_update\t"+this.game.player+"\t"+JSON.stringify(this.game.deck[0].hand)),this.endTurn()),this.game.queue.splice(n,1),0}if("observer_cards_update"===i[0]){var d=i[1],p=JSON.stringify(i[2]);if(d==this.game.observer_mode_player&&0==this.game.player){this.game.deck[0].hand=[];for(var h=0;h<p.length;h++)this.game.deck[0].hand.push(p[h])}return this.game.queue.splice(n,1),1}if("revert"===i[0]&&(this.revertTurn(),this.game.queue.splice(n,1)),"turn"===i[0]&&(this.game.state.turn_in_round++,this.game.state.events.china_card_eligible=0,this.game.queue.splice(n,1),this.updateActionRound()),"discard"===i[0]){if("china"===i[2])"ussr"==i[1]&&(this.updateLog("China Card passes to US face down"),this.game.state.events.china_card=2,this.game.state.events.china_card_facedown=1,this.displayChinaCard()),"us"==i[1]&&(this.updateLog("China Card passes to USSR face down"),this.game.state.events.china_card=1,this.game.state.events.china_card_facedown=1,this.displayChinaCard());else for(var f in this.removeCardFromHand(i[2]),"missileenvy"==i[2]&&this.game.state.events.missile_envy!=this.game.player&&(this.game.state.events.missile_envy=0,this.game.state.events.missileenvy=0),this.game.deck[0].cards)i[2]==f&&null!=this.game.deck[0].cards[i[2]]&&(this.updateLog("<span>"+i[1].toUpperCase()+' discards</span> <span class="logcard" id="'+i[2]+'">'+this.game.deck[0].cards[i[2]].name+"</span>"),this.game.deck[0].discards[f]=this.game.deck[0].cards[f]);this.game.queue.splice(n,1)}if("wargames"==i[0]){var m=i[1];0==parseInt(i[2])||("us"==m?(this.game.state.vp-=this.game.state.wargames_concession,this.updateVictoryPoints(),this.game.state.vp>0&&this.endGame("us","Wargames"),this.game.state.vp<0&&this.endGame("ussr","Wargames"),0==this.game.state.vp&&this.endGame("tie game","Wargames")):(this.game.state.vp+=this.game.state.wargames_concession,this.updateVictoryPoints(),this.game.state.vp>0&&this.endGame("us","Wargames"),this.game.state.vp<0&&this.endGame("ussr","Wargames"),0==this.game.state.vp&&this.endGame("tie game","Wargames"))),this.game.queue.splice(n,1)}if("card"===i[0]){var g=i[1],b=i[2];"us"===g&&(g=2),"ussr"===g&&(g=1),this.game.queue.splice(n,1),g==this.game.player&&this.playerTurn(b),s=0}if("grainsales"===i[0]){if("ussr"==i[1]){if(this.game.queue.splice(n,1),2==this.game.player){var y='<div class=\'status-message\' id=\'status-message\'><span>Grain Sales pulls</span> <span class="showcard" style="border-bottom: 1px dashed" id="'+i[2]+'">'+this.game.deck[0].cards[i[2]].name+"</span> <span>from USSR. Do you want to play this card?</span>";"unintervention"==i[2]&&1==this.game.state.headline||(y+='<ul><li class="card noncard" id="play">play card</li>'),y+='<li class="card noncard" id="nope">return card</li>',y+="</ul></div>",this.updateStatus(y);var _=this;_.addShowCardEvents((function(e){"play"==e&&(_.addMove("resolve\tgrainsales"),_.playerTurn(i[2])),"nope"==e&&(_.addMove("resolve\tgrainsales"),_.addMove("ops\tus\tgrainsales\t2"),_.addMove("grainsales\tus\t"+i[2]),_.endTurn())}))}s=0}"us"==i[1]&&(1==this.game.player?this.game.deck[0].hand.push(i[2]):this.game.state.opponent_cards_in_hand++,this.game.queue.splice(n,1),s=1)}if("stage"==i[0]&&(this.game.queue.splice(n,1),s=1),"checoup"==i[0]){var w=i[2],x=this.countries[i[2]].us,k=this,S=i[3];k.playCoup("ussr",i[2],S,(function(){if(k.countries[i[2]].us<x){var e=0;for(var t in k.countries){var a=t;0==k.countries[a].bg&&("africa"==k.countries[a].region||"camerica"==k.countries[a].region||"samerica"==k.countries[a].region)&&k.countries[a].us>0&&a!==w&&e++}if(0==e)k.updateLog("No valid targets for Che"),k.game.queue.splice(n,1),s=1;else{if(1==k.game.player)for(var t in k.addMove("resolve\tchecoup"),k.updateStatus("<div class='status-message' id='status-message'>Pick second target for coup:</div>"),k.playerFinishedPlacingInfluence(),k.updateStatus("<div class='status-message' id='status-message'>Che takes effect. Pick first target for coup:<ul><li class=\"card\" id=\"skipche\">or skip coup</li></ul></div>"),k.addShowCardEvents((function(e){"skipche"==e&&(k.updateStatus("<div class='status-message' id='status-message'>Skipping Che coups...</div>"),k.addMove("resolve\tchecoup"),k.endTurn())})),k.countries){var r=t,o="#"+t;0==k.countries[r].bg&&("africa"==k.countries[r].region||"camerica"==k.countries[r].region||"samerica"==k.countries[r].region)&&r!==w&&k.countries[r].us>0?($(o).off(),$(o).on("click",(function(){var e=$(this).attr("id");k.addMove("coup\tussr\t"+e+"\t"+S),k.endTurn()}))):($(o).off(),$(o).on("click",(function(){k.displayModal("Invalid Target")})))}k.game.queue.splice(n,1),s=0}}else k.game.queue.splice(n,1),s=1}))}if("missileenvy"===i[0]){var P=i[1],E=i[2],C="us",A="ussr";2==P&&(C="ussr",A="us"),this.game.state.events.missile_envy=P;var M=0;"us"==this.game.deck[0].cards[E].player&&2==P&&(M=1),"ussr"==this.game.deck[0].cards[E].player&&1==P&&(M=1),this.game.queue.splice(n,1),1==M&&(this.game.queue.push("discard\t"+A+"\t"+E),this.game.queue.push("ops\t"+C+"\t"+E+"\t"+this.game.deck[0].cards[E].ops),this.game.queue.push("notify\t"+A.toUpperCase()+" offers "+this.game.deck[0].cards[E].name+" for OPS")),0==M&&(this.game.queue.push("discard\t"+A+"\t"+E),this.game.queue.push("event\t"+C+"\t"+E),this.game.queue.push("notify\t"+A.toUpperCase()+" offers "+this.game.deck[0].cards[E].name+" for EVENT")),this.game.player==P&&this.removeCardFromHand(E),s=1}if("quagmire"===i[0]){var T=this.rollDice(6);this.updateLog(i[1].toUpperCase()+" </span>rolls a<span> "+T),T<5?("ussr"==i[1]&&(this.game.state.events.beartrap=0,this.updateLog("Bear Trap ends")),"us"==i[1]&&(this.game.state.events.quagmire=0,this.updateLog("Quagmire ends"))):("ussr"==i[1]&&this.updateLog("Bear Trap continues..."),"us"==i[1]&&this.updateLog("Quagmire continues...")),this.game.queue.splice(n,1),s=1}if("tehran"==i[0]){var j=this,O=i[1],D=i[2];if(this.game.queue.splice(n,1),"ussr"==O){if(1==this.game.player){for(var I=0;I<D;I++)this.game.queue.splice(this.game.queue.length-1,1);s=0}else{for(var R=[],B=[],q=0;q<D;q++)R[q]=this.game.deck[0].crypt[q],R[q]=this.app.crypto.decodeXOR(R[q],this.game.deck[0].keys[q]);for(var L=0;L<D;L++)R[L]=this.app.crypto.decodeXOR(R[L],this.game.queue[this.game.queue.length-D+L]),R[L]=this.app.crypto.hexToString(R[L]);for(var N=0;N<D;N++)this.game.queue.splice(this.game.queue.length-1,1);for(var F="<div class='status-message' id='status-message'>Select cards to discard:<ul>",U=0;U<R.length;U++)F+='<li class="card card_'+this.game.deck[0].crypt[U]+'" id="'+this.game.deck[0].crypt[U]+"_"+R[U]+'">'+this.game.deck[0].cards[R[U]].name+"</li>";F+='</ul> When you are done discarding <span class="card dashed showcard nocard" id="finished">click here</span>.</div>',j.updateStatus(F);var z=0;j.addShowCardEvents((function(e){if("finished"==e){for(var t=0;t<B.length;t++)j.addMove(B[t]);j.addMove("tehran\tus\t"+z),j.endTurn()}else{var a=e.split("_"),r=".card_"+a[0];$(r).hide(),B.push(a[0]),z++,j.addMove("discard\tus\t"+a[1]),j.addMove('notify\tUS discards <span class="logcard" id="'+a[1]+'">'+j.game.deck[0].cards[a[1]].name+"</span>")}}))}s=0}else{for(var H=[],G=0;G<D;G++)H[G]=this.game.queue[this.game.queue.length-1],this.game.queue.splice(this.game.queue.length-1,1);for(var K=0;K<5;K++)H.includes(this.game.deck[0].crypt[K])&&(this.game.deck[0].crypt[K]="",this.game.deck[0].keys[K]="");for(var W=[],V=[],Y=0;Y<this.game.deck[0].crypt.length;Y++)""!=this.game.deck[0].crypt[Y]&&(W.push(this.game.deck[0].crypt[Y]),V.push(this.game.deck[0].keys[Y]));this.game.deck[0].crypt=W,this.game.deck[0].keys=V}}if("limit"==i[0]&&("china"==i[1]&&(this.game.state.events.china_card_in_play=1),"coups"==i[1]&&(this.game.state.limit_coups=1),"spacerace"==i[1]&&(this.game.state.limit_spacerace=1),"realignments"==i[1]&&(this.game.state.limit_realignments=1),"placement"==i[1]&&(this.game.state.limit_placement=1),"milops"==i[1]&&(this.game.state.limit_milops=1),"ignoredefcon"==i[1]&&(this.game.state.limit_ignoredefcon=1),"region"==i[1]&&(this.game.state.limit_region+=i[2]),this.game.queue.splice(n,1)),"flush"==i[0]&&("discards"==i[1]&&(this.game.deck[0].discards={}),this.game.queue.splice(n,1)),"latinamericandebtcrisis"==i[0]){var J=function(){var t=e;if(2==e.game.player)return e.game.queue.splice(n,1),{v:0};if(1==e.game.player){var a=function(){e.game.queue.splice(n,1);var a=0;for(f in e.countries)"samerica"==e.countries[f].region&&e.countries[f].ussr>0&&a++;if(a>2&&(a=2),0==a)return e.addMove("notify\tUSSR has no countries with influence to double"),e.endTurn(),{v:{v:0}};for(f in e.updateStatus("<div class='status-message' id='status-message'><span>Select</span> "+a+" <span>countries in South America to double USSR influence</span></div>"),e.countries){var r=f,i="#"+f;"samerica"==e.countries[f].region&&(e.countries[f].ussr>0&&(t.countries[r].place=1),$(i).off(),$(i).on("click",(function(){var e=$(this).attr("id");if(1==t.countries[e].place){var r=t.countries[e].ussr;t.placeInfluence(e,r,"ussr",(function(){t.addMove("place\tussr\tussr\t"+e+"\t"+r),t.countries[e].place=0,0==--a&&(t.playerFinishedPlacingInfluence(),t.endTurn())}))}else t.displayModal("InvalidTarget")})))}}();if("object"===c(a))return a.v}return{v:0}}();if("object"===c(J))return J.v}if("northsea"==i[0]){if(1==this.game.player&&this.updateStatus("US determining whether to take extra turn"),2==this.game.player){this.updateStatus('<span>Do you wish to take an extra turn:<span><ul><li class="card" id="play">play turn</li><li class="card" id="nope">no turn</li></ul>');var X=this;X.addShowCardEvents((function(e){"play"==e&&(X.addMove("resolve\tnorthsea"),X.addMove("play\t2"),X.endTurn()),"nope"==e&&(X.addMove("resolve\tnorthsea"),X.addMove("play\t2"),X.endTurn())}))}s=0}if("space"==i[0]&&(this.playerSpaceCard(i[2],i[1]),"china"!=i[2]&&(this.game.deck[0].discards[i[2]]=this.game.deck[0].cards[i[2]]),this.game.queue.splice(n,1)),"unlimit"==i[0]&&("china"==i[1]&&(this.game.state.events_china_card_in_play=0),"cmc"==i[1]&&(this.game.state.events.cubanmissilecrisis=0),"coups"==i[1]&&(this.game.state.limit_coups=0),"spacerace"==i[1]&&(this.game.state.limit_spacerace=0),"realignments"==i[1]&&(this.game.state.limit_realignments=0),"placement"==i[1]&&(this.game.state.limit_placement=0),"milops"==i[1]&&(this.game.state.limit_milops=0),"ignoredefcon"==i[1]&&(this.game.state.limit_ignoredefcon=0),"region"==i[1]&&(this.game.state.limit_region=""),this.game.queue.splice(n,1)),"chernobyl"==i[0]&&(this.game.state.events.chernobyl=i[1],this.game.queue.splice(n,1)),"dice"==i[0]&&("burn"==i[1]&&(1==this.game.player&&"ussr"==i[2]&&(roll=this.rollDice(6)),2==this.game.player&&"us"==i[2]&&(roll=this.rollDice(6))),this.game.queue.splice(n,1)),"aldrichreveal"==i[0]){if(2==this.game.player){this.game.deck[0].hand.length;for(var Q="",Z=0;Z<this.game.deck[0].hand.length;Z++)Z>0&&(Q+=", "),Q+=this.game.deck[0].hand[Z];this.addMove("notify\tUS hand contains: "+Q),this.endTurn()}return this.game.queue.splice(n,1),0}if("aldrich"==i[0]){if("us"==i[1]){var ee=i[2],te="<div class='status-message' id='status-message'><span>Aldrich Ames triggered. USSR discard card from US hand:<span><ul>";this.game.queue.splice(n,1);for(var ae=0;ae<ee;ae++){var re=this.game.queue[this.game.queue.length-1];te+='<li class="card showcard" id="'+re+'">'+this.game.deck[0].cards[re].name+"</li>",this.game.queue.splice(this.game.queue.length-1,1)}if(te+="</ul></div>",2==this.game.player&&this.updateStatus("<div class='status-message' id='status-message'>USSR is playing Aldrich Ames</div>"),1==this.game.player){this.updateStatus(te);var ne=this;ne.addShowCardEvents((function(e){ne.addMove("aldrich\tussr\t"+e),ne.endTurn()}))}s=0}"ussr"==i[1]&&(2==this.game.player&&this.removeCardFromHand(i[2]),this.game.queue.splice(n,1),this.updateLog('<span>USSR discards </span><span class="logcard" id="'+i[2]+'">'+this.game.deck[0].cards[i[2]].name+"</span>"),s=1)}if("cambridge"===i[0]){if(1==this.game.player){for(var ie='<div class="status-message" id="status-message">'+a.toUpperCase()+" place 1 OP in",se=1;se<i.length;se++)ie+=" ",ie+=i[se];ie+="</div>",t.updateStatus(ie);for(var oe=1;oe<i.length;oe++)for(var ce in this.countries)if("centralamerica"==i[oe]&&(i[oe]="camerica"),"southamerica"==i[oe]&&(i[oe]="samerica"),this.countries[ce].region.indexOf(i[oe])>-1){var le="#"+ce;$(le).off(),$(le).on("click",(function(){var e=$(this).attr("id");t.playerFinishedPlacingInfluence(),t.countries[e].ussr+=1,t.showInfluence(e,"ussr"),t.addMove("place\tussr\tussr\t"+e+"\t1"),t.endTurn()}))}}this.game.queue.splice(n,1),s=0}if("teardownthiswall"===i[0]){if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US playing Tear Down This Wall</div>"),0;t.updateStatus('<div class=\'status-message\' id=\'status-message\'><span>Tear Down this Wall is played -- US may make 3 OP free Coup Attempt or Realignments in Europe.</span><ul><li class="card" id="taketear"><span>make coup or realign</span></li><li class="card" id="skiptear"><span>skip coup</span></li></ul></div>'),t.addShowCardEvents((function(e){"skiptear"==e&&(t.updateStatus("<div class='status-message' id='status-message'><span>Skipping Tear Down this Wall...</span></div>"),t.addMove("resolve\tteardownthiswall"),t.endTurn()),"taketear"==e&&(t.addMove("resolve\tteardownthiswall"),t.addMove("unlimit\tignoredefcon"),t.addMove("unlimit\tregion"),t.addMove("unlimit\tplacement"),t.addMove("unlimit\tmilops"),t.addMove("ops\tus\tteardown\t3"),t.addMove("limit\tmilops"),t.addMove("limit\tplacement"),t.addMove("limit\tregion\tasia"),t.addMove("limit\tregion\tseasia"),t.addMove("limit\tregion\tmideast"),t.addMove("limit\tregion\tsamerica"),t.addMove("limit\tregion\tcamerica"),t.addMove("limit\tregion\tafrica"),t.addMove("limit\tignoredefcon"),t.endTurn())})),s=0}if("deal"===i[0]){if(this.game.player==i[1]){var ue=8;this.game.state.round>=4&&(ue=9);for(var de=this.game.deck[0].hand.length,pe=0;pe<this.game.deck[0].hand.length;pe++)"china"==this.game.deck[0].hand[pe]&&de--;var he=this.game.state.opponent_cards_in_hand;if(2==this.game.player){var fe=de;de=he,he=fe}var me=ue-he,ge=ue-de;reshuffle_limit=me+ge,1==i[1]?(this.addMove("resolve\tdeal"),this.addMove("DEAL\t1\t"+i[1]+"\t"+ge)):(this.addMove("resolve\tdeal"),this.addMove("DEAL\t1\t"+i[1]+"\t"+me)),this.endTurn()}else this.updateStatus("<div class='status-message' id='status-message'><span>Opponent is being dealt new cards.</span></div>");return this.updateStatus("<div class='status-message' id='status-message'>"+a.toUpperCase()+" <span>is fetching new cards</span></div>"),0}if("ops"===i[0]&&(null!=this.game.deck[0].cards[i[2]]&&(this.game.state.event_name=this.game.deck[0].cards[i[2]].name),this.updateLog("<span>"+i[1].toUpperCase()+' plays </span><span class="logcard" id="'+i[2]+'">'+this.game.state.event_name+"</span> <span>for "+i[3]+" OPS</span>"),"us"==i[1]&&(this.game.state.stats.us_ops+=parseInt(i[3])),"ussr"==i[1]&&(this.game.state.stats.ussr_ops+=parseInt(i[3])),null!=this.game.deck[0].cards[i[2]]&&("us"==this.game.deck[0].cards[i[2]].player&&("ussr"==i[1]&&(this.game.state.stats.ussr_us_ops+=parseInt(i[3])),"us"==i[1]&&(this.game.state.stats.us_us_ops+=parseInt(i[3]))),"ussr"==this.game.deck[0].cards[i[2]].player&&("ussr"==i[1]&&(this.game.state.stats.ussr_ussr_ops+=parseInt(i[3])),"us"==i[1]&&(this.game.state.stats.us_ussr_ops+=parseInt(i[3]))),"both"==this.game.deck[0].cards[i[2]].player&&("ussr"==i[1]&&(this.game.state.stats.ussr_neutral_ops+=parseInt(i[3])),"us"==i[1]&&(this.game.state.stats.us_neutral_ops+=parseInt(i[3])))),"us"==i[1]&&"china"==i[2]&&(this.game.state.events.formosan=0,$(".formosan").hide()),this.playOps(i[1],i[3],i[2]),s=0),"milops"===i[0]&&(this.updateLog(i[1].toUpperCase()+"</span> <span>receives</span> <span>"+i[2]+"</span> <span>milops"),"us"===i[1]?this.game.state.milops_us+=parseInt(i[2]):this.game.state.milops_ussr+=parseInt(i[2]),this.updateMilitaryOperations(),this.game.queue.splice(n,1)),"vp"===i[0]&&(i.length>3?1==parseInt(i[3])?(this.updateLog(i[1].toUpperCase()+"</span> <span>receives</span> "+i[2]+" <span>VP",this.log_length,1),"us"===i[1]?this.game.state.vp_outstanding+=parseInt(i[2]):this.game.state.vp_outstanding-=parseInt(i[2])):"us"===i[1]?this.game.state.vp+=parseInt(i[2]):this.game.state.vp-=parseInt(i[2]):(this.updateLog(i[1].toUpperCase()+"</span> <span>receives</span> <span>"+i[2]+"</span> <span>VP"),"us"===i[1]?this.game.state.vp+=parseInt(i[2]):this.game.state.vp-=parseInt(i[2]),this.updateVictoryPoints()),this.game.queue.splice(n,1)),"coup"===i[0]){var be="";i.length>=5&&(be=i[4]),this.updateLog("<span>"+i[1].toUpperCase()+"</span> <span>coups</span> <span>"+this.countries[i[2]].name+"</span> <span>with</span> <span>"+i[3]+"</span> <span>OPS</span>"),1!=this.game.state.limit_milops&&(""!=be?("us"==i[1]&&(this.game.state.milops_us+=this.modifyOps(parseInt(i[3]),be,2)),"ussr"==i[1]&&(this.game.state.milops_ussr+=this.modifyOps(parseInt(i[3]),be,1))):("us"==i[1]&&(this.game.state.milops_us+=this.modifyOps(parseInt(i[3]),"",2)),"ussr"==i[1]&&(this.game.state.milops_ussr+=this.modifyOps(parseInt(i[3]),"",1))),this.updateMilitaryOperations()),this.playCoup(i[1],i[2],i[3]),this.game.queue.splice(n,1)}if("realign"===i[0]&&(this.updateLog("<span>"+i[1].toUpperCase()+" <span>realigns</span> <span>"+this.countries[i[2]].name+"</span> <span>with 1 OPS</span>"),i[1]!=a&&this.playRealign(i[2]),this.game.queue.splice(n,1)),"defcon"===i[0]){if("lower"==i[1]&&(this.lowerDefcon(),this.game.state.defcon<=0))return 1==this.game.state.headline?void(1==this.game.state.player_to_go?this.endGame("us","headline defcon suicide!"):this.endGame("ussr","headline defcon suicide!")):void(0==this.game.state.turn?this.endGame("ussr","defcon"):this.endGame("us","defcon"));"raise"==i[1]&&(this.game.state.defcon++,this.game.state.defcon>5&&(this.game.state.defcon=5),this.updateDefcon()),this.game.queue.splice(n,1)}if("notify"===i[0]&&(this.updateLog(i[1]),this.game.queue.splice(n,1)),"move"===i[0]&&("ussr"==i[1]&&(this.game.state.move=0),"us"==i[1]&&(this.game.state.move=1),this.game.queue.splice(n,1)),"event"===i[0])if(null!=this.game.deck[0].cards[i[2]]&&(this.game.state.event_name=this.game.deck[0].cards[i[2]].name),this.updateLog("<span>"+i[1].toUpperCase()+'</span> <span>triggers</span> <span class="logcard" id="'+i[2]+'">'+this.game.state.event_name+"</span> <span>event</span>"),s=this.playEvent(i[1],i[2]),this.updateEventTiles(),0==s);else{if("china"==i[1]);else for(var f in this.game.deck[0].cards)if(i[2]==f)if(1!=this.game.deck[0].cards[f].recurring){var ye=1;this.game.state.defcon>2&&"wargames"==i[2]&&(ye=0),0==this.game.state.events.nato&&"nato"==i[2]&&(ye=0),0==this.game.state.events.johnpaul&&"solidarity"==i[2]&&(ye=0),0==this.game.state.events.starwars&&"starwars"==i[2]&&(ye=0),0==this.game.state.events.ourmanintehran&&"ourmanintehran"==i[2]&&(ye=0),0==this.game.state.events.kitchendebates&&"kitchendebates"==i[2]&&(ye=0),1==ye?(this.updateLog("<span>"+this.game.deck[0].cards[f].name+"</span> <span>removed from game</span>"),this.game.deck[0].removed[f]=this.game.deck[0].cards[f],delete this.game.deck[0].cards[f]):(this.updateLog("<span>"+this.game.deck[0].cards[f].name+"</span> <span>discarded</span>"),this.game.deck[0].discards[f]=this.game.deck[0].cards[f])}else this.updateLog("<span>"+this.game.deck[0].cards[f].name+"</span> <span>discarded</span>"),this.game.deck[0].discards[f]=this.game.deck[0].cards[f];this.game.queue.splice(n,1)}if("stability"===i[0]){i[1];var ve=i[2],_e=parseInt(i[3]);null!=this.countries[ve]&&(this.countries[ve].control+=_e,this.updateLog(this.countries[ve].name+" stability is now "+this.countries[ve].control)),this.game.queue.splice(n,1)}if("place"===i[0]&&(a!==i[1]&&this.placeInfluence(i[3],parseInt(i[4]),i[2]),this.game.queue.splice(n,1)),"setvar"===i[0]&&(this.game.player!=i[1]&&("opponent_cards_in_hand"==i[2]&&(this.game.state.opponent_cards_in_hand=parseInt(i[3])),i[3]&&"back_button_cancelled"==i[3]&&(this.game.state.back_button_cancelled=parseInt(i[4]))),this.game.queue.splice(n,1)),"remove"===i[0]&&(a!=i[1]&&this.removeInfluence(i[3],parseInt(i[4]),i[2]),this.showInfluence(i[3],"us"),this.showInfluence(i[3],"ussr"),this.game.queue.splice(n,1)),"resolve"===i[0]){if("junta"===i[1]&&(this.game.state.events.junta=0),0==n)this.game.queue=[];else{var we=n-1;if("unintervention"==i[1]){1==this.game.state.events.u2&&(this.updateLog("USSR gains +1 VP bonus from U2 Intervention"),this.game.state.vp--,this.updateVictoryPoints()),this.game.state.events.unintervention=0;var xe=this.game.queue[we].split("\t");"event"==xe[0]&&xe[2]==i[1]&&(this.game.state.events.unintervention=0)}if(we<=0)this.game.queue=["round"];else{var ke=this.game.queue[we].split("\t"),Se=0;if("OBSERVER_CHECKPOINT"===ke[0]&&we>=1){var Pe=this.game.queue[we];this.game.queue[we]=this.game.queue[we-1],this.game.queue[we-1]=Pe,ke=this.game.queue[we].split("\t")}if("headline"==ke[0]&&"headline"==i[1]&&(this.game.queue.splice(we,2),Se=1),"ops"==ke[0]&&"ops"==i[1]&&(this.game.queue.splice(we,2),Se=1),"play"==ke[0]&&"play"==i[1]&&(this.game.queue.splice(we,2),Se=1),"event"==ke[0]&&ke[2]==i[1]&&(this.game.queue.splice(we,2),Se=1),"placement"==ke[0]&&"placement"==i[1]&&(this.game.queue.splice(we,2),Se=1),"placement_bonus"==ke[0]&&"placement_bonus"==i[1]&&(this.game.queue.splice(we,2),Se=1),"deal"==ke[0]&&"deal"==i[1]&&(this.game.queue.splice(we,2),Se=1),"discard"==ke[0]&&ke[2]==i[1]&&(this.game.queue.splice(n,1),Se=1),ke[0]===i[1]&&(this.game.queue.splice(we,2),Se=1),0==Se){this.game.queue.splice(n,1);for(var Ee=we,Ce=1;Ee>=0&&1==Ce;Ee--){var Ae=this.game.queue[Ee].split("\t");Ae.length>0&&("event"===Ae[0]&&Ae.length>2&&Ae[2]===i[1]&&(this.game.queue.splice(Ee),Ce=0),"deal"===Ae[0]&&"deal"==i[1]&&(this.game.queue.splice(Ee),Ce=0))}}}}for(var f in this.game.deck[0].cards)i[1]==f&&(1!=this.game.deck[0].cards[f].recurring?(this.updateLog("<span>"+this.game.deck[0].cards[f].name+"</span> <span>removed from game</span>"),this.game.deck[0].removed[f]=this.game.deck[0].cards[f],delete this.game.deck[0].cards[f]):(this.updateLog("<span>"+this.game.deck[0].cards[f].name+"</span> <span>discarded</span>"),this.game.deck[0].discards[f]=this.game.deck[0].cards[f]))}if("placement"===i[0]){if(1==this.is_testing&&(2==this.game.player?this.game.deck[0].hand=["beartrap","redscare","nuclearsubs","fidel","u2","duckandcover","degaulle","saltnegotiations","missileenvy","cia","europe"]:this.game.deck[0].hand=["colonial","cubanmissile","brezhnev","opec","grainsales","africa","cia","cubanmissile","china"]),this.game.deck[0].cards.china=this.returnChinaCard(),1==this.game.player){for(var Me=0,Te=0;Te<this.game.deck[0].hand.length;Te++)"china"==this.game.deck[0].hand[Te]&&(Me=1);0==Me&&(this.game.deck[0].hand.includes("china")||this.game.deck[0].hand.push("china"))}return 1==i[1]?this.game.player==i[1]?this.playerPlaceInitialInfluence("ussr"):this.updateStatusAndListCards("USSR is making its initial placement of influence:"):this.game.player==i[1]?this.playerPlaceInitialInfluence("us"):this.updateStatusAndListCards("US is making its initial placement of influence:"),0}if("placement_bonus"===i[0])return 1==i[1]?this.game.player==i[1]?this.playerPlaceBonusInfluence("ussr",i[2]):this.updateStatusAndListCards("USSR is making its bonus placement of ".concat(i[2]," influence")):this.game.player==i[1]?this.playerPlaceBonusInfluence("us",i[2]):this.updateStatusAndListCards("US is making its bonus placement of ".concat(i[2]," influence")),0;if("headline"===i[0]){var je="headline1",Oe=1,De="",Ie="",Re="";return i.length>2&&(je=i[1],Oe=parseInt(i[2])),"headline1"===je&&(this.game.state.defectors_pulled_in_headline=0),i.length>3&&(De=i[3]),i.length>4&&(Ie=i[4]),i.length>5&&(Re=i[5]),this.playHeadlineModern(je,Oe,De,Ie,Re),0}if("round"===i[0]){if(this.game.state.events.china_card_facedown=0,0!=this.game.player&&this.displayChinaCard(),this.game.state.events.inftreaty=0,1==this.game.state.us_defcon_bonus)if(1==this.isControlled("us","canada")){var Be=function(){var t=e;if(e.game.state.us_defcon_bonus=0,1==e.game.player)return e.updateStatus("<div class='status-message' id='status-message'>NORAD triggers: US places 1 influence in country with US influence</div>"),e.updateLog("NORAD triggers: US places 1 influence in country with US influence"),{v:0};if(2==e.game.player)for(f in e.updateLog("NORAD triggers: US places 1 influence in country with US influence"),e.countries){var a=f,r="#"+f;e.countries[a].us>0&&(e.updateStatus("<div class='status-message' id='status-message'>Place your NORAD bonus: (1 OP)</div>"),$(r).off(),$(r).on("click",(function(){var e=$(this).attr("id");t.addMove("place\tus\tus\t"+e+"\t1"),t.placeInfluence(e,1,"us",(function(){t.playerFinishedPlacingInfluence(),t.endTurn()}))})))}return{v:0}}();if("object"===c(Be))return Be.v}else this.game.state.us_defcon_bonus=0;if(this.game.state.us_defcon_bonus=0,this.game.state.round>1&&(this.game.state.stats.round.push({}),this.game.state.stats.round[this.game.state.stats.round.length-1].us_scorings=this.game.state.stats.us_scorings,this.game.state.stats.round[this.game.state.stats.round.length-1].ussr_scorings=this.game.state.stats.ussr_scorings,this.game.state.stats.round[this.game.state.stats.round.length-1].us_ops=this.game.state.stats.us_ops,this.game.state.stats.round[this.game.state.stats.round.length-1].ussr_ops=this.game.state.stats.ussr_ops,this.game.state.stats.round[this.game.state.stats.round.length-1].us_us_ops=this.game.state.stats.us_ops,this.game.state.stats.round[this.game.state.stats.round.length-1].ussr_us_ops=this.game.state.stats.ussr_ussr_ops,this.game.state.stats.round[this.game.state.stats.round.length-1].us_ussr_ops=this.game.state.stats.us_ussr_ops,this.game.state.stats.round[this.game.state.stats.round.length-1].ussr_ussr_ops=this.game.state.stats.ussr_ussr_ops,this.game.state.stats.round[this.game.state.stats.round.length-1].us_neutral_ops=this.game.state.stats.us_neutral_ops,this.game.state.stats.round[this.game.state.stats.round.length-1].ussr_neutral_ops=this.game.state.stats.ussr_neutral_ops,this.game.state.stats.round[this.game.state.stats.round.length-1].vp=this.game.state.vp),this.settleVPOutstanding(),this.updateEventTiles(),1==this.game.state.events.northseaoil_bonus){if(this.game.state.events.northseaoil_bonus=0,1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is deciding whether to take extra turn</div>"),0;this.updateStatus('<div class=\'status-message\' id=\'status-message\'><span>Do you want to take an extra turn: (North Sea Oil)</span><ul><li class="card" id="play">play extra turn</li><li class="card" id="nope">do not play</li></ul></div>');var qe=this;return qe.addShowCardEvents((function(e){"play"==e&&(qe.addMove("play\t2"),qe.endTurn(1)),"nope"==e&&(qe.addMove("notify\tUS does not play extra turn"),qe.endTurn(1))})),0}if(""!=this.game.state.eagle_has_landed&&0==this.game.state.eagle_has_landed_bonus_taken&&this.game.state.round>0){this.game.state.eagle_has_landed_bonus_taken=1;var Le=1;if("us"==this.game.state.eagle_has_landed&&(Le=2),this.game.player!=Le)return this.updateStatus('div class="status-message" id="status-message">'+this.game.state.eagle_has_landed.toUpperCase()+" </span> <span>is deciding whether to discard a card</div>"),0;for(var Ne=[],Fe=0;Fe<this.game.deck[0].hand.length;Fe++){var Ue=this.game.deck[0].hand[Fe];"europe"!=Ue&&"asia"!=Ue&&"mideast"!=Ue&&"seasia"!=Ue&&"centralamerica"!=Ue&&"southamerica"!=Ue&&"africa"!=Ue&&"china"!=Ue&&Ne.push(Ue)}if(0==Ne.length)return this.updateLog("No cards in hand, skipping end-of-turn discard"),this.addMove("notify\tSkipping Eagle / Bear has Landed"),this.endTurn(),0;var $e='<div id="status-message" class="status-message">US may discard a card: (Eagle Has Landed)<ul>';1==Le&&($e='<div id="status-message" class="status-message">USSR may discard a card: (Bear Has Landed)<ul>'),$e+='<li class="card" id="discard">discard card</li>',$e+='<li class="card" id="nope">do not discard</li>',$e+="</ul>",$e+="</div>",this.updateStatus($e);var ze=this;return ze.addShowCardEvents((function(e){if("nope"==e&&(ze.addMove("notify\t"+ze.game.state.eagle_has_landed.toUpperCase()+" does not discard a card"),ze.endTurn(1)),"discard"==e){for(var t=0,a="<div class='status-message' id='status-message'><span>Select card to discard:</span><ul>",r=0;r<Ne.length;r++)a+='<li class="card showcard" id="'+Ne[r]+'">'+ze.game.deck[0].cards[Ne[r]].name+"</li>",t++;if(0==t)return ze.updateStatus("<div class='status-message' id='status-message'><span>No cards available to discard! Please wait for next turn...</span></div>"),ze.addMove("notify\tUS has no cards available to discard"),void ze.endTurn(1);a+='</ul> </span>If you wish to cancel your discard,</span> <span class="card dashed showcard nocard" id="finished">click here</span>.</div>',ze.updateStatus(a),ze.addShowCardEvents((function(e){if("finished"!=e)return $(e).hide(),ze.hideCard(),ze.updateStatus("<div class='status-message' id='status-message'>Discarding...</div>"),ze.removeCardFromHand(e),ze.addMove("discard\t"+ze.game.state.eagle_has_landed+"\t"+e),ze.addMove("notify\t"+ze.game.state.eagle_has_landed.toUpperCase()+' discards <span class="logcard" id="'+e+'">'+ze.game.deck[0].cards[e].name+"</span>"),ze.endTurn(1),0;ze.endTurn(1)}))}return 0})),0}if(""!=this.game.state.space_shuttle&&0==this.game.state.space_shuttle_bonus_taken&&this.game.state.round>0){this.game.state.space_shuttle_bonus_taken=1;var He=1;if("us"==this.game.state.space_shuttle&&(He=2),this.game.player!=He)return this.updateStatus(this.game.state.space_shuttle.toUpperCase()+"</span> <span>is deciding whether to take extra turn"),0;this.updateStatus('<span>Do you want to take an extra turn: (Space Shuttle)</span><ul><li class="card" id="play">play extra turn</li><li class="card" id="nope">do not play</li></ul>');var Ge=this;return Ge.addShowCardEvents((function(e){"play"==e&&(Ge.addMove("play\t"+He),Ge.endTurn(1)),"nope"==e&&(Ge.addMove("notify\t"+Ge.game.state.space_shuttle.toUpperCase()+" does not play extra turn"),Ge.endTurn(1))})),0}this.game.state.round>0&&this.updateLog("End of Round"),this.endRound(),this.updateStatus("<div class='status-message' id='status-message'><span>Preparing for round</span> "+this.game.state.round+"</div>");var Ke=6;this.game.state.round>3&&(Ke=7);for(var We=0;We<Ke;We++)this.game.queue.push("turn"),this.game.queue.push("play\t2"),this.game.queue.push("play\t1");if(this.game.queue.push("headline"),this.game.queue.push("update_observers\t2"),this.game.queue.push("update_observers\t1"),this.game.state.headline=0,11==this.game.state.round&&this.finalScoring(),this.game.state.round>1){this.updateLog(this.game.deck[0].crypt.length+" <span>cards remaining in deck...</span>"),this.game.queue.push("deal\t2"),this.game.queue.push("deal\t1");var Ve,Ye=8;this.game.state.round>=4&&(Ye=9);for(var Je=this.game.deck[0].hand.length,Xe=0;Xe<this.game.deck[0].hand.length;Xe++)"china"==this.game.deck[0].hand[Xe]&&Je--;var Qe=this.game.state.opponent_cards_in_hand;if(2==this.game.player){var Ze=Je;Je=Qe,Qe=Ze}var et=Ye-Qe,tt=Ye-Je;if(Ve=et+tt,this.game.deck[0].crypt.length<Ve&&4!=this.game.state.round&&8!=this.game.state.round){var at=this.returnDiscardedCards();1==this.game.state.events.shuttlediplomacy&&null!=at.shuttle&&delete at.shuttle,Object.keys(at).length>0&&(this.game.queue.push("SHUFFLE\t1"),this.game.queue.push("DECKRESTORE\t1"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1"),this.game.queue.push("DECK\t1\t"+JSON.stringify(at)),this.game.queue.push("DECKBACKUP\t1"),this.updateLog("Shuffling discarded cards back into the deck..."));var rt=this.game.deck[0].crypt.length,nt=Math.floor(rt/2),it=rt-nt;if(nt>et){var st=nt-et;nt=et,it+=st}if(it>tt){var ot=it-tt;it=tt,nt+=ot}it>0&&(this.game.queue.push("DEAL\t1\t2\t"+nt),this.game.queue.push("DEAL\t1\t1\t"+it)),this.updateStatus("<div class='status-message' id='status-message'>Dealing remaining cards from draw deck before reshuffling...</div>"),this.updateLog("Dealing remaining cards from draw deck before reshuffling...")}4==this.game.state.round&&(this.game.queue.push("SHUFFLE\t1"),this.game.queue.push("DECKRESTORE\t1"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1"),this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnMidWarCards())),this.game.queue.push("DECKBACKUP\t1"),this.updateLog("Adding Mid War cards to the deck...")),8==this.game.state.round&&(this.game.queue.push("SHUFFLE\t1"),this.game.queue.push("DECKRESTORE\t1"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1"),this.game.queue.push("DECK\t1\t"+JSON.stringify(this.returnLateWarCards())),this.game.queue.push("DECKBACKUP\t1"),this.updateLog("Adding Late War cards to the deck..."))}return 1}if("play"===i[0]){0==this.game.player&&this.game.queue.push("OBSERVER_CHECKPOINT");try{v=JSON.parse(JSON.stringify(this.game.state)),JSON.parse(JSON.stringify(this.game.queue))}catch(e){v=null,null}if(this.game.state.headline=0,this.settleVPOutstanding(),this.updateEventTiles(),1==i[1]&&(this.game.state.turn=0),2==i[1]&&(this.game.state.turn=1),this.game.state.events.china_card_eligible=0,this.displayChinaCard(),this.game.state.back_button_cancelled=0,1==this.game.state.us_defcon_bonus)if(1==this.isControlled("us","canada")){var ct=function(){var t=e;if(e.game.state.us_defcon_bonus=0,1==e.game.player)return e.updateStatus("<div class='status-message' id='status-message'>NORAD triggers: US places 1 influence in country with US influence</div>"),e.updateLog("NORAD triggers: US places 1 influence in country with US influence"),{v:0};if(2==e.game.player)for(f in e.updateLog("NORAD triggers: US places 1 influence in country with US influence"),e.countries){var a=f,r="#"+f;e.countries[a].us>0&&(e.updateStatus("<div class='status-message' id='status-message'>US place NORAD bonus: (1 OP)</div>"),$(r).off(),$(r).on("click",(function(){t.addMove("resolve\tturn");var e=$(this).attr("id");t.addMove("place\tus\tus\t"+e+"\t1"),t.placeInfluence(e,1,"us",(function(){t.playerFinishedPlacingInfluence(),t.endTurn()}))})))}return{v:0}}();if("object"===c(ct))return ct.v}else this.game.state.us_defcon_bonus=0;return this.updateDefcon(),this.updateActionRound(),this.updateSpaceRace(),this.updateVictoryPoints(),this.updateMilitaryOperations(),this.updateRound(),this.playMove(),0}if(0==s)return console.log("NOT CONTINUING"),0}return 1}},{key:"playHeadlineModern",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(0!==this.game.player){if(this.game.state.headline=1,""==this.game.state.man_in_earth_orbit){if("headline1"==e)return this.game.state.headline_hash="",this.game.state.headline_xor="",this.game.state.headline_card="",this.game.state.headline_opponent_hash="",this.game.state.headline_opponent_xor="",this.game.state.headline_opponent_card="",this.game.player==t?(this.updateLog("USSR selecting headline card"),this.addMove("resolve\theadline"),this.playerPickHeadlineCard()):this.updateStatusAndListCards("Waiting for USSR to pick headline card"),0;if("headline2"==e)return this.game.player==t?(this.game.state.headline_opponent_hash=a,this.updateLog("US selecting headline card"),this.addMove("resolve\theadline"),this.playerPickHeadlineCard()):this.updateStatusAndListCards("Waiting for US to pick headline card"),0;if("headline3"==e)return this.game.player==t?(this.game.state.headline_opponent_hash=a,this.updateLog("Initiating blind headline card swap"),this.addMove("resolve\theadline"),this.addMove("headline\theadline4\t2\t"+this.game.state.headline_hash+"\t"+this.game.state.headline_xor+"\t"+this.game.state.headline_card),this.endTurn()):this.updateLog("Waiting for USSR to confirm card selection"),0;if("headline4"==e)return this.game.player==t?(this.game.state.headline_opponent_xor=r,this.game.state.headline_opponent_card=n,this.game.state.headline_opponent_hash!=this.app.crypto.encodeXOR(this.app.crypto.stringToHex(this.game.state.headline_opponent_card),this.game.state.headline_opponent_xor)&&alert("PLAYER 1 HASH WRONG: -- this is a development error message that can be triggered if the opponent attempts to cheat by changing their selected card after sharing the encrypted hash. It can also be rarely caused if one or both players reload or have unreliable connections during the headline exchange process. The solution in this case is for both players to reload until the game hits the first turn. "+this.game.state.headline_opponent_hash+" -- "+this.game.state.headline_opponent_card+" -- "+this.game.state.headline_opponent_xor+" -- "+this.app.crypto.encodeXOR(this.app.crypto.stringToHex(this.game.state.headline_opponent_card),this.game.state.headline_opponent_xor)),this.updateLog("Initiating blind headline card swap"),this.addMove("resolve\theadline"),this.addMove("headline\theadline5\t1\t"+this.game.state.headline_hash+"\t"+this.game.state.headline_xor+"\t"+this.game.state.headline_card),this.endTurn()):this.updateLog("Waiting for US to confirm card selection"),0;if("headline5"==e)return 0==this.game.player?(this.updateLog("Observer Mode does not handle headlines well..."),this.game.queue.splice(this.game.queue.length-1,1),1):(this.game.player==t?(this.game.state.headline_opponent_xor=r,this.game.state.headline_opponent_card=n,this.game.state.headline_opponent_hash!=this.app.crypto.encodeXOR(this.app.crypto.stringToHex(this.game.state.headline_opponent_card),this.game.state.headline_opponent_xor)&&alert("PLAYER 2 HASH WRONG: -- this is a development error message that can be triggered if the opponent attempts to cheat by changing their selected card after sharing the encrypted hash. It can also be rarely caused if one or both players reload or have unreliable connections during the headline exchange process. The solution in this case is for both players to reload until the game hits the first turn. "+this.game.state.headline_opponent_hash+" -- "+this.game.state.headline_opponent_card+" -- "+this.game.state.headline_opponent_xor+" -- "+this.app.crypto.encodeXOR(this.app.crypto.stringToHex(this.game.state.headline_opponent_card),this.game.state.headline_opponent_xor)),this.updateLog("Initiating blind headline card swap"),this.addMove("resolve\theadline"),this.addMove("headline\theadline6\t2\t"+this.game.state.headline_hash+"\t"+this.game.state.headline_xor+"\t"+this.game.state.headline_card),this.endTurn()):this.updateLog("Waiting for US to confirm card selection"),0)}else{this.game.state.headline=1;var i=2,s=1,o="US";if("us"===this.game.state.man_in_earth_orbit&&(i=1,s=2,o="USSR"),"headline1"==e)return this.game.player==i?(this.updateLog(o+" selecting headline card first"),this.addMove("resolve\theadline"),this.playerPickHeadlineCard()):this.updateStatusAndListCards(o+" picks headline card first"),0;if("headline2"==e)return this.game.player==s?(this.game.state.headline_opponent_hash=a,this.game.state.headline_opponent_xor=r,this.game.state.headline_opponent_card=n,this.updateLog(o+" selecting headline card player"),this.addMove("resolve\theadline"),this.playerPickHeadlineCard()):this.updateStatusAndListCards("Opponent picking headline card second"),0;"headline3"==e&&(this.game.player==i&&(this.game.state.headline_opponent_hash=a,this.game.state.headline_opponent_xor=r,this.game.state.headline_opponent_card=n),e="headline6")}if(this.game.state.player_to_go=1,"headline6"==e){this.updateLog("Moving into first headline card event");var c=this.game.state.headline_card,l=this.game.state.headline_opponent_card;if(0==this.game.player)return this.updateLog("Observer Mode does not handle headlines well..."),this.game.queue.splice(this.game.queue.length-1,1),1;1==this.game.player&&(this.returnOpsOfCard(c)>this.returnOpsOfCard(l)?this.game.state.player_to_go=1:this.game.state.player_to_go=2),2==this.game.player&&(this.returnOpsOfCard(c)>=this.returnOpsOfCard(l)?this.game.state.player_to_go=2:this.game.state.player_to_go=1);var u="ussr",d="us";2==this.game.player&&(u="us",d="ussr");var p=u,h=0;return"defectors"==c?"ussr"==d&&(h=1):"defectors"==l&&"us"==d&&(h=1),1==h?(this.updateLog('<span>US headlines</span> <span class="logcard" id="defectors">Defectors</span>'),this.game.turn=[],"defectors"!=c?this.updateLog('<span>USSR headlines</span> <span class="logcard" id="'+c+'">'+this.game.deck[0].cards[c].name+"</span>"):this.updateLog('<span>USSR headlines</span> <span class="logcard" id="'+l+'">'+this.game.deck[0].cards[l].name+"</span>"),this.updateLog("Defectors cancels USSR headline."),this.updateStatus("<div class='status-message' id='status-message'>Defectors cancels USSR headline. Moving into first turn...</div>"),1==this.game.player&&(this.addMove("resolve\theadline"),this.addMove("discard\tus\tdefectors"),this.addMove("discard\tussr\t"+c),this.endTurn())):(1==this.game.player?(this.updateStatus("<div class='status-message' id='status-message'><span>US headlines</span> <span class=\"showcard\" id=\""+l+'">'+this.game.deck[0].cards[l].name+'</span>. USSR headlines <span class="showcard" id="'+c+'">'+this.game.deck[0].cards[c].name+"</span></div>"),this.updateLog('<span>US headlines</span> <span class="logcard" id="'+l+'">'+this.game.deck[0].cards[l].name+"</span>."),this.updateLog('<span>USSR headlines</span> <span class="logcard" id="'+c+'">'+this.game.deck[0].cards[c].name+"</span>")):(this.updateStatus("<div class='status-message' id='status-message'><span>USSR headlines</span> <span class=\"showcard\" id=\""+l+'">'+this.game.deck[0].cards[l].name+'</span>. US headlines <span class="showcard" id="'+c+'">'+this.game.deck[0].cards[c].name+"</span></div>"),this.updateLog('<span>USSR headlines <span class="logcard" id="'+l+'">'+this.game.deck[0].cards[l].name+"</span>."),this.updateLog('<span>US headlines <span class="logcard" id="'+c+'">'+this.game.deck[0].cards[c].name+"</span>")),this.game.state.player_to_go==this.game.player&&(this.addMove("resolve\theadline"),this.addMove("headline\theadline7\t2\t"+this.game.state.headline_hash+"\t"+this.game.state.headline_xor+"\t"+this.game.state.headline_card),this.addMove("event\t"+p+"\t"+c),this.removeCardFromHand(c),this.endTurn())),0}if("headline7"==e){var f=this.game.state.headline_card,m=this.game.state.headline_opponent_card;if(0==this.game.player)return this.updateLog("Observer Mode does not handle headlines well..."),this.game.queue.splice(this.game.queue.length-1,1),1;1==this.game.player&&(null==this.game.deck[0].cards[f]?this.game.state.player_to_go=2:null==this.game.deck[0].cards[m]?this.game.state.player_to_go=1:this.returnOpsOfCard(f)>this.returnOpsOfCard(m)?this.game.state.player_to_go=2:this.game.state.player_to_go=1),2==this.game.player&&(null==this.game.deck[0].cards[f]?this.game.state.player_to_go=1:null==this.game.deck[0].cards[m]?this.game.state.player_to_go=2:this.returnOpsOfCard(f)>=this.returnOpsOfCard(m)?this.game.state.player_to_go=1:this.game.state.player_to_go=2);var g="ussr";2==this.game.player&&(g="us");var b=g;return"ussr"==g&&1==this.game.state.defectors_pulled_in_headline?this.game.state.player_to_go==this.game.player&&(this.addMove("resolve\theadline"),this.addMove("notify\tDefectors cancels USSR headline. Tough luck, there."),this.removeCardFromHand(f),this.endTurn()):this.game.state.player_to_go==this.game.player&&(this.addMove("resolve\theadline"),this.addMove("event\t"+b+"\t"+f),this.removeCardFromHand(f),this.endTurn()),0}return 1}this.updateLog("Processing Headline Cards...")}},{key:"playMove",value:function(){this.game.state.headline=0,this.game.state.headline_hash="",this.game.state.headline_card="",this.game.state.headline_xor="",this.game.state.headline_opponent_hash="",this.game.state.headline_opponent_card="",this.game.state.headline_opponent_xor="";var e=6;this.game.state.round>3&&(e=7);var t=e-this.game.state.turn_in_round,a=0;for(i=0;i<this.game.deck[0].hand.length;i++)null!=this.game.deck[0].cards[this.game.deck[0].hand[i]]&&1==this.game.deck[0].cards[this.game.deck[0].hand[i]].scoring&&a++;if(0!=this.game.state.turn){if(1!=this.game.state.turn)return 1;if(1==this.game.state.events.greatsociety&&(this.game.state.events.greatsociety=0,2==this.game.player)){for(var r=[],n=0;n<this.game.deck[0].hand.length;n++)1==this.game.deck[0].cards[this.game.deck[0].hand[n]].scoring&&r.push(this.game.deck[0].hand[n]);var s='<div class="status-message">Great Society is active. US may earn a VP for either skipping its turn or playing a scoring card:<ul>';r.length>0&&(s+="\n\t\t<li class='card' id='scoring'>play scoring card</li>\n\t\t<li class='card' id='scoring_w_card'>play scoring card and draw card</li>\n\t    "),s+="\n\t\t<li class='card' id='skip'>skip turn</li>\n\t\t<li class='card' id='skip_w_card'>skip turn and draw card</li>\n\t  ",this.game.deck[0].hand.length>0&&(s+="\n\t\t<li class='card' id='select'>select card</li>\n\t    "),s+="</ul>",s+="</div>",this.updateStatus(s);var o=this;return o.addShowCardEvents((function(e){if("select"===e)return o.updateStatus(),void o.playerMove();"skip"!==e&&"skip_w_card"!==e||(o.addMove("resolve\tplay"),"skip_w_card"===e&&(o.addMove("SAFEDEAL\t1\t2\t1"),o.addMove("notify\tUS is drawing a bonus card")),o.addMove("vp\tus\t1\t0"),o.addMove("notify\tUS skips a turn for 1 VP as a Great Society"),o.endTurn()),"scoring"!==e&&"scoring_w_card"!==e||(o.addMove("resolve\tplay"),o.addMove("vp\tus\t1\t0"),o.addMove("notify\tUS plays a scoring card for 1 VP as a Great Society"),"scoring_w_card"===e&&(o.addMove("SAFEDEAL\t1\t2\t1"),o.addMove("notify\tUS is drawing a bonus card")),o.playerTurn("greatsociety"))})),0}2==this.game.player?(0==this.game.state.turn_in_round&&this.removeCardFromHand(this.game.state.headline_card),2==this.game.state.events.missile_envy?a>t?this.playerTurn("scoringcard"):1==this.game.state.events.quagmire&&this.game.state.events.redscare_player2>=1?this.playerTurn():this.playerTurn("missileenvy"):this.playerTurn()):this.updateStatusAndListCards("Waiting for US to move")}else 1==this.game.player?(0==this.game.state.turn_in_round&&(this.game.state.turn_in_round++,this.updateActionRound()),1==this.game.state.events.missile_envy?a>t?this.playerTurn("scoringcard"):1==this.game.state.events.beartrap&&this.game.state.events.redscare_player1>=1?this.playerTurn():this.playerTurn("missileenvy"):this.playerTurn()):(this.updateStatusAndListCards("Waiting for USSR to move"),0==this.game.state.turn_in_round&&(this.game.state.turn_in_round++,this.updateActionRound()))}},{key:"playOps",value:function(e,t,a){if(0!=this.game.player){var r=t;t=this.modifyOps(t,a);var n="ussr",i=this;if(i.playerFinishedPlacingInfluence(),2==this.game.player&&(n="us"),e===n){var s=!0;1==i.game.state.event_before_ops&&(s=!1),1==i.game.state.headline&&(s=!1),1==i.game.state.back_button_cancelled&&(s=!1);var o=i.formatPlayOpsStatus(e,t,s);i.updateStatus(o),s&&i.bindBackButtonFunction((function(){i.addMove("revert"),i.endTurn()})),i.addShowCardEvents((function(n){if(i.addMove("resolve\tops"),"cancel_cmc"!=n){if("place"==n){var s=t,o=i.formatStatusHeader("Place "+s+" influence","",!0);i.updateStatus(o),i.prePlayerPlaceInfluence(e),1==s&&i.uneventOpponentControlledCountries(e,a),i.playerPlaceInfluence(e,(function(e,r){s--,1==i.game.break_control&&--s<0&&(i.endRegionBonus(),s=0),i.game.break_control=0,s<2&&i.uneventOpponentControlledCountries(r,a);var o=i.formatStatusHeader("Place "+s+" influence","",!0);if(i.updateStatus(o),s<=0){if(1!=i.isRegionBonus(a))return i.playerFinishedPlacingInfluence(),void i.endTurn();i.updateStatus("<div class='status-message' id='status-message'>Place regional bonus</div>"),s++,i.limitToRegionBonus(),i.endRegionBonus()}i.bindBackButtonFunction((function(){i.undoMove(n,t-s)&&i.playOps(r,t,a)}))}))}if("coup"==n){var c=i.formatStatusHeader("Pick a country to coup","",!0);i.updateStatus(c),i.playerCoupCountry(e,t,a)}if("realign"==n){var l="Realign with ".concat(t," OPS, or:"),u='<ul><li class="card" id="cancelrealign">end turn</li></ul>';u=i.formatStatusHeader(l,u,!0),i.updateStatus(u),i.addShowCardEvents((function(t){if("cancelrealign"==t)return i.addMove("notify\t"+e.toUpperCase()+" opts to end realignments"),void i.endTurn()}));var d=t;i.playerRealign(e,a,(function(){for(var e in i.countries){var t="#"+e;1==i.game.player?i.countries[e].us<1&&($(t).off(),$(t).on("click",(function(){twilght_self.displayModal("Invalid Realign Target")}))):i.countries[e].ussr<1&&($(t).off(),$(t).on("click",(function(){twilght_self.displayModal("Invalid Realign Target")})))}d--,i.updateStatus("<div class='status-message' id='status-message'>Realign with "+d+' OPS, or:<ul><li class="card" id="cancelrealign">stop realigning</li></ul></div>');var r='<ul><li class="card" id="cancelrealign">end turn</li></ul>';if(r=i.formatStatusHeader("Realign with ".concat(d," OPS, or:"),r,!0),i.updateStatus(r),i.addShowCardEvents((function(e){if("cancelrealign"==e){for(var t=[],a=i.moves.length-1;a>=0;a--)"realign"===i.moves[a].split("\t")[0]?t.push(i.moves[a]):t.unshift(i.moves[a]);return i.moves=t,void i.endTurn()}})),d<=0){if(1!=i.isRegionBonus(a)){for(var n=[],s=i.moves.length-1;s>=0;s--)"realign"===i.moves[s].split("\t")[0]?n.push(i.moves[s]):n.unshift(i.moves[s]);return i.moves=n,void i.endTurn()}i.updateStatus("<div class='status-message' id='status-message'>Realign with bonus OP</div>"),d++,i.limitToRegionBonus(),i.endRegionBonus()}}))}i.bindBackButtonFunction((function(){i.playOps(e,t,a)}))}else{this.moves=[];var p=0;if("ops"===i.game.queue[i.game.queue.length-1].split("\t")[0]&&(p=1),1==i.game.player)i.removeInfluence("cuba",2,"ussr"),0==p&&i.addMove("ops\tussr\t"+a+"\t"+r),i.addMove("remove\tussr\tussr\tcuba\t2"),i.addMove("notify\tUSSR has cancelled the Cuban Missile Crisis"),i.addMove("unlimit\tcmc"),i.endTurn();else{var h="<div class='status-message' id='status-message'>Select country from which to remove influence:<ul>";i.countries.turkey.us>=2&&(h+='<li class="card showcard" id="turkey">Turkey</li>'),i.countries.westgermany.us>=2&&(h+='<li class="card showcard" id="westgermany">West Germany</li>'),h+="</ul></div>",i.updateStatus(h),i.addShowCardEvents((function(e){"turkey"===e&&(i.removeInfluence("turkey",2,"us"),0==p&&i.addMove("ops\tus\t"+a+"\t"+r),i.addMove("remove\tus\tus\tturkey\t2"),i.addMove("unlimit\tcmc"),i.addMove("notify\tUS has cancelled the Cuban Missile Crisis"),i.endTurn()),"westgermany"===e&&(i.removeInfluence("westgermany",2,"us"),0==p&&i.addMove("ops\tus\t"+a+"\t"+r),i.addMove("remove\tus\tus\twestgermany\t2"),i.addMove("unlimit\tcmc"),i.addMove("notify\tUS has cancelled the Cuban Missile Crisis"),i.endTurn())}))}}}))}}}},{key:"confirmEvent",value:function(){return confirm("Confirm your desire to play this event")}},{key:"formatPlayOpsStatus",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r="<span>".concat(e.toUpperCase()," plays ").concat(t," OPS:</span><ul>"),n="<ul>";if(0==this.game.state.limit_placement&&(n+='<li class="card" id="place">place influence</li>'),0==this.game.state.limit_coups&&(n+='<li class="card" id="coup">launch coup</li>'),0==this.game.state.limit_realignments&&(n+='<li class="card" id="realign">realign country</li>'),1==this.game.player&&1==this.game.state.events.cubanmissilecrisis||2==this.game.player&&2==this.game.state.events.cubanmissilecrisis){var i=0;1==this.game.player&&this.countries.cuba.ussr>=2&&(i=1),2==this.game.player&&this.countries.turkey.us>=2&&(i=1),2==this.game.player&&this.countries.westgermany.us>=2&&(i=1),1==i&&(n+='<li class="card" id="cancel_cmc">cancel cuban missile crisis</li>')}return n+="</ul>",n=this.formatStatusHeader(r,n,a)}},{key:"bindBackButtonFunction",value:function(e){$("#back_button").off(),$("#back_button").on("click",e)}},{key:"playerPickHeadlineCard",value:function(){this.startClock();var e=this;if(0!=this.browser_active){var t="us";1==this.game.player&&(t="ussr");var a="";a=""!=this.game.state.man_in_earth_orbit?"us"===this.game.state.man_in_earth_orbit?1==this.game.player?'\n            <div class="status-message" class="status-message"><span>'.concat(t.toUpperCase(),"</span> <span>pick your headline card first</span></div>\n            ").concat(this.returnCardList(this.game.deck[0].hand),"\n          "):'\n            <div class="status-message" id="status-message"><span>'.concat(t.toUpperCase(),"</span> <span>pick your headline card second (opponent selected: ").concat(e.game.state.headline_opponent_card,")</span></div>\n            ").concat(this.returnCardList(this.game.deck[0].hand),"\n          "):1==this.game.player?'\n            <div class="status-message" id="status-message"><span>'.concat(t.toUpperCase(),"</span> <span>pick your headline card second (opponent selected: ").concat(e.game.state.headline_opponent_card,")</span></div>\n            ").concat(this.returnCardList(this.game.deck[0].hand),"\n          "):'\n            <div class="status-message" id="status-message"><span>'.concat(t.toUpperCase(),"</span> <span>pick your headline card first</span></div>\n            ").concat(this.returnCardList(this.game.deck[0].hand),"\n          "):'\n        <div class="status-message" id="status-message"><span>'.concat(t.toUpperCase(),"</span> <span>pick your headline card</span></div>\n        ").concat(this.returnCardList(this.game.deck[0].hand),"\n      "),this.updateStatus(a),1==e.confirm_moves&&(e.cardbox.skip_card_prompt=0),e.addShowCardEvents((function(a){1==e.confirm_moves&&(e.cardbox.skip_card_prompt=1),e.playerTurnHeadlineSelected(a,t)}))}}},{key:"revertTurn",value:function(){null==v||null==v||(this.game.state=v);for(var e=this.game.queue.length-1;e>=0;e--){var t=this.game.queue[e].split("\t");if("discard"===t[0]&&("ussr"===t[1]&&1==this.game.player&&"ops"!=t[2]&&(this.updateLog("USSR second-guesses themselves..."),this.addCardToHand(t[2])),"us"===t[1]&&2==this.game.player&&"ops"!=t[2]&&(this.updateLog("US second-guesses themselves..."),this.addCardToHand(t[2]))),"play"===t[0])return this.displayBoard(),1;this.game.queue.splice(e,1)}this.displayBoard()}},{key:"playerTurnHeadlineSelected",value:function(e,t){this.startClock(),"china"!=e?"unintervention"!=e?(this.game.state.headline_card=e,this.game.state.headline_xor=this.app.crypto.hash(Math.random()),this.game.state.headline_hash=this.app.crypto.encodeXOR(this.app.crypto.stringToHex(this.game.state.headline_card),this.game.state.headline_xor),""!=this.game.state.man_in_earth_orbit?"us"===this.game.state.man_in_earth_orbit?1==this.game.player?this.addMove("headline\theadline2\t2\t"+this.game.state.headline_hash+"\t"+this.game.state.headline_xor+"\t"+this.game.state.headline_card+"\t"):this.addMove("headline\theadline3\t2\t"+this.game.state.headline_hash+"\t"+this.game.state.headline_xor+"\t"+this.game.state.headline_card+"\t"):1==this.game.player?this.addMove("headline\theadline3\t2\t"+this.game.state.headline_hash+"\t"+this.game.state.headline_xor+"\t"+this.game.state.headline_card+"\t"):this.addMove("headline\theadline2\t2\t"+this.game.state.headline_hash+"\t"+this.game.state.headline_xor+"\t"+this.game.state.headline_card+"\t"):1==this.game.player?this.addMove("headline\theadline2\t2\t"+this.game.state.headline_hash+"\t\t\t"):this.addMove("headline\theadline3\t1\t"+this.game.state.headline_hash+"\t\t\t"),this.updateStatus("<div class='status-message' id='status-message'>simultaneous blind pick... encrypting selected card</div>"),this.game.turn=[],$(".card").off(),$(".showcard").off(),this.hideCard(),this.endTurn()):twilght_self.displayModal("Invalid Headline","You cannot headline UN Intervention"):twilght_self.displayModal("Invalid Headline","You cannot headline China")}},{key:"playerTurn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.startClock();var t=this;t.confirm_this_move=1;var a=0;if("greatsociety"==e&&(a=1,e="scoringcard"),null!=e&&(this.game.state.back_button_cancelled=1),this.displayChinaCard(),this.updateEventTiles(),null==e&&0==y&&1==this.game.deck[0].hand.length&&"china"==this.game.deck[0].hand[0]){y=1;var r='<div class="status-message" id="status-message">You only have the China Card remaining. Do you wish to play it this turn?';return r+='<ul><li class="card" id="play">play card</li><li class="card" id="skipturn">skip turn</li></ul></div>',this.updateStatus(r),void this.addShowCardEvents((function(a){"play"===a&&t.playerTurn(e),"skipturn"===a&&(t.addMove("resolve\tplay"),1==t.game.player?t.addMove("notify\tUSSR chooses not to play the China Card"):t.addMove("notify\tUS chooses not to play the China Card"),t.endTurn())}))}if(y=0,_=e,0!=this.browser_active){this.game.state.events.china_card_in_play=0,this.game.state.events.vietnam_revolts_eligible=1,this.game.state.events.china_card_eligible=1,this.game.state.events.region_bonus="",this.game.state.ironlady_before_ops=0;var n="ussr",s=[];2==this.game.player&&(n="us"),b=this.game.state.events.missileenvy,("ussr"===n&&1==this.game.state.events.missile_envy||"us"===n&&2==this.game.state.events.missile_envy)&&(b=1);var o="";if(null==e)for(o=n.toUpperCase()+" pick a card: ",i=0;i<this.game.deck[0].hand.length;i++)1==this.game.state.events.unintervention?(1==this.game.player&&"us"===this.game.deck[0].cards[this.game.deck[0].hand[i]].player&&s.push(this.game.deck[0].hand[i]),2==this.game.player&&"ussr"===this.game.deck[0].cards[this.game.deck[0].hand[i]].player&&s.push(this.game.deck[0].hand[i])):s.push(this.game.deck[0].hand[i]);else if("scoringcard"===e)for(o="Scoring card must be played: <ul>",i=0;i<this.game.deck[0].hand.length;i++)null!=this.game.deck[0].cards[this.game.deck[0].hand[i]]&&1==this.game.deck[0].cards[this.game.deck[0].hand[i]].scoring&&(e=this.game.deck[0].hand[i],s.push(this.game.deck[0].hand[i]));else s.push(e);if(1==this.game.player&&1==this.game.state.events.cubanmissilecrisis||2==this.game.player&&2==this.game.state.events.cubanmissilecrisis){var c=0;1==this.game.player&&this.countries.cuba.ussr>=2&&(c=1),2==this.game.player&&this.countries.turkey.us>=2&&(c=1),2==this.game.player&&this.countries.westgermany.us>=2&&(c=1),1==c&&s.push("cancel cuban missile crisis")}if(0==this.game.state.headline&&(1==this.game.player&&1==this.game.state.events.beartrap||2==this.game.player&&1==this.game.state.events.quagmire)){var l=0,u=0;s=[];var d=6;this.game.state.round>3&&(d=7);var p=d-this.game.state.turn_in_round;for(o=1==this.game.state.events.beartrap&&1==this.game.player?"Select a card for Bear Trap: ":"Select a card for Quagmire: ",i=0;i<this.game.deck[0].hand.length;i++)this.modifyOps(this.game.deck[0].cards[this.game.deck[0].hand[i]].ops,this.game.deck[0].hand[i],this.game.player,0)>=2&&"china"!=this.game.deck[0].hand[i]&&(s.push(this.game.deck[0].hand[i]),l++),null!=this.game.deck[0].cards[this.game.deck[0].hand[i]]&&1==this.game.deck[0].cards[this.game.deck[0].hand[i]].scoring&&u++;var h=1;if(this.game.state.events.missile_envy==this.game.player&&(h=0,this.modifyOps(2,"missileenvy",this.game.player,0)>=2&&(h=1,this.game.state.events.missile_envy=0,this.game.state.events.missileenvy=0,(s=[]).push("missileenvy"))),u>=p&&(h=0),0==h)if(l>0&&u<=p)for(this.updateStatus("<div class='status-message' id='status-message'>"+o+"</div>"),s=[],i=0;i<this.game.deck[0].hand.length;i++)null!=this.game.deck[0].cards[this.game.deck[0].hand[i]]&&this.modifyOps(this.game.deck[0].cards[this.game.deck[0].hand[i]].ops,this.game.deck[0].hand[i],this.game.player,0)>=2&&"china"!=this.game.deck[0].hand[i]&&s.push(this.game.deck[0].hand[i]);else if(u>0)for(o=1==this.game.state.events.beartrap?"Bear Trap restricts you to Scoring Cards: ":"Quagmire restricts you to Scoring Cards: ",s=[],i=0;i<this.game.deck[0].hand.length;i++)null!=this.game.deck[0].cards[this.game.deck[0].hand[i]]&&1==this.game.deck[0].cards[this.game.deck[0].hand[i]].scoring&&s.push(this.game.deck[0].hand[i]);else o=1==this.game.state.events.beartrap?"No cards playable due to Bear Trap: ":"No cards playable due to Quagmire: ",(s=[]).push("skip turn")}if(s.length>0?this.updateStatusAndListCards(o,s):this.updateStatusAndListCards(o,this.game.deck[0].hand),1!=this.game.state.events.unintervention&&"grainsales"!=e&&1!=a&&(this.moves=[]),t.playerFinishedPlacingInfluence(),null==e&&0==this.game.deck[0].hand.length)return this.updateStatus("<div class='status-message' id='status-message'>Skipping turn... no cards left to play</div>"),this.updateLog("Skipping turn... no cards left to play"),this.addMove("resolve\tplay"),void this.endTurn();t.addShowCardEvents((function(e){t.playerTurnCardSelected(e,n)}))}}},{key:"playerTurnCardSelected",value:function(e,t){var a=this;this.startClock();var r=this,n="us";if(2==this.game.player&&(n="ussr"),"skipturn"===e)return r.hideCard(e),r.addMove("resolve\tplay"),r.addMove("notify\t"+t+" has no cards playable."),r.endTurn(),0;var s=0,o=6;r.game.state.round>3&&(o=7);var c=o-r.game.state.turn_in_round;for(i=0;i<r.game.deck[0].hand.length;i++)null!=this.game.deck[0].cards[this.game.deck[0].hand[i]]&&1==r.game.deck[0].cards[r.game.deck[0].hand[i]].scoring&&s++;if(!(s>0&&s>c&&0==r.game.deck[0].cards[e].scoring)||confirm("Holding a scoring card at the end of the turn will lose you the game. Still play this card?")){if((0==r.game.state.headline&&1==r.game.state.events.quagmire&&2==r.game.player||1==r.game.state.events.beartrap&&1==r.game.player)&&(1==r.game.state.events.wwby&&0==r.game.state.headline&&"us"==t&&("unintervention"!=e&&(r.game.state.events.wwby_triggers=1),r.game.state.events.wwby=0),0==r.game.deck[0].cards[e].scoring))return r.hideCard(e),r.removeCardFromHand(e),r.addMove("resolve\tplay"),r.addMove("quagmire\t"+t+"\t"+e),r.addMove("discard\t"+t+"\t"+e),r.endTurn(),0;if("cancelcubanmissilecrisis"==e){if(1==r.game.player)r.removeInfluence("cuba",2,"ussr"),r.addMove("remove\tussr\tussr\tcuba\t2"),r.addMove("unlimit\tcmc"),r.addMove("notify\tUSSR has cancelled the Cuban Missile Crisis"),r.endTurn();else{var l="Select country from which to remove influence:<ul>";r.countries.turkey.us>=2&&(l+='<li class="card showcard" id="turkey">Turkey</li>'),r.countries.westgermany.us>=2&&(l+='<li class="card showcard" id="westgermany">West Germany</li>'),l+="</ul>",r.updateStatus("<div class='status-message' id='status-message'>"+l+"</div>"),r.addShowCardEvents((function(e){"turkey"===e&&(r.removeInfluence("turkey",2,"us"),r.addMove("remove\tus\tus\tturkey\t2"),r.addMove("unlimit\tcmc"),r.addMove("notify\tUS has cancelled the Cuban Missile Crisis"),r.endTurn()),"westgermany"===e&&(r.removeInfluence("westgermany",2,"us"),r.addMove("remove\tus\tus\twestgermany\t2"),r.addMove("unlimit\tcmc"),r.addMove("notify\tUS has cancelled the Cuban Missile Crisis"),r.endTurn())}))}return 0}if(r.hideCard(e),r.addMove("resolve\tplay"),r.addMove("discard\t"+t+"\t"+e),"china"==e&&(r.addMove("unlimit\tchina"),r.game.state.events.china_card_in_play=1),1==r.game.state.events.wwby&&0==r.game.state.headline&&"us"==t&&("unintervention"!=e&&(r.game.state.events.wwby_triggers=1),r.game.state.events.wwby=0),1==r.game.deck[0].cards[e].scoring){var u="Playing ".concat(r.game.deck[0].cards[e].name,":"),d="";d+='<ul><li class="card" id="event">score region</li></ul>',d=1==this.game.state.back_button_cancelled?r.formatStatusHeader(u,d,!1):r.formatStatusHeader(u,d,!0),r.updateStatus(d)}else{var p=r.modifyOps(r.game.deck[0].cards[e].ops,e,r.game.player,0),h=1;1==r.game.player&&r.game.state.space_race_ussr_counter>=1&&("ussr"==r.game.state.animal_in_space&&r.game.state.space_race_ussr_counter<2||(h=0)),2==r.game.player&&r.game.state.space_race_us_counter>=1&&("us"==r.game.state.animal_in_space&&r.game.state.space_race_us_counter<2||(h=0));var f="";f+="<ul>";var m=1;if("unintervention"==e){for(var g=0,y=0;y<r.game.deck[0].hand.length;y++){var v=r.game.deck[0].hand[y];"china"!=v&&(1==r.game.player?"us"===r.game.deck[0].cards[v].player&&(g=1):"ussr"===r.game.deck[0].cards[v].player&&(g=1))}0==g&&(m=0)}if("china"==e&&(m=0),"missileenvy"==e&&1==b&&(m=0),r.game.deck[0].cards[e].player==n&&(m=0),1==m&&(f+='<li class="card" id="event">play event</li>'),f+='<li class="card" id="ops">play ops</li>',1==h&&("ussr"==t&&p>1&&(r.game.state.space_race_ussr<4&&p>1&&(f+='<li class="card" id="space">space race</li>'),r.game.state.space_race_ussr>=4&&r.game.state.space_race_ussr<7&&p>2&&(f+='<li class="card" id="space">space race</li>'),7==r.game.state.space_race_ussr&&p>3&&(f+='<li class="card" id="space">space race</li>')),"us"==t&&p>1&&(r.game.state.space_race_us<4&&p>1&&(f+='<li class="card" id="space">space race</li>'),r.game.state.space_race_us>=4&&r.game.state.space_race_us<7&&p>2&&(f+='<li class="card" id="space">space race</li>'),7==r.game.state.space_race_us&&p>3&&(f+='<li class="card" id="space">space race</li>'))),1==r.game.player&&1==r.game.state.events.cubanmissilecrisis||2==r.game.player&&2==r.game.state.events.cubanmissilecrisis){var w=0;1==r.game.player&&r.countries.cuba.ussr>=2&&(w=1),2==r.game.player&&r.countries.turkey.us>=2&&(w=1),1==w&&(f+='<li class="card" id="cancel_cmc">cancel cuban missile crisis</li>')}f=1==r.game.state.back_button_cancelled?r.formatStatusHeader("<span>".concat(t.toUpperCase(),"</span> <span>playing</span> <span>").concat(r.game.deck[0].cards[e].name,"</span>"),f,!1):r.formatStatusHeader("<span>".concat(t.toUpperCase(),"</span> <span>playing</span> <span>").concat(r.game.deck[0].cards[e].name,"</span>"),f,!0),r.updateStatus(f)}$("#back_button").off(),$("#back_button").on("click",(function(){a.playerTurn()})),r.addShowCardEvents((function(a){if($(".card").off(),(2==r.game.player&&2==r.game.state.events.missile_envy||1==r.game.player&&1==r.game.state.events.missile_envy)&&"missileenvy"==e&&(r.game.state.events.missileenvy=0,r.game.state.events.missile_envy=0,b=0),"cancel_cmc"!=a)if("event"!=a)if("ops"!=a){if("space"==a){if(1==r.confirm_moves){var n='\n\t      <div class="status-message" id="status-message">\n              <div>Confirm you want to space '.concat(r.game.deck[0].cards[e].name,'</div>\n             <ul>\n              <li class="card" id="playevent">send into orbit</li>\n              <li class="card" id="pickagain">pick again</li>\n              </ul>\n              <input type="checkbox" name="dontshowme" value="true" style="width: 20px;height: 1.5em;"> don\'t confirm moves (expert mode)...\n\t      </div>\n              ');return r.updateStatus(n),r.addShowCardEvents((function(a){if($(".card").off(),"playevent"==a)return r.addMove("space\t"+t+"\t"+e),r.removeCardFromHand(e),void r.endTurn();"pickagain"!=a||r.playerTurn(_)})),void $("input:checkbox").change((function(){if($(this).is(":checked")){r.confirm_moves=0,r.saveGamePreference("confirm_moves",1);try{$(".game-confirm").text("Newbie Mode")}catch(e){}}}))}return r.addMove("space\t"+t+"\t"+e),r.removeCardFromHand(e),void r.endTurn()}r.updateStatus("")}else{if(1==r.confirm_moves&&("missileenvy"!=e||0==b)){var i='\n              <ul>\n              <li class="card" id="playevent">play for ops</li>\n              <li class="card" id="pickagain">pick again</li>\n              </ul>\n              ';1==r.confirm_moves&&(i+='<input type="checkbox" name="dontshowme" value="true" style="width: 20px;height: 1.5em;"> don\'t confirm moves (expert mode)...'),i+="\n\t      </div>\n\t    ";var s=r.formatStatusHeader("Confirm you want to play for ops:",i,!1);return r.updateStatus(s),r.addShowCardEvents((function(a){$(".card").off(),"playevent"!=a?"pickagain"!=a||r.playerTurn(_):r.playerTriggerOps(t,e)})),void $("input:checkbox").change((function(){if($(this).is(":checked")){r.confirm_moves=0,r.saveGamePreference("confirm_moves",0);try{$(".game-confirm").text("Newbie Mode")}catch(e){}}}))}r.playerTriggerOps(t,e)}else{if("both"!=r.game.deck[0].cards[e].player&&r.game.deck[0].cards[e].player!=t)return r.updateStatus('<div class=\'status-message\' id=\'status-message\'><span>This is your opponent\'s event. Are you sure you wish to play it for the event instead of the OPS?</span><ul><li class="card" id="playevent">play event</li><li class="card" id="pickagain">pick again</li></ul></div>'),void r.addShowCardEvents((function(a){$(".card").off(),"playevent"!=a?"pickagain"!=a||r.playerTurn(_):r.playerTriggerEvent(t,e)}));if(1==r.confirm_moves){var o=r.formatStatusHeader("\n              Confirm you want to play this event:\n\t      ",'\n             <ul>\n              <li class="card" id="playevent">play event</li>\n              <li class="card" id="pickagain">pick again</li>\n              </ul>\n              <input type="checkbox" name="dontshowme" value="true" style="width: 20px;height: 1.5em;"> don\'t confirm moves (expert mode)...\n              ',!1);return r.updateStatus(o),r.addShowCardEvents((function(a){$(".card").off(),"playevent"!=a?"pickagain"!=a||r.playerTurn(_):r.playerTriggerEvent(t,e)})),void $("input:checkbox").change((function(){if($(this).is(":checked")){r.confirm_moves=0,r.saveGamePreference("confirm_moves",1);try{$(".game-confirm").text("Newbie Mode")}catch(e){}}}))}r.playerTriggerEvent(t,e)}else if(this.moves=[],1==r.game.player)r.removeInfluence("cuba",2,"ussr"),r.addMove("card\tussr\t"+e),r.addMove("remove\tussr\tussr\tcuba\t2"),r.addMove("notify\tUSSR has cancelled the Cuban Missile Crisis"),r.addMove("unlimit\tcmc"),r.endTurn();else{var c="Select country from which to remove influence:<ul>";r.countries.turkey.us>=2&&(c+='<li class="card showcard" id="turkey">Turkey</li>'),r.countries.westgermany.us>=2&&(c+='<li class="card showcard" id="westgermany">West Germany</li>'),c+="</ul>",r.updateStatus("<div class='status-message' id='status-message'>"+c+"</div>"),r.addShowCardEvents((function(t){var a=0;"ops"===r.game.queue[r.game.queue.length-1].split("\t")[0]&&(a=1),"turkey"===t&&(r.removeInfluence("turkey",2,"us"),0===a&&r.addMove("card\tus\t"+e),r.addMove("remove\tus\tus\tturkey\t2"),r.addMove("unlimit\tcmc"),r.addMove("notify\tUS has cancelled the Cuban Missile Crisis"),r.endTurn()),"westgermany"===t&&(r.removeInfluence("westgermany",2,"us"),0===a&&r.addMove("card\tus\t"+e),r.addMove("remove\tus\tus\twestgermany\t2"),r.addMove("unlimit\tcmc"),r.addMove("notify\tUS has cancelled the Cuban Missile Crisis"),r.endTurn())}))}}))}}},{key:"playerTriggerOps",value:function(e,t){var a=this,r="us";if(2==this.game.player&&(r="ussr"),a.game.deck[0].cards[t].player==r){if(1==a.game.state.events.unintervention)return 1==a.game.state.events.flowerpower&&("arabisraeli"==t&&0==a.game.state.events.campdavid||"koreanwar"==t||"brushwar"==t||"indopaki"==t||"iraniraq"==t)&&"us"===e&&(a.addMove("notify\tFlower Power triggered by "+t),a.addMove("vp\tussr\t2\t1")),a.addMove("notify\t"+e.toUpperCase()+" plays "+t+" with UN Intervention"),a.addMove("ops\t"+e+"\t"+t+"\t"+a.game.deck[0].cards[t].ops),a.removeCardFromHand(t),void a.endTurn();1==a.game.state.events.flowerpower&&("arabisraeli"==t&&0==a.game.state.events.campdavid||"koreanwar"==t||"brushwar"==t||"indopaki"==t||"iraniraq"==t)&&"us"===e&&(a.addMove("notify\tFlower Power triggered by "+t),a.addMove("vp\tussr\t2\t1"));var n='<ul><li class="card" id="before">event before ops</li><li class="card" id="after">event after ops</li></ul>';return n=a.formatStatusHeader("Playing opponent card:",n,!0),a.updateStatus(n),a.bindBackButtonFunction((function(){a.playerTurnCardSelected(t,e)})),void a.addShowCardEvents((function(r){return a.game.state.event_before_ops=0,a.game.state.event_name="","before"===r?(a.game.state.event_before_ops=1,a.game.state.event_name=a.game.deck[0].cards[t].name,a.addMove("ops\t"+e+"\t"+t+"\t"+a.game.deck[0].cards[t].ops),a.addMove("event\t"+e+"\t"+t),a.removeCardFromHand(t),void a.endTurn()):"after"===r?(a.game.state.event_name=a.game.deck[0].cards[t].name,a.addMove("event\t"+e+"\t"+t),a.addMove("ops\t"+e+"\t"+t+"\t"+a.game.deck[0].cards[t].ops),a.removeCardFromHand(t),void a.endTurn()):void 0}))}return a.addMove("ops\t"+e+"\t"+t+"\t"+a.game.deck[0].cards[t].ops),"china"==t&&a.addMove("limit\tchina"),a.removeCardFromHand(t),1==a.game.state.events.flowerpower&&("arabisraeli"==t&&0==a.game.state.events.campdavid||"koreanwar"==t||"brushwar"==t||"indopaki"==t||"iraniraq"==t)&&"us"===e&&(a.addMove("notify\tFlower Power triggered by "+t),a.addMove("vp\tussr\t2\t1")),void a.endTurn()}},{key:"playerTriggerEvent",value:function(e,t){if(1==this.game.state.events.flowerpower&&("arabisraeli"==t&&0==this.game.state.events.campdavid||"koreanwar"==t||"brushwar"==t||"indopaki"==t||"iraniraq"==t)&&"us"===e&&(this.addMove("notify\tFlower Power triggered by "+t),this.addMove("vp\tussr\t2\t1")),this.game.state.event_name=this.game.deck[0].cards[t].name,this.addMove("event\t"+e+"\t"+t),this.removeCardFromHand(t),"tehran"==t&&5>this.game.deck[0].crypt.length){var a=this.returnDiscardedCards();1==this.game.state.events.shuttlediplomacy&&null!=a.shuttle&&delete a.shuttle,Object.keys(a).length>0&&(this.addMove("DECKRESTORE\t1"),this.addMove("DECKENCRYPT\t1\t2"),this.addMove("DECKENCRYPT\t1\t1"),this.addMove("DECKXOR\t1\t2"),this.addMove("DECKXOR\t1\t1"),this.addMove("flush\tdiscards"),this.addMove("DECK\t1\t"+JSON.stringify(a)),this.addMove("DECKBACKUP\t1"),this.updateLog("cards remaining: "+this.game.deck[0].crypt.length),this.updateLog("Shuffling discarded cards back into the deck..."))}this.endTurn()}},{key:"uneventOpponentControlledCountries",value:function(e,t){var a=this.returnArrayOfRegionBonuses(t);for(var r in this.countries){if("us"==e&&1==this.isControlled("ussr",r)){for(var n=0,i=0;i<a.length;i++)this.countries[r].region.indexOf(a[i])>-1&&(n=1);1==n||(this.countries[r].place=0,$("#"+r).off())}if("ussr"==e&&1==this.isControlled("us",r)){for(var s=0,o=0;o<a.length;o++)this.countries[r].region.indexOf(a[o])>-1&&(s=1);1==s||(this.countries[r].place=0,$("#"+r).off())}}}},{key:"prePlayerPlaceInfluence",value:function(e){for(var t in this.countries)this.game.countries[t].place=0;if("ussr"==e)for(var t in this.game.countries.finland.place=1,this.game.countries.poland.place=1,this.game.countries.romania.place=1,this.game.countries.afghanistan.place=1,this.game.countries.northkorea.place=1,this.game.countries)if(this.game.countries[t].ussr>0){var a=1;if(1==this.game.state.ironlady_before_ops&&this.game.countries.chile.ussr<1&&this.game.countries.uruguay.ussr<1&&this.game.countries.paraguay.ussr<1&&1==this.game.countries.argentina.ussr&&"argentina"===t&&(a=0),this.game.countries[t].place=a,1==a)for(var r=0;r<this.game.countries[t].neighbours.length;r++){var n=this.game.countries[t].neighbours[r];this.game.countries[n].place=1}}if("us"==e)for(var t in this.game.countries.canada.place=1,this.game.countries.mexico.place=1,this.game.countries.cuba.place=1,this.game.countries.japan.place=1,this.game.countries)if(this.game.countries[t].us>0){this.game.countries[t].place=1;for(var i=0;i<this.game.countries[t].neighbours.length;i++){var s=this.game.countries[t].neighbours[i];this.game.countries[s].place=1}}}},{key:"playerPlaceInitialInfluence",value:function(e){var t=this;try{var a,r;!function(){t.startClock();var n=t;if("ussr"==e&&function(){n.addMove("resolve\tplacement"),t.updateStatusAndListCards("You are the USSR. Place six additional influence in Eastern Europe."),(a=[]).push("finland"),a.push("eastgermany"),a.push("poland"),a.push("austria"),a.push("czechoslovakia"),a.push("hungary"),a.push("romania"),a.push("yugoslavia"),a.push("bulgaria");for(var e=6,r=0;r<a.length;r++){t.game.countries[a[r]].place=1;var i="#"+a[r];$(i).off(),$(i).on("click",(function(){var t=$(this).attr("id");1==n.countries[t].place?(n.addMove("place\tussr\tussr\t"+t+"\t1"),n.placeInfluence(t,1,"ussr"),0==--e&&(n.playerFinishedPlacingInfluence(),n.game.state.placement=1,n.endTurn())):n.displayModal("Invalid Influence Placement","You cannot place there...: ".concat(j," influence left"))}))}}(),"us"==e){n.addMove("resolve\tplacement"),t.updateStatusAndListCards("You are the US. Place seven additional influence in Western Europe."),(a=[]).push("canada"),a.push("uk"),a.push("benelux"),a.push("france"),a.push("italy"),a.push("westgermany"),a.push("greece"),a.push("spain"),a.push("turkey"),a.push("austria"),a.push("norway"),a.push("denmark"),a.push("sweden"),a.push("finland"),r=7;for(var i=0;i<a.length;i++){t.game.countries[a[i]].place=1;var s="#"+a[i];$(s).off(),$(s).on("click",(function(){var e=$(this).attr("id");1==n.countries[e].place?(n.addMove("place\tus\tus\t"+e+"\t1"),n.placeInfluence(e,1,"us"),0==--r&&(n.playerFinishedPlacingInfluence(),n.game.state.placement=1,n.endTurn())):n.displayModal("Invalid Influence Placement","You cannot place there...: ".concat(j," influence left"))}))}}}()}catch(e){}}},{key:"playerPlaceBonusInfluence",value:function(e,t){var a=this;this.startClock();var r,n=this;"ussr"==e&&function(){n.addMove("resolve\tplacement_bonus"),a.updateStatusAndListCards("You are the USSR. Place</span> ".concat(t," <span>additional influence in countries with existing Soviet influence."));var e=t;for(r in a.game.countries)if(a.game.countries[r].ussr>0){var i="#"+r;$(i).off(),$(i).on("click",(function(){var t=$(this).attr("id");n.addMove("place\tussr\tussr\t"+t+"\t1"),n.placeInfluence(t,1,"ussr"),0==--e&&(n.playerFinishedPlacingInfluence(),n.game.state.placement=1,n.endTurn())}))}}(),"us"==e&&function(){n.addMove("resolve\tplacement_bonus"),a.updateStatusAndListCards("You are the US. Place</span> ".concat(t," <span>additional influence in countries with existing American influence."));var e=t;for(r in a.game.countries)if(a.game.countries[r].us>0){var i="#"+r;$(i).off(),$(i).on("click",(function(){var t=$(this).attr("id");n.addMove("place\tus\tus\t"+t+"\t1"),n.placeInfluence(t,1,"us"),0==--e&&(n.playerFinishedPlacingInfluence(),n.game.state.placement=1,n.endTurn())}))}}()}},{key:"addCardToHand",value:function(e){0!=this.game.player&&this.game.deck[0].hand.push(e)}},{key:"removeCardFromHand",value:function(e){if(0!=this.game.player)for(i=0;i<this.game.deck[0].hand.length;i++)this.game.deck[0].hand[i]==e&&this.game.deck[0].hand.splice(i,1)}},{key:"removeInfluence",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;"us"==a?(this.countries[e].us=parseInt(this.countries[e].us)-parseInt(t),this.countries[e].us<0&&(this.countries[e].us=0),this.showInfluence(e,"ussr")):(this.countries[e].ussr=parseInt(this.countries[e].ussr)-parseInt(t),this.countries[e].ussr<0&&(this.countries[e].ussr=0),this.showInfluence(e,"us")),this.updateLog(a.toUpperCase()+"</span> <span>removes </span> "+t+"<span> from</span> <span>"+this.countries[e].name),this.showInfluence(e,a,r)}},{key:"placeInfluence",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;"us"==a?this.countries[e].us=parseInt(this.countries[e].us)+parseInt(t):this.countries[e].ussr=parseInt(this.countries[e].ussr)+parseInt(t),this.updateLog(a.toUpperCase()+"</span> <span>places</span> "+t+" <span>in</span> <span>"+this.countries[e].name,this.log_length,1),this.showInfluence(e,a,r)}},{key:"showInfluence",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="#"+e+" > .us",n="#"+e+" > .ussr",i=parseInt(this.countries[e].us),s=parseInt(this.countries[e].ussr),o=0;if("us"==t){var c=i-s;c>0&&c>=this.countries[e].control&&(o=1)}else{var l=s-i;l>0&&l>=this.countries[e].control&&(o=1)}"us"==t?0==this.isControlled("ussr",e)?this.countries[e].ussr>0&&$(n).html('<div class="ussr_uncontrol">'+s+"</div>"):1==this.isControlled("us",e)&&$(r).html('<div class="us_control">'+i+"</div>"):0==this.isControlled("us",e)?this.countries[e].us>0&&$(r).html('<div class="us_uncontrol">'+i+"</div>"):1==this.isControlled("ussr",e)&&$(n).html('<div class="ussr_control">'+s+"</div>"),1==o?"us"==t?$(r).html('<div class="us_control">'+i+"</div>"):$(n).html('<div class="ussr_control">'+s+"</div>"):"us"==t?0==i?$(r).html(""):$(r).html('<div class="us_uncontrol">'+i+"</div>"):0==s?$(n).html(""):$(n).html('<div class="ussr_uncontrol">'+s+"</div>"),$(".us_control").css("height",this.scale(100)+"px"),$(".us_uncontrol").css("height",this.scale(100)+"px"),$(".ussr_control").css("height",this.scale(100)+"px"),$(".ussr_uncontrol").css("height",this.scale(100)+"px"),$(".us_control").css("font-size",this.scale(100)+"px"),$(".us_uncontrol").css("font-size",this.scale(100)+"px"),$(".ussr_control").css("font-size",this.scale(100)+"px"),$(".ussr_uncontrol").css("font-size",this.scale(100)+"px"),$(".country").css("width",this.scale(202)+"px"),$(".us").css("width",this.scale(100)+"px"),$(".ussr").css("width",this.scale(100)+"px"),$(".us").css("height",this.scale(100)+"px"),$(".ussr").css("height",this.scale(100)+"px"),this.game.countries=this.countries,null!=a&&a(e,t)}},{key:"playerRealign",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.playerFinishedPlacingInfluence();var r=this,n=0;for(var i in this.countries){var s=i;n=1,r.game.state.limit_region.indexOf(r.countries[s].region)>-1&&(n=0),0==r.game.state.limit_ignoredefcon&&("europe"==r.countries[s].region&&r.game.state.defcon<5&&(n=0),"asia"==r.countries[s].region&&r.game.state.defcon<4&&(n=0),"seasia"==r.countries[s].region&&r.game.state.defcon<4&&(n=0),"mideast"==r.countries[s].region&&r.game.state.defcon<3&&(n=0)),1==r.game.state.events.inftreaty&&(n=1),1==r.game.player?r.countries[s].us<1&&(n=0):r.countries[s].ussr<1&&(n=0);var o="#"+i;1==n?($(o).off(),$(o).on("click",(function(){var t=$(this).attr("id");1!=r.game.state.events.usjapan||"japan"!=t||"ussr"!=e?1!=r.game.state.events.nato||"europe"!=r.countries[t].region||"ussr"!=e||1!=r.isControlled("us",t)||"westgermany"==t&&0==r.game.state.events.nato_westgermany||"france"==t&&0==r.game.state.events.nato_france?("seasia"!==r.countries[t].region&&(r.game.state.events.vietnam_revolts_eligible=0),"seasia"!==r.countries[t].region&&"asia"!==r.countries[t].region&&(r.game.state.events.china_card_eligible=0),r.playRealign(t),r.addMove("realign\t"+e+"\t"+t),a()):r.displayModal("Invalid Realignment","Nato prevents realignments in US Controlled countries in Europe"):r.displayModal("Invalid Realignment","US / Japan Alliance prevents realignments in Japan")}))):($(o).off(),$(o).on("click",(function(){r.displayModal("Invalid Target")})))}}},{key:"playerPlaceInfluence",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.startClock(),this.playerFinishedPlacingInfluence();var a=this,r=0,n=0;for(var i in this.countries){var s="#"+i,o=0;1==this.game.player&&""!=this.game.state.events.chernobyl&&this.countries[i].region==this.game.state.events.chernobyl&&(o=1,"asia"==this.game.state.events.chernobyl&&"seasia"==this.countries[i].region&&(o=1)),this.game.state.limit_region.indexOf(this.countries[i].region)>-1&&(o=1),1==o?($(s).off(),$(s).on("click",(function(){a.displayModal("Invalid Target")}))):"us"==e?($(s).off(),$(s).on("mousedown",(function(e){r=e.clientX,n=e.clientY})),$(s).on("mouseup",(function(e){if(!(Math.abs(r-e.clientX)>4||Math.abs(n-e.clientY)>4)){var i=$(this).attr("id");1==a.countries[i].place?(a.game.state.events.vietnam_revolts_eligible=0,a.countries[i].region.indexOf("asia")<0&&(a.game.state.events.china_card_eligible=0),1==a.isControlled("ussr",i)&&(a.game.break_control=1),2==a.game.state.events.cubanmissilecrisis&&("turkey"!==i&&"westgermany"!==i||a.countries[i].us>=1&&1==a.app.BROWSER&&confirm("You are placing 1 influence in "+a.countries[i].name+". Once this is done, do you want to cancel the Cuban Missile Crisis by removing 2 influence in "+a.countries[i].name+"?")&&("turkey"===i&&(a.removeInfluence("turkey",2,"us"),a.addMove("remove\tus\tus\tturkey\t2"),a.addMove("unlimit\tcmc"),a.addMove("notify\tUS has cancelled the Cuban Missile Crisis")),"westgermany"===i&&(a.removeInfluence("westgermany",2,"us"),a.addMove("remove\tus\tus\twestgermany\t2"),a.addMove("unlimit\tcmc"),a.addMove("notify\tUS has cancelled the Cuban Missile Crisis")),a.game.state.events.cubanmissilecrisis=0)),a.addMove("place\tus\tus\t"+i+"\t1"),a.placeInfluence(i,1,"us",t)):a.displayModal("you cannot place there...")}}))):($(s).off(),$(s).on("mousedown",(function(e){r=e.clientX,n=e.clientY})),$(s).on("mouseup",(function(e){if(!(Math.abs(r-e.clientX)>4||Math.abs(n-e.clientY)>4)){var i=$(this).attr("id");1==a.countries[i].place?("seasia"!==a.countries[i].region&&(a.game.state.events.vietnam_revolts_eligible=0),a.countries[i].region.indexOf("asia")<0&&(a.game.state.events.china_card_eligible=0),1==a.isControlled("us",i)&&(a.game.break_control=1),1==a.game.state.events.cubanmissilecrisis&&"cuba"===i&&a.countries[i].ussr>=1&&1==a.app.BROWSER&&confirm("You are placing 1 influence in "+a.countries[i].name+". Once this is done, do you want to cancel the Cuban Missile Crisis by removing 2 influence in "+a.countries[i].name+"?")&&("cuba"===i&&(a.removeInfluence("cuba",2,"ussr"),a.addMove("remove\tussr\tussr\tcuba\t2"),a.addMove("unlimit\tcmc"),a.addMove("notify\tUSSR has cancelled the Cuban Missile Crisis")),a.game.state.events.cubanmissilecrisis=0),a.addMove("place\tussr\tussr\t"+i+"\t1"),a.placeInfluence(i,1,"ussr",t)):a.displayModal("Invalid Target")}})))}}},{key:"playerFinishedPlacingInfluence",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;for(var a in this.countries){var r="#"+a;$(r).off()}null!=t&&t()}},{key:"playerSpaceCard",value:function(e,t){var a=this.game.deck[0].cards[e].ops;"us"==t&&(this.game.state.stats.us_ops_spaced+=this.modifyOps(a,e,t)),"ussr"==t&&(this.game.state.stats.ussr_ops_spaced+=this.modifyOps(a,e,t)),"ussr"==t?this.game.state.space_race_ussr_counter++:this.game.state.space_race_us_counter++;var r=this.rollDice(6),n=0,i=1;"ussr"==t&&(i=this.game.state.space_race_ussr+1),"us"==t&&(i=this.game.state.space_race_us+1),1==i&&r<4&&(n=1),2==i&&r<5&&(n=1),3==i&&r<4&&(n=1),4==i&&r<5&&(n=1),5==i&&r<4&&(n=1),6==i&&r<5&&(n=1),7==i&&r<4&&(n=1),8==i&&r<3&&(n=1),this.updateLog("<span>"+t.toUpperCase()+"</span> <span>attempts space race (rolls</span> "+r+")"),1==n?(this.updateLog("<span>"+t.toUpperCase()+"</span> <span>advances in the Space Race</span>"),this.advanceSpaceRace(t)):this.updateLog("<span>"+t.toUpperCase()+"</span> <span>fails in the Space Race</span>")}},{key:"playerCoupCountry",value:function(e,t,a){var r=this;for(var n in this.countries){var i="#"+n;$(i).off(),$(i).on("click",(function(){var n=0,i=$(this).attr("id");2==r.game.state.defcon&&1==r.game.countries[i].bg&&!confirm("Are you sure you wish to coup a Battleground State? (DEFCON is 2)")||(2==r.game.state.events.cubanmissilecrisis&&"us"==e||1==r.game.state.events.cubanmissilecrisis&&"ussr"==e)&&!confirm("Are you sure you wish to coup during the Cuban Missile Crisis?")?r.playOps(e,t,a):("us"==e?r.countries[i].ussr<=0?r.displayModal("Cannot Coup"):n=1:r.countries[i].us<=0?r.displayModal("Cannot Coup"):n=1,1==r.game.state.events.usjapan&&"japan"==i&&(r.displayModal("US / Japan Alliance prevents coups in Japan"),n=0),0==r.game.state.limit_ignoredefcon&&(r.game.state.limit_region.indexOf(r.countries[i].region)>-1&&(r.displayModal("Invalid Region for this Coup"),n=0),"europe"==r.countries[i].region&&r.game.state.defcon<5&&(r.displayModal("DEFCON prevents coups in Europe"),n=0),"asia"==r.countries[i].region&&r.game.state.defcon<4&&(r.displayModal("DEFCON prevents coups in Asia"),n=0),"seasia"==r.countries[i].region&&r.game.state.defcon<4&&(r.displayModal("DEFCON prevents coups in Asia"),n=0),"mideast"==r.countries[i].region&&r.game.state.defcon<3&&(r.displayModal("DEFCON prevents coups in the Middle-East"),n=0)),1==n&&"europe"==r.countries[i].region&&1==r.game.state.events.nato&&"ussr"==e&&1==r.isControlled("us",i)&&("westgermany"==i&&0==r.game.state.events.nato_westgermany||"france"==i&&0==r.game.state.events.nato_france||(r.displayModal("NATO prevents coups of US-controlled countries in Europe"),n=0)),1==n&&"europe"==r.countries[i].region&&1==r.game.state.events.reformer&&"ussr"==e&&(r.displayModal("The Reformer prevents USSR coup attempts in Europe"),n=0),1==n&&("china"!=a||"asia"!=r.game.countries[i].region&&"seasia"!=r.game.countries[i].region||(r.updateLog("China bonus OP added to Asia coup..."),t++),"ussr"==e&&1==r.game.state.events.vietnam_revolts&&"seasia"==r.game.countries[i].region&&(1==r.returnOpsOfCard(a)&&r.game.state.events.redscare_player1>=1?r.updateLog("Vietnam Revolts bonus OP removed by Red Purge"):(r.updateLog("Vietnam Revolts bonus OP added to Southeast Asia coup..."),t++)),r.displayModal("Coup Launched","Coup launched in ".concat(r.game.countries[i].name)),r.addMove("coup\t"+e+"\t"+i+"\t"+t+"\t"+a),r.endTurn()))}))}}},{key:"playCoup",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.rollDice(6),i=0;if(this.updateLog("COUP: ".concat(e.toUpperCase()," rolls ").concat(n)),"us"==e&&this.game.state.stats.us_coups.push(n),"ussr"==e&&this.game.state.stats.ussr_coups.push(n),1==this.game.state.events.yuri&&"us"==e&&(this.game.state.vp-=1,this.updateVictoryPoints(),this.updateLog("USSR gains 1 VP from Yuri and Samantha")),1==this.game.state.events.saltnegotiations&&(this.updateLog("Salt Negotiations -1 modifier on coups"),i--),0!=this.game.state.events.deathsquads){if(this.game.state.events.deathsquads<=-1){var s=-1*this.game.state.events.deathsquads;"camerica"!=this.countries[t].region&&"samerica"!=this.countries[t].region||("ussr"==e&&(this.updateLog("Latin American Death Squads triggers: USSR "+s+" modifier"),i+=s),"us"==e&&("camerica"!=this.countries[t].region&&"samerica"!=this.countries[t].region||(this.updateLog("Latin American Death Squads triggers: US -"+s+" modifier"),i-=s)))}if(this.game.state.events.deathsquads>=1){var o=this.game.state.events.deathsquads;"camerica"!=this.countries[t].region&&"samerica"!=this.countries[t].region||("ussr"==e&&(this.updateLog("Latin American Death Squads triggers: USSR -"+o+" modifier"),i-=o),"us"==e&&(this.updateLog("Latin American Death Squads triggers: US "+o+" modifier"),i+=o))}}1==this.game.state.events.inftreaty&&(this.updateLog("INF Treaty -1 modifier on coups"),i--),("ussr"==e&&1==this.game.state.events.cubanmissilecrisis||"us"==e&&2==this.game.state.events.cubanmissilecrisis)&&(this.game.state.events.cubanmissilecrisis=0);var c=this.countries[t].control;0!=i&&(n+=i,this.updateLog("COUP: ".concat(e.toUpperCase()," modified roll: ").concat(n)));var l=parseInt(n)+parseInt(a)-parseInt(2*c);if("ussr"!=e||1!=this.game.state.events.cubanmissilecrisis)if("us"!=e||2!=this.game.state.events.cubanmissilecrisis){if(1==this.countries[t].bg&&("us"==e&&1==this.game.state.events.nuclearsubs||1==this.game.state.lower_defcon_on_coup&&this.lowerDefcon()),l>0)for(1==this.browser_active&&this.displayModal("COUP SUCCEEDED: ".concat(e.toUpperCase()," rolls ").concat(n," (").concat(this.game.countries[t].name,")")),this.updateLog(e.toUpperCase()+" <span>rolls</span> "+n);l>0;)"us"==e&&(this.countries[t].ussr>0?this.removeInfluence(t,1,"ussr"):this.placeInfluence(t,1,"us")),"ussr"==e&&(this.countries[t].us>0?this.removeInfluence(t,1,"us"):this.placeInfluence(t,1,"ussr")),l--;else 1==this.browser_active&&this.updateLog(e.toUpperCase()+"</span> <span>rolls</span> "+n+" <span>(no change)");this.showInfluence(t,e),null!=r&&r()}else this.endGame("ussr","Cuban Missile Crisis");else this.endGame("us","Cuban Missile Crisis")}},{key:"playRealign",value:function(e){for(var t=0;0==t;){var a=0,r=0;this.countries[e].us>this.countries[e].ussr&&a++,this.countries[e].ussr>this.countries[e].us&&r++;for(var n=0;n<this.countries[e].neighbours.length;n++){var i=this.countries[e].neighbours[n];1==this.isControlled("us",i)&&a++,1==this.isControlled("ussr",i)&&r++}"mexico"===e&&a++,"cuba"===e&&a++,"japan"===e&&a++,"canada"===e&&a++,"finland"===e&&r++,"romania"===e&&r++,"afghanistan"===e&&r++,"northkorea"===e&&r++,1==this.game.state.events.irancontra&&(this.updateLog("Iran-Contra Scandal -1 modification on US roll"),a--);var s=this.rollDice(6),o=this.rollDice(6);if(this.updateLog("<span>US bonus</span> "+a+" <span>vs. USSR bonus</span> "+r),this.updateLog("<span>US roll</span> "+s+" <span>vs. USSR roll</span> "+o),(s+=a)>(o+=r)){t=1;var c=s-o;this.countries[e].ussr>0&&(this.countries[e].ussr<c&&(c=this.countries[e].ussr),this.removeInfluence(e,c,"ussr"))}if(s<o){t=1;var l=o-s;this.countries[e].us>0&&(this.countries[e].us<l&&(l=this.countries[e].us),this.removeInfluence(e,l,"us"))}s===o&&(t=1)}this.showInfluence(e,"us"),this.showInfluence(e,"ussr")}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"removeMove",value:function(){return this.moves.pop()}},{key:"endTurn",value:function(){this.updateEventTiles(),this.updateStatus("<div class='status-message' id='status-message'>Waiting for information from peers....</div>");try{$(".card").off(),$(".country").off()}catch(e){}1==this.game.state.events.wwby_triggers&&(this.addMove("notify\tWe Will Bury You triggers +3 VP for USSR"),this.addMove("vp\tussr\t3"),this.game.state.events.wwby_triggers=0);for(var e=this.game.deck[0].hand.length,t=0;t<this.game.deck[0].hand.length;t++)"china"==this.game.deck[0].hand[t]&&e--;var a={};this.addMove("setvar\t"+this.game.player+"\topponent_cards_in_hand\t"+e),this.game.turn=this.moves,this.moves=[],this.sendMessage("game",a)}},{key:"undoMove",value:function(e,t){switch(e){case"place":for(var a=0;a<t;a++){var r=this.removeMove(),n=(r=r.split("\t"))[2],i=r[3],s=r[4],o="us";"us"==n&&(o="ussr"),this.removeInfluence(i,s,n),1==this.isControlled(o,i)&&a++}return this.removeMove(),1}}},{key:"endGame",value:function(e,t){if(this.game.over=1,"us"==e&&(this.game.winner=2),"ussr"==e&&(this.game.winner=1),"tie game"==e)return this.game.winner=0,this.game.over=1,void this.tieGame(this.game.id);this.game.winner!=this.game.player&&(this.game.over=0,this.resignGame(this.game.id)),1==this.browser_active&&(this.displayModal("<span>The Game is Over</span> - <span>"+e.toUpperCase()+"</span> <span>wins by</span> <span>"+t+"<span>"),this.updateStatus("<div class='status-message' id='status-message'><span>The Game is Over</span> - <span>"+e.toUpperCase()+"</span> <span>wins by</span> <span>"+t+"<span></div>"))}},{key:"displayBoard",value:function(){this.updateDefcon(),this.updateActionRound(),this.updateSpaceRace(),this.updateVictoryPoints(),this.updateMilitaryOperations(),this.updateRound()}},{key:"endRound",value:function(){if(this.game.state.round++,this.game.state.turn=0,this.game.state.turn_in_round=0,this.game.state.move=0,this.game.state.round>1)for(var e=0;e<this.game.deck[0].hand.length;e++)if("china"!=this.game.deck[0].hand[e])try{if(1==this.game.deck[0].cards[this.game.deck[0].hand[e]].scoring){var t="ussr";1==this.game.player&&(t="us",this.game.winner=2),this.endGame(t,"opponent held scoring card")}}catch(e){}if(this.game.state.round>1){this.game.state.defcon;var a=this.game.state.defcon-this.game.state.milops_ussr,r=this.game.state.defcon-this.game.state.milops_us;a>0&&(this.game.state.vp+=a,this.updateLog("<span>USSR penalized</span> "+a+" <span>VP (milops)</span>")),r>0&&(this.game.state.vp-=r,this.updateLog("<span>US penalized</span> "+r+" <span>VP (milops)</span>"))}if(this.game.state.us_defcon_bonus=0,this.game.state.milops_us=0,this.game.state.milops_ussr=0,this.game.state.space_race_us_counter=0,this.game.state.space_race_ussr_counter=0,this.game.state.eagle_has_landed_bonus_taken=0,this.game.state.space_shuttle_bonus_taken=0,this.game.state.ironlady_before_ops=0,this.game.state.events.wwby_triggers=0,this.game.state.events.region_bonus="",this.game.state.events.u2=0,this.game.state.events.containment=0,this.game.state.events.brezhnev=0,this.game.state.events.redscare_player1=0,this.game.state.events.redscare_player2=0,this.game.state.events.vietnam_revolts=0,this.game.state.events.vietnam_revolts_eligible=0,this.game.state.events.deathsquads=0,this.game.state.events.missileenvy=0,this.game.state.events.cubanmissilecrisis=0,this.game.state.events.nuclearsubs=0,this.game.state.events.saltnegotiations=0,this.game.state.events.northseaoil_bonus=0,this.game.state.events.yuri=0,this.game.state.events.irancontra=0,this.game.state.events.chernobyl="",this.game.state.events.aldrich=0,this.game.state.defcon++,this.game.state.defcon>5&&(this.game.state.defcon=5),this.game.state.ussr_milops=0,this.game.state.us_milops=0,this.updateDefcon(),this.updateActionRound(),this.updateSpaceRace(),this.updateVictoryPoints(),this.updateMilitaryOperations(),this.updateRound(),0!=this.game.player){for(var n=0,i=0;i<this.game.deck[0].hand.length;i++)"china"==this.game.deck[0].hand[i]&&(n=1);0==n&&(1==this.game.player&&1==this.game.state.events.china_card&&(this.game.deck[0].hand.includes("china")||this.game.deck[0].hand.push("china")),2==this.game.player&&2==this.game.state.events.china_card&&(this.game.deck[0].hand.includes("china")||this.game.deck[0].hand.push("china")))}this.game.state.events.china_card=0,this.game.state.events.china_card_eligible=0}},{key:"whoHasTheChinaCard",value:function(){if(0==this.game.player)return"ussr";for(var e=0,t=0;t<this.game.deck[0].hand.length;t++)"china"==this.game.deck[0].hand[t]&&(e=1);if(0==e){if(1==this.game.player)return 1==this.game.state.events.china_card?this.game.deck[0].hand.includes("china")?"ussr":"us":1==e?"ussr":"us";if(2==this.game.player)return 2==this.game.state.events.china_card?this.game.deck[0].hand.includes("china")?"us":"ussr":1==e?"us":"ussr"}else{if(1==this.game.player)return"ussr";if(2==this.game.player)return"us"}}},{key:"returnState",value:function(){var e={dealt:0,back_button_cancelled:0,defectors_pulled_in_headline:0,placement:0,headline:0,headline_hash:"",headline_card:"",headline_xor:"",headline_opponent_hash:"",headline_opponent_card:"",headline_opponent_xor:"",round:0,turn:0,turn_in_round:0,broke_control:0,us_efcon_bonus:0,opponent_cards_in_hand:0,event_before_ops:0,event_name:"",player_to_go:1,lower_defcon_on_coup:1,vp_outstanding:0,space_race_us:0,space_race_ussr:0,animal_in_space:"",man_in_earth_orbit:"",eagle_has_landed:"",eagle_has_landed_bonus_taken:0,space_shuttle:"",space_shuttle_bonus_taken:0,space_race_us_counter:0,space_race_ussr_counter:0,limit_coups:0,limit_realignments:0,limit_placement:0,limit_spacerace:0,limit_region:"",limit_ignoredefcon:0,vp:0,ar_ps:[]};return e.ar_ps[0]={top:208,left:920},e.ar_ps[1]={top:208,left:1040},e.ar_ps[2]={top:208,left:1155},e.ar_ps[3]={top:208,left:1270},e.ar_ps[4]={top:208,left:1390},e.ar_ps[5]={top:208,left:1505},e.ar_ps[6]={top:208,left:1625},e.ar_ps[7]={top:208,left:1740},e.vp_ps=[],e.vp_ps[0]={top:2460,left:3040},e.vp_ps[1]={top:2460,left:3300},e.vp_ps[2]={top:2460,left:3435},e.vp_ps[3]={top:2460,left:3570},e.vp_ps[4]={top:2460,left:3705},e.vp_ps[5]={top:2460,left:3840},e.vp_ps[6]={top:2460,left:3975},e.vp_ps[7]={top:2460,left:4110},e.vp_ps[8]={top:2600,left:3035},e.vp_ps[9]={top:2600,left:3170},e.vp_ps[10]={top:2600,left:3305},e.vp_ps[11]={top:2600,left:3435},e.vp_ps[12]={top:2600,left:3570},e.vp_ps[13]={top:2600,left:3705},e.vp_ps[14]={top:2600,left:3840},e.vp_ps[15]={top:2600,left:3975},e.vp_ps[16]={top:2600,left:4110},e.vp_ps[17]={top:2740,left:3035},e.vp_ps[18]={top:2740,left:3170},e.vp_ps[19]={top:2740,left:3305},e.vp_ps[20]={top:2740,left:3570},e.vp_ps[21]={top:2740,left:3840},e.vp_ps[22]={top:2740,left:3975},e.vp_ps[23]={top:2740,left:4110},e.vp_ps[24]={top:2880,left:3035},e.vp_ps[25]={top:2880,left:3170},e.vp_ps[26]={top:2880,left:3305},e.vp_ps[27]={top:2880,left:3435},e.vp_ps[28]={top:2880,left:3570},e.vp_ps[29]={top:2880,left:3705},e.vp_ps[30]={top:2880,left:3840},e.vp_ps[31]={top:2880,left:3975},e.vp_ps[32]={top:2880,left:4110},e.vp_ps[33]={top:3025,left:3035},e.vp_ps[34]={top:3025,left:3170},e.vp_ps[35]={top:3025,left:3305},e.vp_ps[36]={top:3025,left:3435},e.vp_ps[37]={top:3025,left:3570},e.vp_ps[38]={top:3025,left:3705},e.vp_ps[39]={top:3025,left:3840},e.vp_ps[40]={top:3025,left:3975},e.space_race_ps=[],e.space_race_ps[0]={top:510,left:3465},e.space_race_ps[1]={top:510,left:3638},e.space_race_ps[2]={top:510,left:3810},e.space_race_ps[3]={top:510,left:3980},e.space_race_ps[4]={top:510,left:4150},e.space_race_ps[5]={top:510,left:4320},e.space_race_ps[6]={top:510,left:4490},e.space_race_ps[7]={top:510,left:4660},e.space_race_ps[8]={top:510,left:4830},e.milops_us=0,e.milops_ussr=0,e.milops_ps=[],e.milops_ps[0]={top:2940,left:1520},e.milops_ps[1]={top:2940,left:1675},e.milops_ps[2]={top:2940,left:1830},e.milops_ps[3]={top:2940,left:1985},e.milops_ps[4]={top:2940,left:2150},e.milops_ps[5]={top:2940,left:2305},e.defcon=5,e.defcon_ps=[],e.defcon_ps[0]={top:2585,left:1520},e.defcon_ps[1]={top:2585,left:1675},e.defcon_ps[2]={top:2585,left:1830},e.defcon_ps[3]={top:2585,left:1985},e.defcon_ps[4]={top:2585,left:2140},e.round_ps=[],e.round_ps[0]={top:150,left:3473},e.round_ps[1]={top:150,left:3627},e.round_ps[2]={top:150,left:3781},e.round_ps[3]={top:150,left:3935},e.round_ps[4]={top:150,left:4098},e.round_ps[5]={top:150,left:4252},e.round_ps[6]={top:150,left:4405},e.round_ps[7]={top:150,left:4560},e.round_ps[8]={top:150,left:4714},e.round_ps[9]={top:150,left:4868},e.stats={},e.stats.us_scorings=0,e.stats.ussr_scorings=0,e.stats.us_ops=0,e.stats.ussr_ops=0,e.stats.us_us_ops=0,e.stats.ussr_us_ops=0,e.stats.us_ussr_ops=0,e.stats.ussr_ussr_ops=0,e.stats.us_neutral_ops=0,e.stats.ussr_neutral_ops=0,e.stats.us_ops_spaced=0,e.stats.ussr_ops_spaced=0,e.stats.us_coups=[],e.stats.ussr_coups=[],e.stats.round=[],e.events={},e.events.optional={},e.events.formosan=0,e.events.redscare_player1=0,e.events.redscare_player2=0,e.events.containment=0,e.events.degaulle=0,e.events.nato=0,e.events.nato_westgermany=0,e.events.nato_france=0,e.events.marshall=0,e.events.warsawpact=0,e.events.unintervention=0,e.events.usjapan=0,e.events.norad=0,e.events.vietnam_revolts=0,e.events.vietnam_revolts_eligible=0,e.events.china_card=0,e.events.china_card_facedown=0,e.events.china_card_in_play=0,e.events.china_card_eligible=0,e.events.northseaoil=0,e.events.johnpaul=0,e.events.ourmanintehran=0,e.events.kitchendebates=0,e.events.brezhnev=0,e.events.wwby=0,e.events.wwby_triggers=0,e.events.willybrandt=0,e.events.shuttlediplomacy=0,e.events.deathsquads=0,e.events.campdavid=0,e.events.cubanmissilecrisis=0,e.events.saltnegotiations=0,e.events.missileenvy=0,e.events.missile_envy=0,e.events.flowerpower=0,e.events.beartrap=0,e.events.quagmire=0,e.events.awacs=0,e.events.starwars=0,e.events.teardown=0,e.events.iranianhostage=0,e.events.ironlady=0,e.events.reformer=0,e.events.northseaoil=0,e.events.northseaoil_bonus=0,e.events.evilempire=0,e.events.yuri=0,e.events.aldrich=0,e.wargames_concession=6,e.events.inftreaty=0,e.events.communi=0,e}},{key:"returnCountries",value:function(){var e={canada:{top:752,left:842,us:2,ussr:0,control:4,bg:0,neighbours:["uk"],region:"europe",name:"Canada"},uk:{top:572,left:1690,us:5,ussr:0,control:5,bg:0,neighbours:["canada","norway","benelux","france"],region:"europe",name:"UK"},benelux:{top:728,left:1860,us:0,ussr:0,control:3,bg:0,neighbours:["uk","westgermany"],region:"europe",name:"Benelux"},france:{top:906,left:1820,us:0,ussr:0,control:3,bg:1,neighbours:["algeria","uk","italy","spain","westgermany"],region:"europe",name:"France"},italy:{top:1036,left:2114,us:0,ussr:0,control:2,bg:1,neighbours:["spain","france","greece","austria","yugoslavia"],region:"europe",name:"Italy"},westgermany:{top:728,left:2078,us:0,ussr:0,control:4,bg:1,neighbours:["austria","france","benelux","denmark","eastgermany"],region:"europe",name:"West Germany"},eastgermany:{top:580,left:2156,us:0,ussr:3,control:3,bg:1,neighbours:["westgermany","poland","austria","czechoslovakia"],region:"europe",name:"East Germany"},poland:{top:580,left:2386,us:0,ussr:0,control:3,bg:1,neighbours:["eastgermany","czechoslovakia"],region:"europe",name:"Poland"},spain:{top:1118,left:1660,us:0,ussr:0,control:2,bg:0,neighbours:["morocco","france","italy"],region:"europe",name:"Spain"},greece:{top:1200,left:2392,us:0,ussr:0,control:2,bg:0,neighbours:["italy","turkey","yugoslavia","bulgaria"],region:"europe",name:"Greece"},turkey:{top:1056,left:2788,us:0,ussr:0,control:2,bg:0,neighbours:["syria","greece","romania","bulgaria"],region:"europe",name:"Turkey"},yugoslavia:{top:1038,left:2342,us:0,ussr:0,control:3,bg:0,neighbours:["italy","hungary","romania","greece"],region:"europe",name:"Yugoslavia"},bulgaria:{top:1038,left:2570,us:0,ussr:0,control:3,bg:0,neighbours:["greece","turkey"],region:"europe",name:"Bulgaria"},romania:{top:880,left:2614,us:0,ussr:0,control:3,bg:0,neighbours:["turkey","hungary","yugoslavia"],region:"europe",name:"Romania"},hungary:{top:880,left:2394,us:0,ussr:0,control:3,bg:0,neighbours:["austria","czechoslovakia","romania","yugoslavia"],region:"europe",name:"Hungary"},austria:{top:880,left:2172,us:0,ussr:0,control:4,bg:0,neighbours:["hungary","italy","westgermany","eastgermany"],region:"europe",name:"Austria"},czechoslovakia:{top:728,left:2346,us:0,ussr:0,control:3,bg:0,neighbours:["hungary","poland","eastgermany"],region:"europe",name:"Czechoslovakia"},denmark:{top:432,left:1982,us:0,ussr:0,control:3,bg:0,neighbours:["sweden","westgermany"],region:"europe",name:"Denmark"},norway:{top:278,left:1932,us:0,ussr:0,control:4,bg:0,neighbours:["uk","sweden"],region:"europe",name:"Norway"},finland:{top:286,left:2522,us:0,ussr:1,control:4,bg:0,neighbours:["sweden"],region:"europe",name:"Finland"},sweden:{top:410,left:2234,us:0,ussr:0,control:4,bg:0,neighbours:["finland","denmark","norway"],region:"europe",name:"Sweden"},libya:{top:1490,left:2290,us:0,ussr:0,control:2,bg:1,neighbours:["egypt","tunisia"],region:"mideast",name:"Libya"},egypt:{top:1510,left:2520,us:0,ussr:0,control:2,bg:1,neighbours:["libya","sudan","israel"],region:"mideast",name:"Egypt"},lebanon:{top:1205,left:2660,us:0,ussr:0,control:1,bg:0,neighbours:["syria","jordan","israel"],region:"mideast",name:"Lebanon"},syria:{top:1205,left:2870,us:0,ussr:1,control:2,bg:0,neighbours:["lebanon","turkey","israel"],region:"mideast",name:"Syria"},israel:{top:1350,left:2620,us:1,ussr:0,control:4,bg:1,neighbours:["egypt","jordan","lebanon","syria"],region:"mideast",name:"Israel"},iraq:{top:1350,left:2870,us:0,ussr:1,control:3,bg:1,neighbours:["jordan","iran","gulfstates","saudiarabia"],region:"mideast",name:"Iraq"},iran:{top:1350,left:3082,us:1,ussr:0,control:2,bg:1,neighbours:["iraq","afghanistan","pakistan"],region:"mideast",name:"Iran"},jordan:{top:1500,left:2760,us:0,ussr:0,control:2,bg:0,neighbours:["israel","lebanon","iraq","saudiarabia"],region:"mideast",name:"Jordan"},gulfstates:{top:1500,left:3010,us:0,ussr:0,control:3,bg:0,neighbours:["iraq","saudiarabia"],region:"mideast",name:"Gulf States"},saudiarabia:{top:1650,left:2950,us:0,ussr:0,control:3,bg:1,neighbours:["jordan","iraq","gulfstates"],region:"mideast",name:"Saudi Arabia"},afghanistan:{top:1250,left:3345,us:0,ussr:0,control:2,bg:0,neighbours:["iran","pakistan"],region:"asia",name:"Afghanistan"},pakistan:{top:1450,left:3345,us:0,ussr:0,control:2,bg:1,neighbours:["iran","afghanistan","india"],region:"asia",name:"Pakistan"},india:{top:1552,left:3585,us:0,ussr:0,control:3,bg:1,neighbours:["pakistan","burma"],region:"asia",name:"India"},burma:{top:1580,left:3855,us:0,ussr:0,control:2,bg:0,neighbours:["india","laos"],region:"seasia",name:"Burma"},laos:{top:1600,left:4070,us:0,ussr:0,control:1,bg:0,neighbours:["burma","thailand","vietnam"],region:"seasia",name:"Laos"},thailand:{top:1769,left:3980,us:0,ussr:0,control:2,bg:1,neighbours:["laos","vietnam","malaysia"],region:"seasia",name:"Thailand"},vietnam:{top:1760,left:4200,us:0,ussr:0,control:1,bg:0,neighbours:["laos","thailand"],region:"seasia",name:"Vietnam"},malaysia:{top:1990,left:4080,us:0,ussr:0,control:2,bg:0,neighbours:["thailand","australia","indonesia"],region:"seasia",name:"Malaysia"},australia:{top:2442,left:4450,us:4,ussr:0,control:4,bg:0,neighbours:["malaysia"],region:"asia",name:"Australia"},indonesia:{top:2176,left:4450,us:0,ussr:0,control:1,bg:0,neighbours:["malaysia","philippines"],region:"seasia",name:"Indonesia"},philippines:{top:1755,left:4530,us:1,ussr:0,control:2,bg:0,neighbours:["indonesia","japan"],region:"seasia",name:"Philippines"},taiwan:{top:1525,left:4435,us:0,ussr:0,control:3,bg:0,neighbours:["japan","southkorea"],region:"asia",name:"Taiwan"},japan:{top:1348,left:4705,us:1,ussr:0,control:4,bg:1,neighbours:["philippines","taiwan","southkorea"],region:"asia",name:"Japan"},southkorea:{top:1200,left:4530,us:1,ussr:0,control:3,bg:1,neighbours:["japan","taiwan","northkorea"],region:"asia",name:"South Korea"},northkorea:{top:1050,left:4480,us:0,ussr:3,control:3,bg:1,neighbours:["southkorea"],region:"asia",name:"North Korea"},mexico:{top:1370,left:175,us:0,ussr:0,control:2,bg:1,neighbours:["guatemala"],region:"camerica",name:"Mexico"},guatemala:{top:1526,left:360,us:0,ussr:0,control:1,bg:0,neighbours:["mexico","elsalvador","honduras"],region:"camerica",name:"Guatemala"},elsalvador:{top:1690,left:295,us:0,ussr:0,control:1,bg:0,neighbours:["honduras","guatemala"],region:"camerica",name:"El Salvador"},honduras:{top:1675,left:515,us:0,ussr:0,control:2,bg:0,neighbours:["nicaragua","costarica","guatemala","elsalvador"],region:"camerica",name:"Honduras"},nicaragua:{top:1675,left:735,us:0,ussr:0,control:1,bg:0,neighbours:["costarica","honduras","cuba"],region:"camerica",name:"Nicaragua"},costarica:{top:1830,left:495,us:0,ussr:0,control:3,bg:0,neighbours:["honduras","panama","nicaragua"],region:"camerica",name:"Costa Rica"},panama:{top:1830,left:738,us:1,ussr:0,control:2,bg:1,neighbours:["colombia","costarica"],region:"camerica",name:"Panama"},cuba:{top:1480,left:750,us:0,ussr:0,control:3,bg:1,neighbours:["haiti","nicaragua"],region:"camerica",name:"Cuba"},haiti:{top:1620,left:970,us:0,ussr:0,control:1,bg:0,neighbours:["cuba","dominicanrepublic"],region:"camerica",name:"Haiti"},dominicanrepublic:{top:1620,left:1180,us:0,ussr:0,control:1,bg:0,neighbours:["haiti"],region:"camerica",name:"Dominican Republic"},venezuela:{top:1850,left:1e3,us:0,ussr:0,control:2,bg:1,neighbours:["colombia","brazil"],region:"samerica",name:"Venezuela"},colombia:{top:2010,left:878,us:0,ussr:0,control:1,bg:0,neighbours:["panama","venezuela","ecuador"],region:"samerica",name:"Colombia"},ecuador:{top:2075,left:650,us:0,ussr:0,control:2,bg:0,neighbours:["peru","colombia"],region:"samerica",name:"Ecuador"},peru:{top:2244,left:780,us:0,ussr:0,control:2,bg:0,neighbours:["ecuador","chile","bolivia"],region:"samerica",name:"Peru"},chile:{top:2570,left:885,us:0,ussr:0,control:3,bg:1,neighbours:["peru","argentina"],region:"samerica",name:"Chile"},bolivia:{top:2385,left:1005,us:0,ussr:0,control:2,bg:0,neighbours:["paraguay","peru"],region:"samerica",name:"Bolivia"},argentina:{top:2860,left:955,us:0,ussr:0,control:2,bg:1,neighbours:["chile","uruguay","paraguay"],region:"samerica",name:"Argentina"},paraguay:{top:2550,left:1130,us:0,ussr:0,control:2,bg:0,neighbours:["uruguay","argentina","bolivia"],region:"samerica",name:"Paraguay"},uruguay:{top:2740,left:1200,us:0,ussr:0,control:2,bg:0,neighbours:["argentina","paraguay","brazil"],region:"samerica",name:"Uruguay"},brazil:{top:2230,left:1385,us:0,ussr:0,control:2,bg:1,neighbours:["uruguay","venezuela"],region:"samerica",name:"Brazil"},morocco:{top:1400,left:1710,us:0,ussr:0,control:3,bg:0,neighbours:["westafricanstates","algeria","spain"],region:"africa",name:"Morocco"},algeria:{top:1330,left:1935,us:0,ussr:0,control:2,bg:1,neighbours:["tunisia","morocco","france","saharanstates"],region:"africa",name:"Algeria"},tunisia:{top:1310,left:2160,us:0,ussr:0,control:2,bg:0,neighbours:["libya","algeria"],region:"africa",name:"Tunisia"},westafricanstates:{top:1595,left:1690,us:0,ussr:0,control:2,bg:0,neighbours:["ivorycoast","morocco"],region:"africa",name:"West African States"},saharanstates:{top:1650,left:2025,us:0,ussr:0,control:1,bg:0,neighbours:["algeria","nigeria"],region:"africa",name:"Saharan States"},sudan:{top:1690,left:2550,us:0,ussr:0,control:1,bg:0,neighbours:["egypt","ethiopia"],region:"africa",name:"Sudan"},ivorycoast:{top:1885,left:1835,us:0,ussr:0,control:2,bg:0,neighbours:["nigeria","westafricanstates"],region:"africa",name:"Ivory Coast"},nigeria:{top:1859,left:2110,us:0,ussr:0,control:1,bg:1,neighbours:["ivorycoast","cameroon","saharanstates"],region:"africa",name:"Nigeria"},ethiopia:{top:1845,left:2710,us:0,ussr:0,control:1,bg:0,neighbours:["sudan","somalia"],region:"africa",name:"Ethiopia"},somalia:{top:1910,left:2955,us:0,ussr:0,control:2,bg:0,neighbours:["ethiopia","kenya"],region:"africa",name:"Somalia"},cameroon:{top:2035,left:2210,us:0,ussr:0,control:1,bg:0,neighbours:["zaire","nigeria"],region:"africa",name:"Cameroon"},zaire:{top:2110,left:2470,us:0,ussr:0,control:1,bg:1,neighbours:["angola","zimbabwe","cameroon"],region:"africa",name:"Zaire"},kenya:{top:2045,left:2735,us:0,ussr:0,control:2,bg:0,neighbours:["seafricanstates","somalia"],region:"africa",name:"Kenya"},angola:{top:2290,left:2280,us:0,ussr:0,control:1,bg:1,neighbours:["southafrica","botswana","zaire"],region:"africa",name:"Angola"},seafricanstates:{top:2250,left:2760,us:0,ussr:0,control:1,bg:0,neighbours:["zimbabwe","kenya"],region:"africa",name:"Southeast African States"},zimbabwe:{top:2365,left:2545,us:0,ussr:0,control:1,bg:0,neighbours:["seafricanstates","botswana","zaire"],region:"africa",name:"Zimbabwe"},botswana:{top:2520,left:2475,us:0,ussr:0,control:2,bg:0,neighbours:["southafrica","angola","zimbabwe"],region:"africa",name:"Botswana"},southafrica:{top:2690,left:2370,us:1,ussr:0,control:3,bg:1,neighbours:["angola","botswana"],region:"africa",name:"South Africa"}};for(var t in e)e[t].place=0;return e}},{key:"returnChinaCard",value:function(){return{img:"TNRnTS-06",name:"China",scoring:0,bg:0,player:"both",recurring:1,ops:4}}},{key:"returnEarlyWarCards",value:function(){var e={asia:{img:"TNRnTS-01",name:"Asia Scoring",scoring:1,player:"both",recurring:1,ops:0},europe:{img:"TNRnTS-02",name:"Europe Scoring",scoring:1,player:"both",recurring:1,ops:0},mideast:{img:"TNRnTS-03",name:"Middle-East Scoring",scoring:1,player:"both",recurring:1,ops:0},duckandcover:{img:"TNRnTS-04",name:"Duck and Cover",scoring:0,player:"us",recurring:1,ops:3},fiveyearplan:{img:"TNRnTS-05",name:"Five Year Plan",scoring:0,player:"us",recurring:1,ops:3},socgov:{img:"TNRnTS-07",name:"Socialist Governments",scoring:0,player:"ussr",recurring:1,ops:3},fidel:{img:"TNRnTS-08",name:"Fidel",scoring:0,player:"ussr",recurring:0,ops:2},vietnamrevolts:{img:"TNRnTS-09",name:"Vietnam Revolts",scoring:0,player:"ussr",recurring:0,ops:2},blockade:{img:"TNRnTS-10",name:"Blockade",scoring:0,player:"ussr",recurring:0,ops:1},koreanwar:{img:"TNRnTS-11",name:"Korean War",scoring:0,player:"ussr",recurring:0,ops:2},romanianab:{img:"TNRnTS-12",name:"Romanian Abdication",scoring:0,player:"ussr",recurring:0,ops:1},arabisraeli:{img:"TNRnTS-13",name:"Arab-Israeli War",scoring:0,player:"ussr",recurring:1,ops:2},comecon:{img:"TNRnTS-14",name:"Comecon",scoring:0,player:"ussr",recurring:0,ops:3},nasser:{img:"TNRnTS-15",name:"Nasser",scoring:0,player:"ussr",recurring:0,ops:1},warsawpact:{img:"TNRnTS-16",name:"Warsaw Pact",scoring:0,player:"ussr",recurring:0,ops:3},degaulle:{img:"TNRnTS-17",name:"De Gaulle Leads France",scoring:0,player:"ussr",recurring:0,ops:3},naziscientist:{img:"TNRnTS-18",name:"Nazi Scientist",scoring:0,player:"both",recurring:0,ops:1},truman:{img:"TNRnTS-19",name:"Truman",scoring:0,player:"us",recurring:0,ops:1},olympic:{img:"TNRnTS-20",name:"Olympic Games",scoring:0,player:"both",recurring:1,ops:2},nato:{img:"TNRnTS-21",name:"NATO",scoring:0,player:"us",recurring:0,ops:4},indreds:{img:"TNRnTS-22",name:"Independent Reds",scoring:0,player:"us",recurring:0,ops:2},marshall:{img:"TNRnTS-23",name:"Marshall Plan",scoring:0,player:"us",recurring:0,ops:4},indopaki:{img:"TNRnTS-24",name:"Indo-Pakistani War",scoring:0,player:"both",recurring:1,ops:2},containment:{img:"TNRnTS-25",name:"Containment",scoring:0,player:"us",recurring:0,ops:3},cia:{img:"TNRnTS-26",name:"CIA Created",scoring:0,player:"us",recurring:0,ops:1},usjapan:{img:"TNRnTS-27",name:"US/Japan Defense Pact",scoring:0,player:"us",recurring:0,ops:4},suezcrisis:{img:"TNRnTS-28",name:"Suez Crisis",scoring:0,player:"ussr",recurring:0,ops:3},easteuropean:{img:"TNRnTS-29",name:"East European Unrest",scoring:0,player:"us",recurring:1,ops:3},decolonization:{img:"TNRnTS-30",name:"Decolonization",scoring:0,player:"ussr",recurring:1,ops:2},redscare:{img:"TNRnTS-31",name:"Red Scare",scoring:0,player:"both",recurring:1,ops:4},unintervention:{img:"TNRnTS-32",name:"UN Intervention",scoring:0,player:"both",recurring:1,ops:1},destalinization:{img:"TNRnTS-33",name:"Destalinization",scoring:0,player:"ussr",recurring:0,ops:3},nucleartestban:{img:"TNRnTS-34",name:"Nuclear Test Ban Treaty",scoring:0,player:"both",recurring:1,ops:4},formosan:{img:"TNRnTS-35",name:"Formosan Resolution",scoring:0,player:"us",recurring:0,ops:2}};if("original"!=this.game.options.deck&&(e.defectors={img:"TNRnTS-103",name:"Defectors",scoring:0,player:"us",recurring:1,ops:2},e.cambridge={img:"TNRnTS-104",name:"The Cambridge Five",scoring:0,player:"ussr",recurring:1,ops:2},e.specialrelation={img:"TNRnTS-105",name:"Special Relationship",scoring:0,player:"us",recurring:1,ops:2},e.norad={img:"TNRnTS-106",name:"NORAD",scoring:0,player:"us",recurring:0,ops:3}),null!=this.game.options)for(var t in this.game.options)null!=e[t]&&delete e[t],"culturaldiplomacy"===t&&(e.culturaldiplomacy={img:"TNRnTS-202png",name:"Cultural Diplomacy",scoring:0,player:"both",recurring:1,ops:2}),"gouzenkoaffair"===t&&(e.gouzenkoaffair={img:"TNRnTS-204png",name:"Gouzenko Affair",scoring:0,player:"ussr",recurring:0,ops:2}),"poliovaccine"===t&&(e.poliovaccine={img:"TNRnTS-206png",name:"Polio Vaccine",scoring:0,player:"both",recurring:0,ops:3}),"peronism"===t&&(e.peronism={img:"TNRnTS-307png",name:"Peronism",scoring:0,player:"both",recurring:0,ops:1}),"berlinairlift"===t&&(e.berlinairlift={img:"TNRnTS-401png",name:"Berlin Airlift",scoring:0,player:"us",recurring:0,ops:1}),"communistrevolution"===t&&(e.communistrevolution={img:"TNRnTS-402png",name:"Communist Revolution",scoring:0,player:"ussr",recurring:1,ops:2}),"philadelphia"===t&&(e.philadelphia={img:"TNRnTS-403png",name:"Philadelphia Experiment",scoring:0,player:"us",recurring:0,ops:3}),"sinoindian"===t&&(e.sinoindian={img:"TNRnTS-404png",name:"Sino-Indian War",scoring:0,player:"both",recurring:1,ops:2}),"titostalin"===t&&(e.titostalin={img:"TNRnTS-405png",name:"Tito-Stalin Split",scoring:0,player:"us",recurring:1,ops:3});for(var t in e)e[t].p=0;return e}},{key:"returnMidWarCards",value:function(){var e={brushwar:{img:"TNRnTS-36",name:"Brush War",scoring:0,player:"both",recurring:1,ops:3},centralamerica:{img:"TNRnTS-37",name:"Central America Scoring",scoring:1,player:"both",recurring:1,ops:0},seasia:{img:"TNRnTS-38",name:"Southeast Asia Scoring",scoring:1,player:"both",recurring:0,ops:0},armsrace:{img:"TNRnTS-39",name:"Arms Race",scoring:0,player:"both",recurring:1,ops:3},cubanmissile:{img:"TNRnTS-40",name:"Cuban Missile Crisis",scoring:0,player:"both",recurring:0,ops:3},nuclearsubs:{img:"TNRnTS-41",name:"Nuclear Subs",scoring:0,player:"us",recurring:0,ops:2},quagmire:{img:"TNRnTS-42",name:"Quagmire",scoring:0,player:"ussr",recurring:0,ops:3},saltnegotiations:{img:"TNRnTS-43",name:"Salt Negotiations",scoring:0,player:"both",recurring:0,ops:3},beartrap:{img:"TNRnTS-44",name:"Bear Trap",scoring:0,player:"us",recurring:0,ops:3},summit:{img:"TNRnTS-45",name:"Summit",scoring:0,player:"both",recurring:1,ops:1},howilearned:{img:"TNRnTS-46",name:"How I Learned to Stop Worrying",scoring:0,player:"both",recurring:0,ops:2},junta:{img:"TNRnTS-47",name:"Junta",scoring:0,player:"both",recurring:1,ops:2},kitchendebates:{img:"TNRnTS-48",name:"Kitchen Debates",scoring:0,player:"us",recurring:0,ops:1},missileenvy:{img:"TNRnTS-49",name:"Missile Envy",scoring:0,player:"both",recurring:1,ops:2},wwby:{img:"TNRnTS-50",name:"We Will Bury You",scoring:0,player:"ussr",recurring:0,ops:4},brezhnev:{img:"TNRnTS-51",name:"Brezhnev Doctrine",scoring:0,player:"ussr",recurring:0,ops:3},portuguese:{img:"TNRnTS-52",name:"Portuguese Empire Crumbles",scoring:0,player:"ussr",recurring:0,ops:2},southafrican:{img:"TNRnTS-53",name:"South African Unrest",scoring:0,player:"ussr",recurring:1,ops:2},allende:{img:"TNRnTS-54",name:"Allende",scoring:0,player:"ussr",recurring:0,ops:1},willybrandt:{img:"TNRnTS-55",name:"Willy Brandt",scoring:0,player:"ussr",recurring:0,ops:2},muslimrevolution:{img:"TNRnTS-56",name:"Muslim Revolution",scoring:0,player:"ussr",recurring:1,ops:4},abmtreaty:{img:"TNRnTS-57",name:"ABM Treaty",scoring:0,player:"both",recurring:1,ops:4},culturalrev:{img:"TNRnTS-58",name:"Cultural Revolution",scoring:0,player:"ussr",recurring:0,ops:3},flowerpower:{img:"TNRnTS-59",name:"Flower Power",scoring:0,player:"ussr",recurring:0,ops:4},u2:{img:"TNRnTS-60",name:"U2 Incident",scoring:0,player:"ussr",recurring:0,ops:3},opec:{img:"TNRnTS-61",name:"OPEC",scoring:0,player:"ussr",recurring:1,ops:3},lonegunman:{img:"TNRnTS-62",name:"Lone Gunman",scoring:0,player:"ussr",recurring:0,ops:1},colonial:{img:"TNRnTS-63",name:"Colonial Rear Guards",scoring:0,player:"us",recurring:1,ops:2},panamacanal:{img:"TNRnTS-64",name:"Panama Canal Returned",scoring:0,player:"us",recurring:0,ops:1},campdavid:{img:"TNRnTS-65",name:"Camp David Accords",scoring:0,player:"us",recurring:0,ops:2},puppet:{img:"TNRnTS-66",name:"Puppet Governments",scoring:0,player:"us",recurring:0,ops:2},grainsales:{img:"TNRnTS-67",name:"Grain Sales to Soviets",scoring:0,player:"us",recurring:1,ops:2},johnpaul:{img:"TNRnTS-68",name:"John Paul II Elected Pope",scoring:0,player:"us",recurring:0,ops:2},deathsquads:{img:"TNRnTS-69png",name:"Latin American Death Squads",scoring:0,player:"both",recurring:1,ops:2},oas:{img:"TNRnTS-70",name:"OAS Founded",scoring:0,player:"us",recurring:0,ops:1},nixon:{img:"TNRnTS-71",name:"Nixon Plays the China Card",scoring:0,player:"us",recurring:0,ops:2},sadat:{img:"TNRnTS-72",name:"Sadat Expels Soviets",scoring:0,player:"us",recurring:0,ops:1},shuttle:{img:"TNRnTS-73",name:"Shuttle Diplomacy",scoring:0,player:"us",recurring:1,ops:3},voiceofamerica:{img:"TNRnTS-74",name:"Voice of America",scoring:0,player:"us",recurring:1,ops:2},liberation:{img:"TNRnTS-75",name:"Liberation Theology",scoring:0,player:"ussr",recurring:1,ops:2},ussuri:{img:"TNRnTS-76",name:"Ussuri River Skirmish",scoring:0,player:"us",recurring:0,ops:3},asknot:{img:"TNRnTS-77",name:"Ask Not What Your Country...",scoring:0,player:"us",recurring:0,ops:3},alliance:{img:"TNRnTS-78",name:"Alliance for Progress",scoring:0,player:"us",recurring:0,ops:3},africa:{img:"TNRnTS-79",name:"Africa Scoring",scoring:1,player:"both",recurring:1,ops:0},onesmallstep:{img:"TNRnTS-80",name:"One Small Step",scoring:0,player:"both",recurring:1,ops:2},southamerica:{img:"TNRnTS-81",name:"South America Scoring",scoring:1,player:"both",recurring:1,ops:0}};if("original"!=this.game.options.deck&&(e.che={img:"TNRnTS-107",name:"Che",scoring:0,player:"ussr",recurring:1,ops:3},e.tehran={img:"TNRnTS-108",name:"Our Man in Tehran",scoring:0,player:"us",recurring:0,ops:2}),null!=this.game.options)for(var t in this.game.options)null!=e[t]&&delete e[t],"handshake"===t&&(e.handshake={img:"TNRnTS-201png",name:"Handshake in Space",scoring:0,player:"both",recurring:1,ops:1}),"berlinagreement"===t&&(e.berlinagreement={img:"TNRnTS-205png",name:"Berlin Agreement",scoring:0,player:"both",recurring:0,ops:2}),"manwhosavedtheworld"===t&&(e.manwhosavedtheworld={img:"TNRnTS-301png",name:"The Man Who Saved the World",scoring:0,player:"both",recurring:0,ops:4}),"breakthroughatlopnor"===t&&(e.breakthroughatlopnor={img:"TNRnTS-302png",name:"Breakthrough at Lop Nor",scoring:0,player:"ussr",recurring:0,ops:2}),"greatsociety"===t&&(e.greatsociety={img:"TNRnTS-303png",name:"Great Society",scoring:0,player:"us",recurring:0,ops:2}),"nationbuilding"===t&&(e.nationbuilding={img:"TNRnTS-304png",name:"Nation Building",scoring:0,player:"both",recurring:1,ops:2}),"eurocommunism"===t&&(e.eurocommunism={img:"TNRnTS-306png",name:"Eurocommunism",scoring:0,player:"us",recurring:0,ops:3}),"kissingerisawarcriminal"===t&&(e.kissingerisawarcriminal={img:"TNRnTS-502png",name:"Kissinger Bombs Cambodia",scoring:0,player:"us",recurring:1,ops:2});for(var t in e)e[t].p=1;return e}},{key:"returnLateWarCards",value:function(){var e={iranianhostage:{img:"TNRnTS-82",name:"Iranian Hostage Crisis",scoring:0,player:"ussr",recurring:0,ops:3},ironlady:{img:"TNRnTS-83",name:"The Iron Lady",scoring:0,player:"us",recurring:0,ops:3},reagan:{img:"TNRnTS-84",name:"Reagan Bombs Libya",scoring:0,player:"us",recurring:0,ops:2},starwars:{img:"TNRnTS-85",name:"Star Wars",scoring:0,player:"us",recurring:0,ops:2},northseaoil:{img:"TNRnTS-86",name:"North Sea Oil",scoring:0,player:"us",recurring:0,ops:3},reformer:{img:"TNRnTS-87",name:"The Reformer",scoring:0,player:"ussr",recurring:0,ops:3},marine:{img:"TNRnTS-88",name:"Marine Barracks Bombing",scoring:0,player:"ussr",recurring:0,ops:2},KAL007:{img:"TNRnTS-89",name:"Soviets Shoot Down KAL-007",scoring:0,player:"us",recurring:0,ops:4},glasnost:{img:"TNRnTS-90",name:"Glasnost",scoring:0,player:"ussr",recurring:0,ops:4},ortega:{img:"TNRnTS-91",name:"Ortega Elected in Nicaragua",scoring:0,player:"ussr",recurring:0,ops:2},terrorism:{img:"TNRnTS-92",name:"Terrorism",scoring:0,player:"both",recurring:1,ops:2},irancontra:{img:"TNRnTS-93",name:"Iran Contra Scandal",scoring:0,player:"ussr",recurring:0,ops:2},chernobyl:{img:"TNRnTS-94",name:"Chernobyl",scoring:0,player:"us",recurring:0,ops:3},debtcrisis:{img:"TNRnTS-95",name:"Latin American Debt Crisis",scoring:0,player:"ussr",recurring:1,ops:2},teardown:{img:"TNRnTS-96",name:"Tear Down this Wall",scoring:0,player:"us",recurring:0,ops:3},evilempire:{img:"TNRnTS-97",name:"An Evil Empire",scoring:0,player:"us",recurring:0,ops:3},aldrichames:{img:"TNRnTS-98",name:"Aldrich Ames Remix",scoring:0,player:"ussr",recurring:0,ops:3},pershing:{img:"TNRnTS-99",name:"Pershing II Deployed",scoring:0,player:"ussr",recurring:0,ops:3},wargames:{img:"TNRnTS-100",name:"Wargames",scoring:0,player:"both",recurring:0,ops:4},solidarity:{img:"TNRnTS-101",name:"Solidarity",scoring:0,player:"us",recurring:0,ops:2}};if("original"!=this.game.options.deck&&(e.iraniraq={img:"TNRnTS-102",name:"Iran-Iraq War",scoring:0,player:"both",recurring:0,ops:2},e.yuri={img:"TNRnTS-109",name:"Yuri and Samantha",scoring:0,player:"ussr",recurring:0,ops:2},e.awacs={img:"TNRnTS-110",name:"AWACS Sale to Saudis",scoring:0,player:"us",recurring:0,ops:3}),null!=this.game.options)for(var t in this.game.options)null!=e[t]&&delete e[t],"rustinredsquare"===t&&(e.rustinredsquare={img:"TNRnTS-203png",name:"Rust Lands in Red Square",scoring:0,player:"us",recurring:0,ops:1}),"perestroika"===t&&(e.perestroika={img:"TNRnTS-305png",name:"Perestroika",scoring:0,player:"ussr",recurring:0,ops:3}),"inftreaty"===t&&(e.inftreaty={img:"TNRnTS-308png",name:"INF Treaty",scoring:0,player:"both",recurring:0,ops:3}),"sovietcoup"===t&&(e.sovietcoup={img:"TNRnTS-405png",name:"Soviet Coup",scoring:0,player:"ussr",recurring:0,ops:4}),"brexit"===t&&(e.brexit={img:"TNRnTS-501png",name:"Brexit",scoring:0,player:"both",recurring:1,ops:4});for(var t in e)e[t].p=2;return e}},{key:"returnUnplayedCards",value:function(){var e={};for(var t in this.game.deck[0].cards)e[t]=this.game.deck[0].cards[t];for(var a in this.game.deck[0].discards)delete e[a];for(var r in this.game.deck[0].removed)delete e[r];for(var n=0;n<this.game.deck[0].hand.length;n++)delete e[this.game.deck[0].hand[n]];return e}},{key:"returnDiscardedCards",value:function(){var e={};for(var t in this.game.deck[0].discards)e[t]=this.game.deck[0].cards[t],delete this.game.deck[0].cards[t];return this.game.deck[0].discards={},e}},{key:"isControlled",value:function(e,t){if(null==this.countries[t])return 0;var a=0;return"ussr"==e&&(a=parseInt(this.countries[t].ussr)-parseInt(this.countries[t].us)),"us"==e&&(a=parseInt(this.countries[t].us)-parseInt(this.countries[t].ussr)),this.countries[t].control<=a?1:0}},{key:"returnOpsOfCard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null!=this.game.deck[t].cards[e]?this.game.deck[t].cards[e].ops:null!=this.game.deck[t].discards[e]?this.game.deck[t].discards[e].ops:null!=this.game.deck[t].removed[e]?this.game.deck[t].removed[e].ops:"china"==e?4:1}},{key:"returnArrayOfRegionBonuses",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];if(1==this.game.state.events.vietnam_revolts&&1==this.game.state.events.vietnam_revolts_eligible&&1==this.game.player){var a=1;""!=e&&this.game.state.events.redscare_player1>=1&&1==this.returnOpsOfCard(e)&&(a=0),1==a&&t.push("seasia")}return 1==this.game.state.events.china_card_in_play&&1==this.game.state.events.china_card_eligible&&t.push("asia"),t}},{key:"isRegionBonus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 1==this.game.state.events.vietnam_revolts&&1==this.game.state.events.vietnam_revolts_eligible&&1==this.game.player?""!=e&&1==this.returnOpsOfCard(e)&&this.game.state.events.redscare_player1>=1?0:(this.updateStatus("<div class='status-message' id='status-message'>Extra 1 OP Available for Southeast Asia</div>"),this.game.state.events.region_bonus="seasia",1):1==this.game.state.events.china_card_in_play&&1==this.game.state.events.china_card_eligible?(this.updateStatus("<div class='status-message' id='status-message'>Extra 1 OP Available for Asia</div>"),this.game.state.events.region_bonus="asia",1):0}},{key:"endRegionBonus",value:function(){1!=this.game.state.events.vietnam_revolts_eligible||1!=this.game.state.events.vietnam_revolts?1!=this.game.state.events.china_card_eligible||(this.game.state.events.china_card_eligible=0):this.game.state.events.vietnam_revolts_eligible=0}},{key:"limitToRegionBonus",value:function(){for(var e in this.countries)if(-1==this.countries[e].region.indexOf(this.game.state.events.region_bonus))$("#"+e).off();else{var t=0;"seasia"==this.game.state.events.region_bonus&&1==this.game.state.events.china_card_eligible&&(t=1),0==t&&(1==this.game.player?1==this.isControlled("us",e)&&$("#"+e).off():1==this.isControlled("ussr",e)&&$("#"+e).off())}}},{key:"modifyOps",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return 0==a&&(a=this.game.player),"olympic"==t&&4==e||""!=t&&(e=this.returnOpsOfCard(t)),1==this.game.state.events.brezhnev&&1==a&&(1==r&&this.updateLog("USSR gets Brezhnev bonus +1"),e++),1==this.game.state.events.containment&&2==a&&(1==r&&this.updateLog("US gets Containment bonus +1"),e++),this.game.state.events.redscare_player1>=1&&1==a&&(1==r&&(1==this.game.state.events.redscare_player1?this.updateLog("USSR is affected by Red Purge"):this.updateLog("USSR is really affected by Red Purge")),e-=this.game.state.events.redscare_player1),this.game.state.events.redscare_player2>=1&&2==a&&(1==r&&(1==this.game.state.events.redscare_player2?this.updateLog("US is affected by Red Scare"):this.updateLog("US is really affected by Red Scare")),e-=this.game.state.events.redscare_player2),e<=0?1:e>=4?4:e}},{key:"finalScoring",value:function(){if(this.game.state.events.shuttlediplomacy=0,"ussr"==this.whoHasTheChinaCard()){if(this.game.state.vp--,this.updateLog("USSR receives 1 VP for the China Card"),this.game.state.vp<=-20)return void this.endGame("ussr","victory points")}else if(this.game.state.vp++,this.updateLog("US receives 1 VP for the China Card"),this.game.state.vp>=20)return void this.endGame("us","victory points");var e=0,t=0;return t=(e=this.calculateScoring("europe")).us.vp-e.ussr.vp,this.game.state.vp+=t,this.updateLog("<span>Europe:</span> "+t+" <span>VP</span>"),t=(e=this.calculateScoring("asia")).us.vp-e.ussr.vp,this.game.state.vp+=t,this.updateLog("<span>Asia:</span> "+t+" <span>VP</span>"),t=(e=this.calculateScoring("mideast")).us.vp-e.ussr.vp,this.game.state.vp+=t,this.updateLog("<span>Middle East:</span> "+t+" <span>VP</span>"),t=(e=this.calculateScoring("africa")).us.vp-e.ussr.vp,this.game.state.vp+=t,this.updateLog("<span>Africa:</span> "+t+" <span>VP</span>"),t=(e=this.calculateScoring("southamerica")).us.vp-e.ussr.vp,this.game.state.vp+=t,this.updateLog("<span>South America:</span> "+t+" <span>VP</span>"),t=(e=this.calculateScoring("centralamerica")).us.vp-e.ussr.vp,this.game.state.vp+=t,this.updateLog("<span>Central America:</span> "+t+" <span>VP</span>"),this.updateVictoryPoints(),0==this.game.state.vp?(this.endGame("tie game","final scoring"),1):(this.game.state.vp<0?this.endGame("ussr","final scoring"):this.endGame("us","final scoring"),1)}},{key:"calculateControlledBattlegroundCountries",value:function(e,t){for(var a=0,i=Object.entries(e);a<i.length;a++){var s,o=n(i[a],2),c=o[0],l=o[1],u=r(t);try{for(u.s();!(s=u.n()).done;){var d=s.value;1==this.isControlled(c,d)&&l.bg++}}catch(e){u.e(e)}finally{u.f()}}return e}},{key:"calculateControlledCountries",value:function(e,t){for(var a=0,i=Object.entries(e);a<i.length;a++){var s,o=n(i[a],2),c=o[0],l=o[1],u=r(t);try{for(u.s();!(s=u.n()).done;){var d=s.value;1==this.isControlled(c,d)&&l.total++}}catch(e){u.e(e)}finally{u.f()}}return e}},{key:"determineRegionVictor",value:function(e,t,a){return e.us.bg==a&&e.us.total>e.ussr.total?e.us.vp=t.control:e.us.bg>e.ussr.bg&&e.us.total>e.us.bg&&e.us.total>e.ussr.total?e.us.vp=t.domination:e.us.total>0&&(e.us.vp=t.presence),e.ussr.bg==a&&e.ussr.total>e.us.total?e.ussr.vp=t.control:e.ussr.bg>e.us.bg&&e.ussr.total>e.ussr.bg&&e.ussr.total>e.us.total?e.ussr.vp=t.domination:e.ussr.total>0&&(e.ussr.vp=t.presence),e.us.vp=e.us.vp+e.us.bg,e.ussr.vp=e.ussr.vp+e.ussr.bg,e}},{key:"calculateScoring",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a={us:{total:0,bg:0,vp:0},ussr:{total:0,bg:0,vp:0}};switch(e){case"europe":var i=[],s=[];for(var o in this.countries)"europe"===this.countries[o].region&&(1===this.countries[o].bg?i.push(o):s.push(o));var c={presence:3,domination:7,control:1e4};(a=this.calculateControlledBattlegroundCountries(a,i)).us.total=a.us.bg,a.ussr.total=a.ussr.bg,a=this.calculateControlledCountries(a,s),a=this.determineRegionVictor(a,c,i.length),1==this.isControlled("us","finland")&&a.us.vp++,1==this.isControlled("us","romania")&&a.us.vp++,1==this.isControlled("us","poland")&&a.us.vp++,1==this.isControlled("ussr","canada")&&a.ussr.vp++,1==this.game.state.events.optional.gouzenkoaffair&&1==this.isControlled("us","canada")&&vp_us++;break;case"mideast":var l=[],u=[];for(var d in this.countries)"mideast"===this.countries[d].region&&(1===this.countries[d].bg?l.push(d):u.push(d));var p={presence:3,domination:5,control:7};(a=this.calculateControlledBattlegroundCountries(a,l)).us.total=a.us.bg,a.ussr.total=a.ussr.bg,a=this.calculateControlledCountries(a,u),1==this.game.state.events.shuttlediplomacy&&(a.ussr.bg>0&&(a.ussr.bg--,a.ussr.total--),0==t&&(this.game.state.events.shuttlediplomacy=0,this.game.deck[0].discards.shuttle=this.game.deck[0].cards.shuttle)),a=this.determineRegionVictor(a,p,l.length);break;case"seasia":for(var h=["burma","laos","vietnam","malaysia","philippines","indonesia","thailand"],f=0,m=Object.entries(a);f<m.length;f++){var g,b=n(m[f],2),y=b[0],v=b[1],_=r(h);try{for(_.s();!(g=_.n()).done;)country=g.value,1==this.isControlled(y,country)&&("thailand"==country?v.bg+=2:v.bg++)}catch(e){_.e(e)}finally{_.f()}}a.us.vp=a.us.vp+a.us.bg,a.ussr.vp=a.ussr.vp+a.ussr.bg;break;case"africa":var w=[],x=[];for(var k in this.countries)"africa"===this.countries[k].region&&(1===this.countries[k].bg?w.push(k):x.push(k));var S={presence:1,domination:4,control:6};(a=this.calculateControlledBattlegroundCountries(a,w)).us.total=a.us.bg,a.ussr.total=a.ussr.bg,a=this.calculateControlledCountries(a,x),a=this.determineRegionVictor(a,S,w.length);break;case"centralamerica":var P=[],E=[];for(var C in this.countries)"camerica"===this.countries[C].region&&(1===this.countries[C].bg?P.push(C):E.push(C));var A={presence:1,domination:3,control:5};(a=this.calculateControlledBattlegroundCountries(a,P)).us.total=a.us.bg,a.ussr.total=a.ussr.bg,a=this.calculateControlledCountries(a,E),a=this.determineRegionVictor(a,A,P.length),1==this.isControlled("ussr","mexico")&&a.ussr.vp++,1==this.isControlled("ussr","cuba")&&a.ussr.vp++;break;case"southamerica":var M=[],T=[];for(var j in this.countries)"samerica"===this.countries[j].region&&(1===this.countries[j].bg?M.push(j):T.push(j));var O={presence:2,domination:5,control:6};(a=this.calculateControlledBattlegroundCountries(a,M)).us.total=a.us.bg,a.ussr.total=a.ussr.bg,a=this.calculateControlledCountries(a,T),a=this.determineRegionVictor(a,O,M.length);break;case"asia":var D=[],I=[];for(var R in this.countries)"asia"!==this.countries[R].region&&"seasia"!==this.countries[R].region||(1===this.countries[R].bg||1==this.game.state.events.formosan&&"taiwan"===R&&1==this.isControlled("us","taiwan")?D.push(R):I.push(R));var B={presence:3,domination:7,control:9};(a=this.calculateControlledBattlegroundCountries(a,D)).us.total=a.us.bg,a.ussr.total=a.ussr.bg,a=this.calculateControlledCountries(a,I),1==this.game.state.events.shuttlediplomacy&&(a.ussr.bg>0&&(a.ussr.bg--,a.ussr.total--),0==t&&(this.game.state.events.shuttlediplomacy=0,this.game.deck[0].discards.shuttle=this.game.deck[0].cards.shuttle)),a=this.determineRegionVictor(a,B,D.length),1==this.isControlled("us","afghanistan")&&a.us.vp++,1==this.isControlled("us","northkorea")&&a.us.vp++,1==this.isControlled("ussr","japan")&&(1==this.game.state.events.shuttlediplomacy?this.updateLog("USSR loses Japan/US-adjacency with Shuttle Diplomacy"):a.ussr.vp++)}return a}},{key:"doesPlayerDominateRegion",value:function(e,t){var a=0,r=0,n=0,i=0,s=0,o=0;if("europe"==t){if(1==this.isControlled("us","italy")&&n++,1==this.isControlled("ussr","italy")&&i++,1==this.isControlled("us","france")&&n++,1==this.isControlled("ussr","france")&&i++,1==this.isControlled("us","westgermany")&&n++,1==this.isControlled("ussr","westgermany")&&i++,1==this.isControlled("us","eastgermany")&&n++,1==this.isControlled("ussr","eastgermany")&&i++,1==this.isControlled("us","poland")&&n++,1==this.isControlled("ussr","poland")&&i++,a=n,r=i,1==this.isControlled("us","spain")&&a++,1==this.isControlled("ussr","spain")&&r++,1==this.isControlled("us","greece")&&a++,1==this.isControlled("ussr","greece")&&r++,1==this.isControlled("us","turkey")&&a++,1==this.isControlled("ussr","turkey")&&r++,1==this.isControlled("us","yugoslavia")&&a++,1==this.isControlled("ussr","yugoslavia")&&r++,1==this.isControlled("us","bulgaria")&&a++,1==this.isControlled("ussr","bulgaria")&&r++,1==this.isControlled("us","austria")&&a++,1==this.isControlled("ussr","austria")&&r++,1==this.isControlled("us","romania")&&a++,1==this.isControlled("ussr","romania")&&r++,1==this.isControlled("us","hungary")&&a++,1==this.isControlled("ussr","hungary")&&r++,1==this.isControlled("us","czechoslovakia")&&a++,1==this.isControlled("ussr","czechoslovakia")&&r++,1==this.isControlled("us","benelux")&&a++,1==this.isControlled("ussr","benelux")&&r++,1==this.isControlled("us","uk")&&a++,1==this.isControlled("ussr","uk")&&r++,1==this.isControlled("us","canada")&&a++,1==this.isControlled("ussr","canada")&&r++,1==this.isControlled("us","norway")&&a++,1==this.isControlled("ussr","norway")&&r++,1==this.isControlled("us","denmark")&&a++,1==this.isControlled("ussr","denmark")&&r++,1==this.isControlled("us","sweden")&&a++,1==this.isControlled("ussr","sweden")&&r++,1==this.isControlled("us","finland")&&a++,1==this.isControlled("ussr","finland")&&r++,a>0&&(s=3),r>0&&(o=3),n>i&&a>n&&a>r&&(s=7),i>n&&r>i&&r>a&&(o=7),6==a&&a>r&&(s=1e4),6==r&&a>r&&(o=1e4),(s+=n)>=(o+=i)+2&&a>n||5==n&&a>r){if("us"==e)return 1;if("ussr"==e)return 0}if(o>=s+2&&r>i||5==i&&r>a){if("us"==e)return 0;if("ussr"==e)return 1}}if("mideast"==t){if(1==this.isControlled("us","libya")&&n++,1==this.isControlled("ussr","libya")&&i++,1==this.isControlled("us","egypt")&&n++,1==this.isControlled("ussr","egypt")&&i++,1==this.isControlled("us","israel")&&n++,1==this.isControlled("ussr","israel")&&i++,1==this.isControlled("us","iraq")&&n++,1==this.isControlled("ussr","iraq")&&i++,1==this.isControlled("us","iran")&&n++,1==this.isControlled("ussr","iran")&&i++,1==this.isControlled("us","saudiarabia")&&n++,1==this.isControlled("ussr","saudiarabia")&&i++,a=n,r=i,1==this.isControlled("us","lebanon")&&a++,1==this.isControlled("ussr","lebanon")&&r++,1==this.isControlled("us","syria")&&a++,1==this.isControlled("ussr","syria")&&r++,1==this.isControlled("us","jordan")&&a++,1==this.isControlled("ussr","jordan")&&r++,1==this.isControlled("us","gulfstates")&&a++,1==this.isControlled("ussr","gulfstates")&&r++,a>0&&(s=3),r>0&&(o=3),n>i&&a>n&&a>r&&(s=5),i>n&&r>i&&r>a&&(o=5),7==a&&a>r&&(s=7),7==r&&a>r&&(o=7),(s+=n)>=(o+=i)+2&&a>n||6==n&&a>r){if("us"==e)return 1;if("ussr"==e)return 0}if(o>=s+2&&r>i||6==i&&r>a){if("us"==e)return 0;if("ussr"==e)return 1}}if("africa"==t){if(1==this.isControlled("us","algeria")&&n++,1==this.isControlled("ussr","algeria")&&i++,1==this.isControlled("us","nigeria")&&n++,1==this.isControlled("ussr","nigeria")&&i++,1==this.isControlled("us","zaire")&&n++,1==this.isControlled("ussr","zaire")&&i++,1==this.isControlled("us","angola")&&n++,1==this.isControlled("ussr","angola")&&i++,1==this.isControlled("us","southafrica")&&n++,1==this.isControlled("ussr","southafrica")&&i++,a=n,r=i,1==this.isControlled("us","morocco")&&a++,1==this.isControlled("ussr","morocco")&&r++,1==this.isControlled("us","tunisia")&&a++,1==this.isControlled("ussr","tunisia")&&r++,1==this.isControlled("us","westafricanstates")&&a++,1==this.isControlled("ussr","westafricanstates")&&r++,1==this.isControlled("us","saharanstates")&&a++,1==this.isControlled("ussr","saharanstates")&&r++,1==this.isControlled("us","sudan")&&a++,1==this.isControlled("ussr","sudan")&&r++,1==this.isControlled("us","ivorycoast")&&a++,1==this.isControlled("ussr","ivorycoast")&&r++,1==this.isControlled("us","ethiopia")&&a++,1==this.isControlled("ussr","ethiopia")&&r++,1==this.isControlled("us","somalia")&&a++,1==this.isControlled("ussr","somalia")&&r++,1==this.isControlled("us","cameroon")&&a++,1==this.isControlled("ussr","cameroon")&&r++,1==this.isControlled("us","kenya")&&a++,1==this.isControlled("ussr","kenya")&&r++,1==this.isControlled("us","seafricanstates")&&a++,1==this.isControlled("ussr","seafricanstates")&&r++,1==this.isControlled("us","zimbabwe")&&a++,1==this.isControlled("ussr","zimbabwe")&&r++,1==this.isControlled("us","botswana")&&a++,1==this.isControlled("ussr","botswana")&&r++,a>0&&(s=1),r>0&&(o=1),n>i&&a>n&&a>r&&(s=4),i>n&&r>i&&r>a&&(o=4),7==a&&a>r&&(s=6),7==r&&a>r&&(o=6),(s+=n)>=(o+=i)+2&&a>n||5==n&&a>r){if("us"==e)return 1;if("ussr"==e)return 0}if(o>=s+2&&r>i||5==i&&r>a){if("us"==e)return 0;if("ussr"==e)return 1}}if("centralamerica"==t){if(1==this.isControlled("us","mexico")&&n++,1==this.isControlled("ussr","mexico")&&i++,1==this.isControlled("us","cuba")&&n++,1==this.isControlled("ussr","cuba")&&i++,1==this.isControlled("us","panama")&&n++,1==this.isControlled("ussr","panama")&&i++,a=n,r=i,1==this.isControlled("us","guatemala")&&a++,1==this.isControlled("ussr","guatemala")&&r++,1==this.isControlled("us","elsalvador")&&a++,1==this.isControlled("ussr","elsalvador")&&r++,1==this.isControlled("us","honduras")&&a++,1==this.isControlled("ussr","honduras")&&r++,1==this.isControlled("us","costarica")&&a++,1==this.isControlled("ussr","costarica")&&r++,1==this.isControlled("us","nicaragua")&&a++,1==this.isControlled("ussr","nicaragua")&&r++,1==this.isControlled("us","haiti")&&a++,1==this.isControlled("ussr","haiti")&&r++,1==this.isControlled("us","dominicanrepublic")&&a++,1==this.isControlled("ussr","dominicanrepublic")&&r++,a>0&&(s=1),r>0&&(o=1),n>i&&a>n&&a>r&&(s=3),i>n&&r>i&&r>a&&(o=3),7==a&&a>r&&(s=5),7==r&&a>r&&(o=5),(s+=n)>(o+=i)&&a>n&&n>0||3==n&&a>r){if("us"==e)return 1;if("ussr"==e)return 0}if(o>s&&r>i&&i>0||3==i&&r>a){if("us"==e)return 0;if("ussr"==e)return 1}}if("southamerica"==t){if(1==this.isControlled("us","venezuela")&&n++,1==this.isControlled("ussr","venezuela")&&i++,1==this.isControlled("us","brazil")&&n++,1==this.isControlled("ussr","brazil")&&i++,1==this.isControlled("us","argentina")&&n++,1==this.isControlled("ussr","argentina")&&i++,1==this.isControlled("us","chile")&&n++,1==this.isControlled("ussr","chile")&&i++,a=n,r=i,1==this.isControlled("us","colombia")&&a++,1==this.isControlled("ussr","colombia")&&r++,1==this.isControlled("us","ecuador")&&a++,1==this.isControlled("ussr","ecuador")&&r++,1==this.isControlled("us","peru")&&a++,1==this.isControlled("ussr","peru")&&r++,1==this.isControlled("us","bolivia")&&a++,1==this.isControlled("ussr","bolivia")&&r++,1==this.isControlled("us","paraguay")&&a++,1==this.isControlled("ussr","paraguay")&&r++,1==this.isControlled("us","uruguay")&&a++,1==this.isControlled("ussr","uruguay")&&r++,a>0&&(s=2),r>0&&(o=2),n>i&&a>n&&a>r&&(s=5),i>n&&r>i&&r>a&&(o=5),7==a&&a>r&&(s=6),7==r&&a>r&&(o=6),(s+=n)>(o+=i)+2&&a>n&&n>0||4==n&&a>r){if("us"==e)return 1;if("ussr"==e)return 0}if(o>s+2&&r>i&&i>0||4==i&&r>a){if("us"==e)return 0;if("ussr"==e)return 1}}if("asia"==t){if(1==this.isControlled("us","northkorea")&&n++,1==this.isControlled("ussr","northkorea")&&i++,1==this.isControlled("us","southkorea")&&n++,1==this.isControlled("ussr","southkorea")&&i++,1==this.isControlled("us","japan")&&n++,1==this.isControlled("ussr","japan")&&i++,1==this.isControlled("us","thailand")&&n++,1==this.isControlled("ussr","thailand")&&i++,1==this.isControlled("us","india")&&n++,1==this.isControlled("ussr","india")&&i++,1==this.isControlled("us","pakistan")&&n++,1==this.isControlled("ussr","pakistan")&&i++,1==this.game.state.events.formosan&&1==this.isControlled("us","taiwan")&&n++,a=n,r=i,1==this.isControlled("us","afghanistan")&&a++,1==this.isControlled("ussr","afghanistan")&&r++,1==this.isControlled("us","burma")&&a++,1==this.isControlled("ussr","burma")&&r++,1==this.isControlled("us","laos")&&a++,1==this.isControlled("ussr","laos")&&r++,1==this.isControlled("us","vietnam")&&a++,1==this.isControlled("ussr","vietnam")&&r++,1==this.isControlled("us","malaysia")&&a++,1==this.isControlled("ussr","malaysia")&&r++,1==this.isControlled("us","australia")&&a++,1==this.isControlled("ussr","australia")&&r++,1==this.isControlled("us","indonesia")&&a++,1==this.isControlled("ussr","indonesia")&&r++,1==this.isControlled("us","philippines")&&a++,1==this.isControlled("ussr","philippines")&&r++,a>0&&(s=3),r>0&&(o=3),n>i&&a>n&&a>r&&(s=7),i>n&&r>i&&r>a&&(o=7),1==this.game.state.events.formosan?(7==a&&a>r&&(s=9),7==r&&a>r&&(o=9)):(6==a&&a>r&&(s=9),6==r&&a>r&&(o=9)),(s+=n)>(o+=i)+2&&a>n&&n>0||n>=6&&a>r){if(6==n&&1==this.isControlled("us","taiwan")&&1==this.game.state.events.formosan)return 0;if("us"==e)return 1;if("ussr"==e)return 0}if(o>s+2&&r>i&&i>0||6==i&&r>a){if("us"==e)return 0;if("ussr"==e)return 1}}return 0}},{key:"returnCardItem",value:function(e){return 1==this.interface?null==this.game.deck[0].cards[e]?'<div id="'.concat(e.replace(/ /g,""),'" class="card cardbox-hud cardbox-hud-status">').concat(this.returnCardImage(e,1),"</div>"):'<div id="'.concat(e.replace(/ /g,""),'" class="card showcard cardbox-hud cardbox-hud-status">').concat(this.returnCardImage(e,1),"</div>"):(this.game.deck[0].cards[e],'<li class="card showcard" id="'+e+'">'+this.game.deck[0].cards[e].name+"</li>")}},{key:"returnCardList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(this.game.deck[0].hand,"");if(1==this.interface){for(i=0;i<e.length;i++)t+=this.returnCardItem(e[i]);t='\n        <div class="status-cardbox" id="status-cardbox">\n          '.concat(t,"\n        </div>")}else{for(t="<ul>",i=0;i<e.length;i++)t+=this.returnCardItem(e[i]);t+="</ul>"}return t}},{key:"updateStatusAndListCards",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;0!=this.game.player?(null==t&&(t=this.game.deck[0].hand),html='\n        <div id="status-message" class="status-message">'.concat(e,"</div>\n        ").concat(this.returnCardList(t),"\n    "),this.updateStatus(html),this.addShowCardEvents()):this.updateStatus('<div id="status-message" class="status-message">'.concat(e,"</div>"))}},{key:"updateRound",value:function(){var e=0,t=0;0==this.game.state.round&&(e=this.game.state.round_ps[0].top,t=this.game.state.round_ps[0].left),1==this.game.state.round&&(e=this.game.state.round_ps[0].top,t=this.game.state.round_ps[0].left),2==this.game.state.round&&(e=this.game.state.round_ps[1].top,t=this.game.state.round_ps[1].left),3==this.game.state.round&&(e=this.game.state.round_ps[2].top,t=this.game.state.round_ps[2].left),4==this.game.state.round&&(e=this.game.state.round_ps[3].top,t=this.game.state.round_ps[3].left),5==this.game.state.round&&(e=this.game.state.round_ps[4].top,t=this.game.state.round_ps[4].left),6==this.game.state.round&&(e=this.game.state.round_ps[5].top,t=this.game.state.round_ps[5].left),7==this.game.state.round&&(e=this.game.state.round_ps[6].top,t=this.game.state.round_ps[6].left),8==this.game.state.round&&(e=this.game.state.round_ps[7].top,t=this.game.state.round_ps[7].left),9==this.game.state.round&&(e=this.game.state.round_ps[8].top,t=this.game.state.round_ps[8].left),10==this.game.state.round&&(e=this.game.state.round_ps[9].top,t=this.game.state.round_ps[9].left),e=this.scale(e)+"px",t=this.scale(t)+"px",$(".round").css("width",this.scale(140)+"px"),$(".round").css("height",this.scale(140)+"px"),$(".round").css("top",e),$(".round").css("left",t)}},{key:"lowerDefcon",value:function(){if(("us"===this.game.state.events.manwhosavedtheworld&&1==this.game.state.turn||"ussr"===this.game.state.events.manwhosavedtheworld&&0==this.game.state.turn)&&2==this.game.state.defcon)return this.game.state.events.manwhosavedtheworld="",void this.updateLog("<span>Man Who Saved the World prevents thermonuclear war</span>");if(this.game.state.defcon--,this.updateLog("<span>DEFCON falls to</span> "+this.game.state.defcon),2==this.game.state.defcon&&1==this.game.state.events.norad&&1!=this.game.state.headline&&(this.game.state.us_defcon_bonus=1),1==this.game.state.defcon){if(1==this.game.state.headline)return 1==this.game.state.player_to_go&&this.endGame("us","<span>USSR triggers thermonuclear war</span>"),void(2==this.game.state.player_to_go&&this.endGame("ussr","<span>US triggers thermonuclear war</span>"));0==this.game.state.turn?this.endGame("us","<span>USSR triggers thermonuclear war 1</span>"):this.endGame("ussr","<span>US triggers thermonuclear war 2</span>")}this.updateDefcon()}},{key:"updateDefcon",value:function(){this.game.state.defcon>5&&(this.game.state.defcon=5);var e=0,t=0;5==this.game.state.defcon&&(e=this.game.state.defcon_ps[0].top,t=this.game.state.defcon_ps[0].left),4==this.game.state.defcon&&(e=this.game.state.defcon_ps[1].top,t=this.game.state.defcon_ps[1].left),3==this.game.state.defcon&&(e=this.game.state.defcon_ps[2].top,t=this.game.state.defcon_ps[2].left),2==this.game.state.defcon&&(e=this.game.state.defcon_ps[3].top,t=this.game.state.defcon_ps[3].left),1==this.game.state.defcon&&(e=this.game.state.defcon_ps[4].top,t=this.game.state.defcon_ps[4].left),e=e=this.scale(e)+"px",t=t=this.scale(t)+"px",$(".defcon").css("width",this.scale(120)+"px"),$(".defcon").css("height",this.scale(120)+"px"),$(".defcon").css("top",e),$(".defcon").css("left",t)}},{key:"updateActionRound",value:function(){var e=0,t=0,a=this.game.state.turn_in_round;0==a&&(e=this.game.state.ar_ps[0].top,t=this.game.state.ar_ps[0].left),1==a&&(e=this.game.state.ar_ps[0].top,t=this.game.state.ar_ps[0].left),2==a&&(e=this.game.state.ar_ps[1].top,t=this.game.state.ar_ps[1].left),3==a&&(e=this.game.state.ar_ps[2].top,t=this.game.state.ar_ps[2].left),4==a&&(e=this.game.state.ar_ps[3].top,t=this.game.state.ar_ps[3].left),5==a&&(e=this.game.state.ar_ps[4].top,t=this.game.state.ar_ps[4].left),6==a&&(e=this.game.state.ar_ps[5].top,t=this.game.state.ar_ps[5].left),7==a&&(e=this.game.state.ar_ps[6].top,t=this.game.state.ar_ps[6].left),8==a&&(e=this.game.state.ar_ps[7].top,t=this.game.state.ar_ps[7].left),e=this.scale(e)+"px",t=this.scale(t)+"px",0==this.game.state.turn?($(".action_round_us").hide(),$(".action_round_ussr").show(),$(".action_round_ussr").css("width",this.scale(100)+"px"),$(".action_round_ussr").css("height",this.scale(100)+"px"),$(".action_round_ussr").css("top",e),$(".action_round_ussr").css("left",t)):($(".action_round_ussr").hide(),$(".action_round_us").show(),$(".action_round_us").css("width",this.scale(100)+"px"),$(".action_round_us").css("height",this.scale(100)+"px"),$(".action_round_us").css("top",e),$(".action_round_us").css("left",t));var r=6;this.game.state.round>3&&(r=7),1==this.game.state.northseaoil&&2==this.game.player&&r++,"us"===this.game.state.space_station&&2==this.game.player&&r++,"ussr"===this.game.state.space_station&&1==this.game.player&&r++,$(".action_round_cover").css("width",this.scale(100)+"px"),$(".action_round_cover").css("height",this.scale(100)+"px");var n=this.scale(this.game.state.ar_ps[7].top)+"px",i=this.scale(this.game.state.ar_ps[7].left)+"px",s=this.scale(this.game.state.ar_ps[6].top)+"px",o=this.scale(this.game.state.ar_ps[6].left)+"px";$(".action_round_8_cover").css("top",n),$(".action_round_8_cover").css("left",i),$(".action_round_7_cover").css("top",s),$(".action_round_7_cover").css("left",o),r<8?$(".action_round_8_cover").css("display","all"):$(".action_round_8_cover").css("display","none"),r<7?$(".action_round_7_cover").css("display","all"):$(".action_round_7_cover").css("display","none")}},{key:"advanceSpaceRace",value:function(e){this.updateLog("<span>"+e.toUpperCase()+"</span> <span>has advanced in the space race</span>"),"us"==e&&(this.game.state.space_race_us++,1==this.game.state.space_race_us&&(this.game.state.space_race_ussr<1?(this.game.state.vp+=2,this.updateVictoryPoints()):(this.game.state.vp+=1,this.updateVictoryPoints())),2==this.game.state.space_race_us&&(this.game.state.space_race_ussr<2?this.game.state.animal_in_space="us":this.game.state.animal_in_space=""),3==this.game.state.space_race_us&&(this.game.state.space_race_ussr<3?(this.game.state.vp+=2,this.updateVictoryPoints()):this.game.state.animal_in_space=""),4==this.game.state.space_race_us&&(this.game.state.space_race_ussr<4?this.game.state.man_in_earth_orbit="us":(this.game.state.man_in_earth_orbit="",this.game.state.animal_in_space="")),5==this.game.state.space_race_us&&(this.game.state.space_race_ussr<5?(this.game.state.vp+=3,this.updateVictoryPoints()):(this.game.state.vp+=1,this.updateVictoryPoints(),this.game.state.man_in_earth_orbit="",this.game.state.animal_in_space="")),6==this.game.state.space_race_us&&(this.game.state.space_race_ussr<6?this.game.state.eagle_has_landed="us":(this.game.state.eagle_has_landed="",this.game.state.man_in_earth_orbit="",this.game.state.animal_in_space="")),7==this.game.state.space_race_us&&(this.game.state.space_race_ussr<7?(this.game.state.vp+=4,this.updateVictoryPoints()):(this.game.state.vp+=2,this.updateVictoryPoints(),this.game.state.eagle_has_landed="",this.game.state.man_in_earth_orbit="",this.game.state.animal_in_space="")),8==this.game.state.space_race_us&&(this.game.state.space_race_ussr<8?(this.game.state.vp+=2,this.updateVictoryPoints(),this.game.state.space_shuttle="us"):(this.game.state.eagle_has_landed="",this.game.state.man_in_earth_orbit="",this.game.state.animal_in_space="",this.game.state.space_shuttle=""))),"ussr"==e&&(this.game.state.space_race_ussr++,1==this.game.state.space_race_ussr&&(this.game.state.space_race_us<1?(this.game.state.vp-=2,this.updateVictoryPoints()):(this.game.state.vp-=1,this.updateVictoryPoints())),2==this.game.state.space_race_ussr&&(this.game.state.space_race_us<2?this.game.state.animal_in_space="ussr":this.game.state.animal_in_space=""),3==this.game.state.space_race_ussr&&(this.game.state.space_race_us<3?(this.game.state.vp-=2,this.updateVictoryPoints()):this.game.state.animal_in_space=""),4==this.game.state.space_race_ussr&&(this.game.state.space_race_us<4?this.game.state.man_in_earth_orbit="ussr":(this.game.state.animal_in_space="",this.game.state.man_in_earth_orbit="")),5==this.game.state.space_race_ussr&&(this.game.state.space_race_us<5?(this.game.state.vp-=3,this.updateVictoryPoints()):(this.game.state.vp-=1,this.updateVictoryPoints(),this.game.state.animal_in_space="",this.game.state.man_in_earth_orbit="")),6==this.game.state.space_race_ussr&&(this.game.state.space_race_us<6?this.game.state.eagle_has_landed="ussr":(this.game.state.animal_in_space="",this.game.state.man_in_earth_orbit="",this.game.state.eagle_has_landed="")),7==this.game.state.space_race_ussr&&(this.game.state.space_race_us<7?(this.game.state.vp-=4,this.updateVictoryPoints()):(this.game.state.vp-=2,this.updateVictoryPoints(),this.game.state.animal_in_space="",this.game.state.man_in_earth_orbit="",this.game.state.eagle_has_landed="")),8==this.game.state.space_race_ussr&&(this.game.state.space_race_us<8?(this.game.state.vp-=2,this.updateVictoryPoints(),this.game.state.space_shuttle="ussr"):(this.game.state.animal_in_space="",this.game.state.man_in_earth_orbit="",this.game.state.eagle_has_landed="",this.game.state.space_shuttle=""))),this.updateSpaceRace()}},{key:"updateSpaceRace",value:function(){var e=0,t=0,a=0,r=0;0==this.game.state.space_race_us&&(e=this.game.state.space_race_ps[0].top,t=this.game.state.space_race_ps[0].left),1==this.game.state.space_race_us&&(e=this.game.state.space_race_ps[1].top,t=this.game.state.space_race_ps[1].left),2==this.game.state.space_race_us&&(e=this.game.state.space_race_ps[2].top,t=this.game.state.space_race_ps[2].left),3==this.game.state.space_race_us&&(e=this.game.state.space_race_ps[3].top,t=this.game.state.space_race_ps[3].left),4==this.game.state.space_race_us&&(e=this.game.state.space_race_ps[4].top,t=this.game.state.space_race_ps[4].left),5==this.game.state.space_race_us&&(e=this.game.state.space_race_ps[5].top,t=this.game.state.space_race_ps[5].left),6==this.game.state.space_race_us&&(e=this.game.state.space_race_ps[6].top,t=this.game.state.space_race_ps[6].left),7==this.game.state.space_race_us&&(e=this.game.state.space_race_ps[7].top,t=this.game.state.space_race_ps[7].left),8==this.game.state.space_race_us&&(e=this.game.state.space_race_ps[8].top,t=this.game.state.space_race_ps[8].left),0==this.game.state.space_race_ussr&&(a=this.game.state.space_race_ps[0].top,r=this.game.state.space_race_ps[0].left),1==this.game.state.space_race_ussr&&(a=this.game.state.space_race_ps[1].top,r=this.game.state.space_race_ps[1].left),2==this.game.state.space_race_ussr&&(a=this.game.state.space_race_ps[2].top,r=this.game.state.space_race_ps[2].left),3==this.game.state.space_race_ussr&&(a=this.game.state.space_race_ps[3].top,r=this.game.state.space_race_ps[3].left),4==this.game.state.space_race_ussr&&(a=this.game.state.space_race_ps[4].top,r=this.game.state.space_race_ps[4].left),5==this.game.state.space_race_ussr&&(a=this.game.state.space_race_ps[5].top,r=this.game.state.space_race_ps[5].left),6==this.game.state.space_race_ussr&&(a=this.game.state.space_race_ps[6].top,r=this.game.state.space_race_ps[6].left),7==this.game.state.space_race_ussr&&(a=this.game.state.space_race_ps[7].top,r=this.game.state.space_race_ps[7].left),8==this.game.state.space_race_ussr&&(a=this.game.state.space_race_ps[8].top,r=this.game.state.space_race_ps[8].left),e=this.scale(e),t=this.scale(t),a=this.scale(a+40)+"px",r=this.scale(r+10)+"px",$(".space_race_us").css("width",this.scale(100)+"px"),$(".space_race_us").css("height",this.scale(100)+"px"),$(".space_race_us").css("top",e),$(".space_race_us").css("left",t),$(".space_race_ussr").css("width",this.scale(100)+"px"),$(".space_race_ussr").css("height",this.scale(100)+"px"),$(".space_race_ussr").css("top",a),$(".space_race_ussr").css("left",r)}},{key:"updateEventTiles",value:function(){try{0==this.game.state.events.warsawpact?$("#eventtile_warsaw").css("display","none"):$("#eventtile_warsaw").css("display","block"),0==this.game.state.events.degaulle?$("#eventtile_degaulle").css("display","none"):$("#eventtile_degaulle").css("display","block"),0==this.game.state.events.nato?$("#eventtile_nato").css("display","none"):$("#eventtile_nato").css("display","block"),0==this.game.state.events.marshall?$("#eventtile_marshall").css("display","none"):$("#eventtile_marshall").css("display","block"),0==this.game.state.events.usjapan?$("#eventtile_usjapan").css("display","none"):$("#eventtile_usjapan").css("display","block"),0==this.game.state.events.norad?$("#eventtile_norad").css("display","none"):$("#eventtile_norad").css("display","block"),0==this.game.state.events.quagmire?$("#eventtile_quagmire").css("display","none"):$("#eventtile_quagmire").css("display","block"),0==this.game.state.events.formosan?($("#eventtile_formosan").css("display","none"),$(".formosan_resolution").css("display","none"),$(".formosan_resolution").hide()):1!=this.isControlled("ussr","taiwan")?($("#eventtile_formosan").css("display","block"),$(".formosan_resolution").css("display","block"),$(".formosan_resolution").show()):($(".formosan_resolution").css("display","none"),$(".formosan_resolution").hide()),0==this.game.state.events.beartrap?$("#eventtile_beartrap").css("display","none"):$("#eventtile_beartrap").css("display","block"),0==this.game.state.events.willybrandt?$("#eventtile_willybrandt").css("display","none"):$("#eventtile_willybrandt").css("display","block"),0==this.game.state.events.campdavid?$("#eventtile_campdavid").css("display","none"):$("#eventtile_campdavid").css("display","block"),0==this.game.state.events.flowerpower?$("#eventtile_flowerpower").css("display","none"):$("#eventtile_flowerpower").css("display","block"),0==this.game.state.events.johnpaul?$("#eventtile_johnpaul").css("display","none"):$("#eventtile_johnpaul").css("display","block"),0==this.game.state.events.iranianhostage?$("#eventtile_iranianhostagecrisis").css("display","none"):$("#eventtile_iranianhostagecrisis").css("display","block"),0==this.game.state.events.shuttlediplomacy?$("#eventtile_shuttlediplomacy").css("display","none"):$("#eventtile_shuttlediplomacy").css("display","block"),0==this.game.state.events.ironlady?$("#eventtile_ironlady").css("display","none"):$("#eventtile_ironlady").css("display","block"),0==this.game.state.events.northseaoil?$("#eventtile_northseaoil").css("display","none"):$("#eventtile_northseaoil").css("display","block"),0==this.game.state.events.reformer?$("#eventtile_reformer").css("display","none"):$("#eventtile_reformer").css("display","block"),0==this.game.state.events.teardown?$("#eventtile_teardown").css("display","none"):$("#eventtile_teardown").css("display","block"),0==this.game.state.events.evilempire?$("#eventtile_evilempire").css("display","none"):$("#eventtile_evilempire").css("display","block"),0==this.game.state.events.awacs?$("#eventtile_awacs").css("display","none"):$("#eventtile_awacs").css("display","block")}catch(e){}}},{key:"updateMilitaryOperations",value:function(){var e=0,t=0,a=0,r=0;0==this.game.state.milops_us&&(e=this.game.state.milops_ps[0].top,t=this.game.state.milops_ps[0].left),1==this.game.state.milops_us&&(e=this.game.state.milops_ps[1].top,t=this.game.state.milops_ps[1].left),2==this.game.state.milops_us&&(e=this.game.state.milops_ps[2].top,t=this.game.state.milops_ps[2].left),3==this.game.state.milops_us&&(e=this.game.state.milops_ps[3].top,t=this.game.state.milops_ps[3].left),4==this.game.state.milops_us&&(e=this.game.state.milops_ps[4].top,t=this.game.state.milops_ps[4].left),this.game.state.milops_us>=5&&(e=this.game.state.milops_ps[5].top,t=this.game.state.milops_ps[5].left),0==this.game.state.milops_ussr&&(a=this.game.state.milops_ps[0].top,r=this.game.state.milops_ps[0].left),1==this.game.state.milops_ussr&&(a=this.game.state.milops_ps[1].top,r=this.game.state.milops_ps[1].left),2==this.game.state.milops_ussr&&(a=this.game.state.milops_ps[2].top,r=this.game.state.milops_ps[2].left),3==this.game.state.milops_ussr&&(a=this.game.state.milops_ps[3].top,r=this.game.state.milops_ps[3].left),4==this.game.state.milops_ussr&&(a=this.game.state.milops_ps[4].top,r=this.game.state.milops_ps[4].left),this.game.state.milops_ussr>=5&&(a=this.game.state.milops_ps[5].top,r=this.game.state.milops_ps[5].left),e=this.scale(e),t=this.scale(t),a=this.scale(a+40)+"px",r=this.scale(r+10)+"px",$(".milops_us").css("width",this.scale(100)+"px"),$(".milops_us").css("height",this.scale(100)+"px"),$(".milops_us").css("top",e),$(".milops_us").css("left",t),$(".milops_ussr").css("width",this.scale(100)+"px"),$(".milops_ussr").css("height",this.scale(100)+"px"),$(".milops_ussr").css("top",a),$(".milops_ussr").css("left",r)}},{key:"updateVictoryPoints",value:function(){if(0==this.game.state.vp_outstanding){var e=0,t=0;this.game.state.vp<=-20&&(e=this.game.state.vp_ps[0].top,t=this.game.state.vp_ps[0].left),-19==this.game.state.vp&&(e=this.game.state.vp_ps[1].top,t=this.game.state.vp_ps[1].left),-18==this.game.state.vp&&(e=this.game.state.vp_ps[2].top,t=this.game.state.vp_ps[2].left),-17==this.game.state.vp&&(e=this.game.state.vp_ps[3].top,t=this.game.state.vp_ps[3].left),-16==this.game.state.vp&&(e=this.game.state.vp_ps[4].top,t=this.game.state.vp_ps[4].left),-15==this.game.state.vp&&(e=this.game.state.vp_ps[5].top,t=this.game.state.vp_ps[5].left),-14==this.game.state.vp&&(e=this.game.state.vp_ps[6].top,t=this.game.state.vp_ps[6].left),-13==this.game.state.vp&&(e=this.game.state.vp_ps[7].top,t=this.game.state.vp_ps[7].left),-12==this.game.state.vp&&(e=this.game.state.vp_ps[8].top,t=this.game.state.vp_ps[8].left),-11==this.game.state.vp&&(e=this.game.state.vp_ps[9].top,t=this.game.state.vp_ps[9].left),-10==this.game.state.vp&&(e=this.game.state.vp_ps[10].top,t=this.game.state.vp_ps[10].left),-9==this.game.state.vp&&(e=this.game.state.vp_ps[11].top,t=this.game.state.vp_ps[11].left),-8==this.game.state.vp&&(e=this.game.state.vp_ps[12].top,t=this.game.state.vp_ps[12].left),-7==this.game.state.vp&&(e=this.game.state.vp_ps[13].top,t=this.game.state.vp_ps[13].left),-6==this.game.state.vp&&(e=this.game.state.vp_ps[14].top,t=this.game.state.vp_ps[14].left),-5==this.game.state.vp&&(e=this.game.state.vp_ps[15].top,t=this.game.state.vp_ps[15].left),-4==this.game.state.vp&&(e=this.game.state.vp_ps[16].top,t=this.game.state.vp_ps[16].left),-3==this.game.state.vp&&(e=this.game.state.vp_ps[17].top,t=this.game.state.vp_ps[17].left),-2==this.game.state.vp&&(e=this.game.state.vp_ps[18].top,t=this.game.state.vp_ps[18].left),-1==this.game.state.vp&&(e=this.game.state.vp_ps[19].top,t=this.game.state.vp_ps[19].left),0==this.game.state.vp&&(e=this.game.state.vp_ps[20].top,t=this.game.state.vp_ps[20].left),1==this.game.state.vp&&(e=this.game.state.vp_ps[21].top,t=this.game.state.vp_ps[21].left),2==this.game.state.vp&&(e=this.game.state.vp_ps[22].top,t=this.game.state.vp_ps[22].left),3==this.game.state.vp&&(e=this.game.state.vp_ps[23].top,t=this.game.state.vp_ps[23].left),4==this.game.state.vp&&(e=this.game.state.vp_ps[24].top,t=this.game.state.vp_ps[24].left),5==this.game.state.vp&&(e=this.game.state.vp_ps[25].top,t=this.game.state.vp_ps[25].left),6==this.game.state.vp&&(e=this.game.state.vp_ps[26].top,t=this.game.state.vp_ps[26].left),7==this.game.state.vp&&(e=this.game.state.vp_ps[27].top,t=this.game.state.vp_ps[27].left),8==this.game.state.vp&&(e=this.game.state.vp_ps[28].top,t=this.game.state.vp_ps[28].left),9==this.game.state.vp&&(e=this.game.state.vp_ps[29].top,t=this.game.state.vp_ps[29].left),10==this.game.state.vp&&(e=this.game.state.vp_ps[30].top,t=this.game.state.vp_ps[30].left),11==this.game.state.vp&&(e=this.game.state.vp_ps[31].top,t=this.game.state.vp_ps[31].left),12==this.game.state.vp&&(e=this.game.state.vp_ps[32].top,t=this.game.state.vp_ps[32].left),13==this.game.state.vp&&(e=this.game.state.vp_ps[33].top,t=this.game.state.vp_ps[33].left),14==this.game.state.vp&&(e=this.game.state.vp_ps[34].top,t=this.game.state.vp_ps[34].left),15==this.game.state.vp&&(e=this.game.state.vp_ps[35].top,t=this.game.state.vp_ps[35].left),16==this.game.state.vp&&(e=this.game.state.vp_ps[36].top,t=this.game.state.vp_ps[36].left),17==this.game.state.vp&&(e=this.game.state.vp_ps[37].top,t=this.game.state.vp_ps[37].left),18==this.game.state.vp&&(e=this.game.state.vp_ps[38].top,t=this.game.state.vp_ps[38].left),19==this.game.state.vp&&(e=this.game.state.vp_ps[39].top,t=this.game.state.vp_ps[39].left),this.game.state.vp>=20&&(e=this.game.state.vp_ps[40].top,t=this.game.state.vp_ps[40].left),1==this.app.BROWSER&&(this.game.state.vp>19&&this.endGame("us","victory point track"),this.game.state.vp<-19&&this.endGame("ussr","victory point track"),e=this.scale(e),t=this.scale(t),e+="px",t+="px",$(".vp").css("width",this.scale(120)+"px"),$(".vp").css("height",this.scale(120)+"px"),$(".vp").css("top",e),$(".vp").css("left",t))}}},{key:"mobileCardSelect",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"play",n=this;n.hideCard(),n.showPlayableCard(e),$(".cardbox_menu_playcard").html(r),$(".cardbox_menu_playcard").css("display","block"),$(".cardbox_menu_playcard").off(),$(".cardbox_menu_playcard").on("click",(function(){$(".cardbox_menu").css("display","none"),n.hideCard(),a(),$(this).hide(),$(".cardbox-exit").hide()})),$(".cardbox-exit").off(),$(".cardbox-exit").on("click",(function(){n.hideCard(),$(".cardbox_menu_playcard").css("display","none"),$(this).css("display","none")}))}},{key:"returnCardImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a="cardimg";1==t&&(a="cardimg-hud");var r=this.game.deck[0].cards[e];if(null==r&&(r=this.game.deck[0].discards[e]),null==r&&(r=this.game.deck[0].removed[e]),null==r)return'<div class="noncard">'+e+"</div>";var n='<img class="'.concat(a,'" src="/twilight/img/').concat(this.lang,"/").concat(r.img,'.svg" />');if(r.img.indexOf("png")>-1)n='<img class="'.concat(a,'" src="/twilight/img/').concat(this.lang,"/").concat(r.img,'.png" />');else switch(0==r.p&&(n+='<img class="'.concat(a,'" src="/twilight/img/EarlyWar.svg" />')),1==r.p&&(n+='<img class="'.concat(a,'" src="/twilight/img/MidWar.svg" />')),2==r.p&&(n+='<img class="'.concat(a,'" src="/twilight/img/LateWar.svg" />')),r.player){case"both":n+='<img class="'.concat(a,'" src="/twilight/img/BothPlayerCard.svg" />'),r.ops&&(n+='<img class="'.concat(a,'" src="/twilight/img/White').concat(r.ops,'.svg" />'),n+='<img class="'.concat(a,'" src="/twilight/img/Black').concat(r.ops,'.svg" />'));break;case"us":n+='<img class="'.concat(a,'" src="/twilight/img/AmericanPlayerCard.svg" />'),r.ops&&(n+='<img class="'.concat(a,'" src="/twilight/img/Black').concat(r.ops,'.svg" />'));break;case"ussr":n+='<img class="'.concat(a,'" src="/twilight/img/SovietPlayerCard.svg" />'),r.ops&&(n+='<img class="'.concat(a,'" src="/twilight/img/White').concat(r.ops,'.svg" />'))}return 1==r.scoring?n+='<img class="'.concat(a,'" src="/twilight/img/MayNotBeHeld.svg" />'):0==r.recurring&&(r.img.indexOf("png")>-1||(n+='<img class="'.concat(a,'" src="/twilight/img/RemoveFromPlay.svg" />'))),n}},{key:"showCard",value:function(e){var t=this.returnCardImage(e),a=this.app.browser.isMobileBrowser(navigator.userAgent)?"".concat(t,'\n        <div id="cardbox-exit-background">\n          <div class="cardbox-exit" id="cardbox-exit">×</div>\n        </div>'):t;$("#cardbox").html(a),$("#cardbox").show()}},{key:"showPlayableCard",value:function(e){var t=this.returnCardImage(e),a=this.app.browser.isMobileBrowser(navigator.userAgent)?"".concat(t,'\n      <div id="cardbox-exit-background">\n        <div class="cardbox-exit" id="cardbox-exit">×</div>\n      </div>\n      <div class="cardbox_menu_playcard cardbox_menu_btn" id="cardbox_menu_playcard">\n        PLAY\n      </div>'):t;$("#cardbox").html(a),$("#cardbox").show()}},{key:"hideCard",value:function(){this.cardbox.hideCardbox(1)}},{key:"returnGameOptionsHTML",value:function(){return'\n\n    <div class="long-scroll">\n      <div>\n\t      <div class="overlay-input">\n            <label for="player1">Play as:</label>\n            <select name="player1">\n              <option value="random" selected>random</option>\n              <option value="ussr">USSR</option>\n              <option value="us">US</option>\n            </select>\n        </div>\n\n        <div class="overlay-input">\n            <label for="deck">Deck:</label>\n            <select name="deck" id="deckselect" onchange=\'\n\t      if ($("#deckselect").val() == "saito") { \n\t\t$(".saito_edition").prop("checked",true); \n\t\t$(".endofhistory_edition").prop("checked", false); \n\t      } else { \n\t\t$(".saito_edition").prop("checked", false); \n\t        if ($("#deckselect").val() == "optional") { \n\t\t  $(".optional_edition").prop("checked", false); \n\t \t} else { \n\t\t  $(".optional_edition").prop("checked", true); \n\t\t  if ($("#deckselect").val() == "endofhistory") { \n\t\t    $(".endofhistory_edition").prop("checked",true); \n\t\t    $(".optional_edition").prop("checked", false);\n\t\t  } else {\n\t\t    if ($("#deckselect").val() == "coldwarcrazies") { \n\t\t      $(".coldwarcrazies_edition").prop("checked",true); \n\t\t      $(".optional_edition").prop("checked", false);\n\t\t    } else {\n\t\t      if ($("#deckselect").val() == "absurdum") { \n\t\t        $(".absurdum_edition").prop("checked",true); \n\t\t        $(".optional_edition").prop("checked",true);\n\t\t      }\n\t\t    }\n\t\t  }\n\t\t}\n\t      } \'>\n            <option value="original">original</option>\n              <option value="optional" selected>optional</option>\n              <option value="saito">saito edition</option>\n              <option value="absurdum">twilight absurdum</option>\n              <option value="endofhistory">end of history</option>\n              <option value="coldwarcrazies">cold war crazies</option>\n            </select>\n        </div>\n\n        <div class="overlay-input">\n            <label for="usbonus">US bonus: </label>\n            <select name="usbonus">\n              <option value="0">0</option>\n              <option value="1">1</option>\n              <option value="2" selected>2</option>\n              <option value="3">3</option>\n              <option value="4">4</option>\n              <option value="5">5</option>\n              <option value="6">6</option>\n              <option value="7">7</option>\n              <option value="8">8</option>\n              <option value="9">9</option>\n              <option value="10">10</option>\n            </select>\n        </div>\n\n        <div class="overlay-input">\n            <label for="clock">Player Time Limit:</label>\n            <select name="clock">\n              <option value="0" default>no limit</option>\n              <option value="10">10 minutes</option>\n              <option value="20">20 minutes</option>\n              <option value="30">30 minutes</option>\n              <option value="45">45 minutes</option>\n              <option value="60">60 minutes</option>\n              <option value="90">90 minutes</option>\n              <option value="120">120 minutes</option>\n            </select>\n        </div>\n\n        <div class="overlay-input">\n            <label for="observer_mode">Observer Mode:</label>\n            <select name="observer">\n              <option value="enable" selected>enable</option>\n              <option value="disable">disable</option>\n            </select>\n        </div>\n\t    <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n    </div>\n\n      <div id="game-wizard-advanced-box" class="game-wizard-advanced-box" style="display:block;padding-left:20px;">\n\n        <style type="text/css">\n          li { list-style: none; } \n          .saito-select { margin-bottom: 10px; margin-top:5px; } \n          .removecards { grid-gap: 0.1em; } \n          .list-header { \n            font-weight: bold; \n            font-size:1.5em; \n            margin-top:0px; \n            margin-bottom:10px; \n            margin-left: 15px; \n            text-transform: uppercase; \n          } \n        </style>\n              <div class="list-header">remove cards:</div>\n              <ul id="removecards" class="removecards">\n              <li><input class="remove_card" type="checkbox" name="asia" /> Asia Scoring</li>\n              <li><input class="remove_card" type="checkbox" name="europe" /> Europe Scoring</li>\n              <li><input class="remove_card" type="checkbox" name="mideast" /> Middle-East Scoring</li>\n              <li><input class="remove_card" type="checkbox" name="duckandcover" /> Duck and Cover</li>\n              <li><input class="remove_card" type="checkbox" name="fiveyearplan" /> Five Year Plan</li>\n              <li><input class="remove_card" type="checkbox" name="socgov" /> Socialist Governments</li>\n              <li><input class="remove_card" type="checkbox" name="fidel" /> Fidel</li>\n              <li><input class="remove_card" type="checkbox" name="vietnamrevolts" /> Vietnam Revolts</li>\n              <li><input class="remove_card" type="checkbox" name="blockade" /> Blockade</li>\n              <li><input class="remove_card" type="checkbox" name="koreanwar" /> Korean War</li>\n              <li><input class="remove_card" type="checkbox" name="romanianab" /> Romanian Abdication</li>\n              <li><input class="remove_card" type="checkbox" name="arabisraeli" /> Arab Israeli War</li>\n              <li><input class="remove_card" type="checkbox" name="comecon" /> Comecon</li>\n              <li><input class="remove_card" type="checkbox" name="nasser" /> Nasser</li>\n              <li><input class="remove_card" type="checkbox" name="warsawpact" /> Warsaw Pact</li>\n              <li><input class="remove_card" type="checkbox" name="degaulle" /> De Gaulle Leads France</li>\n              <li><input class="remove_card" type="checkbox" name="naziscientist" /> Nazi Scientists Captured</li>\n              <li><input class="remove_card" type="checkbox" name="truman" /> Truman</li>\n              <li><input class="remove_card saito_edition" type="checkbox" name="olympic" /> Olympic Games</li>\n              <li><input class="remove_card" type="checkbox" name="nato" /> NATO</li>\n              <li><input class="remove_card" type="checkbox" name="indreds" /> Independent Reds</li>\n              <li><input class="remove_card" type="checkbox" name="marshall" /> Marshall Plan</li>\n              <li><input class="remove_card" type="checkbox" name="indopaki" /> Indo-Pakistani War</li>\n              <li><input class="remove_card" type="checkbox" name="containment" /> Containment</li>\n              <li><input class="remove_card" type="checkbox" name="cia" /> CIA Created</li>\n              <li><input class="remove_card" type="checkbox" name="usjapan" /> US/Japan Defense Pact</li>\n              <li><input class="remove_card" type="checkbox" name="suezcrisis" /> Suez Crisis</li>\n              <li><input class="remove_card" type="checkbox" name="easteuropean" /> East European Unrest</li>\n              <li><input class="remove_card" type="checkbox" name="decolonization" /> Decolonization</li>\n              <li><input class="remove_card" type="checkbox" name="redscare" /> Red Scare</li>\n              <li><input class="remove_card" type="checkbox" name="unintervention" /> UN Intervention</li>\n              <li><input class="remove_card" type="checkbox" name="destalinization" /> Destalinization</li>\n              <li><input class="remove_card" type="checkbox" name="nucleartestban" /> Nuclear Test Ban Treaty</li>\n              <li><input class="remove_card" type="checkbox" name="formosan" /> Formosan Resolution</li>\n              <li><input class="remove_card optional_edition" type="checkbox" name="defectors" /> Defectors</li>\n              <li><input class="remove_card optional_edition " type="checkbox" name="specialrelation" /> Special Relationship</li>\n              <li><input class="remove_card optional_edition" type="checkbox" name="cambridge" /> The Cambridge Five</li>\n              <li><input class="remove_card optional_edition" type="checkbox" name="norad" /> NORAD</li>\n            </ul>\n            <ul class="removecards" style="clear:both;margin-top:13px">\n              <li><input class="remove_card" type="checkbox" name="brushwar" /> Brush War</li>\n              <li><input class="remove_card" type="checkbox" name="centralamerica" /> Central America Scoring</li>\n              <li><input class="remove_card" type="checkbox" name="seasia" /> Southeast Asia Scoring</li>\n              <li><input class="remove_card" type="checkbox" name="armsrace" /> Arms Race</li>\n              <li><input class="remove_card" type="checkbox" name="cubanmissile" /> Cuban Missile Crisis</li>\n              <li><input class="remove_card" type="checkbox" name="nuclearsubs" /> Nuclear Subs</li>\n              <li><input class="remove_card" type="checkbox" name="quagmire" /> Quagmire</li>\n              <li><input class="remove_card" type="checkbox" name="saltnegotiations" /> Salt Negotiations</li>\n              <li><input class="remove_card" type="checkbox" name="beartrap" /> Bear Trap</li>\n              <li><input class="remove_card saito_edition" type="checkbox" name="summit" /> Summit</li>\n              <li><input class="remove_card" type="checkbox" name="howilearned" /> How I Learned to Stop Worrying</li>\n              <li><input class="remove_card" type="checkbox" name="junta" /> Junta</li>\n              <li><input class="remove_card" type="checkbox" name="kitchendebates" /> Kitchen Debates</li>\n              <li><input class="remove_card" type="checkbox" name="missileenvy" /> Missile Envy</li>\n              <li><input class="remove_card" type="checkbox" name="wwby" /> We Will Bury You</li>\n              <li><input class="remove_card" type="checkbox" name="brezhnev" /> Brezhnev Doctrine</li>\n              <li><input class="remove_card" type="checkbox" name="portuguese" /> Portuguese Empire Crumbles</li>\n              <li><input class="remove_card" type="checkbox" name="southafrican" /> South African Unrest</li>\n              <li><input class="remove_card" type="checkbox" name="allende" /> Allende</li>\n              <li><input class="remove_card" type="checkbox" name="willybrandt" /> Willy Brandt</li>\n              <li><input class="remove_card" type="checkbox" name="muslimrevolution" /> Muslim Revolution</li>\n              <li><input class="remove_card" type="checkbox" name="abmtreaty" /> ABM Treaty</li>\n              <li><input class="remove_card" type="checkbox" name="culturalrev" /> Cultural Revolution</li>\n              <li><input class="remove_card" type="checkbox" name="flowerpower" /> Flower Power</li>\n              <li><input class="remove_card" type="checkbox" name="u2" /> U-2 Incident</li>\n              <li><input class="remove_card" type="checkbox" name="opec" /> OPEC</li>\n              <li><input class="remove_card" type="checkbox" name="lonegunman" /> Lone Gunman</li>\n              <li><input class="remove_card" type="checkbox" name="colonial" /> Colonial</li>\n              <li><input class="remove_card" type="checkbox" name="panamacanal" /> Panama Canal</li>\n              <li><input class="remove_card" type="checkbox" name="campdavid" /> Camp David Accords</li>\n              <li><input class="remove_card" type="checkbox" name="puppet" /> Puppet Governments</li>\n              <li><input class="remove_card" type="checkbox" name="grainsales" /> Grain Sales to Soviets</li>\n              <li><input class="remove_card" type="checkbox" name="johnpaul" /> John Paul</li>\n              <li><input class="remove_card" type="checkbox" name="deathsquads" /> Death Squads</li>\n              <li><input class="remove_card" type="checkbox" name="oas" /> OAS Founded</li>\n              <li><input class="remove_card" type="checkbox" name="nixon" /> Nixon Plays the China Card</li>\n              <li><input class="remove_card" type="checkbox" name="sadat" /> Sadat Expels Soviets</li>\n              <li><input class="remove_card" type="checkbox" name="shuttle" /> Shuttle Diplomacy</li>\n              <li><input class="remove_card" type="checkbox" name="voiceofamerica" /> Voice of America</li>\n              <li><input class="remove_card" type="checkbox" name="liberation" /> Liberation Theology</li>\n              <li><input class="remove_card" type="checkbox" name="ussuri" /> Ussuri River Skirmish</li>\n              <li><input class="remove_card" type="checkbox" name="asknot" /> Ask Not What Your Country Can Do For You</li>\n              <li><input class="remove_card" type="checkbox" name="alliance" /> Alliance for Progress</li>\n              <li><input class="remove_card" type="checkbox" name="africa" /> Africa Scoring</li>\n              <li><input class="remove_card" type="checkbox" name="onesmallstep" /> One Small Step</li>\n              <li><input class="remove_card" type="checkbox" name="southamerica" /> South America</li>\n              <li><input class="remove_card optional_edition" type="checkbox" name="che" /> Che</li>\n              <li><input class="remove_card optional_edition" type="checkbox" name="tehran" /> Our Man in Tehran</li>\n            </ul>\n            <ul class="removecards" style="clear:both;margin-top:13px">\n              <li><input class="remove_card" type="checkbox" name="iranianhostage" /> Iranian Hostage Crisis</li>\n              <li><input class="remove_card" type="checkbox" name="ironlady" /> The Iron Lady</li>\n              <li><input class="remove_card" type="checkbox" name="reagan" /> Reagan Bombs Libya</li>\n              <li><input class="remove_card" type="checkbox" name="starwars" /> Star Wars</li>\n              <li><input class="remove_card" type="checkbox" name="northseaoil" /> North Sea Oil</li>\n              <li><input class="remove_card" type="checkbox" name="reformer" /> The Reformer</li>\n              <li><input class="remove_card" type="checkbox" name="marine" /> Marine Barracks Bombing</li>\n              <li><input class="remove_card" type="checkbox" name="KAL007" /> Soviets Shoot Down KAL-007</li>\n              <li><input class="remove_card" type="checkbox" name="glasnost" /> Glasnost</li>\n              <li><input class="remove_card" type="checkbox" name="ortega" /> Ortega Elected in Nicaragua</li>\n              <li><input class="remove_card" type="checkbox" name="terrorism" /> Terrorism</li>\n              <li><input class="remove_card" type="checkbox" name="ironcontra" /> Iran Contra Scandal</li>\n              <li><input class="remove_card" type="checkbox" name="chernobyl" /> Chernobyl</li>\n              <li><input class="remove_card" type="checkbox" name="debtcrisis" /> Latin American Debt Crisis</li>\n              <li><input class="remove_card" type="checkbox" name="teardown" /> Tear Down this Wall</li>\n              <li><input class="remove_card" type="checkbox" name="evilempire" /> An Evil Empire</li>\n              <li><input class="remove_card" type="checkbox" name="aldrichames" /> Aldrich Ames Remix</li>\n              <li><input class="remove_card" type="checkbox" name="pershing" /> Pershing II Deployed</li>\n              <li><input class="remove_card" type="checkbox" name="wargames" /> Wargames</li>\n              <li><input class="remove_card" type="checkbox" name="solidarity" /> Solidarity</li>\n              <li><input class="remove_card optional_edition" type="checkbox" name="iraniraq" /> Iran-Iraq War</li>\n              <li><input class="remove_card optional_edition" type="checkbox" name="yuri" /> Yuri and Samantha</li>\n              <li><input class="remove_card optional_edition" type="checkbox" name="awacs" /> AWACS Sale to Saudis</li>\n            </ul>\n\n            <div class="list-header">add cards:</div>\n            <ul id="removecards" class="removecards">\n              <li><input class="remove_card saito_edition" type="checkbox" name="culturaldiplomacy" /> Cultural Diplomacy (Early-War)</li>\n              <li><input class="remove_card saito_edition" type="checkbox" name="handshake" /> Handshake in Space (Mid-War)</li>\n              <li><input class="remove_card saito_edition" type="checkbox" name="rustinredsquare" /> Rust Lands in Red Square (Late-War)</li>\n              <li><input class="remove_card" type="checkbox" name="gouzenkoaffair" /> Gouzenko Affair (Early-War)</li>\n              <li><input class="remove_card" type="checkbox" name="poliovaccine" /> Polio Vaccine (Early-War)</li>\n              <li><input class="remove_card saito_edition" type="checkbox" name="berlinagreement" /> 1971 Berlin Agreement (Mid-War)</li>\n              <li><input class="remove_card endofhistory_edition" type="checkbox" name="peronism" /> Peronism (Early-War)</li>\n              <li><input class="remove_card endofhistory_edition" type="checkbox" name="manwhosavedtheworld" /> The Man Who Saved the World (Mid-War)</li>\n              <li><input class="remove_card endofhistory_edition" type="checkbox" name="breakthroughatlopnor" /> Breakthrough at Lop Nor (Mid-War)</li>\n              <li><input class="remove_card endofhistory_edition" type="checkbox" name="nationbuilding" /> Nation Building (Mid-War)</li>\n              <li><input class="remove_card endofhistory_edition" type="checkbox" name="greatsociety" /> Great Society (Mid-War)</li>\n              <li><input class="remove_card endofhistory_edition" type="checkbox" name="perestroika"  /> Perestroika (Late-War)</li>\n              <li><input class="remove_card endofhistory_edition" type="checkbox" name="eurocommunism" /> Eurocommunism (Mid-War)</li>\n              <li><input class="remove_card endofhistory_edition" type="checkbox" name="inftreaty" /> INF Treaty (Late-War)</li>\n              <li><input class="remove_card coldwarcrazies_edition" type="checkbox" name="communistrevolution" /> Communist Revolution (Early-War)</li>\n            </ul>\n\n        <p class="blank">&nbsp;</p>\n      </div>\n    </div>\n          '}},{key:"settleVPOutstanding",value:function(){0!=this.game.state.vp_outstanding&&(this.game.state.vp+=this.game.state.vp_outstanding),this.game.state.vp_outstanding=0,this.updateVictoryPoints()}},{key:"addShowCardEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.changeable_callback=e,this.hud.attachCardEvents(this.app,this)}},{key:"addLogCardEvents",value:function(){try{var e=this;this.app.browser.isMobileBrowser(navigator.userAgent)?($(".logcard").off(),$(".logcard").on("click",(function(){var t=$(this).attr("id");e.showCard(t),$(".cardbox-exit").off(),$(".cardbox-exit").on("click",(function(){e.hideCard(),$(".cardbox_menu_playcard").css("display","none"),$(this).css("display","none")}))}))):($(".logcard").off(),$(".logcard").mouseover((function(){var t=$(this).attr("id");e.showCard(t)})).mouseout((function(){var t=$(this).attr("id");e.hideCard(t)})))}catch(e){}}},{key:"returnFormattedGameOptions",value:function(e){var t={};for(var a in e)"player1"==a?"random"==e[a]?t[a]=e[a]:t[a]="ussr"==e[a]?"us":"ussr":t[a]=e[a];return t}},{key:"formatStatusHeader",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r='<i class="fa fa-arrow-left" id="back_button"></i>';return'\n    <div class="status-header">\n      '.concat(a?r:"",'\n      <div style="text-align: center;">\n        ').concat(e,'\n      </div>\n    </div>\n    <div class="status-message">\n      ').concat(t,"\n    </div>\n    ")}},{key:"displayChinaCard",value:function(){$(".china_card_status").removeClass("china_card_status_us_facedown"),$(".china_card_status").removeClass("china_card_status_us_faceup"),$(".china_card_status").removeClass("china_card_status_ussr_facedown"),$(".china_card_status").removeClass("china_card_status_ussr_faceup"),"ussr"===this.whoHasTheChinaCard()?0==this.game.state.events.china_card_facedown?$(".china_card_status").addClass("china_card_status_ussr_faceup"):$(".china_card_status").addClass("china_card_status_ussr_facedown"):0==this.game.state.events.china_card_facedown?$(".china_card_status").addClass("china_card_status_us_faceup"):$(".china_card_status").addClass("china_card_status_us_facedown")}},{key:"playEvent",value:function(e,t){var a,r,n,i=this;if(null==this.game.deck[0].cards[t])return console.log("sync loading error -- playEvent on card: "+t),1;if(this.updateStatus("<div class='status-message' id='status-message'><span>Playing event:</span> <span>"+this.game.deck[0].cards[t].name+"</span></div>"),"abmtreaty"==t){this.updateStatus('<div class="status-message" id="status-message">'+e.toUpperCase()+" <span>plays ABM Treaty</span></div>"),this.updateLog("DEFCON increases by 1"),this.game.state.defcon++,this.game.state.defcon>5&&(this.game.state.defcon=5),this.updateDefcon();var s=0;return"us"==e&&2==this.game.player&&(s=1),"ussr"==e&&1==this.game.player&&(s=1),1==s&&(this.addMove("resolve\tabmtreaty"),this.addMove("ops\t"+e+"\tabmtreaty\t4"),this.endTurn()),0}if("africa"==t){var o=this.calculateScoring("africa"),l=o.us.vp-o.ussr.vp;return this.game.state.vp+=l,this.updateLog("<span>Africa:</span> "+l+" <span>VP</span>"),"us"==e&&this.game.state.stats.us_scorings++,"ussr"==e&&this.game.state.stats.ussr_scorings++,this.updateVictoryPoints(),1}if("aldrichames"==t){if(this.game.state.events.aldrich=1,1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is revealing its cards to USSR</div>"),0;if(2==this.game.player){this.updateStatus("<div class='status-message' id='status-message'>USSR is playing Aldrich Ames</div>"),this.addMove("resolve\taldrichames"),this.game.deck[0].hand.length<1&&(this.addMove("notify\tUS has no cards to reveal"),this.endTurn());for(var u=this.game.deck[0].hand.length,d=0;d<this.game.deck[0].hand.length;d++)"china"===this.game.deck[0].hand[d]||this.game.deck[0].hand[d]==this.game.state.headline_opponent_card||this.game.deck[0].hand[d]==this.game.state.headline_card?u--:this.addMove(this.game.deck[0].hand[d]);""==u?(this.addMove("notify\tUS has no cards to reveal"),this.endTurn()):(this.addMove("aldrich\tus\t"+u),this.endTurn())}return 0}if("allende"==t)return this.placeInfluence("chile",2,"ussr"),1;if("alliance"==t){var p=0;return 1==this.isControlled("us","mexico")&&p++,1==this.isControlled("us","cuba")&&p++,1==this.isControlled("us","panama")&&p++,1==this.isControlled("us","chile")&&p++,1==this.isControlled("us","argentina")&&p++,1==this.isControlled("us","brazil")&&p++,1==this.isControlled("us","venezuela")&&p++,this.game.state.vp+=p,this.updateVictoryPoints(),this.updateLog("<span>US VP bonus is:</span> "+p),1}if("arabisraeli"==t){if(1==this.game.state.events.campdavid)return this.updateLog("Arab-Israeli conflict cancelled by Camp David Accords"),1;var h=4;1==this.isControlled("us","israel")&&h++,1==this.isControlled("us","egypt")&&h++,1==this.isControlled("us","jordan")&&h++,1==this.isControlled("us","lebanon")&&h++,1==this.isControlled("us","syria")&&h++;var f=h-4,m=this.rollDice(6);return this.updateLog("<span>"+e.toUpperCase()+"</span> <span>rolls:</span> "+m),this.updateLog("<span>"+e.toUpperCase()+"</span> <span>modified:</span> "+(m-f)),m>=h?(this.updateLog("USSR wins the Arab-Israeli War"),this.placeInfluence("israel",this.countries.israel.us,"ussr"),this.removeInfluence("israel",this.countries.israel.us,"us"),this.updateLog("USSR receives 2 VP from Arab-Israeli War"),this.game.state.vp-=2,this.game.state.milops_ussr+=2,this.updateVictoryPoints(),this.updateMilitaryOperations()):(this.updateLog("US wins the Arab-Israeli War"),this.game.state.milops_ussr+=2,this.updateMilitaryOperations()),1}if("armsrace"==t)return this.game.player,"us"==e?this.game.state.milops_us>this.game.state.milops_ussr&&(this.updateLog("US gains 1 VP from Arms Race"),this.game.state.vp+=1,this.game.state.milops_us>=this.game.state.defcon&&(this.updateLog("US gains 2 bonus VP rom Arms Race"),this.game.state.vp+=2)):this.game.state.milops_ussr>this.game.state.milops_us&&(this.updateLog("USSR gains 1 VP from Arms Race"),this.game.state.vp-=1,this.game.state.milops_ussr>=this.game.state.defcon&&(this.updateLog("USSR gains 2 bonus VP from Arms Race"),this.game.state.vp-=2)),this.updateVictoryPoints(),1;if("asia"==t){var g=this.calculateScoring("asia"),b=g.us.vp-g.ussr.vp;return this.game.state.vp+=b,this.updateLog("<span>Asia:</span> "+b+" <span>VP</span>"),this.updateVictoryPoints(),"us"==e&&this.game.state.stats.us_scorings++,"ussr"==e&&this.game.state.stats.ussr_scorings++,1}if("asknot"==t){if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>Waiting for US to play Ask Not What Your Country Can Do For You</div>"),0;if(2==this.game.player){for(var y=this,v=0,_=0,w="<div class='status-message' id='status-message'>Select cards to discard:<ul>",x=0;x<this.game.deck[0].hand.length;x++)"china"!=this.game.deck[0].hand[x]&&this.game.deck[0].hand[x]!=this.game.state.headline_opponent_card&&this.game.deck[0].hand!=this.game.state.headline_card&&(w+='<li class="card showcard card_'+this.game.deck[0].hand[x]+'" id="'+this.game.deck[0].hand[x]+'">'+this.game.deck[0].cards[this.game.deck[0].hand[x]].name+"</li>",_++);if(0==_)return y.addMove("notify\tUS has no cards available to discard"),void y.endTurn();w+='</ul> When you are done discarding <span class="card dashed showcard nocard" id="finished">click here</span>.</div>',y.updateStatus(w),y.addMove("resolve\tasknot"),y.addShowCardEvents((function(e){if("finished"==e){if(1==y.game.state.events.aldrich&&y.addMove("aldrichreveal\tus"),y.addMove("DEAL\t1\t2\t"+v),v>y.game.deck[0].crypt.length){var t=y.returnDiscardedCards();1==this.game.state.events.shuttlediplomacy&&null!=t.shuttle&&delete t.shuttle,Object.keys(t).length>0&&(y.addMove("SHUFFLE\t1"),y.addMove("DECKRESTORE\t1"),y.addMove("DECKENCRYPT\t1\t2"),y.addMove("DECKENCRYPT\t1\t1"),y.addMove("DECKXOR\t1\t2"),y.addMove("DECKXOR\t1\t1"),y.addMove("flush\tdiscards"),y.addMove("DECK\t1\t"+JSON.stringify(t)),y.addMove("DECKBACKUP\t1"),y.updateLog("cards remaining: "+y.game.deck[0].crypt.length),y.updateLog("Shuffling discarded cards back into the deck..."))}y.endTurn()}else v++,$(".card_"+e).hide(),y.removeCardFromHand(e),y.addMove("discard\tus\t"+e)}))}return 0}if("awacs"==t)return this.game.state.events.awacs=1,this.countries.saudiarabia.us+=2,this.showInfluence("saudiarabia","us"),1;if("beartrap"==t)return this.game.state.events.beartrap=1,1;if("blockade"==t){if(1==this.game.state.events.optional.berlinagreement)return this.updateLog("Berlin Agreement prevents Blockade."),1;if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is responding to Blockade</div>"),0;if(2==this.game.player){this.addMove("resolve\tblockade");for(var k=this,S=0,P=0;P<this.game.deck[0].hand.length;P++)"china"!=this.game.deck[0].hand[P]&&this.modifyOps(this.game.deck[0].cards[this.game.deck[0].hand[P]].ops,this.game.deck[0].hand[P],this.game.player,0)>=3&&(S=1);return 0==S?(this.updateStatus("<div class='status-message' id='status-message'>Blockade played: no cards available to discard.</div>"),this.addMove("remove\tus\tus\twestgermany\t"+this.countries.westgermany.us),this.addMove("notify\tUS removes all influence from West Germany"),this.removeInfluence("westgermany",this.countries.westgermany.us,"us"),this.endTurn(),0):(this.updateStatus('<div class="status-message" id="status-message"><span>Blockade triggers:</span><ul><li class="card" id="discard">discard 3 OP card</li><li class="card" id="remove">remove all US influence in W. Germany</li></ul></div>'),k.addShowCardEvents((function(e){if("discard"==e){for(var t='<div class="status-message" id="status-message"><span>Choose a card to discard:</span><ul>',a=0;a<k.game.deck[0].hand.length;a++)k.modifyOps(k.game.deck[0].cards[k.game.deck[0].hand[a]].ops,k.game.deck[0].hand[a],k.game.player,0)>=3&&"china"!=k.game.deck[0].hand[a]&&(t+='<li class="card showcard" id="'+k.game.deck[0].hand[a]+'">'+k.game.deck[0].cards[k.game.deck[0].hand[a]].name+"</li>");t+="</ul></div>",k.updateStatus(t),k.addShowCardEvents((function(e){return k.removeCardFromHand(e),k.addMove("notify\tus discarded "+e),k.endTurn(),0}))}if("remove"==e)return k.updateStatus("<div class='status-message' id='status-message'>Blockade played: no cards available to discard.</div>"),k.addMove("remove\tus\tus\twestgermany\t"+k.countries.westgermany.us),k.removeInfluence("westgermany",k.countries.westgermany.us,"us"),k.endTurn(),0})),0)}}if("brezhnev"==t)return this.game.state.events.brezhnev=1,1;if("brushwar"==t){var E=function(){var t="ussr",a="us";if(2==i.game.player&&(a="ussr",t="us"),t!=e)return i.rollDice(6),{v:0};if(t==e)for(L in(y=i).playerFinishedPlacingInfluence(),y.addMove("resolve\tbrushwar"),y.updateStatus('<div class="status-message" id="status-message">Pick target for Brush War</div>'),y.countries)if(y.countries[L].control<=2){var r="#"+L;$(r).off(),$(r).on("click",(function(){var e=$(this).attr("id");if("italy"!==e&&"greece"!==e&&"spain"!==e&&"turkey"!==e||1!=y.game.state.events.nato||1!=y.isControlled("us",e)){y.displayModal("Launching Brush War in "+y.countries[e].name);for(var r=y.rollDice(6),n=0,i=0;i<y.countries[e].neighbours.length;i++)1==y.isControlled(a,y.countries[e].neighbours[i])&&n++;if(1==y.game.player&&("mexico"===e&&n++,"cuba"===e&&n++,"japan"===e&&n++,"canada"===e&&n++),2==y.game.player&&("finland"===e&&n++,"romania"===e&&n++,"afghanistan"===e&&n++,"northkorea"===e&&n++),(r-=n)>=3){var s=y.countries[e].us,o=y.countries[e].ussr;"us"==t?(y.removeInfluence(e,o,"ussr"),y.placeInfluence(e,o,"us"),y.addMove("remove\tus\tussr\t"+e+"\t"+o),y.addMove("place\tus\tus\t"+e+"\t"+o),y.addMove("milops\tus\t3"),1==y.game.state.events.flowerpower?y.addMove("vp\tus\t1\t1"):y.addMove("vp\tus\t1")):(y.removeInfluence(e,s,"us"),y.placeInfluence(e,s,"ussr"),y.addMove("remove\tussr\tus\t"+e+"\t"+s),y.addMove("place\tussr\tussr\t"+e+"\t"+s),y.addMove("milops\tussr\t3"),1==y.game.state.events.flowerpower?y.addMove("vp\tussr\t1\t1"):y.addMove("vp\tussr\t1")),y.addMove("notify\tBrush War in "+y.countries[e].name+" succeeded."),y.addMove("notify\tBrush War modified: "+(r-n)),y.addMove("notify\tBrush War rolls: "+r),y.endTurn()}else"us"==t?y.addMove("milops\tus\t3"):y.addMove("milops\tussr\t3"),y.addMove("notify\tBrush War in "+y.countries[e].name+" failed."),y.addMove("notify\tBrush War modified: "+(r-n)),y.addMove("notify\tBrush War rolls: "+r),y.endTurn()}else y.displayModal("NATO prevents Brush War in Europe")}))}return{v:0}}();if("object"===c(E))return E.v}if("cambridge"==t){if(this.game.state.round>7)return this.updateLog("<span>The Cambridge Five cannot be played as an event in Late Wa</span>"),this.updateStatus("<div class='status-message' id='status-message'><span>The Cambridge Five cannot be played as an event in Late War</span></div>"),1;if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'><span>USSR is playing The Cambridge Five (fetching scoring cards in US hand)</span></div>"),0;if(2==this.game.player){this.addMove("resolve\tcambridge"),this.updateStatus("<div class='status-message' id='status-message'>USSR is playing The Cambridge Five</div>");for(var C="",A="cambridge\t",M=0;M<this.game.deck[0].hand.length;M++)null!=this.game.deck[0].cards[this.game.deck[0].hand[M]]&&1==this.game.deck[0].cards[this.game.deck[0].hand[M]].scoring&&this.game.deck[0].hand[M]!=this.game.state.headline_opponent_card&&this.game.deck[0].hand[M]!=this.game.state.headline_card&&(C.length>0&&(C+=", ",A+="\t"),C+="<span>"+this.game.deck[0].hand[M]+"</span>",A+=this.game.deck[0].hand[M]);0==C.length?(this.addMove("notify\tUS does not have any scoring cards"),this.endTurn()):(this.addMove(A),this.addMove("notify\tUS has scoring cards for: "+C),this.endTurn())}return 0}if("campdavid"==t)return this.game.state.events.campdavid=1,this.updateLog("US gets 1 VP for Camp David Accords"),this.game.state.vp+=1,this.updateVictoryPoints(),this.placeInfluence("israel",1,"us"),this.placeInfluence("egypt",1,"us"),this.placeInfluence("jordan",1,"us"),1;if("centralamerica"==t){var T=this.calculateScoring("centralamerica"),j=T.us.vp-T.ussr.vp;return this.game.state.vp+=j,this.updateLog("<span>Central America:</span> "+j+" <span>VP</span>"),"us"==e&&this.game.state.stats.us_scorings++,"ussr"==e&&this.game.state.stats.ussr_scorings++,this.updateVictoryPoints(),1}if("che"==t){var O=function(){var t=i,a=0,r=3;for(L in"us"==e&&(r=i.modifyOps(3,"che",2)),"ussr"==e&&(r=i.modifyOps(3,"che",1)),i.countries){var n=L;0==t.countries[n].bg&&("africa"==t.countries[n].region||"camerica"==t.countries[n].region||"samerica"==t.countries[n].region)&&t.countries[n].us>0&&a++}if(0==a)return i.updateLog("No valid targets for Che"),{v:1};if(2==i.game.player)return i.updateStatus("<div class='status-message' id='status-message'>Waiting for USSR to play Che</div>"),{v:0};if(1==i.game.player)for(L in t.playerFinishedPlacingInfluence(),t.updateStatus("<div class='status-message' id='status-message'>Che takes effect. Pick first target for coup:<ul><li class=\"card\" id=\"skipche\">or skip coup</li></ul></div>"),t.addShowCardEvents((function(e){"skipche"==e&&(t.updateStatus("<div class='status-message' id='status-message'>Skipping Che coups...</div>"),t.addMove("resolve\tche"),t.endTurn())})),t.countries){var s=L,o="#"+L;0==t.countries[s].bg&&("africa"==t.countries[s].region||"camerica"==t.countries[s].region||"samerica"==t.countries[s].region)&&t.countries[s].us>0?($(o).off(),$(o).on("click",(function(){var e=$(this).attr("id");t.addMove("resolve\tche"),t.addMove("checoup\tussr\t"+e+"\t"+r),t.addMove("milops\tussr\t"+r),t.endTurn()}))):($(o).off(),$(o).on("click",(function(){t.displayModal("Invalid Target")})))}return{v:0}}();if("object"===c(O))return O.v}if("chernobyl"==t){if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is playing Chernobyl</div>"),0;this.updateStatus('<div class=\'status-message\' id=\'status-message\'><span>Chernobyl triggered. Designate region to prohibit USSR placement of influence from OPS: </span><ul><li class="card" id="asia">Asia</li><li class="card" id="europe">Europe</li><li class="card" id="africa">Africa</li><li class="card" id="camerica">Central America</li><li class="card" id="samerica">South America</li><li class="card" id="mideast">Middle-East</li></ul></div>');var D=this;return D.addShowCardEvents((function(e){D.addMove("resolve\tchernobyl"),D.addMove("chernobyl\t"+e),D.addMove("notify\tUS restricts placement in "+e),D.endTurn()})),0}if("china"==t)return this.game.state.events.formosan=0,"ussr"==e?(this.game.state.events.china_card=2,this.game.state.events.china_card_facedown=1,this.displayChinaCard()):(this.game.state.events.china_card=1,this.game.state.events.china_card_facedown=1,this.displayChinaCard()),1;if("cia"==t){if(2==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>USSR is playing CIA Created</div>"),0;if(1==this.game.player)if(this.addMove("resolve\tcia"),this.updateStatus("<div class='status-message' id='status-message'>US is playing CIA Created</div>"),this.game.deck[0].hand.length<1)this.addMove("ops\tus\tcia\t1"),this.addMove("setvar\tgame\tstate\tback_button_cancelled\t1"),this.addMove("notify\tUSSR has no cards to reveal"),this.endTurn();else{for(var I="",R=0;R<this.game.deck[0].hand.length;R++)R>0&&(I+=", "),I+=this.game.deck[0].cards[this.game.deck[0].hand[R]].name;this.addMove("ops\tus\tcia\t1"),this.addMove("setvar\tgame\tstate\tback_button_cancelled\t1"),this.addMove("notify\tUSSR holds: "+I),this.endTurn()}return 0}if("colonial"==t){var B=function(){var e=0,t=0;if(1==i.game.player)return i.updateStatus("<div class='status-message' id='status-message'>US is playing Colonial Rear Guards</div>"),{v:0};if(2==i.game.player){for(L in(y=i).playerFinishedPlacingInfluence(),N=4,y.addMove("resolve\tcolonial"),i.updateStatus("<div class='status-message' id='status-message'>US place four influence in Africa or Asia (1 per country)</div>"),i.countries){var a=L,r="#"+L;"morocco"!=L&&"algeria"!=L&&"tunisia"!=L&&"westafricanstates"!=L&&"saharanstates"!=L&&"sudan"!=L&&"ivorycoast"!=L&&"nigeria"!=L&&"ethiopia"!=L&&"somalia"!=L&&"cameroon"!=L&&"zaire"!=L&&"kenya"!=L&&"angola"!=L&&"seafricanstates"!=L&&"zimbabwe"!=L&&"botswana"!=L&&"southafrica"!=L&&"philippines"!=L&&"indonesia"!=L&&"malaysia"!=L&&"vietnam"!=L&&"thailand"!=L&&"laos"!=L&&"burma"!=L||(y.countries[a].place=1,$(r).off(),$(r).on("mousedown",(function(a){e=a.clientX,t=a.clientY})),$(r).on("mouseup",(function(a){if(!(Math.abs(e-a.clientX)>4||Math.abs(t-a.clientY)>4)){var r=$(this).attr("id");1==y.countries[r].place?(y.addMove("place\tus\tus\t"+r+"\t1"),y.placeInfluence(r,1,"us",(function(){y.countries[r].place=0,0==--N&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))):y.displayModal("you cannot place there...")}})))}return{v:0}}}();if("object"===c(B))return B.v}if("comecon"==t){if(2==this.game.player)return 0;if(1==this.game.player){(y=this).playerFinishedPlacingInfluence();var q=0;for(var L in this.countries)"finland"!=L&&"poland"!=L&&"eastgermany"!=L&&"austria"!=L&&"czechoslovakia"!=L&&"bulgaria"!=L&&"hungary"!=L&&"romania"!=L&&"yugoslavia"!=L||1!=this.isControlled("us",L)&&q++;var N=q;for(var L in N>4&&(N=4),y.updateStatus("<div class='status-message' id='status-message'>Place "+N+" influence in non-US controlled countries in Eastern Europe (1 per country)</div>"),y.addMove("resolve\tcomecon"),this.countries){var F=L,U="#"+L;"finland"!=L&&"poland"!=L&&"eastgermany"!=L&&"austria"!=L&&"czechoslovakia"!=L&&"bulgaria"!=L&&"hungary"!=L&&"romania"!=L&&"yugoslavia"!=L||(y.countries[F].place=1,$(U).off(),$(U).on("click",(function(){var e=$(this).attr("id");1==y.countries[e].place&&1!=y.isControlled("us",e)?(y.addMove("place\tussr\tussr\t"+e+"\t1"),y.placeInfluence(e,1,"ussr",(function(){y.countries[e].place=0,0==--N&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))):y.displayModal("you cannot place there...")})))}return 0}}if("containment"==t)return this.game.state.events.containment=1,1;if("cubanmissile"==t)return this.game.state.defcon=2,this.updateDefcon(),"ussr"==e&&(this.game.state.events.cubanmissilecrisis=2),"us"==e&&(this.game.state.events.cubanmissilecrisis=1),1;if("culturalrev"==t){if(1==this.game.state.events.china_card)this.game.state.vp-=1,this.updateLog("USSR gains 1 VP from Cultural Revolution"),this.updateVictoryPoints();else if(2==this.game.state.events.china_card)this.updateLog("USSR gains the China Card face up"),1==this.game.player&&this.game.deck[0].hand.push("china"),this.game.state.events.china_card=0,this.displayChinaCard();else{if(1==this.game.player){for(var z=0,H=0;H<this.game.deck[0].hand.length;H++)"china"==this.game.deck[0].hand[H]&&(z=1);1==z?(this.game.state.vp-=1,this.updateVictoryPoints()):(this.game.deck[0].hand.includes("china")||this.game.deck[0].hand.push("china"),this.game.state.events.china_card=0,this.displayChinaCard())}if(2==this.game.player){for(var G=0,K=0;K<this.game.deck[0].hand.length;K++)"china"==this.game.deck[0].hand[K]&&(G=1);if(1==G){for(var W=0;W<this.game.deck[0].hand.length;W++)if("china"==this.game.deck[0].hand[W])return this.game.deck[0].hand.splice(W,1),this.displayChinaCard(),1}else this.game.state.vp-=1,this.updateLog("USSR gains 1 VP from Cultural Revolution"),this.updateVictoryPoints()}}return 1}if("deathsquads"==t)return"ussr"==e&&this.game.state.events.deathsquads--,"us"==e&&this.game.state.events.deathsquads++,1;if("debtcrisis"==t){if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US playing Latin American Debt Crisis</div>"),0;var V=0,Y=this,J="<div class='status-message' id='status-message'><span>Choose a card to discard or USSR doubles influence in two countries in South America:</span><ul>";for(L=0;L<this.game.deck[0].hand.length;L++)this.modifyOps(this.game.deck[0].cards[this.game.deck[0].hand[L]].ops,this.game.deck[0].hand[L],this.game.player,0)>2&&"china"!=this.game.deck[0].hand[L]&&(J+='<li class="card showcard" id="'+this.game.deck[0].hand[L]+'">'+this.game.deck[0].cards[this.game.deck[0].hand[L]].name+"</li>",V++);return J+='<li class="card showcard" id="nodiscard">[do not discard]</li>',J+="</ul></div>",this.updateStatus(J),0==V?(this.addMove("resolve\tdebtcrisis"),this.addMove("latinamericandebtcrisis"),this.addMove("notify\tUS has no cards available for Latin American Debt Crisis"),this.endTurn(),0):(Y.addShowCardEvents((function(e){if("nodiscard"==e)return Y.addMove("resolve\tdebtcrisis"),Y.addMove("latinamericandebtcrisis"),Y.endTurn(),0;Y.addMove("resolve\tdebtcrisis"),Y.addMove("discard\tus\t"+e),Y.addMove('notify\tUS discards <span class="logcard" id="'+e+'">'+Y.game.deck[0].cards[e].name+"</span>"),Y.removeCardFromHand(e),Y.endTurn()})),0)}if("decolonization"==t){var X=function(){var e=0,t=0;if(2==i.game.player)return i.updateStatus("<div class='status-message' id='status-message'>USSR is playing Decolonization</div>"),{v:0};if(1==i.game.player){for(L in(y=i).playerFinishedPlacingInfluence(),N=4,y.addMove("resolve\tdecolonization"),i.updateStatus("<div class='status-message' id='status-message'>Place four influence in Africa or Southeast Asia (1 per country)</div>"),i.countries){var a=L,r="#"+L;"morocco"!=L&&"algeria"!=L&&"tunisia"!=L&&"westafricanstates"!=L&&"saharanstates"!=L&&"sudan"!=L&&"ivorycoast"!=L&&"nigeria"!=L&&"ethiopia"!=L&&"somalia"!=L&&"cameroon"!=L&&"zaire"!=L&&"kenya"!=L&&"angola"!=L&&"seafricanstates"!=L&&"zimbabwe"!=L&&"botswana"!=L&&"southafrica"!=L&&"philippines"!=L&&"indonesia"!=L&&"malaysia"!=L&&"vietnam"!=L&&"thailand"!=L&&"laos"!=L&&"burma"!=L||(y.countries[a].place=1,$(r).off(),$(r).on("mousedown",(function(a){e=a.clientX,t=a.clientY})),$(r).on("mouseup",(function(a){if(!(Math.abs(e-a.clientX)>4||Math.abs(t-a.clientY)>4)){var r=$(this).attr("id");1==y.countries[r].place?(y.addMove("place\tussr\tussr\t"+r+"\t1"),y.placeInfluence(r,1,"ussr",(function(){y.countries[r].place=0,--N<=0&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))):y.displayModal("you cannot place there...")}})))}return{v:0}}}();if("object"===c(X))return X.v}if("defectors"==t)return 0==this.game.state.headline?(0==this.game.state.turn&&(this.game.state.vp+=1,this.updateLog("US gains 1 VP from Defectors"),this.updateDefcon()),1):(1==this.game.state.headline&&(this.game.state.defectors_pulled_in_headline=1),1);if("degaulle"==t)return this.game.state.events.degaulle=1,this.game.state.events.nato_france=0,this.removeInfluence("france",2,"us"),this.placeInfluence("france",1,"ussr"),1;if("destalinization"==t)return 2==this.game.player?(this.updateStatus("<div class='status-message' id='status-message'>USSR is playing Destalinization</div>"),0):(1==this.game.player&&function(){(y=i).playerFinishedPlacingInfluence(),y.addMove("resolve\tdestalinization"),y.updateStatus('<div class="status-message" id="status-message">Remove four USSR influence from existing countries:</div>');var e=4;for(L in i.countries){var t="#"+L;$(t).off(),$(t).on("click",(function(){var t=$(this).attr("id");if(y.countries[t].ussr<=0)y.displayModal("Invalid Option");else if(y.removeInfluence(t,1,"ussr"),y.addMove("remove\tussr\tussr\t"+t+"\t1"),0==--e){y.updateStatus('<div class="status-message" id="status-message">Add four USSR influence to any non-US controlled countries</div>'),y.playerFinishedPlacingInfluence();var a=4,r={};for(var n in y.countries){r[n]=0;var i="#"+n;$(i).off(),$(i).on("click",(function(){var e=$(this).attr("id");1!=y.isControlled("us",e)?2!=r[e]?(y.placeInfluence(e,1,"ussr"),y.addMove("place\tussr\tussr\t"+e+"\t1"),a--,r[e]++,0==a&&(y.playerFinishedPlacingInfluence(),y.endTurn())):y.displayModal("Cannot place more than 2 influence in any one country"):y.displayModal("Cannot re-allocate to US controlled countries")}))}}}))}}(),0);if("duckandcover"==t){this.lowerDefcon(),this.updateDefcon();var Q=5-this.game.state.defcon;return this.game.state.defcon<=1&&1!=this.game.over?void(0==this.game.state.turn?this.endGame("us","defcon"):this.endGame("ussr","defcon")):(this.game.state.vp=this.game.state.vp+Q,this.updateLog("US gains "+Q+" VP from Duck and Cover"),this.updateVictoryPoints(),1)}if("easteuropean"==t){if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is playing East European Unrest</div>"),0;if(2==this.game.player){y=this;var Z=1,ee=3,te=[];if(this.game.state.round>7&&(Z=2),y.addMove("resolve\teasteuropean"),y.countries.czechoslovakia.ussr>0&&te.push("czechoslovakia"),y.countries.austria.ussr>0&&te.push("austria"),y.countries.hungary.ussr>0&&te.push("hungary"),y.countries.romania.ussr>0&&te.push("romania"),y.countries.yugoslavia.ussr>0&&te.push("yugoslavia"),y.countries.bulgaria.ussr>0&&te.push("bulgaria"),y.countries.eastgermany.ussr>0&&te.push("eastgermany"),y.countries.poland.ussr>0&&te.push("poland"),y.countries.finland.ussr>0&&te.push("finland"),te.length<=ee){for(var ae=0;ae<te.length;ae++)y.addMove("remove\tus\tussr\t"+te[ae]+"\t"+Z),y.removeInfluence(te[ae],Z,"ussr");y.endTurn()}else for(var L in y.updateStatus("<div class='status-message' id='status-message'>Remove "+Z+" from 3 countries in Eastern Europe</div>"),y.countries){var re=L,ne="#"+L;"czechoslovakia"!=L&&"austria"!=L&&"hungary"!=L&&"romania"!=L&&"yugoslavia"!=L&&"bulgaria"!=L&&"eastgermany"!=L&&"poland"!=L&&"finland"!=L||(y.countries[re].ussr>0&&(y.countries[re].place=1),$(ne).off(),$(ne).on("click",(function(){var e=$(this).attr("id");1!=y.countries[e].place?y.displayModal("Invalid Option"):(y.countries[e].place=0,y.removeInfluence(e,Z,"ussr",(function(){y.addMove("remove\tus\tussr\t"+e+"\t"+Z),0==--ee&&(y.playerFinishedPlacingInfluence(),y.endTurn())})))})))}return 0}}if("europe"==t){var ie=this.calculateScoring("europe"),se=ie.us.vp-ie.ussr.vp;return this.game.state.vp+=se,this.updateLog("<span>Europe:</span> "+se+" <span>VP</span>"),this.updateVictoryPoints(),"us"==e&&this.game.state.stats.us_scorings++,"ussr"==e&&this.game.state.stats.ussr_scorings++,1}if("evilempire"==t)return this.game.state.events.evilempire=1,this.game.state.events.flowerpower=0,this.game.state.vp+=1,this.updateVictoryPoints(),1;if("fidel"==t){var oe=parseInt(this.countries.cuba.us),ce=parseInt(this.countries.cuba.ussr);return this.removeInfluence("cuba",oe,"us"),ce<3&&this.placeInfluence("cuba",3-ce,"ussr"),1}if("fiveyearplan"==t){if(2==this.game.player)return this.rollDice(),0;if(1==this.game.player){this.addMove("resolve\tfiveyearplan");for(var le=[],ue=0;ue<this.game.deck[0].hand.length;ue++){var de=this.game.deck[0].hand[ue];"china"!=de&&(1!=this.game.state.headline||de!=this.game.state.headline_opponent_card&&de!=this.game.state.headline_card)&&le.push(de)}if(0==le.length)return this.rollDice(),this.displayModal("No cards left to discard"),this.addMove("notify\tUSSR has no cards to discard"),this.endTurn(),0;var pe=this;return pe.rollDice(le.length,(function(e){e=parseInt(e)-1;var t=le[e];pe.removeCardFromHand(t),"us"==pe.game.deck[0].cards[t].player?(pe.displayModal("You have rolled: "+t),pe.addMove("event\tus\t"+t),pe.endTurn()):(pe.displayModal("You have rolled: "+t),pe.addMove("notify\tUSSR discarded "+t),pe.endTurn())})),0}}if("flowerpower"==t)return 1==this.game.state.events.evilempire?(this.updateLog("Flower Power prevented by Evil Empire"),1):(this.game.state.events.flowerpower=1,1);if("formosan"==t)return this.game.state.events.formosan=1,$(".formosan_resolution").show(),1;if("glasnost"==t)return this.game.state.defcon+=1,this.game.state.defcon>5&&(this.game.state.defcon=5),this.game.state.vp-=2,this.updateDefcon(),this.updateVictoryPoints(),this.updateLog("DEFCON increases by 1 point"),this.updateLog("USSR gains 2 VP"),1!=this.game.state.events.reformer?1:(this.addMove("resolve\tglasnost"),this.addMove("unlimit\tcoups"),this.addMove("ops\tussr\tglasnost\t4"),this.addMove("limit\tcoups"),this.addMove("notify\tUSSR plays 4 OPS for influence or realignments"),this.endTurn(),0);if("grainsales"==t){var he=this;if(2==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>Waiting for random card from USSR</div>"),this.rollDice(),0;if(1==this.game.player){this.updateStatus("<div class='status-message' id='status-message'>Sending random card to US</div>"),this.addMove("resolve\tgrainsales");for(var fe=[],me=0;me<he.game.deck[0].hand.length;me++){var ge=he.game.deck[0].hand[me];"china"!=ge&&(1!=this.game.state.headline||ge!=this.game.state.headline_opponent_card&&ge!=this.game.state.headline_card)&&fe.push(ge)}if(0==fe.length)return this.rollDice(),this.addMove("ops\tus\tgrainsales\t2"),this.addMove("setvar\tgame\tstate\tback_button_cancelled\t1"),this.addMove("notify\tUSSR has no cards to discard"),this.endTurn(),0;he.rollDice(fe.length,(function(e){e=parseInt(e)-1;var t=fe[e];he.removeCardFromHand(t),he.addMove("grainsales\tussr\t"+t),he.addMove("setvar\tgame\tstate\tback_button_cancelled\t1"),he.addMove("notify\tUSSR shares "+he.game.deck[0].cards[t].name),he.endTurn()}))}return 0}if("howilearned"==t){var be=this,ye=0;return"ussr"==e&&(this.game.state.milops_ussr=5),"us"==e&&(this.game.state.milops_us=5),"ussr"==e&&1==this.game.player&&(ye=1),"us"==e&&2==this.game.player&&(ye=1),1==ye&&(be.app.browser.addElementToDom('<div id="5" class="set_defcon_box set_defcon_box_5"></div>',"gameboard"),be.app.browser.addElementToDom('<div id="4" class="set_defcon_box set_defcon_box_4"></div>',"gameboard"),be.app.browser.addElementToDom('<div id="3" class="set_defcon_box set_defcon_box_3"></div>',"gameboard"),be.app.browser.addElementToDom('<div id="2" class="set_defcon_box set_defcon_box_2"></div>',"gameboard"),be.app.browser.addElementToDom('<div id="1" class="set_defcon_box set_defcon_box_1"></div>',"gameboard"),$(".set_defcon_box").css("width",be.scale(120)+"px"),$(".set_defcon_box").css("height",be.scale(120)+"px"),$(".set_defcon_box").css("z-index",1e3),$(".set_defcon_box").css("background-color","yellow"),$(".set_defcon_box").css("opacity",.5),$(".set_defcon_box").css("display","block"),$(".set_defcon_box").css("position","absolute"),console.log("1: "+be.game.state.defcon_ps[4].top),console.log("1 - scale: "+be.scale(be.game.state.defcon_ps[4].top)),$(".set_defcon_box_1").css("top",be.scale(be.game.state.defcon_ps[4].top)+"px"),$(".set_defcon_box_1").css("left",be.scale(be.game.state.defcon_ps[4].left)+"px"),$(".set_defcon_box_2").css("top",be.scale(be.game.state.defcon_ps[3].top)+"px"),$(".set_defcon_box_2").css("left",be.scale(be.game.state.defcon_ps[3].left)+"px"),$(".set_defcon_box_3").css("top",be.scale(be.game.state.defcon_ps[2].top)+"px"),$(".set_defcon_box_3").css("left",be.scale(be.game.state.defcon_ps[2].left)+"px"),$(".set_defcon_box_4").css("top",be.scale(be.game.state.defcon_ps[1].top)+"px"),$(".set_defcon_box_4").css("left",be.scale(be.game.state.defcon_ps[1].left)+"px"),$(".set_defcon_box_5").css("top",be.scale(be.game.state.defcon_ps[0].top)+"px"),$(".set_defcon_box_5").css("left",be.scale(be.game.state.defcon_ps[0].left)+"px"),$(".set_defcon_box").off(),$(".set_defcon_box").on("click",(function(e){var t=parseInt(e.currentTarget.id);if(confirm("Set DEFCON at "+t+"?")){if(be.addMove("resolve\thowilearned"),t>be.game.state.defcon){var a=t-be.game.state.defcon;for(L=0;L<a;L++)be.addMove("defcon\traise")}if(t<be.game.state.defcon){var r=be.game.state.defcon-t;for(L=0;L<r;L++)be.addMove("defcon\tlower")}be.endTurn(),$(".set_defcon_box").remove()}})),be.updateStatus('<div class="status-message" id="status-message">Set DEFCON at level:<ul><li class="card" id="five">five</li><li class="card" id="four">four</li><li class="card" id="three">three</li><li class="card" id="two">two</li><li class="card" id="one">one</li></ul></div>'),be.addShowCardEvents((function(e){var t=5;if(be.addMove("resolve\thowilearned"),"one"==e&&(t=1),"two"==e&&(t=2),"three"==e&&(t=3),"four"==e&&(t=4),"five"==e&&(t=5),t>be.game.state.defcon){var a=t-be.game.state.defcon;for(L=0;L<a;L++)be.addMove("defcon\traise")}if(t<be.game.state.defcon){var r=be.game.state.defcon-t;for(L=0;L<r;L++)be.addMove("defcon\tlower")}be.endTurn(),$(".set_defcon_box").remove()}))),0}if("indopaki"==t){var ve="ussr",_e="us";if(2==this.game.player&&(_e="ussr",ve="us"),ve!=e)return this.rollDice(6),0;if(ve==e){(y=this).playerFinishedPlacingInfluence(),y.addMove("resolve\tindopaki"),y.updateStatus('<div class="status-message" id="status-message">Indo-Pakistani War. Choose Target:<ul><li class="card" id="invadepakistan">Pakistan</li><li class="card" id="invadeindia">India</li></ul></div>');var we=4;y.addShowCardEvents((function(t){if("invadepakistan"==t){1==y.isControlled(_e,"india")&&we++,1==y.isControlled(_e,"iran")&&we++,1==y.isControlled(_e,"afghanistan")&&we++;var a=we-4,r=y.rollDice(6);y.addMove("notify\t"+e.toUpperCase()+" modified: "+(r-a)),y.addMove("notify\t"+e.toUpperCase()+" rolls: "+r),r>=we?"us"==e?(y.addMove("place\tus\tus\tpakistan\t"+y.countries.pakistan.ussr),y.addMove("remove\tus\tussr\tpakistan\t"+y.countries.pakistan.ussr),y.addMove("milops\tus\t2"),y.addMove("vp\tus\t2"),y.placeInfluence("pakistan",y.countries.pakistan.ussr,"us"),y.removeInfluence("pakistan",y.countries.pakistan.ussr,"ussr"),y.endTurn(),y.showInfluence("pakistan","ussr")):(y.addMove("place\tussr\tussr\tpakistan\t"+y.countries.pakistan.us),y.addMove("remove\tussr\tus\tpakistan\t"+y.countries.pakistan.us),y.addMove("milops\tussr\t2"),y.addMove("vp\tussr\t2"),y.placeInfluence("pakistan",y.countries.pakistan.us,"ussr"),y.removeInfluence("pakistan",y.countries.pakistan.us,"us"),y.endTurn(),y.showInfluence("pakistan","ussr")):"us"==e?(y.addMove("milops\tus\t2"),y.endTurn()):(y.addMove("milops\tussr\t2"),y.endTurn())}if("invadeindia"==t){1==y.isControlled(_e,"pakistan")&&we++,1==y.isControlled(_e,"burma")&&we++;var n=we-4,i=y.rollDice(6);y.addMove("notify\t"+e.toUpperCase()+" modified: "+(i-n)),y.addMove("notify\t"+e.toUpperCase()+" rolls: "+i),i>=we?"us"==e?(y.addMove("place\tus\tus\tindia\t"+y.countries.india.ussr),y.addMove("remove\tus\tussr\tindia\t"+y.countries.india.ussr),y.addMove("milops\tus\t2"),y.addMove("vp\tus\t2"),y.placeInfluence("india",y.countries.india.ussr,"us"),y.removeInfluence("india",y.countries.india.ussr,"ussr"),y.endTurn(),y.showInfluence("india","ussr")):(y.addMove("place\tussr\tussr\tindia\t"+y.countries.india.us),y.addMove("remove\tussr\tus\tindia\t"+y.countries.india.us),y.addMove("milops\tussr\t2"),y.addMove("vp\tussr\t2"),y.placeInfluence("india",y.countries.india.us,"ussr"),y.removeInfluence("india",y.countries.india.us,"us"),y.endTurn(),y.showInfluence("india","ussr")):"us"==e?(y.addMove("milops\tus\t2"),y.endTurn()):(y.addMove("milops\tussr\t2"),y.endTurn())}}))}return 0}if("indreds"==t){if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is playing Independent Reds</div>"),0;var xe=this.countries.yugoslavia.ussr,ke=this.countries.romania.ussr,Se=this.countries.bulgaria.ussr,Pe=this.countries.hungary.ussr,Ee=this.countries.czechoslovakia.ussr,Ce=this.countries.yugoslavia.us,Ae=this.countries.romania.us,Me=this.countries.bulgaria.us,Te=this.countries.hungary.us,je=this.countries.czechoslovakia.us,Oe=xe-Ce,De=ke-Ae,Ie=Se-Me,Re=Pe-Te,Be=Ee-je;if(this.addMove("resolve\tindreds"),Te>=Pe&&Ce>=xe&&Ae>=ke&&Me>=Se&&je>=Ee)return this.endTurn(),0;var qe="<div class='status-message' id='status-message'>Match USSR influence in which country? <ul>";Oe>0&&(qe+='<li class="card" id="yugoslavia">Yugoslavia</li>'),De>0&&(qe+='<li class="card" id="romania">Romania</li>'),Ie>0&&(qe+='<li class="card" id="bulgaria">Bulgaria</li>'),Re>0&&(qe+='<li class="card" id="hungary">Hungary</li>'),Be>0&&(qe+='<li class="card" id="czechoslovakia">Czechoslovakia</li>'),qe+="</ul></div>",this.updateStatus(qe);var Le=this;return Le.addShowCardEvents((function(e){return $(".card").off(),"romania"==e&&(Le.placeInfluence(e,De,"us"),Le.addMove("place\tus\tus\tromania\t"+De),Le.endTurn()),"yugoslavia"==e&&(Le.placeInfluence(e,Oe,"us"),Le.addMove("place\tus\tus\tyugoslavia\t"+Oe),Le.endTurn()),"bulgaria"==e&&(Le.placeInfluence(e,Ie,"us"),Le.addMove("place\tus\tus\tbulgaria\t"+Ie),Le.endTurn()),"hungary"==e&&(Le.placeInfluence(e,Re,"us"),Le.addMove("place\tus\tus\thungary\t"+Re),Le.endTurn()),"czechoslovakia"==e&&(Le.placeInfluence(e,Be,"us"),Le.addMove("place\tus\tus\tczechoslovakia\t"+Be),Le.endTurn()),0})),0}if("irancontra"==t)return this.game.state.events.irancontra=1,1;if("iranianhostage"==t)return this.game.state.events.iranianhostage=1,this.countries.iran.us>0&&this.removeInfluence("iran",this.countries.iran.us,"us"),this.placeInfluence("iran",2,"ussr"),1;if("iraniraq"==t){var Ne="ussr",Fe="us";if(2==this.game.player&&(Fe="ussr",Ne="us"),Ne!=e)return this.rollDice(6),0;if(Ne==e){(y=this).playerFinishedPlacingInfluence(),y.addMove("resolve\tiraniraq"),y.updateStatus('<div class="status-message" id="status-message">Iran-Iraq War. Choose Target:<ul><li class="card" id="invadeiraq">Iraq</li><li class="card" id="invadeiran">Iran</li></ul></div>');var Ue=4;y.addShowCardEvents((function(t){if("invadeiran"==t){1==y.isControlled(Fe,"pakistan")&&Ue++,1==y.isControlled(Fe,"iraq")&&Ue++,1==y.isControlled(Fe,"afghanistan")&&Ue++;var a=Ue-4,r=y.rollDice(6);y.addMove("notify\t"+e.toUpperCase()+" modified: "+(r-a)),y.addMove("notify\t"+e.toUpperCase()+" rolls: "+r),r>=Ue?"us"==e?(y.addMove("place\tus\tus\tiran\t"+y.countries.iran.ussr),y.addMove("remove\tus\tussr\tiran\t"+y.countries.iran.ussr),y.addMove("milops\tus\t2"),y.addMove("vp\tus\t2"),y.placeInfluence("iran",y.countries.iran.ussr,"us"),y.removeInfluence("iran",y.countries.iran.ussr,"ussr"),y.showInfluence("iran","ussr"),y.endTurn()):(y.addMove("place\tussr\tussr\tiran\t"+y.countries.iran.us),y.addMove("remove\tussr\tus\tiran\t"+y.countries.iran.us),y.addMove("milops\tussr\t2"),y.addMove("vp\tussr\t2"),y.placeInfluence("iran",y.countries.iran.us,"ussr"),y.removeInfluence("iran",y.countries.iran.us,"us"),y.endTurn(),y.showInfluence("iran","ussr")):"us"==e?(y.addMove("milops\tus\t2"),y.endTurn()):(y.addMove("milops\tussr\t2"),y.endTurn())}if("invadeiraq"==t){1==y.isControlled(Fe,"iran")&&Ue++,1==y.isControlled(Fe,"jordan")&&Ue++,1==y.isControlled(Fe,"gulfstates")&&Ue++,1==y.isControlled(Fe,"saudiarabia")&&Ue++;var n=Ue-4,i=y.rollDice(6);y.addMove("notify\t"+e.toUpperCase()+" modified: "+(i-n)),y.addMove("notify\t"+e.toUpperCase()+" rolls: "+i),i>=Ue?"us"==e?(y.addMove("place\tus\tus\tiraq\t"+y.countries.iraq.ussr),y.addMove("remove\tus\tussr\tiraq\t"+y.countries.iraq.ussr),y.addMove("milops\tus\t2"),y.addMove("vp\tus\t2"),y.placeInfluence("iraq",y.countries.iraq.ussr,"us"),y.removeInfluence("iraq",y.countries.iraq.ussr,"ussr"),y.endTurn(),y.showInfluence("iraq","ussr")):(y.addMove("place\tussr\tussr\tiraq\t"+y.countries.iraq.us),y.addMove("remove\tussr\tus\tiraq\t"+y.countries.iraq.us),y.addMove("milops\tussr\t2"),y.addMove("vp\tussr\t2"),y.placeInfluence("iraq",y.countries.iraq.us,"ussr"),y.removeInfluence("iraq",y.countries.iraq.us,"us"),y.endTurn(),y.showInfluence("iraq","ussr")):"us"==e?(y.addMove("milops\tus\t2"),y.endTurn()):(y.addMove("milops\tussr\t2"),y.endTurn())}}))}return 0}if("ironlady"==t)return this.game.state.vp+=1,this.updateVictoryPoints(),this.game.state.ironlady_before_ops=1,this.placeInfluence("argentina",1,"ussr"),this.countries.uk.ussr>0&&this.removeInfluence("uk",this.countries.uk.ussr,"ussr"),this.game.state.events.ironlady=1,1;if("johnpaul"==t)return this.game.state.events.johnpaul=1,this.removeInfluence("poland",2,"ussr"),this.placeInfluence("poland",1,"us"),1;if("junta"==t){this.game.state.events.junta=1;var $e=0;if("ussr"==e&&1==this.game.player&&($e=1),"us"==e&&2==this.game.player&&($e=1),0==$e&&this.updateStatus('<div class="status-message" id="status-message">'+e.toUpperCase()+" <span>playing Junta</span></div>"),1==$e)for(var L in(y=this).playerFinishedPlacingInfluence(),y.updateStatus('<div class="status-message" id="status-message">'+e.toUpperCase()+" to place 2 Influence in Central or South America</div>"),this.countries)if("samerica"===this.countries[L].region||"camerica"===this.countries[L].region){var ze="#"+L;$(ze).off(),$(ze).on("click",(function(){var t=$(this).attr("id");y.placeInfluence(t,2,e,(function(){$(".country").off(),y.updateStatus('<div class="status-message" id="status-message"><span>Do you wish to launch a free coup or conduct realignment rolls in Central or South America with the Junta card?</span><ul><li class="card" id="conduct">coup or realign</li><li class="card" id="skip">skip</li></ul></div>'),y.addShowCardEvents((function(a){"conduct"==a&&(y.addMove("resolve\tjunta"),y.addMove("unlimit\tplacement"),y.addMove("unlimit\tmilops"),y.addMove("unlimit\tregion"),y.addMove("ops\t"+e+"\tjunta\t2"),y.addMove("limit\tregion\teurope"),y.addMove("limit\tregion\tafrica"),y.addMove("limit\tregion\tmideast"),y.addMove("limit\tregion\tasia"),y.addMove("limit\tregion\tseasia"),y.addMove("limit\tmilops"),y.addMove("limit\tplacement"),y.addMove("place\t"+e+"\t"+e+"\t"+t+"\t2"),y.playerFinishedPlacingInfluence(),y.endTurn()),"skip"==a&&(y.addMove("resolve\tjunta"),y.addMove("place\t"+e+"\t"+e+"\t"+t+"\t2"),y.playerFinishedPlacingInfluence(),y.endTurn())}))}))}))}return 0}if("KAL007"==t)return this.game.state.vp+=2,this.updateVictoryPoints(),this.lowerDefcon(),1==this.isControlled("us","southkorea")?(this.addMove("resolve\tKAL007"),this.addMove("unlimit\tcoups"),this.addMove("ops\tus\tKAL007\t4"),this.addMove("setvar\tgame\tstate\tback_button_cancelled\t1"),this.addMove("limit\tcoups"),this.endTurn(),0):1;if("kitchendebates"==t){var He=0,Ge=0;return 1==this.isControlled("us","mexico")&&He++,1==this.isControlled("ussr","mexico")&&Ge++,1==this.isControlled("us","cuba")&&He++,1==this.isControlled("ussr","cuba")&&Ge++,1==this.isControlled("us","panama")&&He++,1==this.isControlled("ussr","panama")&&Ge++,1==this.isControlled("us","venezuela")&&He++,1==this.isControlled("ussr","venezuela")&&Ge++,1==this.isControlled("us","brazil")&&He++,1==this.isControlled("ussr","brazil")&&Ge++,1==this.isControlled("us","argentina")&&He++,1==this.isControlled("ussr","argentina")&&Ge++,1==this.isControlled("us","chile")&&He++,1==this.isControlled("ussr","chile")&&Ge++,1==this.isControlled("us","southafrica")&&He++,1==this.isControlled("ussr","southafrica")&&Ge++,1==this.isControlled("us","angola")&&He++,1==this.isControlled("ussr","angola")&&Ge++,1==this.isControlled("us","zaire")&&He++,1==this.isControlled("ussr","zaire")&&Ge++,1==this.isControlled("us","nigeria")&&He++,1==this.isControlled("ussr","nigeria")&&Ge++,1==this.isControlled("us","algeria")&&He++,1==this.isControlled("ussr","algeria")&&Ge++,1==this.isControlled("us","poland")&&He++,1==this.isControlled("ussr","poland")&&Ge++,1==this.isControlled("us","eastgermany")&&He++,1==this.isControlled("ussr","eastgermany")&&Ge++,1==this.isControlled("us","westgermany")&&He++,1==this.isControlled("ussr","westgermany")&&Ge++,1==this.isControlled("us","france")&&He++,1==this.isControlled("ussr","france")&&Ge++,1==this.isControlled("us","italy")&&He++,1==this.isControlled("ussr","italy")&&Ge++,1==this.isControlled("us","libya")&&He++,1==this.isControlled("ussr","libya")&&Ge++,1==this.isControlled("us","egypt")&&He++,1==this.isControlled("ussr","egypt")&&Ge++,1==this.isControlled("us","israel")&&He++,1==this.isControlled("ussr","israel")&&Ge++,1==this.isControlled("us","iraq")&&He++,1==this.isControlled("ussr","iraq")&&Ge++,1==this.isControlled("us","iran")&&He++,1==this.isControlled("ussr","iran")&&Ge++,1==this.isControlled("us","saudiarabia")&&He++,1==this.isControlled("ussr","saudiarabia")&&Ge++,1==this.isControlled("us","pakistan")&&He++,1==this.isControlled("ussr","pakistan")&&Ge++,1==this.isControlled("us","india")&&He++,1==this.isControlled("ussr","india")&&Ge++,1==this.isControlled("us","thailand")&&He++,1==this.isControlled("ussr","thailand")&&Ge++,1==this.isControlled("us","japan")&&He++,1==this.isControlled("ussr","japan")&&Ge++,1==this.isControlled("us","southkorea")&&He++,1==this.isControlled("ussr","southkorea")&&Ge++,1==this.isControlled("us","northkorea")&&He++,1==this.isControlled("ussr","northkorea")&&Ge++,He>Ge?(this.game.state.events.kitchendebates=1,this.updateLog("US controls "+He+" battlegrounds and USSR controls "+Ge+" battlegrounds"),this.updateLog("US gains 2 VP and pokes USSR in chest..."),this.game.state.vp+=2,this.updateVictoryPoints()):(this.updateLog("US controls "+He+" battlegrounds and USSR controls "+Ge+" battlegrounds"),this.updateLog("US does not have more battleground countries than USSR...")),1}if("koreanwar"==t){var Ke=4;1==this.isControlled("us","japan")&&Ke++,1==this.isControlled("us","taiwan")&&Ke++,1==this.isControlled("us","northkorea")&&Ke++;var We=this.rollDice(6),Ve=Ke-4;return this.updateLog("<span>"+e.toUpperCase()+"</span> <span>rolls:</span> "+We),this.updateLog("<span>"+e.toUpperCase()+"</span> <span>modified:</span> "+(We-Ve)),We>=Ke?(this.updateLog("North Korea wins the Korean War"),this.placeInfluence("southkorea",this.countries.southkorea.us,"ussr"),this.removeInfluence("southkorea",this.countries.southkorea.us,"us"),this.game.state.vp-=2,this.game.state.milops_ussr+=2,this.updateMilitaryOperations(),this.updateVictoryPoints()):(this.updateLog("South Korea wins the Korean War"),this.game.state.milops_ussr+=2,this.updateMilitaryOperations()),1}if("liberation"==t){if(2==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>USSR is playing Liberation Theology</div>"),0;if(1==this.game.player){(y=this).playerFinishedPlacingInfluence(),N=3;var Ye=[];for(var L in y.addMove("resolve\tliberation"),this.updateStatus("<div class='status-message' id='status-message'>USSR places three influence in Central America</div>"),this.countries){var Je=L,Xe="#"+L;"mexico"!=L&&"guatemala"!=L&&"elsalvador"!=L&&"honduras"!=L&&"nicaragua"!=L&&"costarica"!=L&&"panama"!=L&&"cuba"!=L&&"haiti"!=L&&"dominicanrepublic"!=L||(y.countries[Je].place=1,Ye[Je]=0,$(Xe).off(),$(Xe).on("click",(function(){var e=$(this).attr("id");1==y.countries[e].place?(Ye[e]++,2==Ye[e]&&(y.countries[e].place=0),y.addMove("place\tussr\tussr\t"+e+"\t1"),y.placeInfluence(e,1,"ussr",(function(){0==--N&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))):y.displayModal("you cannot place there...")})))}return 0}}if("lonegunman"==t){if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is playing Lone Gunman</div>"),0;if(2==this.game.player)if(this.addMove("resolve\tlonegunman"),this.updateStatus("<div class='status-message' id='status-message'>US is playing Lone Gunman</div>"),this.game.deck[0].hand.length<1)this.addMove("ops\tussr\tlonegunman\t1"),this.addMove("setvar\tgame\tstate\tback_button_cancelled\t1"),this.addMove("notify\tUS has no cards to reveal"),this.endTurn();else{for(var Qe="",Ze=0;Ze<this.game.deck[0].hand.length;Ze++)Ze>0&&(Qe+=", "),Qe+=this.game.deck[0].cards[this.game.deck[0].hand[Ze]].name;this.addMove("ops\tussr\tlonegunman\t1"),this.addMove("setvar\tgame\tstate\tback_button_cancelled\t1"),this.addMove("notify\tUS holds: "+Qe),this.endTurn()}return 0}if("marine"==t){this.countries.lebanon.us=0,this.showInfluence("lebanon","us"),this.showInfluence("lebanon","ussr"),this.updateLog("All US influence removed from Lebanon");var et=0;for(var L in this.countries)"mideast"==this.countries[L].region&&(et+=this.countries[L].us);if(0==et)return this.updateLog("US has no influence in the Middle-East"),1;if(2==this.game.player)return 0;if(1==this.game.player){this.addMove("resolve\tmarine"),(y=this).playerFinishedPlacingInfluence(),Z=2;var tt=0;for(var L in this.countries)"mideast"==this.countries[L].region&&this.countries[L].us>0&&(tt+=this.countries[L].us);for(var L in tt<2&&(Z=tt),this.updateStatus("<div class='status-message' id='status-message'>Remove</span> <span>"+Z+" </span>US influence from the Middle East</div>"),this.countries){var at=L,rt="#"+L;"mideast"==this.countries[L].region&&(y.countries[at].place=1,y.countries[at].us>0&&($(rt).off(),$(rt).on("click",(function(){var e=$(this).attr("id");1!=y.countries[e].place||0==y.countries[e].us?y.displayModal("Invalid Country"):y.removeInfluence(e,1,"us",(function(){y.addMove("remove\tussr\tus\t"+e+"\t1"),0==--Z&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))}))))}return 0}}if("marshall"==t){if(this.game.state.events.marshall=1,y=this,1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is playing Marshall Plan</div>"),0;if(2==this.game.player){for(var L in q=0,this.countries)"canada"!=L&&"uk"!=L&&"sweden"!=L&&"france"!=L&&"benelux"!=L&&"westgermany"!=L&&"spain"!=L&&"italy"!=L&&"greece"!=L&&"turkey"!=L&&"denmark"!=L&&"norway"!=L&&"sweden"!=L&&"finland"!=L&&"austria"!=L||1!=this.isControlled("ussr",L)&&q++;for(var L in(N=q)>7&&(N=7),this.updateStatus("<div class='status-message' id='status-message'>Place 1 influence in each of "+N+" non USSR-controlled countries in Western Europe</div>"),this.updateStatus("<div class='status-message' id='status-message'>Place 1 influence in each of "+N+" non USSR-controlled countries in Western Europe</div>"),y.playerFinishedPlacingInfluence(),y.addMove("resolve\tmarshall"),this.countries){var nt=L,it="#"+L;"canada"!=L&&"uk"!=L&&"sweden"!=L&&"france"!=L&&"benelux"!=L&&"westgermany"!=L&&"spain"!=L&&"italy"!=L&&"greece"!=L&&"turkey"!=L&&"denmark"!=L&&"norway"!=L&&"sweden"!=L&&"finland"!=L&&"austria"!=L||1!=y.isControlled("ussr",nt)&&(y.countries[nt].place=1,$(it).off(),$(it).on("click",(function(){var e=$(this).attr("id");1==y.countries[e].place?(y.addMove("place\tus\tus\t"+e+"\t1"),y.placeInfluence(e,1,"us",(function(){y.countries[e].place=0,0==--N&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))):y.displayModal("you cannot place there...")})))}return 0}}if("mideast"==t){var st=this.calculateScoring("mideast"),ot=st.us.vp-st.ussr.vp;return this.game.state.vp+=ot,this.updateLog("<span>Middle East:</span> "+ot+" <span>VP</span>"),"us"==e&&this.game.state.stats.us_scorings++,"ussr"==e&&this.game.state.stats.ussr_scorings++,this.updateVictoryPoints(),1}if("missileenvy"==t){var ct=this,lt=1,ut="us";if("us"==e&&(lt=2,ut="ussr"),this.game.state.events.missileenvy=1,this.game.player==lt)return this.updateStatus("<div class='status-message' id='status-message'>Opponent is returning card for Missile Envy</div>"),0;if(this.game.player!=lt&&0!=this.game.player){this.addMove("resolve\tmissileenvy");var dt="",pt=-1,ht=0,ft=[];if(0==this.game.deck[0].hand.length)return this.addMove("notify\t"+ut.toUpperCase()+" hand contains no cards."),this.endTurn(),0;for(var mt=0;mt<ct.game.deck[0].hand.length;mt++){var gt=ct.game.deck[0].hand[mt];"china"!=gt&&(1!=this.game.state.headline||gt!=this.game.state.headline_opponent_card&&gt!=this.game.state.headline_card)&&ft.push(gt)}if(0==ft.length)return this.addMove("notify\t"+ut.toUpperCase()+" hand has no eligible cards."),this.endTurn(),0;for(var bt=0;bt<ft.length;bt++){var yt=this.game.deck[0].cards[ft[bt]];this.modifyOps(yt.ops)==pt&&(ht=1),this.modifyOps(yt.ops)>pt&&(pt=this.modifyOps(yt.ops),dt=ft[bt],ht=0)}if(0==ht)this.addMove("missileenvy\t"+this.game.player+"\t"+dt),this.endTurn();else{for(var vt="<span>Select card to give opponent:</span><ul>",_t=0;_t<ft.length;_t++)this.modifyOps(this.game.deck[0].cards[ft[_t]].ops)==pt&&"china"!=ft[_t]&&(vt+='<li class="card showcard" id="'+ft[_t]+'">'+this.game.deck[0].cards[ft[_t]].name+"</li>");vt+="</ul>",this.updateStatus("<div class='status-message' id='status-message'>"+vt+"</div>"),ct.addShowCardEvents((function(e){ct.addMove("missileenvy\t"+ct.game.player+"\t"+e),ct.endTurn()}))}}return 0}if("muslimrevolution"==t){if(1==this.game.state.events.awacs)return 1;ee=2;var wt=0;for(var L in this.countries)"sudan"!=L&&"egypt"!=L&&"libya"!=L&&"syria"!=L&&"iran"!=L&&"iraq"!=L&&"jordan"!=L&&"saudiarabia"!=L||this.countries[L].us>0&&wt++;if(0==wt)return this.updateLog("Muslim Revolutions targets no countries with US influence."),1;if(wt<=2){for(var L in this.countries)"sudan"!=L&&"egypt"!=L&&"libya"!=L&&"syria"!=L&&"iran"!=L&&"iraq"!=L&&"jordan"!=L&&"saudiarabia"!=L||this.countries[L].us>0&&(this.updateLog("Muslim Revolutions removes all US influence in "+L),this.removeInfluence(L,this.countries[L].us,"us"));return 1}if(2==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>USSR is playing Muslim Revolution</div>"),0;if(1==this.game.player)for(var L in this.updateStatus("<div class='status-message' id='status-message'>Remove All US influence from 2 countries among: Sudan, Egypt, Iran, Iraq, Libya, Saudi Arabia, Syria, Jordan.</div>"),(y=this).playerFinishedPlacingInfluence(),y.addMove("resolve\tmuslimrevolution"),this.countries){var xt="#"+L;"sudan"!=L&&"egypt"!=L&&"iran"!=L&&"iraq"!=L&&"libya"!=L&&"saudiarabia"!=L&&"syria"!=L&&"jordan"!=L||(this.countries[L].us>0&&wt++,$(xt).off(),$(xt).on("click",(function(){var e=$(this).attr("id");if(y.countries[e].us<=0)y.displayModal("Invalid Country");else{var t=y.countries[e].us;y.removeInfluence(e,t,"us",(function(){y.addMove("remove\tussr\tus\t"+e+"\t"+t),0==--ee&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))}})))}return 0}if("nasser"==t){for(var kt=parseInt(this.countries.egypt.us),St=0;kt>0;)St++,kt-=2;return this.removeInfluence("egypt",St,"us"),this.placeInfluence("egypt",2,"ussr"),this.updateStatus("<div class='status-message' id='status-message'>Nasser - Soviets add two influence in Egypt. US loses half (rounded-up) of all influence in Egypt.</div>"),1}if("nato"==t)return 1==this.game.state.events.marshall||1==this.game.state.events.warsawpact?(this.game.state.events.nato=1,0==this.game.state.events.willybrandt&&(this.game.state.events.nato_westgermany=1),0==this.game.state.events.degaulle&&(this.game.state.events.nato_france=1)):this.updateLog("NATO cannot trigger before Warsaw Pact or Marshall Plan. Moving to discard pile."),1;if("naziscientist"==t)return this.advanceSpaceRace(e),1;if("nixon"==t){var Pt=0;if(2==this.game.state.events.china_card)Pt=1;else if(1==this.game.state.events.china_card)this.game.state.events.china_card=2,this.game.state.events.china_card_facedown=1,this.displayChinaCard();else{if(2==this.game.player)for(var Et=0;Et<this.game.deck[0].hand.length;Et++)"china"==this.game.deck[0].hand[Et]&&(Pt=1);if(1==this.game.player){Pt=1;for(var Ct=0;Ct<this.game.deck[0].hand.length;Ct++)"china"==this.game.deck[0].hand[Ct]&&(Pt=0)}}if(1==Pt)this.game.state.vp+=2,this.updateVictoryPoints(),this.updateLog("US gets 2 VP from Nixon");else{if(1==this.game.player)for(var At=0;At<this.game.deck[0].hand.length;At++)"china"==this.game.deck[0].hand[At]&&(this.updateLog("US gets the China Card (face down)"),this.game.deck[0].hand.splice(At,1));this.game.state.events.china_card=2,this.game.state.events.china_card_facedown=1,this.displayChinaCard()}return 1}if("norad"==t)return this.game.state.events.norad=1,1;if("northseaoil"==t)return this.game.state.events.northseaoil=1,this.game.state.events.northseaoil_bonus=1,1;if("nuclearsubs"==t)return this.game.state.events.nuclearsubs=1,1;if("nucleartestban"==t){var Mt=this.game.state.defcon-2;return Mt<0&&(Mt=0),this.game.state.defcon=this.game.state.defcon+2,this.game.state.defcon>5&&(this.game.state.defcon=5),this.game.state.vp="us"==e?this.game.state.vp+Mt:this.game.state.vp-Mt,this.updateVictoryPoints(),this.updateDefcon(),1}if("oas"==t){if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is playing OAS</div>"),0;if(2==this.game.player){for(var L in(y=this).playerFinishedPlacingInfluence(),N=2,y.addMove("resolve\toas"),this.updateStatus("<div class='status-message' id='status-message'>US places two influence in Central or South America</div>"),this.countries){var Tt=L,jt="#"+L;"venezuela"!=L&&"colombia"!=L&&"ecuador"!=L&&"peru"!=L&&"chile"!=L&&"bolivia"!=L&&"argentina"!=L&&"paraguay"!=L&&"uruguay"!=L&&"brazil"!=L&&"mexico"!=L&&"guatemala"!=L&&"elsalvador"!=L&&"honduras"!=L&&"nicaragua"!=L&&"costarica"!=L&&"panama"!=L&&"cuba"!=L&&"haiti"!=L&&"dominicanrepublic"!=L||(y.countries[Tt].place=1,$(jt).off(),$(jt).on("click",(function(){var e=$(this).attr("id");1==y.countries[e].place?(y.addMove("place\tus\tus\t"+e+"\t1"),y.placeInfluence(e,1,"us",(function(){0==--N&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))):y.displayModal("you cannot place there...")})))}return 0}}if("olympic"==t){var Ot="ussr",Dt="us";if(2==this.game.player&&(Dt="ussr",Ot="us"),e==Ot)return this.updateStatus("<div class='status-message' id='status-message'>Opponent is deciding whether to boycott the Olympics</div>"),0;var It=this;return this.addMove("resolve\tolympic"),It.updateStatus('<div class="status-message" id="status-message"><span>'+Dt.toUpperCase()+' holds the Olympics:</span><ul><li class="card" id="boycott">boycott</li><li class="card" id="participate">participate</li></ul></div>'),It.addShowCardEvents((function(t){if("boycott"==t)return It.addMove("ops\t"+Dt+"\tolympic\t4"),It.addMove("setvar\tgame\tstate\tback_button_cancelled\t1"),It.addMove("defcon\tlower"),It.addMove("notify\t"+Dt.toUpperCase()+" plays 4 OPS"),It.addMove("notify\t"+Ot.toUpperCase()+" boycotts the Olympics"),void It.endTurn();if("participate"==t)for(var a=0;0==a;){var r=It.rollDice(6),n=It.rollDice(6);It.addMove("dice\tburn\t"+e),It.addMove("dice\tburn\t"+e),"us"==Dt?r+=2:n+=2,n>r&&(It.addMove("vp\tussr\t2"),It.addMove("notify\tUSSR rolls "+n+" / US rolls "+r),It.addMove("notify\t"+Ot.toUpperCase()+" participates in the Olympics"),It.endTurn(),a=1),r>n&&(It.addMove("vp\tus\t2"),It.addMove("notify\tUSSR rolls "+n+" / US rolls "+r),It.addMove("notify\t"+Ot.toUpperCase()+" participates in the Olympics"),It.endTurn(),a=2)}})),0}if("onesmallstep"==t)return"us"==e?this.game.state.space_race_us<this.game.state.space_race_ussr&&(this.updateLog("US takes one small step into space..."),this.game.state.space_race_us+=1,2==this.game.state.space_race_us&&(this.game.state.animal_in_space=""),4==this.game.state.space_race_us&&(this.game.state.man_in_earth_orbit=""),6==this.game.state.space_race_us&&(this.game.state.eagle_has_landed=""),8==this.game.state.space_race_us&&(this.game.state.space_shuttle=""),this.advanceSpaceRace("us")):this.game.state.space_race_ussr<this.game.state.space_race_us&&(this.updateLog("USSR takes one small step into space..."),this.game.state.space_race_ussr+=1,2==this.game.state.space_race_ussr&&(this.game.state.animal_in_space=""),4==this.game.state.space_race_ussr&&(this.game.state.man_in_earth_orbit=""),6==this.game.state.space_race_ussr&&(this.game.state.eagle_has_landed=""),8==this.game.state.space_race_ussr&&(this.game.state.space_shuttle=""),this.advanceSpaceRace("ussr")),1;if("opec"==t){if(0==this.game.state.events.northseaoil){var Rt=0;1==this.isControlled("ussr","egypt")&&Rt++,1==this.isControlled("ussr","iran")&&Rt++,1==this.isControlled("ussr","libya")&&Rt++,1==this.isControlled("ussr","saudiarabia")&&Rt++,1==this.isControlled("ussr","gulfstates")&&Rt++,1==this.isControlled("ussr","iraq")&&Rt++,1==this.isControlled("ussr","venezuela")&&Rt++,this.game.state.vp-=Rt,this.updateVictoryPoints(),this.updateLog("<span>USSR VP bonus is:</span> "+Rt)}return 1}if("ortega"==t){var Bt=function(){var e=i;i.countries.nicaragua.us=0,i.showInfluence("nicaragua","us");var t=0;if(i.countries.cuba.us>0&&(t=1),i.countries.honduras.us>0&&(t=1),i.countries.costarica.us>0&&(t=1),0==t)return i.updateLog("notify\tUSSR does not have valid coup target"),{v:1};if(1==i.game.state.events.cubanmissilecrisis)return i.updateStatus("<div class='status-message' id='status-message'>USSR is under Cuban Missile Crisis and cannot coup. Skipping Ortega coup.</div>"),i.updateLog("USSR is under Cuban Missile Crisis and cannot coup. Skipping Ortega coup."),{v:1};if(1!=i.game.player)return i.updateStatus("<div class='status-message' id='status-message'>USSR is selecting a country for its free coup</div>"),{v:0};for(L in e.updateStatus("<div class='status-message' id='status-message'>Pick a country adjacent to Nicaragua to coup:<ul><li class=\"card\" id=\"skiportega\">or skip coup</li></ul></div>"),e.addShowCardEvents((function(t){"skiportega"==t&&(e.updateStatus("<div class='status-message' id='status-message'>Skipping Ortega coup...</div>"),e.addMove("resolve\tortega"),e.endTurn())})),e.countries){var a="#"+L;"costarica"==L||"cuba"==L||"honduras"==L?i.countries[L].us>0&&($(a).off(),$(a).on("click",(function(){var t=$(this).attr("id");e.addMove("resolve\tortega"),e.addMove("unlimit\tmilops"),e.addMove("coup\tussr\t"+t+"\t2"),e.addMove("limit\tmilops"),e.addMove("notify\tUSSR launches coup in "+t),e.endTurn()}))):($(a).off(),$(a).on("click",(function(){e.displayModal("Invalid Target")})))}return{v:0}}();if("object"===c(Bt))return Bt.v}if("panamacanal"==t)return this.placeInfluence("panama",1,"us"),this.placeInfluence("venezuela",1,"us"),this.placeInfluence("costarica",1,"us"),1;if("pershing"==t){if(2==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>USSR playing Pershing II Deployed</div>"),0;if(1==this.game.player){this.updateStatus("<div class='status-message' id='status-message'>Remove 3 US influence from Western Europe (max 1 per country)</div>"),(y=this).playerFinishedPlacingInfluence(),y.addMove("resolve\tpershing"),y.addMove("vp\tussr\t1");var qt=0;for(var L in this.countries){var Lt=L;y.countries[Lt].us>0&&qt++}if(0==qt)return y.addMove("notify\tUS does not have any targets for Pershing II"),void y.endTurn();for(var L in qt<(Z=3)&&(Z=qt),this.countries){var Nt=L,Ft="#"+L;"turkey"!=Nt&&"greece"!=Nt&&"spain"!=Nt&&"italy"!=Nt&&"france"!=Nt&&"canada"!=Nt&&"uk"!=Nt&&"benelux"!=Nt&&"denmark"!=Nt&&"austria"!=Nt&&"norway"!=Nt&&"sweden"!=Nt&&"finland"!=Nt&&"westgermany"!=Nt||y.countries[Nt].us>0&&(y.countries[Nt].place=1,$(Ft).off(),$(Ft).on("click",(function(){var e=$(this).attr("id");1!=y.countries[e].place?y.displayModal("Invalid Country"):(y.countries[e].place=0,y.removeInfluence(e,1,"us",(function(){y.addMove("remove\tussr\tus\t"+e+"\t1"),0==--Z&&(y.playerFinishedPlacingInfluence(),y.endTurn())})))})))}}return 0}if("portuguese"==t)return this.placeInfluence("seafricanstates",2,"ussr"),this.placeInfluence("angola",2,"ussr"),1;if("puppet"==t){if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is playing Puppet Governments</div>"),0;if(2==this.game.player){(y=this).playerFinishedPlacingInfluence(),N=3;var Ut=0;for(var L in y.addMove("resolve\tpuppet"),this.updateStatus("<div class='status-message' id='status-message'>US place three influence in countries without any influence</div>"),this.countries){var $t=L,zt="#"+L;0==y.countries[$t].us&&0==y.countries[$t].ussr&&(Ut++,y.countries[$t].place=1,$(zt).off(),$(zt).on("click",(function(){var e=$(this).attr("id");1==y.countries[e].place?(y.addMove("place\tus\tus\t"+e+"\t1"),y.placeInfluence(e,1,"us",(function(){y.countries[e].place=0,0==--N&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))):y.displayModal("you cannot place there...")})))}return Ut<N&&(N=Ut),N>0||y.playerFinishedPlacingInfluence(),0}}if("quagmire"==t)return this.game.state.events.norad=0,this.game.state.events.quagmire=1,1;if("reagan"==t){var Ht=0,Gt=this.countries.libya.ussr;if(Gt>=2){for(;Gt>1;)Gt-=2,Ht++;this.updateLog("<span>Reagan bombs Libya and US scores</span> "+Ht+" <span>VP</span>"),this.game.state.vp+=Ht,this.updateVictoryPoints()}return 1}if("redscare"==t)return"ussr"==e&&(this.game.state.events.redscare_player2+=1),"us"==e&&(this.game.state.events.redscare_player1+=1),1;if("reformer"==t){if(this.game.state.events.reformer=1,2==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>Waiting for USSR to play The Reformer</div>"),0;if(1==this.game.player){(y=this).playerFinishedPlacingInfluence();var Kt=4;this.game.state.vp<0&&(Kt=6),this.addMove("resolve\treformer"),this.updateStatus('<div class="status-message" id="status-message">Add</span> '+Kt+" <span>influence in Europe (max 2 per country)</div>"),N=Kt;var Wt={};for(var L in y.countries){var Vt=L;Wt[Vt]=0;var Yt="#"+L;"europe"==this.countries[Vt].region&&(this.countries[Vt].place=1,$(Yt).off(),$(Yt).on("click",(function(){var e=$(this).attr("id");1!=y.countries[e].place?y.displayModal("Invalid Placement"):(Wt[e]++,y.placeInfluence(e,1,"ussr",(function(){y.addMove("place\tussr\tussr\t"+e+"\t1"),Wt[e]>=2&&(y.countries[e].place=0),0==--N&&(y.playerFinishedPlacingInfluence(),y.endTurn())})))})))}return 0}return 1}if("romanianab"==t){var Jt=parseInt(this.countries.romania.us),Xt=parseInt(this.countries.romania.ussr);return this.removeInfluence("romania",Jt,"us"),Xt<3&&this.placeInfluence("romania",3-Xt,"ussr"),1}if("sadat"==t)return this.countries.egypt.ussr>0&&this.removeInfluence("egypt",this.countries.egypt.ussr,"ussr"),this.placeInfluence("egypt",1,"us"),1;if("saltnegotiations"==t){this.game.state.defcon+=2,this.game.state.defcon>5&&(this.game.state.defcon=5),this.updateDefcon(),this.game.state.events.saltnegotiations=1;var Qt=0;for(var L in this.game.deck[0].discards)Qt++;if(0==Qt)return this.updateLog("No cards in discard pile"),1;var Zt=0;if("ussr"===e&&1==this.game.player&&(Zt=1),"us"===e&&2==this.game.player&&(Zt=1),0==Zt)return this.updateStatus("<div class='status-message' id='status-message'>Opponent retrieving card from discard pile</div>"),console.log("HERE: "+Zt+" --- "+this.game.player+" --- "+e),0;y=this;var ea="<div class='status-message' id='status-message'>Choose Card to Reclaim:<ul>";for(var L in this.game.deck[0].discards)0==this.game.deck[0].discards[L].scoring&&(0==this.game.state.events.shuttlediplomacy||1==this.game.state.events.shuttlediplomacy&&"shuttle"!=L)&&(ea+='<li class="card showcard" id="'+L+'">'+this.game.deck[0].discards[L].name+"</li>");return ea+='<li class="card showcard" id="nocard">do not reclaim card...</li>',ea+="</ul></div>",y.updateStatus(ea),y.addMove("resolve\tsaltnegotiations"),y.addShowCardEvents((function(t){"nocard"!=t?(y.game.deck[0].hand.push(t),y.addMove("notify\t"+e.toUpperCase()+" retrieved "+y.game.deck[0].cards[t].name)):y.addMove("notify\t"+e.toUpperCase()+" does not retrieve card"),y.endTurn()})),0}if("seasia"==t){var ta=this.calculateScoring("seasia"),aa=ta.us.vp-ta.ussr.vp;return this.game.state.vp+=aa,this.updateLog("<span>Southeast Asia:</span> "+aa+" <span>VP</span>"),"us"==e&&this.game.state.stats.us_scorings++,"ussr"==e&&this.game.state.stats.ussr_scorings++,this.updateVictoryPoints(),1}if("shuttle"==t)return this.game.state.events.shuttlediplomacy=1,1;if("socgov"==t){if(1==this.game.state.events.ironlady)return this.updateLog("Iron Lady cancels Socialist Governments"),1;if(2==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>Socialist Governments: USSR is removing 3 US influence from Western Europe (max 2 per country)</div>"),0;if(1==this.game.player){this.updateStatus("<div class='status-message' id='status-message'>Remove 3 US influence from Western Europe (max 2 per country)</div>"),(y=this).playerFinishedPlacingInfluence(),y.addMove("resolve\tsocgov"),Z=3;var ra={};for(var L in Ut=0,this.countries)"italy"!=L&&"turkey"!=L&&"greece"!=L&&"spain"!=L&&"france"!=L&&"westgermany"!=L&&"uk"!=L&&"canada"!=L&&"benelux"!=L&&"finland"!=L&&"austria"!=L&&"denmark"!=L&&"norway"!=L&&"sweden"!=L||(1==y.countries[L].us&&(Ut+=1),y.countries[L].us>1&&(Ut+=2));for(var L in Ut<3&&(Z=Ut,this.updateStatus("<div class='status-message' id='status-message'>Remove "+Z+" US influence from Western Europe (max 2 per country)</div>")),this.countries){var na=L;ra[na]=0;var ia="#"+L;"italy"!=L&&"turkey"!=L&&"greece"!=L&&"spain"!=L&&"france"!=L&&"westgermany"!=L&&"uk"!=L&&"canada"!=L&&"benelux"!=L&&"finland"!=L&&"austria"!=L&&"denmark"!=L&&"norway"!=L&&"sweden"!=L||(y.countries[na].place=1,y.countries[na].us>0&&($(ia).off(),$(ia).on("click",(function(){var e=$(this).attr("id");1!=y.countries[e].place?y.displayModal("Invalid Country"):(ra[e]++,ra[e]>=2&&(y.countries[e].place=0),y.removeInfluence(e,1,"us",(function(){y.addMove("remove\tussr\tus\t"+e+"\t1"),0==--Z&&(y.playerFinishedPlacingInfluence(),y.endTurn())})))}))))}return 0}}if("solidarity"==t)return 1==this.game.state.events.johnpaul&&this.placeInfluence("poland",3,"us"),1;if("southafrican"==t){if(2==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>USSR is playing South African Unrest</div>"),0;if(1==this.game.player)return(y=this).playerFinishedPlacingInfluence(),y.updateStatus('<div class="status-message" id="status-message">USSR chooses:<ul><li class="card" id="southafrica">2 Influence in South Africa</li><li class="card" id="adjacent">1 Influence in South Africa and 2 Influence in adjacent countries</li></ul></div>'),y.addShowCardEvents((function(e){if("southafrica"==e)return y.placeInfluence("southafrica",2,"ussr",(function(){y.addMove("resolve\tsouthafrican"),y.addMove("place\tussr\tussr\tsouthafrica\t2"),y.endTurn()})),0;"adjacent"==e&&y.placeInfluence("southafrica",1,"ussr",(function(){y.addMove("resolve\tsouthafrican"),y.addMove("place\tussr\tussr\tsouthafrica\t1"),y.updateStatus("<div class='status-message' id='status-message'>Place two influence in countries adjacent to South Africa</div>");var e=2;for(var t in y.countries){var a="#"+t;"angola"!=t&&"botswana"!=t||($(a).off(),$(a).on("click",(function(){var t=$(this).attr("id");y.placeInfluence(t,1,"ussr",(function(){y.addMove("place\tussr\tussr\t"+t+"\t1"),0==--e&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))})))}}))})),0}if("southamerica"==t){var sa=this.calculateScoring("southamerica"),oa=sa.us.vp-sa.ussr.vp;return this.game.state.vp+=oa,this.updateLog("<span>South America:</span> "+oa+" <span>VP</span>"),"us"==e&&this.game.state.stats.us_scorings++,"ussr"==e&&this.game.state.stats.ussr_scorings++,this.updateVictoryPoints(),1}if("specialrelation"==t){if(1==this.isControlled("us","uk")){var ca=function(){if(1==i.game.player)return i.updateStatus("<div class='status-message' id='status-message'>US is playing Special Relationship</div>"),{v:0};i.updateStatus("<div class='status-message' id='status-message'>US is playing Special Relationship</div>");var e=i,t=1,a=[];1==i.game.state.events.nato?(t=2,a.push("canada"),a.push("uk"),a.push("italy"),a.push("france"),a.push("spain"),a.push("greece"),a.push("turkey"),a.push("austria"),a.push("benelux"),a.push("westgermany"),a.push("denmark"),a.push("norway"),a.push("sweden"),a.push("finland"),i.updateStatus("<div class='status-message' id='status-message'>US is playing Special Relationship. Place 2 OPS anywhere in Western Europe.")):(i.updateStatus("<div class='status-message' id='status-message'>US is playing Special Relationship. Place 1 OP adjacent to the UK.</div>"),a.push("canada"),a.push("france"),a.push("norway"),a.push("benelux"));for(var r=0;r<a.length;r++){i.game.countries[a[r]].place=1;var n="#"+a[r];$(n).off(),$(n).on("click",(function(){e.addMove("resolve\tspecialrelation"),1==e.game.state.events.nato&&e.addMove("vp\tus\t2");var a=$(this).attr("id");1!=e.countries[a].place?e.displayModal("Invalid Placement"):e.placeInfluence(a,t,"us",(function(){e.addMove("place\tus\tus\t"+a+"\t"+t),e.playerFinishedPlacingInfluence(),e.endTurn()}))}))}return{v:0}}();if("object"===c(ca))return ca.v}return 1}if("starwars"==t){if(this.game.state.space_race_us<=this.game.state.space_race_ussr)return this.updateLog("US is not ahead of USSR in the space race"),1;this.game.state.events.starwars=1;var la=0;for(var L in this.game.deck[0].discards)la++;if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>Opponent retrieving event from discard pile</div>"),0;y=this,this.addMove("resolve\tstarwars");var ua="<div class='status-message' id='status-message'>Choose card to reclaim: <ul>";for(var L in this.game.deck[0].discards)1==this.game.state.headline&&"unintervention"==L||null!=this.game.deck[0].cards[L]&&null!=this.game.deck[0].cards[L].name&&1!=this.game.deck[0].cards[L].scoring&&(0==this.game.state.events.shuttlediplomacy||1==this.game.state.events.shuttlediplomacy&&"shuttle"!=L?ua+='<li class="card showcard" id="'+L+'">'+this.game.deck[0].cards[L].name+"</li>":la--);return 0==la?(this.updateLog("No cards in discard pile"),y.addMove("notify\tUS cannot use Star Wars as no cards to retrieve"),y.endTurn(),1):(ua+="</li></ul></div>",y.updateStatus(ua),y.addShowCardEvents((function(t){y.addMove("event\tus\t"+t),y.addMove("notify\t"+e+" retrieved "+y.game.deck[0].cards[t].name),y.endTurn()})),0)}if("suezcrisis"==t)return 2==this.game.player?(this.updateStatus("<div class='status-message' id='status-message'>USSR is playing Suez Crisis</div>"),0):(1==this.game.player&&function(){(y=i).addMove("resolve\tsuezcrisis"),y.updateStatus("<div class='status-message' id='status-message'>Remove four influence from Israel, UK or France</div>"),Z=4,te=[];var e={};if(a=y.countries.israel.us,r=y.countries.uk.us,n=y.countries.france.us,a>2&&(a=2),r>2&&(r=2),n>2&&(n=2),a+r+n<=4)i.updateLog("Suez Crisis auto-removed available influence"),a>=2&&(a=2),r>=2&&(r=2),n>=2&&(n=2),a>0&&(y.removeInfluence("israel",a,"us"),y.addMove("remove\tussr\tus\tisrael\t"+a)),n>0&&(y.removeInfluence("france",n,"us"),y.addMove("remove\tussr\tus\tfrance\t"+n)),r>0&&(y.removeInfluence("uk",r,"us"),y.addMove("remove\tussr\tus\tuk\t"+r)),y.endTurn();else{y.countries.uk.us>0&&te.push("uk"),y.countries.france.us>0&&te.push("france"),y.countries.israel.us>0&&te.push("israel");for(var t=0;t<te.length;t++){var s=te[t];e[s]=0,y.countries[s].place=1;var o="#"+s;$(o).off(),$(o).on("click",(function(){var t=$(this).attr("id");1!=y.countries[t].place?y.displayModal("Invalid Option"):(y.removeInfluence(t,1,"us"),y.addMove("remove\tussr\tus\t"+t+"\t1"),e[t]++,e[t]>=2&&(y.countries[t].place=0),0==--Z&&(y.playerFinishedPlacingInfluence(),y.displayModal("All Influence Removed"),y.endTurn()))}))}}}(),0);if("summit"==t){var da=this.rollDice(6),pa=this.rollDice(6),ha=da,fa=pa;1==this.doesPlayerDominateRegion("ussr","europe")&&pa++,1==this.doesPlayerDominateRegion("ussr","mideast")&&pa++,1==this.doesPlayerDominateRegion("ussr","asia")&&pa++,1==this.doesPlayerDominateRegion("ussr","africa")&&pa++,1==this.doesPlayerDominateRegion("ussr","camerica")&&pa++,1==this.doesPlayerDominateRegion("ussr","samerica")&&pa++,1==this.doesPlayerDominateRegion("ussr","seasia")&&pa++,1==this.doesPlayerDominateRegion("us","europe")&&da++,1==this.doesPlayerDominateRegion("us","mideast")&&da++,1==this.doesPlayerDominateRegion("us","asia")&&da++,1==this.doesPlayerDominateRegion("us","africa")&&da++,1==this.doesPlayerDominateRegion("us","camerica")&&da++,1==this.doesPlayerDominateRegion("us","samerica")&&da++,1==this.doesPlayerDominateRegion("us","seasia")&&da++,this.updateLog("<span>Summit: US rolls</span> "+ha+" (+"+(da-ha)+") and USSR rolls "+fa+" (+"+(pa-fa)+")");var ma=0;if(da>pa&&(ma=1),pa>da&&(ma=1),0==ma)return this.updateLog("<span>Summit: no winner</span>"),1;var ga=0;if(da>pa&&2==this.game.player&&(ga=1),pa>da&&1==this.game.player&&(ga=1),1==ga){var ba=this;ba.addMove("resolve\tsummit"),da>pa?(ba.updateLog("<span>US receives 2 VP from Summit</span>"),ba.addMove("vp\tus\t2")):(ba.updateLog("<span>USSR receives 2 VP from Summit</span>"),ba.addMove("vp\tussr\t2")),this.updateStatus('<div class="status-message" id="status-message"><span>You win the Summit:</span><ul><li class="card" id="raise">raise DEFCON</li><li class="card" id="lower">lower DEFCON</li><li class="card" id="same">do not change</li></ul></div>'),ba.addShowCardEvents((function(e){"raise"==e&&(ba.updateStatus("<div class='status-message' id='status-message'>broadcasting choice....</div>"),ba.addMove("resolve\tsummit"),ba.addMove("defcon\traise"),ba.addMove("notify\tDEFCON is raised by 1"),ba.endTurn()),"lower"==e&&(ba.updateStatus("<div class='status-message' id='status-message'>broadcasting choice....</div>"),ba.addMove("resolve\tsummit"),ba.addMove("defcon\tlower"),ba.addMove("notify\tDEFCON is lowered by 1"),ba.endTurn()),"same"==e&&(ba.updateStatus("<div class='status-message' id='status-message'>broadcasting choice....</div>"),ba.addMove("resolve\tsummit"),ba.addMove("notify\tDEFCON left untouched"),ba.endTurn())}))}return 0}if("teardown"===t)return this.game.state.events.teardown=1,this.game.state.events.willybrandt=0,1==this.game.state.events.nato&&(this.game.state.events.nato_westgermany=1),this.countries.eastgermany.us+=3,this.showInfluence("eastgermany","us"),2==this.game.player&&(this.addMove("resolve\tteardown"),this.addMove("teardownthiswall\tus"),this.endTurn()),0;if("tehran"==t){var ya=0;if(1==this.isControlled("us","egypt")&&(ya=1),1==this.isControlled("us","libya")&&(ya=1),1==this.isControlled("us","israel")&&(ya=1),1==this.isControlled("us","lebanon")&&(ya=1),1==this.isControlled("us","syria")&&(ya=1),1==this.isControlled("us","iraq")&&(ya=1),1==this.isControlled("us","iran")&&(ya=1),1==this.isControlled("us","jordan")&&(ya=1),1==this.isControlled("us","gulfstates")&&(ya=1),1==this.isControlled("us","saudiarabia")&&(ya=1),0==ya)return this.updateLog("US does not control any Middle-East Countries"),1;if(this.game.state.events.ourmanintehran=1,2==this.game.player&&this.updateStatus("<div class='status-message' id='status-message'>Waiting for USSR to provide keys to examine deck</div>"),1==this.game.player){this.addMove("resolve\ttehran");for(var va=0,_a=0;_a<this.game.deck[0].crypt.length&&_a<5;_a++)this.addMove(this.game.deck[0].keys[_a]),va++;this.addMove("tehran\tussr\t"+va),this.endTurn()}return 0}if("terrorism"==t){var wa=function(){var t=1,a="ussr",r=i;if("ussr"==e&&(a="us"),"us"==a&&1==i.game.state.events.iranianhostage&&(t=2),i.addMove("resolve\tterrorism"),2==i.game.player&&"us"==a&&function(){i.game.deck[0].hand.length;for(var e=[],n=0;n<i.game.deck[0].hand.length;n++)"china"===i.game.deck[0].hand[L]||i.game.deck[0].hand[L]==i.game.state.headline_opponent_card||i.game.deck[0].hand[L]==i.game.state.headline_card?cards_to_reveal--:e.push(i.game.deck[0].hand[n]);e.length<t&&(t=e.length),0==t&&i.addMove("notify\tUS has no cards to discard");for(var s=0;s<t;s++)e.length>0&&i.rollDice(e.length,(function(t){t=parseInt(t)-1;var n=e[t];r.removeCardFromHand(n),r.addMove("dice\tburn\tussr"),r.addMove("discard\tus\t"+n),r.addMove("notify\t"+a.toUpperCase()+" discarded "+r.game.deck[0].cards[n].name),e.splice(t,1)}));r.endTurn()}(),1==i.game.player&&"ussr"==a){for(var n=[],s=(i.game.deck[0].hand.length,0);s<i.game.deck[0].hand.length;s++)"china"!=i.game.deck[0].hand[s]&&n.push(i.game.deck[0].hand[s]);if(n.length<t&&(t=n.length),0==t)return i.addMove("notify\tUSSR has no cards to discard"),i.endTurn(),{v:0};i.rollDice(n.length,(function(e){e=parseInt(e)-1;var t=n[e];r.removeCardFromHand(t),r.addMove("dice\tburn\tus"),r.addMove("discard\tussr\t"+t),r.addMove("notify\t"+a.toUpperCase()+" discarded "+r.game.deck[0].cards[t].name),r.endTurn()}))}return{v:0}}();if("object"===c(wa))return wa.v}if("truman"==t){for(var L in y=this,te=[],this.countries)"canada"!=L&&"uk"!=L&&"france"!=L&&"spain"!=L&&"greece"!=L&&"turkey"!=L&&"italy"!=L&&"westgermany"!=L&&"eastgermany"!=L&&"poland"!=L&&"benelux"!=L&&"denmark"!=L&&"norway"!=L&&"finland"!=L&&"sweden"!=L&&"yugoslavia"!=L&&"czechoslovakia"!=L&&"bulgaria"!=L&&"hungary"!=L&&"romania"!=L&&"austria"!=L||y.countries[L].ussr>0&&1!=y.isControlled("ussr",L)&&1!=y.isControlled("us",L)&&te.push(L);if(0==te.length)return this.updateLog("USSR has no influence that can be removed by Truman"),1;if(1==te.length)return y.removeInfluence(te[0],y.countries[te[0]].ussr,"ussr"),this.updateLog("Truman removes all USSR influence from "+te[0]),1;if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is selecting target for Truman</div>"),0;if(2==this.game.player){y.updateStatus("<div class='status-message' id='status-message'>Select a non-controlled country in Europe to remove all USSR influence: </div>"),y.playerFinishedPlacingInfluence(),y.addMove("resolve\ttruman");for(var xa=0;xa<te.length;xa++){var ka=te[xa],Sa="#"+ka;y.countries[ka].place=1,$(Sa).off(),$(Sa).on("click",(function(){var e=$(this).attr("id"),t=y.countries[e].ussr;y.removeInfluence(e,t,"ussr",(function(){y.addMove("notify\tUS removes all USSR influence from "+y.countries[e].name),y.addMove("remove\tus\tussr\t"+e+"\t"+t),y.playerFinishedPlacingInfluence(),y.endTurn()}))}))}}return 0}if("u2"==t)return this.game.state.events.u2=1,this.game.state.vp-=1,this.updateVictoryPoints(),1;if("unintervention"==t){this.game.state.events.unintervention=1,this.game.state.cancel_back_button=1;var Pa="ussr";return 2==this.game.player&&(Pa="us"),e!=Pa?0:(1==this.game.state.events.u2&&(this.addMove("notify\tU2 activates and triggers +1 VP for USSR"),this.addMove("vp\tussr\t1\t1")),this.addMove("resolve\tunintervention"),this.addMove("play\t"+this.game.player),this.playerTurn(),0)}if("usjapan"==t){this.game.state.events.usjapan=1;var Ea=parseInt(this.countries.japan.us),Ca=parseInt(this.countries.japan.ussr),Aa=Ca+4;return Ea<Ca+4&&this.placeInfluence("japan",Aa-Ea,"us"),1}if("ussuri"==t){var Ma=0;if(2==this.game.state.events.china_card)Ma=1;else{if(1==this.game.player){var Ta=0;1==this.game.state.events.china_card&&(Ta=1);for(var ja=0;ja<this.game.deck[0].hand.length;ja++)"china"==this.game.deck[0].hand[ja]&&(Ta=1);1==Ta||(Ma=1)}if(2==this.game.player)for(var Oa=0;Oa<this.game.deck[0].hand.length;Oa++)"china"==this.game.deck[0].hand[Oa]&&(Ma=1)}if(1!=Ma){if(this.updateLog("US gets the China Card (face up)"),this.game.state.events.china_card=0,1==this.game.player)for(var Da=0;Da<this.game.deck[0].hand.length;Da++)"china"==this.game.deck[0].hand[Da]&&this.game.deck[0].hand.splice(Da,1);return 2==this.game.player&&(this.game.deck[0].hand.includes("china")||this.game.deck[0].hand.push("china")),1}if(this.updateLog("US places 4 influence in Asia (max 2 per country)"),1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is playing USSURI River Skirmish</div>"),0;if(2==this.game.player){(y=this).playerFinishedPlacingInfluence(),N=4,y.addMove("resolve\tussuri"),this.updateStatus("<div class='status-message' id='status-message'>US place four influence in Asia (2 max per country)</div>");var Ia=function(){var e=L,t="#"+L,a=[];-1!=i.countries[L].region.indexOf("asia")&&(a[L]=0,y.countries[e].place=1,$(t).off(),$(t).on("click",(function(){var e=$(this).attr("id");1==y.countries[e].place?(a[e]++,y.addMove("place\tus\tus\t"+e+"\t1"),y.placeInfluence(e,1,"us",(function(){a[e]>=2&&(y.countries[e].place=0),0==--N&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))):y.displayModal("you cannot place there...")})))};for(var L in this.countries)Ia();return 0}}if("vietnamrevolts"==t)return this.game.state.events.vietnam_revolts=1,this.placeInfluence("vietnam",2,"ussr"),1;if("voiceofamerica"==t){Z=4;var Ra=0;for(var L in this.countries)this.countries[L].ussr>0&&(Ra+=this.countries[L].ussr);if(Z>Ra&&(Z=Ra),Z<=0)return 1;if(1==this.game.player)return 0;if(2==this.game.player)for(var L in this.updateStatus("<div class='status-message' id='status-message'>Remove 4 USSR influence from non-European countries (max 2 per country)</div>"),ra={},(y=this).playerFinishedPlacingInfluence(),y.addMove("resolve\tvoiceofamerica"),this.countries){var Ba=L;ra[Ba]=0;var qa="#"+L;"europe"!=this.countries[L].region&&(y.countries[Ba].place=1,$(qa).off(),$(qa).on("click",(function(){var e=$(this).attr("id");1!=y.countries[e].place||0==y.countries[e].ussr?y.displayModal("Invalid Country"):(ra[e]++,ra[e]>=2&&(y.countries[e].place=0),y.removeInfluence(e,1,"ussr",(function(){y.addMove("remove\tus\tussr\t"+e+"\t1"),0==--Z&&(y.playerFinishedPlacingInfluence(),y.endTurn())})))})))}return 0}if("wargames"==t){if(2!=this.game.state.defcon)return this.updateLog("Wargames event cannot trigger as DEFCON is not at 2"),1;var La=this,Na=1;return"us"==e&&(Na=2),Na!=this.game.player?(this.updateStatus("<div class='status-message' id='status-message'>Opponent deciding whether to trigger Wargames...</div>"),0):(this.updateStatus('<div class="status-message" id="status-message"><span>Wargames triggers. Do you want to give your opponent 6 VP and End the Game? (VP ties will be won by opponents)</span><ul><li class="card" id="endgame">end the game</li><li class="card" id="cont">continue playing</li></ul></div>'),La.addShowCardEvents((function(t){"endgame"==t&&(La.updateStatus("<div class='status-message' id='status-message'>Triggering Wargames...</div>"),La.addMove("resolve\twargames"),La.addMove("wargames\t"+e+"\t1"),La.endTurn()),"cont"==t&&(La.updateStatus("<div class='status-message' id='status-message'>Discarding Wargames...</div>"),La.addMove("resolve\twargames"),La.addMove("wargames\t"+e+"\t0"),La.endTurn())})),0)}if("warsawpact"==t)return this.game.state.events.warsawpact=1,2==this.game.player?(this.updateStatus("<div class='status-message' id='status-message'>Waiting for USSR to play Warsaw Pact</div>"),0):1==this.game.player?((y=this).playerFinishedPlacingInfluence(),y.updateStatus('\n          <div class="status-message" id="status-message">\n          <div>USSR establishes the Warsaw Pact:</div>\n          <ul>\n            <li class="card" id="remove">remove all US influence in four countries in Eastern Europe</li>\n            <li class="card" id="add">add five USSR influence in Eastern Europe (max 2 per country)</li>\n          </ul>\n          </div>\n        '),y.addShowCardEvents((function(e){if("remove"==e){y.addMove("resolve\twarsawpact"),y.updateStatus('<div class="status-message" id="status-message">Remove all US influence from four countries in Eastern Europe</div>');var t=[];if(y.countries.czechoslovakia.us>0&&t.push("czechoslovakia"),y.countries.austria.us>0&&t.push("austria"),y.countries.hungary.us>0&&t.push("hungary"),y.countries.romania.us>0&&t.push("romania"),y.countries.yugoslavia.us>0&&t.push("yugoslavia"),y.countries.bulgaria.us>0&&t.push("bulgaria"),y.countries.eastgermany.us>0&&t.push("eastgermany"),y.countries.poland.us>0&&t.push("poland"),y.countries.finland.us>0&&t.push("finland"),t.length<=4){for(var a=0;a<t.length;a++)y.addMove("remove\tussr\tus\t"+t[a]+"\t"+y.countries[t[a]].us),y.removeInfluence(t[a],y.countries[t[a]].us,"us");y.endTurn()}else{var r=0;for(var n in y.countries){var i=n,s="#"+n;"czechoslovakia"!=n&&"austria"!=n&&"hungary"!=n&&"romania"!=n&&"yugoslavia"!=n&&"bulgaria"!=n&&"eastgermany"!=n&&"poland"!=n&&"finland"!=n||(y.countries[i].us>0&&(y.countries[i].place=1),$(s).off(),$(s).on("click",(function(){var e=$(this).attr("id");if(1!=y.countries[e].place)y.displayModal("Invalid Option");else{y.countries[e].place=0;var t=y.countries[e].us;y.removeInfluence(e,t,"us",(function(){y.addMove("remove\tussr\tus\t"+e+"\t"+t),4==++r&&(y.playerFinishedPlacingInfluence(),y.endTurn())}))}})))}}}if("add"==e){y.addMove("resolve\twarsawpact"),y.updateStatus('<div class="status-message" id="status-message">Add five influence in Eastern Europe (max 2 per country)</div>');var o=5,c={};for(var n in y.countries){var l=n;c[l]=0;var u="#"+n;"czechoslovakia"!=n&&"austria"!=n&&"hungary"!=n&&"romania"!=n&&"yugoslavia"!=n&&"bulgaria"!=n&&"eastgermany"!=n&&"poland"!=n&&"finland"!=n||(y.countries[l].place=1,$(u).off(),$(u).on("click",(function(){var e=$(this).attr("id");1!=y.countries[e].place?y.displayModal("Invalid Placement"):(c[e]++,y.placeInfluence(e,1,"ussr",(function(){y.addMove("place\tussr\tussr\t"+e+"\t1"),c[e]>=2&&(y.countries[e].place=0),0==--o&&(y.playerFinishedPlacingInfluence(),y.endTurn())})))})))}}})),0):1;if("willybrandt"==t)return 1==this.game.state.events.teardown?(this.updateLog("Willy Brandt canceled by Tear Down this Wall"),1):(this.game.state.vp-=1,this.updateVictoryPoints(),this.countries.westgermany.ussr+=1,this.showInfluence("westgermany","ussr"),this.game.state.events.nato_westgermany=0,this.game.state.events.willybrandt=1,1);if("wwby"==t)return this.game.state.events.wwby=1,this.lowerDefcon(),this.updateDefcon(),this.game.state.defcon<=1&&1!=this.game.over?(0==this.game.state.turn?this.endGame("us","defcon"):this.endGame("ussr","defcon"),0):1;if("yuri"==t)return this.game.state.events.yuri=1,1;if("berlinagreement"==t){var Fa=function(){i.game.state.events.optional.berlinagreement=1;var t=i,a="us";2==i.game.player&&(a="ussr"),i.game.countries.eastgermany.us+=2,i.game.countries.westgermany.ussr+=2,i.showInfluence("eastgermany","us"),i.showInfluence("westgermany","ussr");var r=[];for(L in t.countries){var n=L,s=0,o=0;"europe"==i.countries[n].region&&(i.countries[n].us>i.countries[n].ussr&&(s=1),i.countries[n].us<i.countries[n].ussr&&(o=1),"us"==e&&1==s&&r.push(n),"ussr"==e&&1==o&&r.push(n))}if(0==r.length)return i.updateLog(e+" cannot place 1 additional OP"),{v:1};if(e==a)return i.updateStatus("<div class='status-message' id='status-message'>Opponent is placing 1 influence in a European country in which they have a predominance of influence</div>"),{v:0};i.addMove("resolve\tberlinagreement"),i.updateStatus("<div class='status-message' id='status-message'>Place 1 influence in a European country in which you have a predominance of influence</div>");for(var c=function(a){var n=r[a],s="#"+r[a];i.game.countries[r[a]].place=1,$(s).off(),$(s).on("click",(function(){t.placeInfluence(n,1,e,(function(){t.addMove("place\t"+e+"\t"+e+"\t"+n+"\t1"),t.playerFinishedPlacingInfluence(),t.endTurn()}))}))},l=0;l<r.length;l++)c(l);return{v:0}}();if("object"===c(Fa))return Fa.v}if("culturaldiplomacy"==t){if((y=this).playerFinishedPlacingInfluence(),"us"==e&&2==this.game.player||"ussr"==e&&1==this.game.player)for(var L in y.addMove("resolve\tculturaldiplomacy"),this.updateStatus("<div class='status-message' id='status-message'>Place one influence two hops away from a country in which you have existing influence. You cannot break control with this influence.</div>"),this.countries){var Ua="#"+L;$(Ua).off(),$(Ua).on("click",(function(){for(var t=0,a=0,r=$(this).attr("id"),n=y.countries[r].neighbours,i=0;i<n.length;i++)for(var s=y.countries[r].neighbours[i],o=y.countries[s].neighbours,c=0;c<o.length;c++){var l=o[c];"us"==e&&y.countries[l].us>0&&(t=1),"ussr"==e&&y.countries[l].ussr>0&&(t=1),1==t&&(i=100,c=100)}"us"==e&&1==y.isControlled("ussr",r)&&(a=1),"ussr"==e&&1==y.isControlled("us",r)&&(a=1),1==t&&0==a?(y.addMove("place\t"+e+"\t"+e+"\t"+r+"\t1"),y.placeInfluence(r,1,e,(function(){y.playerFinishedPlacingInfluence(),y.endTurn()}))):y.displayModal("Invalid Target")}))}else this.updateLog("Opponent is launching a soft-power tour");return 0}if("gouzenkoaffair"==t)return this.updateLog("Canada now permanently adjacent to USSR"),this.game.countries.canada.ussr+=2,this.game.state.events.optional.gouzenkoaffair=1,this.showInfluence("canada","ussr"),1;if("handshake"==t)return"us"==e?(this.updateLog("USSR advances in the Space Race..."),this.game.state.space_race_ussr+=1,this.updateSpaceRace()):(this.updateLog("US advances in the Space Race..."),this.game.state.space_race_us+=1,this.updateSpaceRace()),1;if("poliovaccine"==t){var $a=0;if("ussr"==e&&1==this.game.player&&($a=1),"us"==e&&2==this.game.player&&($a=1),0==$a)return this.updateStatus("<div class='status-message' id='status-message'>Waiting for Opponent to play Polio Vaccine</div>"),0;if(1==$a){y=this;for(var za=0,Ha=0,Ga="<div class='status-message' id='status-message'>Select cards to discard:<ul>",Ka=0;Ka<this.game.deck[0].hand.length;Ka++)"china"!=this.game.deck[0].hand[Ka]&&(Ga+='<li class="card showcard" id="'+this.game.deck[0].hand[Ka]+'">'+this.game.deck[0].cards[this.game.deck[0].hand[Ka]].name+"</li>",Ha++);if(0==Ha)return y.addMove("notify\tPlayer has no cards available to discard"),y.endTurn(),0;Ga+='</ul> When you are done discarding <span class="card dashed showcard nocard" id="finished">click here</span>.</div>',y.updateStatus(Ga),y.addMove("resolve\tpoliovaccine"),y.addShowCardEvents((function(e){if(za++,y.removeCardFromHand(action2),y.addMove("discard\tus\t"+action2),console.log(za),"finished"==action2||3==za){if(1==this.game.player&&y.addMove("DEAL\t1\t1\t"+za),2==this.game.player&&y.addMove("DEAL\t1\t2\t"+za),za>y.game.deck[0].crypt.length){var t=y.returnDiscardedCards();Object.keys(t).length>0&&(y.addMove("SHUFFLE\t1"),y.addMove("DECKRESTORE\t1"),y.addMove("DECKENCRYPT\t1\t2"),y.addMove("DECKENCRYPT\t1\t1"),y.addMove("DECKXOR\t1\t2"),y.addMove("DECKXOR\t1\t1"),y.addMove("flush\tdiscards"),y.addMove("DECK\t1\t"+JSON.stringify(t)),y.addMove("DECKBACKUP\t1"),y.updateLog("cards remaining: "+y.game.deck[0].crypt.length),y.updateLog("Shuffling discarded cards back into the deck..."))}y.endTurn()}}))}return 0}if("rustinredsquare"==t)return this.updateLog("DEFCON increases by 1"),this.updateLog("USSR milops reset to 0"),this.game.state.defcon++,this.game.state.milops_ussr=0,this.updateDefcon(),this.updateMilitaryOperations(),1;if("breakthroughatlopnor"==t){for(var Wa=this.whoHasTheChinaCard(),Va=0;Va<this.game.deck[0].hand.length;Va++)"china"==this.game.deck[0].hand[Va]&&this.game.deck[0].hand.splice(Va,1);for(var L in"us"==Wa?(1==this.game.state.events.china_card_facedown&&(this.game.state.vp-=1,this.updateLog("US loses 1 VP for Lop Nor"),this.updateVictoryPoints()),this.game.state.events.china_card=2,this.game.state.events.china_card_facedown=1):(1==this.game.state.events.china_card_facedown&&(this.game.state.vp+=1,this.updateLog("USSR loses 1 VP for Lop Nor"),this.updateVictoryPoints()),this.game.state.events.china_card=1,this.game.state.events.china_card_facedown=1),this.displayChinaCard(),Z=3,Ra=0,this.countries)this.countries[L].us>0&&(Ra+=this.countries[L].us);if(Z>Ra&&(Z=Ra),Z<=0)return 1;if(2==this.game.player)return 0;if(1==this.game.player)for(var L in this.updateStatus("<div class='status-message' id='status-message'>Remove 3 US influence from Southeast Asia or North Korea (max 2 per country)</div>"),ra={},(y=this).playerFinishedPlacingInfluence(),y.addMove("resolve\tbreakthroughatlopnor"),this.countries){var Ya=L;ra[Ya]=0;var Ja="#"+L;"seasia"!==this.countries[L].region&&"northkorea"!=L||(y.countries[Ya].place=1,$(Ja).off(),$(Ja).on("click",(function(){var e=$(this).attr("id");1!=y.countries[e].place||0==y.countries[e].us?y.displayModal("Invalid Country"):(ra[e]++,ra[e]>=2&&(y.countries[e].place=0),y.removeInfluence(e,1,"us",(function(){y.addMove("remove\tussr\tus\t"+e+"\t1"),0==--Z&&(y.playerFinishedPlacingInfluence(),y.endTurn())})))})))}return 0}if("eurocommunism"==t){if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>Eurocommunism: US is removing 4 USSR influence from Western Europe (max 2 per country)</div>"),0;if(2==this.game.player){var Xa=function(){i.updateStatus("<div class='status-message' id='status-message'>Remove 4 USSR influence from Western Europe (max 2 per country)</div>");var e=i;e.playerFinishedPlacingInfluence(),e.addMove("resolve\teurocommunism");var t=4,a={},r=0;for(L in i.countries)"italy"!=L&&"turkey"!=L&&"greece"!=L&&"spain"!=L&&"france"!=L&&"westgermany"!=L&&"uk"!=L&&"canada"!=L&&"benelux"!=L&&"finland"!=L&&"austria"!=L&&"denmark"!=L&&"norway"!=L&&"sweden"!=L||(1==e.countries[L].ussr&&(r+=1),e.countries[L].ussr>1&&(r+=2));if(0==r)return i.addMove("notify\tUSSR has no influence in Western Europe to remove"),i.endTurn(),{v:0};for(L in r<4&&(t=r,i.updateStatus("<div class='status-message' id='status-message'>Remove "+t+" USSR influence from Western Europe (max 2 per country)</div>")),i.countries){var n=L;a[n]=0;var s="#"+L;"italy"!=L&&"turkey"!=L&&"greece"!=L&&"spain"!=L&&"france"!=L&&"westgermany"!=L&&"uk"!=L&&"canada"!=L&&"benelux"!=L&&"finland"!=L&&"austria"!=L&&"denmark"!=L&&"norway"!=L&&"sweden"!=L||(e.countries[n].place=1,e.countries[n].ussr>0&&($(s).off(),$(s).on("click",(function(){var r=$(this).attr("id");1!=e.countries[r].place?e.displayModal("Invalid Country"):(a[r]++,a[r]>=2&&(e.countries[r].place=0),e.removeInfluence(r,1,"ussr",(function(){e.addMove("remove\tus\tussr\t"+r+"\t1"),0==--t&&(e.playerFinishedPlacingInfluence(),e.endTurn())})))}))))}return{v:0}}();if("object"===c(Xa))return Xa.v}return 0}if("greatsociety"==t)return this.game.state.events.greatsociety=1,1;if("inftreaty"==t){this.game.state.defcon+=2,this.game.state.defcon>5&&(this.game.state.defcon=5),this.updateDefcon(),this.game.state.events.inftreaty=1;var Qa=0;return"ussr"===e&&1==this.game.player&&(Qa=1),"us"===e&&2==this.game.player&&(Qa=1),0==Qa?(this.updateStatus("<div class='status-message' id='status-message'>Opponent is playing INF Treaty</div>"),0):(this.addMove("resolve\tinftreaty"),this.addMove("unlimit\tcoups"),this.addMove("ops\t"+e+"\tinftreaty\t3"),this.addMove("limit\tcoups"),this.addMove("notify\t"+e+" plays 3 OPS for influence or realignments"),this.endTurn(),0)}if("manwhosavedtheworld"==t)return this.game.state.events.manwhosavedtheworld=e,1;if("nationbuilding"==t){var Za=function(){var t=i,a="ussr",r="us";if(2==i.game.player&&(r="ussr",a="us"),e!=a)return i.updateStatus("<div class='status-message' id='status-message'>Opponent is playing Nation Building</div>"),{v:0};var n=function(){i.addMove("resolve\tnationbuilding");for(var n=[],s=0;s<i.game.deck[0].hand.length;s++)"ussr"===a&&"ussr"===i.game.deck[0].cards[i.game.deck[0].hand[s]].player&&n.push(i.game.deck[0].hand[s]),"us"===a&&"us"===i.game.deck[0].cards[i.game.deck[0].hand[s]].player&&n.push(i.game.deck[0].hand[s]);if(0==n.length)return i.playerFinishedPlacingInfluence(),i.addMove("notify\t"+e.toUpperCase()+" has no valid cards for Nation Building"),i.endTurn(),{v:{v:0}};var o=0;for(L in i.updateStatus("<div class='status-message' id='status-message'>Select any country in Africa, Central America or South America that is not controlled by the opposing player and in which you have at least 1 influence: </div>"),i.countries){var c="#"+L,l=0;1!=i.isControlled(r,L)&&("ussr"==a&&i.countries[L].ussr>0&&(l=1),"us"==a&&i.countries[L].us>0&&(l=1)),1==l?(o++,$(c).off(),$(c).on("click",(function(){var a=$(this).attr("id");$(".country").off(),t.updateStatusAndListCards("Discard one of the following cards to increase the stability of this country by 1 and add 1 influence: ",n),t.addShowCardEvents((function(r){t.placeInfluence(a,1,e,(function(){t.removeCardFromHand(r),t.addMove("place\t"+e+"\t"+e+"\t"+a+"\t1"),t.addMove("stability\t"+e+"\t"+a+"\t1"),t.addMove("discard\t"+e+"\t"+r),t.addMove("notify\t"+e.toUpperCase()+' discards <span class="logcard" id="'+r+'">'+t.game.deck[0].cards[r].name+"</span>"),t.endTurn(1)}))}))}))):($(c).off(),$(c).on("click",(function(){alert("Invalid Option")})))}return 0==o?(i.playerFinishedPlacingInfluence(),i.addMove("notify\t"+e.toUpperCase()+" has no eligible countries for Nation Building"),i.endTurn(),{v:{v:0}}):void 0}();return"object"===c(n)?n.v:{v:0}}();if("object"===c(Za))return Za.v}if("perestroika"==t)return 2==this.game.player?(this.updateStatus("<div class='status-message' id='status-message'>USSR is playing Perestroika</div>"),0):(1==this.game.player&&function(){(y=i).playerFinishedPlacingInfluence(),y.addMove("resolve\tperestroika"),y.updateStatus('<div class="status-message" id="status-message">Remove four USSR influence from existing countries. You will receive 1 VP per influence removed from battleground countries, and 1 VP for every 2 influence removed from non-battleground countries controlled by the USSR:<ul><li class="card" id="skip">or skip...</li></ul></div>'),y.addShowCardEvents((function(e){y.playerFinishedPlacingInfluence(),y.endTurn()}));var e=4,t=0;for(L in i.countries){var a="#"+L;$(a).off(),$(a).on("click",(function(){var a=$(this).attr("id");1==y.isControlled("ussr",a)?(1==y.countries[a].bg?(y.removeInfluence(a,1,"ussr"),y.addMove("vp\tussr\t1"),y.addMove("remove\tussr\tussr\t"+a+"\t1")):(y.removeInfluence(a,1,"ussr"),2==++t&&(y.addMove("vp\tussr\t1"),t=0),y.addMove("remove\tussr\tussr\t"+a+"\t1")),0==--e&&(y.playerFinishedPlacingInfluence(),y.endTurn())):y.displayModal("Invalid Option")}))}}(),0);if("peronism"==t){var er=this,tr="ussr";if(2==this.game.player&&(tr="us"),this.placeInfluence("argentina",1,"us"),this.placeInfluence("argentina",1,"ussr"),e!=tr)return this.updateStatus("<div class='status-message' id='status-message'>Opponent deciding to add influence to or coup or realign Argentina</div>"),0;var ar='<div class="status-message" id="status-message"><span>Do you choose to:</span>\n          <ul>\n            <li class="card" id="place">place 1 influence in Argentina</li>\n            <li class="card" id="couporrealign">coup or realign Argentina</li>\n          </ul></div>';return this.updateStatus(ar),er.addShowCardEvents((function(t){"place"==t&&er.placeInfluence("argentina",1,e,(function(){er.addMove("resolve\tperonism"),er.addMove("place\t"+e+"\t"+e+"\targentina\t1"),er.addMove("notify\t"+e+" places an extra influence in Argentina"),er.endTurn()})),"couporrealign"==t&&(ar='<div class="status-message" id="status-message"><span>Do you choose to:</span>\n              <ul>\n                <li class="card" id="coup">coup in Argentina</li>\n                <li class="card" id="realign">realign in Argentina</li>\n            </ul></div>',er.updateStatus(ar),er.addShowCardEvents((function(t){var a=er.modifyOps(1,"peronism");if("coup"==t&&(er.addMove("resolve\tperonism"),er.addMove("coup\t"+e+"\targentina\t"+a+"\tperonism"),er.endTurn()),"realign"==t){if(er.addMove("resolve\tperonism"),er.playRealign("argentina"),--a>0){ar='<div class="status-message" id="status-message"><span>You have an OP Bonus. Realign again?:</span>\n                  <ul>\n                    <li class="card" id="realign">realign in Argentina</li>\n                    <li class="card" id="skip">no, please stop</li>\n                  </ul></div>';var r=$(this).attr("id");"realign"==r&&(er.playRealign("argentina"),er.addMove("realign\t"+e+"\targentina"),er.addMove("realign\t"+e+"\targentina")),"skip"==r&&(er.addMove("realign\t"+e+"\targentina"),er.endTurn())}else er.addMove("realign\t"+e+"\targentina"),er.endTurn();er.playerFinishedPlacingInfluence(),er.endTurn()}})))})),0}if("berlinairlift"==t)return this.game.player,this.game.state.events.berlinairlift=1,0;if("communistrevolution"==t){var rr="ussr";if(2==this.game.player&&(rr="us"),this.game.state.events.communistrevolution=1,console.log("communistrevolution ! "+rr+" -- "+e),"us"==rr)return 0;if("ussr"==rr){(y=this).playerFinishedPlacingInfluence(),y.addMove("resolve\tcommunistrevolution"),y.updateStatus('<div class="status-message" id="status-message">Pick target for Communist Revolution</div>');var nr=function(){var e="#"+L;$(e).off(),$(e).on("click",(function(){$(e).off();var t=$(this).attr("id");console.log("picked: "+t),console.log(y.countries[t]),y.rollDice(6);for(var a=y.countries[t].control,r=a,n=0;n<a;n++)n>0&&n%2==1&&r--;y.addMove("SETVAR\tcountries\t"+t+"\tcontrol\t"+a),y.addMove("SETVAR\tstate\tlimit_ignoredefcon\t0"),y.addMove("SETVAR\tstate\tlower_defcon_on_coup\t1"),y.addMove("coup\tplayer\t"+t+"\t"+y.modifyOps(2)),y.addMove("SETVAR\tstate\tlower_defcon_on_coup\t0"),y.addMove("SETVAR\tstate\tlimit_ignoredefcon\t1"),y.addMove("SETVAR\tcountries\t"+t+"\tcontrol\t"+r),y.endTurn()}))};for(var L in y.countries)nr()}return 0}if("philadelphia"==t){var ir="ussr";if(2==this.game.player&&(ir="us"),"ussr"==ir)return 0;if("us"==ir){(y=this).playerFinishedPlacingInfluence(),y.addMove("resolve\tphiladelphia"),y.updateStatus('<div class="status-message" id="status-message">Pick country to remove all US influence:</div>');var sr=function(){var e="#"+L;$(e).off(),$(e).on("click",(function(){$(e).off();var t=$(this).attr("id"),a=t,r=y.countries[t].us;if(r<=0)alert("Invalid Choice - country must have US influence");else for(var n in y.removeInfluence(t,r,"us"),y.updateStatus('<div class="status-message" id="status-message">Place '+r+" in any country not controlled by the USSR:</div>"),y.countries)1==y.isControlled("ussr",n)||function(){var e="#"+n;$(e).off(),$(e).on("click",(function(){$(e).off();var t=$(this).attr("id");y.placeInfluence(t,r,"us"),y.addMove("place\tus\tus\t"+t+"\t"+r),y.addMove("remove\tus\tus\t"+a+"\t"+r),y.endTurn()}))}()}))};for(var L in y.countries)sr()}return 0}if("sinoindian"==t){var or="ussr",cr="us";if(2==this.game.player&&(cr="ussr",or="us"),this.whoHasTheChinaCard()!=e)return this.updateLog("Sino-Indian War cannot trigger, as player does not have the China Card"),1;if(or!=e)return this.rollDice(6),0;if(or==e){var lr=4;1==this.isControlled(cr,"pakistan")&&lr++,1==this.isControlled(cr,"burma")&&lr++,lr--;var ur=this.rollDice(6);this.addMove("notify\t"+e.toUpperCase()+" rolls "+ur),ur>=lr?"us"==e?(this.addMove("place\tus\tus\tindia\t"+this.countries.india.ussr),this.addMove("remove\tus\tussr\tindia\t"+this.countries.india.ussr),this.addMove("milops\tus\t2"),this.addMove("vp\tus\t3"),this.placeInfluence("india",this.countries.india.ussr,"us"),this.removeInfluence("india",this.countries.india.ussr,"ussr"),this.endTurn(),this.showInfluence("india","ussr")):(this.addMove("place\tussr\tussr\tindia\t"+this.countries.india.us),this.addMove("remove\tussr\tus\tindia\t"+this.countries.india.us),this.addMove("milops\tussr\t2"),this.addMove("vp\tussr\t3"),this.placeInfluence("india",this.countries.india.us,"ussr"),this.removeInfluence("india",this.countries.india.us,"us"),this.endTurn(),this.showInfluence("india","ussr")):"us"==e?(this.addMove("milops\tus\t2"),this.endTurn()):(this.addMove("milops\tussr\t2"),this.endTurn())}return 0}if("sovietcoup"==t){var dr=this;return console.log("ROUND: "+this.game.state.round),"us"==e?(dr.rollDice(6),0):(dr.addMove("resolve\tsovietcoup"),dr.updateStatus('<div class="status-message" id="status-message">Sacrifice any VP before rolling for +1 modifier:<ul><li class="card" id="zero">0 VP</li><li class="card" id="one">1 VP</li><li class="card" id="two">2 VP</li><li class="card" id="three">3 VP</li></ul></div>'),dr.addShowCardEvents((function(e){var t=0;"one"===e&&(t=1),"two"===e&&(t=2),"three"===e&&(t=3),t>0&&dr.addMove("vp\tus\t"+t);var a=dr.rollDice(6);if((a+=t)<4)return dr.addMove("vp\tus\t10000"),dr.addMove("NOTIFY\tUSSR rolls "+a+" for Soviet Coup and loses the game."),void dr.endTurn();var r=0;r=dr.countries.czechoslovakia.us,dr.removeInfluence("us","czechoslovakia",r),dr.addMove("remove\tus\tczechoslovakia\t"+r),r=dr.countries.austria.us,dr.removeInfluence("us","austria",r),dr.addMove("remove\tus\taustria\t"+r),r=dr.countries.hungary.us,dr.removeInfluence("us","hungary",r),dr.addMove("remove\tus\thungary\t"+r),r=dr.countries.romania.us,dr.removeInfluence("us","romania",r),dr.addMove("remove\tus\tromania\t"+r),r=dr.countries.yugoslavia.us,dr.removeInfluence("us","yugoslavia",r),dr.addMove("remove\tus\tyugoslavia\t"+r),r=dr.countries.bulgaria.us,dr.removeInfluence("us","bulgaria",r),dr.addMove("remove\tus\tbulgaria\t"+r),r=dr.countries.eastgermany.us,dr.removeInfluence("us","eastgermany",r),dr.addMove("remove\tus\teastgermany\t"+r),r=dr.countries.poland.us,dr.removeInfluence("us","poland",r),dr.addMove("remove\tus\tpoland\t"+r),r=dr.countries.finland.us,dr.removeInfluence("us","finland",r),dr.addMove("remove\tus\tfinland\t"+r),this.updateStatus("<div class='status-message' id='status-message'>Place eight influence in non-US controlled countries:</div>");var n=8;for(var i in this.countries){var s=i,o="#"+i;0==dr.isControlled("us",s)&&($(o).off(),$(o).on("click",(function(){var e=$(this).attr("id");dr.addMove("place\tussr\tussr\t"+e+"\t1"),dr.placeInfluence(e,1,"ussr",(function(){--n<=0&&(dr.playerFinishedPlacingInfluence(),dr.endTurn())}))})))}})),1)}if("sovietcoup"==t){var pr=this.countries.yugoslavia.ussr;return this.removeInfluence("ussr","yugoslavia",pr),this.placeInfluence("us","yugoslavia",1),this.countries.yugoslavia.bg=1,this.game.countries.yugoslavia.bg=1,1}if("brexit"==t)return 8!=this.game.state.round&&this.updateLog("It is now round 8... again"),this.updateLog("25 VP now needed to win"),this.updateLog("Wargames now requires "+this.game.state.wargames_concession+" VP concession."),this.game.vp_needed=25,this.game.state.round=8,this.game.state.wargames_concession+=2,1;if("kissingerisawarcriminal"==t){if(1==this.game.player)return this.updateStatus("<div class='status-message' id='status-message'>US is playing Kissinger:</div>"),0;this.updateStatus('<div class=\'status-message\' id=\'status-message\'><span>Designate a region to turn all 1-stability countries into battleground countries: </span><ul><li class="card" id="asia">Asia</li><li class="card" id="europe">Europe</li><li class="card" id="africa">Africa</li><li class="card" id="camerica">Central America</li><li class="card" id="samerica">South America</li><li class="card" id="mideast">Middle-East</li></ul></div>');var hr=this;return hr.addShowCardEvents((function(e){for(var t in hr.addMove("resolve\tkissingerisawarcriminal"),hr.countries)-1!=hr.countries[t].region.indexOf(e)&&1==hr.countries[t].control&&(hr.addMove("SETVAR\tcountries\t"+t+"\tbg\t1"),hr.addMove("notify\t"+hr.countries[t].name+" is now a battleground country"));hr.endTurn()})),0}return 0}}])&&u(t.prototype,a),s&&u(t,s),w}(g);e.exports=w},function(e,t,a){var r=a(308);e.exports=WebsiteData={render:function(e){document.querySelector(".netstats")&&(document.querySelector(".netstats").innerHTML=r());var t=new Date(e.blockchain.last_ts),a=t.getHours()+":"+("0"+t.getMinutes()).substr(-2)+":"+("0"+t.getSeconds()).substr(-2),n=e.blockchain.last_bid;document.querySelector(".block-number")&&(document.querySelector(".block-number").innerHTML=n),document.querySelector(".block-time")&&(document.querySelector(".block-time").innerHTML=a)}}},function(e,t,a){(function(t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=d(e);if(t){var n=d(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return l(this,a)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=a(19),h=(a(5),a(15)),f=a(228),m=a(68),g=a(42),b=a(310),y=a(311),v=a(309),_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(h,e);var a,r,n,d=c(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=d.call(this,e)).app=e,t.name="Website",t.description="Module that creates a root website on a Saito node.",t.categories="Utilities Communications",t.header=null,t.overlay=new g(e,u(t)),l(t,u(t))}return a=h,(r=[{key:"initializeHompage",value:function(e){var t=this;document.querySelectorAll("#weixin-link").forEach((function(a){a.onclick=function(a){t.overlay.showOverlay(e,t,'<div id=\'weixinqr-overlay\'><img src="/img/wechat/weixin.png" style="display: block;">\n        </div>',(function(){}))}})),document.querySelectorAll("#whitepaperLink").forEach((function(t){t.onclick=function(t){e.browser.logMatomoEvent("Navigation","HomepageNavigationClick","HomepageWhitepaperLink")}})),document.querySelectorAll("#litepaperLink").forEach((function(t){t.onclick=function(t){e.browser.logMatomoEvent("Navigation","HomepageNavigationClick","HomepageLitepaperLink")}})),document.querySelectorAll("#arcadeLink").forEach((function(t){t.onclick=function(t){e.browser.logMatomoEvent("Navigation","HomepageNavigationClick","HomepageArcadeLink")}})),document.querySelectorAll("#developersLink").forEach((function(t){t.onclick=function(t){e.browser.logMatomoEvent("Navigation","HomepageNavigationClick","HomepageDevelopersLink")}})),document.querySelectorAll(".left.desktop .logo").forEach((function(t){t.onclick=function(t){e.browser.logMatomoEvent("Navigation","HomepageNavigationClick","HeaderLogoHomepageLink")}})),document.querySelectorAll(".website-newsletter-subscribe").forEach((function(a){a.onclick=function(a){t.mre=new f(e),t.mre.render(t.app,t,f.MODES.NEWSLETTER),t.mre.attachEvents(t.app,t)}})),this.initializePrivateSaleOverlay()}},{key:"initializeTokenPage",value:function(e){document.title="SAITO ERC-20 Token Contract",e.browser.addElementToElement('<link rel="stylesheet" href="/subpagestyle/token/token.style.css" />',document.head),document.querySelector("#content").innerHTML=b(),document.querySelectorAll("#burnlink").forEach((function(e){e.onclick=function(){var e=i(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,sconfirm("WARNING: At this time the Saito Network is under active development and is subject to be reset at the team's discretion. Your Native SAITO balance will be reset in such a case.");case 3:if(!(a=e.sent)){e.next=8;break}return e.next=7,sconfirm("WARNING: It is strongly recommended that you do not burn your ERC20 SAITO at this time. If you are in need of tokens on the current SAITO network, please consider reaching out to us before proceeding to burn your ERC20 SAITO.");case 7:a=e.sent;case 8:if(!a){e.next=12;break}return e.next=11,sconfirm("Are you absolutely sure you want to know how to burn your ERC20 SAITO?");case 11:a=e.sent;case 12:a&&(window.location=document.querySelector("#burnlink").href);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}))}},{key:"initializeTokenBurnPage",value:function(e){document.title="Burn SAITO Token",document.querySelector("#content").innerHTML=y()}},{key:"initializePoolsPage",value:function(e){document.title="IDO Pools",e.browser.addElementToElement('<link rel="stylesheet" href="/subpagestyle/token/pools.style.css" />',document.head),document.querySelector("#content").innerHTML=v()}},{key:"initializeHTML",value:function(e){null==this.header&&(this.header=new m(e,this)),this.header.render(e,this),this.header.attachEvents(e,this),document.querySelector(".header-icon-links")&&e.browser.prependElementToDom(document.querySelector("#header-icon-links-hidden").innerHTML,document.querySelector(".header-icon-links")),document.querySelector(".header-dropdown")&&e.browser.prependElementToDom(document.querySelector("#header-dropdown-hidden").innerHTML,document.querySelector(".header-dropdown")),document.location.pathname.startsWith("/website/tokenburn")?this.initializeTokenBurnPage(e):document.location.pathname.startsWith("/website/token")?this.initializeTokenPage(e):document.location.pathname.startsWith("/website/pools")||document.location.pathname.startsWith("/website/whitelist")?this.initializePoolsPage(e):this.initializeHompage(e)}},{key:"doPrivateSaleOverlay",value:function(){this.app.browser.parseHash(window.location.hash).private_sale&&(this.mre=new f(this.app),this.mre.render(this.app,this,f.MODES.PRIVATESALE),this.mre.attachEvents(this.app,this),window.location.hash=this.app.browser.removeFromHash(window.location.hash,"private_sale"))}},{key:"initializePrivateSaleOverlay",value:function(){var e=this;window.addEventListener("hashchange",(function(){e.doPrivateSaleOverlay()}));var t=window.location.hash;window.location.hash="#",window.location.hash=t}},{key:"triggerPrivateSaleOverlay",value:function(){window.location.hash=this.app.browser.modifyHash(window.location.hash,{private_sale:"1"})}},{key:"respondTo",value:function(e){if("private_sale_overlay"==e){var t={};return t.initializePrivateSaleOverlay=this.initializePrivateSaleOverlay.bind(this),t.triggerPrivateSaleOverlay=this.triggerPrivateSaleOverlay.bind(this),t}}},{key:"webServer",value:function(e,a,r){a.use("/",r.static("".concat(t,"/../../mods/website/web"))),a.use("/website/",r.static("".concat(t,"/../../mods/website/web"))),a.get("/l/:campaign/:channel/:subchannel",function(){var e=i(regeneratorRuntime.mark((function e(a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.sendFile(p.join(t+"/web/marketing/marketing.html"));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.get("/l/matomohelpers.js",function(){var e=i(regeneratorRuntime.mark((function e(a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.sendFile(p.join(t+"../../../mods/matomo/matomoHelpers.js"));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.get("/l/maketrackinglink",function(){var e=i(regeneratorRuntime.mark((function e(a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.sendFile(p.join(t+"/web/marketing/linkmakerform.html"));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.get("/weixin",function(){var e=i(regeneratorRuntime.mark((function e(a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.sendFile(p.join(t+"/web/weixininvite.html"));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.get("/subpagestyle/:subpage/:stylesheetfile",function(){var e=i(regeneratorRuntime.mark((function e(a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(a.params.stylesheetfile),r.sendFile(p.join(t+"/web/subpage/"+a.params.subpage+"/"+a.params.stylesheetfile));case 2:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),a.get("/website/*",function(){var e=i(regeneratorRuntime.mark((function e(a,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.sendFile(p.join(t+"/web/subpage/index.html"));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())}}])&&s(a.prototype,r),n&&s(a,n),h}(h);e.exports=_}).call(this,"/")},function(module,exports,__webpack_require__){function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function asyncGeneratorStep(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function _asyncToGenerator(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function s(e){asyncGeneratorStep(i,r,n,s,o,"next",e)}function o(e){asyncGeneratorStep(i,r,n,s,o,"throw",e)}s(void 0)}))}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _get(e,t,a){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=_superPropBase(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var a,r=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var saito=__webpack_require__(5),GameTemplate=__webpack_require__(47),GameBoardSizer=__webpack_require__(1248),GameHammerMobile=__webpack_require__(423),Wordblocks=function(_GameTemplate){_inherits(Wordblocks,_GameTemplate);var _super=_createSuper(Wordblocks),_addEventsToBoard,_calculateScore;function Wordblocks(e){var t;return _classCallCheck(this,Wordblocks),(t=_super.call(this,e)).name="Wordblocks",t.wordlist="",t.letterset={},t.mydeck={},t.score="",t.app=e,t.name="Wordblocks",t.description="Wordblocks is a word game in which two to four players score points by placing tiles bearing a single letter onto a board divided into a 15×15 grid of squares. The tiles must form words that, in crossword fashion, read left to right in rows or downward in columns, and be included in a standard dictionary or lexicon.",t.categories="Game Arcade Entertainment",t.minPlayers=2,t.maxPlayers=4,t.type="Wordgame",t.useHUD=1,t.gameboardWidth=2677,t.tileHeight=163,t.tileWidth=148,t.letters={},t.moves=[],t.firstmove=1,t.last_played_word={player:"",finalword:"",score:""},_possibleConstructorReturn(t,_assertThisInitialized(t))}return _createClass(Wordblocks,[{key:"respondTo",value:function(e){if(null!=_get(_getPrototypeOf(Wordblocks.prototype),"respondTo",this).call(this,e))return _get(_getPrototypeOf(Wordblocks.prototype),"respondTo",this).call(this,e);if("arcade-carousel"==e){var t={background:"/wordblocks/img/arcade/arcade-banner-background.png",title:"Wordblocks"};return t}return null}},{key:"showTiles",value:function(){if(0!=this.game.deck.length){for(var e="",t=0;t<this.game.deck[0].hand.length;t++){var a=this.game.deck[0].cards[this.game.deck[0].hand[t]];null!=a&&(e+=this.returnTileHTML(a))}$(".tiles").html(e),$("#remainder").html("DECK: "+this.game.deck[0].crypt.length)}}},{key:"initializeHTML",value:function(e){var t=this;this.hud.mode=1,_get(_getPrototypeOf(Wordblocks.prototype),"initializeHTML",this).call(this,e),this.app.modules.respondTo("chat-manager").forEach((function(e){e.respondTo("chat-manager").render(t.app,t)})),this.menu.addMenuOption({text:"Game",id:"game-game",class:"game-game",callback:function(e,t){t.menu.showSubMenu("game-game")}}),this.menu.addSubMenuOption("game-game",{text:"Log",id:"game-log",class:"game-log",callback:function(e,t){t.menu.hideSubMenus(),t.log.toggleLog()}}),this.menu.addSubMenuOption("game-game",{text:"Stats",id:"game-stats",class:"game-stats",callback:function(e,t){t.menu.hideSubMenus(),t.overlay.showOverlay(t.app,t,t.returnStatsOverlay())}}),this.menu.addSubMenuOption("game-game",{text:"Exit",id:"game-exit",class:"game-exit",callback:function(e,t){window.location.href="/arcade"}});for(var a=0,r=0,n=0;n<this.app.modules.mods.length;n++)if("chat"===this.app.modules.mods[n].slug)for(var i=0;i<this.game.players.length;i++)this.game.players[i]!=this.app.wallet.returnPublicKey()&&function(){0==a&&(t.menu.addMenuOption({text:"Chat",id:"game-chat",class:"game-chat",callback:function(e,t){t.menu.showSubMenu("game-chat")}}),a=1),0==r&&(t.menu.addSubMenuOption("game-chat",{text:"Community",id:"game-chat-community",class:"game-chat-community",callback:function(e,t){t.menu.hideSubMenus(),c.mute_community_chat=0,c.sendEvent("chat-render-request",{}),c.openChatBox()}}),r=1);var e=[t.game.players[i],t.app.wallet.returnPublicKey()].sort(),s=t.app.crypto.hash(e.join("_")),o="Player "+(i+1),c=t.app.modules.mods[n];t.menu.addSubMenuOption("game-chat",{text:o,id:"game-chat-"+(i+1),class:"game-chat-"+(i+1),callback:function(t,a){a.menu.hideSubMenus(),c.createChatGroup(e,o),c.openChatBox(s),c.sendEvent("chat-render-request",{}),c.saveChat()}})}();this.menu.addMenuIcon({text:'<i class="fa fa-window-maximize" aria-hidden="true"></i>',id:"game-menu-fullscreen",callback:function(e,t){t.menu.hideSubMenus(),e.browser.requestFullscreen()}}),this.menu.render(e,this),this.menu.attachEvents(e,this),this.hud.render(e,this);try{e.browser.isMobileBrowser(navigator.userAgent)?(GameHammerMobile.render(this.app,this),GameHammerMobile.attachEvents(this.app,this,".gameboard")):(GameBoardSizer.render(this.app,this),GameBoardSizer.attachEvents(this.app,this,".gameboard"),$("#gameboard").draggable())}catch(e){}}},{key:"returnStatsOverlay",value:function(){var e="";e+='<div class="stats-overlay">',e+='<table cellspacing="10px" rowspacing="10px">',e+="<tr>";for(var t=0;t<this.game.opponents.length+1;t++)e+="<td>Player ".concat(t+1,"</td>");e+="</tr>",e+="<tr>";for(var a=[],r=0;r<this.game.opponents.length+1;r++){a.push(0);for(var n="<table>",i=0;i<this.game.words_played[r].length;i++)null!=this.game.words_played[r][i]&&(n+="<tr><td>"+this.game.words_played[r][i].word+"</td><td>"+this.game.words_played[r][i].score+"</td></tr>",a[r]+=this.game.words_played[r][i].score);e+="<td>".concat(n+="</table>","</td>")}e+="</tr><tr>";for(var s=0;s<this.game.opponents.length+1;s++)e+="<td>".concat(a[s],"</td>");return e+="</tr>",e+="</table>",e+="</div>"}},{key:"initializeGame",value:function initializeGame(game_id){var _this3=this;this.updateStatus("loading game..."),this.loadGame(game_id),""!=this.game.status&&this.updateStatus(this.game.status);var dictionary=this.game.options.dictionary,durl="/wordblocks/dictionaries/"+dictionary+"/"+dictionary+".js",xhr=new XMLHttpRequest;xhr.open("GET",durl,!1);try{xhr.send(),200!=xhr.status?salert("Network issues downloading dictionary -- ".concat(durl)):(eval(xhr.response),this.wordlist=wordlist)}catch(e){salert("Network issues downloading dictionary")}if(0==this.game.deck.length&&1==this.game.step.game){this.updateStatus("Generating the Game"),1==this.game.opponents.length&&(this.game.queue.push("READY"),this.game.queue.push("DEAL\t1\t2\t7"),this.game.queue.push("DEAL\t1\t1\t7"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),2==this.game.opponents.length&&(this.game.queue.push("READY"),this.game.queue.push("DEAL\t1\t3\t7"),this.game.queue.push("DEAL\t1\t2\t7"),this.game.queue.push("DEAL\t1\t1\t7"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1")),3==this.game.opponents.length&&(this.game.queue.push("READY"),this.game.queue.push("DEAL\t1\t4\t7"),this.game.queue.push("DEAL\t1\t3\t7"),this.game.queue.push("DEAL\t1\t2\t7"),this.game.queue.push("DEAL\t1\t1\t7"),this.game.queue.push("DECKENCRYPT\t1\t4"),this.game.queue.push("DECKENCRYPT\t1\t3"),this.game.queue.push("DECKENCRYPT\t1\t2"),this.game.queue.push("DECKENCRYPT\t1\t1"),this.game.queue.push("DECKXOR\t1\t4"),this.game.queue.push("DECKXOR\t1\t3"),this.game.queue.push("DECKXOR\t1\t2"),this.game.queue.push("DECKXOR\t1\t1"));var tmp_json=JSON.stringify(this.returnDeck());this.game.queue.push("DECK\t1\t"+tmp_json)}if(1!=this.game.initializing){resizeBoard=function(e){},responsive=function(){},this.showTiles();var html="",am_i_done=0,players=1;null!=this.game.opponents&&(players=this.game.opponents.length+1);var score=[];if(null==this.game.score){this.game.score=[];for(var _i3=0;_i3<players;_i3++)this.game.score[_i3]=0}if(null==this.game.words_played){this.game.words_played=[];for(var _i4=0;_i4<players;_i4++)this.game.words_played[_i4]=[]}for(var op=0,_i5=0;_i5<players;_i5++){var this_player=_i5+1;if(this.game.player==this_player)html+='\n          <div class="player">\n            <span class="player_name">Your Score</span>\n            <span id="score_'.concat(this_player,'"> ').concat(this.game.score[_i5]," </span>\n          </div>\n        ");else if(0!=this.game.player){var opponent=this.game.opponents[op];opponent=this.app.keys.returnIdentifierByPublicKey(opponent,!0),op++,html+='\n          <div class="player">\n            <span class="player_name">'.concat(opponent.substring(0,16),'</span>\n            <span id="score_').concat(this_player,'"> ').concat(this.game.score[_i5]," </span>\n          </div>\n        ")}}if(1==this.browser_active)try{$(".score").html(html)}catch(e){}if(this.game.target==this.game.player?(this.updateStatusWithTiles('YOUR GO: click board to place or <span class="link tosstiles">discard</span>.'),this.enableEvents()):(this.updateStatusWithTiles("Waiting for Player ".concat(this.game.target," to move.")),this.disableEvents()),this.letters=this.returnLetters(),resizeBoard(this.app),null==this.game.board)this.game.board=this.returnBoard();else for(var i in this.game.board){var divname="#"+i,letter=this.game.board[i].letter;if(this.addTile($(divname),letter),"_"!=letter&&""!=letter)try{$(divname).addClass("set")}catch(e){}}for(var _i6=1;_i6<16;_i6++)for(var k=1;k<16;k++){var boardslot=_i6+"_"+k;"_"!=this.game.board[boardslot].letter&&(this.firstmove=0)}this.game.target==this.game.player&&this.addEventsToBoard();try{$("#shuffle").on("click",(function(){for(var e=$("#tiles").children.length;e>=0;e--)$("#tiles")[0].appendChild($("#tiles")[0].childNodes[Math.random()*e|0])})),$("#tiles").sortable(),$("#tiles").disableSelection(),$(window).resize((function(){resizeBoard()}));var element=document.getElementById("gameboard");$("#game_status").on("click",(function(){$(".log").hide(),_this3.app.browser.isMobileBrowser(navigator.userAgent)&&window.matchMedia("(orientation: portrait)").matches||window.innerHeight>700?($("#sizer").switchClass("fa-caret-up","fa-caret-down"),$("#hud").switchClass("short","tall",150)):($("#sizer").switchClass("fa-caret-left","fa-caret-right"),$("#hud").switchClass("narrow","wide",150)),$(".hud_menu_overlay").hide(),$(".status").show()}))}catch(e){}}}},{key:"updateStatusWithTiles",value:function(e){try{for(var t="",a=0;a<this.game.deck[0].hand.length;a++)t+=this.returnTileHTML(this.game.deck[0].cards[this.game.deck[0].hand[a]].name);var r=this.last_played_word,n=r.player,i=r.finalword,s=(r.score,""==i?"...":"Player ".concat(n," played ").concat(i," for: ").concat(this.game.words_played[n-1][this.game.words_played[n-1].length-1].score," points (total: ").concat(this.game.score[n-1],")")),o='\n      <div class="hud-status-update-message">'.concat(e,'</div>\n      <div class="status_container">\n        <div class="rack" id="rack">\n          <div class="tiles" id="tiles">\n            ').concat(t,'\n          </div>\n        </div>\n        <div class="subrack" id="subrack">\n          <img id="shuffle" class="shuffle" src="/wordblocks/img/reload.png">\n          <div id="remainder" class="remainder">DECK: ').concat(this.game.deck[0].crypt.length,'</div>\n          <div class="lastmove" id="lastmove">').concat(s,"</div>\n        </div>\n      </div\n    ");this.updateStatus(o),this.calculateScore(),this.enableEvents()}catch(e){}}},{key:"calculateScore",value:(_calculateScore=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=1,null!=this.game.opponents&&(t=this.game.opponents.length+1),null==this.game.score)for(this.game.score=[],a=0;a<t;a++)this.game.score[a]=0;1==this.browser_active&&$(".score").html("");case 8:case"end":return e.stop()}}),e,this)}))),function(){return _calculateScore.apply(this,arguments)})},{key:"returnTileHTML",value:function(e){var t="",a=this.returnLetters();return a[e]&&(t='<div class="tile '+e+" sc"+a[e].score+'">'+e+"</div>"),t}},{key:"addTile",value:function(e,t){"_"!==t&&(e.find(".bonus").css("display","none"),e.append(this.returnTileHTML(t)))}},{key:"disableEvents",value:function(){1==this.browser_active&&$(".slot").off()}},{key:"enableEvents",value:function(){1==this.browser_active&&this.addEventsToBoard()}},{key:"addEventsToBoard",value:(_addEventsToBoard=_asyncToGenerator(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.browser_active){e.next=2;break}return e.abrupt("return");case 2:t=this;try{$(".tosstiles").off(),$(".tosstiles").on("click",_asyncToGenerator(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sprompt("Which tiles do you want to discard? Tossed tiles count against your score:");case 2:tiles=e.sent,tiles&&(salert("Tossed: "+tiles),t.removeTilesFromHand(tiles),t.addMove("turn\t"+t.game.player),a=7,(a-=t.game.deck[0].hand.length)>t.game.deck[0].crypt.length&&(a=t.game.deck[0].crypt.length),a>0&&t.addMove("DEAL\t1\t"+t.game.player+"\t"+a),t.showTiles(),t.endTurn());case 4:case"end":return e.stop()}}),e)})))),$(".slot").off(),$(".slot").on("mousedown",(function(e){xpos=e.clientX,ypos=e.clientY})),$(".slot").on("mouseup",(function(e){if(!(Math.abs(xpos-e.clientX)>4||Math.abs(ypos-e.clientY)>4)){var a='\n        <div class="tile-placement-controls">\n          <span class="action" id="horizontally"><i class="fas fa-arrows-alt-h"></i> horizontally</span>\n          <span class="action" id="vertically"><i class="fas fa-arrows-alt-v"></i> vertically</span>\n          <span class="action" id="cancel"><i class="far fa-window-close"></i> cancel</span>\n        </div>',r=$(this).attr("id").split("_"),n=r[0],i=r[1],s="",o="",c=t.app.browser.isMobileBrowser(navigator.userAgent)?25:55,l=t.app.browser.isMobileBrowser(navigator.userAgent)?25:55,u=t.app.browser.isMobileBrowser(navigator.userAgent)?135:155,d=t.app.browser.isMobileBrowser(navigator.userAgent)?135:155,p=$(this).offset().left+c,h=$(this).offset().top+l;if(i>8&&(p-=u),n>8&&(h-=d),$(".tile-placement-controls").remove(),t.app.browser.isMobileBrowser(navigator.userAgent)){for(var f="",m=0;m<t.game.deck[0].hand.length;m++)f+=t.returnTileHTML(t.game.deck[0].cards[t.game.deck[0].hand[m]].name);var g='\n        <div class="rack" id="rack">\n          <div class="tiles" id="tiles">\n            '.concat(f,'\n          </div>\n          <img id="shuffle" class="shuffle" src="/wordblocks/img/reload.png">\n        </div>\n        ').concat(a,"\n        ");$(".status").html(g),t.enableEvents()}else $("body").append(a),$(".tile-placement-controls").addClass("active-status"),$(".tile-placement-controls").css({position:"absolute",top:h,left:p});$(".action").off(),$(".action").on("click",_asyncToGenerator(regeneratorRuntime.mark((function e(){var a,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("horizontally"==(a=$(this).attr("id"))&&(s="horizontal"),"vertically"==a&&(s="vertical"),"cancel"!=a){e.next=9;break}return $(".action").off(),$(".tile-placement-controls").remove(),t.updateStatusWithTiles('Click on the board to place a letter from that square, or <span class="link tosstiles">discard tiles</span> if you cannot move.'),t.addEventsToBoard(),e.abrupt("return");case 9:return e.next=11,sprompt("Provide your word:");case 11:if(!(o=e.sent)){e.next=44;break}if($(".tile-placement-controls").html(""),$(".status").html("Processing your turn."),1!=t.isEntryValid(o,s,i,n)){e.next=42;break}if(r=0,t.addWordToBoard(o,s,i,n),r=t.scoreWord(o,t.game.player,s,i,n),t.game.words_played[parseInt(t.game.player)-1].push({word:o,score:r}),!(r<=1)){e.next=26;break}t.removeWordFromBoard(o,s,i,n),t.updateStatusWithTiles('Try again! Click on the board to place a letter from that square, or\n                <span class="link tosstiles">discard tiles</span> if you cannot move.'),t.addEventsToBoard(),e.next=39;break;case 26:if(t.setBoard(o,s,i,n),t.addMove("place\t"+o+"\t"+t.game.player+"\t"+i+"\t"+n+"\t"+s),t.discardTiles(o,s,i,n),c=7,(c-=t.game.deck[0].hand.length)>t.game.deck[0].crypt.length&&(c=t.game.deck[0].crypt.length),c>0&&t.addMove("DEAL\t1\t"+t.game.player+"\t"+c),t.exhaustWord(o,s,i,n),t.addScoreToPlayer(t.game.player,r),1!=t.checkForEndGame()){e.next=37;break}return e.abrupt("return");case 37:$("#remainder").html("DECK: "+t.game.deck[0].crypt.length),t.endTurn();case 39:e.next=44;break;case 42:t.updateStatusWithTiles('Word is not valid, try again! Click on the board to place a word, or\n              <span class="link tosstiles">discard tiles</span>'),t.addEventsToBoard();case 44:case"end":return e.stop()}}),e,this)}))))}})),$("#shuffle").on("click",(function(){for(var e=$("#tiles").children.length;e>=0;e--)$("#tiles")[0].appendChild($("#tiles")[0].childNodes[Math.random()*e|0])})),$("#tiles").sortable(),$("#tiles").disableSelection()}catch(e){}case 4:case"end":return e.stop()}}),e,this)}))),function(){return _addEventsToBoard.apply(this,arguments)})},{key:"removeTilesFromHand",value:function(e){for(;e.length>0;){var t=e[0];t=t.toUpperCase();for(var a=0;a<this.game.deck[0].hand.length;a++)this.game.deck[0].cards[this.game.deck[0].hand[a]].name==t&&(this.game.deck[0].hand.splice(a,1),a=this.game.deck[0].hand.length);e=e.length>1?e.substring(1):""}}},{key:"isEntryValid",value:function(e,t,a,r){var n=1,i=JSON.parse(JSON.stringify(this.game.deck[0].hand));if(a=parseInt(a),r=parseInt(r),1==this.firstmove){if("vertical"==t){if(6!=a&&10!=a)return salert("First Word must be placed to cross a Star"),0;var s=r,o=r+e.length-1;if(!(s<=6&&o>=6||s<=10&&o>=6))return salert("First Word must be long enough to cross a Star"),0}if("horizontal"==t){if(6!=r&&10!=r)return salert("First Word must be placed to cross a Star"),0;var c=a,l=a+e.length-1;if(!(c<=6&&l>=6||c<=10&&l>=6))return salert("First Word must be long enough to cross a Star"),0}}for(var u=0;u<e.length;u++){var d="",p=e[u].toUpperCase();if("horizontal"==t&&(d=r+"_"+(a+u)),"vertical"==t&&(d=r+u+"_"+a),"_"!=this.game.board[d].letter)this.game.board[d].letter!=p&&(n=0);else{for(var h=0,f=0;f<i.length;f++)this.game.deck[0].cards[i[f]].name==p&&(i.splice(f,1),h=1,f=i.length+1);if(0==h)return salert("INVALID: letter not in hand: "+p),0}}return 0==n&&salert("This is an invalid placement!"),n}},{key:"exhaustWord",value:function(e,t,a,r){a=parseInt(a),r=parseInt(r);for(var n=0;n<e.length;n++){var i="";e[n].toUpperCase();"horizontal"==t&&(i=r+"_"+(a+n)),"vertical"==t&&(i=r+n+"_"+a),this.game.board[i].fresh=0}}},{key:"discardTiles",value:function(e,t,a,r){a=parseInt(a),r=parseInt(r);for(var n=0;n<e.length;n++){var i="";e[n].toUpperCase();"horizontal"==t&&(i=r+"_"+(a+n)),"vertical"==t&&(i=r+n+"_"+a),1==this.game.board[i].fresh&&this.removeTilesFromHand(e[n])}}},{key:"addWordToBoard",value:function(e,t,a,r){a=parseInt(a),r=parseInt(r);for(var n=0;n<e.length;n++){var i,s="",o=e[n].toUpperCase();"horizontal"==t&&(s=r+"_"+(a+n)),"vertical"==t&&(s=r+n+"_"+a),i="#"+s,"_"!=this.game.board[s].letter?this.game.board[s].letter!=o&&(this.game.board[s].letter=o,this.addTile($(i),o)):(this.game.board[s].letter=o,this.addTile($(i),o))}}},{key:"removeWordFromBoard",value:function(e,t,a,r){a=parseInt(a),r=parseInt(r);for(var n=0;n<e.length;n++){var i,s="";e[n].toUpperCase();"horizontal"==t&&(s=r+"_"+(a+n)),"vertical"==t&&(s=r+n+"_"+a),i="#"+s,1!=$(i).hasClass("set")&&(this.game.board[s].letter="_",$(i).find(".tile").remove(),$(i).find(".bonus").css("display","block"))}}},{key:"setBoard",value:function(e,t,a,r){a=parseInt(a),r=parseInt(r);for(var n=0;n<e.length;n++){var i="";"horizontal"==t&&(i=r+"_"+(a+n)),"vertical"==t&&(i=r+n+"_"+a),$("#"+i).addClass("set")}}},{key:"returnBoard",value:function(){for(var e={},t=0;t<15;t++)for(var a=0;a<15;a++){e[t+1+"_"+(a+1)]={letter:"_",fresh:1}}return e}},{key:"returnDeck",value:function(){var e=this.game.options.dictionary;if("twl"===e&&(this.mydeck={1:{name:"A"},2:{name:"A"},3:{name:"A"},4:{name:"A"},5:{name:"A"},6:{name:"A"},7:{name:"A"},8:{name:"A"},9:{name:"A"},10:{name:"B"},11:{name:"B"},12:{name:"C"},13:{name:"C"},14:{name:"D"},15:{name:"D"},16:{name:"D"},17:{name:"D"},18:{name:"E"},19:{name:"E"},20:{name:"E"},21:{name:"E"},22:{name:"E"},23:{name:"E"},24:{name:"E"},25:{name:"E"},26:{name:"E"},27:{name:"E"},28:{name:"E"},29:{name:"E"},30:{name:"F"},41:{name:"F"},42:{name:"G"},43:{name:"G"},44:{name:"G"},45:{name:"H"},46:{name:"H"},47:{name:"I"},48:{name:"I"},49:{name:"I"},50:{name:"I"},51:{name:"I"},52:{name:"I"},53:{name:"I"},54:{name:"I"},55:{name:"I"},56:{name:"J"},57:{name:"K"},58:{name:"L"},59:{name:"L"},60:{name:"L"},61:{name:"L"},62:{name:"M"},63:{name:"M"},64:{name:"N"},65:{name:"N"},66:{name:"N"},67:{name:"N"},68:{name:"N"},69:{name:"N"},70:{name:"O"},71:{name:"O"},72:{name:"O"},73:{name:"O"},74:{name:"O"},75:{name:"O"},76:{name:"O"},77:{name:"O"},78:{name:"P"},79:{name:"P"},80:{name:"Q"},81:{name:"R"},82:{name:"R"},83:{name:"R"},84:{name:"R"},85:{name:"R"},86:{name:"R"},87:{name:"S"},88:{name:"S"},89:{name:"S"},90:{name:"S"},91:{name:"T"},92:{name:"T"},93:{name:"T"},94:{name:"T"},95:{name:"T"},96:{name:"T"},97:{name:"U"},98:{name:"U"},99:{name:"U"},100:{name:"U"},101:{name:"V"},102:{name:"V"},103:{name:"W"},104:{name:"W"},105:{name:"X"},106:{name:"U"},107:{name:"Y"},108:{name:"Y"},109:{name:"Z"}}),"fise"!==e&&"tagalog"!==e||(this.mydeck={1:{name:"A"},2:{name:"A"},3:{name:"A"},4:{name:"A"},5:{name:"A"},6:{name:"A"},7:{name:"A"},8:{name:"A"},9:{name:"A"},10:{name:"A"},11:{name:"A"},12:{name:"A"},13:{name:"B"},14:{name:"B"},15:{name:"C"},16:{name:"C"},17:{name:"C"},18:{name:"C"},19:{name:"C"},20:{name:"D"},21:{name:"D"},22:{name:"D"},23:{name:"D"},24:{name:"D"},25:{name:"E"},26:{name:"E"},27:{name:"E"},28:{name:"E"},29:{name:"E"},30:{name:"E"},31:{name:"E"},32:{name:"E"},33:{name:"E"},34:{name:"E"},35:{name:"E"},36:{name:"E"},37:{name:"E"},38:{name:"F"},39:{name:"G"},40:{name:"G"},41:{name:"H"},42:{name:"H"},43:{name:"H"},44:{name:"I"},45:{name:"I"},46:{name:"I"},47:{name:"I"},48:{name:"I"},49:{name:"I"},50:{name:"J"},51:{name:"L"},52:{name:"L"},53:{name:"L"},54:{name:"L"},55:{name:"L"},56:{name:"L"},57:{name:"M"},58:{name:"M"},59:{name:"N"},60:{name:"N"},61:{name:"N"},62:{name:"N"},63:{name:"N"},64:{name:"Ñ"},65:{name:"Ñ"},66:{name:"O"},67:{name:"O"},68:{name:"O"},69:{name:"O"},70:{name:"O"},71:{name:"O"},72:{name:"O"},73:{name:"O"},74:{name:"O"},75:{name:"O"},76:{name:"P"},77:{name:"P"},78:{name:"Q"},79:{name:"R"},80:{name:"R"},81:{name:"R"},82:{name:"R"},83:{name:"R"},84:{name:"R"},85:{name:"R"},86:{name:"S"},87:{name:"S"},88:{name:"S"},89:{name:"S"},90:{name:"S"},91:{name:"S"},92:{name:"S"},93:{name:"T"},94:{name:"T"},95:{name:"T"},96:{name:"T"},97:{name:"U"},98:{name:"U"},99:{name:"U"},100:{name:"U"},101:{name:"U"},102:{name:"V"},103:{name:"X"},104:{name:"Y"},105:{name:"Z"}}),"sowpods"===e&&(this.mydeck={1:{name:"A"},2:{name:"A"},3:{name:"A"},4:{name:"A"},5:{name:"A"},6:{name:"A"},7:{name:"A"},8:{name:"A"},9:{name:"A"},10:{name:"B"},11:{name:"B"},12:{name:"C"},13:{name:"C"},14:{name:"D"},15:{name:"D"},16:{name:"D"},17:{name:"D"},18:{name:"E"},19:{name:"E"},20:{name:"E"},21:{name:"E"},22:{name:"E"},23:{name:"E"},24:{name:"E"},25:{name:"E"},26:{name:"E"},27:{name:"E"},28:{name:"E"},29:{name:"E"},30:{name:"F"},41:{name:"F"},42:{name:"G"},43:{name:"G"},44:{name:"G"},45:{name:"H"},46:{name:"H"},47:{name:"I"},48:{name:"I"},49:{name:"I"},50:{name:"I"},51:{name:"I"},52:{name:"I"},53:{name:"I"},54:{name:"I"},55:{name:"I"},56:{name:"J"},57:{name:"K"},58:{name:"L"},59:{name:"L"},60:{name:"L"},61:{name:"L"},62:{name:"M"},63:{name:"M"},64:{name:"N"},65:{name:"N"},66:{name:"N"},67:{name:"N"},68:{name:"N"},69:{name:"N"},70:{name:"O"},71:{name:"O"},72:{name:"O"},73:{name:"O"},74:{name:"O"},75:{name:"O"},76:{name:"O"},77:{name:"O"},78:{name:"P"},79:{name:"P"},80:{name:"Q"},81:{name:"R"},82:{name:"R"},83:{name:"R"},84:{name:"R"},85:{name:"R"},86:{name:"R"},87:{name:"S"},88:{name:"S"},89:{name:"S"},90:{name:"S"},91:{name:"T"},92:{name:"T"},93:{name:"T"},94:{name:"T"},95:{name:"T"},96:{name:"T"},97:{name:"U"},98:{name:"U"},99:{name:"U"},100:{name:"U"},101:{name:"V"},102:{name:"V"},103:{name:"W"},104:{name:"W"},105:{name:"X"},106:{name:"U"},107:{name:"Y"},108:{name:"Y"},109:{name:"Z"}}),"test"===e);return this.mydeck}},{key:"returnLetters",value:function(){var e=this.game.options.dictionary;if("twl"===e&&(this.letterset={A:{score:1},B:{score:3},C:{score:2},D:{score:2},E:{score:1},F:{score:2},G:{score:2},H:{score:1},I:{score:1},J:{score:8},K:{score:4},L:{score:2},M:{score:2},N:{score:1},O:{score:1},P:{score:2},Q:{score:10},R:{score:1},S:{score:1},T:{score:1},U:{score:2},V:{score:3},W:{score:2},X:{score:8},Y:{score:2},Z:{score:10}}),"fise"!==e&&"tagalog"!==e||(this.letterset={A:{score:1},B:{score:2},C:{score:3},D:{score:2},E:{score:1},F:{score:4},G:{score:2},H:{score:4},I:{score:1},J:{score:8},L:{score:1},M:{score:3},N:{score:1},"Ñ":{score:8},O:{score:1},P:{score:3},Q:{score:6},R:{score:2},S:{score:1},T:{score:1},U:{score:1},V:{score:4},X:{score:8},Y:{score:4},Z:{score:10}}),"sowpods"===e&&(this.letterset={A:{score:1},B:{score:3},C:{score:2},D:{score:2},E:{score:1},F:{score:2},G:{score:2},H:{score:1},I:{score:1},J:{score:8},K:{score:4},L:{score:2},M:{score:2},N:{score:1},O:{score:1},P:{score:2},Q:{score:10},R:{score:1},S:{score:1},T:{score:1},U:{score:2},V:{score:3},W:{score:2},X:{score:8},Y:{score:2},Z:{score:10}}),"test"===e);return this.letterset}},{key:"checkWord",value:function(e){return!(e.length>=1&&void 0!==this.wordlist)||(!(this.wordlist.indexOf(e.toLowerCase())<=0)||(salert(e+" is not a playable word."),!1))}},{key:"returnBonus",value:function(e){return"1_1"==e||"1_15"==e||"3_8"==e||"8_3"==e||"8_13"==e||"13_8"==e||"15_1"==e||"15_15"==e?"3L":"2_2"==e||"2_14"==e||"8_8"==e||"14_2"==e||"14_14"==e?"3W":"1_5"==e||"1_11"==e||"3_4"==e||"3_12"==e||"4_3"==e||"4_13"==e||"5_8"==e||"5_1"==e||"5_15"==e||"8_5"==e||"8_11"==e||"11_1"==e||"11_8"==e||"11_15"==e||"12_3"==e||"12_13"==e||"13_4"===e||"13_12"===e||"15_5"==e||"15_11"==e?"2L":"1_8"==e||"4_6"==e||"4_10"==e||"6_4"==e||"6_12"==e||"8_1"==e||"8_15"==e||"10_4"==e||"10_12"==e||"12_6"==e||"12_10"==e||"15_8"==e?"2W":""}},{key:"scoreWord",value:function(e,t,a,r,n){var i=0,s=0,o="",c="";if(r=parseInt(r),n=parseInt(n),"horizontal"==a){var l=r,u=r,d=0,p=parseInt(r)-1,h=n,f=n+"_"+p;if(p<1)l=1;else for(;"_"!=this.game.board[f].letter&&p>=1&&(l=p,"#"+(f=n+"_"+--p),!(p<1)););if(h=n,"#"+(f=n+"_"+(p=parseInt(r)+1)),p<=15)for(;"_"!=this.game.board[f].letter&&p<=15&&(u=p,"#"+(f=n+"_"+ ++p),!(p>15)););var m=1;o="";for(var g=l;g<=u;g++){f=n+"_"+g;var b=this.returnBonus(f),y=1;console.log(b+" -- "+this.game.board[f].fresh),"3W"==b&&1==this.game.board[f].fresh&&(m*=3),"2W"==b&&1==this.game.board[f].fresh&&(m*=2),"3L"==b&&1==this.game.board[f].fresh&&(y=3),"2L"==b&&1==this.game.board[f].fresh&&(y=2),1==this.game.board[f].fresh&&(d+=1),1!=this.game.board[f].fresh&&(s=1);var v=this.game.board[f].letter;o+=v,i+=this.letters[v].score*y}if(!this.checkWord(o))return-1;c+=o,7==d&&(i+=10,m+=1),i*=m;for(var _=r;_<r+e.length;_++)if(f=n+"_"+_,1==this.game.board[f].fresh){var w=parseInt(n),x=parseInt(n);if("#"+(f=(h=w-1)+"_"+(p=_)),0==h)w=1;else for(;"_"!=this.game.board[f].letter&&h>0&&(w=h,"#"+(f=--h+"_"+p),!(h<1)););if("#"+(f=(h=x+1)+"_"+(p=_)),h>15)x=15;else for(;"_"!=this.game.board[f].letter&&h<=15&&(x=h,f=++h+"_"+p,!(h>15)););var k=0,S=1;if(o="",w!=x){for(var P=w;P<=x;P++){var E=P+"_"+_,C=this.returnBonus(E),A=1;"3W"==C&&1==this.game.board[E].fresh&&(S*=3),"2W"==C&&1==this.game.board[E].fresh&&(S*=2),"3L"==C&&1==this.game.board[E].fresh&&(A=3),"2L"==C&&1==this.game.board[E].fresh&&(A=2),1!=this.game.board[E].fresh&&(s=1);var M=this.game.board[E].letter;o+=M,k+=this.letters[M].score*A}if(i+=k*S,!this.checkWord(o))return-1}}}if("vertical"==a){var T=n,j=n,O=0,D=parseInt(r),I=parseInt(n)-1,R=I+"_"+D;if(I<=0)T=1;else for(;"_"!=this.game.board[R].letter&&I>0&&(T=I,"#"+(R=--I+"_"+D),!(I<=0)););if(D=parseInt(r),"#"+(R=(I=parseInt(n)+1)+"_"+D),I>15)j=15;else for(;"_"!=this.game.board[R].letter&&I<=15&&(j=I,"#"+(R=++I+"_"+D),!(I>15)););for(var B=1,q=T;q<=j;q++){R=q+"_"+r;var L=this.returnBonus(R),N=1;"3W"==L&&1==this.game.board[R].fresh&&(B*=3),"2W"==L&&1==this.game.board[R].fresh&&(B*=2),"3L"==L&&1==this.game.board[R].fresh&&(N=3),"2L"==L&&1==this.game.board[R].fresh&&(N=2),1==this.game.board[R].fresh&&(O+=1),1!=this.game.board[R].fresh&&(s=1);var F=this.game.board[R].letter;o+=F,i+=this.letters[F].score*N}if(!this.checkWord(o))return-1;c+=o,7==O&&(i+=10,B+=1),i*=B;for(var U=n;U<n+e.length;U++)if(R=U+"_"+r,1==this.game.board[R].fresh){var z=parseInt(r),H=parseInt(r);if("#"+(R=(I=U)+"_"+(D=z-1)),D<1)z=1;else for(;"_"!=this.game.board[R].letter&&D>0&&(z=D,"#"+(R=I+"_"+--D),!(D<1)););if("#"+(R=(I=U)+"_"+(D=H+1)),D>15)H=15;else for(;"_"!=this.game.board[R].letter&&D<=15&&(H=D,R=I+"_"+ ++D,!(D>15)););var G=0,K=1;if(o="",z!=H){for(var W=z;W<=H;W++){R=U+"_"+W;var V=this.returnBonus(R),Y=1;"3W"===V&&1==this.game.board[R].fresh&&(K*=3),"2W"===V&&1==this.game.board[R].fresh&&(K*=2),"3L"===V&&1==this.game.board[R].fresh&&(Y=3),"2L"===V&&1==this.game.board[R].fresh&&(Y=2),1!=this.game.board[R].fresh&&(s=1);var J=this.game.board[R].letter;o+=J,G+=this.letters[J].score*Y}if(i+=G*K,!this.checkWord(o))return-1}}}if(0==this.firstmove&&0==s)return salert("Word does not cross our touch an existing word."),-1;this.firstmove=0;var X="";return this.game.words_played[t-1].length>0&&(X=""==c?"...":"Player ".concat(t," played ").concat(c," for: ").concat(this.game.words_played[t-1][this.game.words_played[t-1].length-1].score," points (total: ").concat(this.game.score[t-1],")")),$(".lastmove").html(X),$("#remainder").html("DECK: ".concat(this.game.deck[0].crypt.length)),this.last_played_word={player:t,finalword:c,score:i},i}},{key:"handleGameLoop",value:function(){var e=this;if(this.showTiles(),this.game.queue.length>0){e.saveGame(e.game.id);var t=this.game.queue.length-1,a=this.game.queue[t].split("\t"),r=1;if("gameover"===a[0]){for(var n=0,i=0,s=0;s<e.game.score.length;s++)e.game.score[s]>n&&(n=e.game.score[s],i=s);for(var o=0;o<e.game.score.length;o++)o!=i&&e.game.score[o]==e.game.score[i]&&(i=-1);if(e.game.winner=i+1,e.saveGame(e.game.id),1==e.browser_active){this.disableEvents();var c="Game Over -- Player ".concat(e.game.winner," Wins!");i<0&&(c="It's a tie! Well done everyone!"),e.updateStatusWithTiles(c),e.updateLog(c),this.game.winner==this.game.player&&this.resignGame()}return this.game.queue.splice(this.game.queue.length-1,1),0}if("endgame"===a[0])return this.game.queue.splice(this.game.queue.length-1,1),this.addMove("gameover"),1;if("place"===a[0]){var l=a[1],u=a[2],d=a[3],p=a[4],h=a[5],f=0;if(u!=e.game.player&&(this.addWordToBoard(l,h,d,p),this.setBoard(l,h,d,p),f=this.scoreWord(l,u,h,d,p),this.exhaustWord(l,h,d,p),this.addScoreToPlayer(u,f),this.game.words_played[parseInt(u)-1].push({word:l,score:f})),1==e.game.over)return;if(e.game.player==e.returnNextPlayer(u)){if(1==e.checkForEndGame())return;e.updateStatusWithTiles('YOUR GO: click board to place or <span class="link tosstiles">discard</span>.'),e.enableEvents()}else e.updateStatusWithTiles("Player "+e.returnNextPlayer(u)+" turn"),e.disableEvents();return this.game.queue.splice(this.game.queue.length-1,1),1}if("turn"===a[0]){if(0==this.game.player)return this.game.queue.push("OBSERVER_CHECKPOINT"),this.game.queue.splice(this.game.queue.length-1,1),1;if(1==e.checkForEndGame())return;var m=a[1];return e.game.player==e.returnNextPlayer(m)?(e.updateStatusWithTiles('YOUR GO: click on board to place tiles, or <span class="link tosstiles">discard</span>.'),e.enableEvents()):(e.updateStatusWithTiles("Player "+e.returnNextPlayer(m)+" turn"),e.disableEvents()),this.game.queue.splice(this.game.queue.length-1,1),1}if(0==r)return 0}return 1}},{key:"checkForEndGame",value:function(){return 0==this.game.deck[0].hand.length&&0==this.game.deck[0].crypt.length?(this.addMove("endgame"),this.endTurn(),1):0}},{key:"addScoreToPlayer",value:function(e,t){if(0!=this.browser_active){var a="#score_"+e;this.game.score[e-1]=this.game.score[e-1]+t,$(a).html(parseInt($(a).html())+t)}}},{key:"addMove",value:function(e){this.moves.push(e)}},{key:"endTurn",value:function(){this.updateStatusWithTiles("Waiting for information from peers....");var e={};e.target=this.returnNextPlayer(this.game.player),this.game.turn=this.moves,this.moves=[],this.sendMessage("game",e)}},{key:"returnGameOptionsHTML",value:function(){var e="";return this.app.config&&"DEV"==this.app.config.currentEnv&&(e='<option value="test">Test Dictionary</option>'),'\n          <label for="dictionary">Dictionary:</label>\n          <select name="dictionary">\n            <option value="sowpods" selected>English: SOWPODS</option>\n            <option value="twl">English: TWL06</option>\n            <option value="fise">Spanish: FISE</option>\n            <option value="tagalog">Tagalog</option>\n            '.concat(e,'\n          </select>\n\n          <label for="observer_mode">Observer Mode:</label>\n          <select name="observer">\n            <option value="enable" selected>enable</option>\n            <option value="disable">disable</option>\n          </select>\n\n\n          <div id="game-wizard-advanced-return-btn" class="game-wizard-advanced-return-btn button">accept</div>\n\n          ')}}]),Wordblocks}(GameTemplate);module.exports=Wordblocks},function(e,t,a){(function(t){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=a(5),c=a(19),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),this.BROWSER=1,this.SPVMODE=0,this.options=t,this.config={},this.newSaito(),this.modules=new o.modules(this,t.mod_paths),this}var r,l,u,d,p;return r=e,(l=[{key:"newSaito",value:function(){this.crypto=new o.crypto,this.connection=new o.connection,this.browser=new o.browser(this),this.storage=new o.storage(this),this.shashmap=new o.shashmap(this),this.mempool=new o.mempool(this),this.wallet=new o.wallet(this),this.miner=new o.miner(this),this.keys=new o.keychain(this),this.network=new o.network(this),this.burnfee=new o.burnfee(this),this.blockchain=new o.blockchain(this)}},{key:"init",value:(p=n(regeneratorRuntime.mark((function e(){var r,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.storage.initialize();case 3:return r=this,t.argv.forEach((function(e,t,a){var n=e.split("=")[0],i=e.split("=")[1];r.options.runtime[n]=i})),this.wallet.initialize(),this.mempool.initialize(),this.keys.initialize(),this.modules.mods=this.modules.mods_list.map((function(e){var t=new(a(1128)("./".concat(e)))(n);return t.dirname=c.dirname(e),t})),e.next=11,this.browser.initialize();case 11:return e.next=13,this.modules.initialize();case 13:return e.next=15,this.blockchain.initialize();case 15:this.network.initialize(),this.server&&this.server.initialize(),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),console.log("Error occured initializing your Saito install. The most likely cause of this is a module that is throwing an error on initialization. You can debug this by removing modules from your config file to test which ones are causing the problem and restarting."),console.log(e.t0);case 23:case"end":return e.stop()}}),e,this,[[0,19]])}))),function(){return p.apply(this,arguments)})},{key:"reset",value:(d=n(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.options=t,this.newSaito(),e.next=4,this.init();case 4:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"shutdown",value:function(){this.network.close()}}])&&s(r.prototype,l),u&&s(r,u),e}();e.exports.Saito=l,e.exports.saito_lib=o}).call(this,a(12))},function(e,t){e.exports={core:["mailrelay/mailrelay.js","appstore/appstore.js","arcade/arcade.js","archive/archive.js","blackjack/blackjack.js","chat/chat.js","chess/chess.js","email/email.js","encrypt/encrypt.js","explorer/explorer.js","imperium/imperium.js","imagecvtr/imagecvtr.js","myqrcode/myqrcode.js","pandemic/pandemic.js","post/post.js","poker/poker.js","qrscanner/qrscanner.js","relay/relay.js","settings/settings.js","solitrio/solitrio.js","twilight/twilight.js","thirteen/thirteen.js","wordblocks/wordblocks.js","website/website.js","polkadot/polkadot.js","kusama/kusama.js","westend/westend.js","earlybirds/earlybirds.js","emailcollector/emailcollector.js"],lite:["appstore/appstore.js","arcade/arcade.js","archive/archive.js","blackjack/blackjack.js","chess/chess.js","chat/chat.js","email/email.js","debug/debug.js","encrypt/encrypt.js","imperium/imperium.js","matomo/matomo.js","myqrcode/myqrcode.js","qrscanner/qrscanner.js","pandemic/pandemic.js","post/post.js","poker/poker.js","relay/relay.js","registry/registry.js","settings/settings.js","solitrio/solitrio.js","thirteen/thirteen.js","twilight/twilight.js","wordblocks/wordblocks.js","website/website.js","earlybirds/earlybirds.js","emailcollector/emailcollector.js"]}},function(e,t,a){a(677),e.exports=a(879)},function(e,t,a){"use strict";(function(e){if(a(678),a(875),a(876),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;function t(e,t,a){e[t]||Object.defineProperty(e,t,{writable:!0,configurable:!0,value:a})}t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach((function(e){[][e]&&t(Array,e,Function.call.bind([][e]))}))}).call(this,a(17))},function(e,t,a){a(679),a(682),a(683),a(684),a(685),a(686),a(687),a(688),a(689),a(690),a(691),a(692),a(693),a(694),a(695),a(696),a(697),a(698),a(699),a(700),a(701),a(702),a(703),a(704),a(705),a(706),a(707),a(708),a(709),a(710),a(711),a(712),a(713),a(714),a(715),a(716),a(717),a(718),a(719),a(720),a(721),a(722),a(723),a(724),a(725),a(726),a(727),a(728),a(729),a(730),a(731),a(732),a(733),a(734),a(735),a(736),a(737),a(738),a(739),a(740),a(741),a(742),a(743),a(744),a(745),a(746),a(747),a(748),a(749),a(750),a(751),a(752),a(753),a(754),a(755),a(756),a(757),a(759),a(760),a(762),a(763),a(764),a(765),a(766),a(767),a(768),a(770),a(771),a(772),a(773),a(774),a(775),a(776),a(777),a(778),a(779),a(780),a(781),a(782),a(156),a(783),a(331),a(784),a(332),a(785),a(786),a(787),a(788),a(789),a(335),a(337),a(338),a(790),a(791),a(792),a(793),a(794),a(795),a(796),a(797),a(798),a(799),a(800),a(801),a(802),a(803),a(804),a(805),a(806),a(807),a(808),a(809),a(810),a(811),a(812),a(813),a(814),a(815),a(816),a(817),a(818),a(819),a(820),a(821),a(822),a(823),a(824),a(825),a(826),a(827),a(828),a(829),a(830),a(831),a(832),a(833),a(834),a(835),a(836),a(837),a(838),a(839),a(840),a(841),a(842),a(843),a(844),a(845),a(846),a(847),a(848),a(849),a(850),a(851),a(852),a(853),a(854),a(855),a(856),a(857),a(858),a(859),a(860),a(861),a(862),a(863),a(864),a(865),a(866),a(867),a(868),a(869),a(870),a(871),a(872),a(873),a(874),e.exports=a(31)},function(e,t,a){"use strict";var r=a(4),n=a(24),i=a(13),s=a(0),o=a(22),c=a(49).KEY,l=a(6),u=a(82),d=a(69),p=a(54),h=a(10),f=a(313),m=a(137),g=a(681),b=a(103),y=a(3),v=a(7),_=a(16),w=a(25),x=a(36),k=a(53),S=a(57),P=a(316),E=a(26),C=a(102),A=a(14),M=a(55),T=E.f,j=A.f,O=P.f,D=r.Symbol,I=r.JSON,R=I&&I.stringify,B=h("_hidden"),q=h("toPrimitive"),L={}.propertyIsEnumerable,N=u("symbol-registry"),F=u("symbols"),U=u("op-symbols"),$=Object.prototype,z="function"==typeof D&&!!C.f,H=r.QObject,G=!H||!H.prototype||!H.prototype.findChild,K=i&&l((function(){return 7!=S(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a}))?function(e,t,a){var r=T($,t);r&&delete $[t],j(e,t,a),r&&e!==$&&j($,t,r)}:j,W=function(e){var t=F[e]=S(D.prototype);return t._k=e,t},V=z&&"symbol"==typeof D.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof D},Y=function(e,t,a){return e===$&&Y(U,t,a),y(e),t=x(t,!0),y(a),n(F,t)?(a.enumerable?(n(e,B)&&e[B][t]&&(e[B][t]=!1),a=S(a,{enumerable:k(0,!1)})):(n(e,B)||j(e,B,k(1,{})),e[B][t]=!0),K(e,t,a)):j(e,t,a)},J=function(e,t){y(e);for(var a,r=g(t=w(t)),n=0,i=r.length;i>n;)Y(e,a=r[n++],t[a]);return e},X=function(e){var t=L.call(this,e=x(e,!0));return!(this===$&&n(F,e)&&!n(U,e))&&(!(t||!n(this,e)||!n(F,e)||n(this,B)&&this[B][e])||t)},Q=function(e,t){if(e=w(e),t=x(t,!0),e!==$||!n(F,t)||n(U,t)){var a=T(e,t);return!a||!n(F,t)||n(e,B)&&e[B][t]||(a.enumerable=!0),a}},Z=function(e){for(var t,a=O(w(e)),r=[],i=0;a.length>i;)n(F,t=a[i++])||t==B||t==c||r.push(t);return r},ee=function(e){for(var t,a=e===$,r=O(a?U:w(e)),i=[],s=0;r.length>s;)!n(F,t=r[s++])||a&&!n($,t)||i.push(F[t]);return i};z||(o((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(a){this===$&&t.call(U,a),n(this,B)&&n(this[B],e)&&(this[B][e]=!1),K(this,e,k(1,a))};return i&&G&&K($,e,{configurable:!0,set:t}),W(e)}).prototype,"toString",(function(){return this._k})),E.f=Q,A.f=Y,a(58).f=P.f=Z,a(84).f=X,C.f=ee,i&&!a(48)&&o($,"propertyIsEnumerable",X,!0),f.f=function(e){return W(h(e))}),s(s.G+s.W+s.F*!z,{Symbol:D});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ae=0;te.length>ae;)h(te[ae++]);for(var re=M(h.store),ne=0;re.length>ne;)m(re[ne++]);s(s.S+s.F*!z,"Symbol",{for:function(e){return n(N,e+="")?N[e]:N[e]=D(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),s(s.S+s.F*!z,"Object",{create:function(e,t){return void 0===t?S(e):J(S(e),t)},defineProperty:Y,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Z,getOwnPropertySymbols:ee});var ie=l((function(){C.f(1)}));s(s.S+s.F*ie,"Object",{getOwnPropertySymbols:function(e){return C.f(_(e))}}),I&&s(s.S+s.F*(!z||l((function(){var e=D();return"[null]"!=R([e])||"{}"!=R({a:e})||"{}"!=R(Object(e))}))),"JSON",{stringify:function(e){for(var t,a,r=[e],n=1;arguments.length>n;)r.push(arguments[n++]);if(a=t=r[1],(v(t)||void 0!==e)&&!V(e))return b(t)||(t=function(e,t){if("function"==typeof a&&(t=a.call(this,e,t)),!V(t))return t}),r[1]=t,R.apply(I,r)}}),D.prototype[q]||a(21)(D.prototype,q,D.prototype.valueOf),d(D,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,a){e.exports=a(82)("native-function-to-string",Function.toString)},function(e,t,a){var r=a(55),n=a(102),i=a(84);e.exports=function(e){var t=r(e),a=n.f;if(a)for(var s,o=a(e),c=i.f,l=0;o.length>l;)c.call(e,s=o[l++])&&t.push(s);return t}},function(e,t,a){var r=a(0);r(r.S,"Object",{create:a(57)})},function(e,t,a){var r=a(0);r(r.S+r.F*!a(13),"Object",{defineProperty:a(14).f})},function(e,t,a){var r=a(0);r(r.S+r.F*!a(13),"Object",{defineProperties:a(315)})},function(e,t,a){var r=a(25),n=a(26).f;a(38)("getOwnPropertyDescriptor",(function(){return function(e,t){return n(r(e),t)}}))},function(e,t,a){var r=a(16),n=a(27);a(38)("getPrototypeOf",(function(){return function(e){return n(r(e))}}))},function(e,t,a){var r=a(16),n=a(55);a(38)("keys",(function(){return function(e){return n(r(e))}}))},function(e,t,a){a(38)("getOwnPropertyNames",(function(){return a(316).f}))},function(e,t,a){var r=a(7),n=a(49).onFreeze;a(38)("freeze",(function(e){return function(t){return e&&r(t)?e(n(t)):t}}))},function(e,t,a){var r=a(7),n=a(49).onFreeze;a(38)("seal",(function(e){return function(t){return e&&r(t)?e(n(t)):t}}))},function(e,t,a){var r=a(7),n=a(49).onFreeze;a(38)("preventExtensions",(function(e){return function(t){return e&&r(t)?e(n(t)):t}}))},function(e,t,a){var r=a(7);a(38)("isFrozen",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,a){var r=a(7);a(38)("isSealed",(function(e){return function(t){return!r(t)||!!e&&e(t)}}))},function(e,t,a){var r=a(7);a(38)("isExtensible",(function(e){return function(t){return!!r(t)&&(!e||e(t))}}))},function(e,t,a){var r=a(0);r(r.S+r.F,"Object",{assign:a(317)})},function(e,t,a){var r=a(0);r(r.S,"Object",{is:a(318)})},function(e,t,a){var r=a(0);r(r.S,"Object",{setPrototypeOf:a(141).set})},function(e,t,a){"use strict";var r=a(70),n={};n[a(10)("toStringTag")]="z",n+""!="[object z]"&&a(22)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(e,t,a){var r=a(0);r(r.P,"Function",{bind:a(319)})},function(e,t,a){var r=a(14).f,n=Function.prototype,i=/^\s*function ([^ (]*)/;"name"in n||a(13)&&r(n,"name",{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},function(e,t,a){"use strict";var r=a(7),n=a(27),i=a(10)("hasInstance"),s=Function.prototype;i in s||a(14).f(s,i,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=n(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,a){var r=a(0),n=a(321);r(r.G+r.F*(parseInt!=n),{parseInt:n})},function(e,t,a){var r=a(0),n=a(322);r(r.G+r.F*(parseFloat!=n),{parseFloat:n})},function(e,t,a){"use strict";var r=a(4),n=a(24),i=a(33),s=a(143),o=a(36),c=a(6),l=a(58).f,u=a(26).f,d=a(14).f,p=a(71).trim,h=r.Number,f=h,m=h.prototype,g="Number"==i(a(57)(m)),b="trim"in String.prototype,y=function(e){var t=o(e,!1);if("string"==typeof t&&t.length>2){var a,r,n,i=(t=b?t.trim():p(t,3)).charCodeAt(0);if(43===i||45===i){if(88===(a=t.charCodeAt(2))||120===a)return NaN}else if(48===i){switch(t.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+t}for(var s,c=t.slice(2),l=0,u=c.length;l<u;l++)if((s=c.charCodeAt(l))<48||s>n)return NaN;return parseInt(c,r)}}return+t};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof h&&(g?c((function(){m.valueOf.call(a)})):"Number"!=i(a))?s(new f(y(t)),a,h):y(t)};for(var v,_=a(13)?l(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;_.length>w;w++)n(f,v=_[w])&&!n(h,v)&&d(h,v,u(f,v));h.prototype=m,m.constructor=h,a(22)(r,"Number",h)}},function(e,t,a){"use strict";var r=a(0),n=a(34),i=a(323),s=a(144),o=1..toFixed,c=Math.floor,l=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",d=function(e,t){for(var a=-1,r=t;++a<6;)r+=e*l[a],l[a]=r%1e7,r=c(r/1e7)},p=function(e){for(var t=6,a=0;--t>=0;)a+=l[t],l[t]=c(a/e),a=a%e*1e7},h=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var a=String(l[e]);t=""===t?a:t+s.call("0",7-a.length)+a}return t},f=function(e,t,a){return 0===t?a:t%2==1?f(e,t-1,a*e):f(e*e,t/2,a)};r(r.P+r.F*(!!o&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a(6)((function(){o.call({})}))),"Number",{toFixed:function(e){var t,a,r,o,c=i(this,u),l=n(e),m="",g="0";if(l<0||l>20)throw RangeError(u);if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(a=(t=function(e){for(var t=0,a=e;a>=4096;)t+=12,a/=4096;for(;a>=2;)t+=1,a/=2;return t}(c*f(2,69,1))-69)<0?c*f(2,-t,1):c/f(2,t,1),a*=4503599627370496,(t=52-t)>0){for(d(0,a),r=l;r>=7;)d(1e7,0),r-=7;for(d(f(10,r,1),0),r=t-1;r>=23;)p(1<<23),r-=23;p(1<<r),d(1,1),p(2),g=h()}else d(0,a),d(1<<-t,0),g=h()+s.call("0",l);return g=l>0?m+((o=g.length)<=l?"0."+s.call("0",l-o)+g:g.slice(0,o-l)+"."+g.slice(o-l)):m+g}})},function(e,t,a){"use strict";var r=a(0),n=a(6),i=a(323),s=1..toPrecision;r(r.P+r.F*(n((function(){return"1"!==s.call(1,void 0)}))||!n((function(){s.call({})}))),"Number",{toPrecision:function(e){var t=i(this,"Number#toPrecision: incorrect invocation!");return void 0===e?s.call(t):s.call(t,e)}})},function(e,t,a){var r=a(0);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,a){var r=a(0),n=a(4).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&n(e)}})},function(e,t,a){var r=a(0);r(r.S,"Number",{isInteger:a(324)})},function(e,t,a){var r=a(0);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,a){var r=a(0),n=a(324),i=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return n(e)&&i(e)<=9007199254740991}})},function(e,t,a){var r=a(0);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,a){var r=a(0);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,a){var r=a(0),n=a(322);r(r.S+r.F*(Number.parseFloat!=n),"Number",{parseFloat:n})},function(e,t,a){var r=a(0),n=a(321);r(r.S+r.F*(Number.parseInt!=n),"Number",{parseInt:n})},function(e,t,a){var r=a(0),n=a(325),i=Math.sqrt,s=Math.acosh;r(r.S+r.F*!(s&&710==Math.floor(s(Number.MAX_VALUE))&&s(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:n(e-1+i(e-1)*i(e+1))}})},function(e,t,a){var r=a(0),n=Math.asinh;r(r.S+r.F*!(n&&1/n(0)>0),"Math",{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Math.log(t+Math.sqrt(t*t+1)):t}})},function(e,t,a){var r=a(0),n=Math.atanh;r(r.S+r.F*!(n&&1/n(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,a){var r=a(0),n=a(145);r(r.S,"Math",{cbrt:function(e){return n(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,a){var r=a(0);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,a){var r=a(0),n=Math.exp;r(r.S,"Math",{cosh:function(e){return(n(e=+e)+n(-e))/2}})},function(e,t,a){var r=a(0),n=a(146);r(r.S+r.F*(n!=Math.expm1),"Math",{expm1:n})},function(e,t,a){var r=a(0);r(r.S,"Math",{fround:a(326)})},function(e,t,a){var r=a(0),n=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var a,r,i=0,s=0,o=arguments.length,c=0;s<o;)c<(a=n(arguments[s++]))?(i=i*(r=c/a)*r+1,c=a):i+=a>0?(r=a/c)*r:a;return c===1/0?1/0:c*Math.sqrt(i)}})},function(e,t,a){var r=a(0),n=Math.imul;r(r.S+r.F*a(6)((function(){return-5!=n(4294967295,5)||2!=n.length})),"Math",{imul:function(e,t){var a=+e,r=+t,n=65535&a,i=65535&r;return 0|n*i+((65535&a>>>16)*i+n*(65535&r>>>16)<<16>>>0)}})},function(e,t,a){var r=a(0);r(r.S,"Math",{log10:function(e){return Math.log(e)*Math.LOG10E}})},function(e,t,a){var r=a(0);r(r.S,"Math",{log1p:a(325)})},function(e,t,a){var r=a(0);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,a){var r=a(0);r(r.S,"Math",{sign:a(145)})},function(e,t,a){var r=a(0),n=a(146),i=Math.exp;r(r.S+r.F*a(6)((function(){return-2e-17!=!Math.sinh(-2e-17)})),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(n(e)-n(-e))/2:(i(e-1)-i(-e-1))*(Math.E/2)}})},function(e,t,a){var r=a(0),n=a(146),i=Math.exp;r(r.S,"Math",{tanh:function(e){var t=n(e=+e),a=n(-e);return t==1/0?1:a==1/0?-1:(t-a)/(i(e)+i(-e))}})},function(e,t,a){var r=a(0);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,a){var r=a(0),n=a(56),i=String.fromCharCode,s=String.fromCodePoint;r(r.S+r.F*(!!s&&1!=s.length),"String",{fromCodePoint:function(e){for(var t,a=[],r=arguments.length,s=0;r>s;){if(t=+arguments[s++],n(t,1114111)!==t)throw RangeError(t+" is not a valid code point");a.push(t<65536?i(t):i(55296+((t-=65536)>>10),t%1024+56320))}return a.join("")}})},function(e,t,a){var r=a(0),n=a(25),i=a(11);r(r.S,"String",{raw:function(e){for(var t=n(e.raw),a=i(t.length),r=arguments.length,s=[],o=0;a>o;)s.push(String(t[o++])),o<r&&s.push(String(arguments[o]));return s.join("")}})},function(e,t,a){"use strict";a(71)("trim",(function(e){return function(){return e(this,3)}}))},function(e,t,a){"use strict";var r=a(104)(!0);a(147)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=r(t,a),this._i+=e.length,{value:e,done:!1})}))},function(e,t,a){"use strict";var r=a(0),n=a(104)(!1);r(r.P,"String",{codePointAt:function(e){return n(this,e)}})},function(e,t,a){"use strict";var r=a(0),n=a(11),i=a(149),s="".endsWith;r(r.P+r.F*a(150)("endsWith"),"String",{endsWith:function(e){var t=i(this,e,"endsWith"),a=arguments.length>1?arguments[1]:void 0,r=n(t.length),o=void 0===a?r:Math.min(n(a),r),c=String(e);return s?s.call(t,c,o):t.slice(o-c.length,o)===c}})},function(e,t,a){"use strict";var r=a(0),n=a(149);r(r.P+r.F*a(150)("includes"),"String",{includes:function(e){return!!~n(this,e,"includes").indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,a){var r=a(0);r(r.P,"String",{repeat:a(144)})},function(e,t,a){"use strict";var r=a(0),n=a(11),i=a(149),s="".startsWith;r(r.P+r.F*a(150)("startsWith"),"String",{startsWith:function(e){var t=i(this,e,"startsWith"),a=n(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return s?s.call(t,r,a):t.slice(a,a+r.length)===r}})},function(e,t,a){"use strict";a(23)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))},function(e,t,a){"use strict";a(23)("big",(function(e){return function(){return e(this,"big","","")}}))},function(e,t,a){"use strict";a(23)("blink",(function(e){return function(){return e(this,"blink","","")}}))},function(e,t,a){"use strict";a(23)("bold",(function(e){return function(){return e(this,"b","","")}}))},function(e,t,a){"use strict";a(23)("fixed",(function(e){return function(){return e(this,"tt","","")}}))},function(e,t,a){"use strict";a(23)("fontcolor",(function(e){return function(t){return e(this,"font","color",t)}}))},function(e,t,a){"use strict";a(23)("fontsize",(function(e){return function(t){return e(this,"font","size",t)}}))},function(e,t,a){"use strict";a(23)("italics",(function(e){return function(){return e(this,"i","","")}}))},function(e,t,a){"use strict";a(23)("link",(function(e){return function(t){return e(this,"a","href",t)}}))},function(e,t,a){"use strict";a(23)("small",(function(e){return function(){return e(this,"small","","")}}))},function(e,t,a){"use strict";a(23)("strike",(function(e){return function(){return e(this,"strike","","")}}))},function(e,t,a){"use strict";a(23)("sub",(function(e){return function(){return e(this,"sub","","")}}))},function(e,t,a){"use strict";a(23)("sup",(function(e){return function(){return e(this,"sup","","")}}))},function(e,t,a){var r=a(0);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,a){"use strict";var r=a(0),n=a(16),i=a(36);r(r.P+r.F*a(6)((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})),"Date",{toJSON:function(e){var t=n(this),a=i(t);return"number"!=typeof a||isFinite(a)?t.toISOString():null}})},function(e,t,a){var r=a(0),n=a(758);r(r.P+r.F*(Date.prototype.toISOString!==n),"Date",{toISOString:n})},function(e,t,a){"use strict";var r=a(6),n=Date.prototype.getTime,i=Date.prototype.toISOString,s=function(e){return e>9?e:"0"+e};e.exports=r((function(){return"0385-07-25T07:06:39.999Z"!=i.call(new Date(-50000000000001))}))||!r((function(){i.call(new Date(NaN))}))?function(){if(!isFinite(n.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),a=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+s(e.getUTCMonth()+1)+"-"+s(e.getUTCDate())+"T"+s(e.getUTCHours())+":"+s(e.getUTCMinutes())+":"+s(e.getUTCSeconds())+"."+(a>99?a:"0"+s(a))+"Z"}:i},function(e,t,a){var r=Date.prototype,n=r.toString,i=r.getTime;new Date(NaN)+""!="Invalid Date"&&a(22)(r,"toString",(function(){var e=i.call(this);return e==e?n.call(this):"Invalid Date"}))},function(e,t,a){var r=a(10)("toPrimitive"),n=Date.prototype;r in n||a(21)(n,r,a(761))},function(e,t,a){"use strict";var r=a(3),n=a(36);e.exports=function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return n(r(this),"number"!=e)}},function(e,t,a){var r=a(0);r(r.S,"Array",{isArray:a(103)})},function(e,t,a){"use strict";var r=a(32),n=a(0),i=a(16),s=a(327),o=a(151),c=a(11),l=a(152),u=a(153);n(n.S+n.F*!a(106)((function(e){Array.from(e)})),"Array",{from:function(e){var t,a,n,d,p=i(e),h="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,b=0,y=u(p);if(g&&(m=r(m,f>2?arguments[2]:void 0,2)),null==y||h==Array&&o(y))for(a=new h(t=c(p.length));t>b;b++)l(a,b,g?m(p[b],b):p[b]);else for(d=y.call(p),a=new h;!(n=d.next()).done;b++)l(a,b,g?s(d,m,[n.value,b],!0):n.value);return a.length=b,a}})},function(e,t,a){"use strict";var r=a(0),n=a(152);r(r.S+r.F*a(6)((function(){function e(){}return!(Array.of.call(e)instanceof e)})),"Array",{of:function(){for(var e=0,t=arguments.length,a=new("function"==typeof this?this:Array)(t);t>e;)n(a,e,arguments[e++]);return a.length=t,a}})},function(e,t,a){"use strict";var r=a(0),n=a(25),i=[].join;r(r.P+r.F*(a(83)!=Object||!a(35)(i)),"Array",{join:function(e){return i.call(n(this),void 0===e?",":e)}})},function(e,t,a){"use strict";var r=a(0),n=a(140),i=a(33),s=a(56),o=a(11),c=[].slice;r(r.P+r.F*a(6)((function(){n&&c.call(n)})),"Array",{slice:function(e,t){var a=o(this.length),r=i(this);if(t=void 0===t?a:t,"Array"==r)return c.call(this,e,t);for(var n=s(e,a),l=s(t,a),u=o(l-n),d=new Array(u),p=0;p<u;p++)d[p]="String"==r?this.charAt(n+p):this[n+p];return d}})},function(e,t,a){"use strict";var r=a(0),n=a(18),i=a(16),s=a(6),o=[].sort,c=[1,2,3];r(r.P+r.F*(s((function(){c.sort(void 0)}))||!s((function(){c.sort(null)}))||!a(35)(o)),"Array",{sort:function(e){return void 0===e?o.call(i(this)):o.call(i(this),n(e))}})},function(e,t,a){"use strict";var r=a(0),n=a(39)(0),i=a(35)([].forEach,!0);r(r.P+r.F*!i,"Array",{forEach:function(e){return n(this,e,arguments[1])}})},function(e,t,a){var r=a(7),n=a(103),i=a(10)("species");e.exports=function(e){var t;return n(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!n(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},function(e,t,a){"use strict";var r=a(0),n=a(39)(1);r(r.P+r.F*!a(35)([].map,!0),"Array",{map:function(e){return n(this,e,arguments[1])}})},function(e,t,a){"use strict";var r=a(0),n=a(39)(2);r(r.P+r.F*!a(35)([].filter,!0),"Array",{filter:function(e){return n(this,e,arguments[1])}})},function(e,t,a){"use strict";var r=a(0),n=a(39)(3);r(r.P+r.F*!a(35)([].some,!0),"Array",{some:function(e){return n(this,e,arguments[1])}})},function(e,t,a){"use strict";var r=a(0),n=a(39)(4);r(r.P+r.F*!a(35)([].every,!0),"Array",{every:function(e){return n(this,e,arguments[1])}})},function(e,t,a){"use strict";var r=a(0),n=a(328);r(r.P+r.F*!a(35)([].reduce,!0),"Array",{reduce:function(e){return n(this,e,arguments.length,arguments[1],!1)}})},function(e,t,a){"use strict";var r=a(0),n=a(328);r(r.P+r.F*!a(35)([].reduceRight,!0),"Array",{reduceRight:function(e){return n(this,e,arguments.length,arguments[1],!0)}})},function(e,t,a){"use strict";var r=a(0),n=a(101)(!1),i=[].indexOf,s=!!i&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(s||!a(35)(i)),"Array",{indexOf:function(e){return s?i.apply(this,arguments)||0:n(this,e,arguments[1])}})},function(e,t,a){"use strict";var r=a(0),n=a(25),i=a(34),s=a(11),o=[].lastIndexOf,c=!!o&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(c||!a(35)(o)),"Array",{lastIndexOf:function(e){if(c)return o.apply(this,arguments)||0;var t=n(this),a=s(t.length),r=a-1;for(arguments.length>1&&(r=Math.min(r,i(arguments[1]))),r<0&&(r=a+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,a){var r=a(0);r(r.P,"Array",{copyWithin:a(329)}),a(50)("copyWithin")},function(e,t,a){var r=a(0);r(r.P,"Array",{fill:a(155)}),a(50)("fill")},function(e,t,a){"use strict";var r=a(0),n=a(39)(5),i=!0;"find"in[]&&Array(1).find((function(){i=!1})),r(r.P+r.F*i,"Array",{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a(50)("find")},function(e,t,a){"use strict";var r=a(0),n=a(39)(6),i="findIndex",s=!0;i in[]&&Array(1)[i]((function(){s=!1})),r(r.P+r.F*s,"Array",{findIndex:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a(50)(i)},function(e,t,a){a(59)("Array")},function(e,t,a){var r=a(4),n=a(143),i=a(14).f,s=a(58).f,o=a(105),c=a(85),l=r.RegExp,u=l,d=l.prototype,p=/a/g,h=/a/g,f=new l(p)!==p;if(a(13)&&(!f||a(6)((function(){return h[a(10)("match")]=!1,l(p)!=p||l(h)==h||"/a/i"!=l(p,"i")})))){l=function(e,t){var a=this instanceof l,r=o(e),i=void 0===t;return!a&&r&&e.constructor===l&&i?e:n(f?new u(r&&!i?e.source:e,t):u((r=e instanceof l)?e.source:e,r&&i?c.call(e):t),a?this:d,l)};for(var m=function(e){e in l||i(l,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},g=s(u),b=0;g.length>b;)m(g[b++]);d.constructor=l,l.prototype=d,a(22)(r,"RegExp",l)}a(59)("RegExp")},function(e,t,a){"use strict";a(332);var r=a(3),n=a(85),i=a(13),s=/./.toString,o=function(e){a(22)(RegExp.prototype,"toString",e,!0)};a(6)((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?o((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?n.call(e):void 0)})):"toString"!=s.name&&o((function(){return s.call(this)}))},function(e,t,a){"use strict";var r=a(3),n=a(11),i=a(158),s=a(107);a(108)("match",1,(function(e,t,a,o){return[function(a){var r=e(this),n=null==a?void 0:a[t];return void 0!==n?n.call(a,r):new RegExp(a)[t](String(r))},function(e){var t=o(a,e,this);if(t.done)return t.value;var c=r(e),l=String(this);if(!c.global)return s(c,l);var u=c.unicode;c.lastIndex=0;for(var d,p=[],h=0;null!==(d=s(c,l));){var f=String(d[0]);p[h]=f,""===f&&(c.lastIndex=i(l,n(c.lastIndex),u)),h++}return 0===h?null:p}]}))},function(e,t,a){"use strict";var r=a(3),n=a(16),i=a(11),s=a(34),o=a(158),c=a(107),l=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g;a(108)("replace",2,(function(e,t,a,f){return[function(r,n){var i=e(this),s=null==r?void 0:r[t];return void 0!==s?s.call(r,i,n):a.call(String(i),r,n)},function(e,t){var n=f(a,e,this,t);if(n.done)return n.value;var d=r(e),p=String(this),h="function"==typeof t;h||(t=String(t));var g=d.global;if(g){var b=d.unicode;d.lastIndex=0}for(var y=[];;){var v=c(d,p);if(null===v)break;if(y.push(v),!g)break;""===String(v[0])&&(d.lastIndex=o(p,i(d.lastIndex),b))}for(var _,w="",x=0,k=0;k<y.length;k++){v=y[k];for(var S=String(v[0]),P=l(u(s(v.index),p.length),0),E=[],C=1;C<v.length;C++)E.push(void 0===(_=v[C])?_:String(_));var A=v.groups;if(h){var M=[S].concat(E,P,p);void 0!==A&&M.push(A);var T=String(t.apply(void 0,M))}else T=m(S,p,P,E,A,t);P>=x&&(w+=p.slice(x,P)+T,x=P+S.length)}return w+p.slice(x)}];function m(e,t,r,i,s,o){var c=r+e.length,l=i.length,u=h;return void 0!==s&&(s=n(s),u=p),a.call(o,u,(function(a,n){var o;switch(n.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(c);case"<":o=s[n.slice(1,-1)];break;default:var u=+n;if(0===u)return a;if(u>l){var p=d(u/10);return 0===p?a:p<=l?void 0===i[p-1]?n.charAt(1):i[p-1]+n.charAt(1):a}o=i[u-1]}return void 0===o?"":o}))}}))},function(e,t,a){"use strict";var r=a(3),n=a(318),i=a(107);a(108)("search",1,(function(e,t,a,s){return[function(a){var r=e(this),n=null==a?void 0:a[t];return void 0!==n?n.call(a,r):new RegExp(a)[t](String(r))},function(e){var t=s(a,e,this);if(t.done)return t.value;var o=r(e),c=String(this),l=o.lastIndex;n(l,0)||(o.lastIndex=0);var u=i(o,c);return n(o.lastIndex,l)||(o.lastIndex=l),null===u?-1:u.index}]}))},function(e,t,a){"use strict";var r=a(105),n=a(3),i=a(86),s=a(158),o=a(11),c=a(107),l=a(157),u=a(6),d=Math.min,p=[].push,h="length",f=!u((function(){RegExp(4294967295,"y")}));a(108)("split",2,(function(e,t,a,u){var m;return m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[h]||2!="ab".split(/(?:ab)*/)[h]||4!=".".split(/(.?)(.?)/)[h]||".".split(/()()/)[h]>1||"".split(/.?/)[h]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!r(e))return a.call(n,e,t);for(var i,s,o,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,f=void 0===t?4294967295:t>>>0,m=new RegExp(e.source,u+"g");(i=l.call(m,n))&&!((s=m.lastIndex)>d&&(c.push(n.slice(d,i.index)),i[h]>1&&i.index<n[h]&&p.apply(c,i.slice(1)),o=i[0][h],d=s,c[h]>=f));)m.lastIndex===i.index&&m.lastIndex++;return d===n[h]?!o&&m.test("")||c.push(""):c.push(n.slice(d)),c[h]>f?c.slice(0,f):c}:"0".split(void 0,0)[h]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,r){var n=e(this),i=null==a?void 0:a[t];return void 0!==i?i.call(a,n,r):m.call(String(n),a,r)},function(e,t){var r=u(m,e,this,t,m!==a);if(r.done)return r.value;var l=n(e),p=String(this),h=i(l,RegExp),g=l.unicode,b=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(f?"y":"g"),y=new h(f?l:"^(?:"+l.source+")",b),v=void 0===t?4294967295:t>>>0;if(0===v)return[];if(0===p.length)return null===c(y,p)?[p]:[];for(var _=0,w=0,x=[];w<p.length;){y.lastIndex=f?w:0;var k,S=c(y,f?p:p.slice(w));if(null===S||(k=d(o(y.lastIndex+(f?0:w)),p.length))===_)w=s(p,w,g);else{if(x.push(p.slice(_,w)),x.length===v)return x;for(var P=1;P<=S.length-1;P++)if(x.push(S[P]),x.length===v)return x;w=_=k}}return x.push(p.slice(_)),x}]}))},function(e,t,a){"use strict";var r,n,i,s,o=a(48),c=a(4),l=a(32),u=a(70),d=a(0),p=a(7),h=a(18),f=a(60),m=a(61),g=a(86),b=a(159).set,y=a(160)(),v=a(161),_=a(333),w=a(109),x=a(334),k=c.TypeError,S=c.process,P=S&&S.versions,E=P&&P.v8||"",C=c.Promise,A="process"==u(S),M=function(){},T=n=v.f,j=!!function(){try{var e=C.resolve(1),t=(e.constructor={})[a(10)("species")]=function(e){e(M,M)};return(A||"function"==typeof PromiseRejectionEvent)&&e.then(M)instanceof t&&0!==E.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(e){}}(),O=function(e){var t;return!(!p(e)||"function"!=typeof(t=e.then))&&t},D=function(e,t){if(!e._n){e._n=!0;var a=e._c;y((function(){for(var r=e._v,n=1==e._s,i=0,s=function(t){var a,i,s,o=n?t.ok:t.fail,c=t.resolve,l=t.reject,u=t.domain;try{o?(n||(2==e._h&&B(e),e._h=1),!0===o?a=r:(u&&u.enter(),a=o(r),u&&(u.exit(),s=!0)),a===t.promise?l(k("Promise-chain cycle")):(i=O(a))?i.call(a,c,l):c(a)):l(r)}catch(e){u&&!s&&u.exit(),l(e)}};a.length>i;)s(a[i++]);e._c=[],e._n=!1,t&&!e._h&&I(e)}))}},I=function(e){b.call(c,(function(){var t,a,r,n=e._v,i=R(e);if(i&&(t=_((function(){A?S.emit("unhandledRejection",n,e):(a=c.onunhandledrejection)?a({promise:e,reason:n}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",n)})),e._h=A||R(e)?2:1),e._a=void 0,i&&t.e)throw t.v}))},R=function(e){return 1!==e._h&&0===(e._a||e._c).length},B=function(e){b.call(c,(function(){var t;A?S.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})}))},q=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},L=function(e){var t,a=this;if(!a._d){a._d=!0,a=a._w||a;try{if(a===e)throw k("Promise can't be resolved itself");(t=O(e))?y((function(){var r={_w:a,_d:!1};try{t.call(e,l(L,r,1),l(q,r,1))}catch(e){q.call(r,e)}})):(a._v=e,a._s=1,D(a,!1))}catch(e){q.call({_w:a,_d:!1},e)}}};j||(C=function(e){f(this,C,"Promise","_h"),h(e),r.call(this);try{e(l(L,this,1),l(q,this,1))}catch(e){q.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=a(62)(C.prototype,{then:function(e,t){var a=T(g(this,C));return a.ok="function"!=typeof e||e,a.fail="function"==typeof t&&t,a.domain=A?S.domain:void 0,this._c.push(a),this._a&&this._a.push(a),this._s&&D(this,!1),a.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r;this.promise=e,this.resolve=l(L,e,1),this.reject=l(q,e,1)},v.f=T=function(e){return e===C||e===s?new i(e):n(e)}),d(d.G+d.W+d.F*!j,{Promise:C}),a(69)(C,"Promise"),a(59)("Promise"),s=a(31).Promise,d(d.S+d.F*!j,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(o||!j),"Promise",{resolve:function(e){return x(o&&this===s?C:this,e)}}),d(d.S+d.F*!(j&&a(106)((function(e){C.all(e).catch(M)}))),"Promise",{all:function(e){var t=this,a=T(t),r=a.resolve,n=a.reject,i=_((function(){var a=[],i=0,s=1;m(e,!1,(function(e){var o=i++,c=!1;a.push(void 0),s++,t.resolve(e).then((function(e){c||(c=!0,a[o]=e,--s||r(a))}),n)})),--s||r(a)}));return i.e&&n(i.v),a.promise},race:function(e){var t=this,a=T(t),r=a.reject,n=_((function(){m(e,!1,(function(e){t.resolve(e).then(a.resolve,r)}))}));return n.e&&r(n.v),a.promise}})},function(e,t,a){"use strict";var r=a(339),n=a(63);a(110)("WeakSet",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return r.def(n(this,"WeakSet"),e,!0)}},r,!1,!0)},function(e,t,a){"use strict";var r=a(0),n=a(111),i=a(162),s=a(3),o=a(56),c=a(11),l=a(7),u=a(4).ArrayBuffer,d=a(86),p=i.ArrayBuffer,h=i.DataView,f=n.ABV&&u.isView,m=p.prototype.slice,g=n.VIEW;r(r.G+r.W+r.F*(u!==p),{ArrayBuffer:p}),r(r.S+r.F*!n.CONSTR,"ArrayBuffer",{isView:function(e){return f&&f(e)||l(e)&&g in e}}),r(r.P+r.U+r.F*a(6)((function(){return!new p(2).slice(1,void 0).byteLength})),"ArrayBuffer",{slice:function(e,t){if(void 0!==m&&void 0===t)return m.call(s(this),e);for(var a=s(this).byteLength,r=o(e,a),n=o(void 0===t?a:t,a),i=new(d(this,p))(c(n-r)),l=new h(this),u=new h(i),f=0;r<n;)u.setUint8(f++,l.getUint8(r++));return i}}),a(59)("ArrayBuffer")},function(e,t,a){var r=a(0);r(r.G+r.W+r.F*!a(111).ABV,{DataView:a(162).DataView})},function(e,t,a){a(43)("Int8",1,(function(e){return function(t,a,r){return e(this,t,a,r)}}))},function(e,t,a){a(43)("Uint8",1,(function(e){return function(t,a,r){return e(this,t,a,r)}}))},function(e,t,a){a(43)("Uint8",1,(function(e){return function(t,a,r){return e(this,t,a,r)}}),!0)},function(e,t,a){a(43)("Int16",2,(function(e){return function(t,a,r){return e(this,t,a,r)}}))},function(e,t,a){a(43)("Uint16",2,(function(e){return function(t,a,r){return e(this,t,a,r)}}))},function(e,t,a){a(43)("Int32",4,(function(e){return function(t,a,r){return e(this,t,a,r)}}))},function(e,t,a){a(43)("Uint32",4,(function(e){return function(t,a,r){return e(this,t,a,r)}}))},function(e,t,a){a(43)("Float32",4,(function(e){return function(t,a,r){return e(this,t,a,r)}}))},function(e,t,a){a(43)("Float64",8,(function(e){return function(t,a,r){return e(this,t,a,r)}}))},function(e,t,a){var r=a(0),n=a(18),i=a(3),s=(a(4).Reflect||{}).apply,o=Function.apply;r(r.S+r.F*!a(6)((function(){s((function(){}))})),"Reflect",{apply:function(e,t,a){var r=n(e),c=i(a);return s?s(r,t,c):o.call(r,t,c)}})},function(e,t,a){var r=a(0),n=a(57),i=a(18),s=a(3),o=a(7),c=a(6),l=a(319),u=(a(4).Reflect||{}).construct,d=c((function(){function e(){}return!(u((function(){}),[],e)instanceof e)})),p=!c((function(){u((function(){}))}));r(r.S+r.F*(d||p),"Reflect",{construct:function(e,t){i(e),s(t);var a=arguments.length<3?e:i(arguments[2]);if(p&&!d)return u(e,t,a);if(e==a){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(l.apply(e,r))}var c=a.prototype,h=n(o(c)?c:Object.prototype),f=Function.apply.call(e,h,t);return o(f)?f:h}})},function(e,t,a){var r=a(14),n=a(0),i=a(3),s=a(36);n(n.S+n.F*a(6)((function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})})),"Reflect",{defineProperty:function(e,t,a){i(e),t=s(t,!0),i(a);try{return r.f(e,t,a),!0}catch(e){return!1}}})},function(e,t,a){var r=a(0),n=a(26).f,i=a(3);r(r.S,"Reflect",{deleteProperty:function(e,t){var a=n(i(e),t);return!(a&&!a.configurable)&&delete e[t]}})},function(e,t,a){"use strict";var r=a(0),n=a(3),i=function(e){this._t=n(e),this._i=0;var t,a=this._k=[];for(t in e)a.push(t)};a(148)(i,"Object",(function(){var e,t=this._k;do{if(this._i>=t.length)return{value:void 0,done:!0}}while(!((e=t[this._i++])in this._t));return{value:e,done:!1}})),r(r.S,"Reflect",{enumerate:function(e){return new i(e)}})},function(e,t,a){var r=a(26),n=a(27),i=a(24),s=a(0),o=a(7),c=a(3);s(s.S,"Reflect",{get:function e(t,a){var s,l,u=arguments.length<3?t:arguments[2];return c(t)===u?t[a]:(s=r.f(t,a))?i(s,"value")?s.value:void 0!==s.get?s.get.call(u):void 0:o(l=n(t))?e(l,a,u):void 0}})},function(e,t,a){var r=a(26),n=a(0),i=a(3);n(n.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(i(e),t)}})},function(e,t,a){var r=a(0),n=a(27),i=a(3);r(r.S,"Reflect",{getPrototypeOf:function(e){return n(i(e))}})},function(e,t,a){var r=a(0);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,a){var r=a(0),n=a(3),i=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return n(e),!i||i(e)}})},function(e,t,a){var r=a(0);r(r.S,"Reflect",{ownKeys:a(341)})},function(e,t,a){var r=a(0),n=a(3),i=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){n(e);try{return i&&i(e),!0}catch(e){return!1}}})},function(e,t,a){var r=a(14),n=a(26),i=a(27),s=a(24),o=a(0),c=a(53),l=a(3),u=a(7);o(o.S,"Reflect",{set:function e(t,a,o){var d,p,h=arguments.length<4?t:arguments[3],f=n.f(l(t),a);if(!f){if(u(p=i(t)))return e(p,a,o,h);f=c(0)}if(s(f,"value")){if(!1===f.writable||!u(h))return!1;if(d=n.f(h,a)){if(d.get||d.set||!1===d.writable)return!1;d.value=o,r.f(h,a,d)}else r.f(h,a,c(0,o));return!0}return void 0!==f.set&&(f.set.call(h,o),!0)}})},function(e,t,a){var r=a(0),n=a(141);n&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){n.check(e,t);try{return n.set(e,t),!0}catch(e){return!1}}})},function(e,t,a){"use strict";var r=a(0),n=a(101)(!0);r(r.P,"Array",{includes:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),a(50)("includes")},function(e,t,a){"use strict";var r=a(0),n=a(342),i=a(16),s=a(11),o=a(18),c=a(154);r(r.P,"Array",{flatMap:function(e){var t,a,r=i(this);return o(e),t=s(r.length),a=c(r,0),n(a,r,r,t,0,1,e,arguments[1]),a}}),a(50)("flatMap")},function(e,t,a){"use strict";var r=a(0),n=a(342),i=a(16),s=a(11),o=a(34),c=a(154);r(r.P,"Array",{flatten:function(){var e=arguments[0],t=i(this),a=s(t.length),r=c(t,0);return n(r,t,t,a,0,void 0===e?1:o(e)),r}}),a(50)("flatten")},function(e,t,a){"use strict";var r=a(0),n=a(104)(!0);r(r.P,"String",{at:function(e){return n(this,e)}})},function(e,t,a){"use strict";var r=a(0),n=a(343),i=a(109),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*s,"String",{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,a){"use strict";var r=a(0),n=a(343),i=a(109),s=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i);r(r.P+r.F*s,"String",{padEnd:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,a){"use strict";a(71)("trimLeft",(function(e){return function(){return e(this,1)}}),"trimStart")},function(e,t,a){"use strict";a(71)("trimRight",(function(e){return function(){return e(this,2)}}),"trimEnd")},function(e,t,a){"use strict";var r=a(0),n=a(37),i=a(11),s=a(105),o=a(85),c=RegExp.prototype,l=function(e,t){this._r=e,this._s=t};a(148)(l,"RegExp String",(function(){var e=this._r.exec(this._s);return{value:e,done:null===e}})),r(r.P,"String",{matchAll:function(e){if(n(this),!s(e))throw TypeError(e+" is not a regexp!");var t=String(this),a="flags"in c?String(e.flags):o.call(e),r=new RegExp(e.source,~a.indexOf("g")?a:"g"+a);return r.lastIndex=i(e.lastIndex),new l(r,t)}})},function(e,t,a){a(137)("asyncIterator")},function(e,t,a){a(137)("observable")},function(e,t,a){var r=a(0),n=a(341),i=a(25),s=a(26),o=a(152);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,a,r=i(e),c=s.f,l=n(r),u={},d=0;l.length>d;)void 0!==(a=c(r,t=l[d++]))&&o(u,t,a);return u}})},function(e,t,a){var r=a(0),n=a(344)(!1);r(r.S,"Object",{values:function(e){return n(e)}})},function(e,t,a){var r=a(0),n=a(344)(!0);r(r.S,"Object",{entries:function(e){return n(e)}})},function(e,t,a){"use strict";var r=a(0),n=a(16),i=a(18),s=a(14);a(13)&&r(r.P+a(112),"Object",{__defineGetter__:function(e,t){s.f(n(this),e,{get:i(t),enumerable:!0,configurable:!0})}})},function(e,t,a){"use strict";var r=a(0),n=a(16),i=a(18),s=a(14);a(13)&&r(r.P+a(112),"Object",{__defineSetter__:function(e,t){s.f(n(this),e,{set:i(t),enumerable:!0,configurable:!0})}})},function(e,t,a){"use strict";var r=a(0),n=a(16),i=a(36),s=a(27),o=a(26).f;a(13)&&r(r.P+a(112),"Object",{__lookupGetter__:function(e){var t,a=n(this),r=i(e,!0);do{if(t=o(a,r))return t.get}while(a=s(a))}})},function(e,t,a){"use strict";var r=a(0),n=a(16),i=a(36),s=a(27),o=a(26).f;a(13)&&r(r.P+a(112),"Object",{__lookupSetter__:function(e){var t,a=n(this),r=i(e,!0);do{if(t=o(a,r))return t.set}while(a=s(a))}})},function(e,t,a){var r=a(0);r(r.P+r.R,"Map",{toJSON:a(345)("Map")})},function(e,t,a){var r=a(0);r(r.P+r.R,"Set",{toJSON:a(345)("Set")})},function(e,t,a){a(113)("Map")},function(e,t,a){a(113)("Set")},function(e,t,a){a(113)("WeakMap")},function(e,t,a){a(113)("WeakSet")},function(e,t,a){a(114)("Map")},function(e,t,a){a(114)("Set")},function(e,t,a){a(114)("WeakMap")},function(e,t,a){a(114)("WeakSet")},function(e,t,a){var r=a(0);r(r.G,{global:a(4)})},function(e,t,a){var r=a(0);r(r.S,"System",{global:a(4)})},function(e,t,a){var r=a(0),n=a(33);r(r.S,"Error",{isError:function(e){return"Error"===n(e)}})},function(e,t,a){var r=a(0);r(r.S,"Math",{clamp:function(e,t,a){return Math.min(a,Math.max(t,e))}})},function(e,t,a){var r=a(0);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(e,t,a){var r=a(0),n=180/Math.PI;r(r.S,"Math",{degrees:function(e){return e*n}})},function(e,t,a){var r=a(0),n=a(347),i=a(326);r(r.S,"Math",{fscale:function(e,t,a,r,s){return i(n(e,t,a,r,s))}})},function(e,t,a){var r=a(0);r(r.S,"Math",{iaddh:function(e,t,a,r){var n=e>>>0,i=a>>>0;return(t>>>0)+(r>>>0)+((n&i|(n|i)&~(n+i>>>0))>>>31)|0}})},function(e,t,a){var r=a(0);r(r.S,"Math",{isubh:function(e,t,a,r){var n=e>>>0,i=a>>>0;return(t>>>0)-(r>>>0)-((~n&i|~(n^i)&n-i>>>0)>>>31)|0}})},function(e,t,a){var r=a(0);r(r.S,"Math",{imulh:function(e,t){var a=+e,r=+t,n=65535&a,i=65535&r,s=a>>16,o=r>>16,c=(s*i>>>0)+(n*i>>>16);return s*o+(c>>16)+((n*o>>>0)+(65535&c)>>16)}})},function(e,t,a){var r=a(0);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(e,t,a){var r=a(0),n=Math.PI/180;r(r.S,"Math",{radians:function(e){return e*n}})},function(e,t,a){var r=a(0);r(r.S,"Math",{scale:a(347)})},function(e,t,a){var r=a(0);r(r.S,"Math",{umulh:function(e,t){var a=+e,r=+t,n=65535&a,i=65535&r,s=a>>>16,o=r>>>16,c=(s*i>>>0)+(n*i>>>16);return s*o+(c>>>16)+((n*o>>>0)+(65535&c)>>>16)}})},function(e,t,a){var r=a(0);r(r.S,"Math",{signbit:function(e){return(e=+e)!=e?e:0==e?1/e==1/0:e>0}})},function(e,t,a){"use strict";var r=a(0),n=a(31),i=a(4),s=a(86),o=a(334);r(r.P+r.R,"Promise",{finally:function(e){var t=s(this,n.Promise||i.Promise),a="function"==typeof e;return this.then(a?function(a){return o(t,e()).then((function(){return a}))}:e,a?function(a){return o(t,e()).then((function(){throw a}))}:e)}})},function(e,t,a){"use strict";var r=a(0),n=a(161),i=a(333);r(r.S,"Promise",{try:function(e){var t=n.f(this),a=i(e);return(a.e?t.reject:t.resolve)(a.v),t.promise}})},function(e,t,a){var r=a(44),n=a(3),i=r.key,s=r.set;r.exp({defineMetadata:function(e,t,a,r){s(e,t,n(a),i(r))}})},function(e,t,a){var r=a(44),n=a(3),i=r.key,s=r.map,o=r.store;r.exp({deleteMetadata:function(e,t){var a=arguments.length<3?void 0:i(arguments[2]),r=s(n(t),a,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var c=o.get(t);return c.delete(a),!!c.size||o.delete(t)}})},function(e,t,a){var r=a(44),n=a(3),i=a(27),s=r.has,o=r.get,c=r.key,l=function(e,t,a){if(s(e,t,a))return o(e,t,a);var r=i(t);return null!==r?l(e,r,a):void 0};r.exp({getMetadata:function(e,t){return l(e,n(t),arguments.length<3?void 0:c(arguments[2]))}})},function(e,t,a){var r=a(337),n=a(346),i=a(44),s=a(3),o=a(27),c=i.keys,l=i.key,u=function(e,t){var a=c(e,t),i=o(e);if(null===i)return a;var s=u(i,t);return s.length?a.length?n(new r(a.concat(s))):s:a};i.exp({getMetadataKeys:function(e){return u(s(e),arguments.length<2?void 0:l(arguments[1]))}})},function(e,t,a){var r=a(44),n=a(3),i=r.get,s=r.key;r.exp({getOwnMetadata:function(e,t){return i(e,n(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,a){var r=a(44),n=a(3),i=r.keys,s=r.key;r.exp({getOwnMetadataKeys:function(e){return i(n(e),arguments.length<2?void 0:s(arguments[1]))}})},function(e,t,a){var r=a(44),n=a(3),i=a(27),s=r.has,o=r.key,c=function(e,t,a){if(s(e,t,a))return!0;var r=i(t);return null!==r&&c(e,r,a)};r.exp({hasMetadata:function(e,t){return c(e,n(t),arguments.length<3?void 0:o(arguments[2]))}})},function(e,t,a){var r=a(44),n=a(3),i=r.has,s=r.key;r.exp({hasOwnMetadata:function(e,t){return i(e,n(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,a){var r=a(44),n=a(3),i=a(18),s=r.key,o=r.set;r.exp({metadata:function(e,t){return function(a,r){o(e,t,(void 0!==r?n:i)(a),s(r))}}})},function(e,t,a){var r=a(0),n=a(160)(),i=a(4).process,s="process"==a(33)(i);r(r.G,{asap:function(e){var t=s&&i.domain;n(t?t.bind(e):e)}})},function(e,t,a){"use strict";var r=a(0),n=a(4),i=a(31),s=a(160)(),o=a(10)("observable"),c=a(18),l=a(3),u=a(60),d=a(62),p=a(21),h=a(61),f=h.RETURN,m=function(e){return null==e?void 0:c(e)},g=function(e){var t=e._c;t&&(e._c=void 0,t())},b=function(e){return void 0===e._o},y=function(e){b(e)||(e._o=void 0,g(e))},v=function(e,t){l(e),this._c=void 0,this._o=e,e=new _(this);try{var a=t(e),r=a;null!=a&&("function"==typeof a.unsubscribe?a=function(){r.unsubscribe()}:c(a),this._c=a)}catch(t){return void e.error(t)}b(this)&&g(this)};v.prototype=d({},{unsubscribe:function(){y(this)}});var _=function(e){this._s=e};_.prototype=d({},{next:function(e){var t=this._s;if(!b(t)){var a=t._o;try{var r=m(a.next);if(r)return r.call(a,e)}catch(e){try{y(t)}finally{throw e}}}},error:function(e){var t=this._s;if(b(t))throw e;var a=t._o;t._o=void 0;try{var r=m(a.error);if(!r)throw e;e=r.call(a,e)}catch(e){try{g(t)}finally{throw e}}return g(t),e},complete:function(e){var t=this._s;if(!b(t)){var a=t._o;t._o=void 0;try{var r=m(a.complete);e=r?r.call(a,e):void 0}catch(e){try{g(t)}finally{throw e}}return g(t),e}}});var w=function(e){u(this,w,"Observable","_f")._f=c(e)};d(w.prototype,{subscribe:function(e){return new v(e,this._f)},forEach:function(e){var t=this;return new(i.Promise||n.Promise)((function(a,r){c(e);var n=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),n.unsubscribe()}},error:r,complete:a})}))}}),d(w,{from:function(e){var t="function"==typeof this?this:w,a=m(l(e)[o]);if(a){var r=l(a.call(e));return r.constructor===t?r:new t((function(e){return r.subscribe(e)}))}return new t((function(t){var a=!1;return s((function(){if(!a){try{if(h(e,!1,(function(e){if(t.next(e),a)return f}))===f)return}catch(e){if(a)throw e;return void t.error(e)}t.complete()}})),function(){a=!0}}))},of:function(){for(var e=0,t=arguments.length,a=new Array(t);e<t;)a[e]=arguments[e++];return new("function"==typeof this?this:w)((function(e){var t=!1;return s((function(){if(!t){for(var r=0;r<a.length;++r)if(e.next(a[r]),t)return;e.complete()}})),function(){t=!0}}))}}),p(w.prototype,o,(function(){return this})),r(r.G,{Observable:w}),a(59)("Observable")},function(e,t,a){var r=a(4),n=a(0),i=a(109),s=[].slice,o=/MSIE .\./.test(i),c=function(e){return function(t,a){var r=arguments.length>2,n=!!r&&s.call(arguments,2);return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,n)}:t,a)}};n(n.G+n.B+n.F*o,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},function(e,t,a){var r=a(0),n=a(159);r(r.G+r.B,{setImmediate:n.set,clearImmediate:n.clear})},function(e,t,a){for(var r=a(156),n=a(55),i=a(22),s=a(4),o=a(21),c=a(72),l=a(10),u=l("iterator"),d=l("toStringTag"),p=c.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=n(h),m=0;m<f.length;m++){var g,b=f[m],y=h[b],v=s[b],_=v&&v.prototype;if(_&&(_[u]||o(_,u,p),_[d]||o(_,d,b),c[b]=p,y))for(g in r)_[g]||i(_,g,r[g],!0)}},function(e,t,a){(function(t){!function(t){"use strict";var a=Object.prototype,r=a.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag",c="object"==typeof e,l=t.regeneratorRuntime;if(l)c&&(e.exports=l);else{(l=t.regeneratorRuntime=c?e.exports:{}).wrap=m;var u={},d={};d[i]=function(){return this};var p=Object.getPrototypeOf,h=p&&p(p(E([])));h&&h!==a&&r.call(h,i)&&(d=h);var f=v.prototype=b.prototype=Object.create(d);y.prototype=f.constructor=v,v.constructor=y,v[o]=y.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,o in e||(e[o]="GeneratorFunction")),e.prototype=Object.create(f),e},l.awrap=function(e){return{__await:e}},_(w.prototype),w.prototype[s]=function(){return this},l.AsyncIterator=w,l.async=function(e,t,a,r){var n=new w(m(e,t,a,r));return l.isGeneratorFunction(t)?n:n.next().then((function(e){return e.done?e.value:n.next()}))},_(f),f[o]="Generator",f[i]=function(){return this},f.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var r=t.pop();if(r in e)return a.value=r,a.done=!1,a}return a.done=!0,a}},l.values=E,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(a,r){return s.type="throw",s.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],s=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var o=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(o&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var n=this.tryEntries[a];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),S(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var n=r.arg;S(a)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:E(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}}}function m(e,t,a,r){var n=t&&t.prototype instanceof b?t:b,i=Object.create(n.prototype),s=new P(r||[]);return i._invoke=function(e,t,a){var r="suspendedStart";return function(n,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===n)throw i;return C()}for(a.method=n,a.arg=i;;){var s=a.delegate;if(s){var o=x(s,a);if(o){if(o===u)continue;return o}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===r)throw r="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r="executing";var c=g(e,t,a);if("normal"===c.type){if(r=a.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:a.done}}"throw"===c.type&&(r="completed",a.method="throw",a.arg=c.arg)}}}(e,a,s),i}function g(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}function b(){}function y(){}function v(){}function _(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function w(e){function a(t,n,i,s){var o=g(e[t],e,n);if("throw"!==o.type){var c=o.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):Promise.resolve(l).then((function(e){c.value=e,i(c)}),s)}s(o.arg)}var n;"object"==typeof t.process&&t.process.domain&&(a=t.process.domain.bind(a)),this._invoke=function(e,t){function r(){return new Promise((function(r,n){a(e,t,r,n)}))}return n=n?n.then(r,r):r()}}function x(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=g(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var n=r.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,n=function t(){for(;++a<e.length;)if(r.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:C}}function C(){return{value:void 0,done:!0}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,a(17))},function(e,t,a){a(877),e.exports=a(31).RegExp.escape},function(e,t,a){var r=a(0),n=a(878)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return n(e)}})},function(e,t){e.exports=function(e,t){var a=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,a)}}},function(e,t,a){"use strict";a.r(t);var r=a(674),n=a(675),i=a.n(n);function s(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function o(e){s(i,r,n,o,c,"next",e)}function c(e){s(i,r,n,o,c,"throw",e)}o(void 0)}))}}function c(){return(c=o(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new r.Saito({mod_paths:i.a.lite})).BROWSER=1,e.next=4,t.init();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){c.apply(this,arguments)}()},function(e,t,a){(function(t){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=a(40),c=a(5),l=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(i(this,e),this.app=t||{},this.block={},this.block.ts=(new Date).getTime(),this.block.prevbsh="",this.block.merkle="",this.block.creator="",this.block.id=1,this.block.bf=0,this.block.difficulty=0,this.block.paysplit=.5,this.block.powsplit=.5,this.block.mt=o("2868000000.0"),this.block.st=o("100000.0"),this.block.ss=0,this.block.sa=0,this.block.reclaimed=o("0.0"),this.nextbsh="",this.mc="0.0",this.sc="0.0",this.staker_pos=-1,this.staker_bid=-1,this.staker_sis=-1,this.staker_slip="",this.txs_hmap=[],this.transactions=[],this.callbacks=[],this.callbacksTx=[],this.maxtid=0,this.mintid=0,this.avgfee=0,this.size=0,this.hash="",this.prehash="",this.filename="",this.confirmations=r,this.is_valid=1,this.validates=0,null!=a)try{this.block=a.block}catch(e){return console.log("invalid block"),console.log(e),void(this.is_valid=0)}}var a,r,l,u,d,p,h,f;return a=e,(r=[{key:"affixCallbacks",value:function(){for(var e=0;e<this.transactions.length;e++){var t=this.transactions[e].returnMessage();this.app.modules.affixCallbacks(this.transactions[e],e,t,this.callbacks,this.callbacksTx,this.app)}}},{key:"bundle",value:(f=n(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s,l,u,d,p,h,f,m,g,b,y,v,_,w=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:null,a=1,null!=t&&(this.block.id=t.block.id+1,this.block.mt=o(t.block.mt).plus(o(t.block.reclaimed)),this.mc=o(this.block.mt).div(this.app.blockchain.genesis_period).toFixed(8),this.block.mt=this.block.mt.minus(o(this.mc)).toFixed(8),this.block.st=o(t.block.st),this.sc=o(t.block.st).div(this.app.blockchain.genesis_period).toFixed(8),this.block.ss=t.block.ss,this.block.sa=t.block.sa,this.block.prevbsh=t.returnHash(),this.block.difficulty=t.block.difficulty,this.block.paysplit=t.block.paysplit,this.block.powsplit=t.block.powsplit,this.block.ts=(new Date).getTime(),this.block.bf=this.app.burnfee.returnBurnFee(t,this),0==t.transactions.length?0==(a=t.returnMaxTxId())&&(a=1):a=t.returnMaxTxId()+1),1==this.block.id&&((r=new c.transaction).transaction.to.push(new c.slip("zYCCXRZt2DyPD9UmxRfwFgLTNAqCd5VE8RuNneg4aNMK",1e9,3,0,0,0,"",1)),r.transaction.to.push(new c.slip("zYCCXRZt2DyPD9UmxRfwFgLTNAqCd5VE8RuNneg4aNMK",1e9,3,0,0,0,"",1)),r.transaction.to.push(new c.slip("zYCCXRZt2DyPD9UmxRfwFgLTNAqCd5VE8RuNneg4aNMK",1e9,3,0,0,0,"",1)),r.transaction.to.push(new c.slip("zYCCXRZt2DyPD9UmxRfwFgLTNAqCd5VE8RuNneg4aNMK",1e9,3,0,0,0,"",1)),r.transaction.to.push(new c.slip("zYCCXRZt2DyPD9UmxRfwFgLTNAqCd5VE8RuNneg4aNMK",1e9,3,0,0,0,"",1)),r.transaction.type=3,r.transaction.from.push(new c.slip(this.app.wallet.returnPublicKey(),5e9,3,0,0,0,"",1)),r.transaction.id=1,r=this.app.wallet.signTransaction(r),this.transactions.push(r),(r=new c.transaction).transaction.to.push(new c.slip("STAKING1WBKFDyMTVpvuKNEHt2fZQUxDebpiBaqwkWMM",6e6,4,0,0,0,"",1)),r.transaction.type=4,r.transaction.from.push(new c.slip(this.app.wallet.returnPublicKey(),6e6,4,0,0,0,"",1)),r=this.app.wallet.signTransaction(r),this.transactions.push(r)),e.next=6,this.calculateRebroadcasts();case 6:for(n=e.sent,this.block.reclaimed=n.reclaimed,this.block.ss-=n.ss,this.block.sa=o(this.block.sa).minus(o(n.sa)).toFixed(8),i=o(0),s=0;s<n.rebroadcast.length;s++){for(l=0;l<n.rebroadcast[s].transaction.to.length;l++)i=i.plus(o(n.rebroadcast[s].transaction.to[l].amt));this.transactions.push(n.rebroadcast[s])}u=0,d=0,p=null,h=0;case 17:if(!(h<this.transactions.length)){e.next=37;break}if(this.transactions[h].transaction.id=a+h,1!=this.transactions[h].transaction.type){e.next=31;break}if(d++,p=this.transactions[h].returnMessage(),!(d>1)){e.next=27;break}return console.log("ERROR 412523: second golden ticket found in block"),this.is_valid=0,e.abrupt("return",this);case 27:if(p.target==t.returnHash()){e.next=31;break}return console.log("golden ticket does not solve previous block, thus isn't valid..."),this.is_valid=0,e.abrupt("return",this);case 31:if(4==this.transactions[h].transaction.type)for(f=0;f<this.transactions[h].transaction.to.length;f++)this.transactions[h].transaction.to[f].isNonZeroAmount()&&4==this.transactions[h].transaction.to[f].type&&(this.block.ss++,this.block.sa=o(this.block.sa).plus(o(this.transactions[h].transaction.to[f].amt)).toFixed(8));for(m=0;m<this.transactions[h].transaction.from.length;m++)this.txs_hmap[this.transactions[h].transaction.from[m].add]=1;for(g=0;g<this.transactions[h].transaction.to.length;g++)this.txs_hmap[this.transactions[h].transaction.to[g].add]=1;case 34:h++,e.next=17;break;case 37:if(b=[],null==t){e.next=44;break}return e.next=41,t.calculateBlockPayments(p);case 41:(y=e.sent)&&(y.producer_share>0&&b.push(new c.slip(y.producer_publickey,y.producer_share,2)),y.miner_share>0&&b.push(new c.slip(y.miner_publickey,y.miner_share,2)),y.router_share>0&&b.push(new c.slip(y.router_publickey,y.router_share,2)),1==this.containsGoldenTicket()&&this.block.id>1&&(y.sproducer_share>0&&b.push(new c.slip(y.sproducer_publickey,y.sproducer_share,2)),y.srouter_share>=0&&b.push(new c.slip(y.srouter_publickey,y.srouter_share,2)),y.staker_share>=0&&(v=this.app.blockchain.index.stakers[y.staker_pos][y.staker_sid],u=this.returnNormalizedStakerPayment(v.slip.amt,this.sc,t.block.sa,t.block.ss),this.block.ss++,this.block.sa=o(this.block.sa).plus(u).toFixed(8),this.block.st=o(this.block.st).plus(o(y.staker_share)).minus(u).toFixed(8),b.push(new c.slip(y.staker_publickey,u,4))))),b.length>0&&((_=new c.transaction).transaction.from.push(new c.slip(this.app.wallet.returnPublicKey(),0,2)),_.transaction.to=b,_.transaction.type=2,_.transaction.id=a+this.transactions.length,_.msg=y,_=this.app.wallet.signTransaction(_),this.transactions.push(_));case 44:return this.block.merkle=this.returnMerkleRoot(),e.abrupt("return",this);case 46:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"calculateRebroadcasts",value:(h=n(regeneratorRuntime.mark((function e(){var a,r,n,i,s,c,l,u,d,p,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.length>0&&void 0!==h[0]&&h[0],a={reclaimed:"0.0",ss:0,sa:"0.0",rebroadcast:[],total_rebroadcast:0},1!=this.app.BROWSER&&1!=this.app.SPVMODE){e.next=5;break}return e.abrupt("return",a);case 5:if(!((r=this.block.id-this.app.blockchain.genesis_period-1)<1)){e.next=8;break}return e.abrupt("return",a);case 8:return n=o(0),i=this.app.blockchain.bid_bsh_hmap[r],e.next=12,this.app.storage.loadBlockByHash(i);case 12:for(s=e.sent,c=0;c<s.transactions.length;c++)for(l=0;l<s.transactions[c].transaction.to.length;l++)if((u=s.transactions[c].transaction.to[l]).bid=s.returnId(),u.tid=s.transactions[c].transaction.id,u.bsh=s.returnHash(),u.sid=l,o(u.amt).gt(0)&&(4==u.type&&(a.sa=o(a.sa).plus(u.amt),a.ss++),this.app.shashmap.validate_slip(u.returnSignatureSource(),this.block.id)))if(s.transactions[c].isRebroadcast(s,this,l)){for(a.total_rebroadcast++,null==(d=s.transactions[c].generateRebroadcastTransaction(this.block.creator,u.tid,u.sid,2))&&(console.log("ERROR 481029: issue generating rebroadcast transaction..."),t.exit()),p=0;p<d.transaction.from.length;p++)d.transaction.from[p].bid=this.block.id;a.rebroadcast.push(d)}else n=n.plus(o(u.amt)),a.reclaimed=n.toFixed(8);return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"containsGoldenTicket",value:function(){for(var e=0;e<this.transactions.length;e++)if(1==this.transactions[e].isGoldenTicket())return 1;return 0}},{key:"decryptTransactions",value:function(){for(var e=0;e<this.transactions.length;e++)1==this.transactions[e].involvesPublicKey(this.app.wallet.returnPublicKey())&&this.transactions[e].decryptMessage(this.app)}},{key:"returnFilename",value:function(){return this.block.ts+"-"+this.returnHash()+".blk"}},{key:"returnRoutingWorkNeeded",value:function(){return this.block.bf.current}},{key:"returnDifficulty",value:function(){return this.block.difficulty}},{key:"returnEmbeddedRoutingWork",value:function(){for(var e=o(0),t=0;t<this.transactions.length;t++)if(1==this.transactions[t].is_valid&&2!=this.transactions[t].transaction.type){var a=o(this.transactions[t].returnRoutingWorkAvailable(this.app,this.block.creator));1==this.transactions[t].transaction.type&&this.transactions[t].returnMessage().target!=this.prevbsh&&(a=o(0)),e=e.plus(a)}return e.toFixed(8)}},{key:"returnHash",value:function(){return""!=this.hash||(this.prehash=this.app.crypto.hash(this.returnFingerprint()),this.hash=this.app.crypto.hash(this.prehash+this.block.prevbsh)),this.hash}},{key:"returnId",value:function(){return this.block.id}},{key:"returnMaxTxId",value:function(){if(0!=this.maxtid)return this.maxtid;for(var e=0;e<this.transactions.length;e++)this.transactions[e].transaction.id>this.maxtid&&(this.maxtid=this.transactions[e].transaction.id);return this.maxtid}},{key:"returnMinTxId",value:function(){if(0!=this.mintid)return this.mintid;if(0==this.transactions.length)return this.app.blockchain.returnMinTxId();this.mintid=this.transactions[0].transaction.id;for(var e=1;e<this.transactions.length;e++)this.transactions[e].transaction.id<this.mintid&&(this.mintid=this.transactions[e].transaction.id);return this.mintid}},{key:"returnPaysplit",value:function(){return this.block.paysplit}},{key:"returnPowsplit",value:function(){return this.block.powsplit}},{key:"returnReclaimed",value:function(){return this.block.reclaimed}},{key:"returnFingerprint",value:function(){return JSON.stringify(this.block)}},{key:"returnNormalizedStakerPayment",value:function(e,t,a,r){if(o(t).eq(0))return"0";var n=o(a).div(o(r)),i=o(e).div(n);return o(t).times(i).toFixed(8)}},{key:"returnTreasury",value:function(){return this.block.mt}},{key:"runCallbacks",value:(p=n(regeneratorRuntime.mark((function e(t){var a,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:1,!this.confirmations||!this.callbacks){e.next=21;break}r=this.confirmations+1;case 3:if(!(r<=t)){e.next=21;break}n=0;case 5:if(!(n<this.callbacks.length)){e.next=18;break}if(e.prev=6,1!=a){e.next=10;break}return e.next=10,this.callbacks[n](this,this.transactions[this.callbacksTx[n]],r,this.app);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),console.log("ERROR 567567: ",e.t0);case 15:n++,e.next=5;break;case 18:r++,e.next=3;break;case 21:this.confirmations=t;case 22:case"end":return e.stop()}}),e,this,[[6,12]])}))),function(e){return p.apply(this,arguments)})},{key:"spendInputs",value:function(){for(var e=0;e<this.transactions.length;e++)for(var t=0;t<this.transactions[e].transaction.from.length;t++)this.transactions[e].transaction.from[t].amt>0&&this.app.shashmap.insert_slip(this.transactions[e].transaction.from[t].returnSignatureSource(),this.block.id);return 1}},{key:"unspendInputs",value:function(){for(var e=0;e<this.transactions.length;e++)for(var t=0;t<this.transactions[e].transaction.from.length;t++)this.transactions[e].transaction.from[t].amt>0&&this.app.shashmap.insert_slip(this.transactions[e].transaction.from[t].returnSignatureSource(),-1);return 1}},{key:"validate",value:(d=n(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s,l,u,d,p,h,f,m,g,b,y,v,_,w,x,k,S,P,E,C,A,M,T,j,O,D,I,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=this.block.prevbsh){e.next=2;break}return e.abrupt("return",1);case 2:return t="0",e.next=5,this.app.blockchain.returnBlockByHash(this.block.prevbsh,1);case 5:if(a=e.sent,1!=this.ghost){e.next=8;break}return e.abrupt("return",1);case 8:if(r=1,null==a){e.next=15;break}if(1!=a.ghost){e.next=12;break}return e.abrupt("return",1);case 12:0==a.transactions.length?0==(r=a.returnMaxTxId())&&(r=1):r=a.returnMaxTxId()+1,e.next=16;break;case 15:return e.abrupt("return",1);case 16:if(this.sc=o(a.block.st).div(this.app.blockchain.genesis_period).toFixed(8),this.block.id==a.block.id+1){e.next=20;break}return console.log("ERROR 482039: block id is not single increment over previous block"),e.abrupt("return",0);case 20:if(n=o(a.block.mt).plus(o(a.block.reclaimed)),i=o(n).div(this.app.blockchain.genesis_period).toFixed(8),n=n.minus(o(i)).toFixed(8),this.block.mt==n){e.next=27;break}return console.log("ERROR 410829: block treasury does not validate in new block"),console.log(this.block.mt+" -- vs -- "+n+" ---\x3e "+a.block.mt+" -- "+a.block.reclaimed),e.abrupt("return",0);case 27:if(this.block.difficulty==a.block.difficulty){e.next=30;break}return console.log("ERROR 571928: block difficulty does not validate in new block"),e.abrupt("return",0);case 30:if(this.block.paysplit==a.block.paysplit){e.next=33;break}return console.log("ERROR 571928: block paysplit does not validate in new block"),e.abrupt("return",0);case 33:if(this.block.powsplit==a.block.powsplit){e.next=36;break}return console.log("ERROR 571928: block difficulty does not validate in new block"),e.abrupt("return",0);case 36:if(s=this.app.burnfee.returnBurnFee(a,this),this.block.bf==s){e.next=40;break}return console.log("ERROR 571928: block difficulty does not validate in new block"),e.abrupt("return",0);case 40:if(!(a.block.ts>=this.block.ts)){e.next=43;break}return console.log("ERROR 729384: block timestamp not incremented from previous block"),e.abrupt("return",0);case 43:l=[],u=[],d=0,p=-1,h=-1,f=0,m=a.block.st,g=a.block.ss,b=a.block.sa,y=0;case 55:if(!(y<=this.transactions.length-1)){e.next=110;break}if(9==this.transactions[y].transaction.type&&(f=1),this.transactions[y].transaction.id==r+y){e.next=61;break}if(0!=f){e.next=61;break}return console.log("ERROR 517324: transaction ids are out-of-order when validating block - "+r+"-"+y+" ------- "+this.transactions[y].transaction.id),e.abrupt("return",0);case 61:if(1!=this.transactions[y].transaction.type){e.next=82;break}if(h=y,(v=this.transactions[y].returnMessage()).target==a.returnHash()){e.next=69;break}return console.log("ERROR 029312: golden ticket does not match prevblk hash"),e.abrupt("return",0);case 69:if(!(++d>1)){e.next=73;break}return console.log("ERROR 189842: two golden tickets in block"),e.abrupt("return",0);case 73:if(1!=this.app.blockchain.isFullySynced()||0!=this.app.BROWSER||0!=this.app.SPVMODE){e.next=82;break}return e.next=76,a.calculateBlockPayments(v);case 76:for((_=e.sent).producer_share>0&&u.push(new c.slip(_.producer_publickey,_.producer_share,2)),_.miner_share>0&&u.push(new c.slip(_.miner_publickey,_.miner_share,2)),_.router_share>0&&u.push(new c.slip(_.router_publickey,_.router_share,2)),1==this.containsGoldenTicket()&&this.block.id>1&&(_.sproducer_share>0&&u.push(new c.slip(_.sproducer_publickey,_.sproducer_share,2)),_.srouter_share>0&&u.push(new c.slip(_.srouter_publickey,_.srouter_share,2)),_.staker_share>0&&(w=this.app.blockchain.index.stakers[_.staker_pos][_.staker_sid].slip.amt,x=this.returnNormalizedStakerPayment(w,this.sc,a.block.sa,a.block.ss),m=o(m).plus(o(_.staker_share)).toFixed(8),m=o(m).minus(o(x)),u.push(new c.slip(_.staker_publickey,x,4)),this.app.shashmap.spend_slipidx(_.staker_slip,this.block.id),this.app.blockchain.index.stakers[_.staker_pos][_.staker_sid].paid=-1,this.app.blockchain.lowest_unspent_bid=this.app.blockchain.index.blocks[_.staker_pos].block.id,this.app.blockchain.lowest_unspent_pos=_.staker_pos)),k=0;k<u.length;k++)u[k].sid=k;case 82:if(2!=this.transactions[y].transaction.type){e.next=88;break}if(-1==p){e.next=86;break}return console.log("ERROR 581029: two block paymeet (type=2) transactions in block"),e.abrupt("return",0);case 86:for(p=y,S=0;S<this.transactions[y].transaction.to.length;S++)4==this.transactions[y].transaction.to[S].type&&this.transactions[y].transaction.to[S].isNonZeroAmount()&&(g++,b=o(b).plus(o(this.transactions[y].transaction.to[S].amt)).toFixed(8));case 88:if(4==this.transactions[y].transaction.type)for(P=0;P<this.transactions[y].transaction.to.length;P++)4==this.transactions[y].transaction.to[P].type&&this.transactions[y].transaction.to[P].isNonZeroAmount()&&(g++,b=o(b).plus(o(this.transactions[y].transaction.to[P].amt)).toFixed(8));E=0;case 90:if(!(E<this.transactions[y].transaction.from.length)){e.next=100;break}if(null==l[this.transactions[y].transaction.from[E].returnSignatureSource()]){e.next=96;break}for(console.log("ERROR 820493: multiple transactions spend same input detected"),console.log("\n\n\nTHESE ARE THE SLIPS: "),C=0;C<this.transactions.length;C++)for(A=0;A<this.transactions[C].transaction.from.length;A++)console.log(C+" -- "+A+" ==> "+JSON.stringify(this.transactions[C].transaction.from[A]));return e.abrupt("return",0);case 96:this.transactions[y].transaction.from[E].amt>0&&(l[this.transactions[y].transaction.from[E].returnSignatureSource()]=1);case 97:E++,e.next=90;break;case 100:if(this.transactions[y].validate(this.app,this.block.id)){e.next=107;break}return console.log("ERROR 174233: block contains invalid transaction: ".concat(y)),console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),console.log("!!!!!!!!!!!!    ERROR    !!!!!!!!!!!!!!"),console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),this.transactions[y].is_valid=0,e.abrupt("return",0);case 107:y++,e.next=55;break;case 110:if(!(h>-1)){e.next=172;break}if(-1!=p){e.next=116;break}return console.log("ERROR 697812: golden ticket in block, but not block payment transaction"),e.abrupt("return",0);case 116:if(1!=this.app.blockchain.isFullySynced()||0!=this.app.BROWSER||0!=this.app.SPVMODE){e.next=128;break}if(u.length==this.transactions[p].transaction.to.length){e.next=120;break}return console.log("ERROR 513234: golden ticket to slip length inaccurate"),e.abrupt("return",0);case 120:for(M=0;M<u.length;M++)u[M].bsh=this.transactions[p].transaction.to[M].bsh,u[M].bid=this.transactions[p].transaction.to[M].bid,u[M].tid=this.transactions[p].transaction.to[M].tid,u[M].sid=this.transactions[p].transaction.to[M].sid,this.transactions[p].transaction.to[M].lc=1;if(this.app.crypto.hash(JSON.stringify(u))!=this.app.crypto.hash(JSON.stringify(this.transactions[p].transaction.to))){e.next=124;break}e.next=128;break;case 124:return console.log("ERROR 840192: to slips in block fee transaction invalid"),console.log("RECOVERED SLIPS: ",u),console.log("TX TO SLIPS",this.transactions[p].transaction.to),e.abrupt("return",0);case 128:if(1!=this.app.blockchain.isFullySynced()||0!=this.app.BROWSER||0!=this.app.SPVMODE){e.next=172;break}return e.next=131,this.calculateRebroadcasts(this.transactions);case 131:if(T=e.sent,j=T.ss,O=T.sa,g-=j,b=o(b).minus(O).toFixed(8),g===this.block.ss){e.next=139;break}return console.log("ERROR 432810: total staked slips not accurate: "+g+" vs "+this.block.ss),e.abrupt("return",0);case 139:if(o(b).toFixed(8)===this.block.sa){e.next=142;break}return console.log("ERROR 432810: total staked amount not accurate: "+b+" vs "+this.block.sa),e.abrupt("return",0);case 142:if(o(m).toFixed(8)===this.block.st){e.next=145;break}return console.log("ERROR 432810: total staker treasury not accurate: "+m+" vs "+this.block.st),e.abrupt("return",0);case 145:if(t=o(t).plus(o(T.reclaimed)),o(this.block.reclaimed).eq(t)){e.next=149;break}return console.log("ERROR 241948: reclaimed funds do not match expected when validating"),e.abrupt("return",0);case 149:if(!((D=this.transactions.length-1)>0)){e.next=164;break}if(2==this.transactions[D].transaction.type&&D--,!(D>0)){e.next=164;break}I=T.rebroadcast.length-1;case 155:if(!(I>=0)){e.next=164;break}if(T.rebroadcast[I].transaction.id=this.transactions[D].transaction.id,JSON.stringify(T.rebroadcast[I].transaction)==JSON.stringify(this.transactions[D].transaction)){e.next=160;break}return console.log("ERROR 549280: rebroadcast txs JSON outputs not as expected"),e.abrupt("return",0);case 160:D--;case 161:I--,e.next=155;break;case 164:R=D;case 165:if(!(R>0)){e.next=172;break}if(5!=this.transactions[R].transaction.type&&6!=this.transactions[R].transaction.type&&7!=this.transactions[R].transaction.type){e.next=169;break}return console.log("ERROR 004222: block chains rebroadcast transactions outside appropriate range"),e.abrupt("return",0);case 169:R--,e.next=165;break;case 172:if(this.block.merkle==this.returnMerkleRoot()){e.next=175;break}return console.log("ERROR 258102: merkle root does not match provided root"),e.abrupt("return",0);case 175:return this.validates=1,e.abrupt("return",1);case 177:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"calculateBlockPayments",value:(u=n(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s,c,l,u,d,p,h,f,m,g,b,y,v,_,w,x,k,S,P,E,C,A,M,T,j,O,D,I,R,B,q,L,N,F,U,$,z,H,G,K,W,V,Y,J,X,Q,Z,ee,te,ae,re,ne,ie,se,oe,ce,le,ue,de,pe,he,fe,me,ge,be,ye=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ye.length>0&&void 0!==ye[0]?ye[0]:null,0!=this.is_valid){e.next=3;break}return e.abrupt("return",{});case 3:if((a={}).producer_publickey="",a.producer_share="0.0",a.miner_publickey="",a.miner_share="0.0",a.router_publickey="",a.router_share="0.0",a.sproducer_publickey="",a.sproducer_share="0.0",a.srouter_publickey="",a.srouter_share="0.0",a.staker_publickey="",a.staker_share="0.0",a.staker_bid=-1,a.staker_sid=-1,a.staker_pos=-1,a.staker_slip=null,r=null,n=null,i=null,s=null,""==this.block.prevbsh){e.next=29;break}return r=this.block.prevbsh,e.next=28,this.app.blockchain.returnBlockByHash(r,1);case 28:n=e.sent;case 29:if(null==n){e.next=34;break}return i=n.block.prevbsh,e.next=33,this.app.blockchain.returnBlockByHash(i,1);case 33:s=e.sent;case 34:if(c="",l="",u="",null!=this.block.creator&&(c=this.block.creator),null!=t&&(l=t.publickey),d=0,p=0,h=0,null!=n&&(d=this.app.burnfee.returnWorkNeeded(n.block.ts,this.block.ts,n.block.bf),p=this.returnEmbeddedRoutingWork(),h=this.returnFees(),this.sc=o(n.block.st).div(this.app.blockchain.genesis_period).toFixed(8)),this.mc=o(this.block.mt).div(this.app.blockchain.genesis_period).toFixed(8),f=o(p).minus(o(d)),m=o(h).minus(f).plus(this.mc),g=m.div(2).toFixed(8),b=m.minus(o(g)).toFixed(8),y="",null!=n&&(y=n.block.creator),v="",_=-1,w=-1,x=-1,k=null,S="",P=0,E=0,C=0,null!=s&&(P=this.app.burnfee.returnWorkNeeded(s.block.ts,n.block.ts,s.block.bf),E=this.returnEmbeddedRoutingWork(),C=this.returnFees()),A=0,M=0,T=0,j=0,null!=n&&(A=o(E).minus(o(P)),n.mc=o(n.block.mt).div(this.app.blockchain.genesis_period).toFixed(8),M=o(C).minus(A).plus(n.mc),T=M.div(2).toFixed(8),j=M.minus(o(T)).toFixed(8)),O="0",null!=t&&null!=t.random&&(O=t.random),D=this.app.crypto.hash(O).slice(0,12),I=this.app.crypto.hash(D).slice(0,12),R=this.app.crypto.hash(I).slice(0,12),B=this.app.crypto.hash(R).slice(0,12),o(b).gt(0)){for(q="ffffffffffff",L=parseInt(D,16),N=parseInt(q,16),F=L/N,U=o(h).times(F),$=-1,z=o(0),H=0,G=0;G<this.transactions.length&&0==H;G++)z.plus(o(this.transactions[G].returnFees(this.app))),z.gte(U)&&(H=1,$=G);if(-1==$)u=this.block.creator;else if(0==(K=this.transactions[$]).transaction.path.length&&(u=K.transaction.from[0].add),W=I,V=parseInt(W,16),Y=V/N,J=K.transaction.path.length,K.returnFees(this.app),0==Y)u=K.transaction.path[0].to;else if(1==F)u=K.transaction.path[J].to;else for(X=J,Math.pow(2,X-1),Q=X*Y,Z=0;Z<J;Z++)2-1/Math.pow(2,Z-1)<=Q&&(u=K.transaction.path[Z].to)}if(ee=this.app.blockchain.returnWinningStaker(t,R,this.block.id),v=ee.publickey,_=ee.staker_bid,w=ee.staker_sid,x=ee.staker_pos,k=ee.staker_slip,o(j).gt(0)){for(te="ffffffffffff",ae=parseInt(R,16),re=parseInt(te,16),ne=ae/re,ie=o(C).times(ne),se=-1,oe=o(0),ce=0,le=0;le<n.transactions.length&&0==ce;le++)oe.plus(o(n.transactions[le].returnFees(this.app))),oe.gte(ie)&&(ce=1,se=le);if(-1==se)S=n.block.creator;else if(0==(ue=n.transactions[se]).transaction.path.length)S=ue.transaction.from[0].add;else if(de=B,pe=parseInt(de,16),he=pe/re,fe=ue.transaction.path.length,ue.returnFees(this.app),0==he)S=ue.transaction.path[0].to;else if(1==ne)S=ue.transaction.path[fe].to;else for(me=fe,Math.pow(2,me-1),ge=me*he,be=0;be<fe;be++)2-1/Math.pow(2,be-1)<=ge&&(S=ue.transaction.path[be].to)}return a.producer_publickey=c,a.miner_publickey=l,a.router_publickey=u,a.staker_publickey=v,a.srouter_publickey=S,a.sproducer_publickey=y,a.producer_share=f.toFixed(8),a.miner_share=g,a.staker_share=T,a.router_share=b,a.sproducer_share=A.toFixed(8),a.srouter_share=j,a.staker_share=T,a.staker_share=T,a.staker_pos=x,a.staker_bid=_,a.staker_sid=w,a.staker_slip=k,a.total_fees_in_block_block1=h,a.total_work_needed_block1=d,a.total_work_available_block1=p,a.total_fees_in_block_block2=C,a.total_work_needed_block2=P,a.total_work_available_block2=E,e.abrupt("return",a);case 104:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"returnFees",value:function(){for(var e=o(0),t=0;t<this.transactions.length;t++)e=e.plus(o(this.transactions[t].returnFees(this.app)));return e.toFixed(8)}},{key:"returnBlockFileData",value:function(){var e={block:JSON.parse(JSON.stringify(this.block)),transactions:JSON.parse(JSON.stringify(this.transactions))};return JSON.stringify(e)}},{key:"returnBlockHeaderData",value:function(){var e={block:JSON.parse(JSON.stringify(this.block))};return JSON.stringify(e)}},{key:"returnLiteBlock",value:function(e,t){for(var a=[],r=0;r<this.transactions.length;r++){for(var n=0,i=0;i<t.length;i++)this.transactions[r].involvesPublicKey(t[i])&&(n=1,i=t.length);if(1==n)a.push(this.transactions[r]);else{var s=new c.transaction;s.transaction.id=this.transactions[r].transaction.id,s.transaction.type=9,s.transaction.r=1,s.transaction.sig=this.app.crypto.hash(this.transactions[r].returnSignatureSource(this.app)),delete s.transaction.m,delete s.transaction.ps,delete s.transaction.ts,delete s.transaction.ver,delete s.transaction.path,delete s.transaction.msg,delete s.fees_total,delete s.work_available_to_me,delete s.work_available_to_creator,delete s.work_cumulative,delete s.msg,delete s.dmsg,delete s.size,delete s.is_valid,delete s.atr_trapdoor,delete s.atr_rebroadcasting_limit,delete s.may_be_removed_from_block,a.push(s)}}var o=new c.block;return o.block=Object.assign({},this.block),o.transactions=a,o}},{key:"returnMerkleRoot",value:function(){if(0==this.transactions.length&&(1==this.app.BROWSER||1==this.app.SPVMODE))return this.block.merkle;for(var e="",t=[],a=0;a<this.transactions.length;a++)9==this.transactions[a].transaction.type?t.push(this.transactions[a].transaction.sig):t.push(this.app.crypto.hash(this.transactions[a].returnSignatureSource(this.app)));for(;""==e;){var r=[];if(t.length<=2)e=1==t.length?t[0]:this.app.crypto.hash(""+t[0]+t[1]);else{for(var n=0;n<t.length;n++)n<=t.length-2?(r.push(this.app.crypto.hash(""+t[n]+t[n+1])),n++):r.push(t[n]);t=r}}return e}},{key:"hasKeylistTransactions",value:function(e){for(var t=0;t<e.length;t++)if(1==this.txs_hmap[e[t]])return!0;return!1}}])&&s(a.prototype,r),l&&s(a,l),e}();e.exports=l}).call(this,a(12))},function(e,t,a){(function(t){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}saito=a(5);a(40);var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.index={},this.index.blocks=[],this.index.paths=[],this.index.stakers=[],this.bsh_lc_hmap=[],this.bsh_bid_hmap=[],this.bid_bsh_hmap=[],this.bsh_ts_hmap=[],this.lc_pos_set=!1,this.lc_pos=0,this.last_lc_pos=0,this.process_blocks=1,this.run_callbacks=1,this.callback_limit=50,1==this.app.BROWSER&&(this.callback_limit=10),this.fork_id="",this.fork_id_mod=10,this.genesis_ts=0,this.genesis_bid=0,this.genesis_period=1e5,this.last_bsh="",this.last_bid=0,this.last_ts=0,this.last_bf=0,this.lowest_acceptable_ts=0,this.lowest_acceptable_bsh="",this.lowest_acceptable_bid=0,this.indexing_active=0,this.loading_blocks_from_disk_active=1,this.lowest_unspent_bid=0,this.lowest_unspent_pos=0,this.added_block=0}var a,r,o,c,l,u,d,p,h,f,m,g,b,y,v,_;return a=e,(r=[{key:"addHashToBlockchain",value:(_=n(regeneratorRuntime.mark((function e(t,a,r,n){var i,s,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>4&&void 0!==o[4]&&o[4],this.indexing_active=1,(i=new saito.block(this.app)).block.ts=a,i.block.prevbsh=n,i.block.id=r,i.hash=t,i.ghost=1,s=this.binaryInsert(this.index.blocks,i,(function(e,t){return e.block.ts-t.block.ts})),this.index.paths.splice(s,0,[]),this.index.stakers.splice(s,0,[]),this.bsh_lc_hmap[i.hash]=0,this.bsh_bid_hmap[i.hash]=r,s<=this.last_lc_pos&&this.index.blocks.length>1&&this.last_lc_pos++,s<=this.lc_pos&&this.index.blocks.length>1?this.lc_pos++:null==this.bid_bsh_hmap[r]&&(1==this.bsh_lc_hmap[n]||this.last_bsh==n&&null==this.bid_bsh_hmap[r])&&(this.bsh_lc_hmap[i.hash]=1,this.lc_pos=s),1==this.bsh_lc_hmap[i.hash]&&(this.bid_bsh_hmap[r]=i.hash),this.bsh_ts_hmap[i.hash]=a,1==this.index.blocks.length&&(this.bsh_lc_hmap[i.hash]=1),this.indexing_active=0,e.abrupt("return");case 20:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r){return _.apply(this,arguments)})},{key:"addBlockToBlockchain",value:(v=n(regeneratorRuntime.mark((function e(t){var a,r,n,i,s,o,c,l,u,d,p,h,f,m,g,b,y,v,_,w,x,k,S,P,E,C,A,M=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=M.length>1&&void 0!==M[1]&&M[1],1!=this.app.BROWSER){e.next=7;break}if(0!=this.process_blocks){e.next=7;break}return console.log("---------------------------------------------"),console.log("-- inactive tab, bailing in blockchain.js -- "),console.log("---------------------------------------------"),e.abrupt("return");case 7:if(this.indexing_active=1,0!=t.is_valid){e.next=12;break}return console.log("ERROR 178234: block is not valid when adding to chain. terminating..."),this.indexing_active=0,e.abrupt("return");case 12:if(!(t.block.ts<this.genesis_ts||t.block.id<this.genesis_bid)||1==a){e.next=16;break}return console.log("ERROR 792837: block id precedes genesis period. terminating..."),this.indexing_active=0,e.abrupt("return");case 16:if(!this.isHashIndexed(t.returnHash())){e.next=20;break}return console.log("ERROR 582039: blockchain already contains this block hash. terminating..."),this.indexing_active=0,e.abrupt("return");case 20:if(this.last_lc_pos=this.lc_pos,t.block.ts<this.lowest_acceptable_ts&&(this.lowest_acceptable_ts=t.block.ts),0==this.lowest_acceptable_ts?(this.lowest_acceptable_bid=t.block.id,this.lowest_acceptable_bsh=t.returnHash(),this.lowest_acceptable_ts=this.last_ts,0==this.lowest_acceptable_ts&&(this.lowest_acceptable_ts=t.block.ts)):this.lowest_acceptable_ts>t.block.ts&&(a||(this.lowest_acceptable_ts=t.block.ts)),t.block.ts>this.lowest_acceptable_ts&&(this.isHashIndexed(t.block.prevbsh)||1==this.lc_pos_set&&t.block.id>this.index.blocks[this.lc_pos].block.bid-this.genesis_period&&((r={}).request="missing block",r.data={},r.data.hash=t.block.prevbsh,r.data.last_hash=this.returnLatestBlockHash(),this.app.network.sendRequest(r.request,JSON.stringify(r.data)))),(n=this.binaryInsert(this.index.blocks,t,(function(e,t){return e.block.ts-t.block.ts})))<=this.last_lc_pos&&this.index.blocks.length>1&&this.last_lc_pos++,n<=this.lc_pos&&this.index.blocks.length>1&&this.lc_pos++,this.bsh_bid_hmap[t.returnHash()]=t.block.id,this.bsh_ts_hmap[t.returnHash()]=t.block.ts,this.index.paths.splice(n,0,[]),this.index.stakers.splice(n,0,[]),i=0,s=0,o=!1,c=[],l=[],u=[],d=[],1==this.index.blocks.length&&(i=1,this.lc_pos=n,this.last_bsh=t.returnHash(),this.last_bid=t.block.id,this.last_bf=t.block.bf,this.last_ts=t.block.ts,c.push(t.returnHash()),u.push(n)),this.last_bsh==t.block.prevbsh&&this.index.blocks.length>1&&1==this.bsh_lc_hmap[this.last_bsh]&&(i=1,s=this.last_lc_pos,c.push(t.returnHash()),u.push(n)),0!=i){e.next=110;break}if(!(t.block.id>=this.index.blocks[this.lc_pos].block.id)){e.next=109;break}if(p=this.index.blocks[this.lc_pos],h=this.index.blocks[n],t.block.prevbsh!=p.returnHash()){e.next=50;break}i=1,c.push(t.returnHash()),u.push(n),e.next=107;break;case 50:f=this.lc_pos,m=n,g=0,b=0,y=p.block.bf,v=h.block.bf,_=p.block.ts,w=h.block.ts,x=p.block.prevbsh,k=h.block.prevbsh,S=null,P=null,l.push(p.returnHash()),d.push(this.lc_pos),c.push(t.returnHash()),u.push(n),S=w>=_?m-1:f-1;case 70:if(!(S>=0)){e.next=106;break}if((E=this.index.blocks[S]).block.ts,E.block.bf,P=E.returnHash(),E.block.prevbsh,P!=x||P!=k){e.next=82;break}o=!0,s=S,S=-1,e.next=104;break;case 82:if(P==x&&(g++,x=this.index.blocks[S].block.prevbsh,y+=this.index.blocks[S].block.bf,l.push(P),d.push(S)),P==k&&(k=this.index.blocks[S].block.prevbsh,b++,v+=this.index.blocks[S].block.bf,c.push(P),u.push(S)),s=S,S--,1!=s){e.next=95;break}if(""!=k){e.next=95;break}return e.next=90,this.addBlockToBlockchainSuccess(t,n,0);case 90:return e.next=92,this.handleTransactionSlips(t,n);case 92:return this.app.mempool.removeBlockAndTransactions(t),this.indexing_active=0,e.abrupt("return");case 95:if(0!=s){e.next=104;break}if(k==x){e.next=104;break}return e.next=99,this.addBlockToBlockchainSuccess(t,n,0);case 99:return e.next=101,this.handleTransactionSlips(t,n);case 101:return this.app.mempool.removeBlockAndTransactions(t),this.indexing_active=0,e.abrupt("return");case 104:e.next=70;break;case 106:b>g&&v>=y&&1==o&&(i=1);case 107:e.next=110;break;case 109:if(t.block.prevbsh==this.last_bsh&&""!=t.block.prevbsh){for(C=n+1;C<this.index.blocks.length;C++)this.bsh_lc_hmap[this.index.blocks[C].returnHash()]=i,this.onChainReorganization(this.index.blocks[C].block.id,this.index.blocks[C].returnHash(),0,n);i=1,c.push(t.returnHash()),u.push(n)}case 110:if(this.bsh_lc_hmap[this.index.blocks[n].returnHash()]=i,1==i&&(this.last_bsh=this.index.blocks[n].returnHash(),this.last_bf=this.index.blocks[n].block.bf,this.last_ts=this.index.blocks[n].block.ts,this.last_bid=this.index.blocks[n].block.id,this.lc_pos=n,this.lc_pos_set=!0),1!=i||1!=this.index.blocks.length){e.next=124;break}for(A=0;A<t.transactions.length;A++)try{this.app.shashmap.insert_new_transaction(t,t.transactions[A])}catch(e){}return this.app.options||(this.app.options={}),this.app.options.blockchain||(this.app.options.blockchain={}),this.app.options.blockchain.original_genesis_hash||"e1hpHsuiRPbzXdCf7smXvAFCnqpvZXcjtxZLMxcATat1"===this.app.wallet.returnPublicKey()&&(this.app.options.blockchain.original_genesis_ts=t.block.ts,this.app.options.blockchain.original_genesis_hash=t.returnHash(),console.log("signing message 1"),this.app.options.blockchain.original_genesis_sig=this.app.crypto.signMessage("alertreset"+t.block.ts+t.returnHash(),this.app.wallet.returnPrivateKey()),console.log("signing message 2"),this.app.storage.saveOptions(),console.log("CREATED FIRST BLOCK: "),console.log("CREATED FIRST BLOCK: "+this.app.options.blockchain.original_genesis_hash),console.log("CREATED FIRST BLOCK: "+this.app.options.blockchain.original_genesis_sig)),e.next=119,this.validate(t,n,1,[t.returnHash()],[],[n],[],a);case 119:return e.next=121,this.handleTransactionSlips(t,n);case 121:return this.app.mempool.removeBlockAndTransactions(t),this.indexing_active=0,e.abrupt("return");case 124:if(0!=i){e.next=132;break}return e.next=127,this.addBlockToBlockchainSuccess(t,n,0);case 127:return e.next=129,this.handleTransactionSlips(t,n);case 129:return this.app.mempool.removeBlockAndTransactions(t),this.indexing_active=0,e.abrupt("return");case 132:return c.reverse(),l.reverse(),u.reverse(),d.reverse(),e.next=138,this.validate(t,n,i,c,l,u,d,a);case 138:return e.next=140,this.handleTransactionSlips(t,n);case 140:this.app.mempool.removeBlockAndTransactions(t),this.indexing_active=0;case 142:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"initialize",value:(y=n(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null!=this.app.options.blockchain&&null!=this.app.options.blockchain.genesis_period&&(this.last_bid=this.app.options.blockchain.last_bid,this.last_bsh=this.app.options.blockchain.last_bsh,this.last_ts=this.app.options.blockchain.last_ts,this.last_bf=this.app.options.blockchain.last_bf,this.genesis_ts=this.app.options.blockchain.genesis_ts,this.genesis_bid=this.app.options.blockchain.genesis_bid,this.genesis_period=this.app.options.blockchain.genesis_period,this.lowest_acceptable_ts=this.app.options.blockchain.lowest_acceptable_ts,this.lowest_acceptable_bsh=this.app.options.blockchain.lowest_acceptable_bsh,this.lowest_acceptable_bid=this.app.options.blockchain.lowest_acceptable_bid),this.loading_blocks_from_disk_active=1,e.next=5,this.app.storage.loadBlocksFromDisk(2*this.genesis_period);case 5:this.loading_blocks_from_disk_active=0,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return y.apply(this,arguments)})},{key:"isFullySynced",value:function(){var e=this.last_bid-this.genesis_period;return e<0?1==this.index.blocks[0].block.id:(this.index.blocks.length>=this.genesis_period||e<=0)&&(e>this.lowest_acceptable_bid||e<=0&&1==this.lowest_acceptable_bid)}},{key:"handleTransactionSlips",value:(b=n(regeneratorRuntime.mark((function e(t,a){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=0;r<t.transactions.length;r++){try{this.app.shashmap.insert_new_transaction(t,t.transactions[r])}catch(e){}if(4==t.transactions[r].transaction.type||2==t.transactions[r].transaction.type)for(n=0;n<t.transactions[r].transaction.to.length;n++)4==t.transactions[r].transaction.to[n].type&&(i=new saito.slip(t.transactions[r].transaction.to[n].add,t.transactions[r].transaction.to[n].amt,t.transactions[r].transaction.to[n].type,t.transactions[r].transaction.to[n].bid,t.transactions[r].transaction.to[n].tid,t.transactions[r].transaction.to[n].sid,t.transactions[r].transaction.to[n].bsh,t.transactions[r].transaction.to[n].lc),this.addStakingSlip(t,i,a))}case 1:case"end":return e.stop()}}),e,this)}))),function(e,t){return b.apply(this,arguments)})},{key:"validate",value:(g=n(regeneratorRuntime.mark((function e(t,a,r,n,i,s,o){var c,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=l.length>7&&void 0!==l[7]&&l[7],!(i.length>0)){e.next=6;break}return e.next=4,this.unwindChain(t,a,r,n,i,c,0,i.length-1,s,o);case 4:e.next=8;break;case 6:return e.next=8,this.windChain(t,a,r,n,i,c,0,0,s,o);case 8:return e.abrupt("return");case 9:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r,n,i,s){return g.apply(this,arguments)})},{key:"windChain",value:(m=n(regeneratorRuntime.mark((function e(a,r,n,i,s,o,c,l,u,d){var p,h,f,m,g,b,y,v,_,w,x,k;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=i[l],a.returnHash()!==p){e.next=37;break}if(h=0,1!=a.validates){e.next=7;break}h=1,e.next=10;break;case 7:return e.next=9,a.validate();case 9:h=e.sent;case 10:if(!h){e.next=17;break}for(f=0;f<a.transactions.length;f++)try{this.app.shashmap.spend_transaction(a.transactions[f],a.block.id)}catch(e){}return e.next=14,this.addBlockToBlockchainSuccess(a,r,n,o);case 14:return e.abrupt("return");case 17:if(0!=l){e.next=29;break}if(!(s.length>0)){e.next=24;break}return e.next=21,this.windChain(a,r,n,s,i,o,1,0,d,u);case 21:return e.abrupt("return");case 24:return e.next=26,this.addBlockToBlockchainFailure(a,r,n,o);case 26:return e.abrupt("return");case 27:e.next=35;break;case 29:for(m=[],g=[],b=l;b<i.length;b++)m.push(i[b]),g.push(u[b]);return e.next=34,this.unwindChain(a,r,n,s,m,o,1,m.length,d,g);case 34:return e.abrupt("return");case 35:e.next=79;break;case 37:return e.next=39,this.returnBlockByHashFromMemoryOrDisk(p);case 39:if(null==(y=e.sent)&&(console.log("ERROR 620394: block does not exist on disk that should. terminating"),t.exit()),v=0,1!=y.validates){e.next=46;break}v=1,e.next=49;break;case 46:return e.next=48,y.validate();case 48:v=e.sent;case 49:if(!v){e.next=69;break}for(this.onChainReorganization(p,y.block.id,1,u[l]),_=0;_<y.transactions.length;_++)try{shashmap.spend_transaction(y.transactions[_],y.block.id)}catch(e){}if(l!=i.length-1){e.next=64;break}if(0!=c){e.next=59;break}return e.next=56,this.addBlockToBlockchainSuccess(a,r,n,o);case 56:return e.abrupt("return");case 59:return e.next=61,this.addBlockToBlockchainFailure(a,r,n,o);case 61:return e.abrupt("return");case 62:e.next=67;break;case 64:return e.next=66,this.windChain(a,r,n,i,s,o,c,l+1,u,d);case 66:return e.abrupt("return");case 67:e.next=79;break;case 69:if(0!=l){e.next=74;break}return e.next=72,this.windChain(a,r,n,s,[],o,1,0,d,[]);case 72:e.next=79;break;case 74:for(w=[],x=[],k=l;k<i.length;k++)w.push(i[k]),x.push(u[k]);return e.next=79,this.unwindChain(a,r,n,s,w,o,1,w.length-1,d,x);case 79:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r,n,i,s,o,c,l){return m.apply(this,arguments)})},{key:"unwindChain",value:(f=n(regeneratorRuntime.mark((function e(a,r,n,i,s,o,c,l,u,d){var p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s.length>0)){e.next=15;break}return e.next=3,this.returnBlockByHashFromMemoryOrDisk(s[l]);case 3:if(null==(p=e.sent)&&(console.log("ERROR 721058: cannot find block that should exist on disk..."),console.log(" missing: "+s[l]),t.exit()),this.onChainReorganization(p.returnHash(),p.block.id,0,d[l]),0!=l){e.next=11;break}return e.next=9,this.windChain(a,r,n,i,s,o,c,0,u,d);case 9:e.next=13;break;case 11:return e.next=13,this.unwindChain(a,r,n,i,s,o,c,l-1,u,d);case 13:e.next=17;break;case 15:return e.next=17,this.windChain(a,r,n,i,s,o,c,0,u,d);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,a,r,n,i,s,o,c,l){return f.apply(this,arguments)})},{key:"returnLastSharedBlockId",value:function(e,t){if(null==e||""==e)return 0;if(e.length<2&&!(t>0))return 0;for(var a=t;a>=0;a--)a%this.fork_id_mod==0&&(t=a,a=-1);for(var r=this.last_bid,n=0;n<e.length/2;n++){var i=e.substring(2*n,2*n+2),s=t;if(0==n&&(s=t-0),1==n&&(s=t-10),2==n&&(s=t-20),3==n&&(s=t-30),4==n&&(s=t-40),5==n&&(s=t-50),6==n&&(s=t-75),7==n&&(s=t-100),8==n&&(s=t-200),9==n&&(s=t-500),10==n&&(s=t-1e3),11==n&&(s=t-5e3),12==n&&(s=t-1e4),13==n&&(s=t-5e4),r<s);else{var o=this.returnHashByBlockId(s);if(""==o)return 0;if(o.substring(0,2)==i)return s}}return 0}},{key:"returnLongestChainIndexPosArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;if(0==this.index.blocks.length)return[];if(this.index.blocks.length<e&&(e=this.index.blocks.length),0==e)return[];var t=[],a=this.lc_pos;t.push(a);for(var r=0;r<e;r++){var n=a-1,i=0;if(-1==n)r=e+1;else for(;n>=0&&0==i;)this.index.blocks[n].returnHash()==this.index.blocks[a].block.prevbsh?(t.push(n),i=1,a=n):n--}return t}},{key:"updateForkId",value:function(e){if(null==e)return this.fork_id;for(var t=e.block.id,a="",r=this.index.blocks.length-1,n=t;n>=0;n--)n%this.fork_id_mod==0&&(t=n,n=-1);for(var i=0,s=0;0==s&&i<this.genesis_period;){var o=t-i;-1==(r=this.returnLongestChainIndexArray(o,r))||o<0?s=1:a+=this.index.hash[r].substring(0,2),1e4==i&&(i=5e4),5e3==i&&(i=1e4),1e3==i&&(i=5e3),500==i&&(i=1e3),200==i&&(i=500),100==i&&(i=200),75==i&&(i=100),50==i&&(i=75),40==i&&(i=50),30==i&&(i=40),20==i&&(i=30),10==i&&(i=20),0==i&&(i=10),(i>this.genesis_period||5e4==i)&&(s=1)}this.fork_id=a}},{key:"addBlockToBlockchainSuccess",value:(h=n(regeneratorRuntime.mark((function e(t,a,r){var n,i,s,o,c,l,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>3&&void 0!==u[3]&&u[3],t.decryptTransactions(this.app),e.next=4,this.app.storage.saveBlock(t,r);case 4:if(this.onChainReorganization(t.returnHash(),t.block.id,r,a),1==r&&(this.lc_pos_set=!0,this.lc_pos=a),this.app.network.propagateBlock(t),n){e.next=27;break}if(this.app.wallet.processPayments(t,r),1!=this.run_callbacks){e.next=27;break}if(t.affixCallbacks(0),1!=r||n){e.next=26;break}i=this.returnLongestChainIndexPosArray(this.callback_limit),s=i.length,i.reverse(),o=0;case 16:if(!(o<i.length&&o<=this.callback_limit)){e.next=26;break}if(null==(c=this.index.blocks[i[o]])){e.next=23;break}return l=1,c.block.id<this.last_bid&&c.block.ts<this.last_ts&&1==r&&(l=0),e.next=23,c.runCallbacks(s-o,l);case 23:o++,e.next=16;break;case 26:this.app.modules.onNewBlock(t,r);case 27:1==r&&this.saveBlockchain(t),this.updateGenesisBlock(t,a),n||this.app.miner.startMining(t),this.resendPendingTransactions();case 31:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return h.apply(this,arguments)})},{key:"resendPendingTransactions",value:function(){this.app.wallet.rebroadcastPendingTransactions()}},{key:"addBlockToBlockchainFailure",value:(p=n(regeneratorRuntime.mark((function e(t,a,r){var n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>3&&void 0!==i[3]?i[3]:no,this.lc_pos=this.last_lc_pos,this.onChainReorganization(t.returnHash(),t.block.id,0,a),delete this.bsh_lc_hmap[t.returnHash()],delete this.bsh_bid_hmap[t.returnHash()],delete this.bsh_ts_hmap[t.returnHash()],this.app.miner.stopMining(),null!=(n=this.returnLatestBlock())&&this.app.miner.startMining(n),this.resendPendingTransactions(),e.abrupt("return",1);case 11:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return p.apply(this,arguments)})},{key:"binaryInsert",value:function(e,t,a,r){for(var n=0,i=e.length;n<i;){var s=n+i>>1,o=a(t,e[s]);if(0===o){n=s,i=s;break}o<0?i=s:n=s+1}return r||e.splice(n,0,t),n}},{key:"isHashIndexed",value:function(e){return this.bsh_bid_hmap[e]>0}},{key:"onChainReorganization",value:function(e,t,a,r){this.bsh_lc_hmap[e]=a,0==a?(delete this.bid_bsh_hmap[t],this.lowest_unspent_bid=0,this.lowest_unspent_pos=0):this.bid_bsh_hmap[t]=e;for(var n=this.index.blocks[r].block.prevbsh,i=t-1,s=-1,o=r-1;o>=0&&this.index.blocks[o].block.id>=i;o--)n==this.index.blocks[o].returnHash()&&(s=o);this.updateStakingSlip(r,s,a),this.app.wallet.onChainReorganization(e,t,a,r),this.app.modules.onChainReorganization(e,t,a,r)}},{key:"resetBlockchainOptions",value:function(){this.last_bid="",this.last_bsh="",this.last_ts=0,this.last_bf=0,this.genesis_ts=0,this.genesis_bid=0,this.lowest_acceptable_ts=0,this.lowest_acceptable_bsh=0,this.lowest_acceptable_bid=0,this.saveBlockchain()}},{key:"returnLatestBlock",value:function(){return 0==this.index.blocks.length?null:this.index.blocks[this.lc_pos]}},{key:"returnLatestBlockId",value:function(){var e=this.returnLatestBlock();return null==e?"":e.block.id}},{key:"returnLatestBlockHash",value:function(){var e=this.returnLatestBlock();return null==e?"":e.returnHash()}},{key:"returnLatestBlockTimestamp",value:function(){var e=this.returnLatestBlock();return null==e||null==e.block?0:e.block.ts}},{key:"returnBlockByHashFromBlockIndex",value:function(e){if(this.isHashIndexed(e))for(var t=this.index.blocks.length-1;t>=0;t--)if(this.index.blocks[t].returnHash()==e)return this.index.blocks[t];return null}},{key:"returnBlockByHashFromMemoryOrDisk",value:(d=n(regeneratorRuntime.mark((function e(t){var a,r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]?n[1]:0,e.next=3,this.returnBlockByHash(t,a);case 3:if(null!=(r=e.sent)){e.next=9;break}return r=this.returnBlockByHashFromDisk(t),e.abrupt("return",r);case 9:return e.abrupt("return",r);case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return d.apply(this,arguments)})},{key:"returnBlockByHash",value:(u=n(regeneratorRuntime.mark((function e(t){var a,r,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.length>1&&void 0!==n[1]?n[1]:0,!this.isHashIndexed(t)){e.next=18;break}r=this.index.blocks.length-1;case 3:if(!(r>=0)){e.next=18;break}if(this.index.blocks[r].returnHash()!==t){e.next=15;break}e.t0=a,e.next=0===e.t0?8:1===e.t0?9:14;break;case 8:return e.abrupt("return",this.index.blocks[r]);case 9:if(0!=this.index.blocks[r].transactions.length){e.next=13;break}return e.next=12,this.app.storage.loadBlockByHash(t);case 12:return e.abrupt("return",e.sent);case 13:case 14:return e.abrupt("return",this.index.blocks[r]);case 15:r--,e.next=3;break;case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"returnBlockByHashFromDisk",value:(l=n(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isHashIndexed(t)){e.next=10;break}a=this.index.blocks.length-1;case 2:if(!(a>=0)){e.next=10;break}if(this.index.blocks[a].returnHash()!=t){e.next=7;break}return e.next=6,this.app.storage.loadBlockByHash(t);case 6:return e.abrupt("return",e.sent);case 7:a--,e.next=2;break;case 10:return e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"returnBlockById",value:(c=n(regeneratorRuntime.mark((function e(t){var a,r,n,i=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=i.length>1&&void 0!==i[1]?i[1]:0,null!=(r=this.bid_bsh_hmap[t])){e.next=4;break}return e.abrupt("return",null);case 4:if(!this.isHashIndexed(r)){e.next=21;break}n=this.index.blocks.length-1;case 6:if(!(n>=0)){e.next=21;break}if(this.index.blocks[n].returnHash()!=r){e.next=18;break}e.t0=a,e.next=0===e.t0?11:1===e.t0?12:17;break;case 11:return e.abrupt("return",this.index.blocks[n]);case 12:if(0!=this.index.blocks[n].transactions.length){e.next=16;break}return e.next=15,this.app.storage.loadBlockByHash(r);case 15:return e.abrupt("return",e.sent);case 16:case 17:return e.abrupt("return",this.index.blocks[n]);case 18:n--,e.next=6;break;case 21:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"returnMinTxId",value:function(){return null==this.lc_pos||null==this.index.blocks[this.lc_pos].mintxid?0:this.index.blocks[this.lc_pos].maxtxid}},{key:"returnMaxTxId",value:function(){return null==this.lc_pos||null==this.index.blocks[this.lc_pos].maxtxid?0:this.index.blocks[this.lc_pos].maxtxid}},{key:"returnMinTxId",value:function(){return null==this.lc_pos||null==this.index.blocks[this.lc_pos].mintxid?0:this.index.blocks[this.lc_pos].maxtxid}},{key:"returnLowestValidBlock",value:function(){return this.last_bid-this.genesis_period+2}},{key:"saveBlockchain",value:function(e){this.app.options.blockchain=Object.assign({},this.app.options.blockchain),null!=e&&(this.last_bsh=e.returnHash(),this.last_bid=e.block.id,this.last_ts=e.block.ts,this.last_bf=e.block.bf,e.block.id%this.fork_id_mod==0&&(this.fork_id=this.updateForkId()),this.app.options.blockchain.last_bsh=this.last_bsh,this.app.options.blockchain.last_bid=this.last_bid,this.app.options.blockchain.last_ts=this.last_ts,this.app.options.blockchain.last_bf=this.last_bf,this.app.options.blockchain.genesis_ts=this.genesis_ts,this.app.options.blockchain.genesis_bid=this.genesis_bid,this.app.options.blockchain.genesis_period=this.genesis_period,this.app.options.blockchain.lowest_acceptable_ts=this.lowest_acceptable_ts,this.app.options.blockchain.lowest_acceptable_bsh=this.lowest_acceptable_bsh,this.app.options.blockchain.lowest_acceptable_bid=this.lowest_acceptable_bid,this.app.storage.saveOptions())}},{key:"updateGenesisBlock",value:function(e,t){if(this.index.blocks[this.lc_pos].returnHash()!=e.returnHash())return t;if(this.index.blocks.length<2*this.genesis_period)return t;if(e.block.id>=2*this.genesis_period+1){var a=e.block.id-2*this.genesis_period;return this.genesis_bid=e.block.id-this.genesis_period,this.purgeArchivedData(a,t)}return t}},{key:"purgeArchivedData",value:function(e,t){for(var a=0,r=0;r<this.index.blocks.length;r++)this.index.blocks[r].block.bid<e?a++:r=this.index.blocks.length;for(var n=0;n<a;n++){var i=this.index.blocks[n],s=i.returnHash();delete this.bsh_lc_hmap[s],delete this.bsh_bid_hmap[s],delete this.bsh_ts_hmap[s],delete this.bid_bsh_hmap[i.block.bid],this.app.storage.deleteBlock(i.block.bid,i.returnHash(),this.bsh_lc_hmap[i.returnHash()])}this.index.blocks.splice(0,a),this.index.paths.splice(0,a),this.index.stakers.splice(0,a),this.index.staking_reward(0,a);var o=t-a;return this.lowest_unspent_pos=this.lowest_unspent_pos-a,this.lc_pos=this.lc_pos-a,this.lc_pos=this.lc_pos-a,this.app.wallet.purgeExpiredSlips(),o}},{key:"addStakingSlip",value:function(e,t,a){var r={};r.slip=t,r.paid=0,this.index.stakers[a].push(r)}},{key:"updateStakingSlip",value:function(e,t,a){if(1==a)try{for(var r=0;r<this.index.stakers[e].length;r++)this.index.stakers[e][r].paid=0}catch(e){}else try{for(var n=0;n<this.index.stakers[e].length;n++)this.index.stakers[e][n].paid=0}catch(t){console.log("ERROR 582035: error trying to unspend slip at pos: "+e)}}},{key:"returnWinningStaker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0;null==t&&(t=e.random);var r={publickey:"",staker_bid:-1,staker_sid:-1,staker_pos:-1};null!=e&&null!=e.publickey&&(r.publickey=e.publickey);var n=this.app.blockchain.genesis_period;n>a&&(n=a);for(var s=this.app.crypto.hash(t).slice(0,12),o=parseInt(s,16),c=o%n,l=-1,u=-1,d=null,p=this.index.blocks.length-1;p>=0;p--)1!=this.bsh_lc_hmap[this.index.blocks[p].returnHash()]&&this.index.blocks[p].block.id!=a||(c=p,p=-1);l=this.index.blocks[c].block.id;var h=0,f=this.app.crypto.hash(s).slice(0,12),m=parseInt(f,16);if(this.index.stakers[c].length>0&&(u=m%this.index.stakers[c].length),(-1==u||-1==this.index.stakers[c][u].paid)&&(h=1),0==h)d=this.index.stakers[c][u];else{var g=this.last_bid-this.genesis_period+1;g<1&&(g=1),g<this.lowest_unspent_bid&&(g=this.lowest_unspent_bid);for(var b=0,y=0;y>this.index.blocks.length&&0==b;y++)this.index.blocks[y].block.id==g&&1==this.bsh_lc_hmap[this.index.blocks[i].returnHash()]&&(b=y);for(var v=1,_=b;_<this.index.stakers.length&&1==v;_++)for(var w=0;w<this.index.stakers[_].length&&1==v;w++)0==this.index.stakers[_][w].paid&&(l=this.index.blocks[_].block.id,u=w,c=_,d=this.index.stakers[_][w],v=0)}return r.publickey=this.index.stakers[c][u].slip.add,r.staker_bid=l,r.staker_sid=u,r.staker_pos=c,r.staker_slip=d.slip.returnSignatureSource(),r}},{key:"resetBlockchain",value:function(){this.last_bsh="",this.last_bid=0,this.last_ts=0,this.last_bf=0,this.genesis_ts=0,this.genesis_bid=0,this.lowest_acceptable_ts=0,this.lowest_acceptable_bsh="",this.lowest_acceptable_bid=0,void 0===this.app.options.blockchain&&(this.app.options.blockchain={}),this.app.options.blockchain.last_bsh=this.last_bsh,this.app.options.blockchain.last_bid=this.last_bid,this.app.options.blockchain.last_ts=this.last_ts,this.app.options.blockchain.last_bf=this.last_bf,this.app.options.blockchain.lowest_acceptable_ts=this.lowest_acceptable_ts,this.app.options.blockchain.lowest_acceptable_bsh=this.lowest_acceptable_bsh,this.app.options.blockchain.lowest_acceptable_bid=this.lowest_acceptable_bid,this.app.storage.saveOptions()}},{key:"hasKeylistTransactions",value:function(e,t){var a=this.returnBlockByHashFromBlockIndex(e);return null===a?(console.log("Not found block"),-1):a.hasKeylistTransactions(t)?1:0}}])&&s(a.prototype,r),o&&s(a,o),e}();e.exports=o}).call(this,a(12))},function(e,t,a){function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(n)throw i}}return a}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){var a;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=s(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(c)throw i}}}}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function c(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function s(e){c(i,r,n,s,o,"next",e)}function o(e){c(i,r,n,s,o,"throw",e)}s(void 0)}))}}function u(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=a(883),p=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.browser_active=0,this.drag_callback=null,this.urlParams={},this.active_tab=0}var t,a,s,o,c,p;return t=e,(a=[{key:"initialize",value:(p=l(regeneratorRuntime.mark((function e(t){var a,r,n,s,o,c,l,u,d,p,h,f,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=this,e.prev=1,document.hidden||a.setActiveTab(1);try{r=new BroadcastChannel("saito"),document.hidden||r.postMessage({active:1,publickey:a.app.wallet.returnPublicKey()}),r.onmessage=function(e){document.hidden?e.data&&1==e.data.active&&1==e.data.active&&e.data.publickey===a.app.wallet.returnPublicKey()&&a.setActiveTab(0):(r.postMessage({active:1,publickey:a.app.wallet.returnPublicKey()}),a.setActiveTab(1))},document.addEventListener("visibilitychange",(function(){document.hidden?r.postMessage({active:0,publickey:a.app.wallet.returnPublicKey()}):(a.setActiveTab(1),r.postMessage({active:1,publickey:a.app.wallet.returnPublicKey()}))}),!1),window.addEventListener("storage",(function(e){0==a.active_tab&&a.app.storage.loadOptions()}))}catch(e){}if("undefined"!=typeof window){e.next=9;break}return console.log("Initializing Saito Node"),e.abrupt("return");case 9:console.info("Initializing Saito Light Client");case 10:n=window.location,s=new URL(n),o=s.pathname.split("/"),""==(c=o[1]?o[1].toLowerCase():"")&&(c="website"),this.urlParams=new URLSearchParams(window.location.search),l=this.urlParams.entries(),u=i(l);try{for(u.s();!(d=u.n()).done;)if(pair=d.value,"crypto"===pair[0]){for(p=0,h=this.app.wallet.returnAvailableCryptos(),f=0;f<h.length;f++)h[f].ticker&&h[f].ticker.toLowerCase()===pair[1].toLowerCase()&&(p=1,this.app.wallet.setPreferredCrypto(h[f].ticker));0==p&&salert("Your compile does not contain a ".concat(pair[1].toUpperCase()," module. Visit the AppStore or contact us about getting one built!"))}}catch(e){u.e(e)}finally{u.f()}for(m=0;m<this.app.modules.mods.length;m++)this.app.modules.mods[m].returnSlug()==c&&(this.app.modules.mods[m].browser_active=1,this.app.modules.mods[m].alerts=0,g=new URLSearchParams(location.search),this.app.modules.mods[m].handleUrlParams(g));this.checkForMultipleWindows(),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then((function(){})),this.browser_active=1,e.next=32;break;case 25:if(e.prev=25,e.t0=e.catch(1),"ReferenceError: document is not defined"!=e.t0){e.next=31;break}console.log("non-browser detected: "+e.t0),e.next=32;break;case 31:throw e.t0;case 32:1==this.app.BROWSER&&(this.app.connection.on("connection_up",(function(e){siteMessage("Websocket Connection Established",1e3)})),this.app.connection.on("connection_down",(function(e){siteMessage("Websocket Connection Lost")})));case 33:case"end":return e.stop()}}),e,this,[[1,25]])}))),function(e){return p.apply(this,arguments)})},{key:"returnURLParameter",value:function(e){var t,a=i(this.urlParams.entries());try{for(a.s();!(t=a.n()).done;)if(pair=t.value,pair[0]==e)return pair[1]}catch(e){a.e(e)}finally{a.f()}return""}},{key:"isMobileBrowser",value:function(e){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(e),t}},{key:"isSupportedBrowser",value:function(e){if(e.toLowerCase().indexOf("safari/")>-1&&-1==e.toLowerCase().indexOf("chrome")&&-1==e.toLowerCase().indexOf("firefox"))return 0;try{Function("() => {};")}catch(e){return 0}return 1}},{key:"sendNotification",value:function(e,t,a){0!=this.app.BROWSER&&(this.isMobileBrowser(navigator.userAgent)?Notification.requestPermission().then((function(r){"granted"!==r&&"default"!==r||navigator.serviceWorker.ready.then((function(r){r.showNotification(e,{body:t,icon:"/saito/img/touch/pwa-192x192.png",vibrate:[200,100,200,100,200,100,200],tag:a})}))})):("default"===Notification.permission&&Notification.requestPermission(),"granted"===Notification.permission&&(notify=new Notification(e,{body:t,iconURL:"/saito/img/touch/pwa-192x192.png",icon:"/saito/img/touch/pwa-192x192.png"}))))}},{key:"checkForMultipleWindows",value:function(){localStorage.openpages=Date.now(),browser_self=this,window.addEventListener("storage",(function(e){"openpages"==e.key&&(localStorage.page_available=Date.now()),"page_available"!=e.key||browser_self.isMobileBrowser(navigator.userAgent)||(console.log(e.key),console.log(navigator.userAgent))}),!1)}},{key:"returnInviteObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={};return t.publickey=this.app.wallet.returnPublicKey(),t.bundle="",t.email=e,""!=this.app.options.bundle&&(t.bundle=this.app.options.bundle),t}},{key:"returnInviteLink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.app.options.peers[0],a=t.protocol,r=t.host,n=t.port,i=encodeURIComponent(this.app.crypto.stringToBase64(JSON.stringify(this.returnInviteObject(e))));return"".concat(a,"://").concat(r,":").concat(n,"/r?i=").concat(i)}},{key:"setActiveTab",value:function(e){this.active_tab=e,this.app.blockchain.process_blocks=e,this.app.storage.save_options=e;for(var t=0;t<this.app.network.peers.length;t++)this.app.network.peers[t].handle_peer_requests=e}},{key:"requestFullscreen",value:function(){d.isEnabled&&d.toggle()}},{key:"addElementToDom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=document.createElement("div");null==t?document.body.appendChild(a):document.getElementById(t)?document.getElementById(t).appendChild(a):document.body.appendChild(a),a.outerHTML=e}},{key:"prependElementToDom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;try{var a=document.createElement("div");t.insertAdjacentElement("afterbegin",a),a.outerHTML=e}catch(e){console.log("ERROR 582343: error in prependElementToDom")}}},{key:"addElementToElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;try{var a=document.createElement("div");t.appendChild(a),a.outerHTML=e}catch(e){console.log("ERROR 582343: error in addElementToElement")}}},{key:"makeElement",value:function(e,t,a){var r=document.createElement(e);return r.id=t,r.class=a,r}},{key:"htmlToElement",value:function(e){return(new DOMParser).parseFromString(e,"text/html").body.firstChild}},{key:"formatDate",value:function(e){var t=new Date(e),a=t.getHours(),r=t.getMinutes(),n=[12];n[0]="January",n[1]="February",n[2]="March",n[3]="April",n[4]="May",n[5]="June",n[6]="July",n[7]="August",n[8]="September",n[9]="October",n[10]="November",n[11]="December";var i=n[t.getMonth()],s=t.getDay();return{year:t.getFullYear(),month:i,day:s,hours:a,minutes:r=1==r.toString().length?"0".concat(r):"".concat(r)}}},{key:"addDragAndDropFileUploadToElement",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this,i='\n      <form class="my-form" style="display:none">\n        <p>Upload multiple files with the file dialog or by dragging and dropping images onto the dashed region</p>\n        <input type="file" id="hidden_file_element_'.concat(e,'" multiple accept="*">\n        <label class="button" for="fileElem">Select some files</label>\n      </form>\n    ');if(!document.getElementById("hidden_file_element_".concat(e))){this.addElementToDom(i,e);var s=document.getElementById(e);["dragenter","dragover","dragleave","drop"].forEach((function(e){s.addEventListener(e,r.preventDefaults,!1)})),["dragenter","dragover"].forEach((function(e){s.addEventListener(e,r.highlight,!1)})),["dragleave","drop"].forEach((function(e){s.addEventListener(e,r.unhighlight,!1)})),s.addEventListener("drop",(function(e){n(e.dataTransfer.files).forEach((function(e){var a=new FileReader;a.addEventListener("load",(function(e){t(e.target.result)})),a.readAsDataURL(e)}))}),!1),s.parentNode.parentNode.addEventListener("paste",(function(e){n(e.clipboardData.files).forEach((function(e){var a=new FileReader;a.addEventListener("load",(function(e){t(e.target.result)})),a.readAsDataURL(e)}))}),!1);var o=document.getElementById("hidden_file_element_".concat(e));1==a&&s.addEventListener("click",(function(e){o.click()})),o.addEventListener("change",(function(e){this.files&&this.files.length>0&&n(this.files).forEach((function(e){var a=new FileReader;a.addEventListener("load",(function(e){t(e.target.result)})),a.readAsDataURL(e)}))}),!1),s.focus()}}},{key:"highlight",value:function(e){document.getElementById(e.currentTarget.id).style.opacity=.8}},{key:"unhighlight",value:function(e){document.getElementById(e.currentTarget.id).style.opacity=1}},{key:"preventDefaults",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"makeDraggable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{var r=document.getElementById(e),n=r;""!=t&&(n=document.getElementById(t));var i=0,s=0,o=0,c=0,l=0,u=0,d=0;n.onmousedown=function(n){if(n.currentTarget.id!=e&&n.currentTarget.id!=t||void 0===n.currentTarget.id)return document.ontouchend=null,document.ontouchmove=null,document.onmouseup=null,void(document.onmousemove=null);n=n||window.event;var p=r.getBoundingClientRect();u=p.left,d=p.top,s=n.clientX,o=n.clientY,c=s,l=o,document.onmouseup=function(e){document.ontouchend=null,document.ontouchmove=null,document.onmouseup=null,document.onmousemove=null,null!=a&&1==i&&a()},document.onmousemove=function(e){e=e||window.event,c=e.clientX,l=e.clientY;var t=c-s,a=l-o;t>0&&(i=1),a>0&&(i=1),r.style.left=u+t+"px",r.style.top=d+a+"px"}},n.ontouchstart=function(n){if(n.currentTarget.id!=e&&n.currentTarget.id!=t||void 0===n.currentTarget.id)return document.ontouchend=null,document.ontouchmove=null,document.onmouseup=null,void(document.onmousemove=null);n=n||window.event;var p=r.getBoundingClientRect();u=p.left,d=p.top,s=n.targetTouches[0]?n.targetTouches[0].pageX:n.changedTouches[n.changedTouches.length-1].pageX,o=n.targetTouches[0]?event.targetTouches[0].pageY:n.changedTouches[n.changedTouches.length-1].pageY,c=s,l=o,document.ontouchend=function(e){document.ontouchend=null,document.ontouchmove=null,document.onmouseup=null,document.onmousemove=null,null!=a&&1==i&&a()},document.ontouchmove=function(e){e=e||window.event,c=e.targetTouches[0]?e.targetTouches[0].pageX:e.changedTouches[e.changedTouches.length-1].pageX,l=e.targetTouches[0]?event.targetTouches[0].pageY:e.changedTouches[e.changedTouches.length-1].pageY;var t=c-s,a=l-o;t>0&&(i=1),a>0&&(i=1),r.style.left=u+t+"px",r.style.top=d+a+"px"}}}catch(e){console.log("error: "+e)}}},{key:"addIdentifiersToDom",value:(c=l(regeneratorRuntime.mark((function e(){var t,a,n,i=this,s=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 0==(t=s.length>0&&void 0!==s[0]?s[0]:[]).length&&(a=document.getElementsByClassName("saito-address"),Array.from(a).forEach((function(e){var a=e.getAttribute("data-id");a&&t.push(a)}))),e.prev=2,e.next=5,this.app.keys.fetchManyIdentifiersPromise(t);case 5:n=e.sent,Object.entries(n).forEach((function(e){var t=r(e,2),a=t[0],n=t[1];return i.updateAddressHTML(a,n)})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(){return c.apply(this,arguments)})},{key:"returnAddressHTML",value:function(e){var t=this.app.keys.returnIdentifierByPublicKey(e),a=t||e;return'<span data-id="'.concat(e,'" class="saito-address saito-address-').concat(e,'">').concat(a,"</span>")}},{key:"returnAddressHTMLPromise",value:(o=l(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.returnIdentifier(t);case 2:return a=e.sent,r=a||t,e.abrupt("return",'<span class="saito-address saito-address-'.concat(t,'">').concat(r,"</span>"));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"updateAddressHTML",value:function(e,t){if(t)try{var a=document.getElementsByClassName("saito-address-".concat(e));Array.from(a).forEach((function(e){return e.innerHTML=t}))}catch(e){}}},{key:"logMatomoEvent",value:function(e,t,a,r){try{this.app.modules.returnFirstRespondTo("matomo_event_push").push(e,t,a,r)}catch(e){e.startsWith("Module responding to")?console.log("Matomo module not present, cannot push event"):console.log(e)}}},{key:"parseHash",value:function(e){return""===e?{}:e.substr(1).split("&").reduce((function(e,t){var a=t.split("=");return e[a[0]]=a[1],e}),{})}},{key:"buildHash",value:function(e){return"#"+Object.keys(e).reduce((function(t,a){return e[a],t+"&".concat(a,"=").concat(e[a])}),"").substr(1)}},{key:"buildHashAndPreserve",value:function(e,t){for(var a=arguments.length,r=new Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];return this.buildHash(Object.assign(this.getSubsetOfHash(t,r),this.parseHash(e)))}},{key:"getSubsetOfHash",value:function(e){for(var t=this.parseHash(e),a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return r.reduce((function(e,a){return e[a]=t[a],e}),{})}},{key:"removeFromHash",value:function(e){for(var t=this.parseHash(e),a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return r.forEach((function(e,a){delete t[e]})),this.buildHash(t)}},{key:"modifyHash",value:function(e,t){return this.buildHash(Object.assign(this.parseHash(e),t))}},{key:"defaultHashTo",value:function(e,t){return this.buildHash(Object.assign(this.parseHash(e),this.parseHash(t)))}},{key:"initializeHash",value:function(e,t,a){return this.modifyHash(this.defaultHashTo(e,t),a)}},{key:"getValueFromHashAsBoolean",value:function(){}},{key:"getValueFromHashAsNumber",value:function(e,t){try{var a=this.getSubsetOfHash(e,t);if(a[t])return Number(a[t]);throw"key not found in hash"}catch(e){return Number(0)}}}])&&u(t.prototype,a),s&&u(t,s),e}();e.exports=p},function(e,t,a){
/*!
* screenfull
* v5.0.2 - 2020-02-13
* (c) Sindre Sorhus; MIT License
*/
!function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},a=e.exports,r=function(){for(var e,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,n=a.length,i={};r<n;r++)if((e=a[r])&&e[1]in t){for(r=0;r<e.length;r++)i[a[0][r]]=e[r];return i}return!1}(),n={change:r.fullscreenchange,error:r.fullscreenerror},i={request:function(e){return new Promise(function(a,n){var i=function(){this.off("change",i),a()}.bind(this);this.on("change",i);var s=(e=e||t.documentElement)[r.requestFullscreen]();s instanceof Promise&&s.then(i).catch(n)}.bind(this))},exit:function(){return new Promise(function(e,a){if(this.isFullscreen){var n=function(){this.off("change",n),e()}.bind(this);this.on("change",n);var i=t[r.exitFullscreen]();i instanceof Promise&&i.then(n).catch(a)}else e()}.bind(this))},toggle:function(e){return this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,a){var r=n[e];r&&t.addEventListener(r,a,!1)},off:function(e,a){var r=n[e];r&&t.removeEventListener(r,a,!1)},raw:r};r?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[r.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[r.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[r.fullscreenEnabled])}}}),a?e.exports=i:window.screenfull=i):a?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1}}()},function(e,t,a){"use strict";function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a(40);var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.heartbeat=10}var t,a,n;return t=e,(a=[{key:"returnWorkNeeded",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getTime(),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0==e)return 0;var r=t-e;return r<=1&&(r=1),r>2e3*this.heartbeat?0:Math.floor(a/(r/1e3))}},{key:"returnBurnFee",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null==e||null==t?0:(e.block.bf+1)*Math.sqrt(1e3*this.heartbeat/(Math.abs(t.block.ts-e.block.ts)+1))}}])&&r(t.prototype,a),n&&r(t,n),e}();e.exports=n},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=o(e);if(t){var n=o(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return s(this,a)}}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(a,e);var t=i(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=t.call(this)).setMaxListeners(200),e}return a}(a(51));e.exports=c},function(e,t,a){"use strict";(function(t){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(115),i=a(984),s=a(987),o=a(115).randomBytes,c=a(994),l=s.CryptoJS,u=s.JsonFormatter,d=a(1012),p=a(1013),h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var a,s,h;return a=e,(s=[{key:"hash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return i(e)}},{key:"xor",value:function(e,a){t.isBuffer(e)||(e=new t(e)),t.isBuffer(a)||(a=new t(a));var r=[];if(e.length>a.length)for(var n=0;n<a.length;n++)r.push(e[n]^a[n]);else for(n=0;n<e.length;n++)r.push(e[n]^a[n]);return new t(r)}},{key:"encodeXOR",value:function(e,a){for(;e.length>a.length;)a+=a;return this.xor(t.from(e,"hex"),t.from(a,"hex")).toString("hex")}},{key:"decodeXOR",value:function(e,a){for(;e.length>a.length;)a+=a;return this.xor(t.from(e,"hex"),t.from(a,"hex")).toString("hex")}},{key:"stringToHex",value:function(e){return t.from(e,"utf-8").toString("hex")}},{key:"hexToString",value:function(e){return t.from(e,"hex").toString("utf-8")}},{key:"stringToBase64",value:function(e){return t.from(e,"utf-8").toString("base64")}},{key:"base64ToString",value:function(e){return t.from(e,"base64").toString("utf-8")}},{key:"compressPublicKey",value:function(e){return this.toBase58(c.publicKeyConvert(t.from(e,"hex"),!0).toString("hex"))}},{key:"fromBase58",value:function(e){return t.from(d.decode(e),"Uint8Array").toString("hex")}},{key:"toBase58",value:function(e){return d.encode(t.from(e,"hex"))}},{key:"generateKeys",value:function(){var e;do{e=o(32)}while(!c.privateKeyVerify(e,!1));return e.toString("hex")}},{key:"generateRandomNumber",value:function(){return o(32).toString("hex")}},{key:"returnPublicKey",value:function(e){return this.compressPublicKey(c.publicKeyCreate(t.from(e,"hex"),!1).toString("hex"))}},{key:"signMessage",value:function(e,a){return this.toBase58(c.sign(t.from(this.hash(t.from(e,"utf-8").toString("base64")),"hex"),t.from(a,"hex")).signature.toString("hex"))}},{key:"uncompressPublicKey",value:function(e){return c.publicKeyConvert(t.from(this.fromBase58(e),"hex"),!1).toString("hex")}},{key:"verifySignatureSource",value:function(e,a,r){try{return c.verify(t.from(e,"hex"),t.from(this.fromBase58(a),"hex"),t.from(this.uncompressPublicKey(r),"hex"))}catch(e){return console.log(e),!1}}},{key:"verifyMessage",value:function(e,a,r){try{return c.verify(t.from(this.hash(t.from(e,"utf-8").toString("base64")),"hex"),t.from(this.fromBase58(a),"hex"),t.from(this.uncompressPublicKey(r),"hex"))}catch(e){return console.log(e),!1}}},{key:"fastVerifyMessage",value:function(e,a,r){try{return c.verify(t.from(e,"hex"),t.from(this.fromBase58(a),"hex"),t.from(this.uncompressPublicKey(r),"hex"))}catch(e){return console.log(e),!1}}},{key:"isPublicKey",value:function(e){return 44!=e.length&&45!=e.length||e.indexOf("@")>0?0:1}},{key:"createDiffieHellman",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=n.createECDH("secp256k1");return a.generateKeys(),""!=e&&a.setPublicKey(e),""!=t&&a.setPrivateKey(t),a}},{key:"returnDiffieHellmanKeys",value:function(e){var t={};return t.pubkey=e.getPublicKey(null,"compressed"),t.privkey=e.getPrivateKey(null,"compressed"),t}},{key:"createDiffieHellmanSecret",value:function(e,t){return e.computeSecret(t)}},{key:"aesEncrypt",value:function(e,t){var a=t.toString("hex");return l.AES.encrypt(e,a,{format:u}).toString()}},{key:"aesDecrypt",value:function(e,t){var a=t.toString("hex"),r=l.AES.decrypt(e,a,{format:u});return l.enc.Utf8.stringify(r)}},{key:"fastSerialize",value:function(e){return p(e)}}])&&r(a.prototype,s),h&&r(a,h),e}();e.exports=h}).call(this,a(9).Buffer)},function(e,t,a){"use strict";t.byteLength=function(e){var t=l(e),a=t[0],r=t[1];return 3*(a+r)/4-r},t.toByteArray=function(e){var t,a,r=l(e),s=r[0],o=r[1],c=new i(function(e,t,a){return 3*(t+a)/4-a}(0,s,o)),u=0,d=o>0?s-4:s;for(a=0;a<d;a+=4)t=n[e.charCodeAt(a)]<<18|n[e.charCodeAt(a+1)]<<12|n[e.charCodeAt(a+2)]<<6|n[e.charCodeAt(a+3)],c[u++]=t>>16&255,c[u++]=t>>8&255,c[u++]=255&t;2===o&&(t=n[e.charCodeAt(a)]<<2|n[e.charCodeAt(a+1)]>>4,c[u++]=255&t);1===o&&(t=n[e.charCodeAt(a)]<<10|n[e.charCodeAt(a+1)]<<4|n[e.charCodeAt(a+2)]>>2,c[u++]=t>>8&255,c[u++]=255&t);return c},t.fromByteArray=function(e){for(var t,a=e.length,n=a%3,i=[],s=0,o=a-n;s<o;s+=16383)i.push(u(e,s,s+16383>o?o:s+16383));1===n?(t=e[a-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[a-2]<<8)+e[a-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=s.length;o<c;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var a=e.indexOf("=");return-1===a&&(a=t),[a,a===t?0:4-a%4]}function u(e,t,a){for(var n,i,s=[],o=t;o<a;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[(i=n)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,a,r,n){var i,s,o=8*n-r-1,c=(1<<o)-1,l=c>>1,u=-7,d=a?n-1:0,p=a?-1:1,h=e[t+d];for(d+=p,i=h&(1<<-u)-1,h>>=-u,u+=o;u>0;i=256*i+e[t+d],d+=p,u-=8);for(s=i&(1<<-u)-1,i>>=-u,u+=r;u>0;s=256*s+e[t+d],d+=p,u-=8);if(0===i)i=1-l;else{if(i===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),i-=l}return(h?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,a,r,n,i){var s,o,c,l=8*i-n-1,u=(1<<l)-1,d=u>>1,p=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=u):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=u?(o=0,s=u):s+d>=1?(o=(t*c-1)*Math.pow(2,n),s+=d):(o=t*Math.pow(2,d-1)*Math.pow(2,n),s=0));n>=8;e[a+h]=255&o,h+=f,o/=256,n-=8);for(s=s<<n|o,l+=n;l>0;e[a+h]=255&s,h+=f,s/=256,l-=8);e[a+h-f]|=128*m}},function(e,t){var a={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==a.call(e)}},function(e,t){var a={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==a.call(e)}},function(e,t){},function(e,t,a){"use strict";var r=a(2).Buffer,n=a(893);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,a=""+t.data;t=t.next;)a+=e+t.data;return a},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,a,n,i=r.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,a=i,n=o,t.copy(a,n),o+=s.data.length,s=s.next;return i},e}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var e=n.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,a){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(n.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(n.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},a(895),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,a(17))},function(e,t,a){(function(e,t){!function(e,a){"use strict";if(!e.setImmediate){var r,n,i,s,o=1,c={},l=!1,u=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){h(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,a=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=a,t}}()?(i="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&h(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((n=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){n.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?function(){var e=u.documentElement;r=function(t){var a=u.createElement("script");a.onreadystatechange=function(){h(t),a.onreadystatechange=null,e.removeChild(a),a=null},e.appendChild(a)}}():r=function(e){setTimeout(h,0,e)},d.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),a=0;a<t.length;a++)t[a]=arguments[a+1];var n={callback:e,args:t};return c[o]=n,r(o),o++},d.clearImmediate=p}function p(e){delete c[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=c[e];if(t){l=!0;try{!function(e){var t=e.callback,a=e.args;switch(a.length){case 0:t();break;case 1:t(a[0]);break;case 2:t(a[0],a[1]);break;case 3:t(a[0],a[1],a[2]);break;default:t.apply(void 0,a)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,a(17),a(12))},function(e,t,a){"use strict";e.exports=i;var r=a(354),n=a(87);function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}n.inherits=a(1),n.inherits(i,r),i.prototype._transform=function(e,t,a){a(null,e)}},function(e,t,a){e.exports=a(165)},function(e,t,a){e.exports=a(64)},function(e,t,a){e.exports=a(164).Transform},function(e,t,a){e.exports=a(164).PassThrough},function(e,t,a){var r=a(1),n=a(76),i=a(2).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function c(){this.init(),this._w=o,n.call(this,64,56)}function l(e){return e<<30|e>>>2}function u(e,t,a,r){return 0===e?t&a|~t&r:2===e?t&a|t&r|a&r:t^a^r}r(c,n),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,a=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,c=0|this._e,d=0;d<16;++d)a[d]=e.readInt32BE(4*d);for(;d<80;++d)a[d]=a[d-3]^a[d-8]^a[d-14]^a[d-16];for(var p=0;p<80;++p){var h=~~(p/20),f=0|((t=r)<<5|t>>>27)+u(h,n,i,o)+c+a[p]+s[h];c=o,o=i,i=l(n),n=r,r=f}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},function(e,t,a){var r=a(1),n=a(76),i=a(2).Buffer,s=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function c(){this.init(),this._w=o,n.call(this,64,56)}function l(e){return e<<5|e>>>27}function u(e){return e<<30|e>>>2}function d(e,t,a,r){return 0===e?t&a|~t&r:2===e?t&a|t&r|a&r:t^a^r}r(c,n),c.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},c.prototype._update=function(e){for(var t,a=this._w,r=0|this._a,n=0|this._b,i=0|this._c,o=0|this._d,c=0|this._e,p=0;p<16;++p)a[p]=e.readInt32BE(4*p);for(;p<80;++p)a[p]=(t=a[p-3]^a[p-8]^a[p-14]^a[p-16])<<1|t>>>31;for(var h=0;h<80;++h){var f=~~(h/20),m=l(r)+d(f,n,i,o)+c+a[h]+s[f]|0;c=o,o=i,i=u(n),n=r,r=m}this._a=r+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=o+this._d|0,this._e=c+this._e|0},c.prototype._hash=function(){var e=i.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},e.exports=c},function(e,t,a){var r=a(1),n=a(355),i=a(76),s=a(2).Buffer,o=new Array(64);function c(){this.init(),this._w=o,i.call(this,64,56)}r(c,n),c.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},c.prototype._hash=function(){var e=s.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},e.exports=c},function(e,t,a){var r=a(1),n=a(356),i=a(76),s=a(2).Buffer,o=new Array(160);function c(){this.init(),this._w=o,i.call(this,128,112)}r(c,n),c.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},c.prototype._hash=function(){var e=s.allocUnsafe(48);function t(t,a,r){e.writeInt32BE(t,r),e.writeInt32BE(a,r+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},e.exports=c},function(e,t,a){"use strict";var r=a(1),n=a(2).Buffer,i=a(52),s=n.alloc(128);function o(e,t){i.call(this,"digest"),"string"==typeof t&&(t=n.from(t)),this._alg=e,this._key=t,t.length>64?t=e(t):t.length<64&&(t=n.concat([t,s],64));for(var a=this._ipad=n.allocUnsafe(64),r=this._opad=n.allocUnsafe(64),o=0;o<64;o++)a[o]=54^t[o],r[o]=92^t[o];this._hash=[a]}r(o,i),o.prototype._update=function(e){this._hash.push(e)},o.prototype._final=function(){var e=this._alg(n.concat(this._hash));return this._alg(n.concat([this._opad,e]))},e.exports=o},function(e,t,a){e.exports=a(359)},function(e,t,a){(function(t,r){var n,i=a(2).Buffer,s=a(361),o=a(362),c=a(363),l=a(364),u=t.crypto&&t.crypto.subtle,d={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},p=[];function h(e,t,a,r,n){return u.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then((function(e){return u.deriveBits({name:"PBKDF2",salt:t,iterations:a,hash:{name:n}},e,r<<3)})).then((function(e){return i.from(e)}))}e.exports=function(e,a,f,m,g,b){"function"==typeof g&&(b=g,g=void 0);var y=d[(g=g||"sha1").toLowerCase()];if(!y||"function"!=typeof t.Promise)return r.nextTick((function(){var t;try{t=c(e,a,f,m,g)}catch(e){return b(e)}b(null,t)}));if(s(f,m),e=l(e,o,"Password"),a=l(a,o,"Salt"),"function"!=typeof b)throw new Error("No callback provided to pbkdf2");!function(e,t){e.then((function(e){r.nextTick((function(){t(null,e)}))}),(function(e){r.nextTick((function(){t(e)}))}))}(function(e){if(t.process&&!t.process.browser)return Promise.resolve(!1);if(!u||!u.importKey||!u.deriveBits)return Promise.resolve(!1);if(void 0!==p[e])return p[e];var a=h(n=n||i.alloc(8),n,10,128,e).then((function(){return!0})).catch((function(){return!1}));return p[e]=a,a}(y).then((function(t){return t?h(e,a,f,m,y):c(e,a,f,m,g)})),b)}}).call(this,a(17),a(12))},function(e,t,a){var r=a(909),n=a(169),i=a(170),s=a(922),o=a(118);function c(e,t,a){if(e=e.toLowerCase(),i[e])return n.createCipheriv(e,t,a);if(s[e])return new r({key:t,iv:a,mode:e});throw new TypeError("invalid suite type")}function l(e,t,a){if(e=e.toLowerCase(),i[e])return n.createDecipheriv(e,t,a);if(s[e])return new r({key:t,iv:a,mode:e,decrypt:!0});throw new TypeError("invalid suite type")}t.createCipher=t.Cipher=function(e,t){var a,r;if(e=e.toLowerCase(),i[e])a=i[e].key,r=i[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");a=8*s[e].key,r=s[e].iv}var n=o(t,!1,a,r);return c(e,n.key,n.iv)},t.createCipheriv=t.Cipheriv=c,t.createDecipher=t.Decipher=function(e,t){var a,r;if(e=e.toLowerCase(),i[e])a=i[e].key,r=i[e].iv;else{if(!s[e])throw new TypeError("invalid suite type");a=8*s[e].key,r=s[e].iv}var n=o(t,!1,a,r);return l(e,n.key,n.iv)},t.createDecipheriv=t.Decipheriv=l,t.listCiphers=t.getCiphers=function(){return Object.keys(s).concat(n.getCiphers())}},function(e,t,a){var r=a(52),n=a(910),i=a(1),s=a(2).Buffer,o={"des-ede3-cbc":n.CBC.instantiate(n.EDE),"des-ede3":n.EDE,"des-ede-cbc":n.CBC.instantiate(n.EDE),"des-ede":n.EDE,"des-cbc":n.CBC.instantiate(n.DES),"des-ecb":n.DES};function c(e){r.call(this);var t,a=e.mode.toLowerCase(),n=o[a];t=e.decrypt?"decrypt":"encrypt";var i=e.key;s.isBuffer(i)||(i=s.from(i)),"des-ede"!==a&&"des-ede-cbc"!==a||(i=s.concat([i,i.slice(0,8)]));var c=e.iv;s.isBuffer(c)||(c=s.from(c)),this._des=n.create({key:i,iv:c,type:t})}o.des=o["des-cbc"],o.des3=o["des-ede3-cbc"],e.exports=c,i(c,r),c.prototype._update=function(e){return s.from(this._des.update(e))},c.prototype._final=function(){return s.from(this._des.final())}},function(e,t,a){"use strict";t.utils=a(365),t.Cipher=a(168),t.DES=a(366),t.CBC=a(911),t.EDE=a(912)},function(e,t,a){"use strict";var r=a(20),n=a(1),i={};function s(e){r.equal(e.length,8,"Invalid IV length"),this.iv=new Array(8);for(var t=0;t<this.iv.length;t++)this.iv[t]=e[t]}t.instantiate=function(e){function t(t){e.call(this,t),this._cbcInit()}n(t,e);for(var a=Object.keys(i),r=0;r<a.length;r++){var s=a[r];t.prototype[s]=i[s]}return t.create=function(e){return new t(e)},t},i._cbcInit=function(){var e=new s(this.options.iv);this._cbcState=e},i._update=function(e,t,a,r){var n=this._cbcState,i=this.constructor.super_.prototype,s=n.iv;if("encrypt"===this.type){for(var o=0;o<this.blockSize;o++)s[o]^=e[t+o];i._update.call(this,s,0,a,r);for(o=0;o<this.blockSize;o++)s[o]=a[r+o]}else{i._update.call(this,e,t,a,r);for(o=0;o<this.blockSize;o++)a[r+o]^=s[o];for(o=0;o<this.blockSize;o++)s[o]=e[t+o]}}},function(e,t,a){"use strict";var r=a(20),n=a(1),i=a(168),s=a(366);function o(e,t){r.equal(t.length,24,"Invalid key length");var a=t.slice(0,8),n=t.slice(8,16),i=t.slice(16,24);this.ciphers="encrypt"===e?[s.create({type:"encrypt",key:a}),s.create({type:"decrypt",key:n}),s.create({type:"encrypt",key:i})]:[s.create({type:"decrypt",key:i}),s.create({type:"encrypt",key:n}),s.create({type:"decrypt",key:a})]}function c(e){i.call(this,e);var t=new o(this.type,this.options.key);this._edeState=t}n(c,i),e.exports=c,c.create=function(e){return new c(e)},c.prototype._update=function(e,t,a,r){var n=this._edeState;n.ciphers[0]._update(e,t,a,r),n.ciphers[1]._update(a,r,a,r),n.ciphers[2]._update(a,r,a,r)},c.prototype._pad=s.prototype._pad,c.prototype._unpad=s.prototype._unpad},function(e,t,a){var r=a(170),n=a(370),i=a(2).Buffer,s=a(371),o=a(52),c=a(117),l=a(118);function u(e,t,a){o.call(this),this._cache=new p,this._cipher=new c.AES(t),this._prev=i.from(a),this._mode=e,this._autopadding=!0}a(1)(u,o),u.prototype._update=function(e){var t,a;this._cache.add(e);for(var r=[];t=this._cache.get();)a=this._mode.encrypt(this,t),r.push(a);return i.concat(r)};var d=i.alloc(16,16);function p(){this.cache=i.allocUnsafe(0)}function h(e,t,a){var o=r[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof t&&(t=i.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);if("string"==typeof a&&(a=i.from(a)),"GCM"!==o.mode&&a.length!==o.iv)throw new TypeError("invalid iv length "+a.length);return"stream"===o.type?new s(o.module,t,a):"auth"===o.type?new n(o.module,t,a):new u(o.module,t,a)}u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(d))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},p.prototype.add=function(e){this.cache=i.concat([this.cache,e])},p.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},p.prototype.flush=function(){for(var e=16-this.cache.length,t=i.allocUnsafe(e),a=-1;++a<e;)t.writeUInt8(e,a);return i.concat([this.cache,t])},t.createCipheriv=h,t.createCipher=function(e,t){var a=r[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");var n=l(t,!1,a.key,a.iv);return h(e,n.key,n.iv)}},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,a){var r=a(88);t.encrypt=function(e,t){var a=r(t,e._prev);return e._prev=e._cipher.encryptBlock(a),e._prev},t.decrypt=function(e,t){var a=e._prev;e._prev=t;var n=e._cipher.decryptBlock(t);return r(n,a)}},function(e,t,a){var r=a(2).Buffer,n=a(88);function i(e,t,a){var i=t.length,s=n(t,e._cache);return e._cache=e._cache.slice(i),e._prev=r.concat([e._prev,a?t:s]),s}t.encrypt=function(e,t,a){for(var n,s=r.allocUnsafe(0);t.length;){if(0===e._cache.length&&(e._cache=e._cipher.encryptBlock(e._prev),e._prev=r.allocUnsafe(0)),!(e._cache.length<=t.length)){s=r.concat([s,i(e,t,a)]);break}n=e._cache.length,s=r.concat([s,i(e,t.slice(0,n),a)]),t=t.slice(n)}return s}},function(e,t,a){var r=a(2).Buffer;function n(e,t,a){var n=e._cipher.encryptBlock(e._prev)[0]^t;return e._prev=r.concat([e._prev.slice(1),r.from([a?t:n])]),n}t.encrypt=function(e,t,a){for(var i=t.length,s=r.allocUnsafe(i),o=-1;++o<i;)s[o]=n(e,t[o],a);return s}},function(e,t,a){var r=a(2).Buffer;function n(e,t,a){for(var r,n,s=-1,o=0;++s<8;)r=t&1<<7-s?128:0,o+=(128&(n=e._cipher.encryptBlock(e._prev)[0]^r))>>s%8,e._prev=i(e._prev,a?r:n);return o}function i(e,t){var a=e.length,n=-1,i=r.allocUnsafe(e.length);for(e=r.concat([e,r.from([t])]);++n<a;)i[n]=e[n]<<1|e[n+1]>>7;return i}t.encrypt=function(e,t,a){for(var i=t.length,s=r.allocUnsafe(i),o=-1;++o<i;)s[o]=n(e,t[o],a);return s}},function(e,t,a){(function(e){var r=a(88);function n(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}t.encrypt=function(t,a){for(;t._cache.length<a.length;)t._cache=e.concat([t._cache,n(t)]);var i=t._cache.slice(0,a.length);return t._cache=t._cache.slice(a.length),r(a,i)}}).call(this,a(9).Buffer)},function(e,t,a){var r=a(2).Buffer,n=r.alloc(16,0);function i(e){var t=r.allocUnsafe(16);return t.writeUInt32BE(e[0]>>>0,0),t.writeUInt32BE(e[1]>>>0,4),t.writeUInt32BE(e[2]>>>0,8),t.writeUInt32BE(e[3]>>>0,12),t}function s(e){this.h=e,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}s.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},s.prototype._multiply=function(){for(var e,t,a,r=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],n=[0,0,0,0],s=-1;++s<128;){for(0!=(this.state[~~(s/8)]&1<<7-s%8)&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),a=0!=(1&r[3]),t=3;t>0;t--)r[t]=r[t]>>>1|(1&r[t-1])<<31;r[0]=r[0]>>>1,a&&(r[0]=r[0]^225<<24)}this.state=i(n)},s.prototype.update=function(e){var t;for(this.cache=r.concat([this.cache,e]);this.cache.length>=16;)t=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(t)},s.prototype.final=function(e,t){return this.cache.length&&this.ghash(r.concat([this.cache,n],16)),this.ghash(i([0,e,0,t])),this.state},e.exports=s},function(e,t,a){var r=a(370),n=a(2).Buffer,i=a(170),s=a(371),o=a(52),c=a(117),l=a(118);function u(e,t,a){o.call(this),this._cache=new d,this._last=void 0,this._cipher=new c.AES(t),this._prev=n.from(a),this._mode=e,this._autopadding=!0}function d(){this.cache=n.allocUnsafe(0)}function p(e,t,a){var o=i[e.toLowerCase()];if(!o)throw new TypeError("invalid suite type");if("string"==typeof a&&(a=n.from(a)),"GCM"!==o.mode&&a.length!==o.iv)throw new TypeError("invalid iv length "+a.length);if("string"==typeof t&&(t=n.from(t)),t.length!==o.key/8)throw new TypeError("invalid key length "+t.length);return"stream"===o.type?new s(o.module,t,a,!0):"auth"===o.type?new r(o.module,t,a,!0):new u(o.module,t,a)}a(1)(u,o),u.prototype._update=function(e){var t,a;this._cache.add(e);for(var r=[];t=this._cache.get(this._autopadding);)a=this._mode.decrypt(this,t),r.push(a);return n.concat(r)},u.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var a=-1;for(;++a<t;)if(e[a+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},d.prototype.add=function(e){this.cache=n.concat([this.cache,e])},d.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},d.prototype.flush=function(){if(this.cache.length)return this.cache},t.createDecipher=function(e,t){var a=i[e.toLowerCase()];if(!a)throw new TypeError("invalid suite type");var r=l(t,!1,a.key,a.iv);return p(e,r.key,r.iv)},t.createDecipheriv=p},function(e,t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}},function(e,t,a){(function(e){var r=a(372),n=a(926),i=a(927);var s={binary:!0,hex:!0,base64:!0};t.DiffieHellmanGroup=t.createDiffieHellmanGroup=t.getDiffieHellman=function(t){var a=new e(n[t].prime,"hex"),r=new e(n[t].gen,"hex");return new i(a,r)},t.createDiffieHellman=t.DiffieHellman=function t(a,n,o,c){return e.isBuffer(n)||void 0===s[n]?t(a,"binary",n,o):(n=n||"binary",c=c||"binary",o=o||new e([2]),e.isBuffer(o)||(o=new e(o,c)),"number"==typeof a?new i(r(a,o),o,!0):(e.isBuffer(a)||(a=new e(a,n)),new i(a,o,!0)))}}).call(this,a(9).Buffer)},function(e,t){},function(e,t){},function(e){e.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},function(e,t,a){(function(t){var r=a(8),n=new(a(373)),i=new r(24),s=new r(11),o=new r(10),c=new r(3),l=new r(7),u=a(372),d=a(73);function p(e,a){return a=a||"utf8",t.isBuffer(e)||(e=new t(e,a)),this._pub=new r(e),this}function h(e,a){return a=a||"utf8",t.isBuffer(e)||(e=new t(e,a)),this._priv=new r(e),this}e.exports=m;var f={};function m(e,t,a){this.setGenerator(t),this.__prime=new r(e),this._prime=r.mont(this.__prime),this._primeLen=e.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,a?(this.setPublicKey=p,this.setPrivateKey=h):this._primeCode=8}function g(e,a){var r=new t(e.toArray());return a?r.toString(a):r}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,t){var a=t.toString("hex"),r=[a,e.toString(16)].join("_");if(r in f)return f[r];var d,p=0;if(e.isEven()||!u.simpleSieve||!u.fermatTest(e)||!n.test(e))return p+=1,p+="02"===a||"05"===a?8:4,f[r]=p,p;switch(n.test(e.shrn(1))||(p+=2),a){case"02":e.mod(i).cmp(s)&&(p+=8);break;case"05":(d=e.mod(o)).cmp(c)&&d.cmp(l)&&(p+=8);break;default:p+=4}return f[r]=p,p}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new r(d(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(e){var a=(e=(e=new r(e)).toRed(this._prime)).redPow(this._priv).fromRed(),n=new t(a.toArray()),i=this.getPrime();if(n.length<i.length){var s=new t(i.length-n.length);s.fill(0),n=t.concat([s,n])}return n},m.prototype.getPublicKey=function(e){return g(this._pub,e)},m.prototype.getPrivateKey=function(e){return g(this._priv,e)},m.prototype.getPrime=function(e){return g(this.__prime,e)},m.prototype.getGenerator=function(e){return g(this._gen,e)},m.prototype.setGenerator=function(e,a){return a=a||"utf8",t.isBuffer(e)||(e=new t(e,a)),this.__gen=e,this._gen=new r(e),this}}).call(this,a(9).Buffer)},function(e,t,a){var r=a(171).Buffer,n=a(74),i=a(929),s=a(45),o=a(937),c=a(966),l=a(359);function u(e){i.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hashType=t.hash,this._hash=n(t.hash),this._tag=t.id,this._signType=t.sign}function d(e){i.Writable.call(this);var t=l[e];if(!t)throw new Error("Unknown message digest");this._hash=n(t.hash),this._tag=t.id,this._signType=t.sign}function p(e){return new u(e)}function h(e){return new d(e)}Object.keys(l).forEach((function(e){l[e].id=r.from(l[e].id,"hex"),l[e.toLowerCase()]=l[e]})),s(u,i.Writable),u.prototype._write=function(e,t,a){this._hash.update(e),a()},u.prototype.update=function(e,t){return"string"==typeof e&&(e=r.from(e,t)),this._hash.update(e),this},u.prototype.sign=function(e,t){this.end();var a=this._hash.digest(),r=o(a,e,this._hashType,this._signType,this._tag);return t?r.toString(t):r},s(d,i.Writable),d.prototype._write=function(e,t,a){this._hash.update(e),a()},d.prototype.update=function(e,t){return"string"==typeof e&&(e=r.from(e,t)),this._hash.update(e),this},d.prototype.verify=function(e,t,a){"string"==typeof t&&(t=r.from(t,a)),this.end();var n=this._hash.digest();return c(t,n,e,this._signType,this._tag)},e.exports={Sign:p,Verify:h,createSign:p,createVerify:h}},function(e,t,a){(t=e.exports=a(374)).Stream=t,t.Readable=t,t.Writable=a(378),t.Duplex=a(78),t.Transform=a(379),t.PassThrough=a(935),t.finished=a(172),t.pipeline=a(936)},function(e,t){},function(e,t,a){"use strict";function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=a(9).Buffer,o=a(932).inspect,c=o&&o.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,a,l;return t=e,(a=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,a=""+t.data;t=t.next;)a+=e+t.data;return a}},{key:"concat",value:function(e){if(0===this.length)return s.alloc(0);for(var t,a,r,n=s.allocUnsafe(e>>>0),i=this.head,o=0;i;)t=i.data,a=n,r=o,s.prototype.copy.call(t,a,r),o+=i.data.length,i=i.next;return n}},{key:"consume",value:function(e,t){var a;return e<this.head.data.length?(a=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):a=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,a=1,r=t.data;for(e-=r.length;t=t.next;){var n=t.data,i=e>n.length?n.length:e;if(i===n.length?r+=n:r+=n.slice(0,e),0==(e-=i)){i===n.length?(++a,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=n.slice(i));break}++a}return this.length-=a,r}},{key:"_getBuffer",value:function(e){var t=s.allocUnsafe(e),a=this.head,r=1;for(a.data.copy(t),e-=a.data.length;a=a.next;){var n=a.data,i=e>n.length?n.length:e;if(n.copy(t,t.length-e,0,i),0==(e-=i)){i===n.length?(++r,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=n.slice(i));break}++r}return this.length-=r,t}},{key:c,value:function(e,t){return o(this,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&i(t.prototype,a),l&&i(t,l),e}()},function(e,t){},function(e,t,a){"use strict";(function(t){var r;function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i=a(172),s=Symbol("lastResolve"),o=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),p=Symbol("stream");function h(e,t){return{value:e,done:t}}function f(e){var t=e[s];if(null!==t){var a=e[p].read();null!==a&&(e[u]=null,e[s]=null,e[o]=null,t(h(a,!1)))}}function m(e){t.nextTick(f,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((n(r={get stream(){return this[p]},next:function(){var e=this,a=this[c];if(null!==a)return Promise.reject(a);if(this[l])return Promise.resolve(h(void 0,!0));if(this[p].destroyed)return new Promise((function(a,r){t.nextTick((function(){e[c]?r(e[c]):a(h(void 0,!0))}))}));var r,n=this[u];if(n)r=new Promise(function(e,t){return function(a,r){e.then((function(){t[l]?a(h(void 0,!0)):t[d](a,r)}),r)}}(n,this));else{var i=this[p].read();if(null!==i)return Promise.resolve(h(i,!1));r=new Promise(this[d])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),n(r,"return",(function(){var e=this;return new Promise((function(t,a){e[p].destroy(null,(function(e){e?a(e):t(h(void 0,!0))}))}))})),r),g);e.exports=function(e){var t,a=Object.create(b,(n(t={},p,{value:e,writable:!0}),n(t,s,{value:null,writable:!0}),n(t,o,{value:null,writable:!0}),n(t,c,{value:null,writable:!0}),n(t,l,{value:e._readableState.endEmitted,writable:!0}),n(t,d,{value:function(e,t){var r=a[p].read();r?(a[u]=null,a[s]=null,a[o]=null,e(h(r,!1))):(a[s]=e,a[o]=t)},writable:!0}),t));return a[u]=null,i(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=a[o];return null!==t&&(a[u]=null,a[s]=null,a[o]=null,t(e)),void(a[c]=e)}var r=a[s];null!==r&&(a[u]=null,a[s]=null,a[o]=null,r(h(void 0,!0))),a[l]=!0})),e.on("readable",m.bind(null,a)),a}}).call(this,a(12))},function(e,t){e.exports=function(){throw new Error("Readable.from is not available in the browser")}},function(e,t,a){"use strict";e.exports=n;var r=a(379);function n(e){if(!(this instanceof n))return new n(e);r.call(this,e)}a(45)(n,r),n.prototype._transform=function(e,t,a){a(null,e)}},function(e,t,a){"use strict";var r;var n=a(77).codes,i=n.ERR_MISSING_ARGS,s=n.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function c(e,t,n,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var o=!1;e.on("close",(function(){o=!0})),void 0===r&&(r=a(172)),r(e,{readable:t,writable:n},(function(e){if(e)return i(e);o=!0,i()}));var c=!1;return function(t){if(!o&&!c)return c=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void i(t||new s("pipe"))}}function l(e){e()}function u(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}e.exports=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r,n=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new i("streams");var s=t.map((function(e,a){var i=a<t.length-1;return c(e,i,a>0,(function(e){r||(r=e),e&&s.forEach(l),i||(s.forEach(l),n(r))}))}));return t.reduce(u)}},function(e,t,a){var r=a(171).Buffer,n=a(357),i=a(173),s=a(380).ec,o=a(385),c=a(121),l=a(391);function u(e,t,a,i){if((e=r.from(e.toArray())).length<t.byteLength()){var s=r.alloc(t.byteLength()-e.length);e=r.concat([s,e])}var o=a.length,c=function(e,t){e=(e=d(e,t)).mod(t);var a=r.from(e.toArray());if(a.length<t.byteLength()){var n=r.alloc(t.byteLength()-a.length);a=r.concat([n,a])}return a}(a,t),l=r.alloc(o);l.fill(1);var u=r.alloc(o);return u=n(i,u).update(l).update(r.from([0])).update(e).update(c).digest(),l=n(i,u).update(l).digest(),{k:u=n(i,u).update(l).update(r.from([1])).update(e).update(c).digest(),v:l=n(i,u).update(l).digest()}}function d(e,t){var a=new o(e),r=(e.length<<3)-t.bitLength();return r>0&&a.ishrn(r),a}function p(e,t,a){var i,s;do{for(i=r.alloc(0);8*i.length<e.bitLength();)t.v=n(a,t.k).update(t.v).digest(),i=r.concat([i,t.v]);s=d(i,e),t.k=n(a,t.k).update(t.v).update(r.from([0])).digest(),t.v=n(a,t.k).update(t.v).digest()}while(-1!==s.cmp(e));return s}function h(e,t,a,r){return e.toRed(o.mont(a)).redPow(t).fromRed().mod(r)}e.exports=function(e,t,a,n,f){var m=c(t);if(m.curve){if("ecdsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");return function(e,t){var a=l[t.curve.join(".")];if(!a)throw new Error("unknown curve "+t.curve.join("."));var n=new s(a).keyFromPrivate(t.privateKey).sign(e);return r.from(n.toDER())}(e,m)}if("dsa"===m.type){if("dsa"!==n)throw new Error("wrong private key type");return function(e,t,a){var n,i=t.params.priv_key,s=t.params.p,c=t.params.q,l=t.params.g,f=new o(0),m=d(e,c).mod(c),g=!1,b=u(i,c,e,a);for(;!1===g;)n=p(c,b,a),f=h(l,n,s,c),0===(g=n.invm(c).imul(m.add(i.mul(f))).mod(c)).cmpn(0)&&(g=!1,f=new o(0));return function(e,t){e=e.toArray(),t=t.toArray(),128&e[0]&&(e=[0].concat(e));128&t[0]&&(t=[0].concat(t));var a=[48,e.length+t.length+4,2,e.length];return a=a.concat(e,[2,t.length],t),r.from(a)}(f,g)}(e,m,a)}if("rsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");e=r.concat([f,e]);for(var g=m.modulus.byteLength(),b=[0,1];e.length+b.length+1<g;)b.push(255);b.push(0);for(var y=-1;++y<e.length;)b.push(e[y]);return i(b,m)},e.exports.getKey=u,e.exports.makeKey=p},function(e){e.exports=JSON.parse('{"_from":"elliptic@^6.5.3","_id":"elliptic@6.5.3","_inBundle":false,"_integrity":"sha512-IMqzv5wNQf+E6aHeIqATs0tOLeOTwj1QKbRcS3jBbYkl5oLAserA8yJTT7/VyHUYG91PRmPyeQDObKLPpeS4dw==","_location":"/browserify-sign/elliptic","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"elliptic@^6.5.3","name":"elliptic","escapedName":"elliptic","rawSpec":"^6.5.3","saveSpec":null,"fetchSpec":"^6.5.3"},"_requiredBy":["/browserify-sign"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.3.tgz","_shasum":"cb59eb2efdaf73a0bd78ccd7015a62ad6e0f93d6","_spec":"elliptic@^6.5.3","_where":"/opt/saito-lite/node_modules/browserify-sign","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"bundleDependencies":false,"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},"deprecated":false,"description":"EC cryptography","devDependencies":{"brfs":"^1.4.3","coveralls":"^3.0.8","grunt":"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.2","jscs":"^3.0.7","jshint":"^2.10.3","mocha":"^6.2.2"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.3"}')},function(e,t){},function(e,t,a){"use strict";var r=a(28),n=a(46),i=a(45),s=a(120),o=r.assert;function c(e){s.call(this,"short",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(e,t,a,r){s.BasePoint.call(this,e,"affine"),null===t&&null===a?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(t,16),this.y=new n(a,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,a,r){s.BasePoint.call(this,e,"jacobian"),null===t&&null===a&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(t,16),this.y=new n(a,16),this.z=new n(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}i(c,s),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,a;if(e.beta)t=new n(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)a=new n(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?a=i[0]:(a=i[1],o(0===this.g.mul(a).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:a,basis:e.basis?e.basis.map((function(e){return{a:new n(e.a,16),b:new n(e.b,16)}})):this._getEndoBasis(a)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:n.mont(e),a=new n(2).toRed(t).redInvm(),r=a.redNeg(),i=new n(3).toRed(t).redNeg().redSqrt().redMul(a);return[r.redAdd(i).fromRed(),r.redSub(i).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,a,r,i,s,o,c,l,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),p=e,h=this.n.clone(),f=new n(1),m=new n(0),g=new n(0),b=new n(1),y=0;0!==p.cmpn(0);){var v=h.div(p);l=h.sub(v.mul(p)),u=g.sub(v.mul(f));var _=b.sub(v.mul(m));if(!r&&l.cmp(d)<0)t=c.neg(),a=f,r=l.neg(),i=u;else if(r&&2==++y)break;c=l,h=p,p=l,g=f,f=u,b=m,m=_}s=l.neg(),o=u;var w=r.sqr().add(i.sqr());return s.sqr().add(o.sqr()).cmp(w)>=0&&(s=t,o=a),r.negative&&(r=r.neg(),i=i.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:r,b:i},{a:s,b:o}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,a=t[0],r=t[1],n=r.b.mul(e).divRound(this.n),i=a.b.neg().mul(e).divRound(this.n),s=n.mul(a.a),o=i.mul(r.a),c=n.mul(a.b),l=i.mul(r.b);return{k1:e.sub(s).sub(o),k2:c.add(l).neg()}},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var a=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=a.redSqrt();if(0!==r.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var i=r.fromRed().isOdd();return(t&&!i||!t&&i)&&(r=r.redNeg()),this.point(e,r)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,a=e.y,r=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===a.redSqr().redISub(n).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,a){for(var r=this._endoWnafT1,n=this._endoWnafT2,i=0;i<e.length;i++){var s=this._endoSplit(t[i]),o=e[i],c=o._getBeta();s.k1.negative&&(s.k1.ineg(),o=o.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),r[2*i]=o,r[2*i+1]=c,n[2*i]=s.k1,n[2*i+1]=s.k2}for(var l=this._wnafMulAdd(1,r,n,2*i,a),u=0;u<2*i;u++)r[u]=null,n[u]=null;return l},i(l,s.BasePoint),c.prototype.point=function(e,t,a){return new l(this,e,t,a)},c.prototype.pointFromJSON=function(e,t){return l.fromJSON(this,e,t)},l.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var a=this.curve,r=function(e){return a.point(e.x.redMul(a.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(e,t,a){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],a);if(!t[2])return r;function n(t){return e.point(t[0],t[1],a)}var i=t[2];return r.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[r].concat(i.doubles.points.map(n))},naf:i.naf&&{wnd:i.naf.wnd,points:[r].concat(i.naf.points.map(n))}},r},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var a=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,r)},l.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,a=this.x.redSqr(),r=e.redInvm(),n=a.redAdd(a).redIAdd(a).redIAdd(t).redMul(r),i=n.redSqr().redISub(this.x.redAdd(this.x)),s=n.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(e){return e=new n(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,a){var r=[this,t],n=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(r,n):this.curve._wnafMulAdd(1,r,n,2)},l.prototype.jmulAdd=function(e,t,a){var r=[this,t],n=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(r,n,!0):this.curve._wnafMulAdd(1,r,n,2,!0)},l.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},l.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var a=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(r)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(r)}}}return t},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},i(u,s.BasePoint),c.prototype.jpoint=function(e,t,a){return new u(this,e,t,a)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),a=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(a,r)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),a=this.z.redSqr(),r=this.x.redMul(t),n=e.x.redMul(a),i=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(a.redMul(this.z)),o=r.redSub(n),c=i.redSub(s);if(0===o.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=o.redSqr(),u=l.redMul(o),d=r.redMul(l),p=c.redSqr().redIAdd(u).redISub(d).redISub(d),h=c.redMul(d.redISub(p)).redISub(i.redMul(u)),f=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(p,h,f)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),a=this.x,r=e.x.redMul(t),n=this.y,i=e.y.redMul(t).redMul(this.z),s=a.redSub(r),o=n.redSub(i);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),u=a.redMul(c),d=o.redSqr().redIAdd(l).redISub(u).redISub(u),p=o.redMul(u.redISub(d)).redISub(n.redMul(l)),h=this.z.redMul(s);return this.curve.jpoint(d,p,h)},u.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,a=0;a<e;a++)t=t.dbl();return t}var r=this.curve.a,n=this.curve.tinv,i=this.x,s=this.y,o=this.z,c=o.redSqr().redSqr(),l=s.redAdd(s);for(a=0;a<e;a++){var u=i.redSqr(),d=l.redSqr(),p=d.redSqr(),h=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(c)),f=i.redMul(d),m=h.redSqr().redISub(f.redAdd(f)),g=f.redISub(m),b=h.redMul(g);b=b.redIAdd(b).redISub(p);var y=l.redMul(o);a+1<e&&(c=c.redMul(p)),i=m,o=y,l=b}return this.curve.jpoint(i,l.redMul(n),o)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var e,t,a;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),i=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(r).redISub(i);s=s.redIAdd(s);var o=r.redAdd(r).redIAdd(r),c=o.redSqr().redISub(s).redISub(s),l=i.redIAdd(i);l=(l=l.redIAdd(l)).redIAdd(l),e=c,t=o.redMul(s.redISub(c)).redISub(l),a=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),p=d.redSqr(),h=this.x.redAdd(d).redSqr().redISub(u).redISub(p);h=h.redIAdd(h);var f=u.redAdd(u).redIAdd(u),m=f.redSqr(),g=p.redIAdd(p);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(h).redISub(h),t=f.redMul(h.redISub(e)).redISub(g),a=(a=this.y.redMul(this.z)).redIAdd(a)}return this.curve.jpoint(e,t,a)},u.prototype._threeDbl=function(){var e,t,a;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),i=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(r).redISub(i);s=s.redIAdd(s);var o=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),c=o.redSqr().redISub(s).redISub(s);e=c;var l=i.redIAdd(i);l=(l=l.redIAdd(l)).redIAdd(l),t=o.redMul(s.redISub(c)).redISub(l),a=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),p=this.x.redMul(d),h=this.x.redSub(u).redMul(this.x.redAdd(u));h=h.redAdd(h).redIAdd(h);var f=p.redIAdd(p),m=(f=f.redIAdd(f)).redAdd(f);e=h.redSqr().redISub(m),a=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=h.redMul(f.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,a)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,a=this.y,r=this.z,n=r.redSqr().redSqr(),i=t.redSqr(),s=a.redSqr(),o=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(n)),c=t.redAdd(t),l=(c=c.redIAdd(c)).redMul(s),u=o.redSqr().redISub(l.redAdd(l)),d=l.redISub(u),p=s.redSqr();p=(p=(p=p.redIAdd(p)).redIAdd(p)).redIAdd(p);var h=o.redMul(d).redISub(p),f=a.redAdd(a).redMul(r);return this.curve.jpoint(u,h,f)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),a=this.z.redSqr(),r=t.redSqr(),n=e.redAdd(e).redIAdd(e),i=n.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(r),o=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(i)).redSqr(),c=r.redIAdd(r);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var l=n.redIAdd(s).redSqr().redISub(i).redISub(o).redISub(c),u=t.redMul(l);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(o).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var p=this.y.redMul(l.redMul(c.redISub(l)).redISub(s.redMul(o)));p=(p=(p=p.redIAdd(p)).redIAdd(p)).redIAdd(p);var h=this.z.redAdd(s).redSqr().redISub(a).redISub(o);return this.curve.jpoint(d,p,h)},u.prototype.mul=function(e,t){return e=new n(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),a=e.z.redSqr();if(0!==this.x.redMul(a).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),n=a.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(r)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),a=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(a))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(a.redIAdd(n),0===this.x.cmp(a))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,a){"use strict";var r=a(46),n=a(45),i=a(120),s=a(28);function o(e){i.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,a){i.BasePoint.call(this,e,"projective"),null===t&&null===a?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(o,i),e.exports=o,o.prototype.validate=function(e){var t=e.normalize().x,a=t.redSqr(),r=a.redMul(t).redAdd(a.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},n(c,i.BasePoint),o.prototype.decodePoint=function(e,t){return this.point(s.toArray(e,t),1)},o.prototype.point=function(e,t){return new c(this,e,t)},o.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),a=e.redSub(t),r=e.redMul(t),n=a.redMul(t.redAdd(this.curve.a24.redMul(a)));return this.curve.point(r,n)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var a=this.x.redAdd(this.z),r=this.x.redSub(this.z),n=e.x.redAdd(e.z),i=e.x.redSub(e.z).redMul(a),s=n.redMul(r),o=t.z.redMul(i.redAdd(s).redSqr()),c=t.x.redMul(i.redISub(s).redSqr());return this.curve.point(o,c)},c.prototype.mul=function(e){for(var t=e.clone(),a=this,r=this.curve.point(null,null),n=[];0!==t.cmpn(0);t.iushrn(1))n.push(t.andln(1));for(var i=n.length-1;i>=0;i--)0===n[i]?(a=a.diffAdd(r,this),r=r.dbl()):(r=a.diffAdd(r,this),a=a.dbl());return r},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,a){"use strict";var r=a(28),n=a(46),i=a(45),s=a(120),o=r.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,s.call(this,"edwards",e),this.a=new n(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function l(e,t,a,r,i){s.BasePoint.call(this,e,"projective"),null===t&&null===a&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(t,16),this.y=new n(a,16),this.z=r?new n(r,16):this.curve.one,this.t=i&&new n(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}i(c,s),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,a,r){return this.point(e,t,a,r)},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var a=e.redSqr(),r=this.c2.redSub(this.a.redMul(a)),i=this.one.redSub(this.c2.redMul(this.d).redMul(a)),s=r.redMul(i.redInvm()),o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var c=o.fromRed().isOdd();return(t&&!c||!t&&c)&&(o=o.redNeg()),this.point(e,o)},c.prototype.pointFromY=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var a=e.redSqr(),r=a.redSub(this.c2),i=a.redMul(this.d).redMul(this.c2).redSub(this.a),s=r.redMul(i.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),a=e.y.redSqr(),r=t.redMul(this.a).redAdd(a),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(a)));return 0===r.cmp(n)},i(l,s.BasePoint),c.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},c.prototype.point=function(e,t,a,r){return new l(this,e,t,a,r)},l.fromJSON=function(e,t){return new l(e,t[0],t[1],t[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),a=this.z.redSqr();a=a.redIAdd(a);var r=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),i=r.redAdd(t),s=i.redSub(a),o=r.redSub(t),c=n.redMul(s),l=i.redMul(o),u=n.redMul(o),d=s.redMul(i);return this.curve.point(c,l,d,u)},l.prototype._projDbl=function(){var e,t,a,r=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),i=this.y.redSqr();if(this.curve.twisted){var s=(l=this.curve._mulA(n)).redAdd(i);if(this.zOne)e=r.redSub(n).redSub(i).redMul(s.redSub(this.curve.two)),t=s.redMul(l.redSub(i)),a=s.redSqr().redSub(s).redSub(s);else{var o=this.z.redSqr(),c=s.redSub(o).redISub(o);e=r.redSub(n).redISub(i).redMul(c),t=s.redMul(l.redSub(i)),a=s.redMul(c)}}else{var l=n.redAdd(i);o=this.curve._mulC(this.z).redSqr(),c=l.redSub(o).redSub(o);e=this.curve._mulC(r.redISub(l)).redMul(c),t=this.curve._mulC(l).redMul(n.redISub(i)),a=l.redMul(c)}return this.curve.point(e,t,a)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),a=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),i=a.redSub(t),s=n.redSub(r),o=n.redAdd(r),c=a.redAdd(t),l=i.redMul(s),u=o.redMul(c),d=i.redMul(c),p=s.redMul(o);return this.curve.point(l,u,p,d)},l.prototype._projAdd=function(e){var t,a,r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),c=n.redSub(o),l=n.redAdd(o),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),d=r.redMul(c).redMul(u);return this.curve.twisted?(t=r.redMul(l).redMul(s.redSub(this.curve._mulA(i))),a=c.redMul(l)):(t=r.redMul(l).redMul(s.redSub(i)),a=this.curve._mulC(c).redMul(l)),this.curve.point(d,t,a)},l.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},l.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,a){return this.curve._wnafMulAdd(1,[this,t],[e,a],2,!1)},l.prototype.jmulAdd=function(e,t,a){return this.curve._wnafMulAdd(1,[this,t],[e,a],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},l.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var a=e.clone(),r=this.curve.redN.redMul(this.z);;){if(a.iadd(this.curve.n),a.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},function(e,t,a){"use strict";t.sha1=a(944),t.sha224=a(945),t.sha256=a(383),t.sha384=a(946),t.sha512=a(384)},function(e,t,a){"use strict";var r=a(41),n=a(90),i=a(382),s=r.rotl32,o=r.sum32,c=r.sum32_5,l=i.ft_1,u=n.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function p(){if(!(this instanceof p))return new p;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(p,u),e.exports=p,p.blockSize=512,p.outSize=160,p.hmacStrength=80,p.padLength=64,p.prototype._update=function(e,t){for(var a=this.W,r=0;r<16;r++)a[r]=e[t+r];for(;r<a.length;r++)a[r]=s(a[r-3]^a[r-8]^a[r-14]^a[r-16],1);var n=this.h[0],i=this.h[1],u=this.h[2],p=this.h[3],h=this.h[4];for(r=0;r<a.length;r++){var f=~~(r/20),m=c(s(n,5),l(f,i,u,p),h,a[r],d[f]);h=p,p=u,u=s(i,30),i=n,n=m}this.h[0]=o(this.h[0],n),this.h[1]=o(this.h[1],i),this.h[2]=o(this.h[2],u),this.h[3]=o(this.h[3],p),this.h[4]=o(this.h[4],h)},p.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(e,t,a){"use strict";var r=a(41),n=a(383);function i(){if(!(this instanceof i))return new i;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(i,n),e.exports=i,i.blockSize=512,i.outSize=224,i.hmacStrength=192,i.padLength=64,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},function(e,t,a){"use strict";var r=a(41),n=a(384);function i(){if(!(this instanceof i))return new i;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(i,n),e.exports=i,i.blockSize=1024,i.outSize=384,i.hmacStrength=192,i.padLength=128,i.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},function(e,t,a){"use strict";var r=a(41),n=a(90),i=r.rotl32,s=r.sum32,o=r.sum32_3,c=r.sum32_4,l=n.BlockHash;function u(){if(!(this instanceof u))return new u;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,a,r){return e<=15?t^a^r:e<=31?t&a|~t&r:e<=47?(t|~a)^r:e<=63?t&r|a&~r:t^(a|~r)}function p(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function h(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}r.inherits(u,l),t.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(e,t){for(var a=this.h[0],r=this.h[1],n=this.h[2],l=this.h[3],u=this.h[4],y=a,v=r,_=n,w=l,x=u,k=0;k<80;k++){var S=s(i(c(a,d(k,r,n,l),e[f[k]+t],p(k)),g[k]),u);a=u,u=l,l=i(n,10),n=r,r=S,S=s(i(c(y,d(79-k,v,_,w),e[m[k]+t],h(k)),b[k]),x),y=x,x=w,w=i(_,10),_=v,v=S}S=o(this.h[1],n,w),this.h[1]=o(this.h[2],l,x),this.h[2]=o(this.h[3],u,y),this.h[3]=o(this.h[4],a,v),this.h[4]=o(this.h[0],r,_),this.h[0]=S},u.prototype._digest=function(e){return"hex"===e?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var f=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],b=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(e,t,a){"use strict";var r=a(41),n=a(20);function i(e,t,a){if(!(this instanceof i))return new i(e,t,a);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(t,a))}e.exports=i,i.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),n(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},i.prototype.update=function(e,t){return this.inner.update(e,t),this},i.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,a){"use strict";var r=a(46),n=a(175),i=a(28),s=a(174),o=a(65),c=i.assert,l=a(951),u=a(952);function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(c(s.hasOwnProperty(e),"Unknown curve "+e),e=s[e]),e instanceof s.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new l(this,e)},d.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new n({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||o(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),a=this.n.byteLength(),i=this.n.sub(new r(2));;){var s=new r(t.generate(a));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},d.prototype._truncateToN=function(e,t){var a=8*e.byteLength()-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,a,i){"object"==typeof a&&(i=a,a=null),i||(i={}),t=this.keyFromPrivate(t,a),e=this._truncateToN(new r(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),c=e.toArray("be",s),l=new n({hash:this.hash,entropy:o,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),d=this.n.sub(new r(1)),p=0;;p++){var h=i.k?i.k(p):new r(l.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(d)>=0)){var f=this.g.mul(h);if(!f.isInfinity()){var m=f.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var b=h.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var y=(f.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return i.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),y^=1),new u({r:g,s:b,recoveryParam:y})}}}}}},d.prototype.verify=function(e,t,a,n){e=this._truncateToN(new r(e,16)),a=this.keyFromPublic(a,n);var i=(t=new u(t,"hex")).r,s=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,c=s.invm(this.n),l=c.mul(e).umod(this.n),d=c.mul(i).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(l,a.getPublic(),d)).isInfinity()&&o.eqXToP(i):!(o=this.g.mulAdd(l,a.getPublic(),d)).isInfinity()&&0===o.getX().umod(this.n).cmp(i)},d.prototype.recoverPubKey=function(e,t,a,n){c((3&a)===a,"The recovery param is more than two bits"),t=new u(t,n);var i=this.n,s=new r(e),o=t.r,l=t.s,d=1&a,p=a>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&p)throw new Error("Unable to find sencond key candinate");o=p?this.curve.pointFromX(o.add(this.curve.n),d):this.curve.pointFromX(o,d);var h=t.r.invm(i),f=i.sub(s).mul(h).umod(i),m=l.mul(h).umod(i);return this.g.mulAdd(f,o,m)},d.prototype.getKeyRecoveryParam=function(e,t,a,r){if(null!==(t=new u(t,r)).recoveryParam)return t.recoveryParam;for(var n=0;n<4;n++){var i;try{i=this.recoverPubKey(e,t,n)}catch(e){continue}if(i.eq(a))return n}throw new Error("Unable to find valid recovery factor")}},function(e,t,a){"use strict";var r=a(46),n=a(28).assert;function i(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=i,i.fromPublic=function(e,t,a){return t instanceof i?t:new i(e,{pub:t,pubEnc:a})},i.fromPrivate=function(e,t,a){return t instanceof i?t:new i(e,{priv:t,privEnc:a})},i.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},i.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?n(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},i.prototype.derive=function(e){return e.mul(this.priv).getX()},i.prototype.sign=function(e,t,a){return this.ec.sign(e,this,t,a)},i.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,a){"use strict";var r=a(46),n=a(28),i=n.assert;function s(e,t){if(e instanceof s)return e;this._importDER(e,t)||(i(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function o(){this.place=0}function c(e,t){var a=e[t.place++];if(!(128&a))return a;var r=15&a;if(0===r||r>4)return!1;for(var n=0,i=0,s=t.place;i<r;i++,s++)n<<=8,n|=e[s],n>>>=0;return!(n<=127)&&(t.place=s,n)}function l(e){for(var t=0,a=e.length-1;!e[t]&&!(128&e[t+1])&&t<a;)t++;return 0===t?e:e.slice(t)}function u(e,t){if(t<128)e.push(t);else{var a=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|a);--a;)e.push(t>>>(a<<3)&255);e.push(t)}}e.exports=s,s.prototype._importDER=function(e,t){e=n.toArray(e,t);var a=new o;if(48!==e[a.place++])return!1;var i=c(e,a);if(!1===i)return!1;if(i+a.place!==e.length)return!1;if(2!==e[a.place++])return!1;var s=c(e,a);if(!1===s)return!1;var l=e.slice(a.place,s+a.place);if(a.place+=s,2!==e[a.place++])return!1;var u=c(e,a);if(!1===u)return!1;if(e.length!==u+a.place)return!1;var d=e.slice(a.place,u+a.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new r(l),this.s=new r(d),this.recoveryParam=null,!0},s.prototype.toDER=function(e){var t=this.r.toArray(),a=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&a[0]&&(a=[0].concat(a)),t=l(t),a=l(a);!(a[0]||128&a[1]);)a=a.slice(1);var r=[2];u(r,t.length),(r=r.concat(t)).push(2),u(r,a.length);var i=r.concat(a),s=[48];return u(s,i.length),s=s.concat(i),n.encode(s,e)}},function(e,t,a){"use strict";var r=a(66),n=a(174),i=a(28),s=i.assert,o=i.parseBytes,c=a(954),l=a(955);function u(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);e=n[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}e.exports=u,u.prototype.sign=function(e,t){e=o(e);var a=this.keyFromSecret(t),r=this.hashInt(a.messagePrefix(),e),n=this.g.mul(r),i=this.encodePoint(n),s=this.hashInt(i,a.pubBytes(),e).mul(a.priv()),c=r.add(s).umod(this.curve.n);return this.makeSignature({R:n,S:c,Rencoded:i})},u.prototype.verify=function(e,t,a){e=o(e),t=this.makeSignature(t);var r=this.keyFromPublic(a),n=this.hashInt(t.Rencoded(),r.pubBytes(),e),i=this.g.mul(t.S());return t.R().add(r.pub().mul(n)).eq(i)},u.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return i.intFromLE(e.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=i.parseBytes(e)).length-1,a=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),n=i.intFromLE(a);return this.curve.pointFromY(n,r)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return i.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,a){"use strict";var r=a(28),n=r.assert,i=r.parseBytes,s=r.cachedProperty;function o(e,t){this.eddsa=e,this._secret=i(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=i(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},s(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),a=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[a]&=127,r[a]|=64,r})),s(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return n(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},o.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},e.exports=o},function(e,t,a){"use strict";var r=a(46),n=a(28),i=n.assert,s=n.cachedProperty,o=n.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),i(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},function(e,t){},function(e,t,a){"use strict";var r=a(386);t.certificate=a(963);var n=r.define("RSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())}));t.RSAPrivateKey=n;var i=r.define("RSAPublicKey",(function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())}));t.RSAPublicKey=i;var s=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}));t.PublicKey=s;var o=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())})),c=r.define("PrivateKeyInfo",(function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(o),this.key("subjectPrivateKey").octstr())}));t.PrivateKey=c;var l=r.define("EncryptedPrivateKeyInfo",(function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())}));t.EncryptedPrivateKey=l;var u=r.define("DSAPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())}));t.DSAPrivateKey=u,t.DSAparam=r.define("DSAparam",(function(){this.int()}));var d=r.define("ECPrivateKey",(function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(p),this.key("publicKey").optional().explicit(1).bitstr())}));t.ECPrivateKey=d;var p=r.define("ECParameters",(function(){this.choice({namedCurve:this.objid()})}));t.signature=r.define("signature",(function(){this.seq().obj(this.key("r").int(),this.key("s").int())}))},function(e,t,a){"use strict";const r=a(387),n=a(389),i=a(1);function s(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}t.define=function(e,t){return new s(e,t)},s.prototype._createNamed=function(e){const t=this.name;function a(e){this._initNamed(e,t)}return i(a,e),a.prototype._initNamed=function(t,a){e.call(this,t,a)},new a(this)},s.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(n[e])),this.decoders[e]},s.prototype.decode=function(e,t,a){return this._getDecoder(t).decode(e,a)},s.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(r[e])),this.encoders[e]},s.prototype.encode=function(e,t,a){return this._getEncoder(t).encode(e,a)}},function(e,t,a){"use strict";const r=a(1),n=a(388);function i(e){n.call(this,e),this.enc="pem"}r(i,n),e.exports=i,i.prototype.encode=function(e,t){const a=n.prototype.encode.call(this,e).toString("base64"),r=["-----BEGIN "+t.label+"-----"];for(let e=0;e<a.length;e+=64)r.push(a.slice(e,e+64));return r.push("-----END "+t.label+"-----"),r.join("\n")}},function(e,t,a){"use strict";const r=a(1),n=a(176).Buffer,i=a(390);function s(e){i.call(this,e),this.enc="pem"}r(s,i),e.exports=s,s.prototype.decode=function(e,t){const a=e.toString().split(/[\r\n]+/g),r=t.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/;let o=-1,c=-1;for(let e=0;e<a.length;e++){const t=a[e].match(s);if(null!==t&&t[2]===r){if(-1!==o){if("END"!==t[1])break;c=e;break}if("BEGIN"!==t[1])break;o=e}}if(-1===o||-1===c)throw new Error("PEM section not found for: "+r);const l=a.slice(o+1,c).join("");l.replace(/[^a-z0-9+/=]+/gi,"");const u=n.from(l,"base64");return i.prototype.decode.call(this,u,t)}},function(e,t,a){"use strict";const r=t;r.Reporter=a(178).Reporter,r.DecoderBuffer=a(91).DecoderBuffer,r.EncoderBuffer=a(91).EncoderBuffer,r.Node=a(177)},function(e,t,a){"use strict";const r=t;r._reverse=function(e){const t={};return Object.keys(e).forEach((function(a){(0|a)==a&&(a|=0);const r=e[a];t[r]=a})),t},r.der=a(179)},function(e,t,a){"use strict";var r=a(386),n=r.define("Time",(function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})})),i=r.define("AttributeTypeValue",(function(){this.seq().obj(this.key("type").objid(),this.key("value").any())})),s=r.define("AlgorithmIdentifier",(function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())})),o=r.define("SubjectPublicKeyInfo",(function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())})),c=r.define("RelativeDistinguishedName",(function(){this.setof(i)})),l=r.define("RDNSequence",(function(){this.seqof(c)})),u=r.define("Name",(function(){this.choice({rdnSequence:this.use(l)})})),d=r.define("Validity",(function(){this.seq().obj(this.key("notBefore").use(n),this.key("notAfter").use(n))})),p=r.define("Extension",(function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())})),h=r.define("TBSCertificate",(function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(s),this.key("issuer").use(u),this.key("validity").use(d),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(p).optional())})),f=r.define("X509Certificate",(function(){this.seq().obj(this.key("tbsCertificate").use(h),this.key("signatureAlgorithm").use(s),this.key("signatureValue").bitstr())}));e.exports=f},function(e){e.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},function(e,t,a){var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,i=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,s=a(118),o=a(169),c=a(2).Buffer;e.exports=function(e,t){var a,l=e.toString(),u=l.match(r);if(u){var d="aes"+u[1],p=c.from(u[2],"hex"),h=c.from(u[3].replace(/[\r\n]/g,""),"base64"),f=s(t,p.slice(0,8),parseInt(u[1],10)).key,m=[],g=o.createDecipheriv(d,f,p);m.push(g.update(h)),m.push(g.final()),a=c.concat(m)}else{var b=l.match(i);a=c.from(b[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(n)[1],data:a}}},function(e,t,a){var r=a(171).Buffer,n=a(385),i=a(380).ec,s=a(121),o=a(391);function c(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=t)throw new Error("invalid sig")}e.exports=function(e,t,a,l,u){var d=s(a);if("ec"===d.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(e,t,a){var r=o[a.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+a.data.algorithm.curve.join("."));var n=new i(r),s=a.data.subjectPrivateKey.data;return n.verify(t,e,s)}(e,t,d)}if("dsa"===d.type){if("dsa"!==l)throw new Error("wrong public key type");return function(e,t,a){var r=a.data.p,i=a.data.q,o=a.data.g,l=a.data.pub_key,u=s.signature.decode(e,"der"),d=u.s,p=u.r;c(d,i),c(p,i);var h=n.mont(r),f=d.invm(i);return 0===o.toRed(h).redPow(new n(t).mul(f).mod(i)).fromRed().mul(l.toRed(h).redPow(p.mul(f).mod(i)).fromRed()).mod(r).mod(i).cmp(p)}(e,t,d)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");t=r.concat([u,t]);for(var p=d.modulus.byteLength(),h=[1],f=0;t.length+h.length+2<p;)h.push(255),f++;h.push(0);for(var m=-1;++m<t.length;)h.push(t[m]);h=r.from(h);var g=n.mont(d.modulus);e=(e=new n(e).toRed(g)).redPow(new n(d.publicExponent)),e=r.from(e.fromRed().toArray());var b=f<8?1:0;for(p=Math.min(e.length,h.length),e.length!==h.length&&(b=1),m=-1;++m<p;)b|=e[m]^h[m];return 0===b}},function(e,t,a){(function(t){var r=a(968),n=a(8);e.exports=function(e){return new s(e)};var i={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function s(e){this.curveType=i[e],this.curveType||(this.curveType={name:e}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function o(e,a,r){Array.isArray(e)||(e=e.toArray());var n=new t(e);if(r&&n.length<r){var i=new t(r-n.length);i.fill(0),n=t.concat([i,n])}return a?n.toString(a):n}i.p224=i.secp224r1,i.p256=i.secp256r1=i.prime256v1,i.p192=i.secp192r1=i.prime192v1,i.p384=i.secp384r1,i.p521=i.secp521r1,s.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},s.prototype.computeSecret=function(e,a,r){return a=a||"utf8",t.isBuffer(e)||(e=new t(e,a)),o(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},s.prototype.getPublicKey=function(e,t){var a=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(a[a.length-1]%2?a[0]=7:a[0]=6),o(a,e)},s.prototype.getPrivateKey=function(e){return o(this.keys.getPrivate(),e)},s.prototype.setPublicKey=function(e,a){return a=a||"utf8",t.isBuffer(e)||(e=new t(e,a)),this.keys._importPublic(e),this},s.prototype.setPrivateKey=function(e,a){a=a||"utf8",t.isBuffer(e)||(e=new t(e,a));var r=new n(e);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}).call(this,a(9).Buffer)},function(e,t,a){"use strict";var r=t;r.version=a(969).version,r.utils=a(29),r.rand=a(65),r.curve=a(392),r.curves=a(180),r.ec=a(974),r.eddsa=a(977)},function(e){e.exports=JSON.parse('{"_from":"elliptic@^6.5.3","_id":"elliptic@6.5.3","_inBundle":false,"_integrity":"sha512-IMqzv5wNQf+E6aHeIqATs0tOLeOTwj1QKbRcS3jBbYkl5oLAserA8yJTT7/VyHUYG91PRmPyeQDObKLPpeS4dw==","_location":"/create-ecdh/elliptic","_phantomChildren":{},"_requested":{"type":"range","registry":true,"raw":"elliptic@^6.5.3","name":"elliptic","escapedName":"elliptic","rawSpec":"^6.5.3","saveSpec":null,"fetchSpec":"^6.5.3"},"_requiredBy":["/create-ecdh"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.3.tgz","_shasum":"cb59eb2efdaf73a0bd78ccd7015a62ad6e0f93d6","_spec":"elliptic@^6.5.3","_where":"/opt/saito-lite/node_modules/create-ecdh","author":{"name":"Fedor Indutny","email":"fedor@indutny.com"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"bundleDependencies":false,"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},"deprecated":false,"description":"EC cryptography","devDependencies":{"brfs":"^1.4.3","coveralls":"^3.0.8","grunt":"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.2","jscs":"^3.0.7","jshint":"^2.10.3","mocha":"^6.2.2"},"files":["lib"],"homepage":"https://github.com/indutny/elliptic","keywords":["EC","Elliptic","curve","Cryptography"],"license":"MIT","main":"lib/elliptic.js","name":"elliptic","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.3"}')},function(e,t,a){"use strict";var r=a(29),n=a(8),i=a(1),s=a(122),o=r.assert;function c(e){s.call(this,"short",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(e,t,a,r){s.BasePoint.call(this,e,"affine"),null===t&&null===a?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(t,16),this.y=new n(a,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,a,r){s.BasePoint.call(this,e,"jacobian"),null===t&&null===a&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(t,16),this.y=new n(a,16),this.z=new n(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}i(c,s),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,a;if(e.beta)t=new n(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)a=new n(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?a=i[0]:(a=i[1],o(0===this.g.mul(a).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:a,basis:e.basis?e.basis.map((function(e){return{a:new n(e.a,16),b:new n(e.b,16)}})):this._getEndoBasis(a)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:n.mont(e),a=new n(2).toRed(t).redInvm(),r=a.redNeg(),i=new n(3).toRed(t).redNeg().redSqrt().redMul(a);return[r.redAdd(i).fromRed(),r.redSub(i).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,a,r,i,s,o,c,l,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),p=e,h=this.n.clone(),f=new n(1),m=new n(0),g=new n(0),b=new n(1),y=0;0!==p.cmpn(0);){var v=h.div(p);l=h.sub(v.mul(p)),u=g.sub(v.mul(f));var _=b.sub(v.mul(m));if(!r&&l.cmp(d)<0)t=c.neg(),a=f,r=l.neg(),i=u;else if(r&&2==++y)break;c=l,h=p,p=l,g=f,f=u,b=m,m=_}s=l.neg(),o=u;var w=r.sqr().add(i.sqr());return s.sqr().add(o.sqr()).cmp(w)>=0&&(s=t,o=a),r.negative&&(r=r.neg(),i=i.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:r,b:i},{a:s,b:o}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,a=t[0],r=t[1],n=r.b.mul(e).divRound(this.n),i=a.b.neg().mul(e).divRound(this.n),s=n.mul(a.a),o=i.mul(r.a),c=n.mul(a.b),l=i.mul(r.b);return{k1:e.sub(s).sub(o),k2:c.add(l).neg()}},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var a=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=a.redSqrt();if(0!==r.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var i=r.fromRed().isOdd();return(t&&!i||!t&&i)&&(r=r.redNeg()),this.point(e,r)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,a=e.y,r=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===a.redSqr().redISub(n).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,a){for(var r=this._endoWnafT1,n=this._endoWnafT2,i=0;i<e.length;i++){var s=this._endoSplit(t[i]),o=e[i],c=o._getBeta();s.k1.negative&&(s.k1.ineg(),o=o.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),r[2*i]=o,r[2*i+1]=c,n[2*i]=s.k1,n[2*i+1]=s.k2}for(var l=this._wnafMulAdd(1,r,n,2*i,a),u=0;u<2*i;u++)r[u]=null,n[u]=null;return l},i(l,s.BasePoint),c.prototype.point=function(e,t,a){return new l(this,e,t,a)},c.prototype.pointFromJSON=function(e,t){return l.fromJSON(this,e,t)},l.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var a=this.curve,r=function(e){return a.point(e.x.redMul(a.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(e,t,a){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],a);if(!t[2])return r;function n(t){return e.point(t[0],t[1],a)}var i=t[2];return r.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[r].concat(i.doubles.points.map(n))},naf:i.naf&&{wnd:i.naf.wnd,points:[r].concat(i.naf.points.map(n))}},r},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var a=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,r)},l.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,a=this.x.redSqr(),r=e.redInvm(),n=a.redAdd(a).redIAdd(a).redIAdd(t).redMul(r),i=n.redSqr().redISub(this.x.redAdd(this.x)),s=n.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(e){return e=new n(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,a){var r=[this,t],n=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(r,n):this.curve._wnafMulAdd(1,r,n,2)},l.prototype.jmulAdd=function(e,t,a){var r=[this,t],n=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(r,n,!0):this.curve._wnafMulAdd(1,r,n,2,!0)},l.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},l.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var a=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(r)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(r)}}}return t},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},i(u,s.BasePoint),c.prototype.jpoint=function(e,t,a){return new u(this,e,t,a)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),a=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(a,r)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),a=this.z.redSqr(),r=this.x.redMul(t),n=e.x.redMul(a),i=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(a.redMul(this.z)),o=r.redSub(n),c=i.redSub(s);if(0===o.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=o.redSqr(),u=l.redMul(o),d=r.redMul(l),p=c.redSqr().redIAdd(u).redISub(d).redISub(d),h=c.redMul(d.redISub(p)).redISub(i.redMul(u)),f=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(p,h,f)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),a=this.x,r=e.x.redMul(t),n=this.y,i=e.y.redMul(t).redMul(this.z),s=a.redSub(r),o=n.redSub(i);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),u=a.redMul(c),d=o.redSqr().redIAdd(l).redISub(u).redISub(u),p=o.redMul(u.redISub(d)).redISub(n.redMul(l)),h=this.z.redMul(s);return this.curve.jpoint(d,p,h)},u.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,a=0;a<e;a++)t=t.dbl();return t}var r=this.curve.a,n=this.curve.tinv,i=this.x,s=this.y,o=this.z,c=o.redSqr().redSqr(),l=s.redAdd(s);for(a=0;a<e;a++){var u=i.redSqr(),d=l.redSqr(),p=d.redSqr(),h=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(c)),f=i.redMul(d),m=h.redSqr().redISub(f.redAdd(f)),g=f.redISub(m),b=h.redMul(g);b=b.redIAdd(b).redISub(p);var y=l.redMul(o);a+1<e&&(c=c.redMul(p)),i=m,o=y,l=b}return this.curve.jpoint(i,l.redMul(n),o)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var e,t,a;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),i=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(r).redISub(i);s=s.redIAdd(s);var o=r.redAdd(r).redIAdd(r),c=o.redSqr().redISub(s).redISub(s),l=i.redIAdd(i);l=(l=l.redIAdd(l)).redIAdd(l),e=c,t=o.redMul(s.redISub(c)).redISub(l),a=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),p=d.redSqr(),h=this.x.redAdd(d).redSqr().redISub(u).redISub(p);h=h.redIAdd(h);var f=u.redAdd(u).redIAdd(u),m=f.redSqr(),g=p.redIAdd(p);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(h).redISub(h),t=f.redMul(h.redISub(e)).redISub(g),a=(a=this.y.redMul(this.z)).redIAdd(a)}return this.curve.jpoint(e,t,a)},u.prototype._threeDbl=function(){var e,t,a;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),i=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(r).redISub(i);s=s.redIAdd(s);var o=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),c=o.redSqr().redISub(s).redISub(s);e=c;var l=i.redIAdd(i);l=(l=l.redIAdd(l)).redIAdd(l),t=o.redMul(s.redISub(c)).redISub(l),a=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),p=this.x.redMul(d),h=this.x.redSub(u).redMul(this.x.redAdd(u));h=h.redAdd(h).redIAdd(h);var f=p.redIAdd(p),m=(f=f.redIAdd(f)).redAdd(f);e=h.redSqr().redISub(m),a=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=h.redMul(f.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,a)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,a=this.y,r=this.z,n=r.redSqr().redSqr(),i=t.redSqr(),s=a.redSqr(),o=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(n)),c=t.redAdd(t),l=(c=c.redIAdd(c)).redMul(s),u=o.redSqr().redISub(l.redAdd(l)),d=l.redISub(u),p=s.redSqr();p=(p=(p=p.redIAdd(p)).redIAdd(p)).redIAdd(p);var h=o.redMul(d).redISub(p),f=a.redAdd(a).redMul(r);return this.curve.jpoint(u,h,f)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),a=this.z.redSqr(),r=t.redSqr(),n=e.redAdd(e).redIAdd(e),i=n.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(r),o=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(i)).redSqr(),c=r.redIAdd(r);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var l=n.redIAdd(s).redSqr().redISub(i).redISub(o).redISub(c),u=t.redMul(l);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(o).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var p=this.y.redMul(l.redMul(c.redISub(l)).redISub(s.redMul(o)));p=(p=(p=p.redIAdd(p)).redIAdd(p)).redIAdd(p);var h=this.z.redAdd(s).redSqr().redISub(a).redISub(o);return this.curve.jpoint(d,p,h)},u.prototype.mul=function(e,t){return e=new n(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),a=e.z.redSqr();if(0!==this.x.redMul(a).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),n=a.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(r)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),a=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(a))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(a.redIAdd(n),0===this.x.cmp(a))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,a){"use strict";var r=a(8),n=a(1),i=a(122),s=a(29);function o(e){i.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,a){i.BasePoint.call(this,e,"projective"),null===t&&null===a?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(o,i),e.exports=o,o.prototype.validate=function(e){var t=e.normalize().x,a=t.redSqr(),r=a.redMul(t).redAdd(a.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},n(c,i.BasePoint),o.prototype.decodePoint=function(e,t){return this.point(s.toArray(e,t),1)},o.prototype.point=function(e,t){return new c(this,e,t)},o.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),a=e.redSub(t),r=e.redMul(t),n=a.redMul(t.redAdd(this.curve.a24.redMul(a)));return this.curve.point(r,n)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var a=this.x.redAdd(this.z),r=this.x.redSub(this.z),n=e.x.redAdd(e.z),i=e.x.redSub(e.z).redMul(a),s=n.redMul(r),o=t.z.redMul(i.redAdd(s).redSqr()),c=t.x.redMul(i.redISub(s).redSqr());return this.curve.point(o,c)},c.prototype.mul=function(e){for(var t=e.clone(),a=this,r=this.curve.point(null,null),n=[];0!==t.cmpn(0);t.iushrn(1))n.push(t.andln(1));for(var i=n.length-1;i>=0;i--)0===n[i]?(a=a.diffAdd(r,this),r=r.dbl()):(r=a.diffAdd(r,this),a=a.dbl());return r},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,a){"use strict";var r=a(29),n=a(8),i=a(1),s=a(122),o=r.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,s.call(this,"edwards",e),this.a=new n(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function l(e,t,a,r,i){s.BasePoint.call(this,e,"projective"),null===t&&null===a&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(t,16),this.y=new n(a,16),this.z=r?new n(r,16):this.curve.one,this.t=i&&new n(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}i(c,s),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,a,r){return this.point(e,t,a,r)},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var a=e.redSqr(),r=this.c2.redSub(this.a.redMul(a)),i=this.one.redSub(this.c2.redMul(this.d).redMul(a)),s=r.redMul(i.redInvm()),o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var c=o.fromRed().isOdd();return(t&&!c||!t&&c)&&(o=o.redNeg()),this.point(e,o)},c.prototype.pointFromY=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var a=e.redSqr(),r=a.redSub(this.c2),i=a.redMul(this.d).redMul(this.c2).redSub(this.a),s=r.redMul(i.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),a=e.y.redSqr(),r=t.redMul(this.a).redAdd(a),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(a)));return 0===r.cmp(n)},i(l,s.BasePoint),c.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},c.prototype.point=function(e,t,a,r){return new l(this,e,t,a,r)},l.fromJSON=function(e,t){return new l(e,t[0],t[1],t[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),a=this.z.redSqr();a=a.redIAdd(a);var r=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),i=r.redAdd(t),s=i.redSub(a),o=r.redSub(t),c=n.redMul(s),l=i.redMul(o),u=n.redMul(o),d=s.redMul(i);return this.curve.point(c,l,d,u)},l.prototype._projDbl=function(){var e,t,a,r=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),i=this.y.redSqr();if(this.curve.twisted){var s=(l=this.curve._mulA(n)).redAdd(i);if(this.zOne)e=r.redSub(n).redSub(i).redMul(s.redSub(this.curve.two)),t=s.redMul(l.redSub(i)),a=s.redSqr().redSub(s).redSub(s);else{var o=this.z.redSqr(),c=s.redSub(o).redISub(o);e=r.redSub(n).redISub(i).redMul(c),t=s.redMul(l.redSub(i)),a=s.redMul(c)}}else{var l=n.redAdd(i);o=this.curve._mulC(this.z).redSqr(),c=l.redSub(o).redSub(o);e=this.curve._mulC(r.redISub(l)).redMul(c),t=this.curve._mulC(l).redMul(n.redISub(i)),a=l.redMul(c)}return this.curve.point(e,t,a)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),a=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),i=a.redSub(t),s=n.redSub(r),o=n.redAdd(r),c=a.redAdd(t),l=i.redMul(s),u=o.redMul(c),d=i.redMul(c),p=s.redMul(o);return this.curve.point(l,u,p,d)},l.prototype._projAdd=function(e){var t,a,r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),c=n.redSub(o),l=n.redAdd(o),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),d=r.redMul(c).redMul(u);return this.curve.twisted?(t=r.redMul(l).redMul(s.redSub(this.curve._mulA(i))),a=c.redMul(l)):(t=r.redMul(l).redMul(s.redSub(i)),a=this.curve._mulC(c).redMul(l)),this.curve.point(d,t,a)},l.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},l.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,a){return this.curve._wnafMulAdd(1,[this,t],[e,a],2,!1)},l.prototype.jmulAdd=function(e,t,a){return this.curve._wnafMulAdd(1,[this,t],[e,a],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},l.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var a=e.clone(),r=this.curve.redN.redMul(this.z);;){if(a.iadd(this.curve.n),a.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,a){"use strict";var r=a(8),n=a(175),i=a(29),s=a(180),o=a(65),c=i.assert,l=a(975),u=a(976);function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(c(s.hasOwnProperty(e),"Unknown curve "+e),e=s[e]),e instanceof s.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new l(this,e)},d.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new n({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||o(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),a=this.n.byteLength(),i=this.n.sub(new r(2));;){var s=new r(t.generate(a));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},d.prototype._truncateToN=function(e,t){var a=8*e.byteLength()-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,a,i){"object"==typeof a&&(i=a,a=null),i||(i={}),t=this.keyFromPrivate(t,a),e=this._truncateToN(new r(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),c=e.toArray("be",s),l=new n({hash:this.hash,entropy:o,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),d=this.n.sub(new r(1)),p=0;;p++){var h=i.k?i.k(p):new r(l.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(d)>=0)){var f=this.g.mul(h);if(!f.isInfinity()){var m=f.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var b=h.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var y=(f.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return i.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),y^=1),new u({r:g,s:b,recoveryParam:y})}}}}}},d.prototype.verify=function(e,t,a,n){e=this._truncateToN(new r(e,16)),a=this.keyFromPublic(a,n);var i=(t=new u(t,"hex")).r,s=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,c=s.invm(this.n),l=c.mul(e).umod(this.n),d=c.mul(i).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(l,a.getPublic(),d)).isInfinity()&&o.eqXToP(i):!(o=this.g.mulAdd(l,a.getPublic(),d)).isInfinity()&&0===o.getX().umod(this.n).cmp(i)},d.prototype.recoverPubKey=function(e,t,a,n){c((3&a)===a,"The recovery param is more than two bits"),t=new u(t,n);var i=this.n,s=new r(e),o=t.r,l=t.s,d=1&a,p=a>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&p)throw new Error("Unable to find sencond key candinate");o=p?this.curve.pointFromX(o.add(this.curve.n),d):this.curve.pointFromX(o,d);var h=t.r.invm(i),f=i.sub(s).mul(h).umod(i),m=l.mul(h).umod(i);return this.g.mulAdd(f,o,m)},d.prototype.getKeyRecoveryParam=function(e,t,a,r){if(null!==(t=new u(t,r)).recoveryParam)return t.recoveryParam;for(var n=0;n<4;n++){var i;try{i=this.recoverPubKey(e,t,n)}catch(e){continue}if(i.eq(a))return n}throw new Error("Unable to find valid recovery factor")}},function(e,t,a){"use strict";var r=a(8),n=a(29).assert;function i(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=i,i.fromPublic=function(e,t,a){return t instanceof i?t:new i(e,{pub:t,pubEnc:a})},i.fromPrivate=function(e,t,a){return t instanceof i?t:new i(e,{priv:t,privEnc:a})},i.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},i.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?n(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},i.prototype.derive=function(e){return e.mul(this.priv).getX()},i.prototype.sign=function(e,t,a){return this.ec.sign(e,this,t,a)},i.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,a){"use strict";var r=a(8),n=a(29),i=n.assert;function s(e,t){if(e instanceof s)return e;this._importDER(e,t)||(i(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function o(){this.place=0}function c(e,t){var a=e[t.place++];if(!(128&a))return a;var r=15&a;if(0===r||r>4)return!1;for(var n=0,i=0,s=t.place;i<r;i++,s++)n<<=8,n|=e[s],n>>>=0;return!(n<=127)&&(t.place=s,n)}function l(e){for(var t=0,a=e.length-1;!e[t]&&!(128&e[t+1])&&t<a;)t++;return 0===t?e:e.slice(t)}function u(e,t){if(t<128)e.push(t);else{var a=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|a);--a;)e.push(t>>>(a<<3)&255);e.push(t)}}e.exports=s,s.prototype._importDER=function(e,t){e=n.toArray(e,t);var a=new o;if(48!==e[a.place++])return!1;var i=c(e,a);if(!1===i)return!1;if(i+a.place!==e.length)return!1;if(2!==e[a.place++])return!1;var s=c(e,a);if(!1===s)return!1;var l=e.slice(a.place,s+a.place);if(a.place+=s,2!==e[a.place++])return!1;var u=c(e,a);if(!1===u)return!1;if(e.length!==u+a.place)return!1;var d=e.slice(a.place,u+a.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new r(l),this.s=new r(d),this.recoveryParam=null,!0},s.prototype.toDER=function(e){var t=this.r.toArray(),a=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&a[0]&&(a=[0].concat(a)),t=l(t),a=l(a);!(a[0]||128&a[1]);)a=a.slice(1);var r=[2];u(r,t.length),(r=r.concat(t)).push(2),u(r,a.length);var i=r.concat(a),s=[48];return u(s,i.length),s=s.concat(i),n.encode(s,e)}},function(e,t,a){"use strict";var r=a(66),n=a(180),i=a(29),s=i.assert,o=i.parseBytes,c=a(978),l=a(979);function u(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);e=n[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}e.exports=u,u.prototype.sign=function(e,t){e=o(e);var a=this.keyFromSecret(t),r=this.hashInt(a.messagePrefix(),e),n=this.g.mul(r),i=this.encodePoint(n),s=this.hashInt(i,a.pubBytes(),e).mul(a.priv()),c=r.add(s).umod(this.curve.n);return this.makeSignature({R:n,S:c,Rencoded:i})},u.prototype.verify=function(e,t,a){e=o(e),t=this.makeSignature(t);var r=this.keyFromPublic(a),n=this.hashInt(t.Rencoded(),r.pubBytes(),e),i=this.g.mul(t.S());return t.R().add(r.pub().mul(n)).eq(i)},u.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return i.intFromLE(e.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=i.parseBytes(e)).length-1,a=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),n=i.intFromLE(a);return this.curve.pointFromY(n,r)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return i.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,a){"use strict";var r=a(29),n=r.assert,i=r.parseBytes,s=r.cachedProperty;function o(e,t){this.eddsa=e,this._secret=i(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=i(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},s(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),a=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[a]&=127,r[a]|=64,r})),s(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return n(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},o.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},e.exports=o},function(e,t,a){"use strict";var r=a(8),n=a(29),i=n.assert,s=n.cachedProperty,o=n.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),i(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},function(e,t,a){t.publicEncrypt=a(981),t.privateDecrypt=a(982),t.privateEncrypt=function(e,a){return t.publicEncrypt(e,a,!0)},t.publicDecrypt=function(e,a){return t.privateDecrypt(e,a,!0)}},function(e,t,a){var r=a(121),n=a(73),i=a(74),s=a(393),o=a(394),c=a(8),l=a(395),u=a(173),d=a(2).Buffer;e.exports=function(e,t,a){var p;p=e.padding?e.padding:a?1:4;var h,f=r(e);if(4===p)h=function(e,t){var a=e.modulus.byteLength(),r=t.length,l=i("sha1").update(d.alloc(0)).digest(),u=l.length,p=2*u;if(r>a-p-2)throw new Error("message too long");var h=d.alloc(a-r-p-2),f=a-u-1,m=n(u),g=o(d.concat([l,h,d.alloc(1,1),t],f),s(m,f)),b=o(m,s(g,u));return new c(d.concat([d.alloc(1),b,g],a))}(f,t);else if(1===p)h=function(e,t,a){var r,i=t.length,s=e.modulus.byteLength();if(i>s-11)throw new Error("message too long");r=a?d.alloc(s-i-3,255):function(e){var t,a=d.allocUnsafe(e),r=0,i=n(2*e),s=0;for(;r<e;)s===i.length&&(i=n(2*e),s=0),(t=i[s++])&&(a[r++]=t);return a}(s-i-3);return new c(d.concat([d.from([0,a?1:2]),r,d.alloc(1),t],s))}(f,t,a);else{if(3!==p)throw new Error("unknown padding");if((h=new c(t)).cmp(f.modulus)>=0)throw new Error("data too long for modulus")}return a?u(h,f):l(h,f)}},function(e,t,a){var r=a(121),n=a(393),i=a(394),s=a(8),o=a(173),c=a(74),l=a(395),u=a(2).Buffer;e.exports=function(e,t,a){var d;d=e.padding?e.padding:a?1:4;var p,h=r(e),f=h.modulus.byteLength();if(t.length>f||new s(t).cmp(h.modulus)>=0)throw new Error("decryption error");p=a?l(new s(t),h):o(t,h);var m=u.alloc(f-p.length);if(p=u.concat([m,p],f),4===d)return function(e,t){var a=e.modulus.byteLength(),r=c("sha1").update(u.alloc(0)).digest(),s=r.length;if(0!==t[0])throw new Error("decryption error");var o=t.slice(1,s+1),l=t.slice(s+1),d=i(o,n(l,s)),p=i(l,n(d,a-s-1));if(function(e,t){e=u.from(e),t=u.from(t);var a=0,r=e.length;e.length!==t.length&&(a++,r=Math.min(e.length,t.length));var n=-1;for(;++n<r;)a+=e[n]^t[n];return a}(r,p.slice(0,s)))throw new Error("decryption error");var h=s;for(;0===p[h];)h++;if(1!==p[h++])throw new Error("decryption error");return p.slice(h)}(h,p);if(1===d)return function(e,t,a){var r=t.slice(0,2),n=2,i=0;for(;0!==t[n++];)if(n>=t.length){i++;break}var s=t.slice(2,n-1);("0002"!==r.toString("hex")&&!a||"0001"!==r.toString("hex")&&a)&&i++;s.length<8&&i++;if(i)throw new Error("decryption error");return t.slice(n)}(0,p,a);if(3===d)return p;throw new Error("unknown padding")}},function(e,t,a){"use strict";(function(e,r){function n(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var i=a(2),s=a(73),o=i.Buffer,c=i.kMaxLength,l=e.crypto||e.msCrypto,u=Math.pow(2,32)-1;function d(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>u||e<0)throw new TypeError("offset must be a uint32");if(e>c||e>t)throw new RangeError("offset out of range")}function p(e,t,a){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>u||e<0)throw new TypeError("size must be a uint32");if(e+t>a||e>c)throw new RangeError("buffer too small")}function h(e,t,a,n){if(r.browser){var i=e.buffer,o=new Uint8Array(i,t,a);return l.getRandomValues(o),n?void r.nextTick((function(){n(null,e)})):e}if(!n)return s(a).copy(e,t),e;s(a,(function(a,r){if(a)return n(a);r.copy(e,t),n(null,e)}))}l&&l.getRandomValues||!r.browser?(t.randomFill=function(t,a,r,n){if(!(o.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof a)n=a,a=0,r=t.length;else if("function"==typeof r)n=r,r=t.length-a;else if("function"!=typeof n)throw new TypeError('"cb" argument must be a function');return d(a,t.length),p(r,a,t.length),h(t,a,r,n)},t.randomFillSync=function(t,a,r){void 0===a&&(a=0);if(!(o.isBuffer(t)||t instanceof e.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');d(a,t.length),void 0===r&&(r=t.length-a);return p(r,a,t.length),h(t,a,r)}):(t.randomFill=n,t.randomFillSync=n)}).call(this,a(17),a(12))},function(e,t,a){!function(t){"use strict";var r={};e.exports?(r.bytesToHex=a(985).bytesToHex,r.convertString=a(986),e.exports=o):(r.bytesToHex=t.convertHex.bytesToHex,r.convertString=t.convertString,t.sha256=o);var n=[];!function(){function e(e){for(var t=Math.sqrt(e),a=2;a<=t;a++)if(!(e%a))return!1;return!0}function t(e){return 4294967296*(e-(0|e))|0}for(var a=2,r=0;r<64;)e(a)&&(n[r]=t(Math.pow(a,1/3)),r++),a++}();var i=[],s=function(e,t,a){for(var r=e[0],s=e[1],o=e[2],c=e[3],l=e[4],u=e[5],d=e[6],p=e[7],h=0;h<64;h++){if(h<16)i[h]=0|t[a+h];else{var f=i[h-15],m=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,g=i[h-2],b=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;i[h]=m+i[h-7]+b+i[h-16]}var y=r&s^r&o^s&o,v=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),_=p+((l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25))+(l&u^~l&d)+n[h]+i[h];p=d,d=u,u=l,l=c+_|0,c=o,o=s,s=r,r=_+(v+y)|0}e[0]=e[0]+r|0,e[1]=e[1]+s|0,e[2]=e[2]+o|0,e[3]=e[3]+c|0,e[4]=e[4]+l|0,e[5]=e[5]+u|0,e[6]=e[6]+d|0,e[7]=e[7]+p|0};function o(e,t){e.constructor===String&&(e=r.convertString.UTF8.stringToBytes(e));var a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],n=function(e){for(var t=[],a=0,r=0;a<e.length;a++,r+=8)t[r>>>5]|=e[a]<<24-r%32;return t}(e),i=8*e.length;n[i>>5]|=128<<24-i%32,n[15+(i+64>>9<<4)]=i;for(var o=0;o<n.length;o+=16)s(a,n,o);var c=function(e){for(var t=[],a=0;a<32*e.length;a+=8)t.push(e[a>>>5]>>>24-a%32&255);return t}(a);return t&&t.asBytes?c:t&&t.asString?r.convertString.bytesToString(c):r.bytesToHex(c)}o.x2=function(e,t){return o(o(e,{asBytes:!0}),t)}}(this)},function(e,t,a){!function(t){"use strict";var a={bytesToHex:function(e){return function(e){return e.map((function(e){return t=e.toString(16),a=2,t.length>a?t:Array(a-t.length+1).join("0")+t;var t,a})).join("")}(e)},hexToBytes:function(e){if(e.length%2==1)throw new Error("hexToBytes can't have a string with an odd number of characters.");return 0===e.indexOf("0x")&&(e=e.slice(2)),e.match(/../g).map((function(e){return parseInt(e,16)}))}};e.exports?e.exports=a:t.convertHex=a}(this)},function(e,t,a){!function(t){"use strict";var a={bytesToString:function(e){return e.map((function(e){return String.fromCharCode(e)})).join("")},stringToBytes:function(e){return e.split("").map((function(e){return e.charCodeAt(0)}))}};a.UTF8={bytesToString:function(e){return decodeURIComponent(escape(a.bytesToString(e)))},stringToBytes:function(e){return a.stringToBytes(unescape(encodeURIComponent(e)))}},e.exports?e.exports=a:t.convertString=a}(this)},function(e,t,a){var r=a(67).CryptoJS;a(988),a(989),a(990),a(991),a(992);var n=a(993).JsonFormatter;t.CryptoJS=r,t.JsonFormatter=n},function(e,t,a){var r,n,i=a(67).CryptoJS;n=(r=i).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,a=e.sigBytes,r=this._map;e.clamp();for(var n=[],i=0;i<a;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;o<4&&i+.75*o<a;o++)n.push(r.charAt(s>>>6*(3-o)&63));var c=r.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(e){var t=e.length,a=this._map,r=a.charAt(64);if(r){var i=e.indexOf(r);-1!=i&&(t=i)}for(var s=[],o=0,c=0;c<t;c++)if(c%4){var l=a.indexOf(e.charAt(c-1))<<c%4*2,u=a.indexOf(e.charAt(c))>>>6-c%4*2;s[o>>>2]|=(l|u)<<24-o%4*8,o++}return n.create(s,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},function(e,t,a){var r=a(67).CryptoJS;!function(e){var t=r,a=t.lib,n=a.WordArray,i=a.Hasher,s=t.algo,o=[];!function(){for(var t=0;t<64;t++)o[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=s.MD5=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;a<16;a++){var r=t+a,n=e[r];e[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var i=this._hash.words,s=e[t+0],c=e[t+1],h=e[t+2],f=e[t+3],m=e[t+4],g=e[t+5],b=e[t+6],y=e[t+7],v=e[t+8],_=e[t+9],w=e[t+10],x=e[t+11],k=e[t+12],S=e[t+13],P=e[t+14],E=e[t+15],C=i[0],A=i[1],M=i[2],T=i[3];C=l(C,A,M,T,s,7,o[0]),T=l(T,C,A,M,c,12,o[1]),M=l(M,T,C,A,h,17,o[2]),A=l(A,M,T,C,f,22,o[3]),C=l(C,A,M,T,m,7,o[4]),T=l(T,C,A,M,g,12,o[5]),M=l(M,T,C,A,b,17,o[6]),A=l(A,M,T,C,y,22,o[7]),C=l(C,A,M,T,v,7,o[8]),T=l(T,C,A,M,_,12,o[9]),M=l(M,T,C,A,w,17,o[10]),A=l(A,M,T,C,x,22,o[11]),C=l(C,A,M,T,k,7,o[12]),T=l(T,C,A,M,S,12,o[13]),M=l(M,T,C,A,P,17,o[14]),C=u(C,A=l(A,M,T,C,E,22,o[15]),M,T,c,5,o[16]),T=u(T,C,A,M,b,9,o[17]),M=u(M,T,C,A,x,14,o[18]),A=u(A,M,T,C,s,20,o[19]),C=u(C,A,M,T,g,5,o[20]),T=u(T,C,A,M,w,9,o[21]),M=u(M,T,C,A,E,14,o[22]),A=u(A,M,T,C,m,20,o[23]),C=u(C,A,M,T,_,5,o[24]),T=u(T,C,A,M,P,9,o[25]),M=u(M,T,C,A,f,14,o[26]),A=u(A,M,T,C,v,20,o[27]),C=u(C,A,M,T,S,5,o[28]),T=u(T,C,A,M,h,9,o[29]),M=u(M,T,C,A,y,14,o[30]),C=d(C,A=u(A,M,T,C,k,20,o[31]),M,T,g,4,o[32]),T=d(T,C,A,M,v,11,o[33]),M=d(M,T,C,A,x,16,o[34]),A=d(A,M,T,C,P,23,o[35]),C=d(C,A,M,T,c,4,o[36]),T=d(T,C,A,M,m,11,o[37]),M=d(M,T,C,A,y,16,o[38]),A=d(A,M,T,C,w,23,o[39]),C=d(C,A,M,T,S,4,o[40]),T=d(T,C,A,M,s,11,o[41]),M=d(M,T,C,A,f,16,o[42]),A=d(A,M,T,C,b,23,o[43]),C=d(C,A,M,T,_,4,o[44]),T=d(T,C,A,M,k,11,o[45]),M=d(M,T,C,A,E,16,o[46]),C=p(C,A=d(A,M,T,C,h,23,o[47]),M,T,s,6,o[48]),T=p(T,C,A,M,y,10,o[49]),M=p(M,T,C,A,P,15,o[50]),A=p(A,M,T,C,g,21,o[51]),C=p(C,A,M,T,k,6,o[52]),T=p(T,C,A,M,f,10,o[53]),M=p(M,T,C,A,w,15,o[54]),A=p(A,M,T,C,c,21,o[55]),C=p(C,A,M,T,v,6,o[56]),T=p(T,C,A,M,E,10,o[57]),M=p(M,T,C,A,b,15,o[58]),A=p(A,M,T,C,S,21,o[59]),C=p(C,A,M,T,m,6,o[60]),T=p(T,C,A,M,x,10,o[61]),M=p(M,T,C,A,h,15,o[62]),A=p(A,M,T,C,_,21,o[63]),i[0]=i[0]+C|0,i[1]=i[1]+A|0,i[2]=i[2]+M|0,i[3]=i[3]+T|0},_doFinalize:function(){var t=this._data,a=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;a[n>>>5]|=128<<24-n%32;var i=e.floor(r/4294967296),s=r;a[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),a[14+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(a.length+1),this._process();for(var o=this._hash,c=o.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return o},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,a,r,n,i,s){var o=e+(t&a|~t&r)+n+s;return(o<<i|o>>>32-i)+t}function u(e,t,a,r,n,i,s){var o=e+(t&r|a&~r)+n+s;return(o<<i|o>>>32-i)+t}function d(e,t,a,r,n,i,s){var o=e+(t^a^r)+n+s;return(o<<i|o>>>32-i)+t}function p(e,t,a,r,n,i,s){var o=e+(a^(t|~r))+n+s;return(o<<i|o>>>32-i)+t}t.MD5=i._createHelper(c),t.HmacMD5=i._createHmacHelper(c)}(Math)},function(e,t,a){var r,n,i,s,o,c,l,u=a(67).CryptoJS;n=(r=u).lib,i=n.Base,s=n.WordArray,o=r.algo,c=o.MD5,l=o.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a=this.cfg,r=a.hasher.create(),n=s.create(),i=n.words,o=a.keySize,c=a.iterations;i.length<o;){l&&r.update(l);var l=r.update(e).finalize(t);r.reset();for(var u=1;u<c;u++)l=r.finalize(l),r.reset();n.concat(l)}return n.sigBytes=4*o,n}}),r.EvpKDF=function(e,t,a){return l.create(a).compute(e,t)}},function(e,t,a){var r,n,i,s,o,c,l,u,d,p,h,f,m,g,b,y,v,_,w=a(67).CryptoJS;w.lib.Cipher||(n=(r=w).lib,i=n.Base,s=n.WordArray,o=n.BufferedBlockAlgorithm,(c=r.enc).Utf8,l=c.Base64,u=r.algo.EvpKDF,d=n.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,a){this.cfg=this.cfg.extend(a),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?_:y}return function(t){return{encrypt:function(a,r,n){return e(r).encrypt(t,a,r,n)},decrypt:function(a,r,n){return e(r).decrypt(t,a,r,n)}}}}()}),n.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),p=r.mode={},h=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=p.CBC=function(){var e=h.extend();function t(e,t,a){var r=this._iv;if(r){var n=r;this._iv=void 0}else n=this._prevBlock;for(var i=0;i<a;i++)e[t+i]^=n[i]}return e.Encryptor=e.extend({processBlock:function(e,a){var r=this._cipher,n=r.blockSize;t.call(this,e,a,n),r.encryptBlock(e,a),this._prevBlock=e.slice(a,a+n)}}),e.Decryptor=e.extend({processBlock:function(e,a){var r=this._cipher,n=r.blockSize,i=e.slice(a,a+n);r.decryptBlock(e,a),t.call(this,e,a,n),this._prevBlock=i}}),e}(),m=(r.pad={}).Pkcs7={pad:function(e,t){for(var a=4*t,r=a-e.sigBytes%a,n=r<<24|r<<16|r<<8|r,i=[],o=0;o<r;o+=4)i.push(n);var c=s.create(i,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.BlockCipher=d.extend({cfg:d.cfg.extend({mode:f,padding:m}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,a=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=a.createEncryptor;else r=a.createDecryptor,this._minBufferSize=1;this._mode=r.call(a,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),g=n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),b=(r.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,a=e.salt;if(a)var r=s.create([1398893684,1701076831]).concat(a).concat(t);else r=t;return r.toString(l)},parse:function(e){var t=l.parse(e),a=t.words;if(1398893684==a[0]&&1701076831==a[1]){var r=s.create(a.slice(2,4));a.splice(0,4),t.sigBytes-=16}return g.create({ciphertext:t,salt:r})}},y=n.SerializableCipher=i.extend({cfg:i.extend({format:b}),encrypt:function(e,t,a,r){r=this.cfg.extend(r);var n=e.createEncryptor(a,r),i=n.finalize(t),s=n.cfg;return g.create({ciphertext:i,key:a,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,a,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(a,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),v=(r.kdf={}).OpenSSL={execute:function(e,t,a,r){r||(r=s.random(8));var n=u.create({keySize:t+a}).compute(e,r),i=s.create(n.words.slice(t),4*a);return n.sigBytes=4*t,g.create({key:n,iv:i,salt:r})}},_=n.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:v}),encrypt:function(e,t,a,r){var n=(r=this.cfg.extend(r)).kdf.execute(a,e.keySize,e.ivSize);r.iv=n.iv;var i=y.encrypt.call(this,e,t,n.key,r);return i.mixIn(n),i},decrypt:function(e,t,a,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var n=r.kdf.execute(a,e.keySize,e.ivSize,t.salt);return r.iv=n.iv,y.decrypt.call(this,e,t,n.key,r)}}))},function(e,t,a){var r=a(67).CryptoJS;!function(){var e=r,t=e.lib.BlockCipher,a=e.algo,n=[],i=[],s=[],o=[],c=[],l=[],u=[],d=[],p=[],h=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var a=0,r=0;for(t=0;t<256;t++){var f=r^r<<1^r<<2^r<<3^r<<4;f=f>>>8^255&f^99,n[a]=f,i[f]=a;var m=e[a],g=e[m],b=e[g],y=257*e[f]^16843008*f;s[a]=y<<24|y>>>8,o[a]=y<<16|y>>>16,c[a]=y<<8|y>>>24,l[a]=y;y=16843009*b^65537*g^257*m^16843008*a;u[f]=y<<24|y>>>8,d[f]=y<<16|y>>>16,p[f]=y<<8|y>>>24,h[f]=y,a?(a=m^e[e[e[b^m]]],r^=e[e[r]]):a=r=1}}();var f=[0,1,2,4,8,16,32,64,128,27,54],m=a.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,a=e.sigBytes/4,r=4*((this._nRounds=a+6)+1),i=this._keySchedule=[],s=0;s<r;s++)if(s<a)i[s]=t[s];else{var o=i[s-1];s%a?a>6&&s%a==4&&(o=n[o>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o]):(o=n[(o=o<<8|o>>>24)>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o],o^=f[s/a|0]<<24),i[s]=i[s-a]^o}for(var c=this._invKeySchedule=[],l=0;l<r;l++){s=r-l;if(l%4)o=i[s];else o=i[s-4];c[l]=l<4||s<=4?o:u[n[o>>>24]]^d[n[o>>>16&255]]^p[n[o>>>8&255]]^h[n[255&o]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,o,c,l,n)},decryptBlock:function(e,t){var a=e[t+1];e[t+1]=e[t+3],e[t+3]=a,this._doCryptBlock(e,t,this._invKeySchedule,u,d,p,h,i);a=e[t+1];e[t+1]=e[t+3],e[t+3]=a},_doCryptBlock:function(e,t,a,r,n,i,s,o){for(var c=this._nRounds,l=e[t]^a[0],u=e[t+1]^a[1],d=e[t+2]^a[2],p=e[t+3]^a[3],h=4,f=1;f<c;f++){var m=r[l>>>24]^n[u>>>16&255]^i[d>>>8&255]^s[255&p]^a[h++],g=r[u>>>24]^n[d>>>16&255]^i[p>>>8&255]^s[255&l]^a[h++],b=r[d>>>24]^n[p>>>16&255]^i[l>>>8&255]^s[255&u]^a[h++],y=r[p>>>24]^n[l>>>16&255]^i[u>>>8&255]^s[255&d]^a[h++];l=m,u=g,d=b,p=y}m=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[d>>>8&255]<<8|o[255&p])^a[h++],g=(o[u>>>24]<<24|o[d>>>16&255]<<16|o[p>>>8&255]<<8|o[255&l])^a[h++],b=(o[d>>>24]<<24|o[p>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^a[h++],y=(o[p>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&d])^a[h++];e[t]=m,e[t+1]=g,e[t+2]=b,e[t+3]=y},keySize:8});e.AES=t._createHelper(m)}()},function(e,t,a){var r=a(67).CryptoJS,n={stringify:function(e){var t={ct:e.ciphertext.toString(r.enc.Base64)};return e.iv&&(t.iv=e.iv.toString()),e.salt&&(t.s=e.salt.toString()),JSON.stringify(t)},parse:function(e){var t=JSON.parse(e),a=r.lib.CipherParams.create({ciphertext:r.enc.Base64.parse(t.ct)});return t.iv&&(a.iv=r.enc.Hex.parse(t.iv)),t.s&&(a.salt=r.enc.Hex.parse(t.s)),a}};t.JsonFormatter=n},function(e,t,a){"use strict";e.exports=a(995)(a(999))},function(e,t,a){"use strict";var r=a(996),n=a(997),i=a(396);function s(e,t){return void 0===e?t:(r.isBoolean(e,i.COMPRESSED_TYPE_INVALID),e)}e.exports=function(e){return{privateKeyVerify:function(t){return r.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,a){r.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),a=s(a,!0);var o=e.privateKeyExport(t,a);return n.privateKeyExport(t,o,a)},privateKeyImport:function(t){if(r.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),(t=n.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(i.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return r.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return r.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,a){return r.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),r.isBuffer(a,i.TWEAK_TYPE_INVALID),r.isBufferLength(a,32,i.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,a)},privateKeyTweakMul:function(t,a){return r.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),r.isBuffer(a,i.TWEAK_TYPE_INVALID),r.isBufferLength(a,32,i.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,a)},publicKeyCreate:function(t,a){return r.isBuffer(t,i.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(t,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),a=s(a,!0),e.publicKeyCreate(t,a)},publicKeyConvert:function(t,a){return r.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),a=s(a,!0),e.publicKeyConvert(t,a)},publicKeyVerify:function(t){return r.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,a,n){return r.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),r.isBuffer(a,i.TWEAK_TYPE_INVALID),r.isBufferLength(a,32,i.TWEAK_LENGTH_INVALID),n=s(n,!0),e.publicKeyTweakAdd(t,a,n)},publicKeyTweakMul:function(t,a,n){return r.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),r.isBuffer(a,i.TWEAK_TYPE_INVALID),r.isBufferLength(a,32,i.TWEAK_LENGTH_INVALID),n=s(n,!0),e.publicKeyTweakMul(t,a,n)},publicKeyCombine:function(t,a){r.isArray(t,i.EC_PUBLIC_KEYS_TYPE_INVALID),r.isLengthGTZero(t,i.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var n=0;n<t.length;++n)r.isBuffer(t[n],i.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t[n],33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID);return a=s(a,!0),e.publicKeyCombine(t,a)},signatureNormalize:function(t){return r.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),r.isBufferLength(t,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){r.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),r.isBufferLength(t,64,i.ECDSA_SIGNATURE_LENGTH_INVALID);var a=e.signatureExport(t);return n.signatureExport(a)},signatureImport:function(t){r.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),r.isLengthGTZero(t,i.ECDSA_SIGNATURE_LENGTH_INVALID);var a=n.signatureImport(t);if(a)return e.signatureImport(a);throw new Error(i.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){r.isBuffer(t,i.ECDSA_SIGNATURE_TYPE_INVALID),r.isLengthGTZero(t,i.ECDSA_SIGNATURE_LENGTH_INVALID);var a=n.signatureImportLax(t);if(a)return e.signatureImport(a);throw new Error(i.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,a,n){r.isBuffer(t,i.MSG32_TYPE_INVALID),r.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),r.isBuffer(a,i.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(a,32,i.EC_PRIVATE_KEY_LENGTH_INVALID);var s=null,o=null;return void 0!==n&&(r.isObject(n,i.OPTIONS_TYPE_INVALID),void 0!==n.data&&(r.isBuffer(n.data,i.OPTIONS_DATA_TYPE_INVALID),r.isBufferLength(n.data,32,i.OPTIONS_DATA_LENGTH_INVALID),s=n.data),void 0!==n.noncefn&&(r.isFunction(n.noncefn,i.OPTIONS_NONCEFN_TYPE_INVALID),o=n.noncefn)),e.sign(t,a,o,s)},verify:function(t,a,n){return r.isBuffer(t,i.MSG32_TYPE_INVALID),r.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),r.isBuffer(a,i.ECDSA_SIGNATURE_TYPE_INVALID),r.isBufferLength(a,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),r.isBuffer(n,i.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(n,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,a,n)},recover:function(t,a,n,o){return r.isBuffer(t,i.MSG32_TYPE_INVALID),r.isBufferLength(t,32,i.MSG32_LENGTH_INVALID),r.isBuffer(a,i.ECDSA_SIGNATURE_TYPE_INVALID),r.isBufferLength(a,64,i.ECDSA_SIGNATURE_LENGTH_INVALID),r.isNumber(n,i.RECOVERY_ID_TYPE_INVALID),r.isNumberInInterval(n,-1,4,i.RECOVERY_ID_VALUE_INVALID),o=s(o,!0),e.recover(t,a,n,o)},ecdh:function(t,a){return r.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),r.isBuffer(a,i.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(a,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,a)},ecdhUnsafe:function(t,a,n){return r.isBuffer(t,i.EC_PUBLIC_KEY_TYPE_INVALID),r.isBufferLength2(t,33,65,i.EC_PUBLIC_KEY_LENGTH_INVALID),r.isBuffer(a,i.EC_PRIVATE_KEY_TYPE_INVALID),r.isBufferLength(a,32,i.EC_PRIVATE_KEY_LENGTH_INVALID),n=s(n,!0),e.ecdhUnsafe(t,a,n)}}}},function(e,t,a){"use strict";(function(e){var a=Object.prototype.toString;t.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},t.isBoolean=function(e,t){if("[object Boolean]"!==a.call(e))throw TypeError(t)},t.isBuffer=function(t,a){if(!e.isBuffer(t))throw TypeError(a)},t.isFunction=function(e,t){if("[object Function]"!==a.call(e))throw TypeError(t)},t.isNumber=function(e,t){if("[object Number]"!==a.call(e))throw TypeError(t)},t.isObject=function(e,t){if("[object Object]"!==a.call(e))throw TypeError(t)},t.isBufferLength=function(e,t,a){if(e.length!==t)throw RangeError(a)},t.isBufferLength2=function(e,t,a,r){if(e.length!==t&&e.length!==a)throw RangeError(r)},t.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},t.isNumberInInterval=function(e,t,a,r){if(e<=t||e>=a)throw RangeError(r)}}).call(this,a(9).Buffer)},function(e,t,a){"use strict";var r=a(2).Buffer,n=a(998),i=r.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),s=r.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);t.privateKeyExport=function(e,t,a){var n=r.from(a?i:s);return e.copy(n,a?8:9),t.copy(n,a?181:214),n},t.privateKeyImport=function(e){var t=e.length,a=0;if(!(t<a+1||48!==e[a])&&!(t<(a+=1)+1)&&128&e[a]){var r=127&e[a];if(a+=1,!(r<1||r>2||t<a+r)){var n=e[a+r-1]|(r>1?e[a+r-2]<<8:0);if(!(t<(a+=r)+n||t<a+3||2!==e[a]||1!==e[a+1]||1!==e[a+2]||t<(a+=3)+2||4!==e[a]||e[a+1]>32||t<a+2+e[a+1]))return e.slice(a+2,a+2+e[a+1])}}},t.signatureExport=function(e){for(var t=r.concat([r.from([0]),e.r]),a=33,i=0;a>1&&0===t[i]&&!(128&t[i+1]);--a,++i);for(var s=r.concat([r.from([0]),e.s]),o=33,c=0;o>1&&0===s[c]&&!(128&s[c+1]);--o,++c);return n.encode(t.slice(i),s.slice(c))},t.signatureImport=function(e){var t=r.alloc(32,0),a=r.alloc(32,0);try{var i=n.decode(e);if(33===i.r.length&&0===i.r[0]&&(i.r=i.r.slice(1)),i.r.length>32)throw new Error("R length is too long");if(33===i.s.length&&0===i.s[0]&&(i.s=i.s.slice(1)),i.s.length>32)throw new Error("S length is too long")}catch(e){return}return i.r.copy(t,32-i.r.length),i.s.copy(a,32-i.s.length),{r:t,s:a}},t.signatureImportLax=function(e){var t=r.alloc(32,0),a=r.alloc(32,0),n=e.length,i=0;if(48===e[i++]){var s=e[i++];if(!(128&s&&(i+=s-128)>n)&&2===e[i++]){var o=e[i++];if(128&o){if(i+(s=o-128)>n)return;for(;s>0&&0===e[i];i+=1,s-=1);for(o=0;s>0;i+=1,s-=1)o=(o<<8)+e[i]}if(!(o>n-i)){var c=i;if(i+=o,2===e[i++]){var l=e[i++];if(128&l){if(i+(s=l-128)>n)return;for(;s>0&&0===e[i];i+=1,s-=1);for(l=0;s>0;i+=1,s-=1)l=(l<<8)+e[i]}if(!(l>n-i)){var u=i;for(i+=l;o>0&&0===e[c];o-=1,c+=1);if(!(o>32)){var d=e.slice(c,c+o);for(d.copy(t,32-d.length);l>0&&0===e[u];l-=1,u+=1);if(!(l>32)){var p=e.slice(u,u+l);return p.copy(a,32-p.length),{r:t,s:a}}}}}}}}}},function(e,t,a){var r=a(2).Buffer;e.exports={check:function(e){if(e.length<8)return!1;if(e.length>72)return!1;if(48!==e[0])return!1;if(e[1]!==e.length-2)return!1;if(2!==e[2])return!1;var t=e[3];if(0===t)return!1;if(5+t>=e.length)return!1;if(2!==e[4+t])return!1;var a=e[5+t];return 0!==a&&(6+t+a===e.length&&(!(128&e[4])&&(!(t>1&&0===e[4]&&!(128&e[5]))&&(!(128&e[t+6])&&!(a>1&&0===e[t+6]&&!(128&e[t+7]))))))},decode:function(e){if(e.length<8)throw new Error("DER sequence length is too short");if(e.length>72)throw new Error("DER sequence length is too long");if(48!==e[0])throw new Error("Expected DER sequence");if(e[1]!==e.length-2)throw new Error("DER sequence length is invalid");if(2!==e[2])throw new Error("Expected DER integer");var t=e[3];if(0===t)throw new Error("R length is zero");if(5+t>=e.length)throw new Error("R length is too long");if(2!==e[4+t])throw new Error("Expected DER integer (2)");var a=e[5+t];if(0===a)throw new Error("S length is zero");if(6+t+a!==e.length)throw new Error("S length is invalid");if(128&e[4])throw new Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw new Error("R value excessively padded");if(128&e[t+6])throw new Error("S value is negative");if(a>1&&0===e[t+6]&&!(128&e[t+7]))throw new Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},encode:function(e,t){var a=e.length,n=t.length;if(0===a)throw new Error("R length is zero");if(0===n)throw new Error("S length is zero");if(a>33)throw new Error("R length is too long");if(n>33)throw new Error("S length is too long");if(128&e[0])throw new Error("R value is negative");if(128&t[0])throw new Error("S value is negative");if(a>1&&0===e[0]&&!(128&e[1]))throw new Error("R value excessively padded");if(n>1&&0===t[0]&&!(128&t[1]))throw new Error("S value excessively padded");var i=r.allocUnsafe(6+a+n);return i[0]=48,i[1]=i.length-2,i[2]=2,i[3]=e.length,e.copy(i,4),i[4+a]=2,i[5+a]=t.length,t.copy(i,6+a),i}}},function(e,t,a){"use strict";var r=a(2).Buffer,n=a(74),i=a(8),s=a(1e3).ec,o=a(396),c=new s("secp256k1"),l=c.curve;function u(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var a=new i(t);if(a.cmp(l.p)>=0)return null;var r=(a=a.toRed(l.red)).redSqr().redIMul(a).redIAdd(l.b).redSqrt();return 3===e!==r.isOdd()&&(r=r.redNeg()),c.keyPair({pub:{x:a,y:r}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,a){var r=new i(t),n=new i(a);if(r.cmp(l.p)>=0||n.cmp(l.p)>=0)return null;if(r=r.toRed(l.red),n=n.toRed(l.red),(6===e||7===e)&&n.isOdd()!==(7===e))return null;var s=r.redSqr().redIMul(r);return n.redSqr().redISub(s.redIAdd(l.b)).isZero()?c.keyPair({pub:{x:r,y:n}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}t.privateKeyVerify=function(e){var t=new i(e);return t.cmp(l.n)<0&&!t.isZero()},t.privateKeyExport=function(e,t){var a=new i(e);if(a.cmp(l.n)>=0||a.isZero())throw new Error(o.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return r.from(c.keyFromPrivate(e).getPublic(t,!0))},t.privateKeyNegate=function(e){var t=new i(e);return t.isZero()?r.alloc(32):l.n.sub(t).umod(l.n).toArrayLike(r,"be",32)},t.privateKeyModInverse=function(e){var t=new i(e);if(t.cmp(l.n)>=0||t.isZero())throw new Error(o.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(l.n).toArrayLike(r,"be",32)},t.privateKeyTweakAdd=function(e,t){var a=new i(t);if(a.cmp(l.n)>=0)throw new Error(o.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(a.iadd(new i(e)),a.cmp(l.n)>=0&&a.isub(l.n),a.isZero())throw new Error(o.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return a.toArrayLike(r,"be",32)},t.privateKeyTweakMul=function(e,t){var a=new i(t);if(a.cmp(l.n)>=0||a.isZero())throw new Error(o.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return a.imul(new i(e)),a.cmp(l.n)&&(a=a.umod(l.n)),a.toArrayLike(r,"be",32)},t.publicKeyCreate=function(e,t){var a=new i(e);if(a.cmp(l.n)>=0||a.isZero())throw new Error(o.EC_PUBLIC_KEY_CREATE_FAIL);return r.from(c.keyFromPrivate(e).getPublic(t,!0))},t.publicKeyConvert=function(e,t){var a=u(e);if(null===a)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);return r.from(a.getPublic(t,!0))},t.publicKeyVerify=function(e){return null!==u(e)},t.publicKeyTweakAdd=function(e,t,a){var n=u(e);if(null===n)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new i(t)).cmp(l.n)>=0)throw new Error(o.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var s=l.g.mul(t).add(n.pub);if(s.isInfinity())throw new Error(o.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return r.from(s.encode(!0,a))},t.publicKeyTweakMul=function(e,t,a){var n=u(e);if(null===n)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new i(t)).cmp(l.n)>=0||t.isZero())throw new Error(o.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return r.from(n.pub.mul(t).encode(!0,a))},t.publicKeyCombine=function(e,t){for(var a=new Array(e.length),n=0;n<e.length;++n)if(a[n]=u(e[n]),null===a[n])throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);for(var i=a[0].pub,s=1;s<a.length;++s)i=i.add(a[s].pub);if(i.isInfinity())throw new Error(o.EC_PUBLIC_KEY_COMBINE_FAIL);return r.from(i.encode(!0,t))},t.signatureNormalize=function(e){var t=new i(e.slice(0,32)),a=new i(e.slice(32,64));if(t.cmp(l.n)>=0||a.cmp(l.n)>=0)throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);var n=r.from(e);return 1===a.cmp(c.nh)&&l.n.sub(a).toArrayLike(r,"be",32).copy(n,32),n},t.signatureExport=function(e){var t=e.slice(0,32),a=e.slice(32,64);if(new i(t).cmp(l.n)>=0||new i(a).cmp(l.n)>=0)throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:a}},t.signatureImport=function(e){var t=new i(e.r);t.cmp(l.n)>=0&&(t=new i(0));var a=new i(e.s);return a.cmp(l.n)>=0&&(a=new i(0)),r.concat([t.toArrayLike(r,"be",32),a.toArrayLike(r,"be",32)])},t.sign=function(e,t,a,n){if("function"==typeof a){var s=a;a=function(a){var c=s(e,t,null,n,a);if(!r.isBuffer(c)||32!==c.length)throw new Error(o.ECDSA_SIGN_FAIL);return new i(c)}}var u=new i(t);if(u.cmp(l.n)>=0||u.isZero())throw new Error(o.ECDSA_SIGN_FAIL);var d=c.sign(e,t,{canonical:!0,k:a,pers:n});return{signature:r.concat([d.r.toArrayLike(r,"be",32),d.s.toArrayLike(r,"be",32)]),recovery:d.recoveryParam}},t.verify=function(e,t,a){var r={r:t.slice(0,32),s:t.slice(32,64)},n=new i(r.r),s=new i(r.s);if(n.cmp(l.n)>=0||s.cmp(l.n)>=0)throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);if(1===s.cmp(c.nh)||n.isZero()||s.isZero())return!1;var d=u(a);if(null===d)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);return c.verify(e,r,{x:d.pub.x,y:d.pub.y})},t.recover=function(e,t,a,n){var s={r:t.slice(0,32),s:t.slice(32,64)},u=new i(s.r),d=new i(s.s);if(u.cmp(l.n)>=0||d.cmp(l.n)>=0)throw new Error(o.ECDSA_SIGNATURE_PARSE_FAIL);try{if(u.isZero()||d.isZero())throw new Error;var p=c.recoverPubKey(e,s,a);return r.from(p.encode(!0,n))}catch(e){throw new Error(o.ECDSA_RECOVER_FAIL)}},t.ecdh=function(e,a){var r=t.ecdhUnsafe(e,a,!0);return n("sha256").update(r).digest()},t.ecdhUnsafe=function(e,t,a){var n=u(e);if(null===n)throw new Error(o.EC_PUBLIC_KEY_PARSE_FAIL);var s=new i(t);if(s.cmp(l.n)>=0||s.isZero())throw new Error(o.ECDH_FAIL);return r.from(n.pub.mul(s).encode(!0,a))}},function(e,t,a){"use strict";var r=t;r.version=a(1001).version,r.utils=a(30),r.rand=a(65),r.curve=a(397),r.curves=a(181),r.ec=a(1006),r.eddsa=a(1009)},function(e){e.exports=JSON.parse('{"_args":[["elliptic@^6.4.1","/opt/saito-lite/node_modules/secp256k1"]],"_from":"elliptic@>=6.4.1 <7.0.0","_hasShrinkwrap":false,"_id":"elliptic@6.5.2","_inCache":true,"_installable":true,"_location":"/elliptic","_nodeVersion":"12.11.0","_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/elliptic_6.5.2_1574449632470_0.8146993695516966"},"_npmUser":{"email":"fedor@indutny.com","name":"indutny"},"_npmVersion":"6.12.1","_phantomChildren":{},"_requested":{"name":"elliptic","raw":"elliptic@^6.4.1","rawSpec":"^6.4.1","scope":null,"spec":">=6.4.1 <7.0.0","type":"range"},"_requiredBy":["/browserify-sign","/create-ecdh","/secp256k1"],"_resolved":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.2.tgz","_shasum":"05c5678d7173c049d8ca433552224a495d0e3762","_shrinkwrap":null,"_spec":"elliptic@^6.4.1","_where":"/opt/saito-lite/node_modules/secp256k1","author":{"email":"fedor@indutny.com","name":"Fedor Indutny"},"bugs":{"url":"https://github.com/indutny/elliptic/issues"},"dependencies":{"bn.js":"^4.4.0","brorand":"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0","inherits":"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},"description":"EC cryptography","devDependencies":{"brfs":"^1.4.3","coveralls":"^3.0.8","grunt":"^1.0.4","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^9.0.1","istanbul":"^0.4.2","jscs":"^3.0.7","jshint":"^2.10.3","mocha":"^6.2.2"},"directories":{},"dist":{"fileCount":17,"integrity":"sha512-f4x70okzZbIQl/NSRLkI/+tteV/9WqL98zx+SQ69KbXxmVrmjwsNUPn/gYJJ0sHvEak24cZgHIPegRePAtA/xw==","npm-signature":"-----BEGIN PGP SIGNATURE-----\\r\\nVersion: OpenPGP.js v3.0.4\\r\\nComment: https://openpgpjs.org\\r\\n\\r\\nwsFcBAEBCAAQBQJd2DHgCRA9TVsSAnZWagAAfx0P/RYZUDcD1KNqpERJSTgL\\nlA3wXXXVB78IVwSy9laMD1GdDpsMy71PHjFMZL1NM2ZaZUUi7eiNaYf8sFrP\\nQWadLsl3M2tkW6T4AkgxJXMEmbf3k9hCy+ZvRdWKJUF0g44WORvK2SNzDI/C\\nIuBZ9xfTS5dZ3jZJOMZNZO4+PHzMQ/pzCGXafuuzsryPlcx0PvIN66xTRQbo\\n/ByAl3lIK/C5HsFUkaSxcabcSmZrVuwDw8ciKGrBXjWkXAqLzO0u9HEczucP\\n+RNNFvocrTB4ge/4yV4cdGSF7QXkzJ7hPqQgnhj0TrJO//qBERKXffQq91Hr\\nU/xdUsX/dnIqpzpV81E36L+0VIxxg66/21ba4qlsho0i57v83Y6jLH3wFud4\\n/LGzynTDiwySpREE9Gb3tnXSR3OuZstyJORQwEglAQIp7QcneqGOghNgY4am\\nuFkM/6rAJi4tGw8uBn0tgRQZHtmy8XwNtuN/ShRoBzBayN2XVmJrApUxPpJK\\nu+v3O0skLnpsXqgCpskrRK4dWtgkItxSZn91DZ219eGZvpFOgS8Jnb/bA07B\\nZ7mGgM0B91Bc4ZbUGyGyv17j/p5fItlA0nqX6itwNjBI+BeYlenWXG3JfEjd\\npteBvQyvxCHtcnc987HIm6VYGFvj1xlI7eLD4fQXPbuos0jbyEo2ndIU8jIT\\nJVlS\\r\\n=BoXv\\r\\n-----END PGP SIGNATURE-----\\r\\n","shasum":"05c5678d7173c049d8ca433552224a495d0e3762","tarball":"https://registry.npmjs.org/elliptic/-/elliptic-6.5.2.tgz","unpackedSize":118072},"gitHead":"60489415e545efdfd3010ae74b9726facbf08ca8","homepage":"https://github.com/indutny/elliptic","keywords":["Cryptography","EC","Elliptic","curve"],"license":"MIT","main":"lib/elliptic.js","maintainers":[{"name":"indutny","email":"fedor@indutny.com"}],"name":"elliptic","optionalDependencies":{},"readme":"ERROR: No README data found!","repository":{"type":"git","url":"git+ssh://git@github.com/indutny/elliptic.git"},"scripts":{"jscs":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","jshint":"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js","lint":"npm run jscs && npm run jshint","test":"npm run lint && npm run unit","unit":"istanbul test _mocha --reporter=spec test/index.js","version":"grunt dist && git add dist/"},"version":"6.5.2"}')},function(e,t,a){"use strict";var r=a(30),n=a(8),i=a(1),s=a(123),o=r.assert;function c(e){s.call(this,"short",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(e,t,a,r){s.BasePoint.call(this,e,"affine"),null===t&&null===a?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(t,16),this.y=new n(a,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(e,t,a,r){s.BasePoint.call(this,e,"jacobian"),null===t&&null===a&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(t,16),this.y=new n(a,16),this.z=new n(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}i(c,s),e.exports=c,c.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,a;if(e.beta)t=new n(e.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);t=(t=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(e.lambda)a=new n(e.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(t))?a=i[0]:(a=i[1],o(0===this.g.mul(a).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:a,basis:e.basis?e.basis.map((function(e){return{a:new n(e.a,16),b:new n(e.b,16)}})):this._getEndoBasis(a)}}},c.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:n.mont(e),a=new n(2).toRed(t).redInvm(),r=a.redNeg(),i=new n(3).toRed(t).redNeg().redSqrt().redMul(a);return[r.redAdd(i).fromRed(),r.redSub(i).fromRed()]},c.prototype._getEndoBasis=function(e){for(var t,a,r,i,s,o,c,l,u,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),p=e,h=this.n.clone(),f=new n(1),m=new n(0),g=new n(0),b=new n(1),y=0;0!==p.cmpn(0);){var v=h.div(p);l=h.sub(v.mul(p)),u=g.sub(v.mul(f));var _=b.sub(v.mul(m));if(!r&&l.cmp(d)<0)t=c.neg(),a=f,r=l.neg(),i=u;else if(r&&2==++y)break;c=l,h=p,p=l,g=f,f=u,b=m,m=_}s=l.neg(),o=u;var w=r.sqr().add(i.sqr());return s.sqr().add(o.sqr()).cmp(w)>=0&&(s=t,o=a),r.negative&&(r=r.neg(),i=i.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:r,b:i},{a:s,b:o}]},c.prototype._endoSplit=function(e){var t=this.endo.basis,a=t[0],r=t[1],n=r.b.mul(e).divRound(this.n),i=a.b.neg().mul(e).divRound(this.n),s=n.mul(a.a),o=i.mul(r.a),c=n.mul(a.b),l=i.mul(r.b);return{k1:e.sub(s).sub(o),k2:c.add(l).neg()}},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var a=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),r=a.redSqrt();if(0!==r.redSqr().redSub(a).cmp(this.zero))throw new Error("invalid point");var i=r.fromRed().isOdd();return(t&&!i||!t&&i)&&(r=r.redNeg()),this.point(e,r)},c.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,a=e.y,r=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(r).redIAdd(this.b);return 0===a.redSqr().redISub(n).cmpn(0)},c.prototype._endoWnafMulAdd=function(e,t,a){for(var r=this._endoWnafT1,n=this._endoWnafT2,i=0;i<e.length;i++){var s=this._endoSplit(t[i]),o=e[i],c=o._getBeta();s.k1.negative&&(s.k1.ineg(),o=o.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),r[2*i]=o,r[2*i+1]=c,n[2*i]=s.k1,n[2*i+1]=s.k2}for(var l=this._wnafMulAdd(1,r,n,2*i,a),u=0;u<2*i;u++)r[u]=null,n[u]=null;return l},i(l,s.BasePoint),c.prototype.point=function(e,t,a){return new l(this,e,t,a)},c.prototype.pointFromJSON=function(e,t){return l.fromJSON(this,e,t)},l.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var a=this.curve,r=function(e){return a.point(e.x.redMul(a.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(r)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(r)}}}return t}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(e,t,a){"string"==typeof t&&(t=JSON.parse(t));var r=e.point(t[0],t[1],a);if(!t[2])return r;function n(t){return e.point(t[0],t[1],a)}var i=t[2];return r.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[r].concat(i.doubles.points.map(n))},naf:i.naf&&{wnd:i.naf.wnd,points:[r].concat(i.naf.points.map(n))}},r},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var a=t.redSqr().redISub(this.x).redISub(e.x),r=t.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,r)},l.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,a=this.x.redSqr(),r=e.redInvm(),n=a.redAdd(a).redIAdd(a).redIAdd(t).redMul(r),i=n.redSqr().redISub(this.x.redAdd(this.x)),s=n.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(e){return e=new n(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,a){var r=[this,t],n=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(r,n):this.curve._wnafMulAdd(1,r,n,2)},l.prototype.jmulAdd=function(e,t,a){var r=[this,t],n=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(r,n,!0):this.curve._wnafMulAdd(1,r,n,2,!0)},l.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},l.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var a=this.precomputed,r=function(e){return e.neg()};t.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(r)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(r)}}}return t},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},i(u,s.BasePoint),c.prototype.jpoint=function(e,t,a){return new u(this,e,t,a)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),a=this.x.redMul(t),r=this.y.redMul(t).redMul(e);return this.curve.point(a,r)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),a=this.z.redSqr(),r=this.x.redMul(t),n=e.x.redMul(a),i=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(a.redMul(this.z)),o=r.redSub(n),c=i.redSub(s);if(0===o.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=o.redSqr(),u=l.redMul(o),d=r.redMul(l),p=c.redSqr().redIAdd(u).redISub(d).redISub(d),h=c.redMul(d.redISub(p)).redISub(i.redMul(u)),f=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(p,h,f)},u.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),a=this.x,r=e.x.redMul(t),n=this.y,i=e.y.redMul(t).redMul(this.z),s=a.redSub(r),o=n.redSub(i);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),l=c.redMul(s),u=a.redMul(c),d=o.redSqr().redIAdd(l).redISub(u).redISub(u),p=o.redMul(u.redISub(d)).redISub(n.redMul(l)),h=this.z.redMul(s);return this.curve.jpoint(d,p,h)},u.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,a=0;a<e;a++)t=t.dbl();return t}var r=this.curve.a,n=this.curve.tinv,i=this.x,s=this.y,o=this.z,c=o.redSqr().redSqr(),l=s.redAdd(s);for(a=0;a<e;a++){var u=i.redSqr(),d=l.redSqr(),p=d.redSqr(),h=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(c)),f=i.redMul(d),m=h.redSqr().redISub(f.redAdd(f)),g=f.redISub(m),b=h.redMul(g);b=b.redIAdd(b).redISub(p);var y=l.redMul(o);a+1<e&&(c=c.redMul(p)),i=m,o=y,l=b}return this.curve.jpoint(i,l.redMul(n),o)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var e,t,a;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),i=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(r).redISub(i);s=s.redIAdd(s);var o=r.redAdd(r).redIAdd(r),c=o.redSqr().redISub(s).redISub(s),l=i.redIAdd(i);l=(l=l.redIAdd(l)).redIAdd(l),e=c,t=o.redMul(s.redISub(c)).redISub(l),a=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),d=this.y.redSqr(),p=d.redSqr(),h=this.x.redAdd(d).redSqr().redISub(u).redISub(p);h=h.redIAdd(h);var f=u.redAdd(u).redIAdd(u),m=f.redSqr(),g=p.redIAdd(p);g=(g=g.redIAdd(g)).redIAdd(g),e=m.redISub(h).redISub(h),t=f.redMul(h.redISub(e)).redISub(g),a=(a=this.y.redMul(this.z)).redIAdd(a)}return this.curve.jpoint(e,t,a)},u.prototype._threeDbl=function(){var e,t,a;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),i=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(r).redISub(i);s=s.redIAdd(s);var o=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),c=o.redSqr().redISub(s).redISub(s);e=c;var l=i.redIAdd(i);l=(l=l.redIAdd(l)).redIAdd(l),t=o.redMul(s.redISub(c)).redISub(l),a=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),d=this.y.redSqr(),p=this.x.redMul(d),h=this.x.redSub(u).redMul(this.x.redAdd(u));h=h.redAdd(h).redIAdd(h);var f=p.redIAdd(p),m=(f=f.redIAdd(f)).redAdd(f);e=h.redSqr().redISub(m),a=this.y.redAdd(this.z).redSqr().redISub(d).redISub(u);var g=d.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),t=h.redMul(f.redISub(e)).redISub(g)}return this.curve.jpoint(e,t,a)},u.prototype._dbl=function(){var e=this.curve.a,t=this.x,a=this.y,r=this.z,n=r.redSqr().redSqr(),i=t.redSqr(),s=a.redSqr(),o=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(n)),c=t.redAdd(t),l=(c=c.redIAdd(c)).redMul(s),u=o.redSqr().redISub(l.redAdd(l)),d=l.redISub(u),p=s.redSqr();p=(p=(p=p.redIAdd(p)).redIAdd(p)).redIAdd(p);var h=o.redMul(d).redISub(p),f=a.redAdd(a).redMul(r);return this.curve.jpoint(u,h,f)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),a=this.z.redSqr(),r=t.redSqr(),n=e.redAdd(e).redIAdd(e),i=n.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(r),o=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(i)).redSqr(),c=r.redIAdd(r);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var l=n.redIAdd(s).redSqr().redISub(i).redISub(o).redISub(c),u=t.redMul(l);u=(u=u.redIAdd(u)).redIAdd(u);var d=this.x.redMul(o).redISub(u);d=(d=d.redIAdd(d)).redIAdd(d);var p=this.y.redMul(l.redMul(c.redISub(l)).redISub(s.redMul(o)));p=(p=(p=p.redIAdd(p)).redIAdd(p)).redIAdd(p);var h=this.z.redAdd(s).redSqr().redISub(a).redISub(o);return this.curve.jpoint(d,p,h)},u.prototype.mul=function(e,t){return e=new n(e,t),this.curve._wnafMul(this,e)},u.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),a=e.z.redSqr();if(0!==this.x.redMul(a).redISub(e.x.redMul(t)).cmpn(0))return!1;var r=t.redMul(this.z),n=a.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(r)).cmpn(0)},u.prototype.eqXToP=function(e){var t=this.z.redSqr(),a=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(a))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(t);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(a.redIAdd(n),0===this.x.cmp(a))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,a){"use strict";var r=a(8),n=a(1),i=a(123),s=a(30);function o(e){i.call(this,"mont",e),this.a=new r(e.a,16).toRed(this.red),this.b=new r(e.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function c(e,t,a){i.BasePoint.call(this,e,"projective"),null===t&&null===a?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(t,16),this.z=new r(a,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(o,i),e.exports=o,o.prototype.validate=function(e){var t=e.normalize().x,a=t.redSqr(),r=a.redMul(t).redAdd(a.redMul(this.a)).redAdd(t);return 0===r.redSqrt().redSqr().cmp(r)},n(c,i.BasePoint),o.prototype.decodePoint=function(e,t){return this.point(s.toArray(e,t),1)},o.prototype.point=function(e,t){return new c(this,e,t)},o.prototype.pointFromJSON=function(e){return c.fromJSON(this,e)},c.prototype.precompute=function(){},c.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},c.fromJSON=function(e,t){return new c(e,t[0],t[1]||e.one)},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},c.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),a=e.redSub(t),r=e.redMul(t),n=a.redMul(t.redAdd(this.curve.a24.redMul(a)));return this.curve.point(r,n)},c.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.diffAdd=function(e,t){var a=this.x.redAdd(this.z),r=this.x.redSub(this.z),n=e.x.redAdd(e.z),i=e.x.redSub(e.z).redMul(a),s=n.redMul(r),o=t.z.redMul(i.redAdd(s).redSqr()),c=t.x.redMul(i.redISub(s).redSqr());return this.curve.point(o,c)},c.prototype.mul=function(e){for(var t=e.clone(),a=this,r=this.curve.point(null,null),n=[];0!==t.cmpn(0);t.iushrn(1))n.push(t.andln(1));for(var i=n.length-1;i>=0;i--)0===n[i]?(a=a.diffAdd(r,this),r=r.dbl()):(r=a.diffAdd(r,this),a=a.dbl());return r},c.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},c.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},c.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,a){"use strict";var r=a(30),n=a(8),i=a(1),s=a(123),o=r.assert;function c(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,s.call(this,"edwards",e),this.a=new n(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function l(e,t,a,r,i){s.BasePoint.call(this,e,"projective"),null===t&&null===a&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(t,16),this.y=new n(a,16),this.z=r?new n(r,16):this.curve.one,this.t=i&&new n(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}i(c,s),e.exports=c,c.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},c.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},c.prototype.jpoint=function(e,t,a,r){return this.point(e,t,a,r)},c.prototype.pointFromX=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var a=e.redSqr(),r=this.c2.redSub(this.a.redMul(a)),i=this.one.redSub(this.c2.redMul(this.d).redMul(a)),s=r.redMul(i.redInvm()),o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var c=o.fromRed().isOdd();return(t&&!c||!t&&c)&&(o=o.redNeg()),this.point(e,o)},c.prototype.pointFromY=function(e,t){(e=new n(e,16)).red||(e=e.toRed(this.red));var a=e.redSqr(),r=a.redSub(this.c2),i=a.redMul(this.d).redMul(this.c2).redSub(this.a),s=r.redMul(i.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return o.fromRed().isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},c.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),a=e.y.redSqr(),r=t.redMul(this.a).redAdd(a),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(a)));return 0===r.cmp(n)},i(l,s.BasePoint),c.prototype.pointFromJSON=function(e){return l.fromJSON(this,e)},c.prototype.point=function(e,t,a,r){return new l(this,e,t,a,r)},l.fromJSON=function(e,t){return new l(e,t[0],t[1],t[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),a=this.z.redSqr();a=a.redIAdd(a);var r=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),i=r.redAdd(t),s=i.redSub(a),o=r.redSub(t),c=n.redMul(s),l=i.redMul(o),u=n.redMul(o),d=s.redMul(i);return this.curve.point(c,l,d,u)},l.prototype._projDbl=function(){var e,t,a,r=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),i=this.y.redSqr();if(this.curve.twisted){var s=(l=this.curve._mulA(n)).redAdd(i);if(this.zOne)e=r.redSub(n).redSub(i).redMul(s.redSub(this.curve.two)),t=s.redMul(l.redSub(i)),a=s.redSqr().redSub(s).redSub(s);else{var o=this.z.redSqr(),c=s.redSub(o).redISub(o);e=r.redSub(n).redISub(i).redMul(c),t=s.redMul(l.redSub(i)),a=s.redMul(c)}}else{var l=n.redAdd(i);o=this.curve._mulC(this.z).redSqr(),c=l.redSub(o).redSub(o);e=this.curve._mulC(r.redISub(l)).redMul(c),t=this.curve._mulC(l).redMul(n.redISub(i)),a=l.redMul(c)}return this.curve.point(e,t,a)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),a=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),r=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),i=a.redSub(t),s=n.redSub(r),o=n.redAdd(r),c=a.redAdd(t),l=i.redMul(s),u=o.redMul(c),d=i.redMul(c),p=s.redMul(o);return this.curve.point(l,u,p,d)},l.prototype._projAdd=function(e){var t,a,r=this.z.redMul(e.z),n=r.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(i).redMul(s),c=n.redSub(o),l=n.redAdd(o),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),d=r.redMul(c).redMul(u);return this.curve.twisted?(t=r.redMul(l).redMul(s.redSub(this.curve._mulA(i))),a=c.redMul(l)):(t=r.redMul(l).redMul(s.redSub(i)),a=this.curve._mulC(c).redMul(l)),this.curve.point(d,t,a)},l.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},l.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},l.prototype.mulAdd=function(e,t,a){return this.curve._wnafMulAdd(1,[this,t],[e,a],2,!1)},l.prototype.jmulAdd=function(e,t,a){return this.curve._wnafMulAdd(1,[this,t],[e,a],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},l.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var a=e.clone(),r=this.curve.redN.redMul(this.z);;){if(a.iadd(this.curve.n),a.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(r),0===this.x.cmp(t))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,a){"use strict";var r=a(8),n=a(175),i=a(30),s=a(181),o=a(65),c=i.assert,l=a(1007),u=a(1008);function d(e){if(!(this instanceof d))return new d(e);"string"==typeof e&&(c(s.hasOwnProperty(e),"Unknown curve "+e),e=s[e]),e instanceof s.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=d,d.prototype.keyPair=function(e){return new l(this,e)},d.prototype.keyFromPrivate=function(e,t){return l.fromPrivate(this,e,t)},d.prototype.keyFromPublic=function(e,t){return l.fromPublic(this,e,t)},d.prototype.genKeyPair=function(e){e||(e={});for(var t=new n({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||o(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),a=this.n.byteLength(),i=this.n.sub(new r(2));;){var s=new r(t.generate(a));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},d.prototype._truncateToN=function(e,t){var a=8*e.byteLength()-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},d.prototype.sign=function(e,t,a,i){"object"==typeof a&&(i=a,a=null),i||(i={}),t=this.keyFromPrivate(t,a),e=this._truncateToN(new r(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),c=e.toArray("be",s),l=new n({hash:this.hash,entropy:o,nonce:c,pers:i.pers,persEnc:i.persEnc||"utf8"}),d=this.n.sub(new r(1)),p=0;;p++){var h=i.k?i.k(p):new r(l.generate(this.n.byteLength()));if(!((h=this._truncateToN(h,!0)).cmpn(1)<=0||h.cmp(d)>=0)){var f=this.g.mul(h);if(!f.isInfinity()){var m=f.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var b=h.invm(this.n).mul(g.mul(t.getPrivate()).iadd(e));if(0!==(b=b.umod(this.n)).cmpn(0)){var y=(f.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return i.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),y^=1),new u({r:g,s:b,recoveryParam:y})}}}}}},d.prototype.verify=function(e,t,a,n){e=this._truncateToN(new r(e,16)),a=this.keyFromPublic(a,n);var i=(t=new u(t,"hex")).r,s=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,c=s.invm(this.n),l=c.mul(e).umod(this.n),d=c.mul(i).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(l,a.getPublic(),d)).isInfinity()&&o.eqXToP(i):!(o=this.g.mulAdd(l,a.getPublic(),d)).isInfinity()&&0===o.getX().umod(this.n).cmp(i)},d.prototype.recoverPubKey=function(e,t,a,n){c((3&a)===a,"The recovery param is more than two bits"),t=new u(t,n);var i=this.n,s=new r(e),o=t.r,l=t.s,d=1&a,p=a>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&p)throw new Error("Unable to find sencond key candinate");o=p?this.curve.pointFromX(o.add(this.curve.n),d):this.curve.pointFromX(o,d);var h=t.r.invm(i),f=i.sub(s).mul(h).umod(i),m=l.mul(h).umod(i);return this.g.mulAdd(f,o,m)},d.prototype.getKeyRecoveryParam=function(e,t,a,r){if(null!==(t=new u(t,r)).recoveryParam)return t.recoveryParam;for(var n=0;n<4;n++){var i;try{i=this.recoverPubKey(e,t,n)}catch(e){continue}if(i.eq(a))return n}throw new Error("Unable to find valid recovery factor")}},function(e,t,a){"use strict";var r=a(8),n=a(30).assert;function i(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=i,i.fromPublic=function(e,t,a){return t instanceof i?t:new i(e,{pub:t,pubEnc:a})},i.fromPrivate=function(e,t,a){return t instanceof i?t:new i(e,{priv:t,privEnc:a})},i.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},i.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},i.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},i.prototype._importPrivate=function(e,t){this.priv=new r(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},i.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?n(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},i.prototype.derive=function(e){return e.mul(this.priv).getX()},i.prototype.sign=function(e,t,a){return this.ec.sign(e,this,t,a)},i.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},i.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,a){"use strict";var r=a(8),n=a(30),i=n.assert;function s(e,t){if(e instanceof s)return e;this._importDER(e,t)||(i(e.r&&e.s,"Signature without r or s"),this.r=new r(e.r,16),this.s=new r(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}function o(){this.place=0}function c(e,t){var a=e[t.place++];if(!(128&a))return a;for(var r=15&a,n=0,i=0,s=t.place;i<r;i++,s++)n<<=8,n|=e[s];return t.place=s,n}function l(e){for(var t=0,a=e.length-1;!e[t]&&!(128&e[t+1])&&t<a;)t++;return 0===t?e:e.slice(t)}function u(e,t){if(t<128)e.push(t);else{var a=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|a);--a;)e.push(t>>>(a<<3)&255);e.push(t)}}e.exports=s,s.prototype._importDER=function(e,t){e=n.toArray(e,t);var a=new o;if(48!==e[a.place++])return!1;if(c(e,a)+a.place!==e.length)return!1;if(2!==e[a.place++])return!1;var i=c(e,a),s=e.slice(a.place,i+a.place);if(a.place+=i,2!==e[a.place++])return!1;var l=c(e,a);if(e.length!==l+a.place)return!1;var u=e.slice(a.place,l+a.place);return 0===s[0]&&128&s[1]&&(s=s.slice(1)),0===u[0]&&128&u[1]&&(u=u.slice(1)),this.r=new r(s),this.s=new r(u),this.recoveryParam=null,!0},s.prototype.toDER=function(e){var t=this.r.toArray(),a=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&a[0]&&(a=[0].concat(a)),t=l(t),a=l(a);!(a[0]||128&a[1]);)a=a.slice(1);var r=[2];u(r,t.length),(r=r.concat(t)).push(2),u(r,a.length);var i=r.concat(a),s=[48];return u(s,i.length),s=s.concat(i),n.encode(s,e)}},function(e,t,a){"use strict";var r=a(66),n=a(181),i=a(30),s=i.assert,o=i.parseBytes,c=a(1010),l=a(1011);function u(e){if(s("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof u))return new u(e);e=n[e].curve;this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=r.sha512}e.exports=u,u.prototype.sign=function(e,t){e=o(e);var a=this.keyFromSecret(t),r=this.hashInt(a.messagePrefix(),e),n=this.g.mul(r),i=this.encodePoint(n),s=this.hashInt(i,a.pubBytes(),e).mul(a.priv()),c=r.add(s).umod(this.curve.n);return this.makeSignature({R:n,S:c,Rencoded:i})},u.prototype.verify=function(e,t,a){e=o(e),t=this.makeSignature(t);var r=this.keyFromPublic(a),n=this.hashInt(t.Rencoded(),r.pubBytes(),e),i=this.g.mul(t.S());return t.R().add(r.pub().mul(n)).eq(i)},u.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return i.intFromLE(e.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(e){return c.fromPublic(this,e)},u.prototype.keyFromSecret=function(e){return c.fromSecret(this,e)},u.prototype.makeSignature=function(e){return e instanceof l?e:new l(this,e)},u.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},u.prototype.decodePoint=function(e){var t=(e=i.parseBytes(e)).length-1,a=e.slice(0,t).concat(-129&e[t]),r=0!=(128&e[t]),n=i.intFromLE(a);return this.curve.pointFromY(n,r)},u.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(e){return i.intFromLE(e)},u.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,a){"use strict";var r=a(30),n=r.assert,i=r.parseBytes,s=r.cachedProperty;function o(e,t){this.eddsa=e,this._secret=i(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=i(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},s(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),a=e.encodingLength-1,r=t.slice(0,e.encodingLength);return r[0]&=248,r[a]&=127,r[a]|=64,r})),s(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return n(this._secret,"KeyPair is public only"),r.encode(this.secret(),e)},o.prototype.getPublic=function(e){return r.encode(this.pubBytes(),e)},e.exports=o},function(e,t,a){"use strict";var r=a(8),n=a(30),i=n.assert,s=n.cachedProperty,o=n.parseBytes;function c(e,t){this.eddsa=e,"object"!=typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),i(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof r&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},function(e,t,a){(function(e,t){(function(){var a,r,n,i;for(n=(null!==e?e.exports:void 0)||(window.Base58={}),a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",r={},i=0;i<a.length;)r[a.charAt(i)]=i,i++;n.encode=function(e){var t,r,n;if(0===e.length)return"";for(i=void 0,n=void 0,r=[0],i=0;i<e.length;){for(n=0;n<r.length;)r[n]<<=8,n++;for(r[0]+=e[i],t=0,n=0;n<r.length;)r[n]+=t,t=r[n]/58|0,r[n]%=58,++n;for(;t;)r.push(t%58),t=t/58|0;i++}for(i=0;0===e[i]&&i<e.length-1;)r.push(0),i++;return r.reverse().map((function(e){return a[e]})).join("")},n.decode=function(e){var a,n,s,o;if(0===e.length)return new("undefined"!=typeof Uint8Array&&null!==Uint8Array?Uint8Array:t)(0);for(i=void 0,o=void 0,a=[0],i=0;i<e.length;){if(!((n=e[i])in r))throw"Base58.decode received unacceptable input. Character '"+n+"' is not in the Base58 alphabet.";for(o=0;o<a.length;)a[o]*=58,o++;for(a[0]+=r[n],s=0,o=0;o<a.length;)a[o]+=s,s=a[o]>>8,a[o]&=255,++o;for(;s;)a.push(255&s),s>>=8;i++}for(i=0;"1"===e[i]&&i<e.length-1;)a.push(0),i++;return new("undefined"!=typeof Uint8Array&&null!==Uint8Array?Uint8Array:t)(a.reverse())}}).call(this)}).call(this,a(89)(e),a(9).Buffer)},function(e,t,a){"use strict";var r=Object.keys,n=JSON.stringify;e.exports=function(e){return""+function e(t,a){var i,s,o,c,l,u,d;if("string"===(d=typeof t))return n(t);if(!0===t)return"true";if(!1===t)return"false";if(null===t)return"null";if(t instanceof Array){for(o="[",s=t.length-1,i=0;i<s;i++)o+=e(t[i],!1)+",";return s>-1&&(o+=e(t[i],!1)),o+"]"}if(t instanceof Object){if("function"==typeof t.toJSON)return e(t.toJSON(),a);for(s=(c=r(t).sort()).length,o="",i=0;i<s;)void 0!==(u=e(t[l=c[i]],!0))&&(i&&""!==o&&(o+=","),o+=n(l)+":"+u),i++;return"{"+o+"}"}switch(d){case"function":case"undefined":return a?void 0:null;default:return isFinite(t)?t:null}}(e,!1)}},function(e,t,a){a(5),a(40);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!(this instanceof r))return new r(e,t);if(this.app=e||{},this.solution={},this.solution.name="golden ticket",this.solution.target="",this.solution.random="",this.solution.publickey="",""!=t)try{this.solution=JSON.parse(t)}catch(e){return null}return this}e.exports=r,r.prototype.formatSolutionForGoldenTicket=function(e,t){return this.solution.name="golden ticket",this.solution.target=e.returnHash(),this.solution.random=t,this.solution.publickey=this.app.wallet.returnPublicKey(),this.solution},r.prototype.isValidSolution=function(e,t){var a=Math.floor(t.returnDifficulty()),r=t.returnDifficulty()%1,n=parseInt(e.slice(0,a+1),16),i=parseInt(t.returnHash().slice(0,a+1),16);return n>=i&&(n-i)/16<=r},r.prototype.validateTicket=function(e,t){if(null==e)return 1;if(this.solution.target!=e.returnHash())return 0;var a=this.app.crypto.hash(this.solution.publickey+this.solution.random);return this.isValidTicket(a,e)?1:0}},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}a(5);var n=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(this instanceof e))return new e;this.publickey="",this.tags=[],this.identifiers=[],this.watched=!1,this.lock_block=!1,this.aes_publickey="",this.aes_privatekey="",this.aes_secret="",this.identifiers=[],this.data={}}var t,a,n;return t=e,(a=[{key:"addTag",value:function(e){this.isTagged(e)||this.tags.push(e)}},{key:"addIdentifier",value:function(e){this.isIdentifier(e)||this.identifiers.push(e)}},{key:"hasSharedSecret",value:function(){return""!=this.aes_secret}},{key:"isIdentifier",value:function(e){for(var t=0;t<this.identifiers.length;t++)if(this.identifiers[t]==e)return!0;return!1}},{key:"isPublicKey",value:function(e){return this.publickey==e}},{key:"isWatched",value:function(e){return this.watched}},{key:"isTagged",value:function(e){for(var t=0;t<this.tags.length;t++)if(this.tags[t]==e)return!0;return!1}},{key:"removeIdentifier",value:function(e){if(this.isIdentifier(e))for(var t=this.identifiers.length-1;t>=0;t++)this.identifiers[t]==e&&this.identifiers.splice(t,1)}},{key:"removeTag",value:function(e){if(this.isTagged(e))for(var t=this.tags.length-1;t>=0;t++)this.tags[t]==e&&this.tags.splice(t,1)}}])&&r(t.prototype,a),n&&r(t,n),e}();e.exports=n},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(5),i=a(15),s=a(1093),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.keys=[],this.groups=[],this.modtemplate=new i(this.app),this.fetched_keys={}}var t,a,o;return t=e,(a=[{key:"initialize",value:function(){null==this.app.options.keys&&(this.app.options.keys=[]);for(var e=0;e<this.app.options.keys.length;e++){var t=this.app.options.keys[e],a=new n.key(this.app);a.publickey=t.publickey,a.watched=t.watched,a.bid=t.bid,a.bsh=t.bsh,a.lc=t.lc,a.aes_publickey=t.aes_publickey,a.aes_privatekey=t.aes_privatekey,a.aes_secret=t.aes_secret,a.data=t.data;for(var r=0;r<t.identifiers.length;r++)a.identifiers[r]=t.identifiers[r],0==r&&(a.name=t.identifiers[r]);for(var i=0;i<t.tags.length;i++)a.tags[i]=t.tags[i];this.keys.push(a)}0==this.app.options.keys.length&&this.addKey(this.app.wallet.returnPublicKey(),"",!0)}},{key:"addKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(""!=e){e=e.trim();var c=this.findByPublicKey(e),l=0,u=0;null==c?((c=new n.key(this.app)).publickey=e,c.watched=a,c.bid=i,c.bsh=s,c.lc=o,c.name="",""!=t&&(c.identifiers.includes(t)||(l=1,c.addIdentifier(t),c.name=t)),""!=r&&(c.tags.includes(r)||(u=1,c.addTag(r))),this.keys.push(c)):""!=i&&""!=s?(c.bsh!=s&&c.bid,c.publickey=e,c.watched=a,c.bid=i,c.bsh=s,c.lc=o,c.identifiers.includes(t)||(l=1,c.addIdentifier(t)),c.tags.includes(r)||(u=1,c.addTag(r))):(c.identifiers.includes(t)||(l=1,c.addIdentifier(t)),c.tags.includes(r)||(u=1,c.addTag(r)),a&&(c.watched=!0)),this.saveKeys(),1==l&&this.app.connection.emit("update_identifier",c),1==u&&this.app.connection.emit("update_tag",c)}}},{key:"decryptMessage",value:function(e,t){for(var a=0;a<this.keys.length;a++)if(this.keys[a].publickey==e&&""!=this.keys[a].aes_secret){var r=this.app.crypto.aesDecrypt(t,this.keys[a].aes_secret);if(null!=r){var n=JSON.parse(r);if(null!=n.module)return n}}return t}},{key:"decryptString",value:function(e,t){for(var a=0;a<this.keys.length;a++)if(this.keys[a].publickey==e&&""!=this.keys[a].aes_secret)return this.app.crypto.aesDecrypt(t,this.keys[a].aes_secret);return t}},{key:"encryptMessage",value:function(e,t){for(var a=JSON.stringify(t),r=0;r<this.keys.length;r++)if(this.keys[r].publickey==e&&""!=this.keys[r].aes_secret)return this.app.crypto.aesEncrypt(a,this.keys[r].aes_secret);return t}},{key:"findByPublicKey",value:function(e){for(var t=0;t<this.keys.length;t++)if(this.keys[t].publickey==e)return this.keys[t];return null}},{key:"findByIdentifier",value:function(e){for(var t=0;t<this.keys.length;t++)if(1==this.keys[t].isIdentifier(e))return this.keys[t];return null}},{key:"hasSharedSecret",value:function(e){for(var t=0;t<this.keys.length;t++)if((this.keys[t].publickey==e||1==this.keys[t].isIdentifier(e))&&1==this.keys[t].hasSharedSecret())return!0;return!1}},{key:"isWatched",value:function(e){for(var t=0;t<this.keys.length;t++)if((this.keys[t].publickey==e||this.keys[t].isIdentifier(e))&&this.keys[t].isWatched())return!0;return!1}},{key:"initializeKeyExchange",value:function(e){var t=this.app.crypto.createDiffieHellman(),a=t.getPublicKey(null,"compressed").toString("hex"),r=t.getPrivateKey(null,"compressed").toString("hex");return this.updateCryptoByPublicKey(e,a,r,""),a}},{key:"isTagged",value:function(e,t){var a=this.findByPublicKey(e);return null!=a&&a.isTagged(t)}},{key:"saveKeys",value:function(){this.app.options.keys=this.keys,this.app.storage.saveOptions()}},{key:"saveGrouos",value:function(){this.app.options.groups=this.groups,this.app.storage.saveOptions()}},{key:"removeKey",value:function(e){for(var t=this.keys.length-1;t>=0;t--)this.keys[t].publickey==e&&this.keys.splice(t,1)}},{key:"returnKeys",value:function(){for(var e=[],t=0;t<this.keys.length;t++)1==this.keys[t].lc&&this.keys[t].publickey!=this.app.wallet.returnPublicKey()&&(e[e.length]=this.keys[t]);return e}},{key:"returnGroups",value:function(){return this.groups}},{key:"returnKeychainByTag",value:function(e){for(var t=[],a=0;a<this.keys.length;a++)this.keys[a].isTagged(e)&&(t[t.length]=this.keys[a]);return t}},{key:"returnEmail",value:function(e){if(null!=this.keys)for(var t=0;t<this.keys.length;t++)if(this.keys[t].publickey===e&&""!=this.keys[t].data.email&&void 0!==this.keys[t].data.email)return this.keys[t].data.email;return""}},{key:"updateIdenticon",value:function(e,t){if(null!=this.keys)for(var a=0;a<this.keys.length;a++)this.keys[a].publickey===e&&(this.keys[a].data||(this.keys[a].data={}),this.keys[a].data.identicon=t);this.saveKeys()}},{key:"returnIdenticon",value:function(e){if(null!=this.keys)for(var t=0;t<this.keys.length;t++)if(this.keys[t].publickey===e&&""!=this.keys[t].data.identicon&&void 0!==this.keys[t].data.identicon)return this.keys[t].data.identicon;return"data:image/svg+xml;base64,"+new s(this.app.crypto.hash(e),{margin:0,size:420,format:"svg"}).toString()}},{key:"returnIdenticonColor",value:function(e){var t=parseInt(this.app.crypto.hash(e).substr(-7),16)/268435455,a=this.hsl2rgb(t,.7,.5).map(Math.round);return"rgba(".concat(a.join(","),")")}},{key:"hsl2rgb",value:function(e,t,a){return[255*(t=[a+=t*=a<.5?a:1-a,a-(e*=6)%1*t*2,a-=t*=2,a,a+e%1*t,a+t])[~~e%6],255*t[(16|e)%6],255*t[(8|e)%6]]}},{key:"fetchIdentifierPromise",value:function(e){var t=this;return new Promise((function(a,r){t.fetchIdentifier(e,(function(e){a(e)}))}))}},{key:"fetchManyIdentifiersPromise",value:function(e){var t=this;return new Promise((function(a,r){t.fetchManyIdentifiers(e,(function(e){a(e)}))}))}},{key:"fetchIdentifier",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0,r="",n=[];""==t&&a(r),r=this.returnIdentifierByPublicKey(t),1==this.fetched_keys[t]&&a(r),r||a(r),this.modtemplate.sendPeerDatabaseRequestWithFilter("Registry",'SELECT * FROM records WHERE publickey = "'+t+'"',(function(t){var r=[];null==t.rows&&a(r),t.err&&a(r),null==t.rows&&a(r),0==t.rows.length&&a(r),r=t.rows.map((function(t){var a=t.publickey,r=t.identifier,i=t.bid,s=t.bsh,o=t.lc;e.fetched_keys[a]=1,e.addKey(a,r,!1,"",i,s,o),n.includes(a)||(n[a]=r)})),a(n)}),(function(e){for(var t=0;t<e.peer.services.length;t++)if("registry"===e.peer.services[t].service)return 1}))}},{key:"fetchManyIdentifiers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,r=[],n=[];if(t.forEach((function(t){var a=e.returnIdentifierByPublicKey(t);a.length>0?r[t]=a:n.push("'".concat(t,"'"))})),0!=n.length){var i="publickey in (".concat(n.join(","),")"),s="select * from records where ".concat(i);this.modtemplate.sendPeerDatabaseRequestWithFilter("Registry",s,(function(t){try{var n=[];if(void 0===t.rows)return void a(n);if(t.err)return void a(n);if(0==t.rows.length)return void a(n);n=t.rows.map((function(t){var a=t.publickey,n=t.identifier,i=t.bid,s=t.bsh,o=t.lc;e.addKey(a,n,!1,"",i,s,o),r.includes(a)||(r[a]=n)})),a(r)}catch(e){console.log(e)}}),(function(e){if(e.peer.services)for(var t=0;t<e.peer.services.length;t++)if("registry"===e.peer.services[t].service)return 1}))}else a(r)}},{key:"fetchPublicKeyPromise",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(a,r){e.fetchPublicKey(t,(function(e){a(e)}))}))}},{key:"fetchPublicKey",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;if(!t)return null;this.app.crypto.isPublicKey(t)&&a(t);var r=this.returnPublicKeyByIdentifier(t);""!=r&&a({err:"",rows:[r]}),this.modtemplate.sendPeerDatabaseRequest("registry","records","*","identifier = '".concat(t,"'"),null,(function(t){null==t.rows&&a([]),t.rows.forEach((function(t){var a=t.publickey,r=t.identifier,n=t.bid,i=t.bsh,s=t.lc;e.addKey(a,r,!1,"",n,i,s)})),a(t)}))}},{key:"returnPublicKeyByIdentifier",value:function(e){for(var t=0;t<this.keys.length;t++){var a=this.keys[t];if(1==a.lc&&a.isIdentifier(e))return a.publickey}return""}},{key:"returnIdentifierByPublicKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=this.keys)for(var a=0;a<this.keys.length;a++){var r=this.keys[a];if(r.publickey===e&&null!=r.identifiers&&1==r.lc&&r.identifiers.length>0)return r.identifiers[0]}return t?e:""}},{key:"returnUsername",value:function(e){var t=this.returnIdentifierByPublicKey(e,!0);return""!=t&&t!=e?t:t.length>12?t.substr(0,12)+"...":t[0]&&t[0].length>12?t[0].substr(0,12)+"...":t}},{key:"returnWatchedPublicKeys",value:function(){for(var e=[],t=0;t<this.keys.length;t++)this.keys[t].isWatched()&&1==this.keys[t].lc&&e.push(this.keys[t].publickey);return e}},{key:"addWatchedPublicKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.addKey(e,"",!0),this.saveKeys(),this.app.network.updatePeersWithWatchedPublicKeys()}},{key:"updateCryptoByPublicKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(""!=e){this.addKey(e);for(var n=0;n<this.keys.length;n++)this.keys[n].publickey==e&&1==this.keys[n].lc&&(this.keys[n].aes_publickey=t,this.keys[n].aes_privatekey=a,this.keys[n].aes_secret=r);return this.saveKeys(),!0}}},{key:"alreadyHaveSharedSecret",value:function(e){for(var t=0;t<this.keys.length;t++)if(this.keys[t].publickey==e&&1==this.keys[t].lc&&""!=this.keys[t].aes_secret)return!0;return!1}},{key:"clean",value:function(){for(var e=0;e<this.keys.length;e++)0==this.keys[e].isWatched()&&""!=this.keys[e].aes_secret&&(console.log("purging key records: "+this.keys[e].publickey+" "+JSON.stringify(this.keys[e].identifiers)),this.keys.splice(e,1),e--)}}])&&r(t.prototype,a),o&&r(t,o),e}();e.exports=o},function(e,t,a){a(1018).call;if("undefined"!=typeof window){var r=function(e){if(!e.classList.contains("treated")){e.addEventListener("change",(function(e){var a="";(a=this.files&&this.files.length>1?this.files.length+" files selected.":e.target.value.split("\\").pop())?(t.style.border="none",t.innerHTML=a):t.innerHTML=labelVal})),e.classList.add("treated");var t=document.createElement("label");t.classList.add("treated"),t.innerHTML="Choose File",t.htmlFor=e.id,t.id=e.id+"-label",e.parentNode.appendChild(t)}},n=function(e){var t=document.createElement("div");t.classList.add("saito-select"),e.classList.add("saito-slct"),e.parentNode.insertBefore(t,e),t.appendChild(e)};new MutationObserver((function(e){e.forEach((function(e){e.addedNodes.length>0&&function e(t){for(var a=0;a<t.length;a++)t[a].files&&r(t[a]),"SELECT"===t[a].tagName&&(t[a].classList.contains("saito-slct")||n(t[a])),t[a].childNodes.length>=1&&e(t[a].childNodes)}(e.addedNodes)}))})).observe(document.documentElement,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0}),window.salert=function(e){if(!document.getElementById("alert-wrapper")){var t=document.createElement("div");t.id="alert-wrapper";var a='<div id="alert-shim">';a+='<div id="alert-box">',a+='<p class="alert-message">'+e+"</p>",a+='<div id="alert-buttons"><button id="alert-ok">OK</button>',a+="</div></div></div>",t.innerHTML=a,document.body.appendChild(t),setTimeout((function(){document.querySelector("#alert-box").style.top="0"}),100),document.querySelector("#alert-ok").focus(),document.querySelector("#alert-shim").addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),document.querySelector("#alert-ok").click())})),document.querySelector("#alert-ok").addEventListener("click",(function(){t.remove()}),!1)}},window.sconfirm=function(e){if(!document.getElementById("alert-wrapper"))return new Promise((function(t,a){var r=document.createElement("div");r.id="alert-wrapper";var n='<div id="alert-shim">';n+='<div id="alert-box">',n+='<p class="alert-message">'+e+"</p>",n+='<div id="alert-buttons"><button id="alert-cancel">Cancel</button><button id="alert-ok">OK</button>',n+="</div></div></div>",r.innerHTML=n,document.body.appendChild(r),setTimeout((function(){document.getElementById("alert-box").style.top="0"}),100),document.getElementById("alert-ok").focus(),document.getElementById("alert-shim").onclick=function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("alert-ok").click())},document.getElementById("alert-ok").onclick=function(){r.remove(),t(!0)},document.getElementById("alert-cancel").onclick=function(){r.remove(),t(!1)}}))},window.sprompt=function(e){if(!document.getElementById("alert-wrapper"))return new Promise((function(t,a){var r=document.createElement("div");r.id="alert-wrapper";var n='<div id="alert-shim">';n+='<div id="alert-box">',n+='<p class="alert-message">'+e+"</p>",n+='<div class="alert-prompt"><input type="text" id="promptval" class="promptval" /></div>',n+='<div id="alert-buttons"><button id="alert-cancel">Cancel</button><button id="alert-ok">OK</button>',n+="</div></div></div>",r.innerHTML=n,document.body.appendChild(r),document.querySelector("#promptval").focus(),document.querySelector("#promptval").select(),setTimeout((function(){document.querySelector("#alert-box").style.top="0"}),100),document.querySelector("#alert-shim").addEventListener("keyup",(function(e){13===e.keyCode&&(e.preventDefault(),document.querySelector("#alert-ok").click())})),document.querySelector("#alert-ok").addEventListener("click",(function(){var e=document.querySelector("#promptval").value;r.remove(),t(e)}),!1),document.querySelector("#alert-cancel").addEventListener("click",(function(){r.remove(),t(!1)}),!1)}))},window.siteMessage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9999999;document.getElementById("message-wrapper")&&document.getElementById("message-wrapper").remove();var a=document.createElement("div");a.id="message-wrapper";var r='<div id="message-box">';r+='<p class="message-message">'+e+"</p>",r+="</div>",a.innerHTML=r,document.body.appendChild(a),setTimeout((function(){a.remove()}),t),document.querySelector("#message-wrapper").addEventListener("click",(function(){a.remove()}),!1)},window.imgPop=function(e){e.style.cursor="pointer",e.addEventListener("click",(function(t){var a=document.createElement("div");a.id="alert-wrapper";var r='<div id="alert-shim">';r+='<img class="imgpop" src="'.concat(e.src,'" />'),r+="</div>",a.innerHTML=r,document.body.appendChild(a),document.querySelector("img.imgpop").addEventListener("click",(function(t){try{window.open("").document.body.innerHTML='<img src="'+e.src+'" />'}catch(e){}})),a.addEventListener("click",(function(e){document.getElementById("alert-wrapper").remove()}))}))},window.scopy=function(e){var t=document.createElement("div");t.innerHTML=e,t.style.position="fixed",t.style.pointerEvents="none",t.style.opacity=0;var a=Array.prototype.slice.call(document.styleSheets).filter((function(e){return!e.disabled}));document.body.appendChild(t),window.getSelection().removeAllRanges();var r=document.createRange();r.selectNode(t),window.getSelection().addRange(r),document.execCommand("copy");for(var n=0;n<a.length;n++)a[n].disabled=!0;document.execCommand("copy");for(n=0;n<a.length;n++)a[n].disabled=!1;document.body.removeChild(t)},window.sWord=function(e,t){var a=new Blob(["\ufeff",e],{type:"application/msword"}),r="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(e),n=document.createElement("a");document.body.appendChild(n),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(a,t):(n.href=r,n.download=t,n.click()),document.body.removeChild(n)},window.s2Number=function(e){if(void 0!==e)return e=e.toString().replace(/,/g,""),"number"!=typeof Number(e)?e:Number(e).toLocaleString()},window.addStyleSheet=function(e){var t=document.head,a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=e,t.appendChild(a)},HTMLElement.prototype.toggleClass=function(e){this.classList.contains(e)?this.classList.remove(e):this.classList.add(e)},HTMLElement.prototype.destroy=function(){try{this.parentNode.removeChild(this)}catch(e){console.log(e)}},window.setPreference=function(e,t){void 0===this.localStorage.profile&&(this.localStorage.profile=JSON.stringify({}));var a=JSON.parse(localStorage.profile);a[e]=t,localStorage.profile=JSON.stringify(a)},window.getPreference=function(e){if(void 0!==this.localStorage.profile&&(profile=JSON.parse(localStorage.profile),void 0!==profile[e]))return profile[e]},window.handlePasteImage=function(e,t){e.onpaste=function(e){var a=(e.clipboardData||e.originalEvent.clipboardData).items;console.log(JSON.stringify(a));for(var r=null,n=0;n<a.length;n++)0===a[n].type.indexOf("image")&&(r=a[n].getAsFile());if(null!==r){if(document.getElementById("alert-wrapper"))return;return new Promise((function(e,a){var n=document.createElement("div");n.id="alert-wrapper";n.innerHTML='<div id="alert-shim"><div id="alert-box"><p class="alert-message"><img class="img-prev" src="" /></p><div id="alert-buttons"><button id="alert-cancel">Cancel</button><button id="alert-ok">OK</button></div></div></div>',document.body.appendChild(n),setTimeout((function(){document.getElementById("alert-box").style.top="0"}),100),document.getElementById("alert-ok").focus();var i=new FileReader;i.onload=function(e){var t=new Image;t.onload=function(){var e,a,r=t.src.split(";")[0].split(":")[1],n=1,i=document.createElement("canvas");t.width>1e3&&(n=1e3/t.width),n*t.height>1e3&&(n=1e3/t.height),e=t.width*n,a=t.height*n,i.width=e,i.height=a,i.getContext("2d").drawImage(t,0,0,e,a);var s=1,o=i.toDataURL(r,s);console.log(o.length),o.length>25e4&&(o=i.toDataURL("image/jpeg",1)).length>25e4&&(s=Math.pow(25e4/o.length,1.33),o=i.toDataURL("image/jpeg",s)),console.log(o.length),document.querySelector(".alert-message img").src=o},t.src=e.target.result},i.readAsDataURL(r),document.getElementById("alert-shim").onclick=function(e){13===e.keyCode&&(e.preventDefault(),document.getElementById("alert-ok").click())},document.getElementById("alert-ok").onclick=function(){t(document.querySelector(".alert-message").innerHTML),n.remove(),e(!0)},document.getElementById("alert-cancel").onclick=function(){n.remove(),e(!1)}}))}}}}},function(e,t,a){"use strict";const r=a(1019);e.exports=r.default,e.exports.raw=r.raw},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){const t=n.default.getOptions(this)||{};(0,i.default)(s.default,t,{name:"File Loader",baseDataPath:"options"});const a=t.context||this.rootContext,o=n.default.interpolateName(this,t.name||"[contenthash].[ext]",{context:a,content:e,regExp:t.regExp});let c=o;t.outputPath&&(c="function"==typeof t.outputPath?t.outputPath(o,this.resourcePath,a):r.default.posix.join(t.outputPath,o));let l="__webpack_public_path__ + "+JSON.stringify(c);t.publicPath&&(l="function"==typeof t.publicPath?t.publicPath(o,this.resourcePath,a):`${t.publicPath.endsWith("/")?t.publicPath:t.publicPath+"/"}${o}`,l=JSON.stringify(l));t.postTransformPublicPath&&(l=t.postTransformPublicPath(l));(void 0===t.emitFile||t.emitFile)&&this.emitFile(c,e);return`${t.esModules?"export default":"module.exports ="} ${l};`},t.raw=void 0;var r=o(a(19)),n=o(a(1020)),i=o(a(1031)),s=o(a(1092));function o(e){return e&&e.__esModule?e:{default:e}}t.raw=!0},function(e,t,a){"use strict";const r=a(1021),n=a(399),i=a(1023),s=a(1024),o=a(1025),c=a(1026),l=a(1027),u=a(1028),d=a(400),p=a(1029);t.getOptions=r,t.parseQuery=n,t.stringifyRequest=i,t.getRemainingRequest=s,t.getCurrentRequest=o,t.isUrlRequest=c,t.urlToRequest=l,t.parseString=u,t.getHashDigest=d,t.interpolateName=p},function(e,t,a){"use strict";const r=a(399);e.exports=function(e){const t=e.query;return"string"==typeof t&&""!==t?r(e.query):t&&"object"==typeof t?t:null}},function(e,t,a){e.exports=function(){"use strict";var e,t,a=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Space_Separator=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,t.ID_Start=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,t.ID_Continue=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/}(e={exports:{}},e.exports),e.exports);(t=a)&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")&&t.default;var r=a.Space_Separator,n=a.ID_Start,i=a.ID_Continue;function s(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||n.test(e)}function o(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||i.test(e)}function c(e){return/[0-9]/.test(e)}function l(e){return/[0-9A-Fa-f]/.test(e)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d=void 0,p=void 0,h=void 0,f=void 0,m=void 0,g=void 0,b=void 0,y=void 0,v=void 0,_=void 0,w=void 0,x=void 0,k=void 0,S=void 0;function P(){for(_="default",w="",x=!1,k=1;;){S=E();var e=A[_]();if(e)return e}}function E(){if(d[f])return String.fromCodePoint(d.codePointAt(f))}function C(){var e=E();return"\n"===e?(m++,g=0):e?g+=e.length:g++,e&&(f+=e.length),e}var A={default:function(){switch(S){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void C();case"/":return C(),void(_="comment");case void 0:return C(),M("eof")}if(!function(e){return r.test(e)}(S))return A[p]();C()},comment:function(){switch(S){case"*":return C(),void(_="multiLineComment");case"/":return C(),void(_="singleLineComment")}throw R(C())},multiLineComment:function(){switch(S){case"*":return C(),void(_="multiLineCommentAsterisk");case void 0:throw R(C())}C()},multiLineCommentAsterisk:function(){switch(S){case"*":return void C();case"/":return C(),void(_="default");case void 0:throw R(C())}C(),_="multiLineComment"},singleLineComment:function(){switch(S){case"\n":case"\r":case"\u2028":case"\u2029":return C(),void(_="default");case void 0:return C(),M("eof")}C()},value:function(){switch(S){case"{":case"[":return M("punctuator",C());case"n":return C(),T("ull"),M("null",null);case"t":return C(),T("rue"),M("boolean",!0);case"f":return C(),T("alse"),M("boolean",!1);case"-":case"+":return"-"===C()&&(k=-1),void(_="sign");case".":return w=C(),void(_="decimalPointLeading");case"0":return w=C(),void(_="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return w=C(),void(_="decimalInteger");case"I":return C(),T("nfinity"),M("numeric",1/0);case"N":return C(),T("aN"),M("numeric",NaN);case'"':case"'":return x='"'===C(),w="",void(_="string")}throw R(C())},identifierNameStartEscape:function(){if("u"!==S)throw R(C());C();var e=j();switch(e){case"$":case"_":break;default:if(!s(e))throw q()}w+=e,_="identifierName"},identifierName:function(){switch(S){case"$":case"_":case"‌":case"‍":return void(w+=C());case"\\":return C(),void(_="identifierNameEscape")}if(!o(S))return M("identifier",w);w+=C()},identifierNameEscape:function(){if("u"!==S)throw R(C());C();var e=j();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!o(e))throw q()}w+=e,_="identifierName"},sign:function(){switch(S){case".":return w=C(),void(_="decimalPointLeading");case"0":return w=C(),void(_="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return w=C(),void(_="decimalInteger");case"I":return C(),T("nfinity"),M("numeric",k*(1/0));case"N":return C(),T("aN"),M("numeric",NaN)}throw R(C())},zero:function(){switch(S){case".":return w+=C(),void(_="decimalPoint");case"e":case"E":return w+=C(),void(_="decimalExponent");case"x":case"X":return w+=C(),void(_="hexadecimal")}return M("numeric",0*k)},decimalInteger:function(){switch(S){case".":return w+=C(),void(_="decimalPoint");case"e":case"E":return w+=C(),void(_="decimalExponent")}if(!c(S))return M("numeric",k*Number(w));w+=C()},decimalPointLeading:function(){if(c(S))return w+=C(),void(_="decimalFraction");throw R(C())},decimalPoint:function(){switch(S){case"e":case"E":return w+=C(),void(_="decimalExponent")}return c(S)?(w+=C(),void(_="decimalFraction")):M("numeric",k*Number(w))},decimalFraction:function(){switch(S){case"e":case"E":return w+=C(),void(_="decimalExponent")}if(!c(S))return M("numeric",k*Number(w));w+=C()},decimalExponent:function(){switch(S){case"+":case"-":return w+=C(),void(_="decimalExponentSign")}if(c(S))return w+=C(),void(_="decimalExponentInteger");throw R(C())},decimalExponentSign:function(){if(c(S))return w+=C(),void(_="decimalExponentInteger");throw R(C())},decimalExponentInteger:function(){if(!c(S))return M("numeric",k*Number(w));w+=C()},hexadecimal:function(){if(l(S))return w+=C(),void(_="hexadecimalInteger");throw R(C())},hexadecimalInteger:function(){if(!l(S))return M("numeric",k*Number(w));w+=C()},string:function(){switch(S){case"\\":return C(),void(w+=function(){switch(E()){case"b":return C(),"\b";case"f":return C(),"\f";case"n":return C(),"\n";case"r":return C(),"\r";case"t":return C(),"\t";case"v":return C(),"\v";case"0":if(C(),c(E()))throw R(C());return"\0";case"x":return C(),function(){var e="",t=E();if(!l(t))throw R(C());if(e+=C(),!l(t=E()))throw R(C());return e+=C(),String.fromCodePoint(parseInt(e,16))}();case"u":return C(),j();case"\n":case"\u2028":case"\u2029":return C(),"";case"\r":return C(),"\n"===E()&&C(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw R(C())}return C()}());case'"':return x?(C(),M("string",w)):void(w+=C());case"'":return x?void(w+=C()):(C(),M("string",w));case"\n":case"\r":throw R(C());case"\u2028":case"\u2029":!function(e){console.warn("JSON5: '"+e+"' is not valid ECMAScript; consider escaping")}(S);break;case void 0:throw R(C())}w+=C()},start:function(){switch(S){case"{":case"[":return M("punctuator",C())}_="value"},beforePropertyName:function(){switch(S){case"$":case"_":return w=C(),void(_="identifierName");case"\\":return C(),void(_="identifierNameStartEscape");case"}":return M("punctuator",C());case'"':case"'":return x='"'===C(),void(_="string")}if(s(S))return w+=C(),void(_="identifierName");throw R(C())},afterPropertyName:function(){if(":"===S)return M("punctuator",C());throw R(C())},beforePropertyValue:function(){_="value"},afterPropertyValue:function(){switch(S){case",":case"}":return M("punctuator",C())}throw R(C())},beforeArrayValue:function(){if("]"===S)return M("punctuator",C());_="value"},afterArrayValue:function(){switch(S){case",":case"]":return M("punctuator",C())}throw R(C())},end:function(){throw R(C())}};function M(e,t){return{type:e,value:t,line:m,column:g}}function T(e){var t=!0,a=!1,r=void 0;try{for(var n,i=e[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var s=n.value;if(E()!==s)throw R(C());C()}}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}}function j(){for(var e="",t=4;t-- >0;){if(!l(E()))throw R(C());e+=C()}return String.fromCodePoint(parseInt(e,16))}var O={start:function(){if("eof"===b.type)throw B();D()},beforePropertyName:function(){switch(b.type){case"identifier":case"string":return y=b.value,void(p="afterPropertyName");case"punctuator":return void I();case"eof":throw B()}},afterPropertyName:function(){if("eof"===b.type)throw B();p="beforePropertyValue"},beforePropertyValue:function(){if("eof"===b.type)throw B();D()},beforeArrayValue:function(){if("eof"===b.type)throw B();"punctuator"!==b.type||"]"!==b.value?D():I()},afterPropertyValue:function(){if("eof"===b.type)throw B();switch(b.value){case",":return void(p="beforePropertyName");case"}":I()}},afterArrayValue:function(){if("eof"===b.type)throw B();switch(b.value){case",":return void(p="beforeArrayValue");case"]":I()}},end:function(){}};function D(){var e=void 0;switch(b.type){case"punctuator":switch(b.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=b.value}if(void 0===v)v=e;else{var t=h[h.length-1];Array.isArray(t)?t.push(e):t[y]=e}if(null!==e&&"object"===(void 0===e?"undefined":u(e)))h.push(e),p=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{var a=h[h.length-1];p=null==a?"end":Array.isArray(a)?"afterArrayValue":"afterPropertyValue"}}function I(){h.pop();var e=h[h.length-1];p=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function R(e){return L(void 0===e?"JSON5: invalid end of input at "+m+":"+g:"JSON5: invalid character '"+function(e){var t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){var a=e.charCodeAt(0).toString(16);return"\\x"+("00"+a).substring(a.length)}return e}(e)+"' at "+m+":"+g)}function B(){return L("JSON5: invalid end of input at "+m+":"+g)}function q(){return L("JSON5: invalid identifier character at "+m+":"+(g-=5))}function L(e){var t=new SyntaxError(e);return t.lineNumber=m,t.columnNumber=g,t}return{parse:function(e,t){d=String(e),p="start",h=[],f=0,m=1,g=0,b=void 0,y=void 0,v=void 0;do{b=P(),O[p]()}while("eof"!==b.type);return"function"==typeof t?function e(t,a,r){var n=t[a];if(null!=n&&"object"===(void 0===n?"undefined":u(n)))for(var i in n){var s=e(n,i,r);void 0===s?delete n[i]:n[i]=s}return r.call(t,a,n)}({"":v},"",t):v},stringify:function(e,t,a){var r=[],n="",i=void 0,c=void 0,l="",d=void 0;if(null==t||"object"!==(void 0===t?"undefined":u(t))||Array.isArray(t)||(a=t.space,d=t.quote,t=t.replacer),"function"==typeof t)c=t;else if(Array.isArray(t)){i=[];var p=!0,h=!1,f=void 0;try{for(var m,g=t[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var b=m.value,y=void 0;"string"==typeof b?y=b:("number"==typeof b||b instanceof String||b instanceof Number)&&(y=String(b)),void 0!==y&&i.indexOf(y)<0&&i.push(y)}}catch(e){h=!0,f=e}finally{try{!p&&g.return&&g.return()}finally{if(h)throw f}}}return a instanceof Number?a=Number(a):a instanceof String&&(a=String(a)),"number"==typeof a?a>0&&(a=Math.min(10,Math.floor(a)),l="          ".substr(0,a)):"string"==typeof a&&(l=a.substr(0,10)),function e(t,a){var s=a[t];switch(null!=s&&("function"==typeof s.toJSON5?s=s.toJSON5(t):"function"==typeof s.toJSON&&(s=s.toJSON(t))),c&&(s=c.call(a,t,s)),s instanceof Number?s=Number(s):s instanceof String?s=String(s):s instanceof Boolean&&(s=s.valueOf()),s){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof s?v(s):"number"==typeof s?String(s):"object"===(void 0===s?"undefined":u(s))?Array.isArray(s)?function(t){if(r.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");r.push(t);var a=n;n+=l;for(var i=[],s=0;s<t.length;s++){var o=e(String(s),t);i.push(void 0!==o?o:"null")}var c=void 0;if(0===i.length)c="[]";else if(""===l)c="["+i.join(",")+"]";else{var u=",\n"+n,d=i.join(u);c="[\n"+n+d+",\n"+a+"]"}return r.pop(),n=a,c}(s):function(t){if(r.indexOf(t)>=0)throw TypeError("Converting circular structure to JSON5");r.push(t);var a=n;n+=l;var s=i||Object.keys(t),o=[],c=!0,u=!1,d=void 0;try{for(var p,h=s[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var f=p.value,m=e(f,t);if(void 0!==m){var g=_(f)+":";""!==l&&(g+=" "),g+=m,o.push(g)}}}catch(t){u=!0,d=t}finally{try{!c&&h.return&&h.return()}finally{if(u)throw d}}var b=void 0;if(0===o.length)b="{}";else{var y=void 0;if(""===l)b="{"+(y=o.join(","))+"}";else{var v=",\n"+n;y=o.join(v),b="{\n"+n+y+",\n"+a+"}"}}return r.pop(),n=a,b}(s):void 0}("",{"":e});function v(e){var t={"'":.1,'"':.2},a={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},r="",n=!0,i=!1,s=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value;switch(l){case"'":case'"':t[l]++,r+=l;continue}if(a[l])r+=a[l];else if(l<" "){var u=l.charCodeAt(0).toString(16);r+="\\x"+("00"+u).substring(u.length)}else r+=l}}catch(e){i=!0,s=e}finally{try{!n&&c.return&&c.return()}finally{if(i)throw s}}var p=d||Object.keys(t).reduce((function(e,a){return t[e]<t[a]?e:a}));return p+(r=r.replace(new RegExp(p,"g"),a[p]))+p}function _(e){if(0===e.length)return v(e);var t=String.fromCodePoint(e.codePointAt(0));if(!s(t))return v(e);for(var a=t.length;a<e.length;a++)if(!o(String.fromCodePoint(e.codePointAt(a))))return v(e);return e}}}}()},function(e,t,a){"use strict";const r=a(19),n=/^\.\.?[/\\]/;function i(e){return r.posix.isAbsolute(e)||r.win32.isAbsolute(e)}e.exports=function(e,t){const a=t.split("!"),s=e.context||e.options&&e.options.context;return JSON.stringify(a.map(e=>{const t=e.match(/^(.*?)(\?.*)/),a=t?t[2]:"";let o=t?t[1]:e;if(i(o)&&s){if(o=r.relative(s,o),i(o))return o+a;!1===(c=o,n.test(c))&&(o="./"+o)}var c;return o.replace(/\\/g,"/")+a}).join("!"))}},function(e,t,a){"use strict";e.exports=function(e){return e.remainingRequest?e.remainingRequest:e.loaders.slice(e.loaderIndex+1).map(e=>e.request).concat([e.resource]).join("!")}},function(e,t,a){"use strict";e.exports=function(e){return e.currentRequest?e.currentRequest:e.loaders.slice(e.loaderIndex).map(e=>e.request).concat([e.resource]).join("!")}},function(e,t,a){"use strict";const r=a(19);e.exports=function(e,t){return!(/^[a-z][a-z0-9+.-]*:/i.test(e)&&!r.win32.isAbsolute(e))&&(!/^\/\//.test(e)&&(!/^[{}[\]#*;,'§$%&(=?`´^°<>]/.test(e)&&(void 0!==t&&!1!==t||!/^\//.test(e))))}},function(e,t,a){"use strict";const r=/^[A-Z]:[/\\]|^\\\\/i;e.exports=function(e,t){if(""===e)return"";const a=/^[^?]*~/;let n;if(r.test(e))n=e;else if(void 0!==t&&!1!==t&&/^\//.test(e))switch(typeof t){case"string":n=a.test(t)?t.replace(/([^~/])$/,"$1/")+e.slice(1):t+e;break;case"boolean":n=e;break;default:throw new Error("Unexpected parameters to loader-utils 'urlToRequest': url = "+e+", root = "+t+".")}else n=/^\.\.?\//.test(e)?e:"./"+e;return a.test(n)&&(n=n.replace(a,"")),n}},function(e,t,a){"use strict";e.exports=function e(t){try{return'"'===t[0]?JSON.parse(t):"'"===t[0]&&"'"===t.substr(t.length-1)?e(t.replace(/\\.|"/g,e=>'"'===e?'\\"':e).replace(/^'|'$/g,'"')):JSON.parse('"'+t+'"')}catch(e){return t}}},function(e,t,a){"use strict";const r=a(19),n=a(1030),i=a(400),s=/[\uD800-\uDFFF]./,o=n.filter(e=>s.test(e)),c={};e.exports=function(e,t,a){let n;n="function"==typeof t?t(e.resourcePath):t||"[hash].[ext]";const s=a.context,l=a.content,u=a.regExp;let d="bin",p="file",h="",f="";if(e.resourcePath){const t=r.parse(e.resourcePath);let a=e.resourcePath;t.ext&&(d=t.ext.substr(1)),t.dir&&(p=t.name,a=t.dir+r.sep),void 0!==s?(h=r.relative(s,a+"_").replace(/\\/g,"/").replace(/\.\.(\/)?/g,"_$1"),h=h.substr(0,h.length-1)):h=a.replace(/\\/g,"/").replace(/\.\.(\/)?/g,"_$1"),1===h.length?h="":h.length>1&&(f=r.basename(h))}let m=n;if(l&&(m=m.replace(/\[(?:([^:\]]+):)?(?:hash|contenthash)(?::([a-z]+\d*))?(?::(\d+))?\]/gi,(e,t,a,r)=>i(l,t,a,parseInt(r,10))).replace(/\[emoji(?::(\d+))?\]/gi,(e,t)=>function(e,t){if(c[e])return c[e];t=t||1;const a=[];do{if(!o.length)throw new Error("Ran out of emoji");const e=Math.floor(Math.random()*o.length);a.push(o[e]),o.splice(e,1)}while(--t>0);const r=a.join("");return c[e]=r,r}(l,parseInt(t,10)))),m=m.replace(/\[ext\]/gi,()=>d).replace(/\[name\]/gi,()=>p).replace(/\[path\]/gi,()=>h).replace(/\[folder\]/gi,()=>f),u&&e.resourcePath){const t=e.resourcePath.match(new RegExp(u));t&&t.forEach((e,t)=>{m=m.replace(new RegExp("\\["+t+"\\]","ig"),e)})}return"object"==typeof e.options&&"function"==typeof e.options.customInterpolateName&&(m=e.options.customInterpolateName.call(e,m,t,a)),m}},function(e,t){e.exports=["🀄","🃏","🅰","🅱","🅾","🅿","🆎","🆑","🆒","🆓","🆔","🆕","🆖","🆗","🆘","🆙","🆚","🇦🇨","🇦🇩","🇦🇪","🇦🇫","🇦🇬","🇦🇮","🇦🇱","🇦🇲","🇦🇴","🇦🇶","🇦🇷","🇦🇸","🇦🇹","🇦🇺","🇦🇼","🇦🇽","🇦🇿","🇦","🇧🇦","🇧🇧","🇧🇩","🇧🇪","🇧🇫","🇧🇬","🇧🇭","🇧🇮","🇧🇯","🇧🇱","🇧🇲","🇧🇳","🇧🇴","🇧🇶","🇧🇷","🇧🇸","🇧🇹","🇧🇻","🇧🇼","🇧🇾","🇧🇿","🇧","🇨🇦","🇨🇨","🇨🇩","🇨🇫","🇨🇬","🇨🇭","🇨🇮","🇨🇰","🇨🇱","🇨🇲","🇨🇳","🇨🇴","🇨🇵","🇨🇷","🇨🇺","🇨🇻","🇨🇼","🇨🇽","🇨🇾","🇨🇿","🇨","🇩🇪","🇩🇬","🇩🇯","🇩🇰","🇩🇲","🇩🇴","🇩🇿","🇩","🇪🇦","🇪🇨","🇪🇪","🇪🇬","🇪🇭","🇪🇷","🇪🇸","🇪🇹","🇪🇺","🇪","🇫🇮","🇫🇯","🇫🇰","🇫🇲","🇫🇴","🇫🇷","🇫","🇬🇦","🇬🇧","🇬🇩","🇬🇪","🇬🇫","🇬🇬","🇬🇭","🇬🇮","🇬🇱","🇬🇲","🇬🇳","🇬🇵","🇬🇶","🇬🇷","🇬🇸","🇬🇹","🇬🇺","🇬🇼","🇬🇾","🇬","🇭🇰","🇭🇲","🇭🇳","🇭🇷","🇭🇹","🇭🇺","🇭","🇮🇨","🇮🇩","🇮🇪","🇮🇱","🇮🇲","🇮🇳","🇮🇴","🇮🇶","🇮🇷","🇮🇸","🇮🇹","🇮","🇯🇪","🇯🇲","🇯🇴","🇯🇵","🇯","🇰🇪","🇰🇬","🇰🇭","🇰🇮","🇰🇲","🇰🇳","🇰🇵","🇰🇷","🇰🇼","🇰🇾","🇰🇿","🇰","🇱🇦","🇱🇧","🇱🇨","🇱🇮","🇱🇰","🇱🇷","🇱🇸","🇱🇹","🇱🇺","🇱🇻","🇱🇾","🇱","🇲🇦","🇲🇨","🇲🇩","🇲🇪","🇲🇫","🇲🇬","🇲🇭","🇲🇰","🇲🇱","🇲🇲","🇲🇳","🇲🇴","🇲🇵","🇲🇶","🇲🇷","🇲🇸","🇲🇹","🇲🇺","🇲🇻","🇲🇼","🇲🇽","🇲🇾","🇲🇿","🇲","🇳🇦","🇳🇨","🇳🇪","🇳🇫","🇳🇬","🇳🇮","🇳🇱","🇳🇴","🇳🇵","🇳🇷","🇳🇺","🇳🇿","🇳","🇴🇲","🇴","🇵🇦","🇵🇪","🇵🇫","🇵🇬","🇵🇭","🇵🇰","🇵🇱","🇵🇲","🇵🇳","🇵🇷","🇵🇸","🇵🇹","🇵🇼","🇵🇾","🇵","🇶🇦","🇶","🇷🇪","🇷🇴","🇷🇸","🇷🇺","🇷🇼","🇷","🇸🇦","🇸🇧","🇸🇨","🇸🇩","🇸🇪","🇸🇬","🇸🇭","🇸🇮","🇸🇯","🇸🇰","🇸🇱","🇸🇲","🇸🇳","🇸🇴","🇸🇷","🇸🇸","🇸🇹","🇸🇻","🇸🇽","🇸🇾","🇸🇿","🇸","🇹🇦","🇹🇨","🇹🇩","🇹🇫","🇹🇬","🇹🇭","🇹🇯","🇹🇰","🇹🇱","🇹🇲","🇹🇳","🇹🇴","🇹🇷","🇹🇹","🇹🇻","🇹🇼","🇹🇿","🇹","🇺🇦","🇺🇬","🇺🇲","🇺🇳","🇺🇸","🇺🇾","🇺🇿","🇺","🇻🇦","🇻🇨","🇻🇪","🇻🇬","🇻🇮","🇻🇳","🇻🇺","🇻","🇼🇫","🇼🇸","🇼","🇽🇰","🇽","🇾🇪","🇾🇹","🇾","🇿🇦","🇿🇲","🇿🇼","🇿","🈁","🈂","🈚","🈯","🈲","🈳","🈴","🈵","🈶","🈷","🈸","🈹","🈺","🉐","🉑","🌀","🌁","🌂","🌃","🌄","🌅","🌆","🌇","🌈","🌉","🌊","🌋","🌌","🌍","🌎","🌏","🌐","🌑","🌒","🌓","🌔","🌕","🌖","🌗","🌘","🌙","🌚","🌛","🌜","🌝","🌞","🌟","🌠","🌡","🌤","🌥","🌦","🌧","🌨","🌩","🌪","🌫","🌬","🌭","🌮","🌯","🌰","🌱","🌲","🌳","🌴","🌵","🌶","🌷","🌸","🌹","🌺","🌻","🌼","🌽","🌾","🌿","🍀","🍁","🍂","🍃","🍄","🍅","🍆","🍇","🍈","🍉","🍊","🍋","🍌","🍍","🍎","🍏","🍐","🍑","🍒","🍓","🍔","🍕","🍖","🍗","🍘","🍙","🍚","🍛","🍜","🍝","🍞","🍟","🍠","🍡","🍢","🍣","🍤","🍥","🍦","🍧","🍨","🍩","🍪","🍫","🍬","🍭","🍮","🍯","🍰","🍱","🍲","🍳","🍴","🍵","🍶","🍷","🍸","🍹","🍺","🍻","🍼","🍽","🍾","🍿","🎀","🎁","🎂","🎃","🎄","🎅🏻","🎅🏼","🎅🏽","🎅🏾","🎅🏿","🎅","🎆","🎇","🎈","🎉","🎊","🎋","🎌","🎍","🎎","🎏","🎐","🎑","🎒","🎓","🎖","🎗","🎙","🎚","🎛","🎞","🎟","🎠","🎡","🎢","🎣","🎤","🎥","🎦","🎧","🎨","🎩","🎪","🎫","🎬","🎭","🎮","🎯","🎰","🎱","🎲","🎳","🎴","🎵","🎶","🎷","🎸","🎹","🎺","🎻","🎼","🎽","🎾","🎿","🏀","🏁","🏂🏻","🏂🏼","🏂🏽","🏂🏾","🏂🏿","🏂","🏃🏻‍♀️","🏃🏻‍♂️","🏃🏻","🏃🏼‍♀️","🏃🏼‍♂️","🏃🏼","🏃🏽‍♀️","🏃🏽‍♂️","🏃🏽","🏃🏾‍♀️","🏃🏾‍♂️","🏃🏾","🏃🏿‍♀️","🏃🏿‍♂️","🏃🏿","🏃‍♀️","🏃‍♂️","🏃","🏄🏻‍♀️","🏄🏻‍♂️","🏄🏻","🏄🏼‍♀️","🏄🏼‍♂️","🏄🏼","🏄🏽‍♀️","🏄🏽‍♂️","🏄🏽","🏄🏾‍♀️","🏄🏾‍♂️","🏄🏾","🏄🏿‍♀️","🏄🏿‍♂️","🏄🏿","🏄‍♀️","🏄‍♂️","🏄","🏅","🏆","🏇🏻","🏇🏼","🏇🏽","🏇🏾","🏇🏿","🏇","🏈","🏉","🏊🏻‍♀️","🏊🏻‍♂️","🏊🏻","🏊🏼‍♀️","🏊🏼‍♂️","🏊🏼","🏊🏽‍♀️","🏊🏽‍♂️","🏊🏽","🏊🏾‍♀️","🏊🏾‍♂️","🏊🏾","🏊🏿‍♀️","🏊🏿‍♂️","🏊🏿","🏊‍♀️","🏊‍♂️","🏊","🏋🏻‍♀️","🏋🏻‍♂️","🏋🏻","🏋🏼‍♀️","🏋🏼‍♂️","🏋🏼","🏋🏽‍♀️","🏋🏽‍♂️","🏋🏽","🏋🏾‍♀️","🏋🏾‍♂️","🏋🏾","🏋🏿‍♀️","🏋🏿‍♂️","🏋🏿","🏋️‍♀️","🏋️‍♂️","🏋","🏌🏻‍♀️","🏌🏻‍♂️","🏌🏻","🏌🏼‍♀️","🏌🏼‍♂️","🏌🏼","🏌🏽‍♀️","🏌🏽‍♂️","🏌🏽","🏌🏾‍♀️","🏌🏾‍♂️","🏌🏾","🏌🏿‍♀️","🏌🏿‍♂️","🏌🏿","🏌️‍♀️","🏌️‍♂️","🏌","🏍","🏎","🏏","🏐","🏑","🏒","🏓","🏔","🏕","🏖","🏗","🏘","🏙","🏚","🏛","🏜","🏝","🏞","🏟","🏠","🏡","🏢","🏣","🏤","🏥","🏦","🏧","🏨","🏩","🏪","🏫","🏬","🏭","🏮","🏯","🏰","🏳️‍🌈","🏳","🏴‍☠️","🏴","🏵","🏷","🏸","🏹","🏺","🏻","🏼","🏽","🏾","🏿","🐀","🐁","🐂","🐃","🐄","🐅","🐆","🐇","🐈","🐉","🐊","🐋","🐌","🐍","🐎","🐏","🐐","🐑","🐒","🐓","🐔","🐕","🐖","🐗","🐘","🐙","🐚","🐛","🐜","🐝","🐞","🐟","🐠","🐡","🐢","🐣","🐤","🐥","🐦","🐧","🐨","🐩","🐪","🐫","🐬","🐭","🐮","🐯","🐰","🐱","🐲","🐳","🐴","🐵","🐶","🐷","🐸","🐹","🐺","🐻","🐼","🐽","🐾","🐿","👀","👁‍🗨","👁","👂🏻","👂🏼","👂🏽","👂🏾","👂🏿","👂","👃🏻","👃🏼","👃🏽","👃🏾","👃🏿","👃","👄","👅","👆🏻","👆🏼","👆🏽","👆🏾","👆🏿","👆","👇🏻","👇🏼","👇🏽","👇🏾","👇🏿","👇","👈🏻","👈🏼","👈🏽","👈🏾","👈🏿","👈","👉🏻","👉🏼","👉🏽","👉🏾","👉🏿","👉","👊🏻","👊🏼","👊🏽","👊🏾","👊🏿","👊","👋🏻","👋🏼","👋🏽","👋🏾","👋🏿","👋","👌🏻","👌🏼","👌🏽","👌🏾","👌🏿","👌","👍🏻","👍🏼","👍🏽","👍🏾","👍🏿","👍","👎🏻","👎🏼","👎🏽","👎🏾","👎🏿","👎","👏🏻","👏🏼","👏🏽","👏🏾","👏🏿","👏","👐🏻","👐🏼","👐🏽","👐🏾","👐🏿","👐","👑","👒","👓","👔","👕","👖","👗","👘","👙","👚","👛","👜","👝","👞","👟","👠","👡","👢","👣","👤","👥","👦🏻","👦🏼","👦🏽","👦🏾","👦🏿","👦","👧🏻","👧🏼","👧🏽","👧🏾","👧🏿","👧","👨🏻‍🌾","👨🏻‍🍳","👨🏻‍🎓","👨🏻‍🎤","👨🏻‍🎨","👨🏻‍🏫","👨🏻‍🏭","👨🏻‍💻","👨🏻‍💼","👨🏻‍🔧","👨🏻‍🔬","👨🏻‍🚀","👨🏻‍🚒","👨🏻‍⚕️","👨🏻‍⚖️","👨🏻‍✈️","👨🏻","👨🏼‍🌾","👨🏼‍🍳","👨🏼‍🎓","👨🏼‍🎤","👨🏼‍🎨","👨🏼‍🏫","👨🏼‍🏭","👨🏼‍💻","👨🏼‍💼","👨🏼‍🔧","👨🏼‍🔬","👨🏼‍🚀","👨🏼‍🚒","👨🏼‍⚕️","👨🏼‍⚖️","👨🏼‍✈️","👨🏼","👨🏽‍🌾","👨🏽‍🍳","👨🏽‍🎓","👨🏽‍🎤","👨🏽‍🎨","👨🏽‍🏫","👨🏽‍🏭","👨🏽‍💻","👨🏽‍💼","👨🏽‍🔧","👨🏽‍🔬","👨🏽‍🚀","👨🏽‍🚒","👨🏽‍⚕️","👨🏽‍⚖️","👨🏽‍✈️","👨🏽","👨🏾‍🌾","👨🏾‍🍳","👨🏾‍🎓","👨🏾‍🎤","👨🏾‍🎨","👨🏾‍🏫","👨🏾‍🏭","👨🏾‍💻","👨🏾‍💼","👨🏾‍🔧","👨🏾‍🔬","👨🏾‍🚀","👨🏾‍🚒","👨🏾‍⚕️","👨🏾‍⚖️","👨🏾‍✈️","👨🏾","👨🏿‍🌾","👨🏿‍🍳","👨🏿‍🎓","👨🏿‍🎤","👨🏿‍🎨","👨🏿‍🏫","👨🏿‍🏭","👨🏿‍💻","👨🏿‍💼","👨🏿‍🔧","👨🏿‍🔬","👨🏿‍🚀","👨🏿‍🚒","👨🏿‍⚕️","👨🏿‍⚖️","👨🏿‍✈️","👨🏿","👨‍🌾","👨‍🍳","👨‍🎓","👨‍🎤","👨‍🎨","👨‍🏫","👨‍🏭","👨‍👦‍👦","👨‍👦","👨‍👧‍👦","👨‍👧‍👧","👨‍👧","👨‍👨‍👦‍👦","👨‍👨‍👦","👨‍👨‍👧‍👦","👨‍👨‍👧‍👧","👨‍👨‍👧","👨‍👩‍👦‍👦","👨‍👩‍👦","👨‍👩‍👧‍👦","👨‍👩‍👧‍👧","👨‍👩‍👧","👨‍💻","👨‍💼","👨‍🔧","👨‍🔬","👨‍🚀","👨‍🚒","👨‍⚕️","👨‍⚖️","👨‍✈️","👨‍❤️‍👨","👨‍❤️‍💋‍👨","👨","👩🏻‍🌾","👩🏻‍🍳","👩🏻‍🎓","👩🏻‍🎤","👩🏻‍🎨","👩🏻‍🏫","👩🏻‍🏭","👩🏻‍💻","👩🏻‍💼","👩🏻‍🔧","👩🏻‍🔬","👩🏻‍🚀","👩🏻‍🚒","👩🏻‍⚕️","👩🏻‍⚖️","👩🏻‍✈️","👩🏻","👩🏼‍🌾","👩🏼‍🍳","👩🏼‍🎓","👩🏼‍🎤","👩🏼‍🎨","👩🏼‍🏫","👩🏼‍🏭","👩🏼‍💻","👩🏼‍💼","👩🏼‍🔧","👩🏼‍🔬","👩🏼‍🚀","👩🏼‍🚒","👩🏼‍⚕️","👩🏼‍⚖️","👩🏼‍✈️","👩🏼","👩🏽‍🌾","👩🏽‍🍳","👩🏽‍🎓","👩🏽‍🎤","👩🏽‍🎨","👩🏽‍🏫","👩🏽‍🏭","👩🏽‍💻","👩🏽‍💼","👩🏽‍🔧","👩🏽‍🔬","👩🏽‍🚀","👩🏽‍🚒","👩🏽‍⚕️","👩🏽‍⚖️","👩🏽‍✈️","👩🏽","👩🏾‍🌾","👩🏾‍🍳","👩🏾‍🎓","👩🏾‍🎤","👩🏾‍🎨","👩🏾‍🏫","👩🏾‍🏭","👩🏾‍💻","👩🏾‍💼","👩🏾‍🔧","👩🏾‍🔬","👩🏾‍🚀","👩🏾‍🚒","👩🏾‍⚕️","👩🏾‍⚖️","👩🏾‍✈️","👩🏾","👩🏿‍🌾","👩🏿‍🍳","👩🏿‍🎓","👩🏿‍🎤","👩🏿‍🎨","👩🏿‍🏫","👩🏿‍🏭","👩🏿‍💻","👩🏿‍💼","👩🏿‍🔧","👩🏿‍🔬","👩🏿‍🚀","👩🏿‍🚒","👩🏿‍⚕️","👩🏿‍⚖️","👩🏿‍✈️","👩🏿","👩‍🌾","👩‍🍳","👩‍🎓","👩‍🎤","👩‍🎨","👩‍🏫","👩‍🏭","👩‍👦‍👦","👩‍👦","👩‍👧‍👦","👩‍👧‍👧","👩‍👧","👩‍👩‍👦‍👦","👩‍👩‍👦","👩‍👩‍👧‍👦","👩‍👩‍👧‍👧","👩‍👩‍👧","👩‍💻","👩‍💼","👩‍🔧","👩‍🔬","👩‍🚀","👩‍🚒","👩‍⚕️","👩‍⚖️","👩‍✈️","👩‍❤️‍👨","👩‍❤️‍👩","👩‍❤️‍💋‍👨","👩‍❤️‍💋‍👩","👩","👪🏻","👪🏼","👪🏽","👪🏾","👪🏿","👪","👫🏻","👫🏼","👫🏽","👫🏾","👫🏿","👫","👬🏻","👬🏼","👬🏽","👬🏾","👬🏿","👬","👭🏻","👭🏼","👭🏽","👭🏾","👭🏿","👭","👮🏻‍♀️","👮🏻‍♂️","👮🏻","👮🏼‍♀️","👮🏼‍♂️","👮🏼","👮🏽‍♀️","👮🏽‍♂️","👮🏽","👮🏾‍♀️","👮🏾‍♂️","👮🏾","👮🏿‍♀️","👮🏿‍♂️","👮🏿","👮‍♀️","👮‍♂️","👮","👯🏻‍♀️","👯🏻‍♂️","👯🏻","👯🏼‍♀️","👯🏼‍♂️","👯🏼","👯🏽‍♀️","👯🏽‍♂️","👯🏽","👯🏾‍♀️","👯🏾‍♂️","👯🏾","👯🏿‍♀️","👯🏿‍♂️","👯🏿","👯‍♀️","👯‍♂️","👯","👰🏻","👰🏼","👰🏽","👰🏾","👰🏿","👰","👱🏻‍♀️","👱🏻‍♂️","👱🏻","👱🏼‍♀️","👱🏼‍♂️","👱🏼","👱🏽‍♀️","👱🏽‍♂️","👱🏽","👱🏾‍♀️","👱🏾‍♂️","👱🏾","👱🏿‍♀️","👱🏿‍♂️","👱🏿","👱‍♀️","👱‍♂️","👱","👲🏻","👲🏼","👲🏽","👲🏾","👲🏿","👲","👳🏻‍♀️","👳🏻‍♂️","👳🏻","👳🏼‍♀️","👳🏼‍♂️","👳🏼","👳🏽‍♀️","👳🏽‍♂️","👳🏽","👳🏾‍♀️","👳🏾‍♂️","👳🏾","👳🏿‍♀️","👳🏿‍♂️","👳🏿","👳‍♀️","👳‍♂️","👳","👴🏻","👴🏼","👴🏽","👴🏾","👴🏿","👴","👵🏻","👵🏼","👵🏽","👵🏾","👵🏿","👵","👶🏻","👶🏼","👶🏽","👶🏾","👶🏿","👶","👷🏻‍♀️","👷🏻‍♂️","👷🏻","👷🏼‍♀️","👷🏼‍♂️","👷🏼","👷🏽‍♀️","👷🏽‍♂️","👷🏽","👷🏾‍♀️","👷🏾‍♂️","👷🏾","👷🏿‍♀️","👷🏿‍♂️","👷🏿","👷‍♀️","👷‍♂️","👷","👸🏻","👸🏼","👸🏽","👸🏾","👸🏿","👸","👹","👺","👻","👼🏻","👼🏼","👼🏽","👼🏾","👼🏿","👼","👽","👾","👿","💀","💁🏻‍♀️","💁🏻‍♂️","💁🏻","💁🏼‍♀️","💁🏼‍♂️","💁🏼","💁🏽‍♀️","💁🏽‍♂️","💁🏽","💁🏾‍♀️","💁🏾‍♂️","💁🏾","💁🏿‍♀️","💁🏿‍♂️","💁🏿","💁‍♀️","💁‍♂️","💁","💂🏻‍♀️","💂🏻‍♂️","💂🏻","💂🏼‍♀️","💂🏼‍♂️","💂🏼","💂🏽‍♀️","💂🏽‍♂️","💂🏽","💂🏾‍♀️","💂🏾‍♂️","💂🏾","💂🏿‍♀️","💂🏿‍♂️","💂🏿","💂‍♀️","💂‍♂️","💂","💃🏻","💃🏼","💃🏽","💃🏾","💃🏿","💃","💄","💅🏻","💅🏼","💅🏽","💅🏾","💅🏿","💅","💆🏻‍♀️","💆🏻‍♂️","💆🏻","💆🏼‍♀️","💆🏼‍♂️","💆🏼","💆🏽‍♀️","💆🏽‍♂️","💆🏽","💆🏾‍♀️","💆🏾‍♂️","💆🏾","💆🏿‍♀️","💆🏿‍♂️","💆🏿","💆‍♀️","💆‍♂️","💆","💇🏻‍♀️","💇🏻‍♂️","💇🏻","💇🏼‍♀️","💇🏼‍♂️","💇🏼","💇🏽‍♀️","💇🏽‍♂️","💇🏽","💇🏾‍♀️","💇🏾‍♂️","💇🏾","💇🏿‍♀️","💇🏿‍♂️","💇🏿","💇‍♀️","💇‍♂️","💇","💈","💉","💊","💋","💌","💍","💎","💏","💐","💑","💒","💓","💔","💕","💖","💗","💘","💙","💚","💛","💜","💝","💞","💟","💠","💡","💢","💣","💤","💥","💦","💧","💨","💩","💪🏻","💪🏼","💪🏽","💪🏾","💪🏿","💪","💫","💬","💭","💮","💯","💰","💱","💲","💳","💴","💵","💶","💷","💸","💹","💺","💻","💼","💽","💾","💿","📀","📁","📂","📃","📄","📅","📆","📇","📈","📉","📊","📋","📌","📍","📎","📏","📐","📑","📒","📓","📔","📕","📖","📗","📘","📙","📚","📛","📜","📝","📞","📟","📠","📡","📢","📣","📤","📥","📦","📧","📨","📩","📪","📫","📬","📭","📮","📯","📰","📱","📲","📳","📴","📵","📶","📷","📸","📹","📺","📻","📼","📽","📿","🔀","🔁","🔂","🔃","🔄","🔅","🔆","🔇","🔈","🔉","🔊","🔋","🔌","🔍","🔎","🔏","🔐","🔑","🔒","🔓","🔔","🔕","🔖","🔗","🔘","🔙","🔚","🔛","🔜","🔝","🔞","🔟","🔠","🔡","🔢","🔣","🔤","🔥","🔦","🔧","🔨","🔩","🔪","🔫","🔬","🔭","🔮","🔯","🔰","🔱","🔲","🔳","🔴","🔵","🔶","🔷","🔸","🔹","🔺","🔻","🔼","🔽","🕉","🕊","🕋","🕌","🕍","🕎","🕐","🕑","🕒","🕓","🕔","🕕","🕖","🕗","🕘","🕙","🕚","🕛","🕜","🕝","🕞","🕟","🕠","🕡","🕢","🕣","🕤","🕥","🕦","🕧","🕯","🕰","🕳","🕴🏻","🕴🏼","🕴🏽","🕴🏾","🕴🏿","🕴","🕵🏻‍♀️","🕵🏻‍♂️","🕵🏻","🕵🏼‍♀️","🕵🏼‍♂️","🕵🏼","🕵🏽‍♀️","🕵🏽‍♂️","🕵🏽","🕵🏾‍♀️","🕵🏾‍♂️","🕵🏾","🕵🏿‍♀️","🕵🏿‍♂️","🕵🏿","🕵️‍♀️","🕵️‍♂️","🕵","🕶","🕷","🕸","🕹","🕺🏻","🕺🏼","🕺🏽","🕺🏾","🕺🏿","🕺","🖇","🖊","🖋","🖌","🖍","🖐🏻","🖐🏼","🖐🏽","🖐🏾","🖐🏿","🖐","🖕🏻","🖕🏼","🖕🏽","🖕🏾","🖕🏿","🖕","🖖🏻","🖖🏼","🖖🏽","🖖🏾","🖖🏿","🖖","🖤","🖥","🖨","🖱","🖲","🖼","🗂","🗃","🗄","🗑","🗒","🗓","🗜","🗝","🗞","🗡","🗣","🗨","🗯","🗳","🗺","🗻","🗼","🗽","🗾","🗿","😀","😁","😂","😃","😄","😅","😆","😇","😈","😉","😊","😋","😌","😍","😎","😏","😐","😑","😒","😓","😔","😕","😖","😗","😘","😙","😚","😛","😜","😝","😞","😟","😠","😡","😢","😣","😤","😥","😦","😧","😨","😩","😪","😫","😬","😭","😮","😯","😰","😱","😲","😳","😴","😵","😶","😷","😸","😹","😺","😻","😼","😽","😾","😿","🙀","🙁","🙂","🙃","🙄","🙅🏻‍♀️","🙅🏻‍♂️","🙅🏻","🙅🏼‍♀️","🙅🏼‍♂️","🙅🏼","🙅🏽‍♀️","🙅🏽‍♂️","🙅🏽","🙅🏾‍♀️","🙅🏾‍♂️","🙅🏾","🙅🏿‍♀️","🙅🏿‍♂️","🙅🏿","🙅‍♀️","🙅‍♂️","🙅","🙆🏻‍♀️","🙆🏻‍♂️","🙆🏻","🙆🏼‍♀️","🙆🏼‍♂️","🙆🏼","🙆🏽‍♀️","🙆🏽‍♂️","🙆🏽","🙆🏾‍♀️","🙆🏾‍♂️","🙆🏾","🙆🏿‍♀️","🙆🏿‍♂️","🙆🏿","🙆‍♀️","🙆‍♂️","🙆","🙇🏻‍♀️","🙇🏻‍♂️","🙇🏻","🙇🏼‍♀️","🙇🏼‍♂️","🙇🏼","🙇🏽‍♀️","🙇🏽‍♂️","🙇🏽","🙇🏾‍♀️","🙇🏾‍♂️","🙇🏾","🙇🏿‍♀️","🙇🏿‍♂️","🙇🏿","🙇‍♀️","🙇‍♂️","🙇","🙈","🙉","🙊","🙋🏻‍♀️","🙋🏻‍♂️","🙋🏻","🙋🏼‍♀️","🙋🏼‍♂️","🙋🏼","🙋🏽‍♀️","🙋🏽‍♂️","🙋🏽","🙋🏾‍♀️","🙋🏾‍♂️","🙋🏾","🙋🏿‍♀️","🙋🏿‍♂️","🙋🏿","🙋‍♀️","🙋‍♂️","🙋","🙌🏻","🙌🏼","🙌🏽","🙌🏾","🙌🏿","🙌","🙍🏻‍♀️","🙍🏻‍♂️","🙍🏻","🙍🏼‍♀️","🙍🏼‍♂️","🙍🏼","🙍🏽‍♀️","🙍🏽‍♂️","🙍🏽","🙍🏾‍♀️","🙍🏾‍♂️","🙍🏾","🙍🏿‍♀️","🙍🏿‍♂️","🙍🏿","🙍‍♀️","🙍‍♂️","🙍","🙎🏻‍♀️","🙎🏻‍♂️","🙎🏻","🙎🏼‍♀️","🙎🏼‍♂️","🙎🏼","🙎🏽‍♀️","🙎🏽‍♂️","🙎🏽","🙎🏾‍♀️","🙎🏾‍♂️","🙎🏾","🙎🏿‍♀️","🙎🏿‍♂️","🙎🏿","🙎‍♀️","🙎‍♂️","🙎","🙏🏻","🙏🏼","🙏🏽","🙏🏾","🙏🏿","🙏","🚀","🚁","🚂","🚃","🚄","🚅","🚆","🚇","🚈","🚉","🚊","🚋","🚌","🚍","🚎","🚏","🚐","🚑","🚒","🚓","🚔","🚕","🚖","🚗","🚘","🚙","🚚","🚛","🚜","🚝","🚞","🚟","🚠","🚡","🚢","🚣🏻‍♀️","🚣🏻‍♂️","🚣🏻","🚣🏼‍♀️","🚣🏼‍♂️","🚣🏼","🚣🏽‍♀️","🚣🏽‍♂️","🚣🏽","🚣🏾‍♀️","🚣🏾‍♂️","🚣🏾","🚣🏿‍♀️","🚣🏿‍♂️","🚣🏿","🚣‍♀️","🚣‍♂️","🚣","🚤","🚥","🚦","🚧","🚨","🚩","🚪","🚫","🚬","🚭","🚮","🚯","🚰","🚱","🚲","🚳","🚴🏻‍♀️","🚴🏻‍♂️","🚴🏻","🚴🏼‍♀️","🚴🏼‍♂️","🚴🏼","🚴🏽‍♀️","🚴🏽‍♂️","🚴🏽","🚴🏾‍♀️","🚴🏾‍♂️","🚴🏾","🚴🏿‍♀️","🚴🏿‍♂️","🚴🏿","🚴‍♀️","🚴‍♂️","🚴","🚵🏻‍♀️","🚵🏻‍♂️","🚵🏻","🚵🏼‍♀️","🚵🏼‍♂️","🚵🏼","🚵🏽‍♀️","🚵🏽‍♂️","🚵🏽","🚵🏾‍♀️","🚵🏾‍♂️","🚵🏾","🚵🏿‍♀️","🚵🏿‍♂️","🚵🏿","🚵‍♀️","🚵‍♂️","🚵","🚶🏻‍♀️","🚶🏻‍♂️","🚶🏻","🚶🏼‍♀️","🚶🏼‍♂️","🚶🏼","🚶🏽‍♀️","🚶🏽‍♂️","🚶🏽","🚶🏾‍♀️","🚶🏾‍♂️","🚶🏾","🚶🏿‍♀️","🚶🏿‍♂️","🚶🏿","🚶‍♀️","🚶‍♂️","🚶","🚷","🚸","🚹","🚺","🚻","🚼","🚽","🚾","🚿","🛀🏻","🛀🏼","🛀🏽","🛀🏾","🛀🏿","🛀","🛁","🛂","🛃","🛄","🛅","🛋","🛌🏻","🛌🏼","🛌🏽","🛌🏾","🛌🏿","🛌","🛍","🛎","🛏","🛐","🛑","🛒","🛠","🛡","🛢","🛣","🛤","🛥","🛩","🛫","🛬","🛰","🛳","🛴","🛵","🛶","🤐","🤑","🤒","🤓","🤔","🤕","🤖","🤗","🤘🏻","🤘🏼","🤘🏽","🤘🏾","🤘🏿","🤘","🤙🏻","🤙🏼","🤙🏽","🤙🏾","🤙🏿","🤙","🤚🏻","🤚🏼","🤚🏽","🤚🏾","🤚🏿","🤚","🤛🏻","🤛🏼","🤛🏽","🤛🏾","🤛🏿","🤛","🤜🏻","🤜🏼","🤜🏽","🤜🏾","🤜🏿","🤜","🤝🏻","🤝🏼","🤝🏽","🤝🏾","🤝🏿","🤝","🤞🏻","🤞🏼","🤞🏽","🤞🏾","🤞🏿","🤞","🤠","🤡","🤢","🤣","🤤","🤥","🤦🏻‍♀️","🤦🏻‍♂️","🤦🏻","🤦🏼‍♀️","🤦🏼‍♂️","🤦🏼","🤦🏽‍♀️","🤦🏽‍♂️","🤦🏽","🤦🏾‍♀️","🤦🏾‍♂️","🤦🏾","🤦🏿‍♀️","🤦🏿‍♂️","🤦🏿","🤦‍♀️","🤦‍♂️","🤦","🤧","🤰🏻","🤰🏼","🤰🏽","🤰🏾","🤰🏿","🤰","🤳🏻","🤳🏼","🤳🏽","🤳🏾","🤳🏿","🤳","🤴🏻","🤴🏼","🤴🏽","🤴🏾","🤴🏿","🤴","🤵🏻","🤵🏼","🤵🏽","🤵🏾","🤵🏿","🤵","🤶🏻","🤶🏼","🤶🏽","🤶🏾","🤶🏿","🤶","🤷🏻‍♀️","🤷🏻‍♂️","🤷🏻","🤷🏼‍♀️","🤷🏼‍♂️","🤷🏼","🤷🏽‍♀️","🤷🏽‍♂️","🤷🏽","🤷🏾‍♀️","🤷🏾‍♂️","🤷🏾","🤷🏿‍♀️","🤷🏿‍♂️","🤷🏿","🤷‍♀️","🤷‍♂️","🤷","🤸🏻‍♀️","🤸🏻‍♂️","🤸🏻","🤸🏼‍♀️","🤸🏼‍♂️","🤸🏼","🤸🏽‍♀️","🤸🏽‍♂️","🤸🏽","🤸🏾‍♀️","🤸🏾‍♂️","🤸🏾","🤸🏿‍♀️","🤸🏿‍♂️","🤸🏿","🤸‍♀️","🤸‍♂️","🤸","🤹🏻‍♀️","🤹🏻‍♂️","🤹🏻","🤹🏼‍♀️","🤹🏼‍♂️","🤹🏼","🤹🏽‍♀️","🤹🏽‍♂️","🤹🏽","🤹🏾‍♀️","🤹🏾‍♂️","🤹🏾","🤹🏿‍♀️","🤹🏿‍♂️","🤹🏿","🤹‍♀️","🤹‍♂️","🤹","🤺","🤼🏻‍♀️","🤼🏻‍♂️","🤼🏻","🤼🏼‍♀️","🤼🏼‍♂️","🤼🏼","🤼🏽‍♀️","🤼🏽‍♂️","🤼🏽","🤼🏾‍♀️","🤼🏾‍♂️","🤼🏾","🤼🏿‍♀️","🤼🏿‍♂️","🤼🏿","🤼‍♀️","🤼‍♂️","🤼","🤽🏻‍♀️","🤽🏻‍♂️","🤽🏻","🤽🏼‍♀️","🤽🏼‍♂️","🤽🏼","🤽🏽‍♀️","🤽🏽‍♂️","🤽🏽","🤽🏾‍♀️","🤽🏾‍♂️","🤽🏾","🤽🏿‍♀️","🤽🏿‍♂️","🤽🏿","🤽‍♀️","🤽‍♂️","🤽","🤾🏻‍♀️","🤾🏻‍♂️","🤾🏻","🤾🏼‍♀️","🤾🏼‍♂️","🤾🏼","🤾🏽‍♀️","🤾🏽‍♂️","🤾🏽","🤾🏾‍♀️","🤾🏾‍♂️","🤾🏾","🤾🏿‍♀️","🤾🏿‍♂️","🤾🏿","🤾‍♀️","🤾‍♂️","🤾","🥀","🥁","🥂","🥃","🥄","🥅","🥇","🥈","🥉","🥊","🥋","🥐","🥑","🥒","🥓","🥔","🥕","🥖","🥗","🥘","🥙","🥚","🥛","🥜","🥝","🥞","🦀","🦁","🦂","🦃","🦄","🦅","🦆","🦇","🦈","🦉","🦊","🦋","🦌","🦍","🦎","🦏","🦐","🦑","🧀","‼","⁉","™","ℹ","↔","↕","↖","↗","↘","↙","↩","↪","#⃣","⌚","⌛","⌨","⏏","⏩","⏪","⏫","⏬","⏭","⏮","⏯","⏰","⏱","⏲","⏳","⏸","⏹","⏺","Ⓜ","▪","▫","▶","◀","◻","◼","◽","◾","☀","☁","☂","☃","☄","☎","☑","☔","☕","☘","☝🏻","☝🏼","☝🏽","☝🏾","☝🏿","☝","☠","☢","☣","☦","☪","☮","☯","☸","☹","☺","♀","♂","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","♠","♣","♥","♦","♨","♻","♿","⚒","⚓","⚔","⚕","⚖","⚗","⚙","⚛","⚜","⚠","⚡","⚪","⚫","⚰","⚱","⚽","⚾","⛄","⛅","⛈","⛎","⛏","⛑","⛓","⛔","⛩","⛪","⛰","⛱","⛲","⛳","⛴","⛵","⛷🏻","⛷🏼","⛷🏽","⛷🏾","⛷🏿","⛷","⛸","⛹🏻‍♀️","⛹🏻‍♂️","⛹🏻","⛹🏼‍♀️","⛹🏼‍♂️","⛹🏼","⛹🏽‍♀️","⛹🏽‍♂️","⛹🏽","⛹🏾‍♀️","⛹🏾‍♂️","⛹🏾","⛹🏿‍♀️","⛹🏿‍♂️","⛹🏿","⛹️‍♀️","⛹️‍♂️","⛹","⛺","⛽","✂","✅","✈","✉","✊🏻","✊🏼","✊🏽","✊🏾","✊🏿","✊","✋🏻","✋🏼","✋🏽","✋🏾","✋🏿","✋","✌🏻","✌🏼","✌🏽","✌🏾","✌🏿","✌","✍🏻","✍🏼","✍🏽","✍🏾","✍🏿","✍","✏","✒","✔","✖","✝","✡","✨","✳","✴","❄","❇","❌","❎","❓","❔","❕","❗","❣","❤","➕","➖","➗","➡","➰","➿","⤴","⤵","*⃣","⬅","⬆","⬇","⬛","⬜","⭐","⭕","0⃣","〰","〽","1⃣","2⃣","㊗","㊙","3⃣","4⃣","5⃣","6⃣","7⃣","8⃣","9⃣","©","®",""]},function(e,t,a){"use strict";const r=a(1032),n=a(410);e.exports=r.default,e.exports.ValidationError=n.default,e.exports.ValidateError=n.default},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(a(1033)),n=o(a(1067)),i=o(a(1090)),s=o(a(410));function o(e){return e&&e.__esModule?e:{default:e}}const c=new r.default({allErrors:!0,verbose:!0,$data:!0});function l(e,t){const a=c.compile(e);return a(t)?[]:function(e){let t=[];for(const a of e){const{dataPath:e}=a;let r=[];t=t.filter(t=>!t.dataPath.includes(e)||(t.children&&(r=r.concat(t.children.slice(0))),t.children=void 0,r.push(t),!1)),r.length&&(a.children=r),t.push(a)}return t}(a.errors)}(0,n.default)(c,["instanceof","formatMinimum","formatMaximum","patternRequired"]),(0,i.default)(c);var u=function(e,t,a={}){let r=[];if(Array.isArray(t)?(r=Array.from(t).map(t=>l(e,t)),r.forEach((e,t)=>{const a=e=>{e.dataPath=`[${t}]${e.dataPath}`,e.children&&e.children.forEach(a)};e.forEach(a)}),r=r.reduce((e,t)=>e.concat(t),[])):r=l(e,t),r.length>0)throw new s.default(r,e,a);return r};t.default=u},function(e,t,a){"use strict";var r=a(1034),n=a(182),i=a(1038),s=a(401),o=a(402),c=a(1039),l=a(1040),u=a(1061),d=a(79);e.exports=b,b.prototype.validate=function(e,t){var a;if("string"==typeof e){if(!(a=this.getSchema(e)))throw new Error('no schema with key or ref "'+e+'"')}else{var r=this._addSchema(e);a=r.validate||this._compile(r)}var n=a(t);!0!==a.$async&&(this.errors=a.errors);return n},b.prototype.compile=function(e,t){var a=this._addSchema(e,void 0,t);return a.validate||this._compile(a)},b.prototype.addSchema=function(e,t,a,r){if(Array.isArray(e)){for(var i=0;i<e.length;i++)this.addSchema(e[i],void 0,a,r);return this}var s=this._getId(e);if(void 0!==s&&"string"!=typeof s)throw new Error("schema id must be string");return k(this,t=n.normalizeId(t||s)),this._schemas[t]=this._addSchema(e,a,r,!0),this},b.prototype.addMetaSchema=function(e,t,a){return this.addSchema(e,t,a,!0),this},b.prototype.validateSchema=function(e,t){var a=e.$schema;if(void 0!==a&&"string"!=typeof a)throw new Error("$schema must be a string");if(!(a=a||this._opts.defaultMeta||function(e){var t=e._opts.meta;return e._opts.defaultMeta="object"==typeof t?e._getId(t)||t:e.getSchema(f)?f:void 0,e._opts.defaultMeta}(this)))return this.logger.warn("meta-schema not available"),this.errors=null,!0;var r=this.validate(a,e);if(!r&&t){var n="schema is invalid: "+this.errorsText();if("log"!=this._opts.validateSchema)throw new Error(n);this.logger.error(n)}return r},b.prototype.getSchema=function(e){var t=y(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return function(e,t){var a=n.schema.call(e,{schema:{}},t);if(a){var i=a.schema,o=a.root,c=a.baseId,l=r.call(e,i,o,void 0,c);return e._fragments[t]=new s({ref:t,fragment:!0,schema:i,root:o,baseId:c,validate:l}),l}}(this,e)}},b.prototype.removeSchema=function(e){if(e instanceof RegExp)return v(this,this._schemas,e),v(this,this._refs,e),this;switch(typeof e){case"undefined":return v(this,this._schemas),v(this,this._refs),this._cache.clear(),this;case"string":var t=y(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var a=this._opts.serialize,r=a?a(e):e;this._cache.del(r);var i=this._getId(e);i&&(i=n.normalizeId(i),delete this._schemas[i],delete this._refs[i])}return this},b.prototype.addFormat=function(e,t){"string"==typeof t&&(t=new RegExp(t));return this._formats[e]=t,this},b.prototype.errorsText=function(e,t){if(!(e=e||this.errors))return"No errors";for(var a=void 0===(t=t||{}).separator?", ":t.separator,r=void 0===t.dataVar?"data":t.dataVar,n="",i=0;i<e.length;i++){var s=e[i];s&&(n+=r+s.dataPath+" "+s.message+a)}return n.slice(0,-a.length)},b.prototype._addSchema=function(e,t,a,r){if("object"!=typeof e&&"boolean"!=typeof e)throw new Error("schema should be object or boolean");var i=this._opts.serialize,o=i?i(e):e,c=this._cache.get(o);if(c)return c;r=r||!1!==this._opts.addUsedSchema;var l=n.normalizeId(this._getId(e));l&&r&&k(this,l);var u,d=!1!==this._opts.validateSchema&&!t;d&&!(u=l&&l==n.normalizeId(e.$schema))&&this.validateSchema(e,!0);var p=n.ids.call(this,e),h=new s({id:l,schema:e,localRefs:p,cacheKey:o,meta:a});"#"!=l[0]&&r&&(this._refs[l]=h);this._cache.put(o,h),d&&u&&this.validateSchema(e,!0);return h},b.prototype._compile=function(e,t){if(e.compiling)return e.validate=i,i.schema=e.schema,i.errors=null,i.root=t||i,!0===e.schema.$async&&(i.$async=!0),i;var a,n;e.compiling=!0,e.meta&&(a=this._opts,this._opts=this._metaOpts);try{n=r.call(this,e.schema,t,e.localRefs)}catch(t){throw delete e.validate,t}finally{e.compiling=!1,e.meta&&(this._opts=a)}return e.validate=n,e.refs=n.refs,e.refVal=n.refVal,e.root=n.root,n;function i(){var t=e.validate,a=t.apply(this,arguments);return i.errors=t.errors,a}},b.prototype.compileAsync=a(1062);var p=a(1063);b.prototype.addKeyword=p.add,b.prototype.getKeyword=p.get,b.prototype.removeKeyword=p.remove,b.prototype.validateKeyword=p.validate;var h=a(184);b.ValidationError=h.Validation,b.MissingRefError=h.MissingRef,b.$dataMetaSchema=u;var f="http://json-schema.org/draft-07/schema",m=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],g=["/properties"];function b(e){if(!(this instanceof b))return new b(e);e=this._opts=d.copy(e)||{},function(e){var t=e._opts.logger;if(!1===t)e.logger={log:S,warn:S,error:S};else{if(void 0===t&&(t=console),!("object"==typeof t&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}(this),this._schemas={},this._refs={},this._fragments={},this._formats=c(e.format),this._cache=e.cache||new i,this._loadingSchemas={},this._compilations=[],this.RULES=l(),this._getId=function(e){switch(e.schemaId){case"auto":return x;case"id":return _;default:return w}}(e),e.loopRequired=e.loopRequired||1/0,"property"==e.errorDataPath&&(e._errorDataPathProperty=!0),void 0===e.serialize&&(e.serialize=o),this._metaOpts=function(e){for(var t=d.copy(e._opts),a=0;a<m.length;a++)delete t[m[a]];return t}(this),e.formats&&function(e){for(var t in e._opts.formats){var a=e._opts.formats[t];e.addFormat(t,a)}}(this),function(e){var t;e._opts.$data&&(t=a(1066),e.addMetaSchema(t,t.$id,!0));if(!1===e._opts.meta)return;var r=a(408);e._opts.$data&&(r=u(r,g));e.addMetaSchema(r,f,!0),e._refs["http://json-schema.org/schema"]=f}(this),"object"==typeof e.meta&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),function(e){var t=e._opts.schemas;if(!t)return;if(Array.isArray(t))e.addSchema(t);else for(var a in t)e.addSchema(t[a],a)}(this)}function y(e,t){return t=n.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function v(e,t,a){for(var r in t){var n=t[r];n.meta||a&&!a.test(r)||(e._cache.del(n.cacheKey),delete t[r])}}function _(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function w(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function x(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function k(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function S(){}},function(e,t,a){"use strict";var r=a(182),n=a(79),i=a(184),s=a(402),o=a(403),c=n.ucs2length,l=a(183),u=i.Validation;function d(e,t,a){var r=h.call(this,e,t,a);return r>=0?{index:r,compiling:!0}:(r=this._compilations.length,this._compilations[r]={schema:e,root:t,baseId:a},{index:r,compiling:!1})}function p(e,t,a){var r=h.call(this,e,t,a);r>=0&&this._compilations.splice(r,1)}function h(e,t,a){for(var r=0;r<this._compilations.length;r++){var n=this._compilations[r];if(n.schema==e&&n.root==t&&n.baseId==a)return r}return-1}function f(e,t){return"var pattern"+e+" = new RegExp("+n.toQuotedString(t[e])+");"}function m(e){return"var default"+e+" = defaults["+e+"];"}function g(e,t){return void 0===t[e]?"":"var refVal"+e+" = refVal["+e+"];"}function b(e){return"var customRule"+e+" = customRules["+e+"];"}function y(e,t){if(!e.length)return"";for(var a="",r=0;r<e.length;r++)a+=t(r,e);return a}e.exports=function e(t,a,h,v){var _=this,w=this._opts,x=[void 0],k={},S=[],P={},E=[],C={},A=[];a=a||{schema:t,refVal:x,refs:k};var M=d.call(this,t,a,v),T=this._compilations[M.index];if(M.compiling)return T.callValidate=function e(){var t=T.validate,a=t.apply(this,arguments);return e.errors=t.errors,a};var j=this._formats,O=this.RULES;try{var D=R(t,a,h,v);T.validate=D;var I=T.callValidate;return I&&(I.schema=D.schema,I.errors=null,I.refs=D.refs,I.refVal=D.refVal,I.root=D.root,I.$async=D.$async,w.sourceCode&&(I.source=D.source)),D}finally{p.call(this,t,a,v)}function R(t,s,d,p){var h=!s||s&&s.schema==t;if(s.schema!=a.schema)return e.call(_,t,s,d,p);var v,P=!0===t.$async,C=o({isTop:!0,schema:t,isRoot:h,baseId:p,root:s,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:i.MissingRef,RULES:O,validate:o,util:n,resolve:r,resolveRef:B,usePattern:N,useDefault:F,useCustomRule:U,opts:w,formats:j,logger:_.logger,self:_});C=y(x,g)+y(S,f)+y(E,m)+y(A,b)+C,w.processCode&&(C=w.processCode(C));try{v=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",C)(_,O,j,a,x,E,A,l,c,u),x[0]=v}catch(e){throw _.logger.error("Error compiling schema, function code:",C),e}return v.schema=t,v.errors=null,v.refs=k,v.refVal=x,v.root=h?v:s,P&&(v.$async=!0),!0===w.sourceCode&&(v.source={code:C,patterns:S,defaults:E}),v}function B(t,n,i){n=r.url(t,n);var s,o,c=k[n];if(void 0!==c)return L(s=x[c],o="refVal["+c+"]");if(!i&&a.refs){var l=a.refs[n];if(void 0!==l)return L(s=a.refVal[l],o=q(n,s))}o=q(n);var u=r.call(_,R,a,n);if(void 0===u){var d=h&&h[n];d&&(u=r.inlineRef(d,w.inlineRefs)?d:e.call(_,d,a,h,t))}if(void 0!==u)return function(e,t){var a=k[e];x[a]=t}(n,u),L(u,o);!function(e){delete k[e]}(n)}function q(e,t){var a=x.length;return x[a]=t,k[e]=a,"refVal"+a}function L(e,t){return"object"==typeof e||"boolean"==typeof e?{code:t,schema:e,inline:!0}:{code:t,$async:e&&!!e.$async}}function N(e){var t=P[e];return void 0===t&&(t=P[e]=S.length,S[t]=e),"pattern"+t}function F(e){switch(typeof e){case"boolean":case"number":return""+e;case"string":return n.toQuotedString(e);case"object":if(null===e)return"null";var t=s(e),a=C[t];return void 0===a&&(a=C[t]=E.length,E[a]=e),"default"+a}}function U(e,t,a,r){if(!1!==_._opts.validateSchema){var n=e.definition.dependencies;if(n&&!n.every((function(e){return Object.prototype.hasOwnProperty.call(a,e)})))throw new Error("parent schema must have all required keywords: "+n.join(","));var i=e.definition.validateSchema;if(i)if(!i(t)){var s="keyword schema is invalid: "+_.errorsText(i.errors);if("log"!=_._opts.validateSchema)throw new Error(s);_.logger.error(s)}}var o,c=e.definition.compile,l=e.definition.inline,u=e.definition.macro;if(c)o=c.call(_,t,a,r);else if(u)o=u.call(_,t,a,r),!1!==w.validateSchema&&_.validateSchema(o,!0);else if(l)o=l.call(_,r,e.keyword,t,a);else if(!(o=e.definition.validate))return;if(void 0===o)throw new Error('custom keyword "'+e.keyword+'"failed to compile');var d=A.length;return A[d]=o,{code:"customRule"+d,validate:o}}}},function(e,t,a){
/** @license URI.js v4.2.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];if(t.length>1){t[0]=t[0].slice(0,-1);for(var r=t.length-1,n=1;n<r;++n)t[n]=t[n].slice(1,-1);return t[r]=t[r].slice(1),t.join("")}return t[0]}function a(e){return"(?:"+e+")"}function r(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function n(e){return e.toUpperCase()}function i(e){var r=t("[0-9]","[A-Fa-f]"),n=a(a("%[EFef]"+r+"%"+r+r+"%"+r+r)+"|"+a("%[89A-Fa-f]"+r+"%"+r+r)+"|"+a("%"+r+r)),i="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",s=t("[\\:\\/\\?\\#\\[\\]\\@]",i),o=e?"[\\uE000-\\uF8FF]":"[]",c=t("[A-Za-z]","[0-9]","[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),l=a("[A-Za-z]"+t("[A-Za-z]","[0-9]","[\\+\\-\\.]")+"*"),u=a(a(n+"|"+t(c,i,"[\\:]"))+"*"),d=(a(a("25[0-5]")+"|"+a("2[0-4][0-9]")+"|"+a("1[0-9][0-9]")+"|"+a("[1-9][0-9]")+"|[0-9]"),a(a("25[0-5]")+"|"+a("2[0-4][0-9]")+"|"+a("1[0-9][0-9]")+"|"+a("0?[1-9][0-9]")+"|0?0?[0-9]")),p=a(d+"\\."+d+"\\."+d+"\\."+d),h=a(r+"{1,4}"),f=a(a(h+"\\:"+h)+"|"+p),m=a(a(h+"\\:")+"{6}"+f),g=a("\\:\\:"+a(h+"\\:")+"{5}"+f),b=a(a(h)+"?\\:\\:"+a(h+"\\:")+"{4}"+f),y=a(a(a(h+"\\:")+"{0,1}"+h)+"?\\:\\:"+a(h+"\\:")+"{3}"+f),v=a(a(a(h+"\\:")+"{0,2}"+h)+"?\\:\\:"+a(h+"\\:")+"{2}"+f),_=a(a(a(h+"\\:")+"{0,3}"+h)+"?\\:\\:"+h+"\\:"+f),w=a(a(a(h+"\\:")+"{0,4}"+h)+"?\\:\\:"+f),x=a(a(a(h+"\\:")+"{0,5}"+h)+"?\\:\\:"+h),k=a(a(a(h+"\\:")+"{0,6}"+h)+"?\\:\\:"),S=a([m,g,b,y,v,_,w,x,k].join("|")),P=a(a(c+"|"+n)+"+"),E=(a(S+"\\%25"+P),a(S+a("\\%25|\\%(?!"+r+"{2})")+P)),C=a("[vV]"+r+"+\\."+t(c,i,"[\\:]")+"+"),A=a("\\["+a(E+"|"+S+"|"+C)+"\\]"),M=a(a(n+"|"+t(c,i))+"*"),T=a(A+"|"+p+"(?!"+M+")|"+M),j=a("[0-9]*"),O=a(a(u+"@")+"?"+T+a("\\:"+j)+"?"),D=a(n+"|"+t(c,i,"[\\:\\@]")),I=a(D+"*"),R=a(D+"+"),B=a(a(n+"|"+t(c,i,"[\\@]"))+"+"),q=a(a("\\/"+I)+"*"),L=a("\\/"+a(R+q)+"?"),N=a(B+q),F=a(R+q),U="(?!"+D+")",$=(a(q+"|"+L+"|"+N+"|"+F+"|"+U),a(a(D+"|"+t("[\\/\\?]",o))+"*")),z=a(a(D+"|[\\/\\?]")+"*"),H=a(a("\\/\\/"+O+q)+"|"+L+"|"+F+"|"+U),G=a(l+"\\:"+H+a("\\?"+$)+"?"+a("\\#"+z)+"?"),K=a(a("\\/\\/"+O+q)+"|"+L+"|"+N+"|"+U),W=a(K+a("\\?"+$)+"?"+a("\\#"+z)+"?");return a(G+"|"+W),a(l+"\\:"+H+a("\\?"+$)+"?"),a(a("\\/\\/("+a("("+u+")@")+"?("+T+")"+a("\\:("+j+")")+"?)")+"?("+q+"|"+L+"|"+F+"|"+U+")"),a("\\?("+$+")"),a("\\#("+z+")"),a(a("\\/\\/("+a("("+u+")@")+"?("+T+")"+a("\\:("+j+")")+"?)")+"?("+q+"|"+L+"|"+N+"|"+U+")"),a("\\?("+$+")"),a("\\#("+z+")"),a(a("\\/\\/("+a("("+u+")@")+"?("+T+")"+a("\\:("+j+")")+"?)")+"?("+q+"|"+L+"|"+F+"|"+U+")"),a("\\?("+$+")"),a("\\#("+z+")"),a("("+u+")@"),a("\\:("+j+")"),{NOT_SCHEME:new RegExp(t("[^]","[A-Za-z]","[0-9]","[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",c,i),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",c,i),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",c,i),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",c,i),"g"),NOT_QUERY:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]",o),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",c,i,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",c,i),"g"),UNRESERVED:new RegExp(c,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",c,s),"g"),PCT_ENCODED:new RegExp(n,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+S+")"+a(a("\\%25|\\%(?!"+r+"{2})")+"("+P+")")+"?\\]?$")}}var s=i(!1),o=i(!0),c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var a=[],r=!0,n=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(a.push(s.value),!t||a.length!==t);r=!0);}catch(e){n=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw i}}return a}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=2147483647,u=/^xn--/,d=/[^\0-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(h[e])}function b(e,t){var a=e.split("@"),r="";a.length>1&&(r=a[0]+"@",e=a[1]);var n=function(e,t){for(var a=[],r=e.length;r--;)a[r]=t(e[r]);return a}((e=e.replace(p,".")).split("."),t).join(".");return r+n}function y(e){for(var t=[],a=0,r=e.length;a<r;){var n=e.charCodeAt(a++);if(n>=55296&&n<=56319&&a<r){var i=e.charCodeAt(a++);56320==(64512&i)?t.push(((1023&n)<<10)+(1023&i)+65536):(t.push(n),a--)}else t.push(n)}return t}var v=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},_=function(e,t,a){var r=0;for(e=a?f(e/700):e>>1,e+=f(e/t);e>455;r+=36)e=f(e/35);return f(r+36*e/(e+38))},w=function(e){var t,a=[],r=e.length,n=0,i=128,s=72,o=e.lastIndexOf("-");o<0&&(o=0);for(var c=0;c<o;++c)e.charCodeAt(c)>=128&&g("not-basic"),a.push(e.charCodeAt(c));for(var u=o>0?o+1:0;u<r;){for(var d=n,p=1,h=36;;h+=36){u>=r&&g("invalid-input");var m=(t=e.charCodeAt(u++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:36;(m>=36||m>f((l-n)/p))&&g("overflow"),n+=m*p;var b=h<=s?1:h>=s+26?26:h-s;if(m<b)break;var y=36-b;p>f(l/y)&&g("overflow"),p*=y}var v=a.length+1;s=_(n-d,v,0==d),f(n/v)>l-i&&g("overflow"),i+=f(n/v),n%=v,a.splice(n++,0,i)}return String.fromCodePoint.apply(String,a)},x=function(e){var t=[],a=(e=y(e)).length,r=128,n=0,i=72,s=!0,o=!1,c=void 0;try{for(var u,d=e[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var p=u.value;p<128&&t.push(m(p))}}catch(e){o=!0,c=e}finally{try{!s&&d.return&&d.return()}finally{if(o)throw c}}var h=t.length,b=h;for(h&&t.push("-");b<a;){var w=l,x=!0,k=!1,S=void 0;try{for(var P,E=e[Symbol.iterator]();!(x=(P=E.next()).done);x=!0){var C=P.value;C>=r&&C<w&&(w=C)}}catch(e){k=!0,S=e}finally{try{!x&&E.return&&E.return()}finally{if(k)throw S}}var A=b+1;w-r>f((l-n)/A)&&g("overflow"),n+=(w-r)*A,r=w;var M=!0,T=!1,j=void 0;try{for(var O,D=e[Symbol.iterator]();!(M=(O=D.next()).done);M=!0){var I=O.value;if(I<r&&++n>l&&g("overflow"),I==r){for(var R=n,B=36;;B+=36){var q=B<=i?1:B>=i+26?26:B-i;if(R<q)break;var L=R-q,N=36-q;t.push(m(v(q+L%N,0))),R=f(L/N)}t.push(m(v(R,0))),i=_(n,A,b==h),n=0,++b}}}catch(e){T=!0,j=e}finally{try{!M&&D.return&&D.return()}finally{if(T)throw j}}++n,++r}return t.join("")},k=function(e){return b(e,(function(e){return d.test(e)?"xn--"+x(e):e}))},S=function(e){return b(e,(function(e){return u.test(e)?w(e.slice(4).toLowerCase()):e}))},P={};function E(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function C(e){for(var t="",a=0,r=e.length;a<r;){var n=parseInt(e.substr(a+1,2),16);if(n<128)t+=String.fromCharCode(n),a+=3;else if(n>=194&&n<224){if(r-a>=6){var i=parseInt(e.substr(a+4,2),16);t+=String.fromCharCode((31&n)<<6|63&i)}else t+=e.substr(a,6);a+=6}else if(n>=224){if(r-a>=9){var s=parseInt(e.substr(a+4,2),16),o=parseInt(e.substr(a+7,2),16);t+=String.fromCharCode((15&n)<<12|(63&s)<<6|63&o)}else t+=e.substr(a,9);a+=9}else t+=e.substr(a,3),a+=3}return t}function A(e,t){function a(e){var a=C(e);return a.match(t.UNRESERVED)?a:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,a).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,a).replace(t.NOT_USERINFO,E).replace(t.PCT_ENCODED,n)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,a).toLowerCase().replace(t.NOT_HOST,E).replace(t.PCT_ENCODED,n)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,a).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,E).replace(t.PCT_ENCODED,n)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,a).replace(t.NOT_QUERY,E).replace(t.PCT_ENCODED,n)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,a).replace(t.NOT_FRAGMENT,E).replace(t.PCT_ENCODED,n)),e}function M(e){return e.replace(/^0*(.*)/,"$1")||"0"}function T(e,t){var a=e.match(t.IPV4ADDRESS)||[],r=c(a,2)[1];return r?r.split(".").map(M).join("."):e}function j(e,t){var a=e.match(t.IPV6ADDRESS)||[],r=c(a,3),n=r[1],i=r[2];if(n){for(var s=n.toLowerCase().split("::").reverse(),o=c(s,2),l=o[0],u=o[1],d=u?u.split(":").map(M):[],p=l.split(":").map(M),h=t.IPV4ADDRESS.test(p[p.length-1]),f=h?7:8,m=p.length-f,g=Array(f),b=0;b<f;++b)g[b]=d[b]||p[m+b]||"";h&&(g[f-1]=T(g[f-1],t));var y=g.reduce((function(e,t,a){if(!t||"0"===t){var r=e[e.length-1];r&&r.index+r.length===a?r.length++:e.push({index:a,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],v=void 0;if(y&&y.length>1){var _=g.slice(0,y.index),w=g.slice(y.index+y.length);v=_.join(":")+"::"+w.join(":")}else v=g.join(":");return i&&(v+="%"+i),v}return e}var O=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,D=void 0==="".match(/(){0}/)[1];function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={},r=!1!==t.iri?o:s;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var n=e.match(O);if(n){D?(a.scheme=n[1],a.userinfo=n[3],a.host=n[4],a.port=parseInt(n[5],10),a.path=n[6]||"",a.query=n[7],a.fragment=n[8],isNaN(a.port)&&(a.port=n[5])):(a.scheme=n[1]||void 0,a.userinfo=-1!==e.indexOf("@")?n[3]:void 0,a.host=-1!==e.indexOf("//")?n[4]:void 0,a.port=parseInt(n[5],10),a.path=n[6]||"",a.query=-1!==e.indexOf("?")?n[7]:void 0,a.fragment=-1!==e.indexOf("#")?n[8]:void 0,isNaN(a.port)&&(a.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),a.host&&(a.host=j(T(a.host,r),r)),void 0!==a.scheme||void 0!==a.userinfo||void 0!==a.host||void 0!==a.port||a.path||void 0!==a.query?void 0===a.scheme?a.reference="relative":void 0===a.fragment?a.reference="absolute":a.reference="uri":a.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==a.reference&&(a.error=a.error||"URI is not a "+t.reference+" reference.");var i=P[(t.scheme||a.scheme||"").toLowerCase()];if(t.unicodeSupport||i&&i.unicodeSupport)A(a,r);else{if(a.host&&(t.domainHost||i&&i.domainHost))try{a.host=k(a.host.replace(r.PCT_ENCODED,C).toLowerCase())}catch(e){a.error=a.error||"Host's domain name can not be converted to ASCII via punycode: "+e}A(a,s)}i&&i.parse&&i.parse(a,t)}else a.error=a.error||"URI can not be parsed.";return a}function R(e,t){var a=!1!==t.iri?o:s,r=[];return void 0!==e.userinfo&&(r.push(e.userinfo),r.push("@")),void 0!==e.host&&r.push(j(T(String(e.host),a),a).replace(a.IPV6ADDRESS,(function(e,t,a){return"["+t+(a?"%25"+a:"")+"]"}))),"number"==typeof e.port&&(r.push(":"),r.push(e.port.toString(10))),r.length?r.join(""):void 0}var B=/^\.\.?\//,q=/^\/\.(\/|$)/,L=/^\/\.\.(\/|$)/,N=/^\/?(?:.|\n)*?(?=\/|$)/;function F(e){for(var t=[];e.length;)if(e.match(B))e=e.replace(B,"");else if(e.match(q))e=e.replace(q,"/");else if(e.match(L))e=e.replace(L,"/"),t.pop();else if("."===e||".."===e)e="";else{var a=e.match(N);if(!a)throw new Error("Unexpected dot segment condition");var r=a[0];e=e.slice(r.length),t.push(r)}return t.join("")}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.iri?o:s,r=[],n=P[(t.scheme||e.scheme||"").toLowerCase()];if(n&&n.serialize&&n.serialize(e,t),e.host)if(a.IPV6ADDRESS.test(e.host));else if(t.domainHost||n&&n.domainHost)try{e.host=t.iri?S(e.host):k(e.host.replace(a.PCT_ENCODED,C).toLowerCase())}catch(a){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+a}A(e,a),"suffix"!==t.reference&&e.scheme&&(r.push(e.scheme),r.push(":"));var i=R(e,t);if(void 0!==i&&("suffix"!==t.reference&&r.push("//"),r.push(i),e.path&&"/"!==e.path.charAt(0)&&r.push("/")),void 0!==e.path){var c=e.path;t.absolutePath||n&&n.absolutePath||(c=F(c)),void 0===i&&(c=c.replace(/^\/\//,"/%2F")),r.push(c)}return void 0!==e.query&&(r.push("?"),r.push(e.query)),void 0!==e.fragment&&(r.push("#"),r.push(e.fragment)),r.join("")}function $(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],n={};return r||(e=I(U(e,a),a),t=I(U(t,a),a)),!(a=a||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=F(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=F(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=F(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=F(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function z(e,t){return e&&e.toString().replace(t&&t.iri?o.PCT_ENCODED:s.PCT_ENCODED,C)}var H={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){return e.port!==("https"!==String(e.scheme).toLowerCase()?80:443)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},G={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize},K={},W="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",V="[0-9A-Fa-f]",Y=a(a("%[EFef]"+V+"%"+V+V+"%"+V+V)+"|"+a("%[89A-Fa-f]"+V+"%"+V+V)+"|"+a("%"+V+V)),J=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),X=new RegExp(W,"g"),Q=new RegExp(Y,"g"),Z=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',J),"g"),ee=new RegExp(t("[^]",W,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),te=ee;function ae(e){var t=C(e);return t.match(X)?t:e}var re={scheme:"mailto",parse:function(e,t){var a=e,r=a.to=a.path?a.path.split(","):[];if(a.path=void 0,a.query){for(var n=!1,i={},s=a.query.split("&"),o=0,c=s.length;o<c;++o){var l=s[o].split("=");switch(l[0]){case"to":for(var u=l[1].split(","),d=0,p=u.length;d<p;++d)r.push(u[d]);break;case"subject":a.subject=z(l[1],t);break;case"body":a.body=z(l[1],t);break;default:n=!0,i[z(l[0],t)]=z(l[1],t)}}n&&(a.headers=i)}a.query=void 0;for(var h=0,f=r.length;h<f;++h){var m=r[h].split("@");if(m[0]=z(m[0]),t.unicodeSupport)m[1]=z(m[1],t).toLowerCase();else try{m[1]=k(z(m[1],t).toLowerCase())}catch(e){a.error=a.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}r[h]=m.join("@")}return a},serialize:function(e,t){var a,r=e,i=null!=(a=e.to)?a instanceof Array?a:"number"!=typeof a.length||a.split||a.setInterval||a.call?[a]:Array.prototype.slice.call(a):[];if(i){for(var s=0,o=i.length;s<o;++s){var c=String(i[s]),l=c.lastIndexOf("@"),u=c.slice(0,l).replace(Q,ae).replace(Q,n).replace(Z,E),d=c.slice(l+1);try{d=t.iri?S(d):k(z(d,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}i[s]=u+"@"+d}r.path=i.join(",")}var p=e.headers=e.headers||{};e.subject&&(p.subject=e.subject),e.body&&(p.body=e.body);var h=[];for(var f in p)p[f]!==K[f]&&h.push(f.replace(Q,ae).replace(Q,n).replace(ee,E)+"="+p[f].replace(Q,ae).replace(Q,n).replace(te,E));return h.length&&(r.query=h.join("&")),r}},ne=/^([^\:]+)\:(.*)/,ie={scheme:"urn",parse:function(e,t){var a=e.path&&e.path.match(ne),r=e;if(a){var n=t.scheme||r.scheme||"urn",i=a[1].toLowerCase(),s=a[2],o=n+":"+(t.nid||i),c=P[o];r.nid=i,r.nss=s,r.path=void 0,c&&(r=c.parse(r,t))}else r.error=r.error||"URN can not be parsed.";return r},serialize:function(e,t){var a=t.scheme||e.scheme||"urn",r=e.nid,n=a+":"+(t.nid||r),i=P[n];i&&(e=i.serialize(e,t));var s=e,o=e.nss;return s.path=(r||t.nid)+":"+o,s}},se=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,oe={scheme:"urn:uuid",parse:function(e,t){var a=e;return a.uuid=a.nss,a.nss=void 0,t.tolerant||a.uuid&&a.uuid.match(se)||(a.error=a.error||"UUID is not valid."),a},serialize:function(e,t){var a=e;return a.nss=(e.uuid||"").toLowerCase(),a}};P[H.scheme]=H,P[G.scheme]=G,P[re.scheme]=re,P[ie.scheme]=ie,P[oe.scheme]=oe,e.SCHEMES=P,e.pctEncChar=E,e.pctDecChars=C,e.parse=I,e.removeDotSegments=F,e.serialize=U,e.resolveComponents=$,e.resolve=function(e,t,a){var r=function(e,t){var a=e;if(t)for(var r in t)a[r]=t[r];return a}({scheme:"null"},a);return U($(I(e,r),I(t,r),r,!0),r)},e.normalize=function(e,t){return"string"==typeof e?e=U(I(e,t),t):"object"===r(e)&&(e=I(U(e,t),t)),e},e.equal=function(e,t,a){return"string"==typeof e?e=U(I(e,a),a):"object"===r(e)&&(e=U(e,a)),"string"==typeof t?t=U(I(t,a),a):"object"===r(t)&&(t=U(t,a)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?o.ESCAPE:s.ESCAPE,E)},e.unescapeComponent=z,Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,a){"use strict";e.exports=function(e){for(var t,a=0,r=e.length,n=0;n<r;)a++,(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<r&&56320==(64512&(t=e.charCodeAt(n)))&&n++;return a}},function(e,t,a){"use strict";var r=e.exports=function(e,t,a){"function"==typeof t&&(a=t,t={}),function e(t,a,n,i,s,o,c,l,u,d){if(i&&"object"==typeof i&&!Array.isArray(i)){for(var p in a(i,s,o,c,l,u,d),i){var h=i[p];if(Array.isArray(h)){if(p in r.arrayKeywords)for(var f=0;f<h.length;f++)e(t,a,n,h[f],s+"/"+p+"/"+f,o,s,p,i,f)}else if(p in r.propsKeywords){if(h&&"object"==typeof h)for(var m in h)e(t,a,n,h[m],s+"/"+p+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),o,s,p,i,m)}else(p in r.keywords||t.allKeys&&!(p in r.skipKeywords))&&e(t,a,n,h,s+"/"+p,o,s,p,i)}n(i,s,o,c,l,u,d)}}(t,"function"==typeof(a=t.cb||a)?a:a.pre||function(){},a.post||function(){},e,"",e)};r.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},r.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},r.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},r.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},function(e,t,a){"use strict";var r=e.exports=function(){this._cache={}};r.prototype.put=function(e,t){this._cache[e]=t},r.prototype.get=function(e){return this._cache[e]},r.prototype.del=function(e){delete this._cache[e]},r.prototype.clear=function(){this._cache={}}},function(e,t,a){"use strict";var r=a(79),n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31],s=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d:\d\d)?$/i,o=/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,c=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,l=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,u=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,d=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,p=/^(?:\/(?:[^~/]|~0|~1)*)*$/,h=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,f=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/;function m(e){return e="full"==e?"full":"fast",r.copy(m[e])}function g(e){var t=e.match(n);if(!t)return!1;var a=+t[1],r=+t[2],s=+t[3];return r>=1&&r<=12&&s>=1&&s<=(2==r&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(a)?29:i[r])}function b(e,t){var a=e.match(s);if(!a)return!1;var r=a[1],n=a[2],i=a[3],o=a[5];return(r<=23&&n<=59&&i<=59||23==r&&59==n&&60==i)&&(!t||o)}e.exports=m,m.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d:\d\d)$/i,uri:/^(?:[a-z][a-z0-9+-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:o,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:d,"json-pointer":p,"json-pointer-uri-fragment":h,"relative-json-pointer":f},m.full={date:g,time:b,"date-time":function(e){var t=e.split(y);return 2==t.length&&g(t[0])&&b(t[1],!0)},uri:function(e){return v.test(e)&&c.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":l,url:u,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:function(e){return e.length<=255&&o.test(e)},ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:w,uuid:d,"json-pointer":p,"json-pointer-uri-fragment":h,"relative-json-pointer":f};var y=/t|\s/i;var v=/\/|:/;var _=/[^\\]\\Z/;function w(e){if(_.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}}},function(e,t,a){"use strict";var r=a(1041),n=a(79).toHash;e.exports=function(){var e=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],t=["type","$comment"];return e.all=n(t),e.types=n(["number","integer","string","array","object","boolean","null"]),e.forEach((function(a){a.rules=a.rules.map((function(a){var n;if("object"==typeof a){var i=Object.keys(a)[0];n=a[i],a=i,n.forEach((function(a){t.push(a),e.all[a]=!0}))}return t.push(a),e.all[a]={keyword:a,code:r[a],implements:n}})),e.all.$comment={keyword:"$comment",code:r.$comment},a.type&&(e.types[a.type]=a)})),e.keywords=n(t.concat(["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"])),e.custom={},e}},function(e,t,a){"use strict";e.exports={$ref:a(1042),allOf:a(1043),anyOf:a(1044),$comment:a(1045),const:a(1046),contains:a(1047),dependencies:a(1048),enum:a(1049),format:a(1050),if:a(1051),items:a(1052),maximum:a(404),minimum:a(404),maxItems:a(405),minItems:a(405),maxLength:a(406),minLength:a(406),maxProperties:a(407),minProperties:a(407),multipleOf:a(1053),not:a(1054),oneOf:a(1055),pattern:a(1056),properties:a(1057),propertyNames:a(1058),required:a(1059),uniqueItems:a(1060),validate:a(403)}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r,n,i=" ",s=e.level,o=e.dataLevel,c=e.schema[t],l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(o||""),p="valid"+s;if("#"==c||"#/"==c)e.isRoot?(r=e.async,n="validate"):(r=!0===e.root.schema.$async,n="root.refVal[0]");else{var h=e.resolveRef(e.baseId,c,e.isRoot);if(void 0===h){var f=e.MissingRefError.message(e.baseId,c);if("fail"==e.opts.missingRefs){e.logger.error(f),(y=y||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { ref: '"+e.util.escapeQuotes(c)+"' } ",!1!==e.opts.messages&&(i+=" , message: 'can\\'t resolve reference "+e.util.escapeQuotes(c)+"' "),e.opts.verbose&&(i+=" , schema: "+e.util.toQuotedString(c)+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),i+=" } "):i+=" {} ";var m=i;i=y.pop(),!e.compositeRule&&u?e.async?i+=" throw new ValidationError(["+m+"]); ":i+=" validate.errors = ["+m+"]; return false; ":i+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",u&&(i+=" if (false) { ")}else{if("ignore"!=e.opts.missingRefs)throw new e.MissingRefError(e.baseId,c,f);e.logger.warn(f),u&&(i+=" if (true) { ")}}else if(h.inline){var g=e.util.copy(e);g.level++;var b="valid"+g.level;g.schema=h.schema,g.schemaPath="",g.errSchemaPath=c,i+=" "+e.validate(g).replace(/validate\.schema/g,h.code)+" ",u&&(i+=" if ("+b+") { ")}else r=!0===h.$async||e.async&&!1!==h.$async,n=h.code}if(n){var y;(y=y||[]).push(i),i="",e.opts.passContext?i+=" "+n+".call(this, ":i+=" "+n+"( ",i+=" "+d+", (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var v=i+=" , "+(o?"data"+(o-1||""):"parentData")+" , "+(o?e.dataPathArr[o]:"parentDataProperty")+", rootData)  ";if(i=y.pop(),r){if(!e.async)throw new Error("async schema referenced by sync schema");u&&(i+=" var "+p+"; "),i+=" try { await "+v+"; ",u&&(i+=" "+p+" = true; "),i+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",u&&(i+=" "+p+" = false; "),i+=" } ",u&&(i+=" if ("+p+") { ")}else i+=" if (!"+v+") { if (vErrors === null) vErrors = "+n+".errors; else vErrors = vErrors.concat("+n+".errors); errors = vErrors.length; } ",u&&(i+=" else { ")}return i}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.schema[t],i=e.schemaPath+e.util.getProperty(t),s=e.errSchemaPath+"/"+t,o=!e.opts.allErrors,c=e.util.copy(e),l="";c.level++;var u="valid"+c.level,d=c.baseId,p=!0,h=n;if(h)for(var f,m=-1,g=h.length-1;m<g;)f=h[m+=1],(e.opts.strictKeywords?"object"==typeof f&&Object.keys(f).length>0:e.util.schemaHasRules(f,e.RULES.all))&&(p=!1,c.schema=f,c.schemaPath=i+"["+m+"]",c.errSchemaPath=s+"/"+m,r+="  "+e.validate(c)+" ",c.baseId=d,o&&(r+=" if ("+u+") { ",l+="}"));return o&&(r+=p?" if (true) { ":" "+l.slice(0,-1)+" "),r=e.util.cleanUpCode(r)}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,p="errs__"+n,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level;if(s.every((function(t){return e.opts.strictKeywords?"object"==typeof t&&Object.keys(t).length>0:e.util.schemaHasRules(t,e.RULES.all)}))){var g=h.baseId;r+=" var "+p+" = errors; var "+d+" = false;  ";var b=e.compositeRule;e.compositeRule=h.compositeRule=!0;var y=s;if(y)for(var v,_=-1,w=y.length-1;_<w;)v=y[_+=1],h.schema=v,h.schemaPath=o+"["+_+"]",h.errSchemaPath=c+"/"+_,r+="  "+e.validate(h)+" ",h.baseId=g,r+=" "+d+" = "+d+" || "+m+"; if (!"+d+") { ",f+="}";e.compositeRule=h.compositeRule=b,r+=" "+f+" if (!"+d+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should match some schema in anyOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } "),r=e.util.cleanUpCode(r)}else l&&(r+=" if (true) { ");return r}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.schema[t],i=e.errSchemaPath+"/"+t,s=(e.opts.allErrors,e.util.toQuotedString(n));return!0===e.opts.$comment?r+=" console.log("+s+");":"function"==typeof e.opts.$comment&&(r+=" self._opts.$comment("+s+", "+e.util.toQuotedString(i)+", validate.root.schema);"),r}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,p=e.opts.$data&&s&&s.$data;p&&(r+=" var schema"+n+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; "),p||(r+=" var schema"+n+" = validate.schema"+o+";"),r+="var "+d+" = equal("+u+", schema"+n+"); if (!"+d+") {   ";var h=h||[];h.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValue: schema"+n+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to constant' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var f=r;return r=h.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+f+"]); ":r+=" validate.errors = ["+f+"]; return false; ":r+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",l&&(r+=" else { "),r}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,p="errs__"+n,h=e.util.copy(e);h.level++;var f="valid"+h.level,m="i"+n,g=h.dataLevel=e.dataLevel+1,b="data"+g,y=e.baseId,v=e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all);if(r+="var "+p+" = errors;var "+d+";",v){var _=e.compositeRule;e.compositeRule=h.compositeRule=!0,h.schema=s,h.schemaPath=o,h.errSchemaPath=c,r+=" var "+f+" = false; for (var "+m+" = 0; "+m+" < "+u+".length; "+m+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers,!0);var w=u+"["+m+"]";h.dataPathArr[g]=m;var x=e.validate(h);h.baseId=y,e.util.varOccurences(x,b)<2?r+=" "+e.util.varReplace(x,b,w)+" ":r+=" var "+b+" = "+w+"; "+x+" ",r+=" if ("+f+") break; }  ",e.compositeRule=h.compositeRule=_,r+="  if (!"+f+") {"}else r+=" if ("+u+".length == 0) {";var k=k||[];k.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should contain a valid item' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var S=r;return r=k.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",v&&(r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } "),e.opts.allErrors&&(r+=" } "),r=e.util.cleanUpCode(r)}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+n,p=e.util.copy(e),h="";p.level++;var f="valid"+p.level,m={},g={},b=e.opts.ownProperties;for(w in s){var y=s[w],v=Array.isArray(y)?g:m;v[w]=y}r+="var "+d+" = errors;";var _=e.errorPath;for(var w in r+="var missing"+n+";",g)if((v=g[w]).length){if(r+=" if ( "+u+e.util.getProperty(w)+" !== undefined ",b&&(r+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),l){r+=" && ( ";var x=v;if(x)for(var k=-1,S=x.length-1;k<S;){T=x[k+=1],k&&(r+=" || "),r+=" ( ( "+(I=u+(D=e.util.getProperty(T)))+" === undefined ",b&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(T)+"') "),r+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?T:D)+") ) "}r+=")) {  ";var P="missing"+n,E="' + "+P+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,P,!0):_+" + "+P);var C=C||[];C.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+E+"', depsCount: "+v.length+", deps: '"+e.util.escapeQuotes(1==v.length?v[0]:v.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==v.length?r+="property "+e.util.escapeQuotes(v[0]):r+="properties "+e.util.escapeQuotes(v.join(", ")),r+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var A=r;r=C.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+A+"]); ":r+=" validate.errors = ["+A+"]; return false; ":r+=" var err = "+A+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var M=v;if(M)for(var T,j=-1,O=M.length-1;j<O;){T=M[j+=1];var D=e.util.getProperty(T),I=(E=e.util.escapeQuotes(T),u+D);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,T,e.opts.jsonPointers)),r+=" if ( "+I+" === undefined ",b&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(T)+"') "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { property: '"+e.util.escapeQuotes(w)+"', missingProperty: '"+E+"', depsCount: "+v.length+", deps: '"+e.util.escapeQuotes(1==v.length?v[0]:v.join(", "))+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have ",1==v.length?r+="property "+e.util.escapeQuotes(v[0]):r+="properties "+e.util.escapeQuotes(v.join(", ")),r+=" when property "+e.util.escapeQuotes(w)+" is present' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",l&&(h+="}",r+=" else { ")}e.errorPath=_;var R=p.baseId;for(var w in m){y=m[w];(e.opts.strictKeywords?"object"==typeof y&&Object.keys(y).length>0:e.util.schemaHasRules(y,e.RULES.all))&&(r+=" "+f+" = true; if ( "+u+e.util.getProperty(w)+" !== undefined ",b&&(r+=" && Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(w)+"') "),r+=") { ",p.schema=y,p.schemaPath=o+e.util.getProperty(w),p.errSchemaPath=c+"/"+e.util.escapeFragment(w),r+="  "+e.validate(p)+" ",p.baseId=R,r+=" }  ",l&&(r+=" if ("+f+") { ",h+="}"))}return l&&(r+="   "+h+" if ("+d+" == errors) {"),r=e.util.cleanUpCode(r)}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,p=e.opts.$data&&s&&s.$data;p&&(r+=" var schema"+n+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ");var h="i"+n,f="schema"+n;p||(r+=" var "+f+" = validate.schema"+o+";"),r+="var "+d+";",p&&(r+=" if (schema"+n+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+n+")) "+d+" = false; else {"),r+=d+" = false;for (var "+h+"=0; "+h+"<"+f+".length; "+h+"++) if (equal("+u+", "+f+"["+h+"])) { "+d+" = true; break; }",p&&(r+="  }  "),r+=" if (!"+d+") {   ";var m=m||[];m.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { allowedValues: schema"+n+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be equal to one of the allowed values' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var g=r;return r=m.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",l&&(r+=" else { "),r}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||"");if(!1===e.opts.format)return l&&(r+=" if (true) { "),r;var d,p=e.opts.$data&&s&&s.$data;p?(r+=" var schema"+n+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",d="schema"+n):d=s;var h=e.opts.unknownFormats,f=Array.isArray(h);if(p){r+=" var "+(m="format"+n)+" = formats["+d+"]; var "+(g="isObject"+n)+" = typeof "+m+" == 'object' && !("+m+" instanceof RegExp) && "+m+".validate; var "+(b="formatType"+n)+" = "+g+" && "+m+".type || 'string'; if ("+g+") { ",e.async&&(r+=" var async"+n+" = "+m+".async; "),r+=" "+m+" = "+m+".validate; } if (  ",p&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),r+=" (","ignore"!=h&&(r+=" ("+d+" && !"+m+" ",f&&(r+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),r+=") || "),r+=" ("+m+" && "+b+" == '"+a+"' && !(typeof "+m+" == 'function' ? ",e.async?r+=" (async"+n+" ? await "+m+"("+u+") : "+m+"("+u+")) ":r+=" "+m+"("+u+") ",r+=" : "+m+".test("+u+"))))) {"}else{var m;if(!(m=e.formats[s])){if("ignore"==h)return e.logger.warn('unknown format "'+s+'" ignored in schema at path "'+e.errSchemaPath+'"'),l&&(r+=" if (true) { "),r;if(f&&h.indexOf(s)>=0)return l&&(r+=" if (true) { "),r;throw new Error('unknown format "'+s+'" is used in schema at path "'+e.errSchemaPath+'"')}var g,b=(g="object"==typeof m&&!(m instanceof RegExp)&&m.validate)&&m.type||"string";if(g){var y=!0===m.async;m=m.validate}if(b!=a)return l&&(r+=" if (true) { "),r;if(y){if(!e.async)throw new Error("async format in sync schema");r+=" if (!(await "+(v="formats"+e.util.getProperty(s)+".validate")+"("+u+"))) { "}else{r+=" if (! ";var v="formats"+e.util.getProperty(s);g&&(v+=".validate"),r+="function"==typeof m?" "+v+"("+u+") ":" "+v+".test("+u+") ",r+=") { "}}var _=_||[];_.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { format:  ",r+=p?""+d:""+e.util.toQuotedString(s),r+="  } ",!1!==e.opts.messages&&(r+=" , message: 'should match format \"",r+=p?"' + "+d+" + '":""+e.util.escapeQuotes(s),r+="\"' "),e.opts.verbose&&(r+=" , schema:  ",r+=p?"validate.schema"+o:""+e.util.toQuotedString(s),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var w=r;return r=_.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+w+"]); ":r+=" validate.errors = ["+w+"]; return false; ":r+=" var err = "+w+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",l&&(r+=" else { "),r}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,p="errs__"+n,h=e.util.copy(e);h.level++;var f="valid"+h.level,m=e.schema.then,g=e.schema.else,b=void 0!==m&&(e.opts.strictKeywords?"object"==typeof m&&Object.keys(m).length>0:e.util.schemaHasRules(m,e.RULES.all)),y=void 0!==g&&(e.opts.strictKeywords?"object"==typeof g&&Object.keys(g).length>0:e.util.schemaHasRules(g,e.RULES.all)),v=h.baseId;if(b||y){var _;h.createErrors=!1,h.schema=s,h.schemaPath=o,h.errSchemaPath=c,r+=" var "+p+" = errors; var "+d+" = true;  ";var w=e.compositeRule;e.compositeRule=h.compositeRule=!0,r+="  "+e.validate(h)+" ",h.baseId=v,h.createErrors=!0,r+="  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }  ",e.compositeRule=h.compositeRule=w,b?(r+=" if ("+f+") {  ",h.schema=e.schema.then,h.schemaPath=e.schemaPath+".then",h.errSchemaPath=e.errSchemaPath+"/then",r+="  "+e.validate(h)+" ",h.baseId=v,r+=" "+d+" = "+f+"; ",b&&y?r+=" var "+(_="ifClause"+n)+" = 'then'; ":_="'then'",r+=" } ",y&&(r+=" else { ")):r+=" if (!"+f+") { ",y&&(h.schema=e.schema.else,h.schemaPath=e.schemaPath+".else",h.errSchemaPath=e.errSchemaPath+"/else",r+="  "+e.validate(h)+" ",h.baseId=v,r+=" "+d+" = "+f+"; ",b&&y?r+=" var "+(_="ifClause"+n)+" = 'else'; ":_="'else'",r+=" } "),r+=" if (!"+d+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { failingKeyword: "+_+" } ",!1!==e.opts.messages&&(r+=" , message: 'should match \"' + "+_+" + '\" schema' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",l&&(r+=" else { "),r=e.util.cleanUpCode(r)}else l&&(r+=" if (true) { ");return r}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,p="errs__"+n,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level,g="i"+n,b=h.dataLevel=e.dataLevel+1,y="data"+b,v=e.baseId;if(r+="var "+p+" = errors;var "+d+";",Array.isArray(s)){var _=e.schema.additionalItems;if(!1===_){r+=" "+d+" = "+u+".length <= "+s.length+"; ";var w=c;c=e.errSchemaPath+"/additionalItems",r+="  if (!"+d+") {   ";var x=x||[];x.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",!1!==e.opts.messages&&(r+=" , message: 'should NOT have more than "+s.length+" items' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var k=r;r=x.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+k+"]); ":r+=" validate.errors = ["+k+"]; return false; ":r+=" var err = "+k+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",c=w,l&&(f+="}",r+=" else { ")}var S=s;if(S)for(var P,E=-1,C=S.length-1;E<C;)if(P=S[E+=1],e.opts.strictKeywords?"object"==typeof P&&Object.keys(P).length>0:e.util.schemaHasRules(P,e.RULES.all)){r+=" "+m+" = true; if ("+u+".length > "+E+") { ";var A=u+"["+E+"]";h.schema=P,h.schemaPath=o+"["+E+"]",h.errSchemaPath=c+"/"+E,h.errorPath=e.util.getPathExpr(e.errorPath,E,e.opts.jsonPointers,!0),h.dataPathArr[b]=E;var M=e.validate(h);h.baseId=v,e.util.varOccurences(M,y)<2?r+=" "+e.util.varReplace(M,y,A)+" ":r+=" var "+y+" = "+A+"; "+M+" ",r+=" }  ",l&&(r+=" if ("+m+") { ",f+="}")}if("object"==typeof _&&(e.opts.strictKeywords?"object"==typeof _&&Object.keys(_).length>0:e.util.schemaHasRules(_,e.RULES.all))){h.schema=_,h.schemaPath=e.schemaPath+".additionalItems",h.errSchemaPath=e.errSchemaPath+"/additionalItems",r+=" "+m+" = true; if ("+u+".length > "+s.length+") {  for (var "+g+" = "+s.length+"; "+g+" < "+u+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);A=u+"["+g+"]";h.dataPathArr[b]=g;M=e.validate(h);h.baseId=v,e.util.varOccurences(M,y)<2?r+=" "+e.util.varReplace(M,y,A)+" ":r+=" var "+y+" = "+A+"; "+M+" ",l&&(r+=" if (!"+m+") break; "),r+=" } }  ",l&&(r+=" if ("+m+") { ",f+="}")}}else if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all)){h.schema=s,h.schemaPath=o,h.errSchemaPath=c,r+="  for (var "+g+" = 0; "+g+" < "+u+".length; "+g+"++) { ",h.errorPath=e.util.getPathExpr(e.errorPath,g,e.opts.jsonPointers,!0);A=u+"["+g+"]";h.dataPathArr[b]=g;M=e.validate(h);h.baseId=v,e.util.varOccurences(M,y)<2?r+=" "+e.util.varReplace(M,y,A)+" ":r+=" var "+y+" = "+A+"; "+M+" ",l&&(r+=" if (!"+m+") break; "),r+=" }"}return l&&(r+=" "+f+" if ("+p+" == errors) {"),r=e.util.cleanUpCode(r)}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r,n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),p=e.opts.$data&&o&&o.$data;p?(n+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",r="schema"+i):r=o,n+="var division"+i+";if (",p&&(n+=" "+r+" !== undefined && ( typeof "+r+" != 'number' || "),n+=" (division"+i+" = "+d+" / "+r+", ",e.opts.multipleOfPrecision?n+=" Math.abs(Math.round(division"+i+") - division"+i+") > 1e-"+e.opts.multipleOfPrecision+" ":n+=" division"+i+" !== parseInt(division"+i+") ",n+=" ) ",p&&(n+="  )  "),n+=" ) {   ";var h=h||[];h.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { multipleOf: "+r+" } ",!1!==e.opts.messages&&(n+=" , message: 'should be multiple of ",n+=p?"' + "+r:r+"'"),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+o,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var f=n;return n=h.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+n,p=e.util.copy(e);p.level++;var h="valid"+p.level;if(e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all)){p.schema=s,p.schemaPath=o,p.errSchemaPath=c,r+=" var "+d+" = errors;  ";var f,m=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.createErrors=!1,p.opts.allErrors&&(f=p.opts.allErrors,p.opts.allErrors=!1),r+=" "+e.validate(p)+" ",p.createErrors=!0,f&&(p.opts.allErrors=f),e.compositeRule=p.compositeRule=m,r+=" if ("+h+") {   ";var g=g||[];g.push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var b=r;r=g.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+b+"]); ":r+=" validate.errors = ["+b+"]; return false; ":r+=" var err = "+b+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",e.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: 'should NOT be valid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(r+=" if (false) { ");return r}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,p="errs__"+n,h=e.util.copy(e),f="";h.level++;var m="valid"+h.level,g=h.baseId,b="prevValid"+n,y="passingSchemas"+n;r+="var "+p+" = errors , "+b+" = false , "+d+" = false , "+y+" = null; ";var v=e.compositeRule;e.compositeRule=h.compositeRule=!0;var _=s;if(_)for(var w,x=-1,k=_.length-1;x<k;)w=_[x+=1],(e.opts.strictKeywords?"object"==typeof w&&Object.keys(w).length>0:e.util.schemaHasRules(w,e.RULES.all))?(h.schema=w,h.schemaPath=o+"["+x+"]",h.errSchemaPath=c+"/"+x,r+="  "+e.validate(h)+" ",h.baseId=g):r+=" var "+m+" = true; ",x&&(r+=" if ("+m+" && "+b+") { "+d+" = false; "+y+" = ["+y+", "+x+"]; } else { ",f+="}"),r+=" if ("+m+") { "+d+" = "+b+" = true; "+y+" = "+x+"; }";return e.compositeRule=h.compositeRule=v,r+=f+"if (!"+d+") {   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",!1!==e.opts.messages&&(r+=" , message: 'should match exactly one schema in oneOf' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; }",e.opts.allErrors&&(r+=" } "),r}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r,n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),p=e.opts.$data&&o&&o.$data;p?(n+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",r="schema"+i):r=o,n+="if ( ",p&&(n+=" ("+r+" !== undefined && typeof "+r+" != 'string') || "),n+=" !"+(p?"(new RegExp("+r+"))":e.usePattern(o))+".test("+d+") ) {   ";var h=h||[];h.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { pattern:  ",n+=p?""+r:""+e.util.toQuotedString(o),n+="  } ",!1!==e.opts.messages&&(n+=" , message: 'should match pattern \"",n+=p?"' + "+r+" + '":""+e.util.escapeQuotes(o),n+="\"' "),e.opts.verbose&&(n+=" , schema:  ",n+=p?"validate.schema"+c:""+e.util.toQuotedString(o),n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var f=n;return n=h.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+f+"]); ":n+=" validate.errors = ["+f+"]; return false; ":n+=" var err = "+f+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+="} ",u&&(n+=" else { "),n}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+n,p=e.util.copy(e),h="";p.level++;var f="valid"+p.level,m="key"+n,g="idx"+n,b=p.dataLevel=e.dataLevel+1,y="data"+b,v="dataProperties"+n,_=Object.keys(s||{}),w=e.schema.patternProperties||{},x=Object.keys(w),k=e.schema.additionalProperties,S=_.length||x.length,P=!1===k,E="object"==typeof k&&Object.keys(k).length,C=e.opts.removeAdditional,A=P||E||C,M=e.opts.ownProperties,T=e.baseId,j=e.schema.required;if(j&&(!e.opts.$data||!j.$data)&&j.length<e.opts.loopRequired)var O=e.util.toHash(j);if(r+="var "+d+" = errors;var "+f+" = true;",M&&(r+=" var "+v+" = undefined;"),A){if(r+=M?" "+v+" = "+v+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+v+".length; "+g+"++) { var "+m+" = "+v+"["+g+"]; ":" for (var "+m+" in "+u+") { ",S){if(r+=" var isAdditional"+n+" = !(false ",_.length)if(_.length>8)r+=" || validate.schema"+o+".hasOwnProperty("+m+") ";else{var D=_;if(D)for(var I=-1,R=D.length-1;I<R;)V=D[I+=1],r+=" || "+m+" == "+e.util.toQuotedString(V)+" "}if(x.length){var B=x;if(B)for(var q=-1,L=B.length-1;q<L;)ne=B[q+=1],r+=" || "+e.usePattern(ne)+".test("+m+") "}r+=" ); if (isAdditional"+n+") { "}if("all"==C)r+=" delete "+u+"["+m+"]; ";else{var N=e.errorPath,F="' + "+m+" + '";if(e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers)),P)if(C)r+=" delete "+u+"["+m+"]; ";else{r+=" "+f+" = false; ";var U=c;c=e.errSchemaPath+"/additionalProperties",(te=te||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { additionalProperty: '"+F+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),e.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var $=r;r=te.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,l&&(r+=" break; ")}else if(E)if("failing"==C){r+=" var "+d+" = errors;  ";var z=e.compositeRule;e.compositeRule=p.compositeRule=!0,p.schema=k,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);var H=u+"["+m+"]";p.dataPathArr[b]=m;var G=e.validate(p);p.baseId=T,e.util.varOccurences(G,y)<2?r+=" "+e.util.varReplace(G,y,H)+" ":r+=" var "+y+" = "+H+"; "+G+" ",r+=" if (!"+f+") { errors = "+d+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+u+"["+m+"]; }  ",e.compositeRule=p.compositeRule=z}else{p.schema=k,p.schemaPath=e.schemaPath+".additionalProperties",p.errSchemaPath=e.errSchemaPath+"/additionalProperties",p.errorPath=e.opts._errorDataPathProperty?e.errorPath:e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);H=u+"["+m+"]";p.dataPathArr[b]=m;G=e.validate(p);p.baseId=T,e.util.varOccurences(G,y)<2?r+=" "+e.util.varReplace(G,y,H)+" ":r+=" var "+y+" = "+H+"; "+G+" ",l&&(r+=" if (!"+f+") break; ")}e.errorPath=N}S&&(r+=" } "),r+=" }  ",l&&(r+=" if ("+f+") { ",h+="}")}var K=e.opts.useDefaults&&!e.compositeRule;if(_.length){var W=_;if(W)for(var V,Y=-1,J=W.length-1;Y<J;){var X=s[V=W[Y+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0:e.util.schemaHasRules(X,e.RULES.all)){var Q=e.util.getProperty(V),Z=(H=u+Q,K&&void 0!==X.default);p.schema=X,p.schemaPath=o+Q,p.errSchemaPath=c+"/"+e.util.escapeFragment(V),p.errorPath=e.util.getPath(e.errorPath,V,e.opts.jsonPointers),p.dataPathArr[b]=e.util.toQuotedString(V);G=e.validate(p);if(p.baseId=T,e.util.varOccurences(G,y)<2){G=e.util.varReplace(G,y,H);var ee=H}else{ee=y;r+=" var "+y+" = "+H+"; "}if(Z)r+=" "+G+" ";else{if(O&&O[V]){r+=" if ( "+ee+" === undefined ",M&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(V)+"') "),r+=") { "+f+" = false; ";N=e.errorPath,U=c;var te,ae=e.util.escapeQuotes(V);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(N,V,e.opts.jsonPointers)),c=e.errSchemaPath+"/required",(te=te||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+ae+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+ae+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";$=r;r=te.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+$+"]); ":r+=" validate.errors = ["+$+"]; return false; ":r+=" var err = "+$+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=U,e.errorPath=N,r+=" } else { "}else l?(r+=" if ( "+ee+" === undefined ",M&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(V)+"') "),r+=") { "+f+" = true; } else { "):(r+=" if ("+ee+" !== undefined ",M&&(r+=" &&   Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(V)+"') "),r+=" ) { ");r+=" "+G+" } "}}l&&(r+=" if ("+f+") { ",h+="}")}}if(x.length){var re=x;if(re)for(var ne,ie=-1,se=re.length-1;ie<se;){X=w[ne=re[ie+=1]];if(e.opts.strictKeywords?"object"==typeof X&&Object.keys(X).length>0:e.util.schemaHasRules(X,e.RULES.all)){p.schema=X,p.schemaPath=e.schemaPath+".patternProperties"+e.util.getProperty(ne),p.errSchemaPath=e.errSchemaPath+"/patternProperties/"+e.util.escapeFragment(ne),r+=M?" "+v+" = "+v+" || Object.keys("+u+"); for (var "+g+"=0; "+g+"<"+v+".length; "+g+"++) { var "+m+" = "+v+"["+g+"]; ":" for (var "+m+" in "+u+") { ",r+=" if ("+e.usePattern(ne)+".test("+m+")) { ",p.errorPath=e.util.getPathExpr(e.errorPath,m,e.opts.jsonPointers);H=u+"["+m+"]";p.dataPathArr[b]=m;G=e.validate(p);p.baseId=T,e.util.varOccurences(G,y)<2?r+=" "+e.util.varReplace(G,y,H)+" ":r+=" var "+y+" = "+H+"; "+G+" ",l&&(r+=" if (!"+f+") break; "),r+=" } ",l&&(r+=" else "+f+" = true; "),r+=" }  ",l&&(r+=" if ("+f+") { ",h+="}")}}}return l&&(r+=" "+h+" if ("+d+" == errors) {"),r=e.util.cleanUpCode(r)}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="errs__"+n,p=e.util.copy(e);p.level++;var h="valid"+p.level;if(r+="var "+d+" = errors;",e.opts.strictKeywords?"object"==typeof s&&Object.keys(s).length>0:e.util.schemaHasRules(s,e.RULES.all)){p.schema=s,p.schemaPath=o,p.errSchemaPath=c;var f="key"+n,m="idx"+n,g="i"+n,b="' + "+f+" + '",y="data"+(p.dataLevel=e.dataLevel+1),v="dataProperties"+n,_=e.opts.ownProperties,w=e.baseId;_&&(r+=" var "+v+" = undefined; "),r+=_?" "+v+" = "+v+" || Object.keys("+u+"); for (var "+m+"=0; "+m+"<"+v+".length; "+m+"++) { var "+f+" = "+v+"["+m+"]; ":" for (var "+f+" in "+u+") { ",r+=" var startErrs"+n+" = errors; ";var x=f,k=e.compositeRule;e.compositeRule=p.compositeRule=!0;var S=e.validate(p);p.baseId=w,e.util.varOccurences(S,y)<2?r+=" "+e.util.varReplace(S,y,x)+" ":r+=" var "+y+" = "+x+"; "+S+" ",e.compositeRule=p.compositeRule=k,r+=" if (!"+h+") { for (var "+g+"=startErrs"+n+"; "+g+"<errors; "+g+"++) { vErrors["+g+"].propertyName = "+f+"; }   var err =   ",!1!==e.createErrors?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { propertyName: '"+b+"' } ",!1!==e.opts.messages&&(r+=" , message: 'property name \\'"+b+"\\' is invalid' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&l&&(e.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),l&&(r+=" break; "),r+=" } }"}return l&&(r+="  if ("+d+" == errors) {"),r=e.util.cleanUpCode(r)}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,p=e.opts.$data&&s&&s.$data;p&&(r+=" var schema"+n+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ");var h="schema"+n;if(!p)if(s.length<e.opts.loopRequired&&e.schema.properties&&Object.keys(e.schema.properties).length){var f=[],m=s;if(m)for(var g,b=-1,y=m.length-1;b<y;){g=m[b+=1];var v=e.schema.properties[g];v&&(e.opts.strictKeywords?"object"==typeof v&&Object.keys(v).length>0:e.util.schemaHasRules(v,e.RULES.all))||(f[f.length]=g)}}else f=s;if(p||f.length){var _=e.errorPath,w=p||f.length>=e.opts.loopRequired,x=e.opts.ownProperties;if(l)if(r+=" var missing"+n+"; ",w){p||(r+=" var "+h+" = validate.schema"+o+"; ");var k="' + "+(M="schema"+n+"["+(E="i"+n)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,M,e.opts.jsonPointers)),r+=" var "+d+" = true; ",p&&(r+=" if (schema"+n+" === undefined) "+d+" = true; else if (!Array.isArray(schema"+n+")) "+d+" = false; else {"),r+=" for (var "+E+" = 0; "+E+" < "+h+".length; "+E+"++) { "+d+" = "+u+"["+h+"["+E+"]] !== undefined ",x&&(r+=" &&   Object.prototype.hasOwnProperty.call("+u+", "+h+"["+E+"]) "),r+="; if (!"+d+") break; } ",p&&(r+="  }  "),r+="  if (!"+d+") {   ",(A=A||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+k+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var S=r;r=A.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var P=f;if(P)for(var E=-1,C=P.length-1;E<C;){j=P[E+=1],E&&(r+=" || "),r+=" ( ( "+(R=u+(I=e.util.getProperty(j)))+" === undefined ",x&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(j)+"') "),r+=") && (missing"+n+" = "+e.util.toQuotedString(e.opts.jsonPointers?j:I)+") ) "}r+=") {  ";var A;k="' + "+(M="missing"+n)+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.opts.jsonPointers?e.util.getPathExpr(_,M,!0):_+" + "+M),(A=A||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+k+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";S=r;r=A.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(w){p||(r+=" var "+h+" = validate.schema"+o+"; ");var M;k="' + "+(M="schema"+n+"["+(E="i"+n)+"]")+" + '";e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPathExpr(_,M,e.opts.jsonPointers)),p&&(r+=" if ("+h+" && !Array.isArray("+h+")) {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+k+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+h+" !== undefined) { "),r+=" for (var "+E+" = 0; "+E+" < "+h+".length; "+E+"++) { if ("+u+"["+h+"["+E+"]] === undefined ",x&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", "+h+"["+E+"]) "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+k+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",p&&(r+="  }  ")}else{var T=f;if(T)for(var j,O=-1,D=T.length-1;O<D;){j=T[O+=1];var I=e.util.getProperty(j),R=(k=e.util.escapeQuotes(j),u+I);e.opts._errorDataPathProperty&&(e.errorPath=e.util.getPath(_,j,e.opts.jsonPointers)),r+=" if ( "+R+" === undefined ",x&&(r+=" || ! Object.prototype.hasOwnProperty.call("+u+", '"+e.util.escapeQuotes(j)+"') "),r+=") {  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingProperty: '"+k+"' } ",!1!==e.opts.messages&&(r+=" , message: '",e.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+k+"\\'",r+="' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}e.errorPath=_}else l&&(r+=" if (true) {");return r}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r,n=" ",i=e.level,s=e.dataLevel,o=e.schema[t],c=e.schemaPath+e.util.getProperty(t),l=e.errSchemaPath+"/"+t,u=!e.opts.allErrors,d="data"+(s||""),p="valid"+i,h=e.opts.$data&&o&&o.$data;if(h?(n+=" var schema"+i+" = "+e.util.getData(o.$data,s,e.dataPathArr)+"; ",r="schema"+i):r=o,(o||h)&&!1!==e.opts.uniqueItems){h&&(n+=" var "+p+"; if ("+r+" === false || "+r+" === undefined) "+p+" = true; else if (typeof "+r+" != 'boolean') "+p+" = false; else { "),n+=" var i = "+d+".length , "+p+" = true , j; if (i > 1) { ";var f=e.schema.items&&e.schema.items.type,m=Array.isArray(f);if(!f||"object"==f||"array"==f||m&&(f.indexOf("object")>=0||f.indexOf("array")>=0))n+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+d+"[i], "+d+"[j])) { "+p+" = false; break outer; } } } ";else{n+=" var itemIndices = {}, item; for (;i--;) { var item = "+d+"[i]; ";var g="checkDataType"+(m?"s":"");n+=" if ("+e.util[g](f,"item",!0)+") continue; ",m&&(n+=" if (typeof item == 'string') item = '\"' + item; "),n+=" if (typeof itemIndices[item] == 'number') { "+p+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}n+=" } ",h&&(n+="  }  "),n+=" if (!"+p+") {   ";var b=b||[];b.push(n),n="",!1!==e.createErrors?(n+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(l)+" , params: { i: i, j: j } ",!1!==e.opts.messages&&(n+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),e.opts.verbose&&(n+=" , schema:  ",n+=h?"validate.schema"+c:""+o,n+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+d+" "),n+=" } "):n+=" {} ";var y=n;n=b.pop(),!e.compositeRule&&u?e.async?n+=" throw new ValidationError(["+y+"]); ":n+=" validate.errors = ["+y+"]; return false; ":n+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",n+=" } ",u&&(n+=" else { ")}else u&&(n+=" if (true) { ");return n}},function(e,t,a){"use strict";var r=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"];e.exports=function(e,t){for(var a=0;a<t.length;a++){e=JSON.parse(JSON.stringify(e));var n,i=t[a].split("/"),s=e;for(n=1;n<i.length;n++)s=s[i[n]];for(n=0;n<r.length;n++){var o=r[n],c=s[o];c&&(s[o]={anyOf:[c,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]})}}return e}},function(e,t,a){"use strict";var r=a(184).MissingRef;e.exports=function e(t,a,n){var i=this;if("function"!=typeof this._opts.loadSchema)throw new Error("options.loadSchema should be a function");"function"==typeof a&&(n=a,a=void 0);var s=o(t).then((function(){var e=i._addSchema(t,void 0,a);return e.validate||function e(t){try{return i._compile(t)}catch(e){if(e instanceof r)return n(e);throw e}function n(r){var n=r.missingSchema;if(l(n))throw new Error("Schema "+n+" is loaded but "+r.missingRef+" cannot be resolved");var s=i._loadingSchemas[n];return s||(s=i._loadingSchemas[n]=i._opts.loadSchema(n)).then(c,c),s.then((function(e){if(!l(n))return o(e).then((function(){l(n)||i.addSchema(e,n,void 0,a)}))})).then((function(){return e(t)}));function c(){delete i._loadingSchemas[n]}function l(e){return i._refs[e]||i._schemas[e]}}}(e)}));n&&s.then((function(e){n(null,e)}),n);return s;function o(t){var a=t.$schema;return a&&!i.getSchema(a)?e.call(i,{$ref:a},!0):Promise.resolve()}}},function(e,t,a){"use strict";var r=/^[a-z_$][a-z0-9_$-]*$/i,n=a(1064),i=a(1065);e.exports={add:function(e,t){var a=this.RULES;if(a.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!r.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var i=t.type;if(Array.isArray(i))for(var s=0;s<i.length;s++)c(e,i[s],t);else c(e,i,t);var o=t.metaSchema;o&&(t.$data&&this._opts.$data&&(o={anyOf:[o,{$ref:"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(o,!0))}function c(e,t,r){for(var i,s=0;s<a.length;s++){var o=a[s];if(o.type==t){i=o;break}}i||(i={type:t,rules:[]},a.push(i));var c={keyword:e,definition:r,custom:!0,code:n,implements:r.implements};i.rules.push(c),a.custom[e]=c}return a.keywords[e]=a.all[e]=!0,this},get:function(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1},remove:function(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var a=0;a<t.length;a++)for(var r=t[a].rules,n=0;n<r.length;n++)if(r[n].keyword==e){r.splice(n,1);break}return this},validate:function e(t,a){e.errors=null;var r=this._validateKeyword=this._validateKeyword||this.compile(i,!0);if(r(t))return!0;if(e.errors=r.errors,a)throw new Error("custom keyword definition is invalid: "+this.errorsText(r.errors));return!1}}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r,n,i=" ",s=e.level,o=e.dataLevel,c=e.schema[t],l=e.schemaPath+e.util.getProperty(t),u=e.errSchemaPath+"/"+t,d=!e.opts.allErrors,p="data"+(o||""),h="valid"+s,f="errs__"+s,m=e.opts.$data&&c&&c.$data;m?(i+=" var schema"+s+" = "+e.util.getData(c.$data,o,e.dataPathArr)+"; ",n="schema"+s):n=c;var g,b,y,v,_,w="definition"+s,x=this.definition,k="";if(m&&x.$data){_="keywordValidate"+s;var S=x.validateSchema;i+=" var "+w+" = RULES.custom['"+t+"'].definition; var "+_+" = "+w+".validate;"}else{if(!(v=e.useCustomRule(this,c,e.schema,e)))return;n="validate.schema"+l,_=v.code,g=x.compile,b=x.inline,y=x.macro}var P=_+".errors",E="i"+s,C="ruleErr"+s,A=x.async;if(A&&!e.async)throw new Error("async keyword in sync schema");if(b||y||(i+=P+" = null;"),i+="var "+f+" = errors;var "+h+";",m&&x.$data&&(k+="}",i+=" if ("+n+" === undefined) { "+h+" = true; } else { ",S&&(k+="}",i+=" "+h+" = "+w+".validateSchema("+n+"); if ("+h+") { ")),b)x.statements?i+=" "+v.validate+" ":i+=" "+h+" = "+v.validate+"; ";else if(y){var M=e.util.copy(e);k="";M.level++;var T="valid"+M.level;M.schema=v.validate,M.schemaPath="";var j=e.compositeRule;e.compositeRule=M.compositeRule=!0;var O=e.validate(M).replace(/validate\.schema/g,_);e.compositeRule=M.compositeRule=j,i+=" "+O}else{(B=B||[]).push(i),i="",i+="  "+_+".call( ",e.opts.passContext?i+="this":i+="self",g||!1===x.schema?i+=" , "+p+" ":i+=" , "+n+" , "+p+" , validate.schema"+e.schemaPath+" ",i+=" , (dataPath || '')",'""'!=e.errorPath&&(i+=" + "+e.errorPath);var D=o?"data"+(o-1||""):"parentData",I=o?e.dataPathArr[o]:"parentDataProperty",R=i+=" , "+D+" , "+I+" , rootData )  ";i=B.pop(),!1===x.errors?(i+=" "+h+" = ",A&&(i+="await "),i+=R+"; "):i+=A?" var "+(P="customErrors"+s)+" = null; try { "+h+" = await "+R+"; } catch (e) { "+h+" = false; if (e instanceof ValidationError) "+P+" = e.errors; else throw e; } ":" "+P+" = null; "+h+" = "+R+"; "}if(x.modifying&&(i+=" if ("+D+") "+p+" = "+D+"["+I+"];"),i+=""+k,x.valid)d&&(i+=" if (true) { ");else{var B;i+=" if ( ",void 0===x.valid?(i+=" !",i+=y?""+T:""+h):i+=" "+!x.valid+" ",i+=") { ",r=this.keyword,(B=B||[]).push(i),i="",(B=B||[]).push(i),i="",!1!==e.createErrors?(i+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ";var q=i;i=B.pop(),!e.compositeRule&&d?e.async?i+=" throw new ValidationError(["+q+"]); ":i+=" validate.errors = ["+q+"]; return false; ":i+=" var err = "+q+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var L=i;i=B.pop(),b?x.errors?"full"!=x.errors&&(i+="  for (var "+E+"="+f+"; "+E+"<errors; "+E+"++) { var "+C+" = vErrors["+E+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+C+".schema = "+n+"; "+C+".data = "+p+"; "),i+=" } "):!1===x.errors?i+=" "+L+" ":(i+=" if ("+f+" == errors) { "+L+" } else {  for (var "+E+"="+f+"; "+E+"<errors; "+E+"++) { var "+C+" = vErrors["+E+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+"; if ("+C+".schemaPath === undefined) { "+C+'.schemaPath = "'+u+'"; } ',e.opts.verbose&&(i+=" "+C+".schema = "+n+"; "+C+".data = "+p+"; "),i+=" } } "):y?(i+="   var err =   ",!1!==e.createErrors?(i+=" { keyword: '"+(r||"custom")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(u)+" , params: { keyword: '"+this.keyword+"' } ",!1!==e.opts.messages&&(i+=" , message: 'should pass \""+this.keyword+"\" keyword validation' "),e.opts.verbose&&(i+=" , schema: validate.schema"+l+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+p+" "),i+=" } "):i+=" {} ",i+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!e.compositeRule&&d&&(e.async?i+=" throw new ValidationError(vErrors); ":i+=" validate.errors = vErrors; return false; ")):!1===x.errors?i+=" "+L+" ":(i+=" if (Array.isArray("+P+")) { if (vErrors === null) vErrors = "+P+"; else vErrors = vErrors.concat("+P+"); errors = vErrors.length;  for (var "+E+"="+f+"; "+E+"<errors; "+E+"++) { var "+C+" = vErrors["+E+"]; if ("+C+".dataPath === undefined) "+C+".dataPath = (dataPath || '') + "+e.errorPath+";  "+C+'.schemaPath = "'+u+'";  ',e.opts.verbose&&(i+=" "+C+".schema = "+n+"; "+C+".data = "+p+"; "),i+=" } } else { "+L+" } "),i+=" } ",d&&(i+=" else { ")}return i}},function(e,t,a){"use strict";var r=a(408);e.exports={$id:"https://github.com/epoberezkin/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:r.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:r.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}}},function(e){e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"https://raw.githubusercontent.com/epoberezkin/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON Schema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},function(e,t,a){"use strict";var r=a(1068);function n(e,t){if(Array.isArray(t)){for(var a=0;a<t.length;a++)i(t[a])(e);return e}if(t)return i(t)(e),e;for(t in r)i(t)(e);return e}function i(e){var t=r[e];if(!t)throw new Error("Unknown keyword "+e);return t}e.exports=n,n.get=i},function(e,t,a){"use strict";e.exports={instanceof:a(1069),range:a(1070),regexp:a(1071),typeof:a(1072),dynamicDefaults:a(1073),allRequired:a(1074),anyRequired:a(1075),oneRequired:a(1076),prohibited:a(1077),uniqueItemProperties:a(1078),deepProperties:a(1079),deepRequired:a(1080),formatMinimum:a(1081),formatMaximum:a(1083),patternRequired:a(1084),switch:a(1086),select:a(1088),transform:a(1089)}},function(e,t,a){"use strict";(function(t){var a={Object:Object,Array:Array,Function:Function,Number:Number,String:String,Date:Date,RegExp:RegExp};e.exports=function e(r){return void 0!==t&&(a.Buffer=t),"undefined"!=typeof Promise&&(a.Promise=Promise),e.definition={compile:function(e){if("string"==typeof e){var t=n(e);return function(e){return e instanceof t}}var a=e.map(n);return function(e){for(var t=0;t<a.length;t++)if(e instanceof a[t])return!0;return!1}},CONSTRUCTORS:a,metaSchema:{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}]}},r.addKeyword("instanceof",e.definition),r;function n(e){var t=a[e];if(t)return t;throw new Error('invalid "instanceof" keyword value '+e)}}}).call(this,a(9).Buffer)},function(e,t,a){"use strict";e.exports=function e(t){return e.definition={type:"number",macro:function(e,t){var a=e[0],r=e[1],n=t.exclusiveRange;return function(e,t,a){if(void 0!==a&&"boolean"!=typeof a)throw new Error("Invalid schema for exclusiveRange keyword, should be boolean");if(e>t||a&&e==t)throw new Error("There are no numbers in range")}(a,r,n),!0===n?{exclusiveMinimum:a,exclusiveMaximum:r}:{minimum:a,maximum:r}},metaSchema:{type:"array",minItems:2,maxItems:2,items:{type:"number"}}},t.addKeyword("range",e.definition),t.addKeyword("exclusiveRange"),t}},function(e,t,a){"use strict";e.exports=function e(t){return e.definition={type:"string",inline:function(e,t,a){return function(){try{if("object"==typeof a)return new RegExp(a.pattern,a.flags);var e=a.match(/^\/(.*)\/([gimuy]*)$/);if(e)return new RegExp(e[1],e[2]);throw new Error("cannot parse string into RegExp")}catch(e){throw console.error("regular expression",a,"is invalid"),e}}()+".test(data"+(e.dataLevel||"")+")"},metaSchema:{type:["string","object"],properties:{pattern:{type:"string"},flags:{type:"string"}},required:["pattern"],additionalProperties:!1}},t.addKeyword("regexp",e.definition),t}},function(e,t,a){"use strict";var r=["undefined","string","number","object","function","boolean","symbol"];e.exports=function e(t){return e.definition={inline:function(e,t,a){var r="data"+(e.dataLevel||"");return"string"==typeof a?"typeof "+r+' == "'+a+'"':(a="validate.schema"+e.schemaPath+"."+t)+".indexOf(typeof "+r+") >= 0"},metaSchema:{anyOf:[{type:"string",enum:r},{type:"array",items:{type:"string",enum:r}}]}},t.addKeyword("typeof",e.definition),t}},function(e,t,a){"use strict";var r={},n={timestamp:function(){return Date.now()},datetime:function(){return(new Date).toISOString()},date:function(){return(new Date).toISOString().slice(0,10)},time:function(){return(new Date).toISOString().slice(11)},random:function(){return Math.random()},randomint:function(e){var t=e&&e.max||2;return function(){return Math.floor(Math.random()*t)}},seq:function(e){var t=e&&e.name||"";return r[t]=r[t]||0,function(){return r[t]++}}};e.exports=function e(t){return e.definition={compile:function(e,t,r){var n={};for(var i in e){var s=e[i],o=a("string"==typeof s?s:s.func);n[i]=o.length?o(s.args):o}return r.opts.useDefaults&&!r.compositeRule?function(t){for(var a in e)void 0!==t[a]&&("empty"!=r.opts.useDefaults||null!==t[a]&&""!==t[a])||(t[a]=n[a]());return!0}:function(){return!0}},DEFAULTS:n,metaSchema:{type:"object",additionalProperties:{type:["string","object"],additionalProperties:!1,required:["func","args"],properties:{func:{type:"string"},args:{type:"object"}}}}},t.addKeyword("dynamicDefaults",e.definition),t;function a(e){var t=n[e];if(t)return t;throw new Error('invalid "dynamicDefaults" keyword property value: '+e)}}},function(e,t,a){"use strict";e.exports=function e(t){return e.definition={type:"object",macro:function(e,t){if(!e)return!0;var a=Object.keys(t.properties);return 0==a.length||{required:a}},metaSchema:{type:"boolean"},dependencies:["properties"]},t.addKeyword("allRequired",e.definition),t}},function(e,t,a){"use strict";e.exports=function e(t){return e.definition={type:"object",macro:function(e){return 0==e.length||(1==e.length?{required:e}:{anyOf:e.map((function(e){return{required:[e]}}))})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("anyRequired",e.definition),t}},function(e,t,a){"use strict";e.exports=function e(t){return e.definition={type:"object",macro:function(e){return 0==e.length||(1==e.length?{required:e}:{oneOf:e.map((function(e){return{required:[e]}}))})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("oneRequired",e.definition),t}},function(e,t,a){"use strict";e.exports=function e(t){return e.definition={type:"object",macro:function(e){return 0==e.length||(1==e.length?{not:{required:e}}:{not:{anyOf:e.map((function(e){return{required:[e]}}))}})},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("prohibited",e.definition),t}},function(e,t,a){"use strict";var r=["number","integer","string","boolean","null"];e.exports=function e(t){return e.definition={type:"array",compile:function(e,t,a){var n=a.util.equal,i=function(e,t){return e.map((function(e){var a=t.items&&t.items.properties,n=a&&a[e]&&a[e].type;return Array.isArray(n)?n.indexOf("object")<0&&n.indexOf("array")<0:r.indexOf(n)>=0}))}(e,t);return function(t){if(t.length>1)for(var a=0;a<e.length;a++){var r,s=e[a];if(i[a]){var o={};for(r=t.length;r--;)if(t[r]&&"object"==typeof t[r]){var c=t[r][s];if(!c||"object"!=typeof c){if("string"==typeof c&&(c='"'+c),o[c])return!1;o[c]=!0}}}else for(r=t.length;r--;)if(t[r]&&"object"==typeof t[r])for(var l=r;l--;)if(t[l]&&"object"==typeof t[l]&&n(t[r][s],t[l][s]))return!1}return!0}},metaSchema:{type:"array",items:{type:"string"}}},t.addKeyword("uniqueItemProperties",e.definition),t}},function(e,t,a){"use strict";var r=a(185);function n(e,t){for(var a=e.split("/"),r={},n=r,i=1;i<a.length;i++){var s=a[i],o=i==a.length-1;s=s.replace(/~1/g,"/").replace(/~0/g,"~");var c=n.properties={},l=void 0;if(/[0-9]+/.test(s)){var u=+s;for(l=n.items=[];u--;)l.push({})}n=o?t:{},c[s]=n,l&&l.push(n)}return r}e.exports=function e(t){return e.definition={type:"object",macro:function(e){var t=[];for(var a in e)t.push(n(a,e[a]));return{allOf:t}},metaSchema:{type:"object",propertyNames:{type:"string",format:"json-pointer"},additionalProperties:r.metaSchemaRef(t)}},t.addKeyword("deepProperties",e.definition),t}},function(e,t,a){"use strict";function r(e,t){var a="data"+(t||"");if(!e)return a;for(var r,o=a,c=e.split("/"),l=1;l<c.length;l++){var u=c[l];o+=" && "+(a+=(r=u.replace(/~1/g,"/").replace(/~0/g,"~"),i.test(r)?"["+r+"]":n.test(r)?"."+r:"['"+r.replace(s,"\\$&")+"']"))}return o}e.exports=function e(t){return e.definition={type:"object",inline:function(e,t,a){for(var n="",i=0;i<a.length;i++)i&&(n+=" && "),n+="("+r(a[i],e.dataLevel)+" !== undefined)";return n},metaSchema:{type:"array",items:{type:"string",format:"json-pointer"}}},t.addKeyword("deepRequired",e.definition),t};var n=/^[a-z$_][a-z$_0-9]*$/i,i=/^[0-9]+$/,s=/'|\\/g},function(e,t,a){"use strict";e.exports=a(409)("Minimum")},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+n;if(r+="var "+d+" = undefined;",!1===e.opts.format)return r+=" "+d+" = true; ";var p=e.schema.format,h=e.opts.$data&&p.$data,f="";if(h){r+=" var "+(m="format"+n)+" = formats["+e.util.getData(p.$data,i,e.dataPathArr)+"] , "+(g="compare"+n)+" = "+m+" && "+m+".compare;"}else{var m;if(!(m=e.formats[p])||!m.compare)return r+="  "+d+" = true; ";var g="formats"+e.util.getProperty(p)+".compare"}var b,y="formatMaximum"==t,v="formatExclusive"+(y?"Maximum":"Minimum"),_=e.schema[v],w=e.opts.$data&&_&&_.$data,x=y?"<":">",k="result"+n,S=e.opts.$data&&s&&s.$data;if(S?(r+=" var schema"+n+" = "+e.util.getData(s.$data,i,e.dataPathArr)+"; ",b="schema"+n):b=s,w){var P=e.util.getData(_.$data,i,e.dataPathArr),E="exclusive"+n,C="' + "+(T="op"+n)+" + '";r+=" var schemaExcl"+n+" = "+P+"; ",r+=" if (typeof "+(P="schemaExcl"+n)+" != 'boolean' && "+P+" !== undefined) { "+d+" = false; ";var A=v;(j=j||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: '"+(A||"_formatExclusiveLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: {} ",!1!==e.opts.messages&&(r+=" , message: '"+v+" should be boolean' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var M=r;r=j.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+M+"]); ":r+=" validate.errors = ["+M+"]; return false; ":r+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }  ",l&&(f+="}",r+=" else { "),S&&(r+=" if ("+b+" === undefined) "+d+" = true; else if (typeof "+b+" != 'string') "+d+" = false; else { ",f+="}"),h&&(r+=" if (!"+g+") "+d+" = true; else { ",f+="}"),r+=" var "+k+" = "+g+"("+u+",  ",r+=S?""+b:""+e.util.toQuotedString(s),r+=" ); if ("+k+" === undefined) "+d+" = false; var "+E+" = "+P+" === true; if ("+d+" === undefined) { "+d+" = "+E+" ? "+k+" "+x+" 0 : "+k+" "+x+"= 0; } if (!"+d+") var op"+n+" = "+E+" ? '"+x+"' : '"+x+"=';"}else{C=x;(E=!0===_)||(C+="=");var T="'"+C+"'";S&&(r+=" if ("+b+" === undefined) "+d+" = true; else if (typeof "+b+" != 'string') "+d+" = false; else { ",f+="}"),h&&(r+=" if (!"+g+") "+d+" = true; else { ",f+="}"),r+=" var "+k+" = "+g+"("+u+",  ",r+=S?""+b:""+e.util.toQuotedString(s),r+=" ); if ("+k+" === undefined) "+d+" = false; if ("+d+" === undefined) "+d+" = "+k+" "+x,E||(r+="="),r+=" 0;"}r+=f+"if (!"+d+") { ";var j;A=t;(j=j||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: '"+(A||"_formatLimit")+"' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { comparison: "+T+", limit:  ",r+=S?""+b:""+e.util.toQuotedString(s),r+=" , exclusive: "+E+" } ",!1!==e.opts.messages&&(r+=" , message: 'should be "+C+' "',r+=S?"' + "+b+" + '":""+e.util.escapeQuotes(s),r+="\"' "),e.opts.verbose&&(r+=" , schema:  ",r+=S?"validate.schema"+o:""+e.util.toQuotedString(s),r+="         , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";M=r;return r=j.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+M+"]); ":r+=" validate.errors = ["+M+"]; return false; ":r+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="}"}},function(e,t,a){"use strict";e.exports=a(409)("Maximum")},function(e,t,a){"use strict";e.exports=function e(t){return e.definition={type:"object",inline:a(1085),statements:!0,errors:"full",metaSchema:{type:"array",items:{type:"string",format:"regex"},uniqueItems:!0}},t.addKeyword("patternRequired",e.definition),t}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,p="key"+n,h="idx"+n,f="patternMatched"+n,m="dataProperties"+n,g="",b=e.opts.ownProperties;r+="var "+d+" = true;",b&&(r+=" var "+m+" = undefined;");var y=s;if(y)for(var v,_=-1,w=y.length-1;_<w;){v=y[_+=1],r+=" var "+f+" = false;  ",r+=b?" "+m+" = "+m+" || Object.keys("+u+"); for (var "+h+"=0; "+h+"<"+m+".length; "+h+"++) { var "+p+" = "+m+"["+h+"]; ":" for (var "+p+" in "+u+") { ",r+=" "+f+" = "+e.usePattern(v)+".test("+p+"); if ("+f+") break; } ";var x=e.util.escapeQuotes(v);r+=" if (!"+f+") { "+d+" = false;  var err =   ",!1!==e.createErrors?(r+=" { keyword: 'patternRequired' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { missingPattern: '"+x+"' } ",!1!==e.opts.messages&&(r+=" , message: 'should have property matching pattern \\'"+x+"\\'' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; }   ",l&&(g+="}",r+=" else { ")}return r+=""+g}},function(e,t,a){"use strict";var r=a(185);e.exports=function e(t){if(!t.RULES.keywords.switch||!t.RULES.keywords.if){var n=r.metaSchemaRef(t);return e.definition={inline:a(1087),statements:!0,errors:"full",metaSchema:{type:"array",items:{required:["then"],properties:{if:n,then:{anyOf:[{type:"boolean"},n]},continue:{type:"boolean"}},additionalProperties:!1,dependencies:{continue:["if"]}}}},t.addKeyword("switch",e.definition),t}}},function(e,t,a){"use strict";e.exports=function(e,t,a){var r=" ",n=e.level,i=e.dataLevel,s=e.schema[t],o=e.schemaPath+e.util.getProperty(t),c=e.errSchemaPath+"/"+t,l=!e.opts.allErrors,u="data"+(i||""),d="valid"+n,p="errs__"+n,h=e.util.copy(e),f="";h.level++;var m,g="valid"+h.level,b="ifPassed"+e.level,y=h.baseId;r+="var "+b+";";var v=s;if(v)for(var _,w=-1,x=v.length-1;w<x;){if(_=v[w+=1],w&&!m&&(r+=" if (!"+b+") { ",f+="}"),_.if&&e.util.schemaHasRules(_.if,e.RULES.all)){r+=" var "+p+" = errors;   ";var k=e.compositeRule;if(e.compositeRule=h.compositeRule=!0,h.createErrors=!1,h.schema=_.if,h.schemaPath=o+"["+w+"].if",h.errSchemaPath=c+"/"+w+"/if",r+="  "+e.validate(h)+" ",h.baseId=y,h.createErrors=!0,e.compositeRule=h.compositeRule=k,r+=" "+b+" = "+g+"; if ("+b+") {  ","boolean"==typeof _.then){if(!1===_.then){(P=P||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { caseIndex: "+w+" } ",!1!==e.opts.messages&&(r+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";var S=r;r=P.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" var "+g+" = "+_.then+"; "}else h.schema=_.then,h.schemaPath=o+"["+w+"].then",h.errSchemaPath=c+"/"+w+"/then",r+="  "+e.validate(h)+" ",h.baseId=y;r+="  } else {  errors = "+p+"; if (vErrors !== null) { if ("+p+") vErrors.length = "+p+"; else vErrors = null; } } "}else if(r+=" "+b+" = true;  ","boolean"==typeof _.then){if(!1===_.then){var P;(P=P||[]).push(r),r="",!1!==e.createErrors?(r+=" { keyword: 'switch' , dataPath: (dataPath || '') + "+e.errorPath+" , schemaPath: "+e.util.toQuotedString(c)+" , params: { caseIndex: "+w+" } ",!1!==e.opts.messages&&(r+=" , message: 'should pass \"switch\" keyword validation' "),e.opts.verbose&&(r+=" , schema: validate.schema"+o+" , parentSchema: validate.schema"+e.schemaPath+" , data: "+u+" "),r+=" } "):r+=" {} ";S=r;r=P.pop(),!e.compositeRule&&l?e.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" var "+g+" = "+_.then+"; "}else h.schema=_.then,h.schemaPath=o+"["+w+"].then",h.errSchemaPath=c+"/"+w+"/then",r+="  "+e.validate(h)+" ",h.baseId=y;m=_.continue}return r+=f+"var "+d+" = "+g+"; ",r=e.util.cleanUpCode(r)}},function(e,t,a){"use strict";var r=a(185);e.exports=function e(t){if(!t._opts.$data)return console.warn("keyword select requires $data option"),t;var a=r.metaSchemaRef(t),n=[];return e.definition={validate:function e(t,a,r){if(void 0===r.selectCases)throw new Error('keyword "selectCases" is absent');var n=i(r,!1),s=n.cases[t];if(void 0===s&&(s=n.default),"boolean"==typeof s)return s;var o=s(a);return o||(e.errors=s.errors),o},$data:!0,metaSchema:{type:["string","number","boolean","null"]}},t.addKeyword("select",e.definition),t.addKeyword("selectCases",{compile:function(e,t){var a=i(t);for(var r in e)a.cases[r]=s(e[r]);return function(){return!0}},valid:!0,metaSchema:{type:"object",additionalProperties:a}}),t.addKeyword("selectDefault",{compile:function(e,t){return i(t).default=s(e),function(){return!0}},valid:!0,metaSchema:a}),t;function i(e,t){var a;return n.some((function(t){if(t.parentSchema===e)return a=t,!0})),a||!1===t||(a={parentSchema:e,cases:{},default:!0},n.push(a)),a}function s(e){return"boolean"==typeof e?e:t.compile(e)}}},function(e,t,a){"use strict";e.exports=function e(t){var a={trimLeft:function(e){return e.replace(/^[\s]+/,"")},trimRight:function(e){return e.replace(/[\s]+$/,"")},trim:function(e){return e.trim()},toLowerCase:function(e){return e.toLowerCase()},toUpperCase:function(e){return e.toUpperCase()},toEnumCase:function(e,t){return t.hash[r(e)]||e}};return e.definition={type:"string",errors:!1,modifying:!0,valid:!0,compile:function(e,t){var n;if(-1!==e.indexOf("toEnumCase")){if(n={hash:{}},!t.enum)throw new Error('Missing enum. To use `transform:["toEnumCase"]`, `enum:[...]` is required.');for(var i=t.enum.length;i--;i){var s=t.enum[i];if("string"==typeof s){var o=r(s);if(n.hash[o])throw new Error('Invalid enum uniqueness. To use `transform:["toEnumCase"]`, all values must be unique when case insensitive.');n.hash[o]=s}}}return function(t,r,i,s){if(i){for(var o=0,c=e.length;o<c;o++)t=a[e[o]](t,n);i[s]=t}}},metaSchema:{type:"array",items:{type:"string",enum:["trimLeft","trimRight","trim","toLowerCase","toUpperCase","toEnumCase"]}}},t.addKeyword("transform",e.definition),t;function r(e){return e.toLowerCase()}}},function(e,t,a){"use strict";function r(e,t,a){return{keyword:"absolutePath",params:{absolutePath:t},message:a,parentSchema:e}}function n(e,t,a){return r(a,t,e?`The provided value ${JSON.stringify(t)} is not an absolute path!`:`A relative path is expected. However, the provided value ${JSON.stringify(t)} is an absolute path!`)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=e=>e.addKeyword("absolutePath",{errors:!0,type:"string",compile(e,t){function a(i){let s=!0;const o=i.includes("!"),c=e===/^(?:[A-Za-z]:\\|\/)/.test(i);return o&&(a.errors=[r(t,i,`The provided value ${JSON.stringify(i)} contains exclamation mark (!) which is not allowed because it's reserved for loader syntax.`)],s=!1),c||(a.errors=[n(e,i,t)],s=!1),s}return a.errors=[],a}})},function(e,t,a){"use strict";const r=Symbol("left"),n=Symbol("right");class i{static getOperator(e,t){return"left"===e?t?">":">=":t?"<":"<="}static formatRight(e,t,a){return!1===t?i.formatLeft(e,!t,!a):`should be ${i.getOperator("right",a)} ${e}`}static formatLeft(e,t,a){return!1===t?i.formatRight(e,!t,!a):`should be ${i.getOperator("left",a)} ${e}`}static formatRange(e,t,a,r,n){let s="should be";return s+=` ${i.getOperator(n?"left":"right",n?a:!a)} ${e} `,s+=n?"and":"or",s+=` ${i.getOperator(n?"right":"left",n?r:!r)} ${t}`,s}static getRangeValue(e,t){let a=t?1/0:-1/0,r=-1;const n=t?([e])=>e<=a:([e])=>e>=a;for(let t=0;t<e.length;t++)n(e[t])&&(a=e[t][0],r=t);return r>-1?e[r]:[1/0,!0]}constructor(){this[r]=[],this[n]=[]}left(e,t=!1){this[r].push([e,t])}right(e,t=!1){this[n].push([e,t])}format(e=!0){const[t,a]=i.getRangeValue(this[r],e),[s,o]=i.getRangeValue(this[n],!e);if(!Number.isFinite(t)&&!Number.isFinite(s))return"";const c=a?t+1:t;return c===(o?s-1:s)?`should be ${e?"":"!"}= ${c}`:Number.isFinite(t)&&!Number.isFinite(s)?i.formatLeft(t,e,a):!Number.isFinite(t)&&Number.isFinite(s)?i.formatRight(s,e,o):i.formatRange(t,s,a,o,e)}}e.exports=i},function(e){e.exports=JSON.parse('{"additionalProperties":true,"properties":{"name":{"description":"The filename template for the target file(s) (https://github.com/webpack-contrib/file-loader#name).","anyOf":[{"type":"string"},{"instanceof":"Function"}]},"outputPath":{"description":"A filesystem path where the target file(s) will be placed (https://github.com/webpack-contrib/file-loader#outputpath).","anyOf":[{"type":"string"},{"instanceof":"Function"}]},"publicPath":{"description":"A custom public path for the target file(s) (https://github.com/webpack-contrib/file-loader#publicpath).","anyOf":[{"type":"string"},{"instanceof":"Function"}]},"postTransformPublicPath":{"description":"A custom transformation function for post-processing the publicPath (https://github.com/webpack-contrib/file-loader#posttransformpublicpath).","instanceof":"Function"},"context":{"description":"A custom file context (https://github.com/webpack-contrib/file-loader#context).","type":"string"},"emitFile":{"description":"Enables/Disables emit files (https://github.com/webpack-contrib/file-loader#emitfile).","type":"boolean"},"regExp":{"description":"A Regular Expression to one or many parts of the target file path. The capture groups can be reused in the name property using [N] placeholder (https://github.com/webpack-contrib/file-loader#regexp).","anyOf":[{"type":"string"},{"instanceof":"RegExp"}]},"esModules":{"type":"boolean"}},"type":"object"}')},function(e,t,a){(function(t){!function(){var r;r=void 0!==e.exports?a(1094):window.PNGlib;var n=function(e,t){if("string"!=typeof e||e.length<15)throw"A hash of at least 15 characters is required.";this.defaults={background:[240,240,240,255],margin:.08,size:64,saturation:.7,brightness:.5,format:"png"},this.options="object"==typeof t?t:this.defaults,"number"==typeof arguments[1]&&(this.options.size=arguments[1]),arguments[2]&&(this.options.margin=arguments[2]),this.hash=e,this.background=this.options.background||this.defaults.background,this.size=this.options.size||this.defaults.size,this.format=this.options.format||this.defaults.format,this.margin=void 0!==this.options.margin?this.options.margin:this.defaults.margin;var a=parseInt(this.hash.substr(-7),16)/268435455,r=this.options.saturation||this.defaults.saturation,n=this.options.brightness||this.defaults.brightness;this.foreground=this.options.foreground||this.hsl2rgb(a,r,n)};n.prototype={background:null,foreground:null,hash:null,margin:null,size:null,format:null,image:function(){return this.isSvg()?new i(this.size,this.foreground,this.background):new r(this.size,this.size,256)},render:function(){var e,t,a=this.image(),r=this.size,n=Math.floor(r*this.margin),i=Math.floor((r-2*n)/5),s=Math.floor((r-5*i)/2),o=a.color.apply(a,this.background),c=a.color.apply(a,this.foreground);for(e=0;e<15;e++)t=parseInt(this.hash.charAt(e),16)%2?o:c,e<5?this.rectangle(2*i+s,e*i+s,i,i,t,a):e<10?(this.rectangle(1*i+s,(e-5)*i+s,i,i,t,a),this.rectangle(3*i+s,(e-5)*i+s,i,i,t,a)):e<15&&(this.rectangle(0*i+s,(e-10)*i+s,i,i,t,a),this.rectangle(4*i+s,(e-10)*i+s,i,i,t,a));return a},rectangle:function(e,t,a,r,n,i){var s,o;if(this.isSvg())i.rectangles.push({x:e,y:t,w:a,h:r,color:n});else for(s=e;s<e+a;s++)for(o=t;o<t+r;o++)i.buffer[i.index(s,o)]=n},hsl2rgb:function(e,t,a){return[255*(t=[a+=t*=a<.5?a:1-a,a-(e*=6)%1*t*2,a-=t*=2,a,a+e%1*t,a+t])[~~e%6],255*t[(16|e)%6],255*t[(8|e)%6]]},toString:function(e){return e?this.render().getDump():this.render().getBase64()},isSvg:function(){return this.format.match(/svg/i)}};var i=function(e,t,a){this.size=e,this.foreground=this.color.apply(this,t),this.background=this.color.apply(this,a),this.rectangles=[]};i.prototype={size:null,foreground:null,background:null,rectangles:null,color:function(e,t,a,r){var n=[e,t,a].map(Math.round);return n.push(r>=0&&r<=255?r/255:1),"rgba("+n.join(",")+")"},getDump:function(){var e,t,a,r=this.foreground,n=this.background,i=.005*this.size;for(t="<svg xmlns='http://www.w3.org/2000/svg' width='"+this.size+"' height='"+this.size+"' style='background-color:"+n+";'><g style='fill:"+r+"; stroke:"+r+"; stroke-width:"+i+";'>",e=0;e<this.rectangles.length;e++)(a=this.rectangles[e]).color!=n&&(t+="<rect  x='"+a.x+"' y='"+a.y+"' width='"+a.w+"' height='"+a.h+"'/>");return t+="</g></svg>"},getBase64:function(){if("function"==typeof btoa)return btoa(this.getDump());if(t)return new t(this.getDump(),"binary").toString("base64");throw"Cannot generate base64 output"}},void 0!==e.exports?e.exports=n:window.Identicon=n}()}).call(this,a(9).Buffer)},function(e,t,a){
/**
* A handy class to calculate color values.
*
* @version 1.0
* @author Robert Eisele <robert@xarg.org>
* @copyright Copyright (c) 2010, Robert Eisele
* @link http://www.xarg.org/2010/03/generate-client-side-png-files-using-javascript/
* @license http://www.opensource.org/licenses/bsd-license.php BSD License
*
*/
!function(){function t(e,t){for(var a=2;a<arguments.length;a++)for(var r=0;r<arguments[a].length;r++)e[t++]=arguments[a].charAt(r)}function a(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function r(e){return String.fromCharCode(255&e,e>>8&255)}var n=function(e,n,i){this.width=e,this.height=n,this.depth=i,this.pix_size=n*(e+1),this.data_size=2+this.pix_size+5*Math.floor((65534+this.pix_size)/65535)+4,this.ihdr_offs=0,this.ihdr_size=25,this.plte_offs=this.ihdr_offs+this.ihdr_size,this.plte_size=8+3*i+4,this.trns_offs=this.plte_offs+this.plte_size,this.trns_size=8+i+4,this.idat_offs=this.trns_offs+this.trns_size,this.idat_size=8+this.data_size+4,this.iend_offs=this.idat_offs+this.idat_size,this.iend_size=12,this.buffer_size=this.iend_offs+this.iend_size,this.buffer=new Array,this.palette=new Object,this.pindex=0;for(var s=new Array,o=0;o<this.buffer_size;o++)this.buffer[o]="\0";t(this.buffer,this.ihdr_offs,a(this.ihdr_size-12),"IHDR",a(e),a(n),"\b"),t(this.buffer,this.plte_offs,a(this.plte_size-12),"PLTE"),t(this.buffer,this.trns_offs,a(this.trns_size-12),"tRNS"),t(this.buffer,this.idat_offs,a(this.idat_size-12),"IDAT"),t(this.buffer,this.iend_offs,a(this.iend_size-12),"IEND");var c,l=30912;l+=31-l%31,t(this.buffer,this.idat_offs+8,(c=l,String.fromCharCode(c>>8&255,255&c)));for(o=0;(o<<16)-1<this.pix_size;o++){var u,d;o+65535<this.pix_size?(u=65535,d="\0"):(u=this.pix_size-(o<<16)-o,d=""),t(this.buffer,this.idat_offs+8+2+(o<<16)+(o<<2),d,r(u),r(~u))}for(o=0;o<256;o++){for(var p=o,h=0;h<8;h++)p=1&p?-306674912^p>>1&2147483647:p>>1&2147483647;s[o]=p}this.index=function(e,t){var a=t*(this.width+1)+e+1;return this.idat_offs+8+2+5*Math.floor(a/65535+1)+a},this.color=function(e,t,a,r){var n=(((r=r>=0?r:255)<<8|e)<<8|t)<<8|a;if(void 0===this.palette[n]){if(this.pindex==this.depth)return"\0";var i=this.plte_offs+8+3*this.pindex;this.buffer[i+0]=String.fromCharCode(e),this.buffer[i+1]=String.fromCharCode(t),this.buffer[i+2]=String.fromCharCode(a),this.buffer[this.trns_offs+8+this.pindex]=String.fromCharCode(r),this.palette[n]=String.fromCharCode(this.pindex++)}return this.palette[n]},this.getBase64=function(){var e,t,a,r,n,i,s,o=this.getDump(),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=o.length,u=0,d="";do{r=(e=o.charCodeAt(u))>>2,n=(3&e)<<4|(t=o.charCodeAt(u+1))>>4,a=o.charCodeAt(u+2),i=l<u+2?64:(15&t)<<2|a>>6,s=l<u+3?64:63&a,d+=c.charAt(r)+c.charAt(n)+c.charAt(i)+c.charAt(s)}while((u+=3)<l);return d},this.getDump=function(){for(var e=1,r=0,n=5552,i=0;i<this.height;i++)for(var o=-1;o<this.width;o++)r+=e+=this.buffer[this.index(o,i)].charCodeAt(0),0==(n-=1)&&(e%=65521,r%=65521,n=5552);function c(e,r,n){for(var i=-1,o=4;o<n-4;o+=1)i=s[255&(i^e[r+o].charCodeAt(0))]^i>>8&16777215;t(e,r+n-4,a(-1^i))}return e%=65521,r%=65521,t(this.buffer,this.idat_offs+this.idat_size-8,a(r<<16|e)),c(this.buffer,this.ihdr_offs,this.ihdr_size),c(this.buffer,this.plte_offs,this.plte_size),c(this.buffer,this.trns_offs,this.trns_size),c(this.buffer,this.idat_offs,this.idat_size),c(this.buffer,this.iend_offs,this.iend_size),"PNG\r\n\n"+this.buffer.join("")}};void 0!==e.exports?e.exports=n:window.PNGlib=n}()},function(e,t,a){"use strict";function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(5),s=a(40),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.mining_active=!1,this.mining_speed=100,this.mining_timer=null}var t,a,o,c,l;return t=e,(a=[{key:"startMining",value:function(e){var t=this;e.is_valid&&(this.mining_active&&clearInterval(this.mining_timer),this.mining_active=!0,this.mining_timer=setInterval((function(){t.mine(e)}),this.mining_speed))}},{key:"stopMining",value:function(){this.mining_active=!1,clearInterval(this.mining_timer)}},{key:"mine",value:(c=regeneratorRuntime.mark((function e(t){var a,r,n,o,c,l,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:if(t.is_valid){e.next=4;break}return e.abrupt("return");case 4:if(1!=t.block.id){e.next=6;break}return e.abrupt("return");case 6:if(a=Math.random().toString(),r=this.app.crypto.hash(this.app.wallet.returnPublicKey()+a),this.app.wallet.returnPublicKey(),this.app.wallet.returnPrivateKey(),!(n=new i.goldenticket(this.app)).isValidSolution(r,t)){e.next=32;break}if(this.stopMining(),o=n.formatSolutionForGoldenTicket(t,a),c=new i.transaction,!(this.app.wallet.wallet.inputs.length>1)){e.next=21;break}if(c.transaction.from=this.app.wallet.returnAdequateInputs(1e-4),null!=c.transaction.from){e.next=19;break}return e.abrupt("return");case 19:e.next=23;break;case 21:c.transaction.from=[],c.transaction.from.push(new i.slip(this.app.wallet.returnPublicKey(),0,1));case 23:for(c.transaction.type=1,c.msg=o,l=s(c.transaction.from[0].amt),u=1;u<c.transaction.from.length;u++)l=l.plus(s(c.transaction.from[u].amt));(d=l.minus(s(1e-4))).gt(0)?(c.transaction.to.push(new i.slip(this.app.wallet.returnPublicKey(),d.toFixed(8),0)),c.transaction.to[c.transaction.to.length-1].type=0):c.transaction.to.push(new i.slip(this.app.wallet.returnPublicKey(),"0.0",0)),c=this.app.wallet.signTransaction(c),this.app.network.propagateTransaction(c),this.stopMining();case 32:case"end":return e.stop()}}),e,this)})),l=function(){var e=this,t=arguments;return new Promise((function(a,n){var i=c.apply(e,t);function s(e){r(i,a,n,s,o,"next",e)}function o(e){r(i,a,n,s,o,"throw",e)}s(void 0)}))},function(e){return l.apply(this,arguments)})}])&&n(t.prototype,a),o&&n(t,o),e}();e.exports=o},function(e,t){function a(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.mods=[],this.uimods=[],this.mods_list=a,this.lowest_sync_bid=-1}var t,a,n,o,c;return t=e,(a=[{key:"isModuleActive",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0;t<this.mods.length;t++)if(1==this.mods[t].browser_active&&e==this.mods[t].name)return 1;return 0}},{key:"returnActiveModule",value:function(){for(var e=0;e<this.mods.length;e++)if(1==this.mods[e].browser_active)return this.mods[e];return null}},{key:"attachEvents",value:function(){for(var e=0;e<this.mods.length;e++)1==this.mods[e].browser_active&&this.mods[e].attachEvents(this.app);return null}},{key:"affixCallbacks",value:function(e,t,a,r,n){if(9!=e.transaction.type)for(var i=0;i<this.mods.length;i++)null!=a.module?1==this.mods[i].shouldAffixCallbackToModule(a.module,e)&&(r.push(this.mods[i].onConfirmation.bind(this.mods[i])),n.push(t)):1==this.mods[i].shouldAffixCallbackToModule("",e)&&(r.push(this.mods[i].onConfirmation.bind(this.mods[i])),n.push(t))}},{key:"handlePeerRequest",value:function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=0;r<this.mods.length;r++)try{this.mods[r].handlePeerRequest(this.app,e,t,a)}catch(e){console.log("handlePeerRequest Unknown Error: \n"+e)}}},{key:"initialize",value:(o=regeneratorRuntime.mark((function e(){var t,a,r,n,i,s,o,c,l,u,d,p=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.app.options&&this.app.options.modules)for(t=0;t<this.app.options.modules.length;t++)if(0==this.app.options.modules[t].active)for(a=0;a<this.mods.length;a++)this.mods[a].name===this.app.options.modules[t].name&&(this.mods.splice(a,1),a=this.mods.length+1);r=0,null==this.app.options.modules?this.app.options.modules=[]:(this.app.options.modules.length,this.mods.length),n=0;case 6:if(!(n<this.mods.length)){e.next=20;break}for(i=0,s=-1,o=0,c=0;c<this.app.options.modules.length;c++)this.mods[n].name==this.app.options.modules[c].name&&(i=1,s=c);if((0==i||0==this.app.options.modules[s].installed)&&(o=1),1!=o){e.next=17;break}return r=1,e.next=16,this.mods[n].installModule(this.app);case 16:-1!=s?(this.app.options.modules[s].installed=1,null==this.app.options.modules[s].version&&this.app.options.modules[s].version,null==this.app.options.modules[s].publisher&&this.app.options.modules[s].publisher,this.app.options.modules[s].active=1):this.app.options.modules.push({name:this.mods[n].name,installed:1,version:"",publisher:"",active:1});case 17:n++,e.next=6;break;case 20:1==r&&this.app.storage.saveOptions();case 21:if(l={},this.mods.forEach((function(e,t){l[e.name]&&(console.log("*****************************************************************"),console.log("***** WARNING: mod ".concat(e.name," is installed more than once! *****")),console.log("*****************************************************************")),l[e.name]=!0})),1==this.app.BROWSER)for(u=0;u<this.uimods.length;u++)this.mods.push(this.uimods[u]);d=0;case 25:if(!(d<this.mods.length)){e.next=31;break}return e.next=28,this.mods[d].initialize(this.app);case 28:d++,e.next=25;break;case 31:if(this.app.connection.on("handshake_complete",(function(e){p.onPeerHandshakeComplete(e)})),this.app.connection.on("connection_dropped",(function(e){p.onConnectionUnstable(e)})),this.app.connection.on("connection_up",(function(e){p.onConnectionStable(e)})),!this.app.BROWSER){e.next=41;break}return e.next=37,this.app.modules.initializeHTML();case 37:return e.next=39,this.app.modules.attachEvents();case 39:return e.next=41,this.app.modules.render();case 41:case"end":return e.stop()}}),e,this)})),c=function(){var e=this,t=arguments;return new Promise((function(a,r){var n=o.apply(e,t);function s(e){i(n,a,r,s,c,"next",e)}function c(e){i(n,a,r,s,c,"throw",e)}s(void 0)}))},function(){return c.apply(this,arguments)})},{key:"render",value:function(){for(var e=0;e<this.mods.length;e++)1==this.mods[e].browser_active&&this.mods[e].render(this.app);return null}},{key:"initializeHTML",value:function(){for(var e=0;e<this.mods.length;e++)1==this.mods[e].browser_active&&this.mods[e].initializeHTML(this.app);return null}},{key:"respondTo",value:function(e){return this.mods.filter((function(t){return null!=t.respondTo(e)}))}},{key:"getRespondTos",value:function(e){var t=[];return this.mods.forEach((function(a){var n=a.respondTo(e);null!=n&&t.push(r(r({},n),{},{modname:a.name}))})),t}},{key:"returnModulesBySubType",value:function(e){var t=[];return this.mods.forEach((function(a){a instanceof e&&t.push(a)})),t}},{key:"returnFirstModulBySubType",value:function(e){for(var t=0;t<this.mods.length;t++)if(this.mods[t]instanceof e)return this.mods[t];return null}},{key:"returnModulesByTypeName",value:function(e){}},{key:"returnFirstModuleByTypeName",value:function(e){for(var t=0;t<this.mods.length;t++)if(this.mods[t].constructor.name===e)return this.mods[t];return null}},{key:"returnFirstRespondTo",value:function(e){for(var t=0;t<this.mods.length;t++)if(this.mods[t].respondTo(e))return this.mods[t].respondTo(e);throw"Module responding to "+e+" not found"}},{key:"onNewBlock",value:function(e,t){for(var a=0;a<this.mods.length;a++)this.mods[a].onNewBlock(e,t)}},{key:"onChainReorganization",value:function(e,t,a,r){for(var n=0;n<this.mods.length;n++)this.mods[n].onChainReorganization(e,t,a,r);return null}},{key:"onPeerHandshakeComplete",value:function(e){for(var t=0;t<this.mods.length;t++)this.mods[t].onPeerHandshakeComplete(this.app,e)}},{key:"onConnectionStable",value:function(e){for(var t=0;t<this.mods.length;t++)this.mods[t].onConnectionStable(this.app,e)}},{key:"onConnectionUnstable",value:function(e){for(var t=0;t<this.mods.length;t++)this.mods[t].onConnectionUnstable(this.app,e)}},{key:"onWalletReset",value:function(){for(var e=0;e<this.mods.length;e++)this.mods[e].onWalletReset()}},{key:"returnModuleBySlug",value:function(e){for(var t=0;t<this.mods.length;t++)if(e===this.mods[t].returnSlug())return this.mods[t];return null}},{key:"returnModule",value:function(e){for(var t=0;t<this.mods.length;t++)if(e===this.mods[t].name)return this.mods[t];return null}},{key:"returnModuleIndex",value:function(e){for(var t=0;t<this.mods.length;t++)if(e===this.mods[t].name.toLowerCase())return t;return-1}},{key:"updateBlockchainSync",value:function(e,t){-1==this.lowest_sync_bid&&(this.lowest_sync_bid=e),(t-=this.lowest_sync_bid-1)<1&&(t=1),(e-=this.lowest_sync_bid-1)<1&&(e=1);var a=100;t>e&&(a=Math.floor(e/t*100));for(var r=0;r<this.mods.length;r++)this.mods[r].updateBlockchainSync(this.app,a);return null}},{key:"webServer",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=0;a<this.mods.length;a++)this.mods[a].webServer(this.app,e,t);return null}}])&&s(t.prototype,a),n&&s(t,n),e}();e.exports=o},function(e,t,a){"use strict";(function(t){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=a(40),o=a(5),c=a(19),l=function(){function e(a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=a||{},this.directory=c.join(t,"../../data/"),this.blocks=[],this.transactions=[],this.routing_work_needed=0,this.routing_work_in_mempool=0,this.transaction_size_cap=256e5,this.transaction_size_current=0,this.block_size_cap=1024e6,this.block_size_current=0,this.clearing_active=!1,this.accept_zero_fee_txs=!0,this.processing_active=!1,this.processing_speed=10,this.processing_timer=null,this.bundling_active=!1,this.bundling_speed=1e3,this.bundling_timer=null,this.transactions_hmap=[],this.transactions_inputs_hmap=[],this.downloads={},this.downloads_hmap={},this.downloading_active=0,this.block_sample_size=15}var a,r,l,u;return a=e,(r=[{key:"canBundleBlock",value:function(){if(1==this.app.blockchain.indexing_active)return 0;if(1==this.app.blockchain.loading_blocks_from_disk_active)return console.log("CANNOT PRODUCE AS LOADING FROM DISK"),0;if(1==this.app.network.downloading_active)return 0;if(1==this.bundling_active)return 0;if(1==this.processing_active)return 0;if(1==this.clearing_active)return 0;if(this.blocks.length>0)return 0;if(0==this.transactions.length&&this.app.blockchain.last_bid>1)return 0;if(this.app.options&&this.app.options.peers&&this.app.options.peers.length>0&&0==this.app.blockchain.index.blocks.length)return console.log("ERROR: 502843: refusing to self-generate block #1 as we have defined peers..."),0;var e=this.app.blockchain.returnLatestBlock();return this.routing_work_needed=null!=e?this.app.burnfee.returnWorkNeeded(e.block.ts,(new Date).getTime(),e.block.bf):this.app.burnfee.returnWorkNeeded(),this.routing_work_in_mempool=parseFloat(this.returnRoutingWorkAvailable()),console.log("Total Work Needed: "+this.routing_work_needed+" ---- available ---\x3e "+this.routing_work_in_mempool+"     ("+this.app.wallet.returnBalance()+")"),this.routing_work_in_mempool>=this.routing_work_needed?1:0}},{key:"calculateRoutingWorkAvailable",value:function(){this.routing_work_in_mempool=0;for(var e=0;e<this.transactions.length;e++)this.routing_work_in_mempool+=this.transactions[e].returnWorkAvailable()}},{key:"containsBlock",value:function(e){return null==e||null==e.block||0==e.is_valid?0:1==this.blocks_hmap[e.block.sig]?1:0}},{key:"containsTransaction",value:function(e){if(null==e)return 0;if(null==e.transaction)return 0;if(null==e.transaction.from)return 0;if(1==this.transactions_hmap[e.transaction.sig])return 1;for(var t=0;t<e.transaction.from.length;t++)if(e.transaction.from[t].isNonZeroAmount()){var a=e.transaction.from[t].returnSignatureSource();if(1==this.transactions_inputs_hmap[a])return 1}return 0}},{key:"containsGoldenTicket",value:function(){for(var e=0;e<this.transactions.length;e++)if(1==this.transactions[e].isGoldenTicket())return 1;return 0}},{key:"resetTransactions",value:function(){this.transactions=[],this.transactions_hmap=[],this.transactions_inputs_hmap=[],this.transaction_size_current=0}},{key:"initialize",value:function(){var e=this;if(1!=this.app.BROWSER&&1!=this.app.SPVMODE)try{this.bundling_timer=setInterval(n(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.canBundleBlock()){t.next=3;break}return t.next=3,e.bundleBlock();case 3:case"end":return t.stop()}}),t)}))),this.bundling_speed)}catch(e){console.log(e)}}},{key:"returnRoutingWorkNeeded",value:function(e){return this.routing_work_needed=this.app.burnfee.returnRoutingWorkNeeded(e),this.routing_work_needed}},{key:"returnRoutingWorkAvailable",value:function(){for(var e=s(0),t=0;t<this.transactions.length;t++)if(1==this.transactions[t].is_valid){var a=s(this.transactions[t].returnRoutingWorkAvailable(this.app,this.app.wallet.returnPublicKey()));1==this.transactions[t].transaction.type&&this.transactions[t].returnMessage().target!=this.app.blockchain.returnLatestBlockHash()&&(a=s(0)),e=e.plus(a)}return e.toFixed(8)}},{key:"addBlock",value:function(e){if(null==e)return!1;if(!e.is_valid)return!1;if(!(this.block_size_current+e.size>this.block_size_cap)){for(var t=0;t<this.blocks.length;t++)if(this.blocks[t].returnHash()==e.returnHash())return!1;return this.blocks.push(e),this.block_size_current+=e.size,this.processBlockQueue(),!0}console.log("ERROR 629384: mempool block queue at size limit")}},{key:"addTransaction",value:function(e){if(e.validate(this.app,this.app.blockchain.last_bid+1)||1==e.transaction.type){if(s(e.returnFees(this.app)).lte(0)){if(!s(e.returnFees(this.app)).eq(0))return void console.log("ERROR 481023: not importing invalid transaction with negative fees to mempool");if(0==this.accept_zero_fee_txs)return}if(1!=this.containsTransaction(e)){if(!(e.size>this.transaction_size_cap)){this.transactions_hmap[e.transaction.sig]=1;for(var t=0;t<e.transaction.from.length;t++)e.transaction.from[t].isNonZeroAmount()&&(this.transactions_inputs_hmap[e.transaction.from[t].returnSignatureSource()]=1);return this.transaction_size_current+=e.size,this.transactions.push(e),1}console.log("ERROR 582034: mempool asked to add tx over "+this.transaction_size_cap+" bytes")}else console.log("ERROR 582039: mempool already contains this transaction...")}else console.log("ERROR 471293: not importing invalid transaction to mempool")}},{key:"processBlockQueue",value:function(){var e=this;if(1!=this.processing_active){this.processing_active=1,this.blocks.sort((function(e,t){return e.block.id-t.block.id}));try{this.processing_timer=setInterval(n(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.blocks.length>0)){t.next=7;break}if(0!=e.app.blockchain.indexing_active){t.next=5;break}return a=e.blocks.shift(),t.next=5,e.app.blockchain.addBlockToBlockchain(a);case 5:t.next=9;break;case 7:e.processing_active=0,clearInterval(e.processing_timer);case 9:case"end":return t.stop()}}),t)}))),this.processing_speed)}catch(e){console.log(e)}}}},{key:"bundleBlock",value:(u=n(regeneratorRuntime.mark((function e(){var t,a,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.bundling_active){e.next=3;break}return console.log("ERROR 850293: currently bundling a block, cannot bundle new one."),e.abrupt("return");case 3:if(this.bundling_active=!0,1!=this.transactions.length){e.next=10;break}if(this.app.network.isPrivateNetwork()&&!this.app.network.isProductionNetwork()){e.next=10;break}if(1!=this.transactions[0].transaction.type){e.next=10;break}return console.log("WARNING 582034: refusing to spam public network with no-tx blocks."),this.bundling_active=!1,e.abrupt("return");case 10:if(0!=this.app.blockchain.index.blocks.length){e.next=17;break}if(!this.app.options){e.next=17;break}if(!this.app.options.peers){e.next=17;break}if(!(this.app.options.peers.length>0)){e.next=17;break}return console.log("WARNING 582034: refusing to spam public network with no-tx blocks."),this.bundling_active=!1,e.abrupt("return");case 17:e.prev=17,t=new o.block(this.app),a=this.app.blockchain.returnLatestBlock(),t.block.creator=this.app.wallet.returnPublicKey(),null!=a&&(t.block.prevbsh=a.returnHash()),r=0;case 23:if(!(r<this.transactions.length)){e.next=37;break}if(n=1,i=0,1!=this.transactions[r].transaction.type){e.next=32;break}if(this.transactions[r].returnMessage().target==a.returnHash()){e.next=32;break}return this.transactions.splice(r,1),this.bundling_active=!1,i=1,e.abrupt("return");case 32:1==n&&0==this.transactions[r].is_valid&&(console.log("deciding not to add this TX: "+JSON.stringify(this.transactions[r].transaction)),n=0),1==n?t.transactions.push(this.transactions[r]):0==i&&0==this.transactions[r].is_valid&&(this.transactions.splice(r,1),i=1,r--);case 34:r++,e.next=23;break;case 37:return e.next=39,t.bundle(a);case 39:if(!(0==t.transactions.length&&t.block.id>10)){e.next=46;break}return console.log("ERROR 51958: produced block with zero transactions. Aborting."),this.resetTransactions(),this.app.miner.stopMining(),this.app.miner.startMining(this.app.blockchain.returnLatestBlock()),this.bundling_active=!1,e.abrupt("return");case 46:if(0!=t.is_valid){e.next=50;break}return console.log("ERROR 105812: block invalid when bundling. Aborting block bundling..."),this.bundling_active=!1,e.abrupt("return");case 50:this.addBlock(t),e.next=56;break;case 53:e.prev=53,e.t0=e.catch(17),console.log("ERROR 781029: unexpected problem bundling block in mempool: "+e.t0);case 56:this.bundling_active=!1;case 57:case"end":return e.stop()}}),e,this,[[17,53]])}))),function(){return u.apply(this,arguments)})},{key:"removeBlock",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!=e){this.clearing_active=!0;for(var t=this.blocks.length-1;t>=0;t--)this.blocks[t].returnHash()==e.returnHash()&&(this.block_size_current-=this.blocks[t].size,this.blocks.splice(t,1));this.clearing_active=!1}}},{key:"removeBlockAndTransactions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!=e){this.clearing_active=!0;for(var t=[],a=[],r=0;r<this.transactions.length;r++)t[this.transactions[r].transaction.sig]=r;for(var n=0;n<e.transactions.length;n++){var i=t[e.transactions[n].transaction.sig];null!=i&&(t[e.transactions[n].transaction.sig]=-1,this.transaction_size_current-=this.transactions[i].size)}for(var s=0;s<this.transactions.length;s++)if(1==this.transactions[s].transaction.type&&this.transactions[s].transaction.ts<e.block.ts){var o=t[this.transactions[s].transaction.sig];if(null!=o&&-1!=t[this.transactions[s].transaction.sig]){t[this.transactions[s].transaction.sig]=-1,this.transaction_size_current-=this.transactions[o].size,delete this.transactions_hmap[this.transactions[s].transaction.sig];for(var c=0;c<this.transactions[s].transaction.from.length;c++)delete this.transactions_inputs_hmap[this.transactions[s].transaction.from[c].returnSignatureSource()]}}for(var l=0;l<this.transactions.length;l++)t[this.transactions[l].transaction.sig]>-1&&a.push(this.transactions[l]);this.transactions=a;for(var u=0;u<e.transactions.length;u++){delete this.transactions_hmap[e.transactions[u].transaction.sig];for(var d=0;d<e.transactions[u].transaction.from.length;d++)delete this.transactions_inputs_hmap[e.transactions[u].transaction.from[d].returnSignatureSource()]}this.removeBlock(e),this.clearing_active=!1}}}])&&i(a.prototype,r),l&&i(a,l),e}();e.exports=l}).call(this,"/")},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=a(5),o=a(186),c=(a(1099).set,function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t||{},this.peers=[],this.peer_monitor_timer=null,this.peer_monitor_timer_speed=1e4,this.peer_monitor_connection_timeout=5e3,this.peers_connected=0,this.peers_connected_limit=2048,this.sendblks=1,this.sendtxs=1,this.sendgts=1,this.receiveblks=1,this.receivetxs=1,this.receivegts=1,this.sockets=[],this.downloads={},this.downloads_hmap={},this.downloading_active=0,this.block_sample_size=15,this.dead_peers=[]}var t,a,r,c,l;return t=e,(a=[{key:"updatePeersWithWatchedPublicKeys",value:function(){for(var e=this.app.keys.returnWatchedPublicKeys(),t=0;t<this.peers.length;t++)this.app.network.peers[t].sendRequestWithCallback("keylist",e,(function(){}))}},{key:"initialize",value:function(){var e=this;if(this.app.options&&this.app.options.server&&(void 0!==this.app.options.server.receiveblks&&0===this.app.options.server.receiveblks&&(this.receiveblks=0),void 0!==this.app.options.server.receivetxs&&0===this.app.options.server.receivetxs&&(this.receivetxs=0),void 0!==this.app.options.server.receivegts&&0===this.app.options.server.receivegts&&(this.receivegts=0),void 0!==this.app.options.server.sendblks&&0===this.app.options.server.sendblks&&(this.sendblks=0),void 0!==this.app.options.server.sendtxs&&0===this.app.options.server.sendtxs&&(this.sendtxs=0),void 0!==this.app.options.server.sendgts&&0===this.app.options.server.sendgts&&(this.sendgts=0)),null!=this.app.options.peers)for(var t=0;t<this.app.options.peers.length;t++)console.log("CONNECTING TO: "+JSON.stringify(this.app.options.peers[t])),this.connectToPeer(JSON.stringify(this.app.options.peers[t]));this.app.connection.on("peer_disconnect",(function(t){e.cleanupDisconnectedSocket(t)})),this.peer_monitor_timer=setInterval((function(){e.pollPeers(e.app.network.peers,e.app)}),this.peer_monitor_timer_speed)}},{key:"pollPeers",value:function(e,t){var a=this,r=t.network;e.forEach((function(e){e.socket.connected||a.dead_peers.includes(e)||a.cleanupDisconnectedSocket(e)}));var n=this.peer_monitor_timer_speed-this.peer_monitor_connection_timeout;this.dead_peers.forEach((function(e){setTimeout((function(){r.connectToPeer(JSON.stringify(e))}),n)})),this.dead_peers=[]}},{key:"cleanupDisconnectedSocket",value:function(e){for(var t=0;t<this.peers.length;t++)if(this.peers[t]==e){var a=-1;if(null!=this.app.options.peers)for(var r=0;r<this.app.options.peers.length;r++)this.app.options.peers[r].host==e.peer.host&&this.app.options.peers[r].port==e.peer.port&&(a=r);if(null!=this.app.options.peers&&void 0!==e.peer.endpoint)for(var n=0;n<this.app.options.peers.length;n++)this.app.options.peers[n].host==e.peer.endpoint.host&&this.app.options.peers[n].port==e.peer.endpoint.port&&(a=n);if(null!=this.app.options.peers&&null!=this.app.options.dns)for(var i=0;i<this.app.options.dns.length;i++)this.app.options.dns[i].host==e.peer.host&&this.app.options.dns[i].port==e.peer.port&&(a=i);a>=0&&this.dead_peers.push(this.app.options.peers[a]),this.peers[t].deletePeer(),this.peers.splice(t,1),t--,this.peers_connected--}}},{key:"connectToPeer",value:function(e){var t="",a="",r={};r.peer=JSON.parse(e),null==r.peer.protocol&&(r.peer.protocol="http"),null!=r.peer.host&&(t=r.peer.host),null!=r.peer.port&&(a=r.peer.port);for(var n=0;n<this.peers.length;n++)if(this.peers[n].peer.host==t&&this.peers[n].peer.port==a)return void console.log("already connected to peer...");if(null!=this.app.options.server){if("localhost"==t)return;if(this.app.options.server.host==t&&this.app.options.server.port==a)return void console.log("ERROR 185203: not adding "+this.app.options.server.host+" as peer since it is our server.");if(null!=this.app.options.server.endpoint&&this.app.options.server.endpoint.host==t&&this.app.options.server.endpoint.port==a)return void console.log("ERROR 185204: not adding "+this.app.options.server.host+" as peer since it is our server.")}var i=new s.peer(this.app,JSON.stringify(r));i.connect(0),this.peers.push(i),this.peers_connected++,console.log("connect to peer...")}},{key:"addRemotePeer",value:function(e){if(this.peers_connected>=this.peers_connected_limit)console.log("ERROR 757594: denying request to remote peer as server overloaded...");else{for(var t=0;t<this.peers.length;t++)if(this.peers[t].socket_id==e.id)return void console.log("error adding socket: already in pool");var a=new s.peer(this.app);a.socket=e,a.connect(1),this.peers.push(a),this.peers_connected++}}},{key:"propagateBlock",value:function(e){if(1!=this.app.BROWSER&&null!=e&&0!=e.is_valid)for(var t={bhash:e.returnHash(),bid:e.block.id},a=0;a<this.peers.length;a++)1==this.peers[a].handshake_completed&&1==this.peers[a].peer.sendblks&&this.peers[a].sendRequest("block",t)}},{key:"propagateTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"transaction",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!=e&&e.is_valid){if(1==e.transaction.type&&(t="golden ticket"),e.transaction.from[0].add==this.app.wallet.returnPublicKey()&&(this.app.wallet.addTransactionToPending(e),this.app.connection.emit("update_balance",this.app.wallet)),0==this.app.BROWSER&&0==this.app.SPVMODE&&1!=this.app.mempool.containsTransaction(e)){if(!this.app.mempool.addTransaction(e))return console.log("ERROR 810299: balking at propagating bad transaction"),void console.log("BAD TX: "+JSON.stringify(e.transaction));if(1==this.app.mempool.canBundleBlock())return 1}for(var r=e.returnFees(this.app),n=0;n<e.transaction.path.length;n++)r/=2;this.sendTransactionToPeers(e,t,r,a)}}},{key:"propagateOffchainTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"offchain transaction",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null!=e&&e.is_valid){for(var r=e.returnFees(this.app),n=0;n<e.transaction.path.length;n++)r/=2;this.sendTransactionToPeers(e,t,r,a),this.peers.forEach((function(a){if(!a.inTransactionPath(e)&&null!=a.returnPublicKey()){var r=a.addPathToTransaction(e);a.sendTransaction(t,JSON.stringify(r.transaction))}}))}}},{key:"sendTransaction",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.peers.length-1;a>=0;a--)1==this.peers[a].peer.receivetxs&&this.peers[a].sendRequest(e,t)}},{key:"sendPeerRequest",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,r=this.peers.length-1;r>=0;r--)this.peers[r]==a&&this.peers[r].sendRequest(e,t)}},{key:"sendRequest",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=this.peers.length-1;a>=0;a--)this.peers[a].sendRequest(e,t)}},{key:"sendRequestWithCallback",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,r=this.peers.length-1;r>=0;r--)this.peers[r].sendRequestWithCallback(e,t,a)}},{key:"sendTransactionToPeers",value:function(e,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.peers.forEach((function(r){if(0!=r.peer.receivetxs&&!r.inTransactionPath(e)&&null!=r.returnPublicKey()){var n=r.addPathToTransaction(e);a?r.sendRequestWithCallback(t,JSON.stringify(n.transaction),a):r.sendRequest(t,JSON.stringify(n.transaction))}}))}},{key:"propagateTransactionWithCallback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.propagateTransaction(e,"transaction",t)}},{key:"addBlockHashToQueue",value:function(e,t){if(1!=this.app.blockchain.isHashIndexed(t)&&1!=this.downloads_hmap[t]){var a=e.returnPublicKey();null==this.downloads[a]?(this.downloads[a]=[],this.downloads[a].push(t)):this.downloads[a].push(t),this.downloads_hmap[t]=1}}},{key:"fetchBlocks",value:(l=n(regeneratorRuntime.mark((function e(){var t,a,r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=this.downloading_active){e.next=2;break}return e.abrupt("return");case 2:this.downloading_active=1,e.t0=regeneratorRuntime.keys(this.downloads);case 4:if((e.t1=e.t0()).done){e.next=36;break}if(t=e.t1.value,null==(a=this.app.network.returnPeerByPublicKey(t))){e.next=33;break}case 8:if(!(this.downloads[t].length>0)){e.next=33;break}r=0;case 10:if(!(r<this.downloads[t].length&&-1!=r)){e.next=31;break}return n=this.app.wallet.returnPublicKey(),i=a.returnBlockURL(this.downloads[t][r]),e.prev=13,e.next=16,this.fetchBlock("".concat(i,"/").concat(this.downloads[t][r],"/").concat(n),this.downloads[t][r]);case 16:this.downloads[t].shift(),e.next=29;break;case 19:if(e.prev=19,e.t2=e.catch(13),-1!=e.t2){e.next=26;break}return this.downloading_active=0,e.abrupt("return");case 26:console.log("err: "+JSON.stringify(e.t2)),this.downloads[t].shift(),this.downloading_active=0;case 29:e.next=10;break;case 31:e.next=8;break;case 33:delete this.downloads[t],e.next=4;break;case 36:this.downloading_active=0,this.app.mempool.processBlockQueue();case 38:case"end":return e.stop()}}),e,this,[[13,19]])}))),function(){return l.apply(this,arguments)})},{key:"fetchBlock",value:(c=n(regeneratorRuntime.mark((function e(t,a){var r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){o(t,{}).then((function(t){200!==t.status?(console.log("ERROR FETCHING BLOCK 11111. Status Code: ",t.status),n(200)):t.text().then((function(t){for(var n=r.app.storage.convertBlockStringToHeadersAndTransactionsJSON(t),i=new s.block(r.app,JSON.parse(n.headers)),o=0;o<n.transactions.length;o++)i.transactions.push(new s.transaction(JSON.parse(n.transactions[o])));r.app.mempool.addBlock(i),delete r.downloads_hmap[a],e()}))})).catch((function(e){console.log("Fetch Error :-S",e),n(-1)}))})));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return c.apply(this,arguments)})},{key:"returnPeerByPublicKey",value:function(e){for(var t=0;t<this.peers.length;t++){var a=this.peers[t];if(a.peer.publickey==e)return a}return null}},{key:"isPrivateNetwork",value:function(){for(var e=0;e<this.peers.length;e++)if(this.peers[e].isConnected())return!1;return null==this.app.options.peers}},{key:"isProductionNetwork",value:function(){return this.app.BROWSER,!1}},{key:"isConnected",value:function(){for(var e=0;e<this.peers.length;e++)if(1==this.peers[e].isConnected())return 1;return 0}},{key:"hasPeer",value:function(e){for(var t=0;t<this.peers.length;t++)if(this.peers[t].returnPublicKey()==e)return!0;return!1}},{key:"close",value:function(){console.log("closing network connections");for(var e=0;e<this.peers.length;e++)this.peers[e].socket&&delete this.peers[e].socket}}])&&i(t.prototype,a),r&&i(t,r),e}());e.exports=c},function(e,t,a){var r,n;
/*! @preserve
 * numeral.js
 * version : 2.0.6
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */void 0===(n="function"==typeof(r=function(){var e,t,a,r,n,i={},s={},o={currentLocale:"en",zeroFormat:null,nullFormat:null,defaultFormat:"0,0",scalePercentBy100:!0},c={currentLocale:o.currentLocale,zeroFormat:o.zeroFormat,nullFormat:o.nullFormat,defaultFormat:o.defaultFormat,scalePercentBy100:o.scalePercentBy100};function l(e,t){this._input=e,this._value=t}return(e=function(a){var r,n,s,o;if(e.isNumeral(a))r=a.value();else if(0===a||void 0===a)r=0;else if(null===a||t.isNaN(a))r=null;else if("string"==typeof a)if(c.zeroFormat&&a===c.zeroFormat)r=0;else if(c.nullFormat&&a===c.nullFormat||!a.replace(/[^0-9]+/g,"").length)r=null;else{for(n in i)if((o="function"==typeof i[n].regexps.unformat?i[n].regexps.unformat():i[n].regexps.unformat)&&a.match(o)){s=i[n].unformat;break}r=(s=s||e._.stringToNumber)(a)}else r=Number(a)||null;return new l(a,r)}).version="2.0.6",e.isNumeral=function(e){return e instanceof l},e._=t={numberToFormat:function(t,a,r){var n,i,o,c,l,u,d,p,h=s[e.options.currentLocale],f=!1,m=!1,g="",b="",y=!1;if(t=t||0,o=Math.abs(t),e._.includes(a,"(")?(f=!0,a=a.replace(/[\(|\)]/g,"")):(e._.includes(a,"+")||e._.includes(a,"-"))&&(u=e._.includes(a,"+")?a.indexOf("+"):t<0?a.indexOf("-"):-1,a=a.replace(/[\+|\-]/g,"")),e._.includes(a,"a")&&(i=!!(i=a.match(/a(k|m|b|t)?/))&&i[1],e._.includes(a," a")&&(g=" "),a=a.replace(new RegExp(g+"a[kmbt]?"),""),o>=1e12&&!i||"t"===i?(g+=h.abbreviations.trillion,t/=1e12):o<1e12&&o>=1e9&&!i||"b"===i?(g+=h.abbreviations.billion,t/=1e9):o<1e9&&o>=1e6&&!i||"m"===i?(g+=h.abbreviations.million,t/=1e6):(o<1e6&&o>=1e3&&!i||"k"===i)&&(g+=h.abbreviations.thousand,t/=1e3)),e._.includes(a,"[.]")&&(m=!0,a=a.replace("[.]",".")),c=t.toString().split(".")[0],l=a.split(".")[1],d=a.indexOf(","),n=(a.split(".")[0].split(",")[0].match(/0/g)||[]).length,l?(e._.includes(l,"[")?(l=(l=l.replace("]","")).split("["),b=e._.toFixed(t,l[0].length+l[1].length,r,l[1].length)):b=e._.toFixed(t,l.length,r),c=b.split(".")[0],b=e._.includes(b,".")?h.delimiters.decimal+b.split(".")[1]:"",m&&0===Number(b.slice(1))&&(b="")):c=e._.toFixed(t,0,r),g&&!i&&Number(c)>=1e3&&g!==h.abbreviations.trillion)switch(c=String(Number(c)/1e3),g){case h.abbreviations.thousand:g=h.abbreviations.million;break;case h.abbreviations.million:g=h.abbreviations.billion;break;case h.abbreviations.billion:g=h.abbreviations.trillion}if(e._.includes(c,"-")&&(c=c.slice(1),y=!0),c.length<n)for(var v=n-c.length;v>0;v--)c="0"+c;return d>-1&&(c=c.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+h.delimiters.thousands)),0===a.indexOf(".")&&(c=""),p=c+b+(g||""),f?p=(f&&y?"(":"")+p+(f&&y?")":""):u>=0?p=0===u?(y?"-":"+")+p:p+(y?"-":"+"):y&&(p="-"+p),p},stringToNumber:function(e){var t,a,r,n=s[c.currentLocale],i=e,o={thousand:3,million:6,billion:9,trillion:12};if(c.zeroFormat&&e===c.zeroFormat)a=0;else if(c.nullFormat&&e===c.nullFormat||!e.replace(/[^0-9]+/g,"").length)a=null;else{for(t in a=1,"."!==n.delimiters.decimal&&(e=e.replace(/\./g,"").replace(n.delimiters.decimal,".")),o)if(r=new RegExp("[^a-zA-Z]"+n.abbreviations[t]+"(?:\\)|(\\"+n.currency.symbol+")?(?:\\))?)?$"),i.match(r)){a*=Math.pow(10,o[t]);break}a*=(e.split("-").length+Math.min(e.split("(").length-1,e.split(")").length-1))%2?1:-1,e=e.replace(/[^0-9\.]+/g,""),a*=Number(e)}return a},isNaN:function(e){return"number"==typeof e&&isNaN(e)},includes:function(e,t){return-1!==e.indexOf(t)},insert:function(e,t,a){return e.slice(0,a)+t+e.slice(a)},reduce:function(e,t){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof t)throw new TypeError(t+" is not a function");var a,r=Object(e),n=r.length>>>0,i=0;if(3===arguments.length)a=arguments[2];else{for(;i<n&&!(i in r);)i++;if(i>=n)throw new TypeError("Reduce of empty array with no initial value");a=r[i++]}for(;i<n;i++)i in r&&(a=t(a,r[i],i,r));return a},multiplier:function(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)},correctionFactor:function(){var e=Array.prototype.slice.call(arguments);return e.reduce((function(e,a){var r=t.multiplier(a);return e>r?e:r}),1)},toFixed:function(e,t,a,r){var n,i,s,o,c=e.toString().split("."),l=t-(r||0);return n=2===c.length?Math.min(Math.max(c[1].length,l),t):l,s=Math.pow(10,n),o=(a(e+"e+"+n)/s).toFixed(n),r>t-n&&(i=new RegExp("\\.?0{1,"+(r-(t-n))+"}$"),o=o.replace(i,"")),o}},e.options=c,e.formats=i,e.locales=s,e.locale=function(e){return e&&(c.currentLocale=e.toLowerCase()),c.currentLocale},e.localeData=function(e){if(!e)return s[c.currentLocale];if(e=e.toLowerCase(),!s[e])throw new Error("Unknown locale : "+e);return s[e]},e.reset=function(){for(var e in o)c[e]=o[e]},e.zeroFormat=function(e){c.zeroFormat="string"==typeof e?e:null},e.nullFormat=function(e){c.nullFormat="string"==typeof e?e:null},e.defaultFormat=function(e){c.defaultFormat="string"==typeof e?e:"0.0"},e.register=function(e,t,a){if(t=t.toLowerCase(),this[e+"s"][t])throw new TypeError(t+" "+e+" already registered.");return this[e+"s"][t]=a,a},e.validate=function(t,a){var r,n,i,s,o,c,l,u;if("string"!=typeof t&&(t+="",console.warn&&console.warn("Numeral.js: Value is not string. It has been co-erced to: ",t)),(t=t.trim()).match(/^\d+$/))return!0;if(""===t)return!1;try{l=e.localeData(a)}catch(t){l=e.localeData(e.locale())}return i=l.currency.symbol,o=l.abbreviations,r=l.delimiters.decimal,n="."===l.delimiters.thousands?"\\.":l.delimiters.thousands,!(null!==(u=t.match(/^[^\d]+/))&&(t=t.substr(1),u[0]!==i)||null!==(u=t.match(/[^\d]+$/))&&(t=t.slice(0,-1),u[0]!==o.thousand&&u[0]!==o.million&&u[0]!==o.billion&&u[0]!==o.trillion)||(c=new RegExp(n+"{2}"),t.match(/[^\d.,]/g)||(s=t.split(r)).length>2||(s.length<2?!s[0].match(/^\d+.*\d$/)||s[0].match(c):1===s[0].length?!s[0].match(/^\d+$/)||s[0].match(c)||!s[1].match(/^\d+$/):!s[0].match(/^\d+.*\d$/)||s[0].match(c)||!s[1].match(/^\d+$/))))},e.fn=l.prototype={clone:function(){return e(this)},format:function(t,a){var r,n,s,o=this._value,l=t||c.defaultFormat;if(a=a||Math.round,0===o&&null!==c.zeroFormat)n=c.zeroFormat;else if(null===o&&null!==c.nullFormat)n=c.nullFormat;else{for(r in i)if(l.match(i[r].regexps.format)){s=i[r].format;break}n=(s=s||e._.numberToFormat)(o,l,a)}return n},value:function(){return this._value},input:function(){return this._input},set:function(e){return this._value=Number(e),this},add:function(e){var a=t.correctionFactor.call(null,this._value,e);return this._value=t.reduce([this._value,e],(function(e,t,r,n){return e+Math.round(a*t)}),0)/a,this},subtract:function(e){var a=t.correctionFactor.call(null,this._value,e);return this._value=t.reduce([e],(function(e,t,r,n){return e-Math.round(a*t)}),Math.round(this._value*a))/a,this},multiply:function(e){return this._value=t.reduce([this._value,e],(function(e,a,r,n){var i=t.correctionFactor(e,a);return Math.round(e*i)*Math.round(a*i)/Math.round(i*i)}),1),this},divide:function(e){return this._value=t.reduce([this._value,e],(function(e,a,r,n){var i=t.correctionFactor(e,a);return Math.round(e*i)/Math.round(a*i)})),this},difference:function(t){return Math.abs(e(this._value).subtract(t).value())}},e.register("locale","en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),e.register("format","bps",{regexps:{format:/(BPS)/,unformat:/(BPS)/},format:function(t,a,r){var n,i=e._.includes(a," BPS")?" ":"";return t*=1e4,a=a.replace(/\s?BPS/,""),n=e._.numberToFormat(t,a,r),e._.includes(n,")")?((n=n.split("")).splice(-1,0,i+"BPS"),n=n.join("")):n=n+i+"BPS",n},unformat:function(t){return+(1e-4*e._.stringToNumber(t)).toFixed(15)}}),r={base:1024,suffixes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},n="("+(n=(a={base:1e3,suffixes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}).suffixes.concat(r.suffixes.filter((function(e){return a.suffixes.indexOf(e)<0}))).join("|")).replace("B","B(?!PS)")+")",e.register("format","bytes",{regexps:{format:/([0\s]i?b)/,unformat:new RegExp(n)},format:function(t,n,i){var s,o,c,l=e._.includes(n,"ib")?r:a,u=e._.includes(n," b")||e._.includes(n," ib")?" ":"";for(n=n.replace(/\s?i?b/,""),s=0;s<=l.suffixes.length;s++)if(o=Math.pow(l.base,s),c=Math.pow(l.base,s+1),null===t||0===t||t>=o&&t<c){u+=l.suffixes[s],o>0&&(t/=o);break}return e._.numberToFormat(t,n,i)+u},unformat:function(t){var n,i,s=e._.stringToNumber(t);if(s){for(n=a.suffixes.length-1;n>=0;n--){if(e._.includes(t,a.suffixes[n])){i=Math.pow(a.base,n);break}if(e._.includes(t,r.suffixes[n])){i=Math.pow(r.base,n);break}}s*=i||1}return s}}),e.register("format","currency",{regexps:{format:/(\$)/},format:function(t,a,r){var n,i,s=e.locales[e.options.currentLocale],o={before:a.match(/^([\+|\-|\(|\s|\$]*)/)[0],after:a.match(/([\+|\-|\)|\s|\$]*)$/)[0]};for(a=a.replace(/\s?\$\s?/,""),n=e._.numberToFormat(t,a,r),t>=0?(o.before=o.before.replace(/[\-\(]/,""),o.after=o.after.replace(/[\-\)]/,"")):t<0&&!e._.includes(o.before,"-")&&!e._.includes(o.before,"(")&&(o.before="-"+o.before),i=0;i<o.before.length;i++)switch(o.before[i]){case"$":n=e._.insert(n,s.currency.symbol,i);break;case" ":n=e._.insert(n," ",i+s.currency.symbol.length-1)}for(i=o.after.length-1;i>=0;i--)switch(o.after[i]){case"$":n=i===o.after.length-1?n+s.currency.symbol:e._.insert(n,s.currency.symbol,-(o.after.length-(1+i)));break;case" ":n=i===o.after.length-1?n+" ":e._.insert(n," ",-(o.after.length-(1+i)+s.currency.symbol.length-1))}return n}}),e.register("format","exponential",{regexps:{format:/(e\+|e-)/,unformat:/(e\+|e-)/},format:function(t,a,r){var n=("number"!=typeof t||e._.isNaN(t)?"0e+0":t.toExponential()).split("e");return a=a.replace(/e[\+|\-]{1}0/,""),e._.numberToFormat(Number(n[0]),a,r)+"e"+n[1]},unformat:function(t){var a=e._.includes(t,"e+")?t.split("e+"):t.split("e-"),r=Number(a[0]),n=Number(a[1]);return n=e._.includes(t,"e-")?n*=-1:n,e._.reduce([r,Math.pow(10,n)],(function(t,a,r,n){var i=e._.correctionFactor(t,a);return t*i*(a*i)/(i*i)}),1)}}),e.register("format","ordinal",{regexps:{format:/(o)/},format:function(t,a,r){var n=e.locales[e.options.currentLocale],i=e._.includes(a," o")?" ":"";return a=a.replace(/\s?o/,""),i+=n.ordinal(t),e._.numberToFormat(t,a,r)+i}}),e.register("format","percentage",{regexps:{format:/(%)/,unformat:/(%)/},format:function(t,a,r){var n,i=e._.includes(a," %")?" ":"";return e.options.scalePercentBy100&&(t*=100),a=a.replace(/\s?\%/,""),n=e._.numberToFormat(t,a,r),e._.includes(n,")")?((n=n.split("")).splice(-1,0,i+"%"),n=n.join("")):n=n+i+"%",n},unformat:function(t){var a=e._.stringToNumber(t);return e.options.scalePercentBy100?.01*a:a}}),e.register("format","time",{regexps:{format:/(:)/,unformat:/(:)/},format:function(e,t,a){var r=Math.floor(e/60/60),n=Math.floor((e-60*r*60)/60),i=Math.round(e-60*r*60-60*n);return r+":"+(n<10?"0"+n:n)+":"+(i<10?"0"+i:i)},unformat:function(e){var t=e.split(":"),a=0;return 3===t.length?(a+=60*Number(t[0])*60,a+=60*Number(t[1]),a+=Number(t[2])):2===t.length&&(a+=60*Number(t[0]),a+=Number(t[1])),Number(a)}}),e})?r.call(t,a,t,e):r)||(e.exports=n)},function(e,t){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";a(this,e),this.from=t,this.to=r,this.sig=n}},function(e,t,a){(function(t){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=a(1102),c=(a(423).fixHammerjsDeltaIssue,a(5)),l=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(i(this,e),this.app=t||{},this.peer={},this.peer.host="localhost",this.peer.port="12101",this.peer.publickey="",this.peer.version="",this.peer.protocol="http",this.peer.synctype="full",this.peer.initiator=0,this.peer.modules=[],this.peer.sockets={},this.peer.receiveblks=1,this.peer.receivetxs=1,this.peer.receivegts=1,this.handle_peer_requests=1,this.peer.sendblks=1,this.peer.sendtxs=1,this.peer.sendgts=1,this.peer.minfee=.001,this.peer.endpoint={},this.peer.endpoint.host="localhost",this.peer.endpoint.port="12101",this.peer.endpoint.publickey="",this.peer.endpoint.protocol="http",this.peer.name="",this.peer.keylist=[],this.message_queue=[],this.message_queue_speed=1e3,this.message_queue_timer=null,this.events_active=0,""!=a){var r=JSON.parse(a);null==r.peer.endpoint&&(r.peer.endpoint={},r.peer.endpoint.host=r.peer.host,r.peer.endpoint.port=r.peer.port,r.peer.endpoint.protocol=r.peer.protocol),this.peer=r.peer,this.peer.handshake}this.handshake=this.returnHandshake(),this.handshake_completed=0,1!=this.app.SPVMODE&&1!=this.app.BROWSER||(this.peer.synctype="lite",this.handshake.peer.synctype="lite",this.handshake.peer.receiveblks=1,this.handshake.peer.receivetxs=0,this.handshake.peer.receivegts=0)}var a,r,l,u;return a=e,(r=[{key:"initialize",value:function(){var e=this;this.message_queue_timer=setInterval((function(){e.message_queue.length>0&&(e.message_queue.length>10&&(e.message_queue=e.message_queue.splice(10)),null!=e.socket&&1==e.socket.connected&&(e.socket.emit("request",e.message_queue[0]),e.message_queue.splice(0,1)))}),this.message_queue_speed)}},{key:"isConnected",value:function(){return null!=this.socket&&1==this.socket.connected}},{key:"isMainPeer",value:function(){if(this.app.options&&this.app.options.peers&&this.app.options.peers.length>0){var e=this.app.options.peers[0];if(e.host==this.peer.endpoint.host)return!0;if(e.host==this.peer.host)return!0}return!1}},{key:"returnHandshake",value:function(){var e={step:0};e.ts=(new Date).getTime(),e.attempts=0,e.complete=0,e.challenge_mine=Math.random(),e.challenge_peer="",e.challenge_proof="",e.challenge_verified=0,e.peer={},e.peer.host="",e.peer.port="",e.peer.protocol="",e.peer.endpoint={},e.peer.publickey=this.app.wallet.returnPublicKey(),e.peer.version=this.app.wallet.wallet.version,e.peer.synctype="full",e.peer.sendblks=this.app.network.sendblks,e.peer.sendtxs=this.app.network.sendtxs,e.peer.sendgts=this.app.network.sendgts,e.peer.receiveblks=this.app.network.receiveblks,e.peer.receivetxs=this.app.network.receivetxs,e.peer.receivegts=this.app.network.receivegts,e.modules=[];for(var t=0;t<this.app.modules.mods.length;t++)e.modules.push(this.app.modules.mods[t].name);e.services=[];for(var a=0;a<this.app.modules.mods.length;a++){var r=this.app.modules.mods[a].returnServices();if(r.length>0)for(var n=0;n<r.length;n++)e.services.push(r[n])}if(e.peer.keylist=[],e.blockchain={},e.blockchain.last_bid=this.app.blockchain.last_bid,e.blockchain.last_ts=this.app.blockchain.last_ts,e.blockchain.last_bsh=this.app.blockchain.last_bsh,e.blockchain.last_bf=this.app.blockchain.last_bf,e.blockchain.fork_id=this.app.blockchain.fork_id,e.blockchain.genesis_bid=this.app.blockchain.genesis_bid,this.app.server&&(e.peer.endpoint=this.app.server.server.endpoint),e.peer.keylist=this.app.keys.returnWatchedPublicKeys(),e.peer.keylist.push(this.app.wallet.returnPublicKey()),0==this.app.BROWSER&&this.app.options&&this.app.options.server){var i=this.app.options.server,s=i.name,o=i.host,c=i.port,l=i.protocol;e.peer.name=s,e.peer.host=o,e.peer.port=c,e.peer.protocol=l}return e}},{key:"returnPublicKey",value:function(){return this.peer.publickey}},{key:"deletePeer",value:function(){try{var e=this.socket.id;try{this.socket.disconnect(!0)}catch(t){console.log("error with socket.disconnect on "+e)}delete this.socket,this.socket||this.app.network.sockets.indexOf(e)>0&&this.app.network.sockets.splice(this.app.network.sockets.indexOf(e),1)}catch(e){console.log("error deleting peer socket"),console.log(e)}clearInterval(this.message_queue_timer)}},{key:"connect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0==e){if(this.peer.initiator=1,this.socket){try{this.socket.destroy()}catch(e){console.log(e)}delete this.socket,this.socket=null}var t={};t=1==this.app.BROWSER?{reconnection:!1,reconnectionDelay:500,reconnectionDelayMax:1e4,reconnectionAttempts:20,transports:["websocket"],pingTimeout:6e4,pingInterval:18e4,autoConnect:!1}:{reconnection:!0,reconnectionDelay:500,reconnectionDelayMax:1e4,reconnectionAttempts:20,pingTimeout:6e4,pingInterval:18e4,transports:["websocket"]},console.log("IO CONNECTION w/ mode: "+e),this.socket=o("".concat(this.peer.protocol,"://").concat(this.peer.host,":").concat(this.peer.port),t),this.socket.io.opts=t,console.log("adding socket events..."),this.addSocketEvents()}1==e&&this.addSocketEvents()}},{key:"sendRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!(0==this.peer.receiveblks&&"block"==e||0==this.peer.receiveblks&&"blockchain"==e||0==this.peer.receivetxs&&"transaction"==e||0==this.peer.receivegts&&"golden ticket"==e)){var a={};a.request=e,a.data=t,null!=this.socket&&(1==this.socket.connected&&this.socket.readyState===this.socket.OPEN?this.socket.emit("request",JSON.stringify(a)):this.message_queue.push(JSON.stringify(a)))}}},{key:"sendRequestWithCallbackAndRetry",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1.3,s=function s(o){o.err?"Socket Not Connected"===o.err?setTimeout((function(){n*=i,t.sendRequestWithCallback2(e,a,s)}),n):"Peer not found"===o.err?r(o):console.log("ERROR 12511: Unknown Error from socket..."):r(o)};this.sendRequestWithCallback2(e,a,s)}},{key:"sendRequestWithCallback2",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r={};r.request=e,r.data=t,null!=this.socket&&this.socket.connected&&this.socket.readyState===this.socket.OPEN?this.socket.emit("request",JSON.stringify(r),(function(e){a(e)})):a({err:"Socket Not Connected"})}},{key:"sendRequestWithCallback",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;if(!(0==this.peer.receiveblks&&"block"==e||0==this.peer.receiveblks&&"blockchain"==e||0==this.peer.receivetxs&&"transaction"==e||0==this.peer.receivegts&&"golden ticket"==e)){var r={};if(r.request=e,r.data=t,null!=this.socket)if(1==this.socket.connected&&this.socket.readyState===this.socket.OPEN)this.socket.emit("request",JSON.stringify(r),(function(e){a(e)}));else{this.message_queue.push(JSON.stringify(r));var n={err:"message queued for broadcast"};a(n)}}}},{key:"addSocketEvents",value:function(){var e=this;this.events_active=1;var t=this;try{this.socket.on("connect",(function(){try{t.app.network.sockets.push(e.id)}catch(e){console.log(e)}e.handshake.step<1&&(e.handshake.step=1),e.handshake.ts=(new Date).getTime(),e.handshake.attempts++,e.handshake.blockchain={},e.handshake.blockchain.last_bid=e.app.blockchain.last_bid,e.handshake.blockchain.last_ts=e.app.blockchain.last_ts,e.handshake.blockchain.last_bsh=e.app.blockchain.last_bsh,e.handshake.blockchain.last_bf=e.app.blockchain.last_bf,e.handshake.blockchain.fork_id=e.app.blockchain.fork_id,e.handshake.blockchain.genesis_bid=e.app.blockchain.genesis_bid,e.sendRequest("handshake",e.handshake),e.app.connection.emit("connection_up",e),e.app.wallet.rebroadcastPendingTransactions()})),this.socket.on("disconnect",(function(){e.app.connection.emit("connection_down",e)})),this.socket.on("reconnect",(function(){e.handshake.step=1,e.handshake.ts=(new Date).getTime(),e.handshake.attempts++,e.handshake.blockchain={},e.handshake.blockchain.last_bid=e.app.blockchain.last_bid,e.handshake.blockchain.last_ts=e.app.blockchain.last_ts,e.handshake.blockchain.last_bsh=e.app.blockchain.last_bsh,e.handshake.blockchain.last_bf=e.app.blockchain.last_bf,e.handshake.blockchain.fork_id=e.app.blockchain.fork_id,e.handshake.blockchain.genesis_bid=e.app.blockchain.genesis_bid,e.sendRequest("handshake",e.handshake),e.app.connection.emit("connection_up",e),e.app.wallet.rebroadcastPendingTransactions()})),this.socket.on("request",function(){var t=n(regeneratorRuntime.mark((function t(a){var r,n,i=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i.length>1&&void 0!==i[1]?i[1]:null,n=JSON.parse(a.toString()),1!=e.app.BROWSER){t.next=9;break}if(0!=e.handle_peer_requests){t.next=9;break}if("keylist"==n.request||"handshake"==n.request){t.next=9;break}return console.log("---------------------------------------------"),console.log("-- inactive tab, bailing in peer.js -- "),console.log("---------------------------------------------"),t.abrupt("return");case 9:if(void 0!==a){t.next=12;break}return console.log("ERROR 012482: received undefined data from peer."),t.abrupt("return");case 12:console.log("received: "+JSON.stringify(n.request)),t.t0=n.request,t.next="alertreset"===t.t0?16:"handshake"===t.t0?18:"block"===t.t0?20:"missing block"===t.t0?22:"blockchain"===t.t0?24:"transaction"===t.t0?26:"keylist"===t.t0?28:30;break;case 16:return e.handleAlertResetRequest(n),t.abrupt("break",33);case 18:return e.handleHandshakeRequest(n),t.abrupt("break",33);case 20:return e.handleBlockRequest(n),t.abrupt("break",33);case 22:return e.handleMissingBlockRequest(n,r),t.abrupt("break",33);case 24:return e.handleBlockchainRequest(n),t.abrupt("break",33);case 26:return e.handleTransactionRequest(n,r),t.abrupt("break",33);case 28:return e.handleKeylistRequest(n),t.abrupt("break",33);case 30:return n.data&&n.data.transaction&&n.data.transaction.m&&(n.data.transaction.msg=JSON.parse(e.app.crypto.base64ToString(n.data.transaction.m)),n.data.msg=n.data.transaction.msg),e.app.modules.handlePeerRequest(n,e,r),t.abrupt("break",33);case 33:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),1==this.app.BROWSER&&this.socket&&this.socket.open&&this.socket.open()}catch(e){console.error("ERROR 581023: error handling peer request - "+e)}}},{key:"handleKeylistRequest",value:function(e){0!=this.handshake_completed&&(this.peer.keylist=e.data,console.log("UPDATED KEYLIST: "+JSON.stringify(this.peer.keylist)))}},{key:"configPeerFromHandshake",value:function(e){null!=this.peer.modules&&"undefined"!=this.peer.modules&&null!=this.peer.modules||(this.peer.modules=[]);for(var t=0;t<e.modules.length;t++)this.peer.modules.includes(e.modules[t])||this.peer.modules.push(e.modules[t]);this.peer.services=[],e.services&&e.services.length>0&&(this.peer.services=e.services),this.peer.receiveblks=e.peer.receiveblks,this.peer.receivetxs=e.peer.receivetxs,this.peer.receivegts=e.peer.receivegts,this.peer.sendblks=e.peer.sendblks,this.peer.sendtxs=e.peer.sendtxs,this.peer.sendgts=e.peer.sendgts,""==this.peer.publickey&&(this.peer.publickey=e.peer.publickey),this.peer.synctype=e.peer.synctype,this.peer.endpoint=e.peer.endpoint,this.peer.keylist=e.peer.keylist,this.peer.name=e.peer.name}},{key:"handleAlertResetRequest",value:function(e){var t=e.data.original_genesis_hash,a=e.data.original_genesis_sig,r=e.data.original_genesis_ts;if(this.app.options&&this.app.options.blockchain){if(t!=this.app.options.blockchain.original_genesis_hash){if(this.app.options.blockchain.original_genesis_ts&&this.app.options.blockchain.original_genesis_ts>r)return;var n="alertreset"+r+t;this.app.crypto.verifyMessage(n,a,"e1hpHsuiRPbzXdCf7smXvAFCnqpvZXcjtxZLMxcATat1")&&(this.app.options.blockchain.original_genesis_ts=r,this.app.options.blockchain.original_genesis_hash=t,this.app.options.blockchain.original_genesis_sig=a,this.app.blockchain.resetBlockchain())}this.app.storage.saveOptions()}}},{key:"handleHandshakeRequest",value:function(e){var a=this;this.sendAlertReset();var r=e.data;if(this.configPeerFromHandshake(r),this.handshake.attempts,1==this.app.BROWSER&&(this.peer.synctype="lite",this.app.options.peers.forEach((function(e){e.host==r.peer.endpoint.host&&"none"==e.synctype&&(a.peer.synctype="none",a.handshake.peer.synctype="none")})),this.app.wallet.wallet.version<r.peer.version&&(window.location=window.location)),""==this.handshake.challenge_proof&&""!=r.challenge_mine&&(this.handshake.challenge_peer=r.challenge_mine,this.handshake.challenge_proof=this.app.crypto.signMessage("_"+this.handshake.challenge_peer,this.app.wallet.returnPrivateKey())),""!=this.handshake.challenge_mine&&""!=r.challenge_proof&&0==this.handshake.challenge_verified&&(0==this.app.crypto.verifyMessage("_"+this.handshake.challenge_mine,r.challenge_proof,r.peer.publickey)||(this.peer.publickey=r.peer.publickey,this.handshake.challenge_verified=1),this.app.connection.emit("handshake_complete",this),this.handshake_completed=1,this.app.wallet.rebroadcastPendingTransactions(this)),"none"!=this.peer.synctype&&"none"!=this.handshake.peer.synctype){var n=r.blockchain.last_bsh,i=r.blockchain.last_bid,s=r.blockchain.fork_id,o=(r.blockchain_genesis_bid,this.app.blockchain.last_bid),c=this.app.blockchain.returnLastSharedBlockId(s,i);0===c&&((c=this.app.blockchain.bsh_bid_hmap[n])>0||(c=0)),o>c&&(i-o>this.app.blockchain.genesis_period&&0!=i&&"full"==this.peer.synctype?(console.log("ERROR 184023: peer reports us as fully off-chain with same gp"),t.exit()):0==this.app.BROWSER&&i<o&&(0==c&&i>0&&i-c>9?(i=i<10?0:i-10,r.step>=3&&this.sendBlockchain(i,e.data.peer.synctype)):r.step>=3&&this.sendBlockchain(c,e.data.peer.synctype)))}this.handshake.step>=r.step&&this.handshake.attempts++,this.handshake.step<=3&&(this.handshake.step=r.step+1,this.handshake.blockchain={},this.handshake.blockchain.last_bid=this.app.blockchain.last_bid,this.handshake.blockchain.last_ts=this.app.blockchain.last_ts,this.handshake.blockchain.last_bsh=this.app.blockchain.last_bsh,this.handshake.blockchain.last_bf=this.app.blockchain.last_bf,this.handshake.blockchain.fork_id=this.app.blockchain.fork_id,this.handshake.blockchain.genesis_bid=this.app.blockchain.genesis_bid,this.sendRequest("handshake",this.handshake),this.app.wallet.rebroadcastPendingTransactions())}},{key:"handleBlockRequest",value:function(e){"none"!=this.peer.synctype&&"none"!=this.handshake.peer.synctype&&null!=e.data&&null!=e.data.bhash&&1!=this.app.blockchain.isHashIndexed(e.data.bhash)&&(this.app.network.addBlockHashToQueue(this,e.data.bhash,e.data.bid),this.app.network.fetchBlocks())}},{key:"handleMissingBlockRequest",value:function(e,t){var a=JSON.parse(e.data),r=a.hash,n=a.last_hash,i=this.app.blockchain.bsh_bid_hmap[r],s=this.app.blockchain.bsh_bid_hmap[n];if(""==n){if(i>0){var o={bhash:r,bid:i};this.sendRequest("block",o)}}else s>0&&(i>s+1?(console.log("HANDLE MISSING BLOCK REQUEST"),this.sendBlockchain(s+1)):(o={bhash:r,bid:i},this.sendRequest("block",o)),null!=t&&t())}},{key:"handleBlockchainRequest",value:(u=n(regeneratorRuntime.mark((function e(t){var a,r,n,i,s,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.handshake.challenge_verified){e.next=3;break}return console.log("\n\n\nERROR 820342: handshake not verified when blockchain data sent."),e.abrupt("return");case 3:a=t.data,r=a.start,n=0;case 6:if(!(n<a.prehash.length)){e.next=25;break}if(i=a.bid[n],s=this.app.crypto.hash(a.prehash[n]+r),o=a.ts[n],c=a.txs[n],1==this.app.blockchain.isHashIndexed(s)){e.next=21;break}if(0!=c||1!=this.app.BROWSER){e.next=18;break}return e.next=16,this.app.blockchain.addHashToBlockchain(s,o,i,r);case 16:e.next=19;break;case 18:this.app.network.addBlockHashToQueue(this,s,i,o);case 19:e.next=21;break;case 21:r=s;case 22:n++,e.next=6;break;case 25:this.app.network.fetchBlocks(),this.app.blockchain.saveBlockchain();case 27:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"sendAlertReset",value:function(){if(this.app.options&&this.app.options.blockchain&&""!=this.app.options.blockchain.original_genesis_sig){var e={request:"alertreset",data:{}};e.data.original_genesis_ts=this.app.options.blockchain.original_genesis_ts,e.data.original_genesis_hash=this.app.options.blockchain.original_genesis_hash,e.data.original_genesis_sig=this.app.options.blockchain.original_genesis_sig,this.socket.emit("request",JSON.stringify(e))}}},{key:"sendBlockchain",value:function(e,t){if(0!=this.handshake.challenge_verified){if(0==e){var a="full"==t?this.app.blockchain.genesis_period:10;(e=this.app.blockchain.last_bid-a)<0&&(e=0)}console.log("Sending the Blockchain from start_bid: "+e);var r={request:"blockchain",data:{}};r.data.start=null,r.data.prehash=[],r.data.bid=[],r.data.ts=[],r.data.txs=[];for(var n=0,i=this.app.blockchain.index.blocks.length-1;i>=0;i--)this.app.blockchain.index.blocks[i].block.id<e?i=-1:n=i;for(var s=n;s<this.app.blockchain.index.blocks.length;s++)if(1==this.app.blockchain.bsh_lc_hmap[this.app.blockchain.index.blocks[s].returnHash()]){var o=this.app.blockchain.index.blocks[s],c=o.block,l=o.prehash;null==r.data.start&&(r.data.start=c.prevbsh),r.data.prehash.push(l),r.data.bid.push(c.id),r.data.ts.push(c.ts),this.app.blockchain.index.blocks[s].hasKeylistTransactions(this.peer.keylist)?r.data.txs.push(1):r.data.txs.push(0)}this.socket.emit("request",JSON.stringify(r))}else console.log("ERROR 018413: skipping send blockchain as opposite party not verified...")}},{key:"handleTransactionRequest",value:function(e,t){var a=new c.transaction(JSON.parse(e.data));if(null!=a)if(a.is_valid){try{this.app.mempool.addTransaction(a)}catch(e){console.log(e)}null!=t&&t()}else console.log("NOT VALID TX");else console.log("NULL TX")}},{key:"returnBlockURL",value:function(e){var t=this.peer,a=t.protocol,r=t.host,n=t.port;return"lite"==this.peer.synctype?"".concat(a,"://").concat(r,":").concat(n,"/lite-blocks"):"".concat(a,"://").concat(r,":").concat(n,"/blocks")}},{key:"returnURL",value:function(){var e=this.peer.endpoint,t=e.protocol,a=e.host,r=e.port;return"".concat(t,"://").concat(a,":").concat(r)}},{key:"inTransactionPath",value:function(e){if(null==e)return 0;if(e.isFrom(this.peer.publickey))return 1;for(var t=0;t<e.transaction.path.length;t++)if(e.transaction.path[t].from==this.peer.publickey)return 1;return 0}},{key:"addPathToTransaction",value:function(e){var t=new c.transaction;t.transaction=JSON.parse(JSON.stringify(e.transaction));var a=new c.path;return a.from=this.app.wallet.returnPublicKey(),a.to=this.returnPublicKey(),a.sig=this.app.crypto.signMessage(a.to,this.app.wallet.returnPrivateKey()),t.transaction.path.push(a),t}}])&&s(a.prototype,r),l&&s(a,l),e}();e.exports=l}).call(this,a(12))},function(e,t,a){var r=a(1103),n=a(187),i=a(414),s=a(92)("socket.io-client");e.exports=t=c;var o=t.managers={};function c(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var a,n=r(e),c=n.source,l=n.id,u=n.path,d=o[l]&&u in o[l].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||d?(s("ignoring socket cache for %s",c),a=i(c,t)):(o[l]||(s("new io instance for %s",c),o[l]=i(c,t)),a=o[l]),n.query&&!t.query&&(t.query=n.query),a.socket(n.path,t)}t.protocol=n.protocol,t.connect=c,t.Manager=a(414),t.Socket=a(420)},function(e,t,a){var r=a(411),n=a(92)("socket.io-client:url");e.exports=function(e,t){var a=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(n("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),n("parse %s",e),a=r(e));a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443"));a.path=a.path||"/";var i=-1!==a.host.indexOf(":")?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+i+":"+a.port,a.href=a.protocol+"://"+i+(t&&t.port===a.port?"":":"+a.port),a}},function(e,t,a){function r(e){var a;function r(){if(r.enabled){var e=r,n=+new Date,i=n-(a||n);e.diff=i,e.prev=a,e.curr=n,a=n;for(var s=new Array(arguments.length),o=0;o<s.length;o++)s[o]=arguments[o];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(a,r){if("%%"===a)return a;c++;var n=t.formatters[r];if("function"==typeof n){var i=s[c];a=n.call(e,i),s.splice(c,1),c--}return a})),t.formatArgs.call(e,s);var l=r.log||t.log||console.log.bind(console);l.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var a,r=0;for(a in e)r=(r<<5)-r+e.charCodeAt(a),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=n,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function n(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var a;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(a=0;a<n;a++)r[a]&&("-"===(e=r[a].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(a=0;a<t.instances.length;a++){var i=t.instances[a];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var a,r;for(a=0,r=t.skips.length;a<r;a++)if(t.skips[a].test(e))return!1;for(a=0,r=t.names.length;a<r;a++)if(t.names[a].test(e))return!0;return!1},t.humanize=a(412),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,a){var r=a(189),n=a(413),i=Object.prototype.toString,s="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===i.call(Blob),o="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===i.call(File);t.deconstructPacket=function(e){var t=[],a=e.data,i=e;return i.data=function e(t,a){if(!t)return t;if(n(t)){var i={_placeholder:!0,num:a.length};return a.push(t),i}if(r(t)){for(var s=new Array(t.length),o=0;o<t.length;o++)s[o]=e(t[o],a);return s}if("object"==typeof t&&!(t instanceof Date)){s={};for(var c in t)s[c]=e(t[c],a);return s}return t}(a,t),i.attachments=t.length,{packet:i,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,a){if(!t)return t;if(t&&t._placeholder)return a[t.num];if(r(t))for(var n=0;n<t.length;n++)t[n]=e(t[n],a);else if("object"==typeof t)for(var i in t)t[i]=e(t[i],a);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var a=0,i=e;!function e(c,l,u){if(!c)return c;if(s&&c instanceof Blob||o&&c instanceof File){a++;var d=new FileReader;d.onload=function(){u?u[l]=this.result:i=this.result,--a||t(i)},d.readAsArrayBuffer(c)}else if(r(c))for(var p=0;p<c.length;p++)e(c[p],p,c);else if("object"==typeof c&&!n(c))for(var h in c)e(c[h],h,c)}(i),a||t(i)}},function(e,t,a){e.exports=a(1107),e.exports.parser=a(80)},function(e,t,a){var r=a(415),n=a(193),i=a(126)("engine.io-client:socket"),s=a(419),o=a(80),c=a(411),l=a(124);function u(e,t){if(!(this instanceof u))return new u(e,t);t=t||{},e&&"object"==typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"==typeof this.query&&(this.query=l.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||null,this.key=t.key||null,this.passphrase=t.passphrase||null,this.cert=t.cert||null,this.ca=t.ca||null,this.ciphers=t.ciphers||null,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"==typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=u,u.priorWebsocketSuccess=!1,n(u.prototype),u.protocol=o.protocol,u.Socket=u,u.Transport=a(192),u.transports=a(415),u.parser=a(80),u.prototype.createTransport=function(e){i('creating transport "%s"',e);var t=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}(this.query);t.EIO=o.protocol,t.transport=e;var a=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:a.agent||this.agent,hostname:a.hostname||this.hostname,port:a.port||this.port,secure:a.secure||this.secure,path:a.path||this.path,forceJSONP:a.forceJSONP||this.forceJSONP,jsonp:a.jsonp||this.jsonp,forceBase64:a.forceBase64||this.forceBase64,enablesXDR:a.enablesXDR||this.enablesXDR,withCredentials:a.withCredentials||this.withCredentials,timestampRequests:a.timestampRequests||this.timestampRequests,timestampParam:a.timestampParam||this.timestampParam,policyPort:a.policyPort||this.policyPort,pfx:a.pfx||this.pfx,key:a.key||this.key,passphrase:a.passphrase||this.passphrase,cert:a.cert||this.cert,ca:a.ca||this.ca,ciphers:a.ciphers||this.ciphers,rejectUnauthorized:a.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:a.perMessageDeflate||this.perMessageDeflate,extraHeaders:a.extraHeaders||this.extraHeaders,forceNode:a.forceNode||this.forceNode,localAddress:a.localAddress||this.localAddress,requestTimeout:a.requestTimeout||this.requestTimeout,protocols:a.protocols||void 0,isReactNative:this.isReactNative})},u.prototype.open=function(){var e;if(this.rememberUpgrade&&u.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},u.prototype.setTransport=function(e){i("setting transport %s",e.name);var t=this;this.transport&&(i("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},u.prototype.probe=function(e){i('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),a=!1,r=this;function n(){if(r.onlyBinaryUpgrades){var n=!this.supportsBinary&&r.transport.supportsBinary;a=a||n}a||(i('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(n){if(!a)if("pong"===n.type&&"probe"===n.data){if(i('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;u.priorWebsocketSuccess="websocket"===t.name,i('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){a||"closed"!==r.readyState&&(i("changing transport and sending upgrade packet"),p(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{i('probe transport "%s" failed',e);var s=new Error("probe error");s.transport=t.name,r.emit("upgradeError",s)}})))}function s(){a||(a=!0,p(),t.close(),t=null)}function o(a){var n=new Error("probe error: "+a);n.transport=t.name,s(),i('probe transport "%s" failed because of error: %s',e,a),r.emit("upgradeError",n)}function c(){o("transport closed")}function l(){o("socket closed")}function d(e){t&&e.name!==t.name&&(i('"%s" works - aborting "%s"',e.name,t.name),s())}function p(){t.removeListener("open",n),t.removeListener("error",o),t.removeListener("close",c),r.removeListener("close",l),r.removeListener("upgrading",d)}u.priorWebsocketSuccess=!1,t.once("open",n),t.once("error",o),t.once("close",c),this.once("close",l),this.once("upgrading",d),t.open()},u.prototype.onOpen=function(){if(i("socket open"),this.readyState="open",u.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){i("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},u.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(i('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else i('packet received with socket readyState "%s"',this.readyState)},u.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},u.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},u.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){i("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},u.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},u.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},u.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(i("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},u.prototype.write=u.prototype.send=function(e,t,a){return this.sendPacket("message",e,t,a),this},u.prototype.sendPacket=function(e,t,a,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof a&&(r=a,a=null),"closing"!==this.readyState&&"closed"!==this.readyState){(a=a||{}).compress=!1!==a.compress;var n={type:e,data:t,options:a};this.emit("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}},u.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()}function t(){e.onClose("forced close"),i("socket closing - telling transport to close"),e.transport.close()}function a(){e.removeListener("upgrade",a),e.removeListener("upgradeError",a),t()}function r(){e.once("upgrade",a),e.once("upgradeError",a)}return this},u.prototype.onError=function(e){i("socket error %j",e),u.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},u.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){i('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},u.prototype.filterUpgrades=function(e){for(var t=[],a=0,r=e.length;a<r;a++)~s(this.transports,e[a])&&t.push(e[a]);return t}},function(e,t){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,a){var r=a(190),n=a(416),i=a(193),s=a(125),o=a(126)("engine.io-client:polling-xhr"),c=a(191);function l(){}function u(e){if(n.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!=typeof location){var t="https:"===location.protocol,a=location.port;a||(a=t?443:80),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||a!==e.port,this.xs=e.secure!==t}}function d(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=u,e.exports.Request=d,s(u,n),u.prototype.supportsBinary=!0,u.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new d(e)},u.prototype.doWrite=function(e,t){var a="string"!=typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:a}),n=this;r.on("success",t),r.on("error",(function(e){n.onError("xhr post error",e)})),this.sendXhr=r},u.prototype.doPoll=function(){o("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},i(d.prototype),d.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),a=this;try{o("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var n in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(n)&&t.setRequestHeader(n,this.extraHeaders[n])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){a.onLoad()},t.onerror=function(){a.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(a.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?a.onLoad():setTimeout((function(){a.onError("number"==typeof t.status?t.status:0)}),0))},o("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){a.onError(e)}),0)}"undefined"!=typeof document&&(this.index=d.requestsCount++,d.requests[this.index]=this)},d.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},d.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},d.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},d.prototype.cleanup=function(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=l:this.xhr.onreadystatechange=l,e)try{this.xhr.abort()}catch(e){}"undefined"!=typeof document&&delete d.requests[this.index],this.xhr=null}},d.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},d.prototype.hasXDR=function(){return"undefined"!=typeof XDomainRequest&&!this.xs&&this.enablesXDR},d.prototype.abort=function(){this.cleanup()},d.requestsCount=0,d.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",p);else if("function"==typeof addEventListener){addEventListener("onpagehide"in c?"pagehide":"unload",p,!1)}function p(){for(var e in d.requests)d.requests.hasOwnProperty(e)&&d.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],a=Object.prototype.hasOwnProperty;for(var r in e)a.call(e,r)&&t.push(r);return t}},function(e,t){e.exports=function(e,t,a){var r=e.byteLength;if(t=t||0,a=a||r,e.slice)return e.slice(t,a);if(t<0&&(t+=r),a<0&&(a+=r),a>r&&(a=r),t>=r||t>=a||0===r)return new ArrayBuffer(0);for(var n=new Uint8Array(e),i=new Uint8Array(a-t),s=t,o=0;s<a;s++,o++)i[o]=n[s];return i.buffer}},function(e,t){function a(){}e.exports=function(e,t,r){var n=!1;return r=r||a,i.count=e,0===e?t():i;function i(e,a){if(i.count<=0)throw new Error("after called too many times");--i.count,e?(n=!0,t(e),t=r):0!==i.count||n||t(null,a)}}},function(e,t){
/*! https://mths.be/utf8js v2.1.2 by @mathias */
var a,r,n,i=String.fromCharCode;function s(e){for(var t,a,r=[],n=0,i=e.length;n<i;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<i?56320==(64512&(a=e.charCodeAt(n++)))?r.push(((1023&t)<<10)+(1023&a)+65536):(r.push(t),n--):r.push(t);return r}function o(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return i(e>>t&63|128)}function l(e,t){if(0==(4294967168&e))return i(e);var a="";return 0==(4294965248&e)?a=i(e>>6&31|192):0==(4294901760&e)?(o(e,t)||(e=65533),a=i(e>>12&15|224),a+=c(e,6)):0==(4292870144&e)&&(a=i(e>>18&7|240),a+=c(e,12),a+=c(e,6)),a+=i(63&e|128)}function u(){if(n>=r)throw Error("Invalid byte index");var e=255&a[n];if(n++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function d(e){var t,i;if(n>r)throw Error("Invalid byte index");if(n==r)return!1;if(t=255&a[n],n++,0==(128&t))return t;if(192==(224&t)){if((i=(31&t)<<6|u())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if((i=(15&t)<<12|u()<<6|u())>=2048)return o(i,e)?i:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(i=(7&t)<<18|u()<<12|u()<<6|u())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var a=!1!==(t=t||{}).strict,r=s(e),n=r.length,i=-1,o="";++i<n;)o+=l(r[i],a);return o},decode:function(e,t){var o=!1!==(t=t||{}).strict;a=s(e),r=a.length,n=0;for(var c,l=[];!1!==(c=d(o));)l.push(c);return function(e){for(var t,a=e.length,r=-1,n="";++r<a;)(t=e[r])>65535&&(n+=i((t-=65536)>>>10&1023|55296),t=56320|1023&t),n+=i(t);return n}(l)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var a,r=new Uint8Array(t),n=r.length,i="";for(a=0;a<n;a+=3)i+=e[r[a]>>2],i+=e[(3&r[a])<<4|r[a+1]>>4],i+=e[(15&r[a+1])<<2|r[a+2]>>6],i+=e[63&r[a+2]];return n%3==2?i=i.substring(0,i.length-1)+"=":n%3==1&&(i=i.substring(0,i.length-2)+"=="),i},t.decode=function(t){var a,r,n,i,s,o=.75*t.length,c=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var u=new ArrayBuffer(o),d=new Uint8Array(u);for(a=0;a<c;a+=4)r=e.indexOf(t[a]),n=e.indexOf(t[a+1]),i=e.indexOf(t[a+2]),s=e.indexOf(t[a+3]),d[l++]=r<<2|n>>4,d[l++]=(15&n)<<4|i>>2,d[l++]=(3&i)<<6|63&s;return u}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var a=void 0!==a?a:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),n=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),i=a&&a.prototype.append&&a.prototype.getBlob;function s(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var a=new Uint8Array(e.byteLength);a.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=a.buffer}return t}return e}))}function o(e,t){t=t||{};var r=new a;return s(e).forEach((function(e){r.append(e)})),t.type?r.getBlob(t.type):r.getBlob()}function c(e,t){return new Blob(s(e),t||{})}"undefined"!=typeof Blob&&(o.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=r?n?Blob:c:i?o:void 0},function(e,t,a){function r(e){var a;function r(){if(r.enabled){var e=r,n=+new Date,i=n-(a||n);e.diff=i,e.prev=a,e.curr=n,a=n;for(var s=new Array(arguments.length),o=0;o<s.length;o++)s[o]=arguments[o];s[0]=t.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(a,r){if("%%"===a)return a;c++;var n=t.formatters[r];if("function"==typeof n){var i=s[c];a=n.call(e,i),s.splice(c,1),c--}return a})),t.formatArgs.call(e,s);var l=r.log||t.log||console.log.bind(console);l.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var a,r=0;for(a in e)r=(r<<5)-r+e.charCodeAt(a),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=n,"function"==typeof t.init&&t.init(r),t.instances.push(r),r}function n(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var a;t.save(e),t.names=[],t.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length;for(a=0;a<n;a++)r[a]&&("-"===(e=r[a].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(a=0;a<t.instances.length;a++){var i=t.instances[a];i.enabled=t.enabled(i.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var a,r;for(a=0,r=t.skips.length;a<r;a++)if(t.skips[a].test(e))return!1;for(a=0,r=t.names.length;a<r;a++)if(t.names[a].test(e))return!0;return!1},t.humanize=a(412),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,a){var r=a(416),n=a(125),i=a(191);e.exports=u;var s,o=/\n/g,c=/\\n/g;function l(){}function u(e){r.call(this,e),this.query=this.query||{},s||(s=i.___eio=i.___eio||[]),this.index=s.length;var t=this;s.push((function(e){t.onData(e)})),this.query.j=this.index,"function"==typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=l)}),!1)}n(u,r),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},u.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var a=document.getElementsByTagName("script")[0];a?a.parentNode.insertBefore(t,a):(document.head||document.body).appendChild(t),this.script=t,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},u.prototype.doWrite=function(e,t){var a=this;if(!this.form){var r,n=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;n.className="socketio",n.style.position="absolute",n.style.top="-1000px",n.style.left="-1000px",n.target=s,n.method="POST",n.setAttribute("accept-charset","utf-8"),i.name="d",n.appendChild(i),document.body.appendChild(n),this.form=n,this.area=i}function l(){u(),t()}function u(){if(a.iframe)try{a.form.removeChild(a.iframe)}catch(e){a.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+a.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=a.iframeId,r.src="javascript:0"}r.id=a.iframeId,a.form.appendChild(r),a.iframe=r}this.form.action=this.uri(),u(),e=e.replace(c,"\\\n"),this.area.value=e.replace(o,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===a.iframe.readyState&&l()}:this.iframe.onload=l}},function(e,t,a){(function(t){var r,n,i=a(192),s=a(80),o=a(124),c=a(125),l=a(418),u=a(126)("engine.io-client:websocket");if("undefined"!=typeof WebSocket?r=WebSocket:"undefined"!=typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"==typeof window)try{n=a(1119)}catch(e){}var d=r||n;function p(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(d=n),i.call(this,e)}e.exports=p,c(p,i),p.prototype.name="websocket",p.prototype.supportsBinary=!0,p.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,a={};this.isReactNative||(a.agent=this.agent,a.perMessageDeflate=this.perMessageDeflate,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(a.headers=this.extraHeaders),this.localAddress&&(a.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new d(e,t):new d(e):new d(e,t,a)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},p.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},p.prototype.write=function(e){var a=this;this.writable=!1;for(var r=e.length,n=0,i=r;n<i;n++)!function(e){s.encodePacket(e,a.supportsBinary,(function(n){if(!a.usingBrowserWebSocket){var i={};if(e.options&&(i.compress=e.options.compress),a.perMessageDeflate)("string"==typeof n?t.byteLength(n):n.length)<a.perMessageDeflate.threshold&&(i.compress=!1)}try{a.usingBrowserWebSocket?a.ws.send(n):a.ws.send(n,i)}catch(e){u("websocket closed before onclose event")}--r||o()}))}(e[n]);function o(){a.emit("flush"),setTimeout((function(){a.writable=!0,a.emit("drain")}),0)}},p.prototype.onClose=function(){i.prototype.onClose.call(this)},p.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},p.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",a="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(a=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=l()),this.supportsBinary||(e.b64=1),(e=o.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+a+this.path+e},p.prototype.check=function(){return!(!d||"__initialize"in d&&this.name===p.prototype.name)}}).call(this,a(9).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var a=[],r=(t=t||0)||0;r<e.length;r++)a[r-t]=e[r];return a}},function(e,t){function a(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=a,a.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),a=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-a:e+a}return 0|Math.min(e,this.max)},a.prototype.reset=function(){this.attempts=0},a.prototype.setMin=function(e){this.ms=e},a.prototype.setMax=function(e){this.max=e},a.prototype.setJitter=function(e){this.jitter=e}},function(e,t){e.exports=GameHammerMobile=function(){return""}},function(e,t,a){"use strict";function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(5),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.slips=[]}var t,a,i;return t=e,(a=[{key:"unspend_transaction",value:function(e){for(var t=0;t<e.transaction.from.length;t++)this.insert_slip(e.transaction.from[t].returnSignatureSource(),-1)}},{key:"spend_transaction",value:function(e,t){for(var a=0;a<e.transaction.from.length;a++)this.insert_slip(e.transaction.from[a].returnSignatureSource(),t)}},{key:"spend_slipidx",value:function(e,t){this.insert_slip(e,t)}},{key:"insert_new_transaction",value:function(e,t){for(var a=0;a<t.transaction.to.length;a++){var r=new n.slip;r.add=t.transaction.to[a].add,r.bid=e.block.id,r.tid=t.transaction.id,r.sid=a,r.type=t.transaction.to[a].type,r.bsh=e.returnHash(),r.amt=t.transaction.to[a].amt,this.insert_slip(r.returnSignatureSource())}}},{key:"insert_slip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.slips[e]=t}},{key:"delete_slip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";delete this.slips[e]}},{key:"validate_slip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,a=this.slips[e];return a==t||a<t?1:0}},{key:"validate_mempool_slip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return 0==this.slips[e]?0:-1==this.slips[e]?1:0}},{key:"slip_value",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.slips[e]}}])&&r(t.prototype,a),i&&r(t,i),e}();e.exports=i},function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(5),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;r(this,e),this.add=t,this.bid=i,this.tid=s,this.sid=o,this.bsh=c,this.amt=a.toString(),this.type=n,this.ts=0,this.type=n,this.lc=l}var t,a,s;return t=e,(a=[{key:"cloneSlip",value:function(){return new i.slip(this.add,this.amt,this.type,this.bid,this.tid,this.sid,this.bsh,this.lc)}},{key:"returnSignatureSource",value:function(){return this.type.toString()+this.bid.toString()+this.tid.toString()+this.sid.toString()+this.amt.toString()}},{key:"returnOriginalSignatureSource",value:function(){return this.type.toString()+"000"+this.amt.toString()}},{key:"isNonZeroAmount",value:function(){return"0"===this.amt||"0.0"===this.amt?0:1}}])&&n(t.prototype,a),s&&n(t,s),e}();e.exports=s},function(e,t,a){(function(t){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(40),s=a(5),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(r(this,e),this.transaction={},this.transaction.id=1,this.transaction.from=[],this.transaction.to=[],this.transaction.ts=(new Date).getTime(),this.transaction.sig="",this.transaction.ver=1,this.transaction.path=[],this.transaction.r=1,this.transaction.type=0,this.transaction.m="",this.transaction.ps=0,this.fees_total="",this.work_available_to_me="",this.work_available_to_creator="",this.work_cumulative="0.0",this.msg={},this.dmsg="",this.size=0,this.is_valid=1,this.atr_trapdoor="00000000000000000000000000000000000000000000",this.atr_rebroadcasting_limit=10,null!=t)try{this.transaction=t,t.transaction&&(this.transaction=t.transaction),this.transaction.from=this.transaction.from.map((function(e){var t=e.add,a=e.amt,r=e.type,n=e.bid,i=e.tid,o=e.sid,c=e.bsh;return new s.slip(t,a,r,n,i,o,c)})),this.transaction.to=this.transaction.to.map((function(e){var t=e.add,a=e.amt,r=e.type,n=e.bid,i=e.tid,o=e.sid,c=e.bsh;return new s.slip(t,a,r,n,i,o,c)})),this.msg=JSON.parse(this.base64ToString(this.transaction.m))}catch(e){this.is_valid=0}this.size=JSON.stringify(this.transaction).length}var a,o,c;return a=e,(o=[{key:"clone",value:function(){return Object.assign(Object.create(Object.getPrototypeOf(this)),this)}},{key:"generateRebroadcastTransaction",value:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;if(0==this.transaction.to.length)return null;var n=new s.transaction;n.transaction.sig=this.transaction.sig,n.transaction.ts=this.transaction.ts,n.msg={};var o=i(r);if(0==r&&(o=i(2)),3==this.transaction.type&&(o=i(0)),0==this.transaction.type||1==this.transaction.type||2==this.transaction.type||3==this.transaction.type||4==this.transaction.type||5==this.transaction.type||6==this.transaction.type||7==this.transaction.type){var c;n.transaction.type=5,3==this.transaction.type&&(n.transaction.type=3),4==this.transaction.type&&(n.transaction.type=6),8==this.transaction.type&&(n.transaction.type=8,(o=i(i(r).times(10).toFixed(8))).lt(20)&&(o=i(20)),(c=i(this.transaction.to[a].amt).minus(o)).lt(0)&&(o=i(this.transaction.to[a].amt),c=i(0))),null==this.msg.loop?n.msg.loop=1:n.msg.loop=this.msg.loop+1,(c=i(this.transaction.to[a].amt).minus(o)).lt(0)&&(o=i(this.transaction.to[a].amt),c=i(0)),null!=this.msg.tx?n.msg.tx=this.msg.tx:n.msg.tx=JSON.stringify(this.transaction);var l=new s.slip(e,this.transaction.to[a].amt,5);l.tid=t,l.sid=a;var u=new s.slip(this.transaction.to[a].add,c.toFixed(8),5),d=new s.slip(this.atr_trapdoor,o.toFixed(8));d.sid=1,n.transaction.from.push(l),n.transaction.to.push(u),o.gt(0)&&n.transaction.to.push(d)}return n}},{key:"isFrom",value:function(e){return 0!=this.returnSlipsFrom(e).length}},{key:"isTo",value:function(e){return this.returnSlipsTo(e).length>0}},{key:"isGoldenTicket",value:function(){return 1==this.transaction.type?1:0}},{key:"isRebroadcast",value:function(e,t,a){return 0!=this.transaction.to.length&&null!=this.transaction.to[a]&&this.transaction.to[a].add!=this.atr_trapdoor&&(3==this.transaction.type||8==this.transaction.type||!!i(this.transaction.to[a].amt).gt(this.atr_rebroadcasting_limit))}},{key:"involvesPublicKey",value:function(e){var t=this.returnSlipsToAndFrom(e);return t.to.length>0||t.from.length>0?1:0}},{key:"returnPaymentTo",value:function(e){for(var t=this.returnSlipsToAndFrom(e),a=i(0),r=0;r<t.to.length;r++)t.to[r].add===e&&(a=a.plus(i(t.to[r].amt)));return a.toFixed(8).replace(/0+$/,"").replace(/\.$/,".0")}},{key:"returnSlipsFrom",value:function(e){var t=[];if(null!=this.transaction.from)for(var a=0;a<this.transaction.from.length;a++)this.transaction.from[a].add===e&&t.push(this.transaction.from[a]);return t}},{key:"returnSlipsToAndFrom",value:function(e){var t={from:[],to:[]};if(null!=this.transaction.from)for(var a=0;a<this.transaction.from.length;a++)this.transaction.from[a].add===e&&t.from.push(this.transaction.from[a]);if(null!=this.transaction.to)for(var r=0;r<this.transaction.to.length;r++)this.transaction.to[r].add===e&&t.to.push(this.transaction.to[r]);return t}},{key:"returnSlipsTo",value:function(e){var t=[];if(null!=this.transaction.to)for(var a=0;a<this.transaction.to.length;a++)this.transaction.to[a].add===e&&t.push(this.transaction.to[a]);return t}},{key:"stringToBase64",value:function(e){return t.from(e,"utf-8").toString("base64")}},{key:"base64ToString",value:function(e){return t.from(e,"base64").toString("utf-8")}},{key:"decryptMessage",value:function(e){if(this.transaction.from[0].add==e.wallet.returnPublicKey())try{this.dmsg=e.keys.decryptMessage(this.transaction.to[0].add,this.msg)}catch(e){}else try{var t=this.msg;this.dmsg=e.keys.decryptMessage(this.transaction.from[0].add,t)}catch(e){console.log("ERROR: "+e)}}},{key:"returnMessage",value:function(){return""!=this.dmsg?this.dmsg:(this.msg,this.msg)}},{key:"returnSignature",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return""!=this.transaction.sig&&1!=t||(this.transaction.sig=e.wallet.signMessage(this.returnSignatureSource(e))),this.transaction.sig}},{key:"returnSignatureSource",value:function(e){for(var t="",a=0;a<this.transaction.from.length;a++)t+=this.transaction.from[a].returnSignatureSource();for(var r=0;r<this.transaction.to.length;r++)t+=this.transaction.to[r].returnOriginalSignatureSource();return t+="".concat(this.transaction.ts).concat(this.transaction.type).concat(this.transaction.r).concat(this.transaction.m).concat(this.transaction.ps)}},{key:"returnFees",value:function(e){if(""==this.fees_total){var t=i(0);if(null!=this.transaction.from)for(var a=0;a<this.transaction.from.length;a++)t=t.plus(i(this.transaction.from[a].amt));for(var r=i(0),n=0;n<this.transaction.to.length;n++)1!=this.transaction.to[n].type&&2!=this.transaction.to[n].type&&(r=r.plus(i(this.transaction.to[n].amt)));var s=t.minus(r);this.fees_total=s.toFixed(8)}return this.fees_total}},{key:"returnRoutingWorkAvailable",value:function(e){for(var t=i(this.returnFees(e)),a=0;a<this.transaction.path.length;a++){for(var r=1,n=a;n>0;n--)r*=2;t=t.div(r)}return t.toFixed(8)}},{key:"validate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(1==e.BROWSER||1==e.SPVMODE)return!0;if(0==this.is_valid)return!1;if(4==this.transaction.type)return!0;if(9==this.transaction.type)return!(this.transaction.from.length>0||this.transaction.to.length>0);if(this.transaction.from.length<1)return console.log("ERROR 329380: no from address in transaction"),!1;if(this.transaction.to.length<1)return console.log("ERROR 183092: no to address in transaction"),!1;var a=i(0),r=i(0);if(2!=this.transaction.type){for(var n=0;n<this.transaction.from.length;n++)if((a=a.plus(i(this.transaction.from[n].amt))).lt(0))return console.log("ERROR 240812: negative payment in transaction from slip"),0;for(var o=0;o<this.transaction.to.length;o++)if((r=r.plus(i(this.transaction.to[o].amt))).lt(0))return console.log("ERROR 672939: negative payment in transaction to slip"),0;if(r.gt(a))return console.log("ERROR 672939: negative payment to slips > from slips"),0}if(2!=this.transaction.type&&3!=this.transaction.type&&5!=this.transaction.type)for(var c=0;c<this.transaction.from.length;c++)if(i(this.transaction.from[c].amt).gt(0)){if(this.transaction.from[c].bid<t-e.blockchain.genesis_period)return console.log("ERROR 570030: transaction tries to spend outdated input..."),this.is_valid=0,!1;if(""!=this.transaction.from[c].bsh&&1!=e.blockchain.bsh_lc_hmap[this.transaction.from[c].bsh])return this.is_valid=0,!1;if(!e.shashmap.validate_slip(this.transaction.from[c].returnSignatureSource(),t))return console.log("ERROR 570130: cannot validate inputs with shashmap..."),this.is_valid=0,!1}if((0==this.transaction.type||1==this.transaction.type||4==this.transaction.type)&&!e.crypto.verifyMessage(this.returnSignatureSource(e),this.transaction.sig,this.transaction.from[0].add))return console.log("ERROR 141502: signature on normal transaction does not verify"),0;if(2==this.transaction.type&&!e.crypto.verifyMessage(this.returnSignatureSource(e),this.transaction.sig,this.transaction.from[0].add))return console.log("ERROR 374302: signature on 2/3/5/6/7 transaction does not validate"),0;if(this.transaction.type,this.transaction.type,5==this.transaction.type||6==this.transaction.type||7==this.transaction.type)try{var l=this.msg.tx,u=new s.transaction(JSON.parse(l)),d=u.returnSignatureSource(e),p=this.transaction.sig;if(this.transaction.from[0].add!=u.transaction.from[0].add)return console.log("ERROR 582230: sending address changed in rebroadcast transaction"),0;if(this.transaction.from[0].add!=u.transaction.from[0].add)return console.log("ERROR 137104: sending address changed in rebroadcast transaction"),0;if(!e.crypto.verifyMessage(d,p,u.transaction.from[0].add))return console.log("ERROR 137109: signature on original tx in rebroadcast transaction is invalid"),0}catch(e){return console.log("ERROR 578203: malformed rebroadcast transaction (original tx missing?)"),0}return!0}}])&&n(a.prototype,o),c&&n(a,c),e}();e.exports=o}).call(this,a(9).Buffer)},function(e,t,a){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var s=e.apply(t,a);function o(e){n(s,r,i,o,c,"next",e)}function c(e){n(s,r,i,o,c,"throw",e)}o(void 0)}))}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=l(e);if(t){var n=l(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,a){return t&&d(e.prototype,t),a&&d(e,a),e}var h=a(5),f=a(40),m=a(1127),g=function(){function e(t){if(u(this,e),!(this instanceof e))return new e(t);this.app=t||{},this.wallet={},this.wallet.balance="0",this.wallet.publickey="",this.wallet.privatekey="",this.wallet.inputs=[],this.wallet.outputs=[],this.wallet.spends=[],this.wallet.default_fee=2,this.wallet.version=3.331,this.wallet.preferred_crypto="SAITO",this.wallet.preferred_txs=[],this.inputs_hmap=[],this.inputs_hmap_counter=0,this.inputs_hmap_counter_limit=1e4,this.outputs_hmap=[],this.outputs_hmap_counter=0,this.outputs_hmap_counter_limit=1e4,this.outputs_prune_limit=100,this.recreate_pending_transactions=0;var a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,a,r,n=o(c);function c(e){var t;return u(this,c),(t=n.call(this,e,"SAITO")).name="Saito",t.description="Saito",t}return p(c,[{key:"returnBalance",value:(r=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.app.wallet.returnBalance());case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"returnAddress",value:(a=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.app.wallet.returnPublicKey());case 1:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"transfer",value:(t=i(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("implement me!!");case 1:case"end":return e.stop()}}),e)}))),function(e,a){return t.apply(this,arguments)})},{key:"hasPayment",value:function(e,t,a,r){if(a==this.app.wallet.returnPublicKey()){for(var n=0;n<this.app.wallet.wallet.inputs.length;n++)if(this.app.wallet.wallet.inputs[n].amt===e&&this.app.wallet.wallet.inputs[n].ts>=r)for(var i=0;i<this.app.wallet.wallet.inputs[n].from_slips.length;i++)if(this.app.wallet.wallet.inputs[n].from_slips[i].add==t)return 1;for(var s=0;s<this.app.wallet.wallet.outputs.length;s++)if(this.app.wallet.wallet.outputs[s].amt===e&&this.app.wallet.wallet.outputs[s].ts>=r)for(var o=0;o<this.app.wallet.wallet.outputs[s].from_slips.length;o++)if(this.app.wallet.wallet.outputs[s].from_slips[o].add==t)return 1;return 0}return 1}},{key:"onIsInitialized",value:function(){return 1}}]),c}(m);this.saitoCrypo=new a(t)}var t,a,r,n;return p(e,[{key:"addInput",value:function(e){for(var t=this.wallet.inputs.length;t>0&&this.wallet.inputs[t-1].bid>e.bid;)t--;-1==t&&(t=0),this.wallet.inputs.splice(t,0,e),this.wallet.spends.splice(t,0,0);var a=e.returnSignatureSource(e);if(this.inputs_hmap[a]=1,this.inputs_hmap_counter++,this.inputs_hmap_counter>this.inputs_hmap_counter_limit){this.inputs_hmap=[],this.outputs_hmap=[],this.inputs_hmap_counter=0,this.outputs_hmap_counter=0;for(var r=0;r<this.wallet.inputs.length;r++){var n=this.wallet.inputs[r].returnSignatureSource();this.inputs_hmap[n]=1}for(var i=0;i<this.wallet.outputs.length;i++){var s=this.wallet.outputs[i].returnSignatureSource();this.outputs_hmap[s]=1}}}},{key:"addOutput",value:function(e){this.wallet.outputs.push(e);var t=e.returnSignatureSource();if(this.outputs_hmap[t]=1,this.outputs_hmap_counter++,this.wallet.outputs.length>this.outputs_prune_limit){console.log("Deleting Excessive outputs from heavy-spend wallet...");var a=this.wallet.outputs.length-this.outputs_prune_limit;a+=10,this.wallet.outputs.splice(0,a),this.outputs_hmap_counter=0}}},{key:"containsInput",value:function(e){var t=e.returnSignatureSource();return 1==this.inputs_hmap[t]}},{key:"containsOutput",value:function(e){var t=e.returnSignatureSource();return 1==this.outputs_hmap[t]}},{key:"addTransactionToPending",value:function(e){var t=JSON.stringify(e.transaction);t.length>1e5||this.wallet.pending.includes(t)||(this.wallet.pending.push(t),this.saveWallet())}},{key:"doesSlipInPendingTransactionsSpendBlockHash",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(""==e)return!1;for(var t=0;t<this.wallet.pending.length;t++)for(var a=new h.transaction(JSON.parse(this.wallet.pending[t])),r=0;r<a.transaction.from.length;r++)if(a.transaction.from[r].bsh==e)return!0;return!1}},{key:"initialize",value:function(e){var t=this;if(""==this.wallet.privatekey){if(null!=this.app.options.wallet){if(this.app.options.wallet.version<this.wallet.version)if(1==this.app.BROWSER){var a=this.app.options.wallet.privatekey,r=this.app.options.wallet.publickey;this.wallet.publickey=r,this.wallet.privatekey=a,this.app.modules.onWalletReset(),this.app.storage.resetOptions(),this.app.storage.saveOptions(),this.wallet.publickey=r,this.wallet.privatekey=a,this.app.options.wallet=this.wallet,this.app.options.blockchain.last_bid="",this.app.options.blockchain.last_hash="",this.app.options.blockchain.last_ts="",this.app.options.wallet.inputs=[],this.app.options.wallet.outputs=[],this.app.options.wallet.pending=[],this.app.options.wallet.spends=[],this.app.options.wallet.balance="0.0",this.app.options.wallet.version=this.wallet.version,this.saveWallet(),salert("Saito Upgrade: Wallet Reset")}else this.app.options.wallet.version=this.wallet.version,this.app.options.wallet.inputs=[],this.app.options.wallet.outputs=[],this.app.options.wallet.spends=[],this.app.options.wallet.pending=[],this.app.options.wallet.balance="0.0",this.app.storage.saveOptions();this.wallet=Object.assign(this.wallet,this.app.options.wallet)}""==this.wallet.privatekey&&this.resetWallet()}if(this.wallet.spends=[],null!=this.app.options.wallet){if(null!=this.app.options.wallet.inputs)for(var n=0;n<this.app.options.wallet.inputs.length;n++){var i=this.app.options.wallet.inputs[n],s=i.add,o=i.amt,c=i.type,l=i.bid,u=i.tid,d=i.sid,p=i.bsh,f=i.lc,m=i.rn;this.wallet.inputs[n]=new h.slip(s,o,c,l,u,d,p,f,m),this.app.options.wallet.inputs[n].ts&&(this.wallet.inputs[n].ts=this.app.options.wallet.inputs[n].ts),this.wallet.spends.push(0);var g=this.wallet.inputs[n].returnSignatureSource();this.inputs_hmap[g]=1,this.inputs_hmap_counter++}if(null!=this.app.options.wallet.outputs)for(var b=0;b<this.app.options.wallet.outputs.length;b++){var y=this.app.options.wallet.outputs[b],v=y.add,_=y.amt,w=y.type,x=y.bid,k=y.tid,S=y.sid,P=y.bsh,E=y.lc,C=y.rn;this.wallet.outputs[b]=new h.slip(v,_,w,x,k,S,P,E,C);var A=this.wallet.outputs[b].returnSignatureSource();this.outputs_hmap[A]=1,this.outputs_hmap_counter++}}for(var M=0;M<this.wallet.pending.length;M++)for(var T=new h.transaction(JSON.parse(this.wallet.pending[M])),j=0;j<T.transaction.from.length;j++)for(var O=T.transaction.from[j],D=O.bsh,I=O.bid,R=O.tid,B=O.sid,q=0;q<this.wallet.inputs.length;q++)this.wallet.inputs[q].bid==I&&this.wallet.inputs[q].tid==R&&this.wallet.inputs[q].sid==B&&this.wallet.inputs[q].bsh==D&&(this.wallet.spends[q]=1,q=this.wallet.inputs.length);this.app.connection.on("connection_up",(function(e){t.rebroadcastPendingTransactions(e)})),this.purgeExpiredSlips(),this.updateBalance(),this.saveWallet()}},{key:"isSlipInPendingTransactions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null==e)return!1;for(var t=e.returnSignatureSource(),a=0;a<this.wallet.pending.length;a++)for(var r=new h.transaction(JSON.parse(this.wallet.pending[a])),n=0;n<r.transaction.from.length;n++){var i=r.transaction.from[n];if(i.returnSignatureSource()===t)return!0}return!1}},{key:"rebroadcastPendingTransactions",value:function(){for(var e=this.wallet.pending.length,t=0;t<e;t++){var a=new h.transaction(JSON.parse(this.wallet.pending[t]));a.isFrom(this.returnPublicKey())?0==a.transaction.type?this.app.network.propagateTransaction(a):(this.app.wallet.wallet.pending.splice(t,1),this.app.wallet.unspendInputSlips(a),this.app.wallet.saveWallet(),t--,e--):(this.wallet.pending.splice(t,1),t--,e--)}}},{key:"unspendInputSlips",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null!=e)for(var t=0;t<e.transaction.from.length;t++)for(var a=e.transaction.from[t].returnSignatureSource(),r=0;r<this.wallet.inputs.length;r++)a==this.wallet.inputs[r].returnSignatureSource()&&(this.wallet.spends[r]=0)}},{key:"onChainReorganization",value:function(e,t,a,r){if(1==a){if(this.purgeExpiredSlips(),this.resetSpentInputs(),1==this.recreate_pending_transactions){for(var n=0;n<this.wallet.pending.length;n++){var i=new h.transaction(JSON.parse(this.wallet.pending[n])),s=this.createReplacementTransaction(i);null!=s&&null!=(s=this.signTransaction(s))&&(this.wallet.pending[n]=JSON.stringify(s))}this.recreate_pending_transactions=0}}else this.doesSlipInPendingTransactionsSpendBlockHash(t)&&(this.recreate_pending_transactions=1);this.resetExistingSlips(e,t,a)}},{key:"processPayments",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=0;a<e.transactions.length;a++){for(var r=e.transactions[a],n=r.returnSlipsToAndFrom(this.returnPublicKey()),i=[],s=[],o=0;o<n.to.length;o++)i.push(n.to[o].cloneSlip());for(var c=0;c<n.from.length;c++)s.push(n.from[c].cloneSlip());for(var l=0;l<i.length;l++)i[l].bid=e.block.id,i[l].bsh=e.returnHash(),i[l].tid=r.transaction.id,i[l].lc=t,console.log("TS set to : "+e.block.ts),i[l].ts=e.block.ts,i[l].from=r.transaction.from;var u=0;if(this.wallet.pending.length>0)for(var d=0;d<this.wallet.pending.length;d++){var p=new h.transaction(JSON.parse(this.wallet.pending[d]));if(this.wallet.pending[d].indexOf(r.transaction.sig)>0)this.wallet.pending.splice(d,1),d--,u=1;else if(1==p.transaction.type)this.wallet.pending.splice(d,1),this.unspendInputSlips(p),d--,u=1;else if(Math.random()<=.1){var f=p.transaction.ts,m=e.block.ts;f+12e6<m&&(this.wallet.pending.splice(d,1),this.unspendInputSlips(p),u=1,d--)}}if(1==u&&this.saveWallet(),i.length>0)for(var g=0;g<i.length;g++)if(i[g].amt>0)if(0==this.containsInput(i[g]))0==this.containsOutput(i[g])&&4!=i[g].type&&this.addInput(i[g]);else if(1==t)for(var b=i[g].returnSignatureSource(),y=this.wallet.inputs.length-1;y>=0;y--)this.wallet.inputs[y].returnSignatureSource()===b&&(this.wallet.inputs[y].lc=t);if(s.length>0)for(var v=0;v<s.length;v++)for(var _=s[v],w=0;w<this.wallet.inputs.length;w++){var x=this.wallet.inputs[w];_.bid==x.bid&&_.tid==x.tid&&_.sid==x.sid&&_.bsh==x.bsh&&_.amt==x.amt&&_.add==x.add&&(0==this.containsOutput(_)&&this.addOutput(this.wallet.inputs[w]),this.wallet.inputs.splice(w,1),this.wallet.spends.splice(w,1),w=this.wallet.inputs.length+2)}}this.updateBalance(),this.app.options.wallet=this.wallet,this.app.storage.saveOptions()}},{key:"purgeExpiredSlips",value:function(){for(var e=this.app.blockchain.genesis_bid,t=this.wallet.inputs.length-1;t>=0;t--)this.wallet.inputs[t].bid<e&&(this.wallet.inputs.splice(t,1),this.wallet.spends.splice(t,1));for(var a=this.wallet.outputs.length-1;a>=0;a--)this.wallet.outputs[a].bid<e&&this.wallet.outputs.splice(a,1)}},{key:"resetExistingSlips",value:function(e,t,a){for(var r=this.wallet.inputs.length-1;r>=0;r--)if(this.wallet.inputs[r].bid==e&&this.wallet.inputs[r].bsh===t)this.wallet.inputs[r].lc=a;else if(this.wallet.inputs[r].bid<e)return}},{key:"resetSpentInputs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0==e)for(var t=0;t<this.wallet.inputs.length;t++)0==this.isSlipInPendingTransactions(this.wallet.inputs[t])&&(this.wallet.spends[t]=0);else for(var a=this.app.blockchain.returnLatestBlockId()-e,r=0;r<this.wallet.inputs.length;r++)this.wallet.inputs[r].bid<=a&&0==this.isSlipInPendingTransactions(this.wallet.inputs[r])&&(this.wallet.spends[r]=0)}},{key:"returnAdequateInputs",value:function(e){var t=[],a=f(0),r=f(e);this.purgeExpiredSlips();var n=this.app.blockchain.last_bid-this.app.blockchain.genesis_period+2;if(this.wallet.pending.length>0)for(var i=0;i<this.wallet.pending.length;i++)for(var s=new h.transaction(JSON.parse(this.wallet.pending[i])),o=0;o<s.transaction.from.length;o++)for(var c=s.transaction.from[o].returnSignatureSource(),l=0;l<this.wallet.inputs;l++){if(this.wallet.inputs[l].returnSignatureSource()===c){for(;this.wallet.spends.length<l;)this.wallet.spends.push(0);this.wallet.spends[l]=1}}for(var u=0;u<this.wallet.inputs.length;u++)if(0==this.wallet.spends[u]||u>=this.wallet.spends.length){var d=this.wallet.inputs[u];if(1==d.lc&&d.bid>=n&&1!=this.app.mempool.transactions_inputs_hmap[d.returnSignatureSource()]&&(this.wallet.spends[u]=1,t.push(d),(a=a.plus(f(d.amt))).gt(r)||a.eq(r)))return t}return null}},{key:"calculateBalance",value:function(){var e=this,t=f(0);return this.wallet.inputs.forEach((function(a,r){e.isSlipValid(a,r)&&(t=t.plus(a.amt))})),t}},{key:"calculateDisplayBalance",value:function(){var e=this.calculateBalance();this.wallet.pending.forEach((function(t){t.to.forEach((function(t){f(e).plus(f(t.amt))}))}))}},{key:"isSlipValid",value:function(e,t){var a=this.wallet.spends[t],r=1==e.lc,n=e.bid>=this.app.blockchain.returnLowestValidBlock(),i=1!=this.app.mempool.transactions_inputs_hmap[e.returnSignatureSource()];return!a&&r&&n&&i}},{key:"returnBalance",value:function(){return this.wallet.balance.replace(/0+$/,"").replace(/\.$/,".0")}},{key:"returnPrivateKey",value:function(){return this.wallet.privatekey}},{key:"returnPublicKey",value:function(){return this.wallet.publickey}},{key:"backupWallet",value:(n=i(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{1==this.app.BROWSER&&(t=JSON.stringify(this.app.options),(a=document.createElement("a")).setAttribute("type","hidden"),a.setAttribute("href","data:application/json;utf-8,"+encodeURIComponent(t)),a.setAttribute("download","saito.wallet.json"),document.body.appendChild(a),a.click(),a.remove())}catch(e){console.log("Error backing-up wallet: "+e)}case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"resetWallet",value:(r=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.wallet.privatekey=this.app.crypto.generateKeys(),this.wallet.publickey=this.app.crypto.returnPublicKey(this.wallet.privatekey),null!=this.app.options.blockchain&&this.app.blockchain.resetBlockchainOptions(),null!=this.app.options.keys&&(this.app.options.keys=[]),this.wallet.inputs=[],this.wallet.outputs=[],this.wallet.spends=[],this.wallet.pending=[],this.saveWallet(),1==this.app.browser.browser_active&&window.location.reload();case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"saveWallet",value:function(){this.app.options.wallet=this.wallet,this.app.storage.saveOptions()}},{key:"signMessage",value:function(e){return this.app.crypto.signMessage(e,this.returnPrivateKey())}},{key:"signAndEncryptTransaction",value:function(e){if(null==e)return null;for(var t=0;t<e.transaction.to.length;t++)e.transaction.to[t].sid=t;try{this.app.keys.hasSharedSecret(e.transaction.to[0].add)&&(e.msg=this.app.keys.encryptMessage(e.transaction.to[0].add,e.msg)),e.transaction.m=this.app.crypto.stringToBase64(JSON.stringify(e.msg)),e.transaction.sig=e.returnSignature(this.app,1)}catch(t){return console.log("####################"),console.log("### OVERSIZED TX ###"),console.log("###   -revert-   ###"),console.log("####################"),console.log(t),e.msg={},e}return e}},{key:"signTransaction",value:function(e){if(null==e)return null;for(var t=0;t<e.transaction.to.length;t++)e.transaction.to[t].sid=t;try{e.transaction.m=this.app.crypto.stringToBase64(JSON.stringify(e.msg)),e.transaction.sig=e.returnSignature(this.app)}catch(t){return console.log("####################"),console.log("### OVERSIZED TX ###"),console.log("###   -revert-   ###"),console.log("####################"),console.log(t),e.msg={},e}return e}},{key:"updateBalance",value:function(){var e=this.wallet.balance;this.wallet.balance=this.calculateBalance().toFixed(8),this.wallet.balance!=e&&this.app.connection.emit("update_balance",this)}},{key:"returnDisplayBalance",value:function(){return this.calculateDisplayBalance()}},{key:"createSlip",value:function(e){return new h.slip(e)}},{key:"createRawTransaction",value:function(e){return new h.transaction(e)}},{key:"createUnsignedTransactionWithDefaultFee",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return""===e&&(e=this.app.wallet.returnPublicKey()),this.createUnsignedTransaction(e,t,this.wallet.default_fee)}},{key:"createUnsignedTransaction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;""==e&&(e=this.returnPublicKey());var n=new h.transaction,i=f(t).plus(f(a)),s=this.calculateBalance();if(!this.app.crypto.isPublicKey(e))throw"Invalid address "+e;i.gt(s)&&(t=0,a=0),i.eq(0)?(n.transaction.from=[],n.transaction.from.push(new h.slip(this.returnPublicKey()))):n.transaction.from=this.returnAdequateInputs(i),n.transaction.ts=(new Date).getTime(),n.transaction.to.push(new h.slip(e,t)),n.transaction.to[n.transaction.to.length-1].type=0,null==n.transaction.from&&(n.transaction.from=[],n.transaction.from.push(new h.slip(this.returnPublicKey(),0))),null==n.transaction.to&&(n.transaction.to=[],n.transaction.to.push(new h.slip(e,0)));for(var o=f(0),c=0;c<n.transaction.from.length;c++)o=o.plus(f(n.transaction.from[c].amt));var l=o.minus(i);if(f(l).gt(0))if(this.wallet.inputs.length<8){var u=l.div(2).toFixed(8),d=l.minus(f(u)).toFixed(8);n.transaction.to.push(new h.slip(this.returnPublicKey(),u)),n.transaction.to[n.transaction.to.length-1].type=0,n.transaction.to.push(new h.slip(this.returnPublicKey(),d)),n.transaction.to[n.transaction.to.length-1].type=0}else n.transaction.to.push(new h.slip(this.returnPublicKey(),l.toFixed(8))),n.transaction.to[n.transaction.to.length-1].type=0;if(this.wallet.inputs.length>30||r>0){console.log("---------------------"),console.log("Merging Wallet Slips!"),console.log("---------------------");var p=7;r>7&&(p=r);var m=0,g=f(0),b=this.app.blockchain.last_bid-this.app.blockchain.genesis_period+2;if(this.wallet.pending.length>0)for(var y=0;y<this.wallet.pending.length;y++)for(var v=new h.transaction(JSON.parse(this.wallet.pending[y])),_=0;_<v.transaction.from.length;_++)for(var w=v.transaction.from[_].returnSignatureSource(),x=0;x<this.wallet.inputs;x++){var k=this.wallet.inputs[x].returnSignatureSource();if(k===w){for(;this.wallet.spends.length<x;)this.wallet.spends.push(0);this.wallet.spends[x]=1}}for(var S=0;m<p&&S<this.wallet.inputs.length;S++)if(0==this.wallet.spends[S]||S>=this.wallet.spends.length){var P=this.wallet.inputs[S];1==P.lc&&P.bid>=b&&1!=this.app.mempool.transactions_inputs_hmap[P.returnSignatureSource()]&&(this.wallet.spends[S]=1,m++,g=g.plus(f(P.amt)),n.transaction.from.push(P))}n.transaction.to.push(new h.slip(this.returnPublicKey(),g.toFixed(8))),n.transaction.to[n.transaction.to.length-1].type=0}return this.saveWallet(),n}},{key:"createToSlips",value:function(e,t,a,r){var n=1;e>a?(n=1,e=Math.floor(a)):n=Math.floor(a/e);for(var i=a%n,s=[],o=0;o<e;o++)s.push(new h.slip(t,f(n))),s[s.length-1].type=0;return f(i).gt(0)&&(s.push(new h.slip(t,f(i))),s[s.length-1].type=0),f(r).gt(0)&&(s.push(new h.slip(this.app.wallet.returnPublicKey(),r.toFixed(8))),s[s.length-1].type=0),s}},{key:"createReplacementTransaction",value:function(e){for(var t=[],a=[],r=f(0),n=(f(0),0);n<e.transaction.from.length;n++)r=r.plus(f(e.transaction.from[n].amt));for(var i=0;i<e.transaction.to.length;i++){t.includes(e.transaction.to[i].add)||(t.push(e.transaction.to[i].add),a.push(f(0)));for(var s=0,o=0;o<t.length;o++)t[o]===e.transaction.to[i].add&&(s=o,o=t.length+1);a[s]=a[s].plus(f(e.transaction.to[i].amt))}for(var c=f(0),l=0;l<a.length;l++)c=c.plus(a[l]);c=c.minus(r).times(-1);for(var u=0;u<t.length;u++)t[u]==this.returnPublicKey()&&(r=r.minus(a[u]),a[u]=a[u].minus(a[u]));r=r.minus(c);new h.transaction;for(var d=0,p=0;p<t.length;p++)t[p]==this.returnPublicKey()&&(d=p,p=t.length+1);var m=this.createUnsignedTransaction(this.returnPublicKey(),a[d].toString(),c.toString());if(null==m)return null;for(var g=0;g<t.length;g++)if(t[g]!=this.returnPublicKey())if(a[g].eq(f(0)))m.transaction.to.push(new h.slip(t[g]));else{var b=this.createUnsignedTransaction(t[g],a[g].toString(),0);if(null==b)return null;for(var y=0;y<b.transaction.from.length;y++)m.transaction.from.push(b.transaction.from[y]);for(var v=0;v<b.transaction.to.length;v++)m.transaction.to.push(b.transaction.to[v])}return m.transaction.ts=e.transaction.ts,m.transaction.msg=e.transaction.msg,m.transaction.msg.recreated=1,this.saveWallet(),m}},{key:"returnAvailableCryptos",value:function(){var e=this.app.modules.returnModulesBySubType(m);return e.push(this.saitoCrypo),e}},{key:"returnCryptoModuleByTicker",value:function(e){for(var t=this.returnAvailableCryptos(),a=0;a<t.length;a++)if(t[a].ticker===e)return t[a];throw"Module Not Found: "+e}},{key:"setPreferredCrypto",value:function(e){for(var t=0,a=this.returnAvailableCryptos(),r=0;r<a.length;r++)a[r].ticker===e&&(t=1);"SAITO"==e&&(t=1),1==t&&(this.wallet.preferred_crypto=e,this.saveWallet(),this.app.connection.emit("set_preferred_crypto",e))}},{key:"returnPreferredCrypto",value:function(){try{return this.returnCryptoModuleByTicker(this.wallet.preferred_crypto)}catch(e){if(e.startsWith("Module Not Found:"))return this.setPreferredCrypto("SAITO"),this.returnCryptoModuleByTicker(this.wallet.preferred_crypto);throw e}}},{key:"returnPreferredCryptoTicker",value:function(){try{var e=this.returnPreferredCrypto();if(null!=e&&null!=e)return e.ticker}catch(e){return""}}},{key:"isOurPreferredCryptoAddress",value:function(e,t){return e==this.returnPublicKey()?1:0}},{key:"returnPreferredCryptoBalances",value:(a=i(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s,o,c,l,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=u.length>0&&void 0!==u[0]?u[0]:[],a=u.length>1&&void 0!==u[1]?u[1]:null,""==(r=u.length>2&&void 0!==u[2]?u[2]:"")&&(r=this.wallet.preferred_crypto),n=this.returnCryptoModuleByTicker(r),i=[],s=[],o=0;o<t.length;o++)s.push(n.returnBalance(t[o]));return e.next=10,Promise.all(s);case 10:for(c=e.sent,l=0;l<t.length;l++)i.push({address:t[l],balance:c[l]});return null!=a&&a(i),e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"sendPayment",value:(t=i(regeneratorRuntime.mark((function e(){var t,a,r,n,i,s,o,c,l,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:[],a=u.length>1&&void 0!==u[1]?u[1]:[],r=u.length>2&&void 0!==u[2]?u[2]:[],n=u.length>3?u[3]:void 0,i=u.length>4?u[4]:void 0,s=u.length>5?u[5]:void 0,t.length==a.length&&t.length==r.length||i({err:"Lengths of senders, receivers, and amounts must be the same"}),1!==t.length&&i({err:"Only supports one transaction"}),this.doesPreferredCryptoTransactionExist(t,a,r,n,s)){e.next=37;break}console.log("**** sendPayment ****"),console.log("from "+t[0]),console.log("to "+a[0]),o=this.returnCryptoModuleByTicker(s),c=0;case 14:if(!(c<t.length)){e.next=35;break}if(t[c]!==o.returnAddress()){e.next=32;break}return this.savePreferredCryptoTransaction(t,a,r,n,s),e.prev=17,e.next=20,o.transfer(r[c]/1e3,a[c]);case 20:return l=e.sent,i({hash:l}),e.abrupt("break",35);case 25:return e.prev=25,e.t0=e.catch(17),console.log("payment failed...."),console.log(e.t0),this.deletePreferredCryptoTransaction(t,a,r,n,s),i({err:e.t0}),e.abrupt("break",35);case 32:c++,e.next=14;break;case 35:e.next=38;break;case 37:i({err:"already sent"});case 38:case"end":return e.stop()}}),e,this,[[17,25]])}))),function(){return t.apply(this,arguments)})},{key:"receivePayment",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:36,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:5e3;return new Promise(function(){var u=i(regeneratorRuntime.mark((function u(d,p){var h,f,m,g;return regeneratorRuntime.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t.length==a.length&&t.length==r.length||s({err:"Lengths of senders, receivers, and amounts must be the same"}),1!==t.length&&s({err:"Only supports one transaction"}),e.doesPreferredCryptoTransactionExist(t,a,r,n,o)&&s(),h=e.returnCryptoModuleByTicker(o),u.next=6,h.onIsInitialized();case 6:console.log("**** receivePayment ****"),console.log("from "+t[0]),console.log("to "+a[0]),console.log("me "+h.returnAddress()),f=function(){var e=i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.hasPayment(r[0]/1e3,t[0],a[0],n[0]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=i(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("poll_check_payment_function remaining tries: "+c),t=null,e.prev=2,e.next=5,f();case 5:t=e.sent,e.next=14;break;case 8:return e.prev=8,e.t0=e.catch(2),console.log("ERROR"),console.log(e.t0),s({err:e.t0}),e.abrupt("return");case 14:g(t);case 15:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),g=function(i){i?(console.log("TRANSACTION FOUND"),e.savePreferredCryptoTransaction(t,a,r,n,o),s(i)):--c>0?setTimeout((function(){m()}),l):s({err:"Did not receive payment after "+l*c/1e3+" seconds"})},m();case 14:case"end":return u.stop()}}),u)})));return function(e,t){return u.apply(this,arguments)}}())}},{key:"savePreferredCryptoTransaction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,i=this.app.crypto.hash(JSON.stringify(e)+JSON.stringify(t)+JSON.stringify(a)+r+n);this.wallet.preferred_txs.push({sig:i,ts:(new Date).getTime()});for(var s=this.wallet.preferred_txs.length-1;s>=0;s--)this.wallet.ts<(new Date).getTime()-1e8&&this.wallet.preferred_txs.splice(s,1);return this.saveWallet(),1}},{key:"doesPreferredCryptoTransactionExist",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,i=this.app.crypto.hash(JSON.stringify(e)+JSON.stringify(t)+JSON.stringify(a)+r+n),s=0;s<this.wallet.preferred_txs.length;s++)if(this.wallet.preferred_txs[s].sig===i)return 1;return 0}},{key:"deletePreferredCryptoTransaction",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,i=this.app.crypto.hash(JSON.stringify(e)+JSON.stringify(t)+JSON.stringify(a)+r+n),s=0;s<this.wallet.preferred_txs.length;s++)this.wallet.preferred_txs[s].sig===i&&this.wallet.preferred_txs.splice(s,1)}}]),e}();e.exports=g},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function i(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=l(e);if(t){var n=l(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=a(15),d=(a(115).randomBytes,a(51)),p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,e);var t,a,r,c,l,u=o(p);function p(e,t){var a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),a=u.call(this,e),(this instanceof p?this.constructor:void 0)===p)throw new TypeError("Cannot construct Abstract instances directly");if("function"!=typeof a.returnBalance)throw new TypeError("Must override returnBalance");if("function"!=typeof a.transfer)throw new TypeError("Must override transfer");if("function"!=typeof a.returnAddress)throw new TypeError("Must override returnAddress");if("function"!=typeof a.hasPayment)throw new TypeError("Must override hasPayment");return a.app=e,a.ticker=t,a.categories="Cryptocurrency",a.eventEmitter=new d,a.isInitialized=!1,a}return t=p,(a=[{key:"initialize",value:function(e){this.isInitialized=!0,this.eventEmitter.emit("initialized")}},{key:"onIsInitialized",value:function(){var e=this;return new Promise((function(t,a){e.isInitialized&&t(),e.eventEmitter.on("initialized",(function(){t()}))}))}},{key:"handlePeerRequest",value:(c=regeneratorRuntime.mark((function e(t,a,r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=a.request){e.next=2;break}return e.abrupt("return");case 2:if(null!=a.data){e.next=4;break}return e.abrupt("return");case 4:"cryptoAddressRequest"===a.request&&a.data.recipient===this.app.wallet.returnPublicKey()&&a.data.ticker===this.ticker&&n({address:this.returnAddress()});case 5:case"end":return e.stop()}}),e,this)})),l=function(){var e=this,t=arguments;return new Promise((function(a,r){var i=c.apply(e,t);function s(e){n(i,a,r,s,o,"next",e)}function o(e){n(i,a,r,s,o,"throw",e)}s(void 0)}))},function(e,t,a,r){return l.apply(this,arguments)})}])&&i(t.prototype,a),r&&i(t,r),p}(u);p.prototype.returnBalance=function(){throw new Error("returnBalance must be implemented by subclass!")},p.prototype.transfer=function(){throw new Error("transfer must be implemented by subclass!")},p.prototype.returnAddress=function(){throw new Error("returnAddress must be implemented by subclass!")},p.prototype.hasPayment=function(){throw new Error("hasPayment must be implemented by subclass!")},e.exports=p},function(e,t,a){var r={"./appstore/appstore":426,"./appstore/appstore.js":426,"./appstore/bundler/templates/index.template":210,"./appstore/bundler/templates/index.template.js":210,"./appstore/lib/appstore-overlay/appstore-app-details/appstore-app-details":203,"./appstore/lib/appstore-overlay/appstore-app-details/appstore-app-details.js":203,"./appstore/lib/appstore-overlay/appstore-app-details/appstore-app-details.template":204,"./appstore/lib/appstore-overlay/appstore-app-details/appstore-app-details.template.js":204,"./appstore/lib/appstore-overlay/appstore-bundle-confirm":206,"./appstore/lib/appstore-overlay/appstore-bundle-confirm.js":206,"./appstore/lib/appstore-overlay/appstore-bundle-confirm.template":207,"./appstore/lib/appstore-overlay/appstore-bundle-confirm.template.js":207,"./appstore/lib/appstore-overlay/appstore-module-indexed-confirm":208,"./appstore/lib/appstore-overlay/appstore-module-indexed-confirm.js":208,"./appstore/lib/appstore-overlay/appstore-module-indexed-confirm.template":209,"./appstore/lib/appstore-overlay/appstore-module-indexed-confirm.template.js":209,"./appstore/lib/appstore-overlay/appstore-overlay":95,"./appstore/lib/appstore-overlay/appstore-overlay-app.template":202,"./appstore/lib/appstore-overlay/appstore-overlay-app.template.js":202,"./appstore/lib/appstore-overlay/appstore-overlay.js":95,"./appstore/lib/appstore-overlay/appstore-overlay.template":201,"./appstore/lib/appstore-overlay/appstore-overlay.template.js":201,"./appstore/lib/email-appspace/appstore-appspace":195,"./appstore/lib/email-appspace/appstore-appspace-publish/appstore-publish":196,"./appstore/lib/email-appspace/appstore-appspace-publish/appstore-publish-success/appstore-publish-success":198,"./appstore/lib/email-appspace/appstore-appspace-publish/appstore-publish-success/appstore-publish-success.js":198,"./appstore/lib/email-appspace/appstore-appspace-publish/appstore-publish-success/appstore-publish-success.template":199,"./appstore/lib/email-appspace/appstore-appspace-publish/appstore-publish-success/appstore-publish-success.template.js":199,"./appstore/lib/email-appspace/appstore-appspace-publish/appstore-publish-success/appstore-publish-waiting.template":200,"./appstore/lib/email-appspace/appstore-appspace-publish/appstore-publish-success/appstore-publish-waiting.template.js":200,"./appstore/lib/email-appspace/appstore-appspace-publish/appstore-publish.js":196,"./appstore/lib/email-appspace/appstore-appspace-publish/appstore-publish.template":197,"./appstore/lib/email-appspace/appstore-appspace-publish/appstore-publish.template.js":197,"./appstore/lib/email-appspace/appstore-appspace.js":195,"./appstore/lib/email-appspace/appstore-appspace.template":205,"./appstore/lib/email-appspace/appstore-appspace.template.js":205,"./arcade/arcade":428,"./arcade/arcade.js":428,"./arcade/lib/arcade-game/advanced-overlay":221,"./arcade/lib/arcade-game/advanced-overlay.js":221,"./arcade/lib/arcade-game/advanced-overlay.template":222,"./arcade/lib/arcade-game/advanced-overlay.template.js":222,"./arcade/lib/arcade-game/arcade-game-details":128,"./arcade/lib/arcade-game/arcade-game-details.js":128,"./arcade/lib/arcade-game/arcade-game-details.template":220,"./arcade/lib/arcade-game/arcade-game-details.template.js":220,"./arcade/lib/arcade-game/game-loaded.template":219,"./arcade/lib/arcade-game/game-loaded.template.js":219,"./arcade/lib/arcade-game/game-loader":217,"./arcade/lib/arcade-game/game-loader.js":217,"./arcade/lib/arcade-game/game-loader.template":218,"./arcade/lib/arcade-game/game-loader.template.js":218,"./arcade/lib/arcade-main/arcade-infobox":215,"./arcade/lib/arcade-main/arcade-infobox.js":215,"./arcade/lib/arcade-main/arcade-main":211,"./arcade/lib/arcade-main/arcade-main.js":211,"./arcade/lib/arcade-main/arcade-posts":213,"./arcade/lib/arcade-main/arcade-posts.js":213,"./arcade/lib/arcade-main/templates/arcade-container.template":96,"./arcade/lib/arcade-main/templates/arcade-container.template.js":96,"./arcade/lib/arcade-main/templates/arcade-infobox.template":216,"./arcade/lib/arcade-main/templates/arcade-infobox.template.js":216,"./arcade/lib/arcade-main/templates/arcade-invite.template":127,"./arcade/lib/arcade-main/templates/arcade-invite.template.js":127,"./arcade/lib/arcade-main/templates/arcade-main.template":212,"./arcade/lib/arcade-main/templates/arcade-main.template.js":212,"./arcade/lib/arcade-main/templates/arcade-observe.template":223,"./arcade/lib/arcade-main/templates/arcade-observe.template.js":223,"./arcade/lib/arcade-main/templates/arcade-posts.template":214,"./arcade/lib/arcade-main/templates/arcade-posts.template.js":214,"./arcade/lib/arcade-main/templates/arcposts.old":1143,"./arcade/lib/arcade-main/templates/saito-sarousel-leaf.template":430,"./arcade/lib/arcade-main/templates/saito-sarousel-leaf.template.js":430,"./arcade/lib/arcade-sidebar/arcade-games-full-list-overlay.template":226,"./arcade/lib/arcade-sidebar/arcade-games-full-list-overlay.template.js":226,"./arcade/lib/arcade-sidebar/arcade-sidebar":224,"./arcade/lib/arcade-sidebar/arcade-sidebar.js":224,"./arcade/lib/arcade-sidebar/arcade-sidebar.template":225,"./arcade/lib/arcade-sidebar/arcade-sidebar.template.js":225,"./arcade/mockinvites":227,"./arcade/mockinvites.js":227,"./archive/archive":431,"./archive/archive.js":431,"./blackjack/blackjack":432,"./blackjack/blackjack.js":432,"./chat/chat":434,"./chat/chat.js":434,"./chat/lib/chat-main/chat-list":241,"./chat/lib/chat-main/chat-list.js":241,"./chat/lib/chat-main/chat-main":240,"./chat/lib/chat-main/chat-main.js":240,"./chat/lib/chat-main/chat-room":98,"./chat/lib/chat-main/chat-room.js":98,"./chat/lib/email-chat/chat-box":233,"./chat/lib/email-chat/chat-box.js":233,"./chat/lib/email-chat/chat-sidebar":230,"./chat/lib/email-chat/chat-sidebar.js":230,"./chat/lib/email-chat/email-chat":229,"./chat/lib/email-chat/email-chat.js":229,"./chat/lib/templates/chat-box-message-block.template":129,"./chat/lib/templates/chat-box-message-block.template.js":129,"./chat/lib/templates/chat-box-message.template":235,"./chat/lib/templates/chat-box-message.template.js":235,"./chat/lib/templates/chat-box.template":234,"./chat/lib/templates/chat-box.template.js":234,"./chat/lib/templates/chat-list-header.template":243,"./chat/lib/templates/chat-list-header.template.js":243,"./chat/lib/templates/chat-list.template":242,"./chat/lib/templates/chat-list.template.js":242,"./chat/lib/templates/chat-main.template":245,"./chat/lib/templates/chat-main.template.js":245,"./chat/lib/templates/chat-room.template":244,"./chat/lib/templates/chat-room.template.js":244,"./chat/lib/templates/chat-sidebar-contact.template":232,"./chat/lib/templates/chat-sidebar-contact.template.js":232,"./chat/lib/templates/chat-sidebar.template":231,"./chat/lib/templates/chat-sidebar.template.js":231,"./chess/chess":440,"./chess/chess.js":440,"./chess/lib/chess":246,"./chess/lib/chess.js":246,"./chess/lib/chess.min":441,"./chess/lib/chess.min.js":441,"./chess/lib/chessboard":247,"./chess/lib/chessboard.js":247,"./debug/debug":442,"./debug/debug.js":442,"./debug/lib/email-appspace/debug-appspace":248,"./debug/lib/email-appspace/debug-appspace.js":248,"./debug/lib/email-appspace/debug-appspace.template":249,"./debug/lib/email-appspace/debug-appspace.template.js":249,"./earlybirds/earlybirds":443,"./earlybirds/earlybirds.js":443,"./earlybirds/lib/data":444,"./earlybirds/lib/data.js":444,"./earlybirds/lib/data.template":250,"./earlybirds/lib/data.template.js":250,"./email/email":445,"./email/email.js":445,"./email/lib/email-main/email-body/email-appspace/email-appspace":270,"./email/lib/email-main/email-body/email-appspace/email-appspace.js":270,"./email/lib/email-main/email-body/email-appspace/email-appspace.template":271,"./email/lib/email-main/email-body/email-appspace/email-appspace.template.js":271,"./email/lib/email-main/email-body/email-body":265,"./email/lib/email-main/email-body/email-body.js":265,"./email/lib/email-main/email-body/email-body.template":446,"./email/lib/email-main/email-body/email-body.template.js":446,"./email/lib/email-main/email-body/email-cryptoappspace/email-cryptoappspace":272,"./email/lib/email-main/email-body/email-cryptoappspace/email-cryptoappspace.js":272,"./email/lib/email-main/email-body/email-cryptoappspace/email-cryptoappspace.template":273,"./email/lib/email-main/email-body/email-cryptoappspace/email-cryptoappspace.template.js":273,"./email/lib/email-main/email-body/email-detail/email-detail":268,"./email/lib/email-main/email-body/email-detail/email-detail.js":268,"./email/lib/email-main/email-body/email-detail/email-detail.template":269,"./email/lib/email-main/email-body/email-detail/email-detail.template.js":269,"./email/lib/email-main/email-body/email-form/email-form":266,"./email/lib/email-main/email-body/email-form/email-form.js":266,"./email/lib/email-main/email-body/email-form/email-form.template":267,"./email/lib/email-main/email-body/email-form/email-form.template.js":267,"./email/lib/email-main/email-body/email-list/email-list":256,"./email/lib/email-main/email-body/email-list/email-list-row.template":257,"./email/lib/email-main/email-body/email-list/email-list-row.template.js":257,"./email/lib/email-main/email-body/email-list/email-list.js":256,"./email/lib/email-main/email-body/email-list/email-list.template":131,"./email/lib/email-main/email-body/email-list/email-list.template.js":131,"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header":261,"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.js":261,"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template":262,"./email/lib/email-main/email-header/email-appspace-header/email-appspace-header.template.js":262,"./email/lib/email-main/email-header/email-cryptoappspace-header/email-cryptoappspace-header":263,"./email/lib/email-main/email-header/email-cryptoappspace-header/email-cryptoappspace-header.js":263,"./email/lib/email-main/email-header/email-cryptoappspace-header/email-cryptoappspace-header.template":264,"./email/lib/email-main/email-header/email-cryptoappspace-header/email-cryptoappspace-header.template.js":264,"./email/lib/email-main/email-header/email-detail-header/email-detail-header":255,"./email/lib/email-main/email-header/email-detail-header/email-detail-header.js":255,"./email/lib/email-main/email-header/email-detail-header/email-detail-header.template":258,"./email/lib/email-main/email-header/email-detail-header/email-detail-header.template.js":258,"./email/lib/email-main/email-header/email-form-header/email-form-header":259,"./email/lib/email-main/email-header/email-form-header/email-form-header.js":259,"./email/lib/email-main/email-header/email-form-header/email-form-header.template":260,"./email/lib/email-main/email-header/email-form-header/email-form-header.template.js":260,"./email/lib/email-main/email-header/email-header":130,"./email/lib/email-main/email-header/email-header.js":130,"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header":253,"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.js":253,"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template":254,"./email/lib/email-main/email-header/email-inbox-header/email-inbox-header.template.js":254,"./email/lib/email-main/email-main":251,"./email/lib/email-main/email-main.js":251,"./email/lib/email-main/email-main.template":252,"./email/lib/email-main/email-main.template.js":252,"./email/lib/email-sidebar/email-bars-menu":278,"./email/lib/email-sidebar/email-bars-menu.js":278,"./email/lib/email-sidebar/email-bars-menu.template":279,"./email/lib/email-sidebar/email-bars-menu.template.js":279,"./email/lib/email-sidebar/email-chat":280,"./email/lib/email-sidebar/email-chat.js":280,"./email/lib/email-sidebar/email-chat.template":447,"./email/lib/email-sidebar/email-chat.template.js":447,"./email/lib/email-sidebar/email-controls":276,"./email/lib/email-sidebar/email-controls.js":276,"./email/lib/email-sidebar/email-controls.template":277,"./email/lib/email-sidebar/email-controls.template.js":277,"./email/lib/email-sidebar/email-sidebar":274,"./email/lib/email-sidebar/email-sidebar.js":274,"./email/lib/email-sidebar/email-sidebar.template":275,"./email/lib/email-sidebar/email-sidebar.template.js":275,"./emailcollector/emailcollector":448,"./emailcollector/emailcollector.js":448,"./encrypt/encrypt":449,"./encrypt/encrypt.js":449,"./encrypt/lib/email-appspace/encrypt-appspace":450,"./encrypt/lib/email-appspace/encrypt-appspace.js":450,"./encrypt/lib/email-appspace/encrypt-appspace.template":281,"./encrypt/lib/email-appspace/encrypt-appspace.template.js":281,"./imperium/compile":1194,"./imperium/imperium":451,"./imperium/imperium.js":451,"./imperium/src/actions/action":452,"./imperium/src/actions/action.js":452,"./imperium/src/actions/activate":453,"./imperium/src/actions/activate.js":453,"./imperium/src/actions/bombardment":454,"./imperium/src/actions/bombardment.js":454,"./imperium/src/actions/counter":455,"./imperium/src/actions/counter.js":455,"./imperium/src/actions/ground_combat":456,"./imperium/src/actions/ground_combat.js":456,"./imperium/src/actions/post_agenda":457,"./imperium/src/actions/post_agenda.js":457,"./imperium/src/actions/pre_agenda":458,"./imperium/src/actions/pre_agenda.js":458,"./imperium/src/actions/riders":459,"./imperium/src/actions/riders.js":459,"./imperium/src/actions/space_combat":460,"./imperium/src/actions/space_combat.js":460,"./imperium/src/actions/strategy":461,"./imperium/src/actions/strategy.js":461,"./imperium/src/agendas/agendas":462,"./imperium/src/agendas/agendas.js":462,"./imperium/src/factions/jolnar":463,"./imperium/src/factions/jolnar.js":463,"./imperium/src/factions/muaat":464,"./imperium/src/factions/muaat.js":464,"./imperium/src/factions/sardakk":465,"./imperium/src/factions/sardakk.js":465,"./imperium/src/factions/sol":466,"./imperium/src/factions/sol.js":466,"./imperium/src/factions/xxcha":467,"./imperium/src/factions/xxcha.js":467,"./imperium/src/factions/yin":468,"./imperium/src/factions/yin.js":468,"./imperium/src/factions/yssaril":469,"./imperium/src/factions/yssaril.js":469,"./imperium/src/imperium-action-cards":470,"./imperium/src/imperium-action-cards.js":470,"./imperium/src/imperium-agenda-cards":471,"./imperium/src/imperium-agenda-cards.js":471,"./imperium/src/imperium-display":472,"./imperium/src/imperium-display.js":472,"./imperium/src/imperium-end":473,"./imperium/src/imperium-end.js":473,"./imperium/src/imperium-events":474,"./imperium/src/imperium-events.js":474,"./imperium/src/imperium-factions":475,"./imperium/src/imperium-factions.js":475,"./imperium/src/imperium-gameloop":476,"./imperium/src/imperium-gameloop.js":476,"./imperium/src/imperium-helpers":477,"./imperium/src/imperium-helpers.js":477,"./imperium/src/imperium-initialize":478,"./imperium/src/imperium-initialize.js":478,"./imperium/src/imperium-objectives":479,"./imperium/src/imperium-objectives.js":479,"./imperium/src/imperium-player":480,"./imperium/src/imperium-player.js":480,"./imperium/src/imperium-promissary":481,"./imperium/src/imperium-promissary.js":481,"./imperium/src/imperium-start":482,"./imperium/src/imperium-start.js":482,"./imperium/src/imperium-state":483,"./imperium/src/imperium-state-checks":484,"./imperium/src/imperium-state-checks.js":484,"./imperium/src/imperium-state-updates":485,"./imperium/src/imperium-state-updates.js":485,"./imperium/src/imperium-state.js":483,"./imperium/src/imperium-strategy-cards":486,"./imperium/src/imperium-strategy-cards.js":486,"./imperium/src/imperium-tech":487,"./imperium/src/imperium-tech.js":487,"./imperium/src/imperium-ui":488,"./imperium/src/imperium-ui.js":488,"./imperium/src/imperium-unit":489,"./imperium/src/imperium-unit.js":489,"./imperium/src/imperium-universe":490,"./imperium/src/imperium-universe.js":490,"./imperium/src/objectives/secret":491,"./imperium/src/objectives/secret.js":491,"./imperium/src/objectives/stage1":492,"./imperium/src/objectives/stage1.js":492,"./imperium/src/objectives/stage2":493,"./imperium/src/objectives/stage2.js":493,"./imperium/src/promissary/promissary":494,"./imperium/src/promissary/promissary.js":494,"./imperium/src/strategy/construction":495,"./imperium/src/strategy/construction.js":495,"./imperium/src/strategy/diplomacy":496,"./imperium/src/strategy/diplomacy.js":496,"./imperium/src/strategy/imperial":497,"./imperium/src/strategy/imperial.js":497,"./imperium/src/strategy/leadership":498,"./imperium/src/strategy/leadership.js":498,"./imperium/src/strategy/politics":499,"./imperium/src/strategy/politics.js":499,"./imperium/src/strategy/tech":500,"./imperium/src/strategy/tech.js":500,"./imperium/src/strategy/trade":501,"./imperium/src/strategy/trade.js":501,"./imperium/src/strategy/warfare":502,"./imperium/src/strategy/warfare.js":502,"./imperium/src/tech/blue":503,"./imperium/src/tech/blue.js":503,"./imperium/src/tech/green":504,"./imperium/src/tech/green.js":504,"./imperium/src/tech/red":505,"./imperium/src/tech/red.js":505,"./imperium/src/tech/units":506,"./imperium/src/tech/units.js":506,"./imperium/src/tech/yellow":507,"./imperium/src/tech/yellow.js":507,"./imperium/src/units/universal":508,"./imperium/src/units/universal.js":508,"./matomo/matomo":509,"./matomo/matomo.js":509,"./matomo/matomoHelpers":282,"./matomo/matomoHelpers.js":282,"./myqrcode/lib/email-appspace/myqrcode-appspace":283,"./myqrcode/lib/email-appspace/myqrcode-appspace.js":283,"./myqrcode/lib/email-appspace/myqrcode-appspace.template":284,"./myqrcode/lib/email-appspace/myqrcode-appspace.template.js":284,"./myqrcode/myqrcode":510,"./myqrcode/myqrcode.js":510,"./pandemic/pandemic":511,"./pandemic/pandemic.js":511,"./poker/poker":512,"./poker/poker.js":512,"./post/lib/arcade-posts/arcade-posts":285,"./post/lib/arcade-posts/arcade-posts.js":285,"./post/lib/arcade-posts/arcade-posts.template":286,"./post/lib/arcade-posts/arcade-posts.template.js":286,"./post/lib/arcade-posts/post-teaser.template":287,"./post/lib/arcade-posts/post-teaser.template.js":287,"./post/lib/post-main/post-main":291,"./post/lib/post-main/post-main.js":291,"./post/lib/post-main/post-main.template":292,"./post/lib/post-main/post-main.template.js":292,"./post/lib/post-main/post-teaser.template":293,"./post/lib/post-main/post-teaser.template.js":293,"./post/lib/post-main/post-thread.template":513,"./post/lib/post-main/post-thread.template.js":513,"./post/lib/post-overlay/post-create":133,"./post/lib/post-overlay/post-create.js":133,"./post/lib/post-overlay/post-create.template":290,"./post/lib/post-overlay/post-create.template.js":290,"./post/lib/post-overlay/post-view":132,"./post/lib/post-overlay/post-view-comment.template":289,"./post/lib/post-overlay/post-view-comment.template.js":289,"./post/lib/post-overlay/post-view.js":132,"./post/lib/post-overlay/post-view.template":288,"./post/lib/post-overlay/post-view.template.js":288,"./post/lib/post-sidebar/post-sidebar":294,"./post/lib/post-sidebar/post-sidebar.js":294,"./post/lib/post-sidebar/post-sidebar.template":295,"./post/lib/post-sidebar/post-sidebar.template.js":295,"./post/lib/post/new-post":514,"./post/lib/post/new-post.js":514,"./post/lib/post/new-post.template":296,"./post/lib/post/new-post.template.js":296,"./post/lib/post/show-post":515,"./post/lib/post/show-post.js":515,"./post/lib/post/show-post.template":297,"./post/lib/post/show-post.template.js":297,"./post/lib/style.template":134,"./post/lib/style.template.js":134,"./post/post":516,"./post/post.js":516,"./qrscanner/lib/add-contact":298,"./qrscanner/lib/add-contact-complete":300,"./qrscanner/lib/add-contact-complete.js":300,"./qrscanner/lib/add-contact-complete.template":301,"./qrscanner/lib/add-contact-complete.template.js":301,"./qrscanner/lib/add-contact.js":298,"./qrscanner/lib/add-contact.template":299,"./qrscanner/lib/add-contact.template.js":299,"./qrscanner/lib/scanner/scanner":528,"./qrscanner/lib/scanner/scanner.js":528,"./qrscanner/qrscanner":529,"./qrscanner/qrscanner.js":529,"./registry/lib/email-appspace/registry-appspace":530,"./registry/lib/email-appspace/registry-appspace.js":530,"./registry/lib/email-appspace/registry-appspace.template":302,"./registry/lib/email-appspace/registry-appspace.template.js":302,"./registry/lib/modal/registry-modal":303,"./registry/lib/modal/registry-modal-success.template":305,"./registry/lib/modal/registry-modal-success.template.js":305,"./registry/lib/modal/registry-modal.js":303,"./registry/lib/modal/registry-modal.template":304,"./registry/lib/modal/registry-modal.template.js":304,"./registry/registry":531,"./registry/registry.js":531,"./relay/relay":532,"./relay/relay.js":532,"./settings/lib/email-appspace/settings-appspace":306,"./settings/lib/email-appspace/settings-appspace.js":306,"./settings/lib/email-appspace/settings-appspace.template":307,"./settings/lib/email-appspace/settings-appspace.template.js":307,"./settings/settings":533,"./settings/settings.js":533,"./solitrio/solitrio":534,"./solitrio/solitrio.js":534,"./thirteen/thirteen":535,"./thirteen/thirteen.js":535,"./twilight/TODO":1246,"./twilight/compile":1247,"./twilight/src/cards/absurdum/brexit":536,"./twilight/src/cards/absurdum/brexit.js":536,"./twilight/src/cards/absurdum/kissingerisawarcriminal":537,"./twilight/src/cards/absurdum/kissingerisawarcriminal.js":537,"./twilight/src/cards/cold_war_crazies/berlinairlift":538,"./twilight/src/cards/cold_war_crazies/berlinairlift.js":538,"./twilight/src/cards/cold_war_crazies/communistrevolution":539,"./twilight/src/cards/cold_war_crazies/communistrevolution.js":539,"./twilight/src/cards/cold_war_crazies/philadelphia":540,"./twilight/src/cards/cold_war_crazies/philadelphia.js":540,"./twilight/src/cards/cold_war_crazies/sinoindian":541,"./twilight/src/cards/cold_war_crazies/sinoindian.js":541,"./twilight/src/cards/cold_war_crazies/sovietcoup":542,"./twilight/src/cards/cold_war_crazies/sovietcoup.js":542,"./twilight/src/cards/cold_war_crazies/titostalin":543,"./twilight/src/cards/cold_war_crazies/titostalin.js":543,"./twilight/src/cards/community/berlinagreement":544,"./twilight/src/cards/community/berlinagreement.js":544,"./twilight/src/cards/community/culturaldiplomacy":545,"./twilight/src/cards/community/culturaldiplomacy.js":545,"./twilight/src/cards/community/gouzenkoaffair":546,"./twilight/src/cards/community/gouzenkoaffair.js":546,"./twilight/src/cards/community/handshake":547,"./twilight/src/cards/community/handshake.js":547,"./twilight/src/cards/community/poliovaccine":548,"./twilight/src/cards/community/poliovaccine.js":548,"./twilight/src/cards/community/rustinredsquare":549,"./twilight/src/cards/community/rustinredsquare.js":549,"./twilight/src/cards/core/abmtreaty":550,"./twilight/src/cards/core/abmtreaty.js":550,"./twilight/src/cards/core/africa":551,"./twilight/src/cards/core/africa.js":551,"./twilight/src/cards/core/aldrichames":552,"./twilight/src/cards/core/aldrichames.js":552,"./twilight/src/cards/core/allende":553,"./twilight/src/cards/core/allende.js":553,"./twilight/src/cards/core/alliance":554,"./twilight/src/cards/core/alliance.js":554,"./twilight/src/cards/core/arabisraeli":555,"./twilight/src/cards/core/arabisraeli.js":555,"./twilight/src/cards/core/armsrace":556,"./twilight/src/cards/core/armsrace.js":556,"./twilight/src/cards/core/asia":557,"./twilight/src/cards/core/asia.js":557,"./twilight/src/cards/core/asknot":558,"./twilight/src/cards/core/asknot.js":558,"./twilight/src/cards/core/awacs":559,"./twilight/src/cards/core/awacs.js":559,"./twilight/src/cards/core/beartrap":560,"./twilight/src/cards/core/beartrap.js":560,"./twilight/src/cards/core/blockade":561,"./twilight/src/cards/core/blockade.js":561,"./twilight/src/cards/core/brezhnev":562,"./twilight/src/cards/core/brezhnev.js":562,"./twilight/src/cards/core/brushwar":563,"./twilight/src/cards/core/brushwar.js":563,"./twilight/src/cards/core/cambridge":564,"./twilight/src/cards/core/cambridge.js":564,"./twilight/src/cards/core/campdavid":565,"./twilight/src/cards/core/campdavid.js":565,"./twilight/src/cards/core/centralamerica":566,"./twilight/src/cards/core/centralamerica.js":566,"./twilight/src/cards/core/che":567,"./twilight/src/cards/core/che.js":567,"./twilight/src/cards/core/chernobyl":568,"./twilight/src/cards/core/chernobyl.js":568,"./twilight/src/cards/core/china":569,"./twilight/src/cards/core/china.js":569,"./twilight/src/cards/core/cia":570,"./twilight/src/cards/core/cia.js":570,"./twilight/src/cards/core/colonial":571,"./twilight/src/cards/core/colonial.js":571,"./twilight/src/cards/core/comecon":572,"./twilight/src/cards/core/comecon.js":572,"./twilight/src/cards/core/containment":573,"./twilight/src/cards/core/containment.js":573,"./twilight/src/cards/core/cubanmissile":574,"./twilight/src/cards/core/cubanmissile.js":574,"./twilight/src/cards/core/culturalrev":575,"./twilight/src/cards/core/culturalrev.js":575,"./twilight/src/cards/core/deathsquads":576,"./twilight/src/cards/core/deathsquads.js":576,"./twilight/src/cards/core/debtcrisis":577,"./twilight/src/cards/core/debtcrisis.js":577,"./twilight/src/cards/core/decolonization":578,"./twilight/src/cards/core/decolonization.js":578,"./twilight/src/cards/core/defectors":579,"./twilight/src/cards/core/defectors.js":579,"./twilight/src/cards/core/degaulle":580,"./twilight/src/cards/core/degaulle.js":580,"./twilight/src/cards/core/destalinization":581,"./twilight/src/cards/core/destalinization.js":581,"./twilight/src/cards/core/duckandcover":582,"./twilight/src/cards/core/duckandcover.js":582,"./twilight/src/cards/core/easteuropean":583,"./twilight/src/cards/core/easteuropean.js":583,"./twilight/src/cards/core/europe":584,"./twilight/src/cards/core/europe.js":584,"./twilight/src/cards/core/evilempire":585,"./twilight/src/cards/core/evilempire.js":585,"./twilight/src/cards/core/fidel":586,"./twilight/src/cards/core/fidel.js":586,"./twilight/src/cards/core/fiveyearplan":587,"./twilight/src/cards/core/fiveyearplan.js":587,"./twilight/src/cards/core/flowerpower":588,"./twilight/src/cards/core/flowerpower.js":588,"./twilight/src/cards/core/formosan":589,"./twilight/src/cards/core/formosan.js":589,"./twilight/src/cards/core/glastnost":590,"./twilight/src/cards/core/glastnost.js":590,"./twilight/src/cards/core/grainsales":591,"./twilight/src/cards/core/grainsales.js":591,"./twilight/src/cards/core/howilearned":592,"./twilight/src/cards/core/howilearned.js":592,"./twilight/src/cards/core/indopaki":593,"./twilight/src/cards/core/indopaki.js":593,"./twilight/src/cards/core/indreds":594,"./twilight/src/cards/core/indreds.js":594,"./twilight/src/cards/core/irancontra":595,"./twilight/src/cards/core/irancontra.js":595,"./twilight/src/cards/core/iranianhostage":596,"./twilight/src/cards/core/iranianhostage.js":596,"./twilight/src/cards/core/iraniraq":597,"./twilight/src/cards/core/iraniraq.js":597,"./twilight/src/cards/core/ironlady":598,"./twilight/src/cards/core/ironlady.js":598,"./twilight/src/cards/core/johnpaul":599,"./twilight/src/cards/core/johnpaul.js":599,"./twilight/src/cards/core/junta":600,"./twilight/src/cards/core/junta.js":600,"./twilight/src/cards/core/kal007":601,"./twilight/src/cards/core/kal007.js":601,"./twilight/src/cards/core/kitchendebates":602,"./twilight/src/cards/core/kitchendebates.js":602,"./twilight/src/cards/core/koreanwar":603,"./twilight/src/cards/core/koreanwar.js":603,"./twilight/src/cards/core/liberation":604,"./twilight/src/cards/core/liberation.js":604,"./twilight/src/cards/core/lonegunman":605,"./twilight/src/cards/core/lonegunman.js":605,"./twilight/src/cards/core/marine":606,"./twilight/src/cards/core/marine.js":606,"./twilight/src/cards/core/marshall":607,"./twilight/src/cards/core/marshall.js":607,"./twilight/src/cards/core/mideast":608,"./twilight/src/cards/core/mideast.js":608,"./twilight/src/cards/core/missileenvy":609,"./twilight/src/cards/core/missileenvy.js":609,"./twilight/src/cards/core/muslimrevolution":610,"./twilight/src/cards/core/muslimrevolution.js":610,"./twilight/src/cards/core/nasser":611,"./twilight/src/cards/core/nasser.js":611,"./twilight/src/cards/core/nato":612,"./twilight/src/cards/core/nato.js":612,"./twilight/src/cards/core/naziscientist":613,"./twilight/src/cards/core/naziscientist.js":613,"./twilight/src/cards/core/nixon":614,"./twilight/src/cards/core/nixon.js":614,"./twilight/src/cards/core/norad":615,"./twilight/src/cards/core/norad.js":615,"./twilight/src/cards/core/northseaoil":616,"./twilight/src/cards/core/northseaoil.js":616,"./twilight/src/cards/core/nuclearsubs":617,"./twilight/src/cards/core/nuclearsubs.js":617,"./twilight/src/cards/core/nucleartestban":618,"./twilight/src/cards/core/nucleartestban.js":618,"./twilight/src/cards/core/oas":619,"./twilight/src/cards/core/oas.js":619,"./twilight/src/cards/core/olympic":620,"./twilight/src/cards/core/olympic.js":620,"./twilight/src/cards/core/onesmallstep":621,"./twilight/src/cards/core/onesmallstep.js":621,"./twilight/src/cards/core/opec":622,"./twilight/src/cards/core/opec.js":622,"./twilight/src/cards/core/ortega":623,"./twilight/src/cards/core/ortega.js":623,"./twilight/src/cards/core/panamacanal":624,"./twilight/src/cards/core/panamacanal.js":624,"./twilight/src/cards/core/pershing":625,"./twilight/src/cards/core/pershing.js":625,"./twilight/src/cards/core/portuguese":626,"./twilight/src/cards/core/portuguese.js":626,"./twilight/src/cards/core/puppet":627,"./twilight/src/cards/core/puppet.js":627,"./twilight/src/cards/core/quagmire":628,"./twilight/src/cards/core/quagmire.js":628,"./twilight/src/cards/core/reagan":629,"./twilight/src/cards/core/reagan.js":629,"./twilight/src/cards/core/redscare":630,"./twilight/src/cards/core/redscare.js":630,"./twilight/src/cards/core/reformer":631,"./twilight/src/cards/core/reformer.js":631,"./twilight/src/cards/core/romanian":632,"./twilight/src/cards/core/romanian.js":632,"./twilight/src/cards/core/sadat":633,"./twilight/src/cards/core/sadat.js":633,"./twilight/src/cards/core/saltnegotiations":634,"./twilight/src/cards/core/saltnegotiations.js":634,"./twilight/src/cards/core/seasia":635,"./twilight/src/cards/core/seasia.js":635,"./twilight/src/cards/core/shuttle":636,"./twilight/src/cards/core/shuttle.js":636,"./twilight/src/cards/core/socgov":637,"./twilight/src/cards/core/socgov.js":637,"./twilight/src/cards/core/solidarity":638,"./twilight/src/cards/core/solidarity.js":638,"./twilight/src/cards/core/southafrican":639,"./twilight/src/cards/core/southafrican.js":639,"./twilight/src/cards/core/southamerica":640,"./twilight/src/cards/core/southamerica.js":640,"./twilight/src/cards/core/specialrelation":641,"./twilight/src/cards/core/specialrelation.js":641,"./twilight/src/cards/core/starwars":642,"./twilight/src/cards/core/starwars.js":642,"./twilight/src/cards/core/suezcrisis":643,"./twilight/src/cards/core/suezcrisis.js":643,"./twilight/src/cards/core/summit":644,"./twilight/src/cards/core/summit.js":644,"./twilight/src/cards/core/teardown":645,"./twilight/src/cards/core/teardown.js":645,"./twilight/src/cards/core/tehran":646,"./twilight/src/cards/core/tehran.js":646,"./twilight/src/cards/core/terrorism":647,"./twilight/src/cards/core/terrorism.js":647,"./twilight/src/cards/core/truman":648,"./twilight/src/cards/core/truman.js":648,"./twilight/src/cards/core/u2":649,"./twilight/src/cards/core/u2.js":649,"./twilight/src/cards/core/unintervention":650,"./twilight/src/cards/core/unintervention.js":650,"./twilight/src/cards/core/usjapan":651,"./twilight/src/cards/core/usjapan.js":651,"./twilight/src/cards/core/ussuri":652,"./twilight/src/cards/core/ussuri.js":652,"./twilight/src/cards/core/vietnamrevolts":653,"./twilight/src/cards/core/vietnamrevolts.js":653,"./twilight/src/cards/core/voiceofamerica":654,"./twilight/src/cards/core/voiceofamerica.js":654,"./twilight/src/cards/core/wargames":655,"./twilight/src/cards/core/wargames.js":655,"./twilight/src/cards/core/warsawpact":656,"./twilight/src/cards/core/warsawpact.js":656,"./twilight/src/cards/core/willybrandt":657,"./twilight/src/cards/core/willybrandt.js":657,"./twilight/src/cards/core/wwby":658,"./twilight/src/cards/core/wwby.js":658,"./twilight/src/cards/core/yuri":659,"./twilight/src/cards/core/yuri.js":659,"./twilight/src/cards/end_of_history/breakthroughatlopnor":660,"./twilight/src/cards/end_of_history/breakthroughatlopnor.js":660,"./twilight/src/cards/end_of_history/eurocommunism":661,"./twilight/src/cards/end_of_history/eurocommunism.js":661,"./twilight/src/cards/end_of_history/greatsociety":662,"./twilight/src/cards/end_of_history/greatsociety.js":662,"./twilight/src/cards/end_of_history/imftreaty":663,"./twilight/src/cards/end_of_history/imftreaty.js":663,"./twilight/src/cards/end_of_history/manwhosavedtheworld":664,"./twilight/src/cards/end_of_history/manwhosavedtheworld.js":664,"./twilight/src/cards/end_of_history/nationbuilding":665,"./twilight/src/cards/end_of_history/nationbuilding.js":665,"./twilight/src/cards/end_of_history/perestroika":666,"./twilight/src/cards/end_of_history/perestroika.js":666,"./twilight/src/cards/end_of_history/peronism":667,"./twilight/src/cards/end_of_history/peronism.js":667,"./twilight/src/twilight-end":668,"./twilight/src/twilight-end.js":668,"./twilight/src/twilight-start":669,"./twilight/src/twilight-start.js":669,"./twilight/twilight":670,"./twilight/twilight.js":670,"./website/lib/data":671,"./website/lib/data.js":671,"./website/lib/data.template":308,"./website/lib/data.template.js":308,"./website/lib/subpage/token/pools.template":309,"./website/lib/subpage/token/pools.template.js":309,"./website/lib/subpage/token/token.template":310,"./website/lib/subpage/token/token.template.js":310,"./website/lib/subpage/token/tokenburn.template":311,"./website/lib/subpage/token/tokenburn.template.js":311,"./website/website":672,"./website/website.js":672,"./wordblocks/wordblocks":673,"./wordblocks/wordblocks.js":673};function n(e){var t=i(e);return a(t)}function i(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=i,e.exports=n,n.id=1128},function(e,t){e.exports=datetimeFormatter=function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth();r++;var n=t.getDate(),i=t.getHours(),s=t.getMinutes();return{years:a,months:r,days:n,hours:i,minutes:s=1==s.toString().length?"0".concat(s):"".concat(s)}},e.exports=datetimeRelative=function(e){var t=new Date,a=(t.getTime()-e)/1e3;return a<60?parseInt(a)+"s":a<3600?parseInt(a/60)+"m":a<=86400?parseInt(a/3600)+"h":a>86400?(mydate=new Date(e),day=mydate.getDate(),month=mydate.toDateString().match(/ [a-zA-Z]*/)[0].replace(" ",""),year=mydate.getFullYear()==t.getFullYear()?"":" "+mydate.getFullYear(),day+" "+month+year):void 0}},function(e,t){e.exports=SaitoOverlayTemplate=function(e){return e?'  \n      <div id="saito-overlay" class="saito-overlay">\n        <div id="saito-overlay-closebox" class="saito-overlay-closebox"><i class="fas fa-times-circle saito-overlay-closebox-btn"></i></div>\n      </div>\n      <div id="saito-overlay-backdrop" class="saito-overlay-backdrop"></div>\n    ':'  \n      <div id="saito-overlay" class="saito-overlay"></div>\n      <div id="saito-overlay-backdrop" class="saito-overlay-backdrop"></div>\n    '}},function(e,t){e.exports=SaitoHeaderTemplate=function(e,t){return'\n\n  <div id="saito-header" class="header header-home">\n    <div class="header-wrapper">\n      <a id="header-logo-link" href="/"><img class="logo" src="/saito/img/logo.svg"></a>\n      <div id="header-icon-links" class="header-icon-links">\n        <div id="header-mini-wallet" class="header-mini-wallet">\n          <span id="header-username" class="header-username"></span>\n        </div>\n        <i id="navigator" class="header-icon icon-med fas fa-bars"></i>\n      </div>\n\n      <div id="settings-dropdown" class="header-dropdown">\n        <div class="personal-info">\n          <img id="header-profile-photo" class="header-profile-photo" />\n          <div class="account-info">\n            <div id="profile-public-key" class="profile-public-key"></div>\n            <div class="saito-select">\n              <select id="header-token-select" class="saito-slct"></select>\n            </div>\n            </div>\n        </div>\n\n        <center><hr width="98%" style="color:#888"/></center>\n\n        <div class="wallet-actions">\n          <div class="wallet-action-row" id="header-dropdown-backup-wallet">\n            <span class="scan-qr-info"><i class="settings-fas-icon fas fa-copy"></i> Backup Access Keys</span>\n          </div>\n          <div class="wallet-action-row" id="header-dropdown-restore-wallet">\n            <span class="scan-qr-info"><i class="settings-fas-icon fas fa-redo"></i> Restore Access Keys</span>\n\t    <div style="display:none"><input id="saito-header-file-input" class="saito-header-file-input" type="file" name="name" style="display:none;" /></div>\n          </div>\n          <div class="wallet-action-row" id="header-dropdown-settings">\n            <span class="scan-qr-info"><i class="settings-fas-icon fas fa-wrench"></i> Settings </span>\n          </div>\n          <div class="wallet-action-row" id="header-dropdown-scan-qr">\n            <span class="scan-qr-info"><i class="settings-fas-icon fas fa-qrcode"></i> Scan </span>\n          </div>\n        </div>\n       </div>\n     </div>\n  '}},function(e,t,a){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,a){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,a){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(a):n.value}})(e,t,a||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=l(e);if(t){var n=l(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return c(this,a)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,a,r,c=o(u);function u(e,t){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),0==(a=c.call(this,e)).browser_active&&(a.browser_active=1),""==a.name&&(a.name="UI Component"),a}return t=u,(a=[{key:"initialize",value:function(e){e.modules.uimods.includes(this)||e.modules.uimods.push(this),i(l(u.prototype),"initialize",this).call(this,e)}}])&&n(t.prototype,a),r&&n(t,r),u}(a(15));e.exports=u},function(e,t){function a(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shown=!1}var t,r,n;return t=e,(r=[{key:"render",value:function(e,t){if(!document.getElementById("modules-dropdown")){var a='\n      <hr/>\n      <div id="modules-dropdown" class="header-dropdown-links">\n      ';e.modules.getRespondTos("header-dropdown").forEach((function(e,t){a+='<div class="wallet-action-row"><a id="nav-'.concat(e.name,'" href="/').concat(e.slug,'" class="wallet-action-nav-link"><i class="settings-fas-icon ').concat(e.icon_fa,'"></i> ').concat(e.name,"</a></div>")})),a+="</div><hr>",e.browser.addElementToDom(a,"settings-dropdown"),this.attachEvents(e,t)}this.shown?document.querySelector("#settings-dropdown").classList.add("show-right-sidebar"):document.querySelector("#settings-dropdown").classList.remove("show-right-sidebar")}},{key:"attachEvents",value:function(e,t){var a=this,r=function(r){document.querySelectorAll(".wallet-action-row, #modules-dropdown a").forEach((function(e,t){r.currentTarget})),a.shown=!1,a.render(e,t)};window.removeEventListener("click",r),window.addEventListener("click",r),document.querySelectorAll(".wallet-action-row .wallet-action-nav-link").forEach((function(t,a){t.onclick=function(t){var a=t.currentTarget.id.replace("nav-","");e.browser.logMatomoEvent("Navigation","HeaderDropdownNavigationClick",a)}})),document.querySelector("#settings-dropdown").addEventListener("click",(function(e){e.cancelBubble=!0})),document.querySelectorAll("#header-mini-wallet, #navigator").forEach((function(r,n){r.onclick=function(r){if(a.shown=!a.shown,a.shown){var n=document.querySelector(".chat-box-close");n&&n.click()}a.render(e,t),r.cancelBubble=!0}}))}}])&&a(t.prototype,r),n&&a(t,n),e}();e.exports=r},function(e,t){e.exports=archiver},function(e,t,a){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),a={},r=0;r<t.length;r++)a[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return a},n=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],a=0;a<arguments.length;a++)t.push(o(arguments[a]));return t.join(" ")}a=1;for(var r=arguments,i=r.length,s=String(e).replace(n,(function(e){if("%%"===e)return"%";if(a>=i)return e;switch(e){case"%s":return String(r[a++]);case"%d":return Number(r[a++]);case"%j":try{return JSON.stringify(r[a++])}catch(e){return"[Circular]"}default:return e}})),c=r[a];a<i;c=r[++a])m(c)||!_(c)?s+=" "+c:s+=" "+o(c);return s},t.deprecate=function(a,r){if(void 0!==e&&!0===e.noDeprecation)return a;if(void 0===e)return function(){return t.deprecate(a,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),n=!0}return a.apply(this,arguments)}};var i,s={};function o(e,a){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(a)?r.showHidden=a:a&&t._extend(r,a),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),u(r,e,r.depth)}function c(e,t){var a=o.styles[t];return a?"["+o.colors[a][0]+"m"+e+"["+o.colors[a][1]+"m":e}function l(e,t){return e}function u(e,a,r){if(e.customInspect&&a&&k(a.inspect)&&a.inspect!==t.inspect&&(!a.constructor||a.constructor.prototype!==a)){var n=a.inspect(r,e);return b(n)||(n=u(e,n,r)),n}var i=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(b(t)){var a="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(a,"string")}if(g(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,a);if(i)return i;var s=Object.keys(a),o=function(e){var t={};return e.forEach((function(e,a){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(a)),x(a)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return d(a);if(0===s.length){if(k(a)){var c=a.name?": "+a.name:"";return e.stylize("[Function"+c+"]","special")}if(v(a))return e.stylize(RegExp.prototype.toString.call(a),"regexp");if(w(a))return e.stylize(Date.prototype.toString.call(a),"date");if(x(a))return d(a)}var l,_="",S=!1,P=["{","}"];(h(a)&&(S=!0,P=["[","]"]),k(a))&&(_=" [Function"+(a.name?": "+a.name:"")+"]");return v(a)&&(_=" "+RegExp.prototype.toString.call(a)),w(a)&&(_=" "+Date.prototype.toUTCString.call(a)),x(a)&&(_=" "+d(a)),0!==s.length||S&&0!=a.length?r<0?v(a)?e.stylize(RegExp.prototype.toString.call(a),"regexp"):e.stylize("[Object]","special"):(e.seen.push(a),l=S?function(e,t,a,r,n){for(var i=[],s=0,o=t.length;s<o;++s)A(t,String(s))?i.push(p(e,t,a,r,String(s),!0)):i.push("");return n.forEach((function(n){n.match(/^\d+$/)||i.push(p(e,t,a,r,n,!0))})),i}(e,a,r,o,s):s.map((function(t){return p(e,a,r,o,t,S)})),e.seen.pop(),function(e,t,a){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return a[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+a[1];return a[0]+t+" "+e.join(", ")+" "+a[1]}(l,_,P)):P[0]+_+P[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,a,r,n,i){var s,o,c;if((c=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?o=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(o=e.stylize("[Setter]","special")),A(r,n)||(s="["+n+"]"),o||(e.seen.indexOf(c.value)<0?(o=m(a)?u(e,c.value,null):u(e,c.value,a-1)).indexOf("\n")>-1&&(o=i?o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),y(s)){if(i&&n.match(/^\d+$/))return o;(s=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+o}function h(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function m(e){return null===e}function g(e){return"number"==typeof e}function b(e){return"string"==typeof e}function y(e){return void 0===e}function v(e){return _(e)&&"[object RegExp]"===S(e)}function _(e){return"object"==typeof e&&null!==e}function w(e){return _(e)&&"[object Date]"===S(e)}function x(e){return _(e)&&("[object Error]"===S(e)||e instanceof Error)}function k(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function P(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(a){if(y(i)&&(i=e.env.NODE_DEBUG||""),a=a.toUpperCase(),!s[a])if(new RegExp("\\b"+a+"\\b","i").test(i)){var r=e.pid;s[a]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",a,r,e)}}else s[a]=function(){};return s[a]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=f,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=v,t.isObject=_,t.isDate=w,t.isError=x,t.isFunction=k,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=a(1136);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[P(e.getHours()),P(e.getMinutes()),P(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=a(1),t._extend=function(e,t){if(!t||!_(t))return e;for(var a=Object.keys(t),r=a.length;r--;)e[a[r]]=t[a[r]];return e};var M="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(e,t){if(!e){var a=new Error("Promise was rejected with a falsy value");a.reason=e,e=a}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(M&&e[M]){var t;if("function"!=typeof(t=e[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,a,r=new Promise((function(e,r){t=e,a=r})),n=[],i=0;i<arguments.length;i++)n.push(arguments[i]);n.push((function(e,r){e?a(e):t(r)}));try{e.apply(this,n)}catch(e){a(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),M&&Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=M,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function a(){for(var a=[],r=0;r<arguments.length;r++)a.push(arguments[r]);var n=a.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var i=this,s=function(){return n.apply(i,arguments)};t.apply(this,a).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(T,t,s)}))}return Object.setPrototypeOf(a,Object.getPrototypeOf(t)),Object.defineProperties(a,r(t)),a}}).call(this,a(12))},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){e.exports=child_process},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(1139),i=a(1140),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}var t,a,s;return t=e,(a=[{key:"render",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arcade",r=arguments.length>3?arguments[3]:void 0;document.getElementById("saito-carousel")||e.browser.prependElementToDom(n(),document.getElementById(r)),this.addLeaves(e,a),document.querySelector("#saito-carousel").onclick=function(){e.browser.logMatomoEvent("UXError","ArcadeUXError","CarouselClickAttempt")}}},{key:"attachEvents",value:function(e,t){}},{key:"addLeaves",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arcade";carouselElem=document.querySelector(".carousel-wrapper"),carouselElem.innerHTML+="",e.modules.respondTo(t+"-carousel").forEach((function(e,a){var r=e.respondTo(t+"-carousel");r&&(carouselElem.innerHTML+=i(e,r))}))}}])&&r(t.prototype,a),s&&r(t,s),e}();e.exports=s},function(e,t){e.exports=SaitoGameCarouselTemplate=function(){return'\n  <div id="saito-carousel" class="saito-carousel">\n    <div id="saito-carousel-wrapper" class="carousel-wrapper">\n      <img src="/saito/img/16by5.png" class="carousel-spacer" />\n    </div>\n  </div>\n  '}},function(e,t){e.exports=AracadeGameCarouselLeafTemplate=function(e,t){return'\n         <div class="leaf" style="background: url('.concat(t.background,');background-size:cover">\n           <div class="big">').concat(t.title,"</div>\n         </div>\n  ")}},function(e,t){e.exports=ModalRegisterUsernameTemplate=function(){return'  \n  <div class="welcome-modal-wrapper">\n    <div class="welcome-modal-action">\n      <div class="welcome-modal-left">\n        <div class="welcome-modal-header">Register a Username</h1></div>\n        <div class="welcome-modal-main">\n          <div style="margin:1em 0">Please register a Saito username:</div>\n          <div style="display:flex;">\n      <input style="width:60%; color:black; background:#efefef;" class="username-registry-input" id="registry-input" type="text" placeholder="username"><b style="margin: 1em 1em 1em 10px;">@saito</b>\n      <input style="display: var(--saito-wu);" id="name" name="name" type="text"></input>\n      <button id="registry-modal-button" style="clear:both; margin:unset; margin-left:0px; min-width:6em; font-size:0.7em;background:#efefef;border:1px solid var(--saito-red);color: var(--saito-cyber-black);">REGISTER USERNAME</button>\n          </div>\n        </div>\n        <div class="welcome-modal-info">\n            <div class="tip"><b>What is a Saito username? <i class="fas fa-info-circle"></i></b>\n            <div class="tiptext">Saito usernames can be used to send and receive messages. Some applications require Saito usernames to help prevent robots/spam. It takes a minute to register an address. You should get one!</div>\n            </div>\n         </div>\n      </div>\n    </div>\n  </div>\n  '}},function(e,t){e.exports=ModalRegisterEmailTemplate=function(e,t){var a={header:"Connect an Email Address:",description:"Email yourself an encrypted backup of your wallet:",button:"EMAIL BACKUP",opt_out:"I've already got a backup",has_newsletter_option:!0,has_tip_text:!0,tip_text:"Your browser will encrypt your wallet and email you a copy. No-one but you will ever have access to your private keys. If you opt-in for email your browser will separately request periodic updates from the Saito project."};return e===t.NEWSLETTER?a={header:"Sign up for the Newsletter:",description:"Keep up to date on the latest Saito news",button:"SIGN UP",opt_out:"Nevermind, I'm not interested in novel consensus mechanisms",has_newsletter_option:!1,has_tip_text:!1,tip_text:""}:e===t.PRIVATESALE?a={header:"Register interest in private sale:",description:"Provide your email to register interest in participating in a private sale of Saito Tokens.",button:"SIGN UP",opt_out:"Nevermind, I'm not interested in novel consensus mechanisms",has_newsletter_option:!0,has_tip_text:!1,tip_text:""}:e===t.REGISTEREMAIL&&(a={header:"Register an email address:",description:"Your email address will be stored in your local database only, this might be useful in the future for peer-to-peer applications",button:"Register",opt_out:"Nevermind",has_newsletter_option:!0,has_tip_text:!1,tip_text:""}),'  \n  <div class="welcome-modal-wrapper">\n    <div class="welcome-modal-action">\n      <div class="welcome-modal-left">\n        <div class="welcome-modal-header">'.concat(a.header,'</h1></div>\n        <div class="welcome-modal-main">\n          <div style="margin:1em 0">').concat(a.description,'</div>\n          <div style="display:flex;">\n            <input style="width:100%; color:black; font-size:1em; background:white;margin:0 1em 0 0;" id="registry-input" type="text" placeholder="email@domain.com">\n            <input style="display: var(--saito-wu);" id="name" name="name" type="text"></input>\n            <button id="backup-email-button" style="clear:both; margin:unset; margin-left:0px; min-width:6em; font-size:0.7em;">').concat(a.button,"</button>\n          </div>\n          ").concat(a.has_newsletter_option?'<div style="font-size:0.9em;height:30px;margin-top:10px; display:"><input type="checkbox" id="signup" style="float:left;width:2em;height:2em;margin-right:10px" checked /><span style="padding-top:8px">Send periodic updates on important Saito news (max monthly)</span></div>':"",'\n        </div>\n        <div class="welcome-modal-info">\n            ').concat(a.has_tip_text?'<div class="tip"><b>How does this work? <i class="fas fa-info-circle"></i></b><div class="tiptext">'.concat(a.tip_text,"</div></div>"):"","\n          </div>\n      </div>\n    </div>\n  </div>\n  ")}},function(e,t){e.exports=ArcadePostsTemplate=()=>'\n    <div id="arcade-posts" class="arcade-posts">\n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n      <div data-id="" id="arcade-post-" class="arcade-post">\n        <div id="arcade-post-title" class="arcade-post-title">Saito selected for Web3 Foundation gaming standard</div>\n        <div id="arcade-post-sublinks" class="arcade-post-sublinks">\n\t  <div id="" class="arcade-post-posted-by">posted by </div>\n\t  <div id="" class="arcade-post-user">david@saito</div>\n\t  <div id="" class="arcade-post-comments">2 comments</div>\n\t  <div id="" class="arcade-post-report">report</div>\n        </div>\n      </div> \n\n    </div>\n\n<style type="text/css">\n</style>\n\n  '},function(e,t,a){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(1145),s=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:150;r(this,e),this.app=t,this.height=a,this.width=n}var t,a,s;return t=e,(a=[{key:"render",value:function(e,t){var a=36e5;t&&parseInt(t.clock_limit)>0&&(a=parseInt(t.clock_limit)-parseInt(t.clock_spent));try{document.getElementById("game-clock")||document.body.append(e.browser.htmlToElement(i()))}catch(e){}this.displayTime(a)}},{key:"attachEvents",value:function(e,t){}},{key:"returnHours",value:function(e){return Math.floor(this.returnMinutes(e)/60)}},{key:"returnMinutes",value:function(e){return Math.floor(this.returnSeconds(e)/60)}},{key:"returnSeconds",value:function(e){return Math.floor(e/1e3)}},{key:"displayTime",value:function(e){var t=this.returnHours(e),a=this.returnMinutes(e),r=this.returnSeconds(e);r-=60*a,a-=60*t,t<0&&(t=0),a<0&&(a=0),r<0&&(r=0),t<10&&(t="0"+t),a<10&&(a="0"+a),r<10&&(r="0"+r);try{document.getElementById("clockbox-hours").innerHTML=t,document.getElementById("clockbox-minutes").innerHTML=a,document.getElementById("clockbox-seconds").innerHTML=r}catch(e){}}}])&&n(t.prototype,a),s&&n(t,s),e}();e.exports=s},function(e,t){e.exports=GameClockTemplate=function(){return'\n    <div id="clockbox" class="clockbox"><span id="clockbox-hours">00</span>:<span id="clockbox-minutes">00</span>:<span id="clockbox-seconds">00</span></div>\n  '}},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(1147),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.logs=[],this.logs_length=150,this.logs_last_msg="",this.mod=null}var t,a,i;return t=e,(a=[{key:"render",value:function(e,t){null==this.mod&&(this.mod=t),document.querySelector("#log")||e.browser.addElementToDom(n());var a=document.getElementById("log");a&&(a.innerHTML=this.logs.slice(0,this.logs_length).map((function(e){return"> <span> ".concat(e," </span>")})).join("<br>"))}},{key:"attachEvents",value:function(e,t){var a=this,r=0,n=0;document.querySelector("#log").onmousedown=function(e){r=e.clientX,n=e.clientY},document.querySelector("#log").onmouseup=function(e){Math.abs(r-e.clientX)>4||Math.abs(n-e.clientY)>4||a.toggleLog()}}},{key:"toggleLog",value:function(){document.querySelector("#log").toggleClass("log-lock")}},{key:"updateLog",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=1;e===this.logs_last_msg&&(r=0,e.indexOf("removes")>-1&&(r=1),e.indexOf("places")>-1&&(r=1)),1!=r&&1!=a||(this.logs_last_msg=e,this.logs.unshift(e),this.render(this.app,this.mod),t())}}])&&r(t.prototype,a),i&&r(t,i),e}();e.exports=i},function(e,t){e.exports=GameLogTemplate=function(){return'  \n    <div id="log" class="log"></div>\n  '}},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(1149),i=(a(194),a(1150)),s=i.DESKTOP,o=i.MOBILE_PORTRAIT,c=i.MOBILE_LANDSCAPE,l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.game_mod=null,this.status="",this.initial_render=0,this.mode=0,this.game_mod=null,this.use_cardbox=1,this.use_cardfan=1,this.use_board_sizer=1,this.card_types=[]}var t,a,i;return t=e,(a=[{key:"render",value:function(e,t){if(this.game_mod=t,1==t.browser_active&&0==this.initial_render){document.querySelector(".hud")||(document.body.innerHTML+=n());var a=document.querySelector(".hud"),r=document.querySelector(".hud-body"),i=document.querySelector(".hud-header");0==this.mode&&(a.classList.add("hud-long"),a.appendChild(i),a.appendChild(r)),1==this.mode&&(a.classList.add("hud-square"),a.appendChild(i),a.appendChild(r)),2==this.mode&&(a.classList.add("hud-vertical"),a.appendChild(i),a.appendChild(r)),1==this.use_cardbox&&t.cardbox.render(e,t),this.initial_render=1,this.resizeHudHeight(),this.resizeHudWidth()}}},{key:"attachEvents",value:function(e,t){var a=this;try{var r=this;e.browser.makeDraggable("hud","hud-header",(function(){r.resizeHudHeight()}))}catch(e){}try{var n=document.getElementById("hud-toggle-button");n.onclick=function(e){switch(e.stopPropagation(),a.checkSizeAndOrientation()){case s:hud.classList.toggle("hud-hidden-vertical"),n.classList.toggle("fa-caret-up"),n.classList.toggle("fa-caret-down")}}}catch(e){}}},{key:"attachCardEvents",value:function(e,t){console.log("attach Card events"),0!=t.browser_active&&(t.cardbox.attachEvents(e,t),0==this.mode&&this.resizeHudWidth())}},{key:"renderStatus",value:function(e,t){try{var a=document.getElementById("status");if(a){document.getElementById("status");var r=document.getElementById("status-overlay");r&&"none"!=r.style.display&&(document.getElementById("status-overlay").style.display="none",a.style.display="block"),a.innerHTML!==this.status&&(a.innerHTML=this.status),null!=this.status_callback&&this.status_callback()}}catch(e){}}},{key:"updateStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.status=e,this.status_callback=t,this.renderStatus(),null!=this.game_mod&&1==this.use_cardbox&&this.game_mod.cardbox.attachEvents(this.app,this.game_mod)}},{key:"toggleHud",value:function(e,t){switch(this.checkSizeAndOrientation()){case s:e.style.top=null,e.style.left=null}}},{key:"checkSizeAndOrientation",value:function(){return window.matchMedia("(orientation: landscape)").matches&&window.innerHeight<=700?c:window.matchMedia("(orientation: portrait)").matches&&window.innerWidth<=600?o:s}},{key:"addCardType",value:function(e,t,a){for(var r=0;r<this.card_types.length;r++)if(this.card_types[r].css===e)return;this.card_types.push({css:e,action:t,mycallback:a}),this.game_mod.cardbox.addCardType(e,t,a)}},{key:"resizeHudHeight",value:function(){}},{key:"resizeHudWidth",value:function(){var e=document.getElementById("hud"),t=document.querySelector(".status-cardbox"),a=document.querySelectorAll(".cardbox-hud");if(a&&a[0]){var r=Math.floor(1.1*a[0].getBoundingClientRect().width);if(t){var n=r*t.childElementCount;n<500&&(n=500),e.style.width=n+"px",e.style.minWidth=n+"px",e.style.maxWidth=n+"px"}}}}])&&r(t.prototype,a),i&&r(t,i),e}();e.exports=l},function(e,t){e.exports=GameHudTemplate=function(){return'\n    <div id="hud" class="hud"></div>\n    <div id="hud-header" class="hud-header"></div>\n    <div id="hud-body" class="hud-body">\n      <div id="status" class="status"></div>\n      <div id="status-overlay" class="status-overlay"></div>\n    </div>\n  '}},function(e,t){e.exports={DESKTOP:"desktop",MOBILE_PORTRAIT:"mobile_portrait",MOBILE_LANDSCAPE:"mobile_desktop"}},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(1152),i=a(1153),s=a(1154),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.icons=[],this.options=[],this.sub_options=[],this.sub_menu_open=""}var t,a,o;return t=e,(a=[{key:"render",value:function(e,t){document.querySelector(".game-menu")||e.browser.addElementToDom(n());for(var a="<ul>",r=0;r<this.icons.length;r++)a+=i(this.icons[r]);for(var o=0;o<this.options.length;o++)a+=s(this.options[o],this.sub_options[o]);a+="</ul>",document.querySelector(".game-menu").innerHTML=a}},{key:"attachEvents",value:function(e,t){for(var a=this,r=0;r<this.options.length;r++){var n="#"+this.options[r].id,i=document.querySelector(n);i.ontouch=function(r){for(var n=r.currentTarget.id,i=0;i<a.options.length;i++)if(a.options[i].id===n){if(a.sub_menu_open===n)return a.hideSubMenus(),void r.stopPropagation();null!=a.options[i].callback&&(a.options[i].callback(e,t),r.stopPropagation())}},i.onclick=function(r){for(var n=r.currentTarget.id,i=0;i<a.options.length;i++)if(a.options[i].id===n){if(a.sub_menu_open===n)return a.hideSubMenus(),void r.stopPropagation();null!=a.options[i].callback&&(a.options[i].callback(e,t),r.stopPropagation())}}}for(var s=0;s<this.sub_options.length;s++)for(var o=0;o<this.sub_options[s].length;o++){var c="#"+this.sub_options[s][o].id,l=document.querySelector(c);l.ontouch=function(r){for(var n=r.currentTarget.id,i=0;i<a.sub_options.length;i++)for(var s=0;s<a.sub_options[i].length;s++)a.sub_options[i][s].id===n&&null!=a.sub_options[i][s].callback&&(a.sub_options[i][s].callback(e,t),r.stopPropagation())},l.onclick=function(r){for(var n=r.currentTarget.id,i=0;i<a.sub_options.length;i++)for(var s=0;s<a.sub_options[i].length;s++)a.sub_options[i][s].id===n&&null!=a.sub_options[i][s].callback&&(a.sub_options[i][s].callback(e,t),r.stopPropagation())}}for(var u=0;u<this.icons.length;u++){var d="#"+this.icons[u].id,p=document.querySelector(d);p.onclick=function(r){for(var n=r.currentTarget.id,i=0;i<a.icons.length;i++)a.icons[i].id===n&&null!=a.icons[i].callback&&(a.icons[i].callback(e,t),r.stopPropagation())},p.ontouch=function(r){for(var n=r.currentTarget.id,i=0;i<a.icons.length;i++)a.icons[i].id===n&&null!=a.icons[i].callback&&(a.icons[i].callback(e,t),r.stopPropagation())}}}},{key:"addMenuOption",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;t<this.options.length;t++)if(this.options[t].id==e.id)return;this.options.push(e),this.sub_options.push([])}},{key:"addSubMenuOption",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=0;a<this.options.length;a++)if(this.options[a].id==e&&this.sub_options[a]){for(var r=0;r<this.sub_options[a].length;r++)if(this.sub_options[a][r].id===t.id)return;this.sub_options[a].push(t)}}},{key:"addMenuIcon",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0;t<this.icons.length;t++)if(this.icons[t].id==e.id)return;this.icons.push(e)}},{key:"showSubMenu",value:function(e){""!=this.sub_menu_open&&this.hideSubMenus(),this.sub_menu_open=e,document.querySelector("#"+e+" > ul").style.display="block"}},{key:"hideSubMenus",value:function(){this.sub_menu_open="";for(var e=0;e<this.options.length;e++){var t="#"+this.options[e].id+" > ul",a=document.querySelector(t);a&&(a.style.display="none")}}}])&&r(t.prototype,a),o&&r(t,o),e}();e.exports=o},function(e,t){e.exports=GameMenuTemplate=function(){return'  \n    <div id="game-menu" class="game-menu">\n      <div id="game-menu-icons" class="game-menu-icons"></div>\n      <div id="game-menu-options" class="game-menu-options"></div>\n    </div>\n  '}},function(e,t){e.exports=GameMenuIconTemplate=function(e){var t="";return null!=e.class&&(t=e.class),'<li id="'.concat(e.id,'" class="game-menu-icon ').concat(t,'">').concat(e.text,"</li>")}},function(e,t){e.exports=GameMenuOptionTemplate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a="";e.class&&(a=e.class);var r='<li id="'.concat(e.id,'" class="game-menu-option ').concat(a,'">').concat(e.text);if(t.length>0){r+='<ul class="game-menu-sub-options">';for(var n=0;n<t.length;n++)a="",t[n].class&&(a=t[n].class),r+='<li id="'.concat(t[n].id,'" class="game-menu-sub-option ').concat(a,'">').concat(t[n].text,"</li>");r+="</ul>"}return r+="</li>"}},function(e,t){e.exports=GameOverlayTemplate=function(){return'  \n    <div id="game-overlay" class="game-overlay"></div>\n    <div id="game-overlay-backdrop" class="game-overlay-backdrop"></div>\n  '}},function(e,t,a){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=a(1157),s=function(){function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:480,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:640;r(this,e),this.app=t,this.height=a,this.width=n,this.cards=[],this.cardfan=0,this.cardbox_lock=0,this.skip_card_prompt=0,this.card_types=[],this.game_mod=null}var t,a,s;return t=e,(a=[{key:"render",value:function(e,t){this.game_mod=t,document.getElementById("game-cardbox")||(e.browser.addElementToDom(i()),document.getElementById("game-cardbox").style.zindex=-10)}},{key:"attachEvents",value:function(e,t){var a=this;try{for(var r=function(e){var t=a.card_types[e].css,r=a.card_types[e].action,n=a.card_types[e].mycallback;Array.from(document.getElementsByClassName(t)).forEach((function(e){e.onmouseover=function(e){1!=a.cardbox_lock&&a.showCardbox(e.currentTarget.id)},e.onmouseout=function(e){a.hideCardbox()},e.onclick=function(e){a.cardbox_lock=1,""!=r&&null!=n?a.showCardbox(e.currentTarget.id,r,n):a.showCardbox(e.currentTarget.id)}}))},n=0;n<this.card_types.length;n++)r(n);document.getElementById("cardbox-exit").onclick=function(e){a.hideCardbox(1)}}catch(e){}}},{key:"showCardboxHTML",value:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(""==t||null==t||t.indexOf("noncard")>-1||t.indexOf("nocard")>-1)null!=n&&(n(e),this.hideCardbox(1));else{if(0==this.cardfan)document.getElementById("cardbox-card").innerHTML=t;else{t="";for(var i=0;i<this.cards.length;i++)t+=this.game_mod.returnCardImage(this.cards[i],r,n);document.getElementById("cardbox-card").innerHTML=t}if(1==this.skip_card_prompt&&null!=n)return n(e),void this.hideCardbox(1);""!=r&&(this.cardbox_lock=1,document.getElementById("cardbox-menu").style.display="block",document.getElementById("cardbox-menu").innerHTML=r,document.getElementById("cardbox-menu").onclick=function(t){null!=n&&n(e),a.hideCardbox(1)},document.getElementById("cardbox-exit").style.display="block"),1==this.cardbox_lock&&(document.getElementById("cardbox-exit").style.display="block",document.getElementById("cardbox-exit-background").style.display="block"),document.getElementById("game-cardbox").style.zIndex=250,document.getElementById("game-cardbox").style.display="block",document.getElementById("cardbox-card").style.display="block"}}},{key:"showCardbox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"undefined"!=e&&""!=e&&(this.cards.includes(e)||this.cards.push(e),this.showCardboxHTML(e,this.game_mod.returnCardImage(e),t,a))}},{key:"hideCardbox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{if(1==this.cardbox_lock&&0==e)return;this.cards=[],document.getElementById("game-cardbox").style.zindex=-10,document.getElementById("game-cardbox").style.display="none",document.getElementById("cardbox-card").style.display="none",document.getElementById("cardbox-menu").style.display="none",document.getElementById("cardbox-exit").style.display="none",document.getElementById("cardbox-exit-background").style.display="none",this.cardbox_lock=0,document.getElementById("game-cardbox").style.zIndex=-1}catch(e){}}},{key:"addCardType",value:function(e,t,a){for(var r=0;r<this.card_types.length;r++)if(this.card_types[r].css===e)return;this.card_types.push({css:e,action:t,mycallback:a})}}])&&n(t.prototype,a),s&&n(t,s),e}();e.exports=s},function(e,t){e.exports=GameCardboxTemplate=function(){return'\n    <div id="game-cardbox" class="game-cardbox">\n      <div class="cardbox-exit-background" id="cardbox-exit-background" style="display:none"><div class="cardbox-exit" id="cardbox-exit" style="display:none">×</div></div>\n      <div class="cardbox-card cardfan" id="cardbox-card" style="display:none"></div>\n      <div class="cardbox-menu" id="cardbox-menu" style="display:none">PLAY</div>\n    </div>\n  '}},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(1159),i=a(194),s=function(){function e(t,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.dimensions=a}var t,a,s;return t=e,(a=[{key:"render",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{if(document.getElementById("cardfan")||document.body.append(e.browser.htmlToElement(n())),""==a){var r=t.game.deck[0],i=r.cards,s=r.hand,o=s.map((function(e){return i[e]}));a=o.map((function(e){return'<img class="card" src="'.concat(t.card_img_dir,"/").concat(e.name,'">')})).join("")}document.getElementById("cardfan").innerHTML=a}catch(e){}}},{key:"attachEvents",value:function(e,t){try{var a=document.getElementById("cardfan");i(a)}catch(e){}}}])&&r(t.prototype,a),s&&r(t,s),e}();e.exports=s},function(e,t){e.exports=GameCardfanTemplate=function(){return'\n    <div id="cardfan" class="cardfan">\n    </div>\n  '}},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(1161),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t,this.height=7,this.width=7,this.height=5,this.width=5,this.hexmode=[0,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,0]}var t,a,i;return t=e,(a=[{key:"render",value:function(e,t){document.querySelector(".game-hexgrid-container")||e.browser.addElementToDom(n(this.height,this.width,this.hexmode))}},{key:"attachEvents",value:function(e,t){}}])&&r(t.prototype,a),i&&r(t,i),e}();e.exports=i},function(e,t){e.exports=GameHexGridTemplate=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="",n=0;a.length>0&&(n=1),r+='\n    <style type="text/css">\n      .hex {\n        width: '.concat(100/t,"%\n      }\n      .hex:nth-child(9n+6) {\n        margin-left: ").concat(100/t/2,"%\n      }\n    </style>\n  "),r+='<div id="game-hexgrid-container" class="game-hexgrid-container"><ul id="game-hexgrid" class="game-hexgrid">',r+="\n";for(var i=0,s=1,o=1;s<=e;s++,o++){var c=t;s%2==0&&(c=t-1);for(var l=1,u=1;l<=c;l++){if(1==n)if(1==a[i]){var d=o+"_"+u;r+='\n    \t    <li id="'.concat(d,'" class="hex">\n\t      <div class="hexIn" id="hexIn_').concat(d,'">\n\t        <div class="hexLink" id="hexLink_').concat(d,'">\n\t \t  <div class="hex_bg" id="hex_bg_').concat(d,'">\n\t\t  </div>\n\t        </div>\n\t      </div>\n\t    </li>\n          '),u++}else r+='<li id="" class="hex"></li>';else{var p=o+"_"+u;r+='\n    \t  <li id="'.concat(p,'" class="hex">\n\t    <div class="hexIn" id="hexIn_').concat(p,'">\n\t      <div class="hexLink" id="hexLink_').concat(p,'">\n\t\t<div class="hex_bg" id="hex_bg_1_1">\n\t\t</div>\n\t      </div>\n\t    </div>\n\t  </li>\n        '),u++}i++}}if((e+1)%2==0)for(var h=0;h<t-1;h++)r+='<li id="" class="hex"></li>';else for(var f=0;f<t;f++)r+='<li id="" class="hex"></li>';return r+="\n",r+="</ul></div>"}},function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=a(1163),i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.app=t}var t,a,i;return t=e,(a=[{key:"render",value:function(e,t){this.game_mod=t,document.getElementById("game-observer-next")||e.browser.addElementToDom(n())}},{key:"attachEvents",value:function(e,t){var a=this;document.getElementById("game-observer-next-btn").onclick=function(r){a.next(e,t)},document.getElementById("game-observer-last-btn").onclick=function(r){a.last(e,t)}}},{key:"next",value:function(e,t){var a=this,r=e.crypto.hash(JSON.stringify(t.game.queue));t.game.halted=0,t.game.gaming_active=0,t.saveGame(t.game.id);var n=e.modules.returnModule("Arcade");null!=n?n.observerDownloadNextMoves(t,(function(n){return 0==(t=n).game.future.length?(salert("No Moves Yet Available Beyond this Point"),void a.hideNextMoveButton()):(t.game.queue.length>0&&"OBSERVER_CHECKPOINT"===t.game.queue[t.game.queue.length-1]&&t.game.queue.splice(t.game.queue.length-1,1),t.runQueue(),t.processFutureMoves(),0==t.game.future.length&&e.crypto.hash(JSON.stringify(t.game.queue))===r?(salert("No Moves Yet Available Beyond this Point"),void a.hideNextMoveButton()):void 0)})):alert("ERROR 413231: Arcade Module not Installed")}},{key:"last",value:function(e,t){var a=e.modules.returnModule("Arcade");null!=a?(salert("Please wait while we move back one step..."),a.initializeObserverModePreviousStep(t.game.id,t.game.step.ts)):alert("ERROR 413252: Arcade Module not Installed")}},{key:"hideNextMoveButton",value:function(){document.getElementById("game-observer-next").style.display="none"}},{key:"showNextMoveButton",value:function(){document.getElementById("game-observer-next").style.display="block"}},{key:"hideLastMoveButton",value:function(){document.getElementById("game-observer-last").style.display="none"}},{key:"showLastMoveButton",value:function(){document.getElementById("game-observer-last").style.display="block"}}])&&r(t.prototype,a),i&&r(t,i),e}();e.exports=i},function(e,t){e.exports=GameObserverTemplate=function(){return'\n    <div id="game-observer-last" class="game-observer-last">\n      <div id="game-observer-last-btn" class="game-observer-last-btn"><i class="fas fa-backward"></i></div>\n      <div id="game-observer-next-btn" class="game-observer-next-btn"><i class="fas fa-forward"></i></div>\n    </div>\n  '}},function(e,t,a){var r=a(1165);e.exports=GameBoardSizer={render:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"body";if(!document.getElementById("game_board_sizer")){var n=document.querySelector(a);n.append(e.browser.htmlToElement(r()))}},attachEvents:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".gameboard",n=document.querySelector(r);if(document.querySelector("#game_board_sizer").addEventListener("change",(function(){a.scaleBoard(t,n)})),t.loadGamePreference(t.returnSlug()+"-board-scale"))try{document.querySelector("#game_board_sizer").value=t.loadGamePreference(t.returnSlug()+"-board-scale"),this.scaleBoard(t,n)}catch(e){}var i=t.loadGamePreference(t.returnSlug()+"-board-offset");i&&$(r).offset(i),$(r).draggable({stop:function(e,a){t.saveGamePreference(t.returnSlug()+"-board-offset",a.offset)}})},scaleBoard:function(e,t){try{e.hammertime.get("pinch").set({enable:!1}),e.hammertime.get("pan").set({enable:!1})}catch(e){}t.style.transform="scale(".concat(document.querySelector("#game_board_sizer").value/100,")"),e.saveGamePreference(e.returnSlug()+"-board-scale",document.querySelector("#game_board_sizer").value);try{e.hammertime.get("pinch").set({enable:!0}),e.hammertime.get("pan").set({enable:!0})}catch(e){}}}},function(e,t){e.exports=GameBoardSizerTemplate=function(){return'\n    <input class="game_board_sizer" id="game_board_sizer" type="range" min="33" max="200" value="100" />\n    '}},function(e,t,a){a(1167),a(1168);e.exports=GameHammerMobile={fixHammerjsDeltaIssue:null,lastEvent:null,pinchZoomOrigin:null,element:null,pinchStart:{x:void 0,y:void 0},originalSize:{width:2550,height:1650},current:{x:0,y:0,z:1,zooming:!1,width:2550,height:1650},last:{x:0,y:0,z:1},render:function(e,t){},attachEvents:function(e,t){try{var a=this;a.element=document.getElementById("gameboard");var r=new Hammer(a.element,{});r.get("pinch").set({enable:!0}),r.get("pan").set({threshold:0}),r.on("pan",(function(e){"pan"!==a.lastEvent&&(a.fixHammerjsDeltaIssue={x:e.deltaX,y:e.deltaY}),a.current.x=a.last.x+e.deltaX-a.fixHammerjsDeltaIssue.x,a.current.y=a.last.y+e.deltaY-a.fixHammerjsDeltaIssue.y,a.lastEvent="pan",a.update()})),r.on("pinch",(function(e){var t=a.scaleFrom(a.pinchZoomOrigin,a.last.z,a.last.z*e.scale);a.current.x=t.x+a.last.x+e.deltaX,a.current.y=t.y+a.last.y+e.deltaY,a.current.z=t.z+a.last.z,a.lastEvent="pinch",a.update()})),r.on("pinchstart",(function(e){a.pinchStart.x=e.center.x,a.pinchStart.y=e.center.y,a.pinchZoomOrigin=a.getRelativePosition(a.element,{x:a.pinchStart.x,y:a.pinchStart.y},a.originalSize,a.current.z),a.lastEvent="pinchstart"})),r.on("panend",(function(e){a.last.x=a.current.x,a.last.y=a.current.y,a.lastEvent="panend"})),r.on("pinchend",(function(e){a.last.x=a.current.x,a.last.y=a.current.y,a.last.z=a.current.z,a.lastEvent="pinchend"})),t.hammertime=r}catch(e){alert("Error: "+e)}},update:function(){this.current.height=this.originalSize.height*this.current.z,this.current.width=this.originalSize.width*this.current.z,this.element.style.transform="translate3d("+this.current.x+"px, "+this.current.y+"px, 0) scale("+this.current.z+")"},getRelativePosition:function(e,t,a,r){var n=this.getCoords(e),i=t.x-n.x,s=t.y-n.y;return{x:i/(a.width*r/2)-1,y:s/(a.height*r/2)-1}},getCoords:function(e){var t=e.getBoundingClientRect(),a=document.body,r=document.documentElement,n=window.pageYOffset||r.scrollTop||a.scrollTop,i=window.pageXOffset||r.scrollLeft||a.scrollLeft,s=r.clientTop||a.clientTop||0,o=r.clientLeft||a.clientLeft||0,c=t.top+n-s,l=t.left+i-o;return{x:Math.round(l),y:Math.round(c)}},scaleFrom:function(e,t,a){var r=this.getCoordinateShiftDueToScale(this.originalSize,t),n=this.getCoordinateShiftDueToScale(this.originalSize,a),i=a-t,s=r.x-n.x,o=r.y-n.y;return{x:e.x*s,y:e.y*o,z:i}},getCoordinateShiftDueToScale:function(e,t){var a=t*e.width,r=t*e.height;return{x:(a-e.width)/2,y:(r-e.height)/2}}}},function(e,t){e.exports=GameHammerMobile=function(){return""}},function(e,t){e.exports=function(e,t){var a=new Hammer(t,{});e.hammertime=a,a.get("pinch").set({enable:!0}),a.get("pan").set({threshold:0});var r=void 0,n={x:void 0,y:void 0},i=void 0,s={width:2550,height:1650},o={x:0,y:0,z:1,zooming:!1,width:1*s.width,height:1*s.height},c={x:o.x,y:o.y,z:o.z};function l(e,t,a,r){var n,i,s,o,c,l,u,d,p,h=(n=e.getBoundingClientRect(),i=document.body,s=document.documentElement,o=window.pageYOffset||s.scrollTop||i.scrollTop,c=window.pageXOffset||s.scrollLeft||i.scrollLeft,l=s.clientTop||i.clientTop||0,u=s.clientLeft||i.clientLeft||0,d=n.top+o-l,p=n.left+c-u,{x:Math.round(p),y:Math.round(d)}),f=t.x-h.x,m=t.y-h.y;return{x:f/(a.width*r/2)-1,y:m/(a.height*r/2)-1}}function u(e,t){var a=t*e.width,r=t*e.height;return{x:(a-e.width)/2,y:(r-e.height)/2}}a.on("pan",(function(e){"pan"!==i&&(r={x:e.deltaX,y:e.deltaY}),o.x=c.x+e.deltaX-r.x,o.y=c.y+e.deltaY-r.y,i="pan",p()})),a.on("pinch",(function(e){var t,a,r,n,l,h,f,m,g=(t=d,a=c.z,r=c.z*e.scale,n=u(s,a),l=u(s,r),h=r-a,f=n.x-l.x,m=n.y-l.y,{x:t.x*f,y:t.y*m,z:h});o.x=g.x+c.x+e.deltaX,o.y=g.y+c.y+e.deltaY,o.z=g.z+c.z,i="pinch",p()}));var d=void 0;function p(){o.height=s.height*o.z,o.width=s.width*o.z,t.style.transform="translate3d("+o.x+"px, "+o.y+"px, 0) scale("+o.z+")"}a.on("pinchstart",(function(e){n.x=e.center.x,n.y=e.center.y,d=l(t,{x:n.x,y:n.y},s,o.z),i="pinchstart"})),a.on("panend",(function(e){c.x=o.x,c.y=o.y,i="panend"})),a.on("pinchend",(function(e){c.x=o.x,c.y=o.y,c.z=o.z,i="pinchend"}))}},function(t,a,r){function n(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r(1170);var i=r(1171),s=r(1172),o=(r(1173),r(433)),c=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.app=e,this.game_crypto_transfer_manager_overlay=new o(e)}var a,r,c;return a=t,(r=[{key:"render",value:function(e,t){}},{key:"attachEvents",value:function(e,t){}},{key:"send",value:function(t,a,r,n,s,o,c){var l=this,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,d={};d.amount=s,d.from=r,d.to=n,d.ticker=c,this.game_crypto_transfer_manager_overlay.showOverlay(t,a,i(t,d)),document.querySelector(".game-overlay-backdrop").onclick=e={},document.querySelector(".crypto_transfer_btn").onclick=function(e){l.game_crypto_transfer_manager_overlay.hideOverlay(u)}}},{key:"receive",value:function(t,a,r,n,i,o,c){var l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,u={};u.amount=i,u.from=r,u.to=n,u.ticker=c,this.game_crypto_transfer_manager_overlay.showOverlay(t,a,s(t,u)),document.querySelector(".game-overlay-backdrop").onclick=e={},l()}},{key:"hideOverlay",value:function(){this.game_crypto_transfer_manager_overlay.hideOverlay()}}])&&n(a.prototype,r),c&&n(a,c),t}();t.exports=c},function(e,t){e.exports=ModalAddUserTemplate=function(){return'  \n  <div class="game-crypto-transfer-manager-container">\n    \n    <h2 class="auth_title">Authorize Crypto Transfer</h2>\n\n    <p></p>\n\n    <div class="button crypto_transfer_btn" id="crypto_transfer_btn">authorize</div>\n\n  </div>\n  '}},function(e,t){e.exports=GameCryptoTransferManagerSendTemplate=function(e,t){return'  \n  <div class="game-crypto-transfer-manager-container">\n    \n    <h2 class="auth_title">Authorize Crypto Transfer</h2>\n\n    <div class="amount">'.concat(t.amount," ").concat(t.ticker,'</div>\n\n    <div class="send_to">to</div>\n\n    <div class="to_address">').concat(t.to,'</div>\n\n    <div class="button crypto_transfer_btn" id="crypto_transfer_btn">authorize</div>\n\n  </div>\n  ')}},function(e,t){e.exports=GameCryptoTransferManagerReceive=function(e,t){return'  \n  <div class="game-crypto-transfer-manager-container">\n    \n    <h2 class="auth_title">Waiting for Transfer</h2>\n\n    <div class="amount">'.concat(t.amount," ").concat(t.ticker,'</div>\n\n    <img class="spinner" src="/website/img/spinner.svg" />\n\n    <div class="transfer-details">\n      <div class="send_to">from</div>\n      <div class="from_address">').concat(t.from,'</div>\n      <div class="send_to">to</div>\n      <div class="to_address">').concat(t.to,"</div>\n    </div>\n\n  </div>\n  ")}},function(e,t){e.exports=ModalAddUserTemplate=function(){return'  \n  <div class="game-crypto-transfer-manager-container">\n    \n    <h2 class="auth_title">Authorize Crypto Transfer</h2>\n\n    <p></p>\n\n    <div class="button crypto_transfer_btn" id="crypto_transfer_btn">authorize</div>\n\n  </div>\n  '}},function(e,t){e.exports=ModalAddUserTemplate=function(){return'  \n  <div class="welcome-modal-wrapper">\n    <div class="welcome-modal-action">\n      <div class="welcome-modal-left">\n        <div class="welcome-modal-header">Invite Friends</h1></div>\n        <div class="welcome-modal-main">\n          <div style="margin:1em 0">How would you like to add a contact to Saito:</div>\n          <div style="">\n            <div class="welcome-invite-box address-link-box"><i class="fas fa-key"></i><div>Add by Saito address</div></div>\n            <div class="welcome-invite-box scanqr-link-box"><i class="fas fa-qrcode"></i><div>Scan QR Code</div></div>\n            <div class="welcome-invite-box generate-link-box"><i class="fas fa-link"></i><div>Share Bundle</div></div>\n          </div>\n          <div class="welcome-modal-info">\n            <div style="margin-top:20px" class="welcome-modal-explanation">\n              <div class="tip">\n                <div><b>What happens when I invite someone to Saito? <i class="fas fa-info-circle"></i></b></div>\n                <div class="tiptext">Your browser will create an encrypted communication channel with the users you invite, and they will show up on your contact list in the future.</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  '}},function(e,t){e.exports=ModalAddUserTemplate=function(){return'  \n  <div class="welcome-modal-wrapper confirm-modal-wrapper">\n    You and your friend are now negotiating a shared secret via Saito\'s blockchain. This requires two blocks to be mined. Once the process is complete your friend will be added to your chat list and you will be able to chat through the encrypted channel.\n    <div id="confirm-box" class="welcome-invite-box"><div>OK</div></div>\n  </div>\n  <style>\n    .confirm-modal-wrapper {\n      font-size: 1.5em;\n      padding: 1.5em;\n      color: white;\n      font-weight: bold;\n    }\n  </style>\n  '}},function(e,t,a){var r=a(1177);e.exports=InviteFriendsQR={render:function(e,t){var a=this;t.helpers.el_parser;document.querySelector(".add-contact-modal-qr")||(document.querySelector(".welcome-modal-left").innerHTML=r());var n=e.modules.returnModule("QRScanner");n.handleDecodedMessage=function(r){return a.handleDecodedMessage(r,e,t)},n.start(document.querySelector("video"),document.getElementById("qr-canvas"))},attachEvents:function(e,t){},handleDecodedMessage:function(e,t,a){if(t.crypto.isPublicKey(e)){var r=e;t.modules.returnModule("QRScanner").decoder.terminate(),a.startKeyExchange(r),a.stopVideo()}}}},function(e,t){e.exports=InviteFriendsQRTemplate=function(){return'\n    <div class="add-contact-modal-qr">\n      <div id="qr-hud-target" style="\n        position: absolute;\n        width: 10em;\n        height: 10em;\n        border: 2px solid red;\n        background-color: transparent;\n        margin: 2em 8.5em;"></div>\n      <div class="video-container">\n        <video playsinline autoplay style="width: 100%; max-width: 26em"></video>\n      </div>\n      <canvas style="display: none" id="qr-canvas"></canvas>\n    </div>\n  '}},function(e,t){e.exports=InviteFriendsTemplate=function(){return'\n  <div class="welcome-modal-wrapper">\n    <div class="welcome-modal-action">\n      <div class="welcome-modal-left">\n        <div class="welcome-modal-header">Invite Friends</h1></div>\n        <div class="welcome-modal-main">\n          <div style="margin:1em 0">How would you like to add a contact to Saito:</div>\n          <div style="">\n            <div class="welcome-invite-box generate-link-box"><i class="fas fa-link"></i><div>Generate Link</div></div>\n            <div class="welcome-invite-box scanqr-link-box"><i class="fas fa-qrcode"></i><div>Scan QR Code</div></div>\n            <div class="welcome-invite-box address-link-box"><i class="fas fa-key"></i><div>Add by Saito address</div></div>\n          </div>\n          <div class="welcome-modal-info">\n            <div style="margin-top:20px" class="welcome-modal-explanation">\n            <div class="tip">\n              <div><b>What happens when I invite someone to Saito? <i class="fas fa-info-circle"></i></b></div>\n              <div class="tiptext">Users you invite will be given a copy of your javascript bundle (so they are running the same applications). The Saito rewards module will give both you and your friends a bonus in Saito tokens for helping spread work.</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n<style>\n\n.welcome-modal-info {\n  clear: both;\n  font-size: 1.2em;\n}\n\n.welcome-invite-box {\n  float: left;\n  width: 250px;\n  border: none;\n  cursor: pointer;\n}\n\n.welcome-invite-box div {\n  text-align: center;\n  font-weight: bold;\n}\n\n.welcome-invite-box i {\n  display: block;\n  text-align: center;\n  margin: 0 0 15px 0;\n  font-size: 2em;\n}\n\n.welcome-invite-box:hover {\n  text-shadow: 2px 2px 2px #333;\n}\n\n</style>\n\n  '}},function(e,t){e.exports=InviteFriendsLinkTemplate=function(e){return'\n    <div class="welcome-modal-header">\n      <h1>Your Invitation Link:</h1>\n    </div>\n    <div class="welcome-modal-main">\n      <div class="welcome-modal-text">Share this link with your friends. Users you invite will be given a copy of your javascript bundle (Any games or applications you\'ve installed via the appstore will be included). The Saito rewards module will give both you and your friends a bonus in Saito tokens for helping spread work.</div>\n      <div class="link-space">\n        <input class="share-link" type="text" value="'.concat(e.browser.returnInviteLink(),'"></input>\n        <i class="fas fa-copy"></i>\n      </div>\n    </div>\n    \n<style>\n.welcome-modal-info {\n  clear: both;\n  font-size: 1.2em;\n}\n.welcome-modal-text {\n  margin:1em 0;\n  font-size: 1.5em;\n  font-weight: bold;\n}\n.link-space {\n    display: flex;\n}\n.link-space i {\n    font-size: 1.5em;\n    line-height: 1.5em;\n    margin: 0 10px;\n    cursor:pointer;\n}\n.link-space i:hover {\n    text-shadow: 2px 2px 2px #333;\n}\n</style>\n')}},function(e,t){e.exports=InviteFriendsPublickeyTemplate=function(e){return'\n    <div class="welcome-modal-header">\n      <h1>Add Contact using Network Address:</h1>\n    </div>\n    <div class="welcome-modal-main">\n      <div style="margin:1em 0">You can add contacts by providing their Saito username or publickey (address):</div>\n      <div style="display:flex">\n        <input style="width:100%; color:black; font-size:1em; background:white;margin:0 1em 0 0;" id="add-contact-input" type="text" placeholder="david@saito">\n        <button id="add-contact-btn" style="clear:both; margin:unset; margin-left:0px; min-width:6em; font-size:0.7em;">ADD CONTACT</button>\n      </div>\n      <div class="welcome-modal-info">\n        <div style="margin-top:20px" class="welcome-modal-explanation tip">\n          <div><b>What happens when I do this?</b></div>\n          <div class="tiptext">Your computer will send a request to connect over the blockchain. This will result in your two computers creating a secure encryption key and both of your accounts showing up in the account list (chat-box, etc.) of the other user.</div>\n        </div>\n      </div>\n    </div>\n  '}},function(e,t,a){e.exports=a(1182)},function(e,t,a){var r=a(1183),n=a(1184),i=/:([a-zA-Z0-9_\-\+]+):/g,s=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function o(e){var t=e.indexOf(":");return t>-1?t===e.length-1?o(e=e.substring(0,t)):o(e=e.substr(t+1)):e}function c(e){return"string"==typeof e&&e.length>0?":"+e+":":e}var l=String.fromCharCode(65039),u=new RegExp(l,"g");function d(e){return e.replace(u,"")}var p=Object.keys(n).reduce((function(e,t){return e[d(n[t])]=t,e}),{}),h={emoji:n};h._get=function(e){return n.hasOwnProperty(e)?n[e]:"string"==typeof(t=e)&&":"!==t[0]?c(t):t;var t},h.get=function(e){return e=o(e),h._get(e)},h.find=function(e){return h.findByName(e)||h.findByCode(e)},h.findByName=function(e){var t=o(e),a=n[t];return a?{emoji:a,key:t}:void 0},h.findByCode=function(e){var t=d(e),a=p[t];return a?{emoji:n[a],key:a}:void 0},h.hasEmoji=function(e){return h.hasEmojiByName(e)||h.hasEmojiByCode(e)},h.hasEmojiByName=function(e){var t=h.findByName(e);return!!t&&t.key===o(e)},h.hasEmojiByCode=function(e){var t=h.findByCode(e);return!!t&&d(t.emoji)===d(e)},h.which=function(e,t){var a=d(e),r=p[a];return t?c(r):r},h.emojify=function(e,t,a){return e?e.split(i).map((function(e,r){if(r%2==0)return e;var n=h._get(e),i=n.indexOf(":")>-1;return i&&"function"==typeof t?t(e):i||"function"!=typeof a?n:a(n,e)})).join(""):""},h.random=function(){var e=Object.keys(n),t=e[Math.floor(Math.random()*e.length)];return{key:t,emoji:h._get(t)}},h.search=function(e){var t=Object.keys(n),a=o(e);return t.filter((function(e){return 0===e.toString().indexOf(a)})).map((function(e){return{key:e,emoji:h._get(e)}}))},h.unemojify=function(e){return e?r(e).map((function(e){return h.which(e,!0)||e})).join(""):""},h.replace=function(e,t,a){if(!e)return"";var n="function"==typeof t?t:function(){return t},i=r(e),o=i.map((function(e,t){var r=h.findByCode(e);return r&&a&&" "===i[t+1]&&(i[t+1]=""),r?n(r):e})).join("");return a?o.replace(s,""):o},h.strip=function(e){return h.replace(e,"",!0)},e.exports=h},function(e,t,a){(function(t){var a="[object Map]",r="[object Set]",n=/^\[object .+?Constructor\]$/,i=/^(?:0|[1-9]\d*)$/,s="[\\ud800-\\udfff]",o="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",c="\\ud83c[\\udffb-\\udfff]",l="[^\\ud800-\\udfff]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",p="(?:"+o+"|"+c+")"+"?",h="[\\ufe0e\\ufe0f]?"+p+("(?:\\u200d(?:"+[l,u,d].join("|")+")[\\ufe0e\\ufe0f]?"+p+")*"),f="(?:"+[l+o+"?",o,u,d,s].join("|")+")",m=RegExp(c+"(?="+c+")|"+f+h,"g"),g=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),b="object"==typeof t&&t&&t.Object===Object&&t,y="object"==typeof self&&self&&self.Object===Object&&self,v=b||y||Function("return this")();function _(e,t){return function(e,t){for(var a=-1,r=e?e.length:0,n=Array(r);++a<r;)n[a]=t(e[a],a,e);return n}(t,(function(t){return e[t]}))}function w(e){var t=-1,a=Array(e.size);return e.forEach((function(e,r){a[++t]=[r,e]})),a}function x(e){var t=-1,a=Array(e.size);return e.forEach((function(e){a[++t]=e})),a}function k(e){return function(e){return g.test(e)}(e)?function(e){return e.match(m)||[]}(e):function(e){return e.split("")}(e)}var S,P,E,C=Function.prototype,A=Object.prototype,M=v["__core-js_shared__"],T=(S=/[^.]+$/.exec(M&&M.keys&&M.keys.IE_PROTO||""))?"Symbol(src)_1."+S:"",j=C.toString,O=A.hasOwnProperty,D=A.toString,I=RegExp("^"+j.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),R=v.Symbol,B=R?R.iterator:void 0,q=A.propertyIsEnumerable,L=(P=Object.keys,E=Object,function(e){return P(E(e))}),N=Q(v,"DataView"),F=Q(v,"Map"),U=Q(v,"Promise"),$=Q(v,"Set"),z=Q(v,"WeakMap"),H=te(N),G=te(F),K=te(U),W=te($),V=te(z);function Y(e,t){var a=ae(e)||function(e){return function(e){return se(e)&&re(e)}(e)&&O.call(e,"callee")&&(!q.call(e,"callee")||"[object Arguments]"==D.call(e))}(e)?function(e,t){for(var a=-1,r=Array(e);++a<e;)r[a]=t(a);return r}(e.length,String):[],r=a.length,n=!!r;for(var i in e)!t&&!O.call(e,i)||n&&("length"==i||ee(i,r))||a.push(i);return a}function J(e){return!(!ie(e)||function(e){return!!T&&T in e}(e))&&(ne(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?I:n).test(te(e))}function X(e){if(a=(t=e)&&t.constructor,r="function"==typeof a&&a.prototype||A,t!==r)return L(e);var t,a,r,n=[];for(var i in Object(e))O.call(e,i)&&"constructor"!=i&&n.push(i);return n}function Q(e,t){var a=function(e,t){return null==e?void 0:e[t]}(e,t);return J(a)?a:void 0}var Z=function(e){return D.call(e)};function ee(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||i.test(e))&&e>-1&&e%1==0&&e<t}function te(e){if(null!=e){try{return j.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(N&&"[object DataView]"!=Z(new N(new ArrayBuffer(1)))||F&&Z(new F)!=a||U&&"[object Promise]"!=Z(U.resolve())||$&&Z(new $)!=r||z&&"[object WeakMap]"!=Z(new z))&&(Z=function(e){var t=D.call(e),n="[object Object]"==t?e.constructor:void 0,i=n?te(n):void 0;if(i)switch(i){case H:return"[object DataView]";case G:return a;case K:return"[object Promise]";case W:return r;case V:return"[object WeakMap]"}return t});var ae=Array.isArray;function re(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!ne(e)}function ne(e){var t=ie(e)?D.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function ie(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function se(e){return!!e&&"object"==typeof e}function oe(e){return e?_(e,function(e){return re(e)?Y(e):X(e)}(e)):[]}e.exports=function(e){if(!e)return[];if(re(e))return function(e){return"string"==typeof e||!ae(e)&&se(e)&&"[object String]"==D.call(e)}(e)?k(e):function(e,t){var a=-1,r=e.length;for(t||(t=Array(r));++a<r;)t[a]=e[a];return t}(e);if(B&&e[B])return function(e){for(var t,a=[];!(t=e.next()).done;)a.push(t.value);return a}(e[B]());var t=Z(e);return(t==a?w:t==r?x:oe)(e)}}).call(this,a(17))},function(e){e.exports=JSON.parse('{"100":"💯","1234":"🔢","umbrella_with_rain_drops":"☔","coffee":"☕","aries":"♈","taurus":"♉","sagittarius":"♐","capricorn":"♑","aquarius":"♒","pisces":"♓","anchor":"⚓","white_check_mark":"✅","sparkles":"✨","question":"❓","grey_question":"❔","grey_exclamation":"❕","exclamation":"❗","heavy_exclamation_mark":"❗","heavy_plus_sign":"➕","heavy_minus_sign":"➖","heavy_division_sign":"➗","hash":"#️⃣","keycap_star":"*️⃣","zero":"0️⃣","one":"1️⃣","two":"2️⃣","three":"3️⃣","four":"4️⃣","five":"5️⃣","six":"6️⃣","seven":"7️⃣","eight":"8️⃣","nine":"9️⃣","copyright":"©️","registered":"®️","mahjong":"🀄","black_joker":"🃏","a":"🅰️","b":"🅱️","o2":"🅾️","parking":"🅿️","ab":"🆎","cl":"🆑","cool":"🆒","free":"🆓","id":"🆔","new":"🆕","ng":"🆖","ok":"🆗","sos":"🆘","up":"🆙","vs":"🆚","flag-ac":"🇦🇨","flag-ad":"🇦🇩","flag-ae":"🇦🇪","flag-af":"🇦🇫","flag-ag":"🇦🇬","flag-ai":"🇦🇮","flag-al":"🇦🇱","flag-am":"🇦🇲","flag-ao":"🇦🇴","flag-aq":"🇦🇶","flag-ar":"🇦🇷","flag-as":"🇦🇸","flag-at":"🇦🇹","flag-au":"🇦🇺","flag-aw":"🇦🇼","flag-ax":"🇦🇽","flag-az":"🇦🇿","flag-ba":"🇧🇦","flag-bb":"🇧🇧","flag-bd":"🇧🇩","flag-be":"🇧🇪","flag-bf":"🇧🇫","flag-bg":"🇧🇬","flag-bh":"🇧🇭","flag-bi":"🇧🇮","flag-bj":"🇧🇯","flag-bl":"🇧🇱","flag-bm":"🇧🇲","flag-bn":"🇧🇳","flag-bo":"🇧🇴","flag-bq":"🇧🇶","flag-br":"🇧🇷","flag-bs":"🇧🇸","flag-bt":"🇧🇹","flag-bv":"🇧🇻","flag-bw":"🇧🇼","flag-by":"🇧🇾","flag-bz":"🇧🇿","flag-ca":"🇨🇦","flag-cc":"🇨🇨","flag-cd":"🇨🇩","flag-cf":"🇨🇫","flag-cg":"🇨🇬","flag-ch":"🇨🇭","flag-ci":"🇨🇮","flag-ck":"🇨🇰","flag-cl":"🇨🇱","flag-cm":"🇨🇲","cn":"🇨🇳","flag-cn":"🇨🇳","flag-co":"🇨🇴","flag-cp":"🇨🇵","flag-cr":"🇨🇷","flag-cu":"🇨🇺","flag-cv":"🇨🇻","flag-cw":"🇨🇼","flag-cx":"🇨🇽","flag-cy":"🇨🇾","flag-cz":"🇨🇿","de":"🇩🇪","flag-de":"🇩🇪","flag-dg":"🇩🇬","flag-dj":"🇩🇯","flag-dk":"🇩🇰","flag-dm":"🇩🇲","flag-do":"🇩🇴","flag-dz":"🇩🇿","flag-ea":"🇪🇦","flag-ec":"🇪🇨","flag-ee":"🇪🇪","flag-eg":"🇪🇬","flag-eh":"🇪🇭","flag-er":"🇪🇷","es":"🇪🇸","flag-es":"🇪🇸","flag-et":"🇪🇹","flag-eu":"🇪🇺","flag-fi":"🇫🇮","flag-fj":"🇫🇯","flag-fk":"🇫🇰","flag-fm":"🇫🇲","flag-fo":"🇫🇴","fr":"🇫🇷","flag-fr":"🇫🇷","flag-ga":"🇬🇦","gb":"🇬🇧","uk":"🇬🇧","flag-gb":"🇬🇧","flag-gd":"🇬🇩","flag-ge":"🇬🇪","flag-gf":"🇬🇫","flag-gg":"🇬🇬","flag-gh":"🇬🇭","flag-gi":"🇬🇮","flag-gl":"🇬🇱","flag-gm":"🇬🇲","flag-gn":"🇬🇳","flag-gp":"🇬🇵","flag-gq":"🇬🇶","flag-gr":"🇬🇷","flag-gs":"🇬🇸","flag-gt":"🇬🇹","flag-gu":"🇬🇺","flag-gw":"🇬🇼","flag-gy":"🇬🇾","flag-hk":"🇭🇰","flag-hm":"🇭🇲","flag-hn":"🇭🇳","flag-hr":"🇭🇷","flag-ht":"🇭🇹","flag-hu":"🇭🇺","flag-ic":"🇮🇨","flag-id":"🇮🇩","flag-ie":"🇮🇪","flag-il":"🇮🇱","flag-im":"🇮🇲","flag-in":"🇮🇳","flag-io":"🇮🇴","flag-iq":"🇮🇶","flag-ir":"🇮🇷","flag-is":"🇮🇸","it":"🇮🇹","flag-it":"🇮🇹","flag-je":"🇯🇪","flag-jm":"🇯🇲","flag-jo":"🇯🇴","jp":"🇯🇵","flag-jp":"🇯🇵","flag-ke":"🇰🇪","flag-kg":"🇰🇬","flag-kh":"🇰🇭","flag-ki":"🇰🇮","flag-km":"🇰🇲","flag-kn":"🇰🇳","flag-kp":"🇰🇵","kr":"🇰🇷","flag-kr":"🇰🇷","flag-kw":"🇰🇼","flag-ky":"🇰🇾","flag-kz":"🇰🇿","flag-la":"🇱🇦","flag-lb":"🇱🇧","flag-lc":"🇱🇨","flag-li":"🇱🇮","flag-lk":"🇱🇰","flag-lr":"🇱🇷","flag-ls":"🇱🇸","flag-lt":"🇱🇹","flag-lu":"🇱🇺","flag-lv":"🇱🇻","flag-ly":"🇱🇾","flag-ma":"🇲🇦","flag-mc":"🇲🇨","flag-md":"🇲🇩","flag-me":"🇲🇪","flag-mf":"🇲🇫","flag-mg":"🇲🇬","flag-mh":"🇲🇭","flag-mk":"🇲🇰","flag-ml":"🇲🇱","flag-mm":"🇲🇲","flag-mn":"🇲🇳","flag-mo":"🇲🇴","flag-mp":"🇲🇵","flag-mq":"🇲🇶","flag-mr":"🇲🇷","flag-ms":"🇲🇸","flag-mt":"🇲🇹","flag-mu":"🇲🇺","flag-mv":"🇲🇻","flag-mw":"🇲🇼","flag-mx":"🇲🇽","flag-my":"🇲🇾","flag-mz":"🇲🇿","flag-na":"🇳🇦","flag-nc":"🇳🇨","flag-ne":"🇳🇪","flag-nf":"🇳🇫","flag-ng":"🇳🇬","flag-ni":"🇳🇮","flag-nl":"🇳🇱","flag-no":"🇳🇴","flag-np":"🇳🇵","flag-nr":"🇳🇷","flag-nu":"🇳🇺","flag-nz":"🇳🇿","flag-om":"🇴🇲","flag-pa":"🇵🇦","flag-pe":"🇵🇪","flag-pf":"🇵🇫","flag-pg":"🇵🇬","flag-ph":"🇵🇭","flag-pk":"🇵🇰","flag-pl":"🇵🇱","flag-pm":"🇵🇲","flag-pn":"🇵🇳","flag-pr":"🇵🇷","flag-ps":"🇵🇸","flag-pt":"🇵🇹","flag-pw":"🇵🇼","flag-py":"🇵🇾","flag-qa":"🇶🇦","flag-re":"🇷🇪","flag-ro":"🇷🇴","flag-rs":"🇷🇸","ru":"🇷🇺","flag-ru":"🇷🇺","flag-rw":"🇷🇼","flag-sa":"🇸🇦","flag-sb":"🇸🇧","flag-sc":"🇸🇨","flag-sd":"🇸🇩","flag-se":"🇸🇪","flag-sg":"🇸🇬","flag-sh":"🇸🇭","flag-si":"🇸🇮","flag-sj":"🇸🇯","flag-sk":"🇸🇰","flag-sl":"🇸🇱","flag-sm":"🇸🇲","flag-sn":"🇸🇳","flag-so":"🇸🇴","flag-sr":"🇸🇷","flag-ss":"🇸🇸","flag-st":"🇸🇹","flag-sv":"🇸🇻","flag-sx":"🇸🇽","flag-sy":"🇸🇾","flag-sz":"🇸🇿","flag-ta":"🇹🇦","flag-tc":"🇹🇨","flag-td":"🇹🇩","flag-tf":"🇹🇫","flag-tg":"🇹🇬","flag-th":"🇹🇭","flag-tj":"🇹🇯","flag-tk":"🇹🇰","flag-tl":"🇹🇱","flag-tm":"🇹🇲","flag-tn":"🇹🇳","flag-to":"🇹🇴","flag-tr":"🇹🇷","flag-tt":"🇹🇹","flag-tv":"🇹🇻","flag-tw":"🇹🇼","flag-tz":"🇹🇿","flag-ua":"🇺🇦","flag-ug":"🇺🇬","flag-um":"🇺🇲","flag-un":"🇺🇳","us":"🇺🇸","flag-us":"🇺🇸","flag-uy":"🇺🇾","flag-uz":"🇺🇿","flag-va":"🇻🇦","flag-vc":"🇻🇨","flag-ve":"🇻🇪","flag-vg":"🇻🇬","flag-vi":"🇻🇮","flag-vn":"🇻🇳","flag-vu":"🇻🇺","flag-wf":"🇼🇫","flag-ws":"🇼🇸","flag-xk":"🇽🇰","flag-ye":"🇾🇪","flag-yt":"🇾🇹","flag-za":"🇿🇦","flag-zm":"🇿🇲","flag-zw":"🇿🇼","koko":"🈁","sa":"🈂️","u7121":"🈚","u6307":"🈯","u7981":"🈲","u7a7a":"🈳","u5408":"🈴","u6e80":"🈵","u6709":"🈶","u6708":"🈷️","u7533":"🈸","u5272":"🈹","u55b6":"🈺","ideograph_advantage":"🉐","accept":"🉑","cyclone":"🌀","foggy":"🌁","closed_umbrella":"🌂","night_with_stars":"🌃","sunrise_over_mountains":"🌄","sunrise":"🌅","city_sunset":"🌆","city_sunrise":"🌇","rainbow":"🌈","bridge_at_night":"🌉","ocean":"🌊","volcano":"🌋","milky_way":"🌌","earth_africa":"🌍","earth_americas":"🌎","earth_asia":"🌏","globe_with_meridians":"🌐","new_moon":"🌑","waxing_crescent_moon":"🌒","first_quarter_moon":"🌓","moon":"🌔","waxing_gibbous_moon":"🌔","full_moon":"🌕","waning_gibbous_moon":"🌖","last_quarter_moon":"🌗","waning_crescent_moon":"🌘","crescent_moon":"🌙","new_moon_with_face":"🌚","first_quarter_moon_with_face":"🌛","last_quarter_moon_with_face":"🌜","full_moon_with_face":"🌝","sun_with_face":"🌞","star2":"🌟","stars":"🌠","thermometer":"🌡️","mostly_sunny":"🌤️","sun_small_cloud":"🌤️","barely_sunny":"🌥️","sun_behind_cloud":"🌥️","partly_sunny_rain":"🌦️","sun_behind_rain_cloud":"🌦️","rain_cloud":"🌧️","snow_cloud":"🌨️","lightning":"🌩️","lightning_cloud":"🌩️","tornado":"🌪️","tornado_cloud":"🌪️","fog":"🌫️","wind_blowing_face":"🌬️","hotdog":"🌭","taco":"🌮","burrito":"🌯","chestnut":"🌰","seedling":"🌱","evergreen_tree":"🌲","deciduous_tree":"🌳","palm_tree":"🌴","cactus":"🌵","hot_pepper":"🌶️","tulip":"🌷","cherry_blossom":"🌸","rose":"🌹","hibiscus":"🌺","sunflower":"🌻","blossom":"🌼","corn":"🌽","ear_of_rice":"🌾","herb":"🌿","four_leaf_clover":"🍀","maple_leaf":"🍁","fallen_leaf":"🍂","leaves":"🍃","mushroom":"🍄","tomato":"🍅","eggplant":"🍆","grapes":"🍇","melon":"🍈","watermelon":"🍉","tangerine":"🍊","lemon":"🍋","banana":"🍌","pineapple":"🍍","apple":"🍎","green_apple":"🍏","pear":"🍐","peach":"🍑","cherries":"🍒","strawberry":"🍓","hamburger":"🍔","pizza":"🍕","meat_on_bone":"🍖","poultry_leg":"🍗","rice_cracker":"🍘","rice_ball":"🍙","rice":"🍚","curry":"🍛","ramen":"🍜","spaghetti":"🍝","bread":"🍞","fries":"🍟","sweet_potato":"🍠","dango":"🍡","oden":"🍢","sushi":"🍣","fried_shrimp":"🍤","fish_cake":"🍥","icecream":"🍦","shaved_ice":"🍧","ice_cream":"🍨","doughnut":"🍩","cookie":"🍪","chocolate_bar":"🍫","candy":"🍬","lollipop":"🍭","custard":"🍮","honey_pot":"🍯","cake":"🍰","bento":"🍱","stew":"🍲","fried_egg":"🍳","cooking":"🍳","fork_and_knife":"🍴","tea":"🍵","sake":"🍶","wine_glass":"🍷","cocktail":"🍸","tropical_drink":"🍹","beer":"🍺","beers":"🍻","baby_bottle":"🍼","knife_fork_plate":"🍽️","champagne":"🍾","popcorn":"🍿","ribbon":"🎀","gift":"🎁","birthday":"🎂","jack_o_lantern":"🎃","christmas_tree":"🎄","santa":"🎅","fireworks":"🎆","sparkler":"🎇","balloon":"🎈","tada":"🎉","confetti_ball":"🎊","tanabata_tree":"🎋","crossed_flags":"🎌","bamboo":"🎍","dolls":"🎎","flags":"🎏","wind_chime":"🎐","rice_scene":"🎑","school_satchel":"🎒","mortar_board":"🎓","medal":"🎖️","reminder_ribbon":"🎗️","studio_microphone":"🎙️","level_slider":"🎚️","control_knobs":"🎛️","film_frames":"🎞️","admission_tickets":"🎟️","carousel_horse":"🎠","ferris_wheel":"🎡","roller_coaster":"🎢","fishing_pole_and_fish":"🎣","microphone":"🎤","movie_camera":"🎥","cinema":"🎦","headphones":"🎧","art":"🎨","tophat":"🎩","circus_tent":"🎪","ticket":"🎫","clapper":"🎬","performing_arts":"🎭","video_game":"🎮","dart":"🎯","slot_machine":"🎰","8ball":"🎱","game_die":"🎲","bowling":"🎳","flower_playing_cards":"🎴","musical_note":"🎵","notes":"🎶","saxophone":"🎷","guitar":"🎸","musical_keyboard":"🎹","trumpet":"🎺","violin":"🎻","musical_score":"🎼","running_shirt_with_sash":"🎽","tennis":"🎾","ski":"🎿","basketball":"🏀","checkered_flag":"🏁","snowboarder":"🏂","woman-running":"🏃‍♀️","man-running":"🏃‍♂️","runner":"🏃‍♂️","running":"🏃‍♂️","woman-surfing":"🏄‍♀️","man-surfing":"🏄‍♂️","surfer":"🏄‍♂️","sports_medal":"🏅","trophy":"🏆","horse_racing":"🏇","football":"🏈","rugby_football":"🏉","woman-swimming":"🏊‍♀️","man-swimming":"🏊‍♂️","swimmer":"🏊‍♂️","woman-lifting-weights":"🏋️‍♀️","man-lifting-weights":"🏋️‍♂️","weight_lifter":"🏋️‍♂️","woman-golfing":"🏌️‍♀️","man-golfing":"🏌️‍♂️","golfer":"🏌️‍♂️","racing_motorcycle":"🏍️","racing_car":"🏎️","cricket_bat_and_ball":"🏏","volleyball":"🏐","field_hockey_stick_and_ball":"🏑","ice_hockey_stick_and_puck":"🏒","table_tennis_paddle_and_ball":"🏓","snow_capped_mountain":"🏔️","camping":"🏕️","beach_with_umbrella":"🏖️","building_construction":"🏗️","house_buildings":"🏘️","cityscape":"🏙️","derelict_house_building":"🏚️","classical_building":"🏛️","desert":"🏜️","desert_island":"🏝️","national_park":"🏞️","stadium":"🏟️","house":"🏠","house_with_garden":"🏡","office":"🏢","post_office":"🏣","european_post_office":"🏤","hospital":"🏥","bank":"🏦","atm":"🏧","hotel":"🏨","love_hotel":"🏩","convenience_store":"🏪","school":"🏫","department_store":"🏬","factory":"🏭","izakaya_lantern":"🏮","lantern":"🏮","japanese_castle":"🏯","european_castle":"🏰","rainbow-flag":"🏳️‍🌈","waving_white_flag":"🏳️","flag-england":"🏴󠁧󠁢󠁥󠁮󠁧󠁿","flag-scotland":"🏴󠁧󠁢󠁳󠁣󠁴󠁿","flag-wales":"🏴󠁧󠁢󠁷󠁬󠁳󠁿","waving_black_flag":"🏴","rosette":"🏵️","label":"🏷️","badminton_racquet_and_shuttlecock":"🏸","bow_and_arrow":"🏹","amphora":"🏺","skin-tone-2":"🏻","skin-tone-3":"🏼","skin-tone-4":"🏽","skin-tone-5":"🏾","skin-tone-6":"🏿","rat":"🐀","mouse2":"🐁","ox":"🐂","water_buffalo":"🐃","cow2":"🐄","tiger2":"🐅","leopard":"🐆","rabbit2":"🐇","cat2":"🐈","dragon":"🐉","crocodile":"🐊","whale2":"🐋","snail":"🐌","snake":"🐍","racehorse":"🐎","ram":"🐏","goat":"🐐","sheep":"🐑","monkey":"🐒","rooster":"🐓","chicken":"🐔","dog2":"🐕","pig2":"🐖","boar":"🐗","elephant":"🐘","octopus":"🐙","shell":"🐚","bug":"🐛","ant":"🐜","bee":"🐝","honeybee":"🐝","beetle":"🐞","fish":"🐟","tropical_fish":"🐠","blowfish":"🐡","turtle":"🐢","hatching_chick":"🐣","baby_chick":"🐤","hatched_chick":"🐥","bird":"🐦","penguin":"🐧","koala":"🐨","poodle":"🐩","dromedary_camel":"🐪","camel":"🐫","dolphin":"🐬","flipper":"🐬","mouse":"🐭","cow":"🐮","tiger":"🐯","rabbit":"🐰","cat":"🐱","dragon_face":"🐲","whale":"🐳","horse":"🐴","monkey_face":"🐵","dog":"🐶","pig":"🐷","frog":"🐸","hamster":"🐹","wolf":"🐺","bear":"🐻","panda_face":"🐼","pig_nose":"🐽","feet":"🐾","paw_prints":"🐾","chipmunk":"🐿️","eyes":"👀","eye-in-speech-bubble":"👁️‍🗨️","eye":"👁️","ear":"👂","nose":"👃","lips":"👄","tongue":"👅","point_up_2":"👆","point_down":"👇","point_left":"👈","point_right":"👉","facepunch":"👊","punch":"👊","wave":"👋","ok_hand":"👌","+1":"👍","thumbsup":"👍","-1":"👎","thumbsdown":"👎","clap":"👏","open_hands":"👐","crown":"👑","womans_hat":"👒","eyeglasses":"👓","necktie":"👔","shirt":"👕","tshirt":"👕","jeans":"👖","dress":"👗","kimono":"👘","bikini":"👙","womans_clothes":"👚","purse":"👛","handbag":"👜","pouch":"👝","mans_shoe":"👞","shoe":"👞","athletic_shoe":"👟","high_heel":"👠","sandal":"👡","boot":"👢","footprints":"👣","bust_in_silhouette":"👤","busts_in_silhouette":"👥","boy":"👦","girl":"👧","male-farmer":"👨‍🌾","male-cook":"👨‍🍳","male-student":"👨‍🎓","male-singer":"👨‍🎤","male-artist":"👨‍🎨","male-teacher":"👨‍🏫","male-factory-worker":"👨‍🏭","man-boy-boy":"👨‍👦‍👦","man-boy":"👨‍👦","man-girl-boy":"👨‍👧‍👦","man-girl-girl":"👨‍👧‍👧","man-girl":"👨‍👧","man-man-boy":"👨‍👨‍👦","man-man-boy-boy":"👨‍👨‍👦‍👦","man-man-girl":"👨‍👨‍👧","man-man-girl-boy":"👨‍👨‍👧‍👦","man-man-girl-girl":"👨‍👨‍👧‍👧","man-woman-boy":"👨‍👩‍👦","family":"👨‍👩‍👦","man-woman-boy-boy":"👨‍👩‍👦‍👦","man-woman-girl":"👨‍👩‍👧","man-woman-girl-boy":"👨‍👩‍👧‍👦","man-woman-girl-girl":"👨‍👩‍👧‍👧","male-technologist":"👨‍💻","male-office-worker":"👨‍💼","male-mechanic":"👨‍🔧","male-scientist":"👨‍🔬","male-astronaut":"👨‍🚀","male-firefighter":"👨‍🚒","male-doctor":"👨‍⚕️","male-judge":"👨‍⚖️","male-pilot":"👨‍✈️","man-heart-man":"👨‍❤️‍👨","man-kiss-man":"👨‍❤️‍💋‍👨","man":"👨","female-farmer":"👩‍🌾","female-cook":"👩‍🍳","female-student":"👩‍🎓","female-singer":"👩‍🎤","female-artist":"👩‍🎨","female-teacher":"👩‍🏫","female-factory-worker":"👩‍🏭","woman-boy-boy":"👩‍👦‍👦","woman-boy":"👩‍👦","woman-girl-boy":"👩‍👧‍👦","woman-girl-girl":"👩‍👧‍👧","woman-girl":"👩‍👧","woman-woman-boy":"👩‍👩‍👦","woman-woman-boy-boy":"👩‍👩‍👦‍👦","woman-woman-girl":"👩‍👩‍👧","woman-woman-girl-boy":"👩‍👩‍👧‍👦","woman-woman-girl-girl":"👩‍👩‍👧‍👧","female-technologist":"👩‍💻","female-office-worker":"👩‍💼","female-mechanic":"👩‍🔧","female-scientist":"👩‍🔬","female-astronaut":"👩‍🚀","female-firefighter":"👩‍🚒","female-doctor":"👩‍⚕️","female-judge":"👩‍⚖️","female-pilot":"👩‍✈️","woman-heart-man":"👩‍❤️‍👨","couple_with_heart":"👩‍❤️‍👨","woman-heart-woman":"👩‍❤️‍👩","woman-kiss-man":"👩‍❤️‍💋‍👨","couplekiss":"👩‍❤️‍💋‍👨","woman-kiss-woman":"👩‍❤️‍💋‍👩","woman":"👩","couple":"👫","man_and_woman_holding_hands":"👫","two_men_holding_hands":"👬","two_women_holding_hands":"👭","female-police-officer":"👮‍♀️","male-police-officer":"👮‍♂️","cop":"👮‍♂️","woman-with-bunny-ears-partying":"👯‍♀️","dancers":"👯‍♀️","man-with-bunny-ears-partying":"👯‍♂️","bride_with_veil":"👰","blond-haired-woman":"👱‍♀️","blond-haired-man":"👱‍♂️","person_with_blond_hair":"👱‍♂️","man_with_gua_pi_mao":"👲","woman-wearing-turban":"👳‍♀️","man-wearing-turban":"👳‍♂️","man_with_turban":"👳‍♂️","older_man":"👴","older_woman":"👵","baby":"👶","female-construction-worker":"👷‍♀️","male-construction-worker":"👷‍♂️","construction_worker":"👷‍♂️","princess":"👸","japanese_ogre":"👹","japanese_goblin":"👺","ghost":"👻","angel":"👼","alien":"👽","space_invader":"👾","imp":"👿","skull":"💀","woman-tipping-hand":"💁‍♀️","information_desk_person":"💁‍♀️","man-tipping-hand":"💁‍♂️","female-guard":"💂‍♀️","male-guard":"💂‍♂️","guardsman":"💂‍♂️","dancer":"💃","lipstick":"💄","nail_care":"💅","woman-getting-massage":"💆‍♀️","massage":"💆‍♀️","man-getting-massage":"💆‍♂️","woman-getting-haircut":"💇‍♀️","haircut":"💇‍♀️","man-getting-haircut":"💇‍♂️","barber":"💈","syringe":"💉","pill":"💊","kiss":"💋","love_letter":"💌","ring":"💍","gem":"💎","bouquet":"💐","wedding":"💒","heartbeat":"💓","broken_heart":"💔","two_hearts":"💕","sparkling_heart":"💖","heartpulse":"💗","cupid":"💘","blue_heart":"💙","green_heart":"💚","yellow_heart":"💛","purple_heart":"💜","gift_heart":"💝","revolving_hearts":"💞","heart_decoration":"💟","diamond_shape_with_a_dot_inside":"💠","bulb":"💡","anger":"💢","bomb":"💣","zzz":"💤","boom":"💥","collision":"💥","sweat_drops":"💦","droplet":"💧","dash":"💨","hankey":"💩","poop":"💩","shit":"💩","muscle":"💪","dizzy":"💫","speech_balloon":"💬","thought_balloon":"💭","white_flower":"💮","moneybag":"💰","currency_exchange":"💱","heavy_dollar_sign":"💲","credit_card":"💳","yen":"💴","dollar":"💵","euro":"💶","pound":"💷","money_with_wings":"💸","chart":"💹","seat":"💺","computer":"💻","briefcase":"💼","minidisc":"💽","floppy_disk":"💾","cd":"💿","dvd":"📀","file_folder":"📁","open_file_folder":"📂","page_with_curl":"📃","page_facing_up":"📄","date":"📅","calendar":"📆","card_index":"📇","chart_with_upwards_trend":"📈","chart_with_downwards_trend":"📉","bar_chart":"📊","clipboard":"📋","pushpin":"📌","round_pushpin":"📍","paperclip":"📎","straight_ruler":"📏","triangular_ruler":"📐","bookmark_tabs":"📑","ledger":"📒","notebook":"📓","notebook_with_decorative_cover":"📔","closed_book":"📕","book":"📖","open_book":"📖","green_book":"📗","blue_book":"📘","orange_book":"📙","books":"📚","name_badge":"📛","scroll":"📜","memo":"📝","pencil":"📝","telephone_receiver":"📞","pager":"📟","fax":"📠","satellite_antenna":"📡","loudspeaker":"📢","mega":"📣","outbox_tray":"📤","inbox_tray":"📥","package":"📦","e-mail":"📧","incoming_envelope":"📨","envelope_with_arrow":"📩","mailbox_closed":"📪","mailbox":"📫","mailbox_with_mail":"📬","mailbox_with_no_mail":"📭","postbox":"📮","postal_horn":"📯","newspaper":"📰","iphone":"📱","calling":"📲","vibration_mode":"📳","mobile_phone_off":"📴","no_mobile_phones":"📵","signal_strength":"📶","camera":"📷","camera_with_flash":"📸","video_camera":"📹","tv":"📺","radio":"📻","vhs":"📼","film_projector":"📽️","prayer_beads":"📿","twisted_rightwards_arrows":"🔀","repeat":"🔁","repeat_one":"🔂","arrows_clockwise":"🔃","arrows_counterclockwise":"🔄","low_brightness":"🔅","high_brightness":"🔆","mute":"🔇","speaker":"🔈","sound":"🔉","loud_sound":"🔊","battery":"🔋","electric_plug":"🔌","mag":"🔍","mag_right":"🔎","lock_with_ink_pen":"🔏","closed_lock_with_key":"🔐","key":"🔑","lock":"🔒","unlock":"🔓","bell":"🔔","no_bell":"🔕","bookmark":"🔖","link":"🔗","radio_button":"🔘","back":"🔙","end":"🔚","on":"🔛","soon":"🔜","top":"🔝","underage":"🔞","keycap_ten":"🔟","capital_abcd":"🔠","abcd":"🔡","symbols":"🔣","abc":"🔤","fire":"🔥","flashlight":"🔦","wrench":"🔧","hammer":"🔨","nut_and_bolt":"🔩","hocho":"🔪","knife":"🔪","gun":"🔫","microscope":"🔬","telescope":"🔭","crystal_ball":"🔮","six_pointed_star":"🔯","beginner":"🔰","trident":"🔱","black_square_button":"🔲","white_square_button":"🔳","red_circle":"🔴","large_blue_circle":"🔵","large_orange_diamond":"🔶","large_blue_diamond":"🔷","small_orange_diamond":"🔸","small_blue_diamond":"🔹","small_red_triangle":"🔺","small_red_triangle_down":"🔻","arrow_up_small":"🔼","arrow_down_small":"🔽","om_symbol":"🕉️","dove_of_peace":"🕊️","kaaba":"🕋","mosque":"🕌","synagogue":"🕍","menorah_with_nine_branches":"🕎","clock1":"🕐","clock2":"🕑","clock3":"🕒","clock4":"🕓","clock5":"🕔","clock6":"🕕","clock7":"🕖","clock8":"🕗","clock9":"🕘","clock10":"🕙","clock11":"🕚","clock12":"🕛","clock130":"🕜","clock230":"🕝","clock330":"🕞","clock430":"🕟","clock530":"🕠","clock630":"🕡","clock730":"🕢","clock830":"🕣","clock930":"🕤","clock1030":"🕥","clock1130":"🕦","clock1230":"🕧","candle":"🕯️","mantelpiece_clock":"🕰️","hole":"🕳️","man_in_business_suit_levitating":"🕴️","female-detective":"🕵️‍♀️","male-detective":"🕵️‍♂️","sleuth_or_spy":"🕵️‍♂️","dark_sunglasses":"🕶️","spider":"🕷️","spider_web":"🕸️","joystick":"🕹️","man_dancing":"🕺","linked_paperclips":"🖇️","lower_left_ballpoint_pen":"🖊️","lower_left_fountain_pen":"🖋️","lower_left_paintbrush":"🖌️","lower_left_crayon":"🖍️","raised_hand_with_fingers_splayed":"🖐️","middle_finger":"🖕","reversed_hand_with_middle_finger_extended":"🖕","spock-hand":"🖖","black_heart":"🖤","desktop_computer":"🖥️","printer":"🖨️","three_button_mouse":"🖱️","trackball":"🖲️","frame_with_picture":"🖼️","card_index_dividers":"🗂️","card_file_box":"🗃️","file_cabinet":"🗄️","wastebasket":"🗑️","spiral_note_pad":"🗒️","spiral_calendar_pad":"🗓️","compression":"🗜️","old_key":"🗝️","rolled_up_newspaper":"🗞️","dagger_knife":"🗡️","speaking_head_in_silhouette":"🗣️","left_speech_bubble":"🗨️","right_anger_bubble":"🗯️","ballot_box_with_ballot":"🗳️","world_map":"🗺️","mount_fuji":"🗻","tokyo_tower":"🗼","statue_of_liberty":"🗽","japan":"🗾","moyai":"🗿","grinning":"😀","grin":"😁","joy":"😂","smiley":"😃","smile":"😄","sweat_smile":"😅","laughing":"😆","satisfied":"😆","innocent":"😇","smiling_imp":"😈","wink":"😉","blush":"😊","yum":"😋","relieved":"😌","heart_eyes":"😍","sunglasses":"😎","smirk":"😏","neutral_face":"😐","expressionless":"😑","unamused":"😒","sweat":"😓","pensive":"😔","confused":"😕","confounded":"😖","kissing":"😗","kissing_heart":"😘","kissing_smiling_eyes":"😙","kissing_closed_eyes":"😚","stuck_out_tongue":"😛","stuck_out_tongue_winking_eye":"😜","stuck_out_tongue_closed_eyes":"😝","disappointed":"😞","worried":"😟","angry":"😠","rage":"😡","cry":"😢","persevere":"😣","triumph":"😤","disappointed_relieved":"😥","frowning":"😦","anguished":"😧","fearful":"😨","weary":"😩","sleepy":"😪","tired_face":"😫","grimacing":"😬","sob":"😭","open_mouth":"😮","hushed":"😯","cold_sweat":"😰","scream":"😱","astonished":"😲","flushed":"😳","sleeping":"😴","dizzy_face":"😵","no_mouth":"😶","mask":"😷","smile_cat":"😸","joy_cat":"😹","smiley_cat":"😺","heart_eyes_cat":"😻","smirk_cat":"😼","kissing_cat":"😽","pouting_cat":"😾","crying_cat_face":"😿","scream_cat":"🙀","slightly_frowning_face":"🙁","slightly_smiling_face":"🙂","upside_down_face":"🙃","face_with_rolling_eyes":"🙄","woman-gesturing-no":"🙅‍♀️","no_good":"🙅‍♀️","man-gesturing-no":"🙅‍♂️","woman-gesturing-ok":"🙆‍♀️","ok_woman":"🙆‍♀️","man-gesturing-ok":"🙆‍♂️","woman-bowing":"🙇‍♀️","man-bowing":"🙇‍♂️","bow":"🙇‍♂️","see_no_evil":"🙈","hear_no_evil":"🙉","speak_no_evil":"🙊","woman-raising-hand":"🙋‍♀️","raising_hand":"🙋‍♀️","man-raising-hand":"🙋‍♂️","raised_hands":"🙌","woman-frowning":"🙍‍♀️","person_frowning":"🙍‍♀️","man-frowning":"🙍‍♂️","woman-pouting":"🙎‍♀️","person_with_pouting_face":"🙎‍♀️","man-pouting":"🙎‍♂️","pray":"🙏","rocket":"🚀","helicopter":"🚁","steam_locomotive":"🚂","railway_car":"🚃","bullettrain_side":"🚄","bullettrain_front":"🚅","train2":"🚆","metro":"🚇","light_rail":"🚈","station":"🚉","tram":"🚊","train":"🚋","bus":"🚌","oncoming_bus":"🚍","trolleybus":"🚎","busstop":"🚏","minibus":"🚐","ambulance":"🚑","fire_engine":"🚒","police_car":"🚓","oncoming_police_car":"🚔","taxi":"🚕","oncoming_taxi":"🚖","car":"🚗","red_car":"🚗","oncoming_automobile":"🚘","blue_car":"🚙","truck":"🚚","articulated_lorry":"🚛","tractor":"🚜","monorail":"🚝","mountain_railway":"🚞","suspension_railway":"🚟","mountain_cableway":"🚠","aerial_tramway":"🚡","ship":"🚢","woman-rowing-boat":"🚣‍♀️","man-rowing-boat":"🚣‍♂️","rowboat":"🚣‍♂️","speedboat":"🚤","traffic_light":"🚥","vertical_traffic_light":"🚦","construction":"🚧","rotating_light":"🚨","triangular_flag_on_post":"🚩","door":"🚪","no_entry_sign":"🚫","smoking":"🚬","no_smoking":"🚭","put_litter_in_its_place":"🚮","do_not_litter":"🚯","potable_water":"🚰","non-potable_water":"🚱","bike":"🚲","no_bicycles":"🚳","woman-biking":"🚴‍♀️","man-biking":"🚴‍♂️","bicyclist":"🚴‍♂️","woman-mountain-biking":"🚵‍♀️","man-mountain-biking":"🚵‍♂️","mountain_bicyclist":"🚵‍♂️","woman-walking":"🚶‍♀️","man-walking":"🚶‍♂️","walking":"🚶‍♂️","no_pedestrians":"🚷","children_crossing":"🚸","mens":"🚹","womens":"🚺","restroom":"🚻","baby_symbol":"🚼","toilet":"🚽","wc":"🚾","shower":"🚿","bath":"🛀","bathtub":"🛁","passport_control":"🛂","customs":"🛃","baggage_claim":"🛄","left_luggage":"🛅","couch_and_lamp":"🛋️","sleeping_accommodation":"🛌","shopping_bags":"🛍️","bellhop_bell":"🛎️","bed":"🛏️","place_of_worship":"🛐","octagonal_sign":"🛑","shopping_trolley":"🛒","hammer_and_wrench":"🛠️","shield":"🛡️","oil_drum":"🛢️","motorway":"🛣️","railway_track":"🛤️","motor_boat":"🛥️","small_airplane":"🛩️","airplane_departure":"🛫","airplane_arriving":"🛬","satellite":"🛰️","passenger_ship":"🛳️","scooter":"🛴","motor_scooter":"🛵","canoe":"🛶","sled":"🛷","flying_saucer":"🛸","zipper_mouth_face":"🤐","money_mouth_face":"🤑","face_with_thermometer":"🤒","nerd_face":"🤓","thinking_face":"🤔","face_with_head_bandage":"🤕","robot_face":"🤖","hugging_face":"🤗","the_horns":"🤘","sign_of_the_horns":"🤘","call_me_hand":"🤙","raised_back_of_hand":"🤚","left-facing_fist":"🤛","right-facing_fist":"🤜","handshake":"🤝","crossed_fingers":"🤞","hand_with_index_and_middle_fingers_crossed":"🤞","i_love_you_hand_sign":"🤟","face_with_cowboy_hat":"🤠","clown_face":"🤡","nauseated_face":"🤢","rolling_on_the_floor_laughing":"🤣","drooling_face":"🤤","lying_face":"🤥","woman-facepalming":"🤦‍♀️","man-facepalming":"🤦‍♂️","face_palm":"🤦","sneezing_face":"🤧","face_with_raised_eyebrow":"🤨","face_with_one_eyebrow_raised":"🤨","star-struck":"🤩","grinning_face_with_star_eyes":"🤩","zany_face":"🤪","grinning_face_with_one_large_and_one_small_eye":"🤪","shushing_face":"🤫","face_with_finger_covering_closed_lips":"🤫","face_with_symbols_on_mouth":"🤬","serious_face_with_symbols_covering_mouth":"🤬","face_with_hand_over_mouth":"🤭","smiling_face_with_smiling_eyes_and_hand_covering_mouth":"🤭","face_vomiting":"🤮","face_with_open_mouth_vomiting":"🤮","exploding_head":"🤯","shocked_face_with_exploding_head":"🤯","pregnant_woman":"🤰","breast-feeding":"🤱","palms_up_together":"🤲","selfie":"🤳","prince":"🤴","man_in_tuxedo":"🤵","mrs_claus":"🤶","mother_christmas":"🤶","woman-shrugging":"🤷‍♀️","man-shrugging":"🤷‍♂️","shrug":"🤷","woman-cartwheeling":"🤸‍♀️","man-cartwheeling":"🤸‍♂️","person_doing_cartwheel":"🤸","woman-juggling":"🤹‍♀️","man-juggling":"🤹‍♂️","juggling":"🤹","fencer":"🤺","woman-wrestling":"🤼‍♀️","man-wrestling":"🤼‍♂️","wrestlers":"🤼","woman-playing-water-polo":"🤽‍♀️","man-playing-water-polo":"🤽‍♂️","water_polo":"🤽","woman-playing-handball":"🤾‍♀️","man-playing-handball":"🤾‍♂️","handball":"🤾","wilted_flower":"🥀","drum_with_drumsticks":"🥁","clinking_glasses":"🥂","tumbler_glass":"🥃","spoon":"🥄","goal_net":"🥅","first_place_medal":"🥇","second_place_medal":"🥈","third_place_medal":"🥉","boxing_glove":"🥊","martial_arts_uniform":"🥋","curling_stone":"🥌","croissant":"🥐","avocado":"🥑","cucumber":"🥒","bacon":"🥓","potato":"🥔","carrot":"🥕","baguette_bread":"🥖","green_salad":"🥗","shallow_pan_of_food":"🥘","stuffed_flatbread":"🥙","egg":"🥚","glass_of_milk":"🥛","peanuts":"🥜","kiwifruit":"🥝","pancakes":"🥞","dumpling":"🥟","fortune_cookie":"🥠","takeout_box":"🥡","chopsticks":"🥢","bowl_with_spoon":"🥣","cup_with_straw":"🥤","coconut":"🥥","broccoli":"🥦","pie":"🥧","pretzel":"🥨","cut_of_meat":"🥩","sandwich":"🥪","canned_food":"🥫","crab":"🦀","lion_face":"🦁","scorpion":"🦂","turkey":"🦃","unicorn_face":"🦄","eagle":"🦅","duck":"🦆","bat":"🦇","shark":"🦈","owl":"🦉","fox_face":"🦊","butterfly":"🦋","deer":"🦌","gorilla":"🦍","lizard":"🦎","rhinoceros":"🦏","shrimp":"🦐","squid":"🦑","giraffe_face":"🦒","zebra_face":"🦓","hedgehog":"🦔","sauropod":"🦕","t-rex":"🦖","cricket":"🦗","cheese_wedge":"🧀","face_with_monocle":"🧐","adult":"🧑","child":"🧒","older_adult":"🧓","bearded_person":"🧔","person_with_headscarf":"🧕","woman_in_steamy_room":"🧖‍♀️","man_in_steamy_room":"🧖‍♂️","person_in_steamy_room":"🧖‍♂️","woman_climbing":"🧗‍♀️","person_climbing":"🧗‍♀️","man_climbing":"🧗‍♂️","woman_in_lotus_position":"🧘‍♀️","person_in_lotus_position":"🧘‍♀️","man_in_lotus_position":"🧘‍♂️","female_mage":"🧙‍♀️","mage":"🧙‍♀️","male_mage":"🧙‍♂️","female_fairy":"🧚‍♀️","fairy":"🧚‍♀️","male_fairy":"🧚‍♂️","female_vampire":"🧛‍♀️","vampire":"🧛‍♀️","male_vampire":"🧛‍♂️","mermaid":"🧜‍♀️","merman":"🧜‍♂️","merperson":"🧜‍♂️","female_elf":"🧝‍♀️","male_elf":"🧝‍♂️","elf":"🧝‍♂️","female_genie":"🧞‍♀️","male_genie":"🧞‍♂️","genie":"🧞‍♂️","female_zombie":"🧟‍♀️","male_zombie":"🧟‍♂️","zombie":"🧟‍♂️","brain":"🧠","orange_heart":"🧡","billed_cap":"🧢","scarf":"🧣","gloves":"🧤","coat":"🧥","socks":"🧦","bangbang":"‼️","interrobang":"⁉️","tm":"™️","information_source":"ℹ️","left_right_arrow":"↔️","arrow_up_down":"↕️","arrow_upper_left":"↖️","arrow_upper_right":"↗️","arrow_lower_right":"↘️","arrow_lower_left":"↙️","leftwards_arrow_with_hook":"↩️","arrow_right_hook":"↪️","watch":"⌚","hourglass":"⌛","keyboard":"⌨️","eject":"⏏️","fast_forward":"⏩","rewind":"⏪","arrow_double_up":"⏫","arrow_double_down":"⏬","black_right_pointing_double_triangle_with_vertical_bar":"⏭️","black_left_pointing_double_triangle_with_vertical_bar":"⏮️","black_right_pointing_triangle_with_double_vertical_bar":"⏯️","alarm_clock":"⏰","stopwatch":"⏱️","timer_clock":"⏲️","hourglass_flowing_sand":"⏳","double_vertical_bar":"⏸️","black_square_for_stop":"⏹️","black_circle_for_record":"⏺️","m":"Ⓜ️","black_small_square":"▪️","white_small_square":"▫️","arrow_forward":"▶️","arrow_backward":"◀️","white_medium_square":"◻️","black_medium_square":"◼️","white_medium_small_square":"◽","black_medium_small_square":"◾","sunny":"☀️","cloud":"☁️","umbrella":"☂️","snowman":"☃️","comet":"☄️","phone":"☎️","telephone":"☎️","ballot_box_with_check":"☑️","shamrock":"☘️","point_up":"☝️","skull_and_crossbones":"☠️","radioactive_sign":"☢️","biohazard_sign":"☣️","orthodox_cross":"☦️","star_and_crescent":"☪️","peace_symbol":"☮️","yin_yang":"☯️","wheel_of_dharma":"☸️","white_frowning_face":"☹️","relaxed":"☺️","female_sign":"♀️","male_sign":"♂️","gemini":"♊","cancer":"♋","leo":"♌","virgo":"♍","libra":"♎","scorpius":"♏","spades":"♠️","clubs":"♣️","hearts":"♥️","diamonds":"♦️","hotsprings":"♨️","recycle":"♻️","wheelchair":"♿","hammer_and_pick":"⚒️","crossed_swords":"⚔️","medical_symbol":"⚕️","staff_of_aesculapius":"⚕️","scales":"⚖️","alembic":"⚗️","gear":"⚙️","atom_symbol":"⚛️","fleur_de_lis":"⚜️","warning":"⚠️","zap":"⚡","white_circle":"⚪","black_circle":"⚫","coffin":"⚰️","funeral_urn":"⚱️","soccer":"⚽","baseball":"⚾","snowman_without_snow":"⛄","partly_sunny":"⛅","thunder_cloud_and_rain":"⛈️","ophiuchus":"⛎","pick":"⛏️","helmet_with_white_cross":"⛑️","chains":"⛓️","no_entry":"⛔","shinto_shrine":"⛩️","church":"⛪","mountain":"⛰️","umbrella_on_ground":"⛱️","fountain":"⛲","golf":"⛳","ferry":"⛴️","boat":"⛵","sailboat":"⛵","skier":"⛷️","ice_skate":"⛸️","woman-bouncing-ball":"⛹️‍♀️","man-bouncing-ball":"⛹️‍♂️","person_with_ball":"⛹️‍♂️","tent":"⛺","fuelpump":"⛽","scissors":"✂️","airplane":"✈️","email":"✉️","envelope":"✉️","fist":"✊","hand":"✋","raised_hand":"✋","v":"✌️","writing_hand":"✍️","pencil2":"✏️","black_nib":"✒️","heavy_check_mark":"✔️","heavy_multiplication_x":"✖️","latin_cross":"✝️","star_of_david":"✡️","eight_spoked_asterisk":"✳️","eight_pointed_black_star":"✴️","snowflake":"❄️","sparkle":"❇️","x":"❌","negative_squared_cross_mark":"❎","heavy_heart_exclamation_mark_ornament":"❣️","heart":"❤️","arrow_right":"➡️","curly_loop":"➰","loop":"➿","arrow_heading_up":"⤴️","arrow_heading_down":"⤵️","arrow_left":"⬅️","arrow_up":"⬆️","arrow_down":"⬇️","black_large_square":"⬛","white_large_square":"⬜","star":"⭐","o":"⭕","wavy_dash":"〰️","part_alternation_mark":"〽️","congratulations":"㊗️","secret":"㊙️"}')},function(e,t,a){const{defaults:r}=a(97),{block:n}=a(436),{rtrim:i,splitCells:s,escape:o}=a(81);e.exports=class e{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||r,this.rules=n.normal,this.options.pedantic?this.rules=n.pedantic:this.options.gfm&&(this.rules=n.gfm)}static get rules(){return n}static lex(t,a){return new e(a).lex(t)}lex(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.token(e,!0)}token(e,t){let a,r,c,l,u,d,p,h,f,m,g,b,y,v,_,w;for(e=e.replace(/^ +$/gm,"");e;)if((c=this.rules.newline.exec(e))&&(e=e.substring(c[0].length),c[0].length>1&&this.tokens.push({type:"space"})),c=this.rules.code.exec(e)){const t=this.tokens[this.tokens.length-1];e=e.substring(c[0].length),t&&"paragraph"===t.type?t.text+="\n"+c[0].trimRight():(c=c[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?c:i(c,"\n")}))}else if(c=this.rules.fences.exec(e))e=e.substring(c[0].length),this.tokens.push({type:"code",lang:c[2]?c[2].trim():c[2],text:c[3]||""});else if(c=this.rules.heading.exec(e))e=e.substring(c[0].length),this.tokens.push({type:"heading",depth:c[1].length,text:c[2]});else if((c=this.rules.nptable.exec(e))&&(d={type:"table",header:s(c[1].replace(/^ *| *\| *$/g,"")),align:c[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:c[3]?c[3].replace(/\n$/,"").split("\n"):[]},d.header.length===d.align.length)){for(e=e.substring(c[0].length),g=0;g<d.align.length;g++)/^ *-+: *$/.test(d.align[g])?d.align[g]="right":/^ *:-+: *$/.test(d.align[g])?d.align[g]="center":/^ *:-+ *$/.test(d.align[g])?d.align[g]="left":d.align[g]=null;for(g=0;g<d.cells.length;g++)d.cells[g]=s(d.cells[g],d.header.length);this.tokens.push(d)}else if(c=this.rules.hr.exec(e))e=e.substring(c[0].length),this.tokens.push({type:"hr"});else if(c=this.rules.blockquote.exec(e))e=e.substring(c[0].length),this.tokens.push({type:"blockquote_start"}),c=c[0].replace(/^ *> ?/gm,""),this.token(c,t),this.tokens.push({type:"blockquote_end"});else if(c=this.rules.list.exec(e)){for(e=e.substring(c[0].length),l=c[2],v=l.length>1,p={type:"list_start",ordered:v,start:v?+l:"",loose:!1},this.tokens.push(p),c=c[0].match(this.rules.item),h=[],a=!1,y=c.length,g=0;g<y;g++)d=c[g],m=d.length,d=d.replace(/^ *([*+-]|\d+\.) */,""),~d.indexOf("\n ")&&(m-=d.length,d=this.options.pedantic?d.replace(/^ {1,4}/gm,""):d.replace(new RegExp("^ {1,"+m+"}","gm"),"")),g!==y-1&&(u=n.bullet.exec(c[g+1])[0],(l.length>1?1===u.length:u.length>1||this.options.smartLists&&u!==l)&&(e=c.slice(g+1).join("\n")+e,g=y-1)),r=a||/\n\n(?!\s*$)/.test(d),g!==y-1&&(a="\n"===d.charAt(d.length-1),r||(r=a)),r&&(p.loose=!0),_=/^\[[ xX]\] /.test(d),w=void 0,_&&(w=" "!==d[1],d=d.replace(/^\[[ xX]\] +/,"")),f={type:"list_item_start",task:_,checked:w,loose:r},h.push(f),this.tokens.push(f),this.token(d,!1),this.tokens.push({type:"list_item_end"});if(p.loose)for(y=h.length,g=0;g<y;g++)h[g].loose=!0;this.tokens.push({type:"list_end"})}else if(c=this.rules.html.exec(e))e=e.substring(c[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===c[1]||"script"===c[1]||"style"===c[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(c[0]):o(c[0]):c[0]});else if(t&&(c=this.rules.def.exec(e)))e=e.substring(c[0].length),c[3]&&(c[3]=c[3].substring(1,c[3].length-1)),b=c[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[b]||(this.tokens.links[b]={href:c[2],title:c[3]});else if((c=this.rules.table.exec(e))&&(d={type:"table",header:s(c[1].replace(/^ *| *\| *$/g,"")),align:c[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:c[3]?c[3].replace(/\n$/,"").split("\n"):[]},d.header.length===d.align.length)){for(e=e.substring(c[0].length),g=0;g<d.align.length;g++)/^ *-+: *$/.test(d.align[g])?d.align[g]="right":/^ *:-+: *$/.test(d.align[g])?d.align[g]="center":/^ *:-+ *$/.test(d.align[g])?d.align[g]="left":d.align[g]=null;for(g=0;g<d.cells.length;g++)d.cells[g]=s(d.cells[g].replace(/^ *\| *| *\| *$/g,""),d.header.length);this.tokens.push(d)}else if(c=this.rules.lheading.exec(e))e=e.substring(c[0].length),this.tokens.push({type:"heading",depth:"="===c[2].charAt(0)?1:2,text:c[1]});else if(t&&(c=this.rules.paragraph.exec(e)))e=e.substring(c[0].length),this.tokens.push({type:"paragraph",text:"\n"===c[1].charAt(c[1].length-1)?c[1].slice(0,-1):c[1]});else if(c=this.rules.text.exec(e))e=e.substring(c[0].length),this.tokens.push({type:"text",text:c[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens}}},function(e,t,a){const r=a(237),n=a(437),i=a(438),s=a(439),{defaults:o}=a(97),{merge:c,unescape:l}=a(81);e.exports=class e{constructor(e){this.tokens=[],this.token=null,this.options=e||o,this.options.renderer=this.options.renderer||new r,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new n}static parse(t,a){return new e(a).parse(t)}parse(e){this.inline=new i(e.links,this.options),this.inlineText=new i(e.links,c({},this.options,{renderer:new s})),this.tokens=e.reverse();let t="";for(;this.next();)t+=this.tok();return t}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let e=this.token.text;for(;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)}tok(){let e="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,l(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let t,a,r,n,i="";for(r="",t=0;t<this.token.header.length;t++)r+=this.renderer.tablecell(this.inline.output(this.token.header[t]),{header:!0,align:this.token.align[t]});for(i+=this.renderer.tablerow(r),t=0;t<this.token.cells.length;t++){for(a=this.token.cells[t],r="",n=0;n<a.length;n++)r+=this.renderer.tablecell(this.inline.output(a[n]),{header:!1,align:this.token.align[n]});e+=this.renderer.tablerow(r)}return this.renderer.table(i,e)}case"blockquote_start":for(e="";"blockquote_end"!==this.next().type;)e+=this.tok();return this.renderer.blockquote(e);case"list_start":{e="";const t=this.token.ordered,a=this.token.start;for(;"list_end"!==this.next().type;)e+=this.tok();return this.renderer.list(e,t,a)}case"list_item_start":{e="";const t=this.token.loose,a=this.token.checked,r=this.token.task;if(this.token.task)if(t)if("text"===this.peek().type){const e=this.peek();e.text=this.renderer.checkbox(a)+" "+e.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(a)});else e+=this.renderer.checkbox(a);for(;"list_item_end"!==this.next().type;)e+=t||"text"!==this.token.type?this.tok():this.parseText();return this.renderer.listitem(e,r,a)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const e='Token with "'+this.token.type+'" type was not found.';if(!this.options.silent)throw new Error(e);console.log(e)}}}}},function(e,t,a){"use strict";function r(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){t&&Object.keys(t).forEach((function(a){e[a]=t[a]}))})),e}function n(e){return Object.prototype.toString.call(e)}function i(e){return"[object Function]"===n(e)}function s(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var o={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};var c={"http:":{validate:function(e,t,a){var r=e.slice(t);return a.re.http||(a.re.http=new RegExp("^\\/\\/"+a.re.src_auth+a.re.src_host_port_strict+a.re.src_path,"i")),a.re.http.test(r)?r.match(a.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,a){var r=e.slice(t);return a.re.no_http||(a.re.no_http=new RegExp("^"+a.re.src_auth+"(?:localhost|(?:(?:"+a.re.src_domain+")\\.)+"+a.re.src_domain_root+")"+a.re.src_port+a.re.src_host_terminator+a.re.src_path,"i")),a.re.no_http.test(r)?t>=3&&":"===e[t-3]||t>=3&&"/"===e[t-3]?0:r.match(a.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,a){var r=e.slice(t);return a.re.mailto||(a.re.mailto=new RegExp("^"+a.re.src_email_name+"@"+a.re.src_host_strict,"i")),a.re.mailto.test(r)?r.match(a.re.mailto)[0].length:0}}},l="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function u(e){var t=e.re=a(1188)(e.__opts__),r=e.__tlds__.slice();function o(e){return e.replace("%TLDS%",t.src_tlds)}e.onCompile(),e.__tlds_replaced__||r.push("a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]"),r.push(t.src_xn),t.src_tlds=r.join("|"),t.email_fuzzy=RegExp(o(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(o(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(o(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(o(t.tpl_host_fuzzy_test),"i");var c=[];function l(e,t){throw new Error('(LinkifyIt) Invalid schema "'+e+'": '+t)}e.__compiled__={},Object.keys(e.__schemas__).forEach((function(t){var a=e.__schemas__[t];if(null!==a){var r={validate:null,link:null};if(e.__compiled__[t]=r,"[object Object]"===n(a))return!function(e){return"[object RegExp]"===n(e)}(a.validate)?i(a.validate)?r.validate=a.validate:l(t,a):r.validate=function(e){return function(t,a){var r=t.slice(a);return e.test(r)?r.match(e)[0].length:0}}(a.validate),void(i(a.normalize)?r.normalize=a.normalize:a.normalize?l(t,a):r.normalize=function(e,t){t.normalize(e)});!function(e){return"[object String]"===n(e)}(a)?l(t,a):c.push(t)}})),c.forEach((function(t){e.__compiled__[e.__schemas__[t]]&&(e.__compiled__[t].validate=e.__compiled__[e.__schemas__[t]].validate,e.__compiled__[t].normalize=e.__compiled__[e.__schemas__[t]].normalize)})),e.__compiled__[""]={validate:null,normalize:function(e,t){t.normalize(e)}};var u=Object.keys(e.__compiled__).filter((function(t){return t.length>0&&e.__compiled__[t]})).map(s).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+u+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+t.src_ZPCc+"))("+u+")","ig"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),function(e){e.__index__=-1,e.__text_cache__=""}(e)}function d(e,t){var a=e.__index__,r=e.__last_index__,n=e.__text_cache__.slice(a,r);this.schema=e.__schema__.toLowerCase(),this.index=a+t,this.lastIndex=r+t,this.raw=n,this.text=n,this.url=n}function p(e,t){var a=new d(e,t);return e.__compiled__[a.schema].normalize(a,e),a}function h(e,t){if(!(this instanceof h))return new h(e,t);var a;t||(a=e,Object.keys(a||{}).reduce((function(e,t){return e||o.hasOwnProperty(t)}),!1)&&(t=e,e={})),this.__opts__=r({},o,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=r({},c,e),this.__compiled__={},this.__tlds__=l,this.__tlds_replaced__=!1,this.re={},u(this)}h.prototype.add=function(e,t){return this.__schemas__[e]=t,u(this),this},h.prototype.set=function(e){return this.__opts__=r(this.__opts__,e),this},h.prototype.test=function(e){if(this.__text_cache__=e,this.__index__=-1,!e.length)return!1;var t,a,r,n,i,s,o,c;if(this.re.schema_test.test(e))for((o=this.re.schema_search).lastIndex=0;null!==(t=o.exec(e));)if(n=this.testSchemaAt(e,t[2],o.lastIndex)){this.__schema__=t[2],this.__index__=t.index+t[1].length,this.__last_index__=t.index+t[0].length+n;break}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=e.search(this.re.host_fuzzy_test))>=0&&(this.__index__<0||c<this.__index__)&&null!==(a=e.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))&&(i=a.index+a[1].length,(this.__index__<0||i<this.__index__)&&(this.__schema__="",this.__index__=i,this.__last_index__=a.index+a[0].length)),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&e.indexOf("@")>=0&&null!==(r=e.match(this.re.email_fuzzy))&&(i=r.index+r[1].length,s=r.index+r[0].length,(this.__index__<0||i<this.__index__||i===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=i,this.__last_index__=s)),this.__index__>=0},h.prototype.pretest=function(e){return this.re.pretest.test(e)},h.prototype.testSchemaAt=function(e,t,a){return this.__compiled__[t.toLowerCase()]?this.__compiled__[t.toLowerCase()].validate(e,a,this):0},h.prototype.match=function(e){var t=0,a=[];this.__index__>=0&&this.__text_cache__===e&&(a.push(p(this,t)),t=this.__last_index__);for(var r=t?e.slice(t):e;this.test(r);)a.push(p(this,t)),r=r.slice(this.__last_index__),t+=this.__last_index__;return a.length?a:null},h.prototype.tlds=function(e,t){return e=Array.isArray(e)?e:[e],t?(this.__tlds__=this.__tlds__.concat(e).sort().filter((function(e,t,a){return e!==a[t-1]})).reverse(),u(this),this):(this.__tlds__=e.slice(),this.__tlds_replaced__=!0,u(this),this)},h.prototype.normalize=function(e){e.schema||(e.url="http://"+e.url),"mailto:"!==e.schema||/^mailto:/i.test(e.url)||(e.url="mailto:"+e.url)},h.prototype.onCompile=function(){},e.exports=h},function(e,t,a){"use strict";e.exports=function(e){var t={};t.src_Any=a(1189).source,t.src_Cc=a(1190).source,t.src_Z=a(1191).source,t.src_P=a(1192).source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");return t.src_pseudo_letter="(?:(?![><｜]|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|[><｜]|"+t.src_ZPCc+")(?!-|_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|[><｜]|[()[\\]{}.,\"'?!\\-]).|\\[(?:(?!"+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+'|["]).)+\\"|\\\'(?:(?!'+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-]).|\\.{2,4}[a-zA-Z0-9%/]|\\.(?!"+t.src_ZCc+"|[.]).|"+(e&&e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+"\\,(?!"+t.src_ZCc+").|\\!(?!"+t.src_ZCc+"|[!]).|\\?(?!"+t.src_ZCc+"|[?]).)+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy='(^|[><｜]|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+t.src_ZPCc+"))((?![$+<=>^`|｜])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}},function(e,t){e.exports=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/},function(e,t){e.exports=/[\0-\x1F\x7F-\x9F]/},function(e,t){e.exports=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/},function(e,t){e.exports=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/},function(e,t){var a=function(){var e,t={getClass:function(e){return Object.prototype.toString.call(e)},getType:function(e){if(null===e)return"null";switch(typeof e){case"number":return"number";case"string":return"string";case"boolean":return"boolean"}switch(t.getClass(e)){case"[object Array]":return"array";case"[object Object]":return"object"}throw new Error("Bad type: "+t.getClass(e))},forEachNode:function(e,a){var r;switch(t.getType(e)){case"array":r=e.length-1,e.forEach((function(e,t){a(t,e,t===r)}));break;case"object":var n=Object.keys(e).sort();r=n.length-1,n.forEach((function(t,n){a(t,e[t],n===r)}))}},inherits:(e=function(){},function(t,a){e.prototype=a.prototype,t.prototype=new e,t.prototype.constructor=t}),isValidRoot:function(e){switch(t.getType(e)){case"object":case"array":return!0;default:return!1}},extend:function(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a])}};function a(e,r,n){var i=t.getType(r);if(i in a.CONSTRUCTORS)return new a.CONSTRUCTORS[i](e,r,n);throw new Error("Bad type: "+t.getClass(r))}function r(e,t,a){if(this.constructor===r)throw new Error("This is abstract class");var n=this,i=document.createElement("li");n.label=e,n.isComplex=!1,i.classList.add("jsontree_node"),i.innerHTML=function(e,t){return'                    <span class="jsontree_label-wrapper">                        <span class="jsontree_label">"'+e+'"</span> :                     </span>                    <span class="jsontree_value-wrapper">                        <span class="jsontree_value jsontree_value_'+n.type+'">'+t+"</span>"+(a?"":",")+"</span>"}(e,t),n.el=i,i.querySelector(".jsontree_label").addEventListener("click",(function(e){if(!e.altKey)return e.shiftKey?(document.getSelection().removeAllRanges(),void alert(n.getJSONPath())):void 0;n.toggleMarked()}),!1)}function n(e,t,a){this.type="boolean",r.call(this,e,t,a)}function i(e,t,a){this.type="number",r.call(this,e,t,a)}function s(e,t,a){this.type="string",r.call(this,e,'"'+t+'"',a)}function o(e,t,a){this.type="null",r.call(this,e,t,a)}function c(e,r,n){if(this.constructor===c)throw new Error("This is abstract class");var i,s,o,l=this,u=document.createElement("li"),d=[];l.label=e,l.isComplex=!0,u.classList.add("jsontree_node"),u.classList.add("jsontree_node_complex"),u.innerHTML=function(e,t){var a=n?"":",",r='                        <div class="jsontree_value-wrapper">                            <div class="jsontree_value jsontree_value_'+l.type+'">                                <b>'+t[0]+'</b>                                <span class="jsontree_show-more">&hellip;</span>                                <ul class="jsontree_child-nodes"></ul>                                <b>'+t[1]+"</b></div>"+a+"</div>";return null!==e&&(r='                        <span class="jsontree_label-wrapper">                            <span class="jsontree_label"><span class="jsontree_expand-button"></span>"'+e+'"</span> :                         </span>'+r),r}(e,l.sym),i=u.querySelector(".jsontree_child-nodes"),null!==e?(s=u.querySelector(".jsontree_label"),o=u.querySelector(".jsontree_show-more"),s.addEventListener("click",(function(e){if(!e.altKey)return e.shiftKey?(document.getSelection().removeAllRanges(),void alert(l.getJSONPath())):void l.toggle(e.ctrlKey||e.metaKey);l.toggleMarked()}),!1),o.addEventListener("click",(function(e){l.toggle(e.ctrlKey||e.metaKey)}),!1),l.isRoot=!1):(l.isRoot=!0,l.parent=null,u.classList.add("jsontree_node_expanded")),l.el=u,l.childNodes=d,l.childNodesUl=i,t.forEachNode(r,(function(e,t,r){l.addChild(new a(e,t,r))})),l.isEmpty=!Boolean(d.length),l.isEmpty&&u.classList.add("jsontree_node_empty")}function l(e,t,a){this.sym=["{","}"],this.type="object",c.call(this,e,t,a)}function u(e,t,a){this.sym=["[","]"],this.type="array",c.call(this,e,t,a)}function d(e,t){this.wrapper=document.createElement("ul"),this.wrapper.className="jsontree_tree clearfix",this.rootNode=null,this.sourceJSONObj=e,this.loadData(e),this.appendTo(t)}return a.CONSTRUCTORS={boolean:n,number:i,string:s,null:o,object:l,array:u},r.prototype={constructor:r,mark:function(){this.el.classList.add("jsontree_node_marked")},unmark:function(){this.el.classList.remove("jsontree_node_marked")},toggleMarked:function(){this.el.classList.toggle("jsontree_node_marked")},expandParent:function(e){this.parent&&(this.parent.expand(),this.parent.expandParent(e))},getJSONPath:function(e){return this.isRoot?"$":(t="array"===this.parent.type?"["+this.label+"]":e?"."+this.label:"['"+this.label+"']",this.parent.getJSONPath(e)+t);var t}},t.inherits(n,r),t.inherits(i,r),t.inherits(s,r),t.inherits(o,r),t.inherits(c,r),t.extend(c.prototype,{constructor:c,addChild:function(e){this.childNodes.push(e),this.childNodesUl.appendChild(e.el),e.parent=this},expand:function(e){this.isEmpty||(this.isRoot||this.el.classList.add("jsontree_node_expanded"),e&&this.childNodes.forEach((function(t,a){t.isComplex&&t.expand(e)})))},collapse:function(e){this.isEmpty||(this.isRoot||this.el.classList.remove("jsontree_node_expanded"),e&&this.childNodes.forEach((function(t,a){t.isComplex&&t.collapse(e)})))},toggle:function(e){if(!this.isEmpty&&(this.el.classList.toggle("jsontree_node_expanded"),e)){var t=this.el.classList.contains("jsontree_node_expanded");this.childNodes.forEach((function(a,r){a.isComplex&&a[t?"expand":"collapse"](e)}))}},findChildren:function(e,t,a){this.isEmpty||this.childNodes.forEach((function(r,n){e(r)&&t(r),r.isComplex&&a&&r.findChildren(e,t,a)}))}}),t.inherits(l,c),t.inherits(u,c),d.prototype={constructor:d,loadData:function(e){t.isValidRoot(e)?(this.sourceJSONObj=e,this.rootNode=new a(null,e,"last"),this.wrapper.innerHTML="",this.wrapper.appendChild(this.rootNode.el)):alert("The root should be an object or an array")},appendTo:function(e){e.appendChild(this.wrapper)},expand:function(e){this.rootNode.isComplex&&("function"==typeof e?this.rootNode.childNodes.forEach((function(t,a){t.isComplex&&e(t)&&t.expand()})):this.rootNode.expand("recursive"))},collapse:function(){"function"==typeof this.rootNode.collapse&&this.rootNode.collapse("recursive")},toSourceJSON:function(e){if(!e)return JSON.stringify(this.sourceJSONObj);var t=JSON.stringify(this.sourceJSONObj,null,"[%^$#$%^%]");return t=(t=t.split("\n").join("<br />")).split("[%^$#$%^%]").join("&nbsp;&nbsp;&nbsp;&nbsp;")},findAndHandle:function(e,t){this.rootNode.findChildren(e,t,"isRecursive")},unmarkAll:function(){this.rootNode.findChildren((function(e){return!0}),(function(e){e.unmark()}),"isRecursive")}},{create:function(e,t){return new d(e,t)}}}();e.exports=a},function(e,t){throw new Error("Module parse failed: Unexpected token (2:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| \n> rm ../../web/saito/saito.js\n| \n| ")},function(e,t){var a;!function(){function e(e){this.mode=r.MODE_8BIT_BYTE,this.data=e,this.parsedData=[];for(var t=0,a=this.data.length;t<a;t++){var n=[],i=this.data.charCodeAt(t);i>65536?(n[0]=240|(1835008&i)>>>18,n[1]=128|(258048&i)>>>12,n[2]=128|(4032&i)>>>6,n[3]=128|63&i):i>2048?(n[0]=224|(61440&i)>>>12,n[1]=128|(4032&i)>>>6,n[2]=128|63&i):i>128?(n[0]=192|(1984&i)>>>6,n[1]=128|63&i):n[0]=i,this.parsedData.push(n)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function t(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}e.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,a=this.parsedData.length;t<a;t++)e.put(this.parsedData[t],8)}},t.prototype={addData:function(t){var a=new e(t);this.dataList.push(a),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,a){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,a),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,a)},setupPositionProbePattern:function(e,t){for(var a=-1;a<=7;a++)if(!(e+a<=-1||this.moduleCount<=e+a))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+a][t+r]=0<=a&&a<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==a||6==a)||2<=a&&a<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var e=0,t=0,a=0;a<8;a++){this.makeImpl(!0,a);var r=h.getLostPoint(this);(0==a||e>r)&&(e=r,t=a)}return t},createMovieClip:function(e,t,a){var r=e.createEmptyMovieClip(t,a);this.make();for(var n=0;n<this.modules.length;n++)for(var i=1*n,s=0;s<this.modules[n].length;s++){var o=1*s;this.modules[n][s]&&(r.beginFill(0,100),r.moveTo(o,i),r.lineTo(o+1,i),r.lineTo(o+1,i+1),r.lineTo(o,i+1),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=h.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var a=0;a<e.length;a++){var r=e[t],n=e[a];if(null==this.modules[r][n])for(var i=-2;i<=2;i++)for(var s=-2;s<=2;s++)this.modules[r+i][n+s]=-2==i||2==i||-2==s||2==s||0==i&&0==s}},setupTypeNumber:function(e){for(var t=h.getBCHTypeNumber(this.typeNumber),a=0;a<18;a++){var r=!e&&1==(t>>a&1);this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=r}for(a=0;a<18;a++){r=!e&&1==(t>>a&1);this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=r}},setupTypeInfo:function(e,t){for(var a=this.errorCorrectLevel<<3|t,r=h.getBCHTypeInfo(a),n=0;n<15;n++){var i=!e&&1==(r>>n&1);n<6?this.modules[n][8]=i:n<8?this.modules[n+1][8]=i:this.modules[this.moduleCount-15+n][8]=i}for(n=0;n<15;n++){i=!e&&1==(r>>n&1);n<8?this.modules[8][this.moduleCount-n-1]=i:n<9?this.modules[8][15-n-1+1]=i:this.modules[8][15-n-1]=i}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var a=-1,r=this.moduleCount-1,n=7,i=0,s=this.moduleCount-1;s>0;s-=2)for(6==s&&s--;;){for(var o=0;o<2;o++)if(null==this.modules[r][s-o]){var c=!1;i<e.length&&(c=1==(e[i]>>>n&1)),h.getMask(t,r,s-o)&&(c=!c),this.modules[r][s-o]=c,-1==--n&&(i++,n=7)}if((r+=a)<0||this.moduleCount<=r){r-=a,a=-a;break}}}},t.PAD0=236,t.PAD1=17,t.createData=function(e,a,r){for(var n=b.getRSBlocks(e,a),i=new y,s=0;s<r.length;s++){var o=r[s];i.put(o.mode,4),i.put(o.getLength(),h.getLengthInBits(o.mode,e)),o.write(i)}var c=0;for(s=0;s<n.length;s++)c+=n[s].dataCount;if(i.getLengthInBits()>8*c)throw new Error("code length overflow. ("+i.getLengthInBits()+">"+8*c+")");for(i.getLengthInBits()+4<=8*c&&i.put(0,4);i.getLengthInBits()%8!=0;)i.putBit(!1);for(;!(i.getLengthInBits()>=8*c||(i.put(t.PAD0,8),i.getLengthInBits()>=8*c));)i.put(t.PAD1,8);return t.createBytes(i,n)},t.createBytes=function(e,t){for(var a=0,r=0,n=0,i=new Array(t.length),s=new Array(t.length),o=0;o<t.length;o++){var c=t[o].dataCount,l=t[o].totalCount-c;r=Math.max(r,c),n=Math.max(n,l),i[o]=new Array(c);for(var u=0;u<i[o].length;u++)i[o][u]=255&e.buffer[u+a];a+=c;var d=h.getErrorCorrectPolynomial(l),p=new g(i[o],d.getLength()-1).mod(d);s[o]=new Array(d.getLength()-1);for(u=0;u<s[o].length;u++){var f=u+p.getLength()-s[o].length;s[o][u]=f>=0?p.get(f):0}}var m=0;for(u=0;u<t.length;u++)m+=t[u].totalCount;var b=new Array(m),y=0;for(u=0;u<r;u++)for(o=0;o<t.length;o++)u<i[o].length&&(b[y++]=i[o][u]);for(u=0;u<n;u++)for(o=0;o<t.length;o++)u<s[o].length&&(b[y++]=s[o][u]);return b};for(var r={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},n={L:1,M:0,Q:3,H:2},i=0,s=1,o=2,c=3,l=4,u=5,d=6,p=7,h={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;h.getBCHDigit(t)-h.getBCHDigit(h.G15)>=0;)t^=h.G15<<h.getBCHDigit(t)-h.getBCHDigit(h.G15);return(e<<10|t)^h.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;h.getBCHDigit(t)-h.getBCHDigit(h.G18)>=0;)t^=h.G18<<h.getBCHDigit(t)-h.getBCHDigit(h.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return h.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,a){switch(e){case i:return(t+a)%2==0;case s:return t%2==0;case o:return a%3==0;case c:return(t+a)%3==0;case l:return(Math.floor(t/2)+Math.floor(a/3))%2==0;case u:return t*a%2+t*a%3==0;case d:return(t*a%2+t*a%3)%2==0;case p:return(t*a%3+(t+a)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new g([1],0),a=0;a<e;a++)t=t.multiply(new g([1,f.gexp(a)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:case r.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),a=0,r=0;r<t;r++)for(var n=0;n<t;n++){for(var i=0,s=e.isDark(r,n),o=-1;o<=1;o++)if(!(r+o<0||t<=r+o))for(var c=-1;c<=1;c++)n+c<0||t<=n+c||0==o&&0==c||s==e.isDark(r+o,n+c)&&i++;i>5&&(a+=3+i-5)}for(r=0;r<t-1;r++)for(n=0;n<t-1;n++){var l=0;e.isDark(r,n)&&l++,e.isDark(r+1,n)&&l++,e.isDark(r,n+1)&&l++,e.isDark(r+1,n+1)&&l++,0!=l&&4!=l||(a+=3)}for(r=0;r<t;r++)for(n=0;n<t-6;n++)e.isDark(r,n)&&!e.isDark(r,n+1)&&e.isDark(r,n+2)&&e.isDark(r,n+3)&&e.isDark(r,n+4)&&!e.isDark(r,n+5)&&e.isDark(r,n+6)&&(a+=40);for(n=0;n<t;n++)for(r=0;r<t-6;r++)e.isDark(r,n)&&!e.isDark(r+1,n)&&e.isDark(r+2,n)&&e.isDark(r+3,n)&&e.isDark(r+4,n)&&!e.isDark(r+5,n)&&e.isDark(r+6,n)&&(a+=40);var u=0;for(n=0;n<t;n++)for(r=0;r<t;r++)e.isDark(r,n)&&u++;return a+=10*(Math.abs(100*u/t/t-50)/5)}},f={glog:function(e){if(e<1)throw new Error("glog("+e+")");return f.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return f.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},m=0;m<8;m++)f.EXP_TABLE[m]=1<<m;for(m=8;m<256;m++)f.EXP_TABLE[m]=f.EXP_TABLE[m-4]^f.EXP_TABLE[m-5]^f.EXP_TABLE[m-6]^f.EXP_TABLE[m-8];for(m=0;m<255;m++)f.LOG_TABLE[f.EXP_TABLE[m]]=m;function g(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var a=0;a<e.length&&0==e[a];)a++;this.num=new Array(e.length-a+t);for(var r=0;r<e.length-a;r++)this.num[r]=e[r+a]}function b(e,t){this.totalCount=e,this.dataCount=t}function y(){this.buffer=[],this.length=0}g.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),a=0;a<this.getLength();a++)for(var r=0;r<e.getLength();r++)t[a+r]^=f.gexp(f.glog(this.get(a))+f.glog(e.get(r)));return new g(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=f.glog(this.get(0))-f.glog(e.get(0)),a=new Array(this.getLength()),r=0;r<this.getLength();r++)a[r]=this.get(r);for(r=0;r<e.getLength();r++)a[r]^=f.gexp(f.glog(e.get(r))+t);return new g(a,0).mod(e)}},b.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],b.getRSBlocks=function(e,t){var a=b.getRsBlockTable(e,t);if(null==a)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=a.length/3,n=[],i=0;i<r;i++)for(var s=a[3*i+0],o=a[3*i+1],c=a[3*i+2],l=0;l<s;l++)n.push(new b(o,c));return n},b.getRsBlockTable=function(e,t){switch(t){case n.L:return b.RS_BLOCK_TABLE[4*(e-1)+0];case n.M:return b.RS_BLOCK_TABLE[4*(e-1)+1];case n.Q:return b.RS_BLOCK_TABLE[4*(e-1)+2];case n.H:return b.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},y.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var a=0;a<t;a++)this.putBit(1==(e>>>t-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var v=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function _(){var e=!1,t=navigator.userAgent;if(/android/i.test(t)){e=!0;var a=t.toString().match(/android ([0-9]\.[0-9])/i);a&&a[1]&&(e=parseFloat(a[1]))}return e}var w=function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){var t=this._htOption,a=this._el,r=e.getModuleCount();Math.floor(t.width/r),Math.floor(t.height/r);function n(e,t){var a=document.createElementNS("http://www.w3.org/2000/svg",e);for(var r in t)t.hasOwnProperty(r)&&a.setAttribute(r,t[r]);return a}this.clear();var i=n("svg",{viewBox:"0 0 "+String(r)+" "+String(r),width:"100%",height:"100%",fill:t.colorLight});i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),a.appendChild(i),i.appendChild(n("rect",{fill:t.colorLight,width:"100%",height:"100%"})),i.appendChild(n("rect",{fill:t.colorDark,width:"1",height:"1",id:"template"}));for(var s=0;s<r;s++)for(var o=0;o<r;o++)if(e.isDark(s,o)){var c=n("use",{x:String(o),y:String(s)});c.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),i.appendChild(c)}},e.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},e}(),x="svg"===document.documentElement.tagName.toLowerCase()?w:"undefined"==typeof CanvasRenderingContext2D?function(){var e=function(e,t){this._el=e,this._htOption=t};return e.prototype.draw=function(e){for(var t=this._htOption,a=this._el,r=e.getModuleCount(),n=Math.floor(t.width/r),i=Math.floor(t.height/r),s=['<table style="border:0;border-collapse:collapse;">'],o=0;o<r;o++){s.push("<tr>");for(var c=0;c<r;c++)s.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+n+"px;height:"+i+"px;background-color:"+(e.isDark(o,c)?t.colorDark:t.colorLight)+';"></td>');s.push("</tr>")}s.push("</table>"),a.innerHTML=s.join("");var l=a.childNodes[0],u=(t.width-l.offsetWidth)/2,d=(t.height-l.offsetHeight)/2;u>0&&d>0&&(l.style.margin=d+"px "+u+"px")},e.prototype.clear=function(){this._el.innerHTML=""},e}():function(){function e(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}if(this&&this._android<=2.1){var t=1/window.devicePixelRatio,a=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(e,r,n,i,s,o,c,l,u){if("nodeName"in e&&/img/i.test(e.nodeName))for(var d=arguments.length-1;d>=1;d--)arguments[d]=arguments[d]*t;else void 0===l&&(arguments[1]*=t,arguments[2]*=t,arguments[3]*=t,arguments[4]*=t);a.apply(this,arguments)}}function r(e,t){var a=this;if(a._fFail=t,a._fSuccess=e,null===a._bSupportDataURI){var r=document.createElement("img"),n=function(){a._bSupportDataURI=!1,a._fFail&&a._fFail.call(a)};return r.onabort=n,r.onerror=n,r.onload=function(){a._bSupportDataURI=!0,a._fSuccess&&a._fSuccess.call(a)},void(r.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===a._bSupportDataURI&&a._fSuccess?a._fSuccess.call(a):!1===a._bSupportDataURI&&a._fFail&&a._fFail.call(a)}var n=function(e,t){this._bIsPainted=!1,this._android=_(),this._htOption=t,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=t.width,this._elCanvas.height=t.height,e.appendChild(this._elCanvas),this._el=e,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return n.prototype.draw=function(e){var t=this._elImage,a=this._oContext,r=this._htOption,n=e.getModuleCount(),i=r.width/n,s=r.height/n,o=Math.round(i),c=Math.round(s);t.style.display="none",this.clear();for(var l=0;l<n;l++)for(var u=0;u<n;u++){var d=e.isDark(l,u),p=u*i,h=l*s;a.strokeStyle=d?r.colorDark:r.colorLight,a.lineWidth=1,a.fillStyle=d?r.colorDark:r.colorLight,a.fillRect(p,h,i,s),a.strokeRect(Math.floor(p)+.5,Math.floor(h)+.5,o,c),a.strokeRect(Math.ceil(p)-.5,Math.ceil(h)-.5,o,c)}this._bIsPainted=!0},n.prototype.makeImage=function(){this._bIsPainted&&r.call(this,e)},n.prototype.isPainted=function(){return this._bIsPainted},n.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},n.prototype.round=function(e){return e?Math.floor(1e3*e)/1e3:e},n}();function k(e,t){for(var a=1,r=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),i=0,s=v.length;i<=s;i++){var o=0;switch(t){case n.L:o=v[i][0];break;case n.M:o=v[i][1];break;case n.Q:o=v[i][2];break;case n.H:o=v[i][3]}if(r<=o)break;a++}if(a>v.length)throw new Error("Too long data");return a}(a=function(e,t){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:n.H},"string"==typeof t&&(t={text:t}),t)for(var a in t)this._htOption[a]=t[a];"string"==typeof e&&(e=document.getElementById(e)),this._htOption.useSVG&&(x=w),this._android=_(),this._el=e,this._oQRCode=null,this._oDrawing=new x(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(e){this._oQRCode=new t(k(e,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(e),this._oQRCode.make(),this._el.title=e,this._oDrawing.draw(this._oQRCode),this.makeImage()},a.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},a.prototype.clear=function(){this._oDrawing.clear()},a.CorrectLevel=n}(),e.exports=a},function(e,t,a){var r=a(1197),n=a(1204),i=a(1210),s=a(1211),o=a(1212),c=a(1213),l=a(1214),u=a(1215),d=a(1216),p=a(1241);function h(e){this.options=e,this.utils=new r(e),this.filters=[]}h.prototype.register=function(e){return this.filters.push(e),this},h.prototype.next=function(e,t,a){var r=this;e.length?e[0].resolve(t,(function(n){return null===n?void r.next(e.slice(1),t,a):void a(n)}),this.options,this.utils):a(null)},h.prototype.resolve=function(e,t){var a=this.filters;return this.next(a,e,(function(a){return a?void t({url:e,image:a}):void t(null)})),this},h.FileExtension=n,h.NineGag=i,h.Instagram=s,h.ImgurPage=o,h.MimeType=u,h.ImgurAlbum=c,h.Flickr=l,h.Opengraph=d,h.Webpage=p,e.exports=h},function(e,t,a){var r=a(1198),n=function(e){this.options=e||{},this.cache={}};n.prototype.fetch=function(e,t,a){var n=this,i=null;if(this.options.requestPlugin&&"function"==typeof this.options.requestPlugin&&(i=this.options.requestPlugin),e in this.cache)t(this.cache[e].data,this.cache[e].response);else{var s=r.get(e);i&&(s=s.use(i)),s.on("error",a),s.end((function(r,i){r?a(r):(n.cache[e]={data:i.text,response:i},t(i.text,i))}))}},n.prototype.request=r,e.exports=n},function(e,t,a){var r;"undefined"!=typeof window?r=window:"undefined"!=typeof self?r=self:(console.warn("Using browser-only version of superagent in non-browser environment"),r=this);var n=a(1199),i=a(1200),s=a(517),o=a(1201),c=a(1203);function l(){}var u=t=e.exports=function(e,a){return"function"==typeof a?new t.Request("GET",e).end(a):1==arguments.length?new t.Request("GET",e):new t.Request(e,a)};t.Request=b,u.getXHR=function(){if(!(!r.XMLHttpRequest||r.location&&"file:"==r.location.protocol&&r.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var d="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};function p(e){if(!s(e))return e;var t=[];for(var a in e)h(t,a,e[a]);return t.join("&")}function h(e,t,a){if(null!=a)if(Array.isArray(a))a.forEach((function(a){h(e,t,a)}));else if(s(a))for(var r in a)h(e,t+"["+r+"]",a[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(a));else null===a&&e.push(encodeURIComponent(t))}function f(e){for(var t,a,r={},n=e.split("&"),i=0,s=n.length;i<s;++i)-1==(a=(t=n[i]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,a))]=decodeURIComponent(t.slice(a+1));return r}function m(e){return/[\/+]json($|[^-\w])/.test(e)}function g(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,a,r,n,i=e.split(/\r?\n/),s={},o=0,c=i.length;o<c;++o)-1!==(t=(a=i[o]).indexOf(":"))&&(r=a.slice(0,t).toLowerCase(),n=d(a.slice(t+1)),s[r]=n);return s}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&e._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function b(e,t){var a=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",(function(){var e,t=null,r=null;try{r=new g(a)}catch(e){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=e,a.xhr?(t.rawResponse=void 0===a.xhr.responseType?a.xhr.responseText:a.xhr.response,t.status=a.xhr.status?a.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),a.callback(t)}a.emit("response",r);try{a._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,a.callback(e,r)):a.callback(null,r)}))}function y(e,t,a){var r=u("DELETE",e);return"function"==typeof t&&(a=t,t=null),t&&r.send(t),a&&r.end(a),r}u.serializeObject=p,u.parseString=f,u.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},u.serialize={"application/x-www-form-urlencoded":p,"application/json":JSON.stringify},u.parse={"application/x-www-form-urlencoded":f,"application/json":JSON.parse},o(g.prototype),g.prototype._parseBody=function(e){var t=u.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&m(this.type)&&(t=u.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},g.prototype.toError=function(){var e=this.req,t=e.method,a=e.url,r="cannot "+t+" "+a+" ("+this.status+")",n=new Error(r);return n.status=this.status,n.method=t,n.url=a,n},u.Response=g,n(b.prototype),i(b.prototype),b.prototype.type=function(e){return this.set("Content-Type",u.types[e]||e),this},b.prototype.accept=function(e){return this.set("Accept",u.types[e]||e),this},b.prototype.auth=function(e,t,a){1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(a=t,t=""),a||(a={type:"function"==typeof btoa?"basic":"auto"});var r=function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(e,t,a,r)},b.prototype.query=function(e){return"string"!=typeof e&&(e=p(e)),e&&this._query.push(e),this},b.prototype.attach=function(e,t,a){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,a||t.name)}return this},b.prototype._getFormData=function(){return this._formData||(this._formData=new r.FormData),this._formData},b.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var a=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),a(e,t)},b.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},b.prototype.buffer=b.prototype.ca=b.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},b.prototype.pipe=b.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},b.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},b.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||l,this._finalizeQueryString(),this._end()},b.prototype._end=function(){var e=this,t=this.xhr=u.getXHR(),a=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var a=t.readyState;if(a>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==a){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,a){a.total>0&&(a.percent=a.loaded/a.total*100),a.direction=t,e.emit("progress",a)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!this._isHost(a)){var n=this._header["content-type"],i=this._serializer||u.serialize[n?n.split(";")[0]:""];!i&&m(n)&&(i=u.serialize["application/json"]),i&&(a=i(a))}for(var s in this.header)null!=this.header[s]&&this.header.hasOwnProperty(s)&&t.setRequestHeader(s,this.header[s]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==a?a:null),this},u.agent=function(){return new c},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach((function(e){c.prototype[e.toLowerCase()]=function(t,a){var r=new u.Request(e,t);return this._setDefaults(r),a&&r.end(a),r}})),c.prototype.del=c.prototype.delete,u.get=function(e,t,a){var r=u("GET",e);return"function"==typeof t&&(a=t,t=null),t&&r.query(t),a&&r.end(a),r},u.head=function(e,t,a){var r=u("HEAD",e);return"function"==typeof t&&(a=t,t=null),t&&r.query(t),a&&r.end(a),r},u.options=function(e,t,a){var r=u("OPTIONS",e);return"function"==typeof t&&(a=t,t=null),t&&r.send(t),a&&r.end(a),r},u.del=y,u.delete=y,u.patch=function(e,t,a){var r=u("PATCH",e);return"function"==typeof t&&(a=t,t=null),t&&r.send(t),a&&r.end(a),r},u.post=function(e,t,a){var r=u("POST",e);return"function"==typeof t&&(a=t,t=null),t&&r.send(t),a&&r.end(a),r},u.put=function(e,t,a){var r=u("PUT",e);return"function"==typeof t&&(a=t,t=null),t&&r.send(t),a&&r.end(a),r}},function(e,t,a){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function a(){this.off(e,a),t.apply(this,arguments)}return a.fn=t,this.on(e,a),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var a,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<r.length;n++)if((a=r[n])===t||a.fn===t){r.splice(n,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),a=this._callbacks["$"+e];if(a)for(var r=0,n=(a=a.slice(0)).length;r<n;++r)a[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,a){"use strict";var r=a(517);function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},n.prototype.parse=function(e){return this._parser=e,this},n.prototype.responseType=function(e){return this._responseType=e,this},n.prototype.serialize=function(e){return this._serializer=e,this},n.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},n.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var i=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];n.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var a=this._retryCallback(e,t);if(!0===a)return!0;if(!1===a)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~i.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},n.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},n.prototype.then=function(e,t){if(!this._fullfilledPromise){var a=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise((function(e,t){a.end((function(a,r){a?t(a):e(r)}))}))}return this._fullfilledPromise.then(e,t)},n.prototype.catch=function(e){return this.then(void 0,e)},n.prototype.use=function(e){return e(this),this},n.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},n.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},n.prototype.get=function(e){return this._header[e.toLowerCase()]},n.prototype.getHeader=n.prototype.get,n.prototype.set=function(e,t){if(r(e)){for(var a in e)this.set(a,e[a]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},n.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},n.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),r(e)){for(var a in e)this.field(a,e[a]);return this}if(Array.isArray(t)){for(var n in t)this.field(e,t[n]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},n.prototype.abort=function(){return this._aborted||(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort")),this},n.prototype._auth=function(e,t,a,r){switch(a.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},n.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},n.prototype.redirects=function(e){return this._maxRedirects=e,this},n.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},n.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},n.prototype.send=function(e){var t=r(e),a=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&r(this._data))for(var n in e)this._data[n]=e[n];else"string"==typeof e?(a||this.type("form"),a=this._header["content-type"],this._data="application/x-www-form-urlencoded"==a?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)||a||this.type("json"),this},n.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},n.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var a=this.url.substring(t+1).split("&");"function"==typeof this._sort?a.sort(this._sort):a.sort(),this.url=this.url.substring(0,t)+"?"+a.join("&")}}},n.prototype._appendQueryString=function(){console.trace("Unsupported")},n.prototype._timeoutError=function(e,t,a){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=a,this.timedout=!0,this.abort(),this.callback(r)}},n.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout((function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")}),this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout((function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")}),this._responseTimeout))}},function(e,t,a){"use strict";var r=a(1202);function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}e.exports=n,n.prototype.get=function(e){return this.header[e.toLowerCase()]},n.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=r.type(t);var a=r.params(t);for(var n in a)this[n]=a[n];this.links={};try{e.link&&(this.links=r.parseLinks(e.link))}catch(e){}},n.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t,a){"use strict";t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce((function(e,t){var a=t.split(/ *= */),r=a.shift(),n=a.shift();return r&&n&&(e[r]=n),e}),{})},t.parseLinks=function(e){return e.split(/ *, */).reduce((function(e,t){var a=t.split(/ *; */),r=a[0].slice(1,-1);return e[a[1].split(/ *= */)[1].slice(1,-1)]=r,e}),{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e,t){function a(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach((function(e){a.prototype[e]=function(){return this._defaults.push({fn:e,arguments:arguments}),this}})),a.prototype._setDefaults=function(e){this._defaults.forEach((function(t){e[t.fn].apply(e,t.arguments)}))},e.exports=a},function(e,t,a){var r=a(135);function n(){}n.prototype.resolve=function(e,t){r.parse(e).pathname.match(/\.(png|jpg|jpeg|gif|bmp|svg)$/i)?t(e):t(null)},e.exports=n},function(e,t,a){(function(e,r){var n;/*! https://mths.be/punycode v1.4.1 by @mathias */!function(i){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof r&&r;s.global!==s&&s.window!==s&&s.self;var o,c=2147483647,l=/^xn--/,u=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,f=String.fromCharCode;function m(e){throw new RangeError(p[e])}function g(e,t){for(var a=e.length,r=[];a--;)r[a]=t(e[a]);return r}function b(e,t){var a=e.split("@"),r="";return a.length>1&&(r=a[0]+"@",e=a[1]),r+g((e=e.replace(d,".")).split("."),t).join(".")}function y(e){for(var t,a,r=[],n=0,i=e.length;n<i;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<i?56320==(64512&(a=e.charCodeAt(n++)))?r.push(((1023&t)<<10)+(1023&a)+65536):(r.push(t),n--):r.push(t);return r}function v(e){return g(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)})).join("")}function _(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,a){var r=0;for(e=a?h(e/700):e>>1,e+=h(e/t);e>455;r+=36)e=h(e/35);return h(r+36*e/(e+38))}function x(e){var t,a,r,n,i,s,o,l,u,d,p,f=[],g=e.length,b=0,y=128,_=72;for((a=e.lastIndexOf("-"))<0&&(a=0),r=0;r<a;++r)e.charCodeAt(r)>=128&&m("not-basic"),f.push(e.charCodeAt(r));for(n=a>0?a+1:0;n<g;){for(i=b,s=1,o=36;n>=g&&m("invalid-input"),((l=(p=e.charCodeAt(n++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36)>=36||l>h((c-b)/s))&&m("overflow"),b+=l*s,!(l<(u=o<=_?1:o>=_+26?26:o-_));o+=36)s>h(c/(d=36-u))&&m("overflow"),s*=d;_=w(b-i,t=f.length+1,0==i),h(b/t)>c-y&&m("overflow"),y+=h(b/t),b%=t,f.splice(b++,0,y)}return v(f)}function k(e){var t,a,r,n,i,s,o,l,u,d,p,g,b,v,x,k=[];for(g=(e=y(e)).length,t=128,a=0,i=72,s=0;s<g;++s)(p=e[s])<128&&k.push(f(p));for(r=n=k.length,n&&k.push("-");r<g;){for(o=c,s=0;s<g;++s)(p=e[s])>=t&&p<o&&(o=p);for(o-t>h((c-a)/(b=r+1))&&m("overflow"),a+=(o-t)*b,t=o,s=0;s<g;++s)if((p=e[s])<t&&++a>c&&m("overflow"),p==t){for(l=a,u=36;!(l<(d=u<=i?1:u>=i+26?26:u-i));u+=36)x=l-d,v=36-d,k.push(f(_(d+x%v,0))),l=h(x/v);k.push(f(_(l,0))),i=w(a,b,r==n),a=0,++r}++a,++t}return k.join("")}o={version:"1.4.1",ucs2:{decode:y,encode:v},decode:x,encode:k,toASCII:function(e){return b(e,(function(e){return u.test(e)?"xn--"+k(e):e}))},toUnicode:function(e){return b(e,(function(e){return l.test(e)?x(e.slice(4).toLowerCase()):e}))}},void 0===(n=function(){return o}.call(t,a,t,e))||(e.exports=n)}()}).call(this,a(89)(e),a(17))},function(e,t,a){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,a){"use strict";t.decode=t.parse=a(1208),t.encode=t.stringify=a(1209)},function(e,t,a){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,a,i){t=t||"&",a=a||"=";var s={};if("string"!=typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var l=e.length;c>0&&l>c&&(l=c);for(var u=0;u<l;++u){var d,p,h,f,m=e[u].replace(o,"%20"),g=m.indexOf(a);g>=0?(d=m.substr(0,g),p=m.substr(g+1)):(d=m,p=""),h=decodeURIComponent(d),f=decodeURIComponent(p),r(s,h)?n(s[h])?s[h].push(f):s[h]=[s[h],f]:s[h]=f}return s};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,a){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,a,o){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?i(s(e),(function(s){var o=encodeURIComponent(r(s))+a;return n(e[s])?i(e[s],(function(e){return o+encodeURIComponent(r(e))})).join(t):o+encodeURIComponent(r(e[s]))})).join(t):o?encodeURIComponent(r(o))+a+encodeURIComponent(r(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var a=[],r=0;r<e.length;r++)a.push(t(e[r],r));return a}var s=Object.keys||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t}},function(e,t,a){var r=a(135),n=/^\/gag\/(.*)$/;function i(){}i.prototype.resolve=function(e,t){var a,i=(e=r.parse(e)).pathname.match(n)||[];if("9gag.com"===e.hostname&&i.length)return a=i[1],void t("http://d24w6bsrhbeh9d.cloudfront.net/photo/{{id}}_700b.jpg".replace("{{id}}",a));t(null)},e.exports=i},function(e,t){var a=/http(s*):\/\/instagr(\.am|am\.com)\/p\/([^\/]+)/;function r(){}r.prototype.resolve=function(e,t){var r=e.match(a);r&&r.length>1?t(e="http://instagram.com/p/{{id}}/media/?size=l".replace("{{id}}",r[3])):t(null)},e.exports=r},function(e,t){var a=/http(s*):\/\/(i\.|m\.)*imgur.com\/(gallery\/){0,1}(.*)/;function r(){}r.prototype.resolve=function(e,t){var r,n=e.match(a);if(n&&n.length&&-1===n[n.length-1].indexOf("/"))return r=n[n.length-1],void t("http://i.imgur.com/{{id}}.jpg".replace("{{id}}",r));t(null)},e.exports=r},function(e,t){var a=/http(s*):\/\/(i\.|m\.)*imgur.com\/a\/([^\/]*)/;function r(e){if(!e.client_id)throw new Error("ImgurAlbum plugin: client_id is missing");this.config=e}r.prototype.resolve=function(e,t,r,n){var i,s,o=n.request,c=e.match(a);c&&c.length?(i=c[c.length-1],s="https://api.imgur.com/3/album/{{albumHash}}".replace("{{albumHash}}",i),o.get(s).set("Authorization","Client-ID "+this.config.client_id).end((function(e){var a=(e.body.data.images||[]).shift();return a?void t(a.link):void t(null)}))):t(null)},e.exports=r},function(e,t){function a(e){this.apikey=e}a.prototype.resolve=function(e,t,a,r){var n,i,s=r.request,o=e.match(/http(s?):\/\/www.flickr.com\/photos\/([^\/]*)\/(\d+)\b/)||[];o.length?(n=o[3],i="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key={{APIKEY}}&photo_id={{ID}}&format=json&nojsoncallback=1".replace("{{APIKEY}}",this.apikey).replace("{{ID}}",n),s.get(i).end((function(e){if(data=JSON.parse(e.text),data&&data.sizes&&data.sizes.size)for(var a=data.sizes.size,r=0,n=a.length;r<n;r++)if("Large"===a[r].label||"Original"===a[r].label)return void t(a[r].source);t(null)}))):t(null)},e.exports=a},function(e,t){function a(){}a.prototype.resolve=function(e,t,a,r){r.fetch(e,(function(a,r){switch(r.type){case"image/jpeg":case"image/png":case"image/gif":case"image/svg+xml":case"image/bmp":case"image/tiff":t(e);break;default:t(null)}}),(function(){t(null)}))},e.exports=a},function(e,t,a){var r=a(99),n=a(135),i=[{type:"facebook",attribute:"property",name:"og:image",value:"content"},{type:"facebook",attribute:"rel",name:"image_src",value:"href"},{type:"twitter",attribute:"name",name:"twitter:image",value:"value"},{type:"twitter",attribute:"name",name:"twitter:image",value:"content"}];function s(){}s.prototype.resolve=function(e,t,a,r){var n=this;r.fetch(e,(function(i,s){n.parseHTML(i,e,t,a,r)}),(function(){t(null)}))},s.prototype.parseHTML=function(e,t,a,s,o){var c=r.DomUtils,l=new r.DomHandler((function(e,r){if(e)a(null);else{for(var s,o,l=[].concat(c.getElementsByTagName("meta",r,!0),c.getElementsByTagName("link",r,!0)),u=[],d=0,p=l.length;d<p;d++){o=l[d];for(var h=0,f=i.length;h<f;h++)o.attribs[i[h].attribute]&&o.attribs[i[h].attribute]===i[h].name&&o.attribs[i[h].value]&&u.push({url:o.attribs[i[h].value],type:i[h].type,score:0})}if(1===u.length)s=u[0].url;else if(u.length>1){for(d=0,p=u.length;d<p;d++)u[d].url.match(/(large|big)/i)&&u[d].score++,"twitter"===u[d].type&&u[d].score++;u.sort((function(e,t){return t.score-e.score})),s=u[0].url}s?(s.match(/^http/)||(s=n.resolve(t,s)),a(s)):a(null)}})),u=new r.Parser(l);u.write(e),u.done()},e.exports=s},function(e,t,a){var r=a(1218);e.exports=function(e){if(e>=55296&&e<=57343||e>1114111)return"�";e in r&&(e=r[e]);var t="";e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e);return t+=String.fromCharCode(e)}},function(e){e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Abreve":"Ă","abreve":"ă","ac":"∾","acd":"∿","acE":"∾̳","Acirc":"Â","acirc":"â","acute":"´","Acy":"А","acy":"а","AElig":"Æ","aelig":"æ","af":"⁡","Afr":"𝔄","afr":"𝔞","Agrave":"À","agrave":"à","alefsym":"ℵ","aleph":"ℵ","Alpha":"Α","alpha":"α","Amacr":"Ā","amacr":"ā","amalg":"⨿","amp":"&","AMP":"&","andand":"⩕","And":"⩓","and":"∧","andd":"⩜","andslope":"⩘","andv":"⩚","ang":"∠","ange":"⦤","angle":"∠","angmsdaa":"⦨","angmsdab":"⦩","angmsdac":"⦪","angmsdad":"⦫","angmsdae":"⦬","angmsdaf":"⦭","angmsdag":"⦮","angmsdah":"⦯","angmsd":"∡","angrt":"∟","angrtvb":"⊾","angrtvbd":"⦝","angsph":"∢","angst":"Å","angzarr":"⍼","Aogon":"Ą","aogon":"ą","Aopf":"𝔸","aopf":"𝕒","apacir":"⩯","ap":"≈","apE":"⩰","ape":"≊","apid":"≋","apos":"\'","ApplyFunction":"⁡","approx":"≈","approxeq":"≊","Aring":"Å","aring":"å","Ascr":"𝒜","ascr":"𝒶","Assign":"≔","ast":"*","asymp":"≈","asympeq":"≍","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","awconint":"∳","awint":"⨑","backcong":"≌","backepsilon":"϶","backprime":"‵","backsim":"∽","backsimeq":"⋍","Backslash":"∖","Barv":"⫧","barvee":"⊽","barwed":"⌅","Barwed":"⌆","barwedge":"⌅","bbrk":"⎵","bbrktbrk":"⎶","bcong":"≌","Bcy":"Б","bcy":"б","bdquo":"„","becaus":"∵","because":"∵","Because":"∵","bemptyv":"⦰","bepsi":"϶","bernou":"ℬ","Bernoullis":"ℬ","Beta":"Β","beta":"β","beth":"ℶ","between":"≬","Bfr":"𝔅","bfr":"𝔟","bigcap":"⋂","bigcirc":"◯","bigcup":"⋃","bigodot":"⨀","bigoplus":"⨁","bigotimes":"⨂","bigsqcup":"⨆","bigstar":"★","bigtriangledown":"▽","bigtriangleup":"△","biguplus":"⨄","bigvee":"⋁","bigwedge":"⋀","bkarow":"⤍","blacklozenge":"⧫","blacksquare":"▪","blacktriangle":"▴","blacktriangledown":"▾","blacktriangleleft":"◂","blacktriangleright":"▸","blank":"␣","blk12":"▒","blk14":"░","blk34":"▓","block":"█","bne":"=⃥","bnequiv":"≡⃥","bNot":"⫭","bnot":"⌐","Bopf":"𝔹","bopf":"𝕓","bot":"⊥","bottom":"⊥","bowtie":"⋈","boxbox":"⧉","boxdl":"┐","boxdL":"╕","boxDl":"╖","boxDL":"╗","boxdr":"┌","boxdR":"╒","boxDr":"╓","boxDR":"╔","boxh":"─","boxH":"═","boxhd":"┬","boxHd":"╤","boxhD":"╥","boxHD":"╦","boxhu":"┴","boxHu":"╧","boxhU":"╨","boxHU":"╩","boxminus":"⊟","boxplus":"⊞","boxtimes":"⊠","boxul":"┘","boxuL":"╛","boxUl":"╜","boxUL":"╝","boxur":"└","boxuR":"╘","boxUr":"╙","boxUR":"╚","boxv":"│","boxV":"║","boxvh":"┼","boxvH":"╪","boxVh":"╫","boxVH":"╬","boxvl":"┤","boxvL":"╡","boxVl":"╢","boxVL":"╣","boxvr":"├","boxvR":"╞","boxVr":"╟","boxVR":"╠","bprime":"‵","breve":"˘","Breve":"˘","brvbar":"¦","bscr":"𝒷","Bscr":"ℬ","bsemi":"⁏","bsim":"∽","bsime":"⋍","bsolb":"⧅","bsol":"\\\\","bsolhsub":"⟈","bull":"•","bullet":"•","bump":"≎","bumpE":"⪮","bumpe":"≏","Bumpeq":"≎","bumpeq":"≏","Cacute":"Ć","cacute":"ć","capand":"⩄","capbrcup":"⩉","capcap":"⩋","cap":"∩","Cap":"⋒","capcup":"⩇","capdot":"⩀","CapitalDifferentialD":"ⅅ","caps":"∩︀","caret":"⁁","caron":"ˇ","Cayleys":"ℭ","ccaps":"⩍","Ccaron":"Č","ccaron":"č","Ccedil":"Ç","ccedil":"ç","Ccirc":"Ĉ","ccirc":"ĉ","Cconint":"∰","ccups":"⩌","ccupssm":"⩐","Cdot":"Ċ","cdot":"ċ","cedil":"¸","Cedilla":"¸","cemptyv":"⦲","cent":"¢","centerdot":"·","CenterDot":"·","cfr":"𝔠","Cfr":"ℭ","CHcy":"Ч","chcy":"ч","check":"✓","checkmark":"✓","Chi":"Χ","chi":"χ","circ":"ˆ","circeq":"≗","circlearrowleft":"↺","circlearrowright":"↻","circledast":"⊛","circledcirc":"⊚","circleddash":"⊝","CircleDot":"⊙","circledR":"®","circledS":"Ⓢ","CircleMinus":"⊖","CirclePlus":"⊕","CircleTimes":"⊗","cir":"○","cirE":"⧃","cire":"≗","cirfnint":"⨐","cirmid":"⫯","cirscir":"⧂","ClockwiseContourIntegral":"∲","CloseCurlyDoubleQuote":"”","CloseCurlyQuote":"’","clubs":"♣","clubsuit":"♣","colon":":","Colon":"∷","Colone":"⩴","colone":"≔","coloneq":"≔","comma":",","commat":"@","comp":"∁","compfn":"∘","complement":"∁","complexes":"ℂ","cong":"≅","congdot":"⩭","Congruent":"≡","conint":"∮","Conint":"∯","ContourIntegral":"∮","copf":"𝕔","Copf":"ℂ","coprod":"∐","Coproduct":"∐","copy":"©","COPY":"©","copysr":"℗","CounterClockwiseContourIntegral":"∳","crarr":"↵","cross":"✗","Cross":"⨯","Cscr":"𝒞","cscr":"𝒸","csub":"⫏","csube":"⫑","csup":"⫐","csupe":"⫒","ctdot":"⋯","cudarrl":"⤸","cudarrr":"⤵","cuepr":"⋞","cuesc":"⋟","cularr":"↶","cularrp":"⤽","cupbrcap":"⩈","cupcap":"⩆","CupCap":"≍","cup":"∪","Cup":"⋓","cupcup":"⩊","cupdot":"⊍","cupor":"⩅","cups":"∪︀","curarr":"↷","curarrm":"⤼","curlyeqprec":"⋞","curlyeqsucc":"⋟","curlyvee":"⋎","curlywedge":"⋏","curren":"¤","curvearrowleft":"↶","curvearrowright":"↷","cuvee":"⋎","cuwed":"⋏","cwconint":"∲","cwint":"∱","cylcty":"⌭","dagger":"†","Dagger":"‡","daleth":"ℸ","darr":"↓","Darr":"↡","dArr":"⇓","dash":"‐","Dashv":"⫤","dashv":"⊣","dbkarow":"⤏","dblac":"˝","Dcaron":"Ď","dcaron":"ď","Dcy":"Д","dcy":"д","ddagger":"‡","ddarr":"⇊","DD":"ⅅ","dd":"ⅆ","DDotrahd":"⤑","ddotseq":"⩷","deg":"°","Del":"∇","Delta":"Δ","delta":"δ","demptyv":"⦱","dfisht":"⥿","Dfr":"𝔇","dfr":"𝔡","dHar":"⥥","dharl":"⇃","dharr":"⇂","DiacriticalAcute":"´","DiacriticalDot":"˙","DiacriticalDoubleAcute":"˝","DiacriticalGrave":"`","DiacriticalTilde":"˜","diam":"⋄","diamond":"⋄","Diamond":"⋄","diamondsuit":"♦","diams":"♦","die":"¨","DifferentialD":"ⅆ","digamma":"ϝ","disin":"⋲","div":"÷","divide":"÷","divideontimes":"⋇","divonx":"⋇","DJcy":"Ђ","djcy":"ђ","dlcorn":"⌞","dlcrop":"⌍","dollar":"$","Dopf":"𝔻","dopf":"𝕕","Dot":"¨","dot":"˙","DotDot":"⃜","doteq":"≐","doteqdot":"≑","DotEqual":"≐","dotminus":"∸","dotplus":"∔","dotsquare":"⊡","doublebarwedge":"⌆","DoubleContourIntegral":"∯","DoubleDot":"¨","DoubleDownArrow":"⇓","DoubleLeftArrow":"⇐","DoubleLeftRightArrow":"⇔","DoubleLeftTee":"⫤","DoubleLongLeftArrow":"⟸","DoubleLongLeftRightArrow":"⟺","DoubleLongRightArrow":"⟹","DoubleRightArrow":"⇒","DoubleRightTee":"⊨","DoubleUpArrow":"⇑","DoubleUpDownArrow":"⇕","DoubleVerticalBar":"∥","DownArrowBar":"⤓","downarrow":"↓","DownArrow":"↓","Downarrow":"⇓","DownArrowUpArrow":"⇵","DownBreve":"̑","downdownarrows":"⇊","downharpoonleft":"⇃","downharpoonright":"⇂","DownLeftRightVector":"⥐","DownLeftTeeVector":"⥞","DownLeftVectorBar":"⥖","DownLeftVector":"↽","DownRightTeeVector":"⥟","DownRightVectorBar":"⥗","DownRightVector":"⇁","DownTeeArrow":"↧","DownTee":"⊤","drbkarow":"⤐","drcorn":"⌟","drcrop":"⌌","Dscr":"𝒟","dscr":"𝒹","DScy":"Ѕ","dscy":"ѕ","dsol":"⧶","Dstrok":"Đ","dstrok":"đ","dtdot":"⋱","dtri":"▿","dtrif":"▾","duarr":"⇵","duhar":"⥯","dwangle":"⦦","DZcy":"Џ","dzcy":"џ","dzigrarr":"⟿","Eacute":"É","eacute":"é","easter":"⩮","Ecaron":"Ě","ecaron":"ě","Ecirc":"Ê","ecirc":"ê","ecir":"≖","ecolon":"≕","Ecy":"Э","ecy":"э","eDDot":"⩷","Edot":"Ė","edot":"ė","eDot":"≑","ee":"ⅇ","efDot":"≒","Efr":"𝔈","efr":"𝔢","eg":"⪚","Egrave":"È","egrave":"è","egs":"⪖","egsdot":"⪘","el":"⪙","Element":"∈","elinters":"⏧","ell":"ℓ","els":"⪕","elsdot":"⪗","Emacr":"Ē","emacr":"ē","empty":"∅","emptyset":"∅","EmptySmallSquare":"◻","emptyv":"∅","EmptyVerySmallSquare":"▫","emsp13":" ","emsp14":" ","emsp":" ","ENG":"Ŋ","eng":"ŋ","ensp":" ","Eogon":"Ę","eogon":"ę","Eopf":"𝔼","eopf":"𝕖","epar":"⋕","eparsl":"⧣","eplus":"⩱","epsi":"ε","Epsilon":"Ε","epsilon":"ε","epsiv":"ϵ","eqcirc":"≖","eqcolon":"≕","eqsim":"≂","eqslantgtr":"⪖","eqslantless":"⪕","Equal":"⩵","equals":"=","EqualTilde":"≂","equest":"≟","Equilibrium":"⇌","equiv":"≡","equivDD":"⩸","eqvparsl":"⧥","erarr":"⥱","erDot":"≓","escr":"ℯ","Escr":"ℰ","esdot":"≐","Esim":"⩳","esim":"≂","Eta":"Η","eta":"η","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","euro":"€","excl":"!","exist":"∃","Exists":"∃","expectation":"ℰ","exponentiale":"ⅇ","ExponentialE":"ⅇ","fallingdotseq":"≒","Fcy":"Ф","fcy":"ф","female":"♀","ffilig":"ﬃ","fflig":"ﬀ","ffllig":"ﬄ","Ffr":"𝔉","ffr":"𝔣","filig":"ﬁ","FilledSmallSquare":"◼","FilledVerySmallSquare":"▪","fjlig":"fj","flat":"♭","fllig":"ﬂ","fltns":"▱","fnof":"ƒ","Fopf":"𝔽","fopf":"𝕗","forall":"∀","ForAll":"∀","fork":"⋔","forkv":"⫙","Fouriertrf":"ℱ","fpartint":"⨍","frac12":"½","frac13":"⅓","frac14":"¼","frac15":"⅕","frac16":"⅙","frac18":"⅛","frac23":"⅔","frac25":"⅖","frac34":"¾","frac35":"⅗","frac38":"⅜","frac45":"⅘","frac56":"⅚","frac58":"⅝","frac78":"⅞","frasl":"⁄","frown":"⌢","fscr":"𝒻","Fscr":"ℱ","gacute":"ǵ","Gamma":"Γ","gamma":"γ","Gammad":"Ϝ","gammad":"ϝ","gap":"⪆","Gbreve":"Ğ","gbreve":"ğ","Gcedil":"Ģ","Gcirc":"Ĝ","gcirc":"ĝ","Gcy":"Г","gcy":"г","Gdot":"Ġ","gdot":"ġ","ge":"≥","gE":"≧","gEl":"⪌","gel":"⋛","geq":"≥","geqq":"≧","geqslant":"⩾","gescc":"⪩","ges":"⩾","gesdot":"⪀","gesdoto":"⪂","gesdotol":"⪄","gesl":"⋛︀","gesles":"⪔","Gfr":"𝔊","gfr":"𝔤","gg":"≫","Gg":"⋙","ggg":"⋙","gimel":"ℷ","GJcy":"Ѓ","gjcy":"ѓ","gla":"⪥","gl":"≷","glE":"⪒","glj":"⪤","gnap":"⪊","gnapprox":"⪊","gne":"⪈","gnE":"≩","gneq":"⪈","gneqq":"≩","gnsim":"⋧","Gopf":"𝔾","gopf":"𝕘","grave":"`","GreaterEqual":"≥","GreaterEqualLess":"⋛","GreaterFullEqual":"≧","GreaterGreater":"⪢","GreaterLess":"≷","GreaterSlantEqual":"⩾","GreaterTilde":"≳","Gscr":"𝒢","gscr":"ℊ","gsim":"≳","gsime":"⪎","gsiml":"⪐","gtcc":"⪧","gtcir":"⩺","gt":">","GT":">","Gt":"≫","gtdot":"⋗","gtlPar":"⦕","gtquest":"⩼","gtrapprox":"⪆","gtrarr":"⥸","gtrdot":"⋗","gtreqless":"⋛","gtreqqless":"⪌","gtrless":"≷","gtrsim":"≳","gvertneqq":"≩︀","gvnE":"≩︀","Hacek":"ˇ","hairsp":" ","half":"½","hamilt":"ℋ","HARDcy":"Ъ","hardcy":"ъ","harrcir":"⥈","harr":"↔","hArr":"⇔","harrw":"↭","Hat":"^","hbar":"ℏ","Hcirc":"Ĥ","hcirc":"ĥ","hearts":"♥","heartsuit":"♥","hellip":"…","hercon":"⊹","hfr":"𝔥","Hfr":"ℌ","HilbertSpace":"ℋ","hksearow":"⤥","hkswarow":"⤦","hoarr":"⇿","homtht":"∻","hookleftarrow":"↩","hookrightarrow":"↪","hopf":"𝕙","Hopf":"ℍ","horbar":"―","HorizontalLine":"─","hscr":"𝒽","Hscr":"ℋ","hslash":"ℏ","Hstrok":"Ħ","hstrok":"ħ","HumpDownHump":"≎","HumpEqual":"≏","hybull":"⁃","hyphen":"‐","Iacute":"Í","iacute":"í","ic":"⁣","Icirc":"Î","icirc":"î","Icy":"И","icy":"и","Idot":"İ","IEcy":"Е","iecy":"е","iexcl":"¡","iff":"⇔","ifr":"𝔦","Ifr":"ℑ","Igrave":"Ì","igrave":"ì","ii":"ⅈ","iiiint":"⨌","iiint":"∭","iinfin":"⧜","iiota":"℩","IJlig":"Ĳ","ijlig":"ĳ","Imacr":"Ī","imacr":"ī","image":"ℑ","ImaginaryI":"ⅈ","imagline":"ℐ","imagpart":"ℑ","imath":"ı","Im":"ℑ","imof":"⊷","imped":"Ƶ","Implies":"⇒","incare":"℅","in":"∈","infin":"∞","infintie":"⧝","inodot":"ı","intcal":"⊺","int":"∫","Int":"∬","integers":"ℤ","Integral":"∫","intercal":"⊺","Intersection":"⋂","intlarhk":"⨗","intprod":"⨼","InvisibleComma":"⁣","InvisibleTimes":"⁢","IOcy":"Ё","iocy":"ё","Iogon":"Į","iogon":"į","Iopf":"𝕀","iopf":"𝕚","Iota":"Ι","iota":"ι","iprod":"⨼","iquest":"¿","iscr":"𝒾","Iscr":"ℐ","isin":"∈","isindot":"⋵","isinE":"⋹","isins":"⋴","isinsv":"⋳","isinv":"∈","it":"⁢","Itilde":"Ĩ","itilde":"ĩ","Iukcy":"І","iukcy":"і","Iuml":"Ï","iuml":"ï","Jcirc":"Ĵ","jcirc":"ĵ","Jcy":"Й","jcy":"й","Jfr":"𝔍","jfr":"𝔧","jmath":"ȷ","Jopf":"𝕁","jopf":"𝕛","Jscr":"𝒥","jscr":"𝒿","Jsercy":"Ј","jsercy":"ј","Jukcy":"Є","jukcy":"є","Kappa":"Κ","kappa":"κ","kappav":"ϰ","Kcedil":"Ķ","kcedil":"ķ","Kcy":"К","kcy":"к","Kfr":"𝔎","kfr":"𝔨","kgreen":"ĸ","KHcy":"Х","khcy":"х","KJcy":"Ќ","kjcy":"ќ","Kopf":"𝕂","kopf":"𝕜","Kscr":"𝒦","kscr":"𝓀","lAarr":"⇚","Lacute":"Ĺ","lacute":"ĺ","laemptyv":"⦴","lagran":"ℒ","Lambda":"Λ","lambda":"λ","lang":"⟨","Lang":"⟪","langd":"⦑","langle":"⟨","lap":"⪅","Laplacetrf":"ℒ","laquo":"«","larrb":"⇤","larrbfs":"⤟","larr":"←","Larr":"↞","lArr":"⇐","larrfs":"⤝","larrhk":"↩","larrlp":"↫","larrpl":"⤹","larrsim":"⥳","larrtl":"↢","latail":"⤙","lAtail":"⤛","lat":"⪫","late":"⪭","lates":"⪭︀","lbarr":"⤌","lBarr":"⤎","lbbrk":"❲","lbrace":"{","lbrack":"[","lbrke":"⦋","lbrksld":"⦏","lbrkslu":"⦍","Lcaron":"Ľ","lcaron":"ľ","Lcedil":"Ļ","lcedil":"ļ","lceil":"⌈","lcub":"{","Lcy":"Л","lcy":"л","ldca":"⤶","ldquo":"“","ldquor":"„","ldrdhar":"⥧","ldrushar":"⥋","ldsh":"↲","le":"≤","lE":"≦","LeftAngleBracket":"⟨","LeftArrowBar":"⇤","leftarrow":"←","LeftArrow":"←","Leftarrow":"⇐","LeftArrowRightArrow":"⇆","leftarrowtail":"↢","LeftCeiling":"⌈","LeftDoubleBracket":"⟦","LeftDownTeeVector":"⥡","LeftDownVectorBar":"⥙","LeftDownVector":"⇃","LeftFloor":"⌊","leftharpoondown":"↽","leftharpoonup":"↼","leftleftarrows":"⇇","leftrightarrow":"↔","LeftRightArrow":"↔","Leftrightarrow":"⇔","leftrightarrows":"⇆","leftrightharpoons":"⇋","leftrightsquigarrow":"↭","LeftRightVector":"⥎","LeftTeeArrow":"↤","LeftTee":"⊣","LeftTeeVector":"⥚","leftthreetimes":"⋋","LeftTriangleBar":"⧏","LeftTriangle":"⊲","LeftTriangleEqual":"⊴","LeftUpDownVector":"⥑","LeftUpTeeVector":"⥠","LeftUpVectorBar":"⥘","LeftUpVector":"↿","LeftVectorBar":"⥒","LeftVector":"↼","lEg":"⪋","leg":"⋚","leq":"≤","leqq":"≦","leqslant":"⩽","lescc":"⪨","les":"⩽","lesdot":"⩿","lesdoto":"⪁","lesdotor":"⪃","lesg":"⋚︀","lesges":"⪓","lessapprox":"⪅","lessdot":"⋖","lesseqgtr":"⋚","lesseqqgtr":"⪋","LessEqualGreater":"⋚","LessFullEqual":"≦","LessGreater":"≶","lessgtr":"≶","LessLess":"⪡","lesssim":"≲","LessSlantEqual":"⩽","LessTilde":"≲","lfisht":"⥼","lfloor":"⌊","Lfr":"𝔏","lfr":"𝔩","lg":"≶","lgE":"⪑","lHar":"⥢","lhard":"↽","lharu":"↼","lharul":"⥪","lhblk":"▄","LJcy":"Љ","ljcy":"љ","llarr":"⇇","ll":"≪","Ll":"⋘","llcorner":"⌞","Lleftarrow":"⇚","llhard":"⥫","lltri":"◺","Lmidot":"Ŀ","lmidot":"ŀ","lmoustache":"⎰","lmoust":"⎰","lnap":"⪉","lnapprox":"⪉","lne":"⪇","lnE":"≨","lneq":"⪇","lneqq":"≨","lnsim":"⋦","loang":"⟬","loarr":"⇽","lobrk":"⟦","longleftarrow":"⟵","LongLeftArrow":"⟵","Longleftarrow":"⟸","longleftrightarrow":"⟷","LongLeftRightArrow":"⟷","Longleftrightarrow":"⟺","longmapsto":"⟼","longrightarrow":"⟶","LongRightArrow":"⟶","Longrightarrow":"⟹","looparrowleft":"↫","looparrowright":"↬","lopar":"⦅","Lopf":"𝕃","lopf":"𝕝","loplus":"⨭","lotimes":"⨴","lowast":"∗","lowbar":"_","LowerLeftArrow":"↙","LowerRightArrow":"↘","loz":"◊","lozenge":"◊","lozf":"⧫","lpar":"(","lparlt":"⦓","lrarr":"⇆","lrcorner":"⌟","lrhar":"⇋","lrhard":"⥭","lrm":"‎","lrtri":"⊿","lsaquo":"‹","lscr":"𝓁","Lscr":"ℒ","lsh":"↰","Lsh":"↰","lsim":"≲","lsime":"⪍","lsimg":"⪏","lsqb":"[","lsquo":"‘","lsquor":"‚","Lstrok":"Ł","lstrok":"ł","ltcc":"⪦","ltcir":"⩹","lt":"<","LT":"<","Lt":"≪","ltdot":"⋖","lthree":"⋋","ltimes":"⋉","ltlarr":"⥶","ltquest":"⩻","ltri":"◃","ltrie":"⊴","ltrif":"◂","ltrPar":"⦖","lurdshar":"⥊","luruhar":"⥦","lvertneqq":"≨︀","lvnE":"≨︀","macr":"¯","male":"♂","malt":"✠","maltese":"✠","Map":"⤅","map":"↦","mapsto":"↦","mapstodown":"↧","mapstoleft":"↤","mapstoup":"↥","marker":"▮","mcomma":"⨩","Mcy":"М","mcy":"м","mdash":"—","mDDot":"∺","measuredangle":"∡","MediumSpace":" ","Mellintrf":"ℳ","Mfr":"𝔐","mfr":"𝔪","mho":"℧","micro":"µ","midast":"*","midcir":"⫰","mid":"∣","middot":"·","minusb":"⊟","minus":"−","minusd":"∸","minusdu":"⨪","MinusPlus":"∓","mlcp":"⫛","mldr":"…","mnplus":"∓","models":"⊧","Mopf":"𝕄","mopf":"𝕞","mp":"∓","mscr":"𝓂","Mscr":"ℳ","mstpos":"∾","Mu":"Μ","mu":"μ","multimap":"⊸","mumap":"⊸","nabla":"∇","Nacute":"Ń","nacute":"ń","nang":"∠⃒","nap":"≉","napE":"⩰̸","napid":"≋̸","napos":"ŉ","napprox":"≉","natural":"♮","naturals":"ℕ","natur":"♮","nbsp":" ","nbump":"≎̸","nbumpe":"≏̸","ncap":"⩃","Ncaron":"Ň","ncaron":"ň","Ncedil":"Ņ","ncedil":"ņ","ncong":"≇","ncongdot":"⩭̸","ncup":"⩂","Ncy":"Н","ncy":"н","ndash":"–","nearhk":"⤤","nearr":"↗","neArr":"⇗","nearrow":"↗","ne":"≠","nedot":"≐̸","NegativeMediumSpace":"​","NegativeThickSpace":"​","NegativeThinSpace":"​","NegativeVeryThinSpace":"​","nequiv":"≢","nesear":"⤨","nesim":"≂̸","NestedGreaterGreater":"≫","NestedLessLess":"≪","NewLine":"\\n","nexist":"∄","nexists":"∄","Nfr":"𝔑","nfr":"𝔫","ngE":"≧̸","nge":"≱","ngeq":"≱","ngeqq":"≧̸","ngeqslant":"⩾̸","nges":"⩾̸","nGg":"⋙̸","ngsim":"≵","nGt":"≫⃒","ngt":"≯","ngtr":"≯","nGtv":"≫̸","nharr":"↮","nhArr":"⇎","nhpar":"⫲","ni":"∋","nis":"⋼","nisd":"⋺","niv":"∋","NJcy":"Њ","njcy":"њ","nlarr":"↚","nlArr":"⇍","nldr":"‥","nlE":"≦̸","nle":"≰","nleftarrow":"↚","nLeftarrow":"⇍","nleftrightarrow":"↮","nLeftrightarrow":"⇎","nleq":"≰","nleqq":"≦̸","nleqslant":"⩽̸","nles":"⩽̸","nless":"≮","nLl":"⋘̸","nlsim":"≴","nLt":"≪⃒","nlt":"≮","nltri":"⋪","nltrie":"⋬","nLtv":"≪̸","nmid":"∤","NoBreak":"⁠","NonBreakingSpace":" ","nopf":"𝕟","Nopf":"ℕ","Not":"⫬","not":"¬","NotCongruent":"≢","NotCupCap":"≭","NotDoubleVerticalBar":"∦","NotElement":"∉","NotEqual":"≠","NotEqualTilde":"≂̸","NotExists":"∄","NotGreater":"≯","NotGreaterEqual":"≱","NotGreaterFullEqual":"≧̸","NotGreaterGreater":"≫̸","NotGreaterLess":"≹","NotGreaterSlantEqual":"⩾̸","NotGreaterTilde":"≵","NotHumpDownHump":"≎̸","NotHumpEqual":"≏̸","notin":"∉","notindot":"⋵̸","notinE":"⋹̸","notinva":"∉","notinvb":"⋷","notinvc":"⋶","NotLeftTriangleBar":"⧏̸","NotLeftTriangle":"⋪","NotLeftTriangleEqual":"⋬","NotLess":"≮","NotLessEqual":"≰","NotLessGreater":"≸","NotLessLess":"≪̸","NotLessSlantEqual":"⩽̸","NotLessTilde":"≴","NotNestedGreaterGreater":"⪢̸","NotNestedLessLess":"⪡̸","notni":"∌","notniva":"∌","notnivb":"⋾","notnivc":"⋽","NotPrecedes":"⊀","NotPrecedesEqual":"⪯̸","NotPrecedesSlantEqual":"⋠","NotReverseElement":"∌","NotRightTriangleBar":"⧐̸","NotRightTriangle":"⋫","NotRightTriangleEqual":"⋭","NotSquareSubset":"⊏̸","NotSquareSubsetEqual":"⋢","NotSquareSuperset":"⊐̸","NotSquareSupersetEqual":"⋣","NotSubset":"⊂⃒","NotSubsetEqual":"⊈","NotSucceeds":"⊁","NotSucceedsEqual":"⪰̸","NotSucceedsSlantEqual":"⋡","NotSucceedsTilde":"≿̸","NotSuperset":"⊃⃒","NotSupersetEqual":"⊉","NotTilde":"≁","NotTildeEqual":"≄","NotTildeFullEqual":"≇","NotTildeTilde":"≉","NotVerticalBar":"∤","nparallel":"∦","npar":"∦","nparsl":"⫽⃥","npart":"∂̸","npolint":"⨔","npr":"⊀","nprcue":"⋠","nprec":"⊀","npreceq":"⪯̸","npre":"⪯̸","nrarrc":"⤳̸","nrarr":"↛","nrArr":"⇏","nrarrw":"↝̸","nrightarrow":"↛","nRightarrow":"⇏","nrtri":"⋫","nrtrie":"⋭","nsc":"⊁","nsccue":"⋡","nsce":"⪰̸","Nscr":"𝒩","nscr":"𝓃","nshortmid":"∤","nshortparallel":"∦","nsim":"≁","nsime":"≄","nsimeq":"≄","nsmid":"∤","nspar":"∦","nsqsube":"⋢","nsqsupe":"⋣","nsub":"⊄","nsubE":"⫅̸","nsube":"⊈","nsubset":"⊂⃒","nsubseteq":"⊈","nsubseteqq":"⫅̸","nsucc":"⊁","nsucceq":"⪰̸","nsup":"⊅","nsupE":"⫆̸","nsupe":"⊉","nsupset":"⊃⃒","nsupseteq":"⊉","nsupseteqq":"⫆̸","ntgl":"≹","Ntilde":"Ñ","ntilde":"ñ","ntlg":"≸","ntriangleleft":"⋪","ntrianglelefteq":"⋬","ntriangleright":"⋫","ntrianglerighteq":"⋭","Nu":"Ν","nu":"ν","num":"#","numero":"№","numsp":" ","nvap":"≍⃒","nvdash":"⊬","nvDash":"⊭","nVdash":"⊮","nVDash":"⊯","nvge":"≥⃒","nvgt":">⃒","nvHarr":"⤄","nvinfin":"⧞","nvlArr":"⤂","nvle":"≤⃒","nvlt":"<⃒","nvltrie":"⊴⃒","nvrArr":"⤃","nvrtrie":"⊵⃒","nvsim":"∼⃒","nwarhk":"⤣","nwarr":"↖","nwArr":"⇖","nwarrow":"↖","nwnear":"⤧","Oacute":"Ó","oacute":"ó","oast":"⊛","Ocirc":"Ô","ocirc":"ô","ocir":"⊚","Ocy":"О","ocy":"о","odash":"⊝","Odblac":"Ő","odblac":"ő","odiv":"⨸","odot":"⊙","odsold":"⦼","OElig":"Œ","oelig":"œ","ofcir":"⦿","Ofr":"𝔒","ofr":"𝔬","ogon":"˛","Ograve":"Ò","ograve":"ò","ogt":"⧁","ohbar":"⦵","ohm":"Ω","oint":"∮","olarr":"↺","olcir":"⦾","olcross":"⦻","oline":"‾","olt":"⧀","Omacr":"Ō","omacr":"ō","Omega":"Ω","omega":"ω","Omicron":"Ο","omicron":"ο","omid":"⦶","ominus":"⊖","Oopf":"𝕆","oopf":"𝕠","opar":"⦷","OpenCurlyDoubleQuote":"“","OpenCurlyQuote":"‘","operp":"⦹","oplus":"⊕","orarr":"↻","Or":"⩔","or":"∨","ord":"⩝","order":"ℴ","orderof":"ℴ","ordf":"ª","ordm":"º","origof":"⊶","oror":"⩖","orslope":"⩗","orv":"⩛","oS":"Ⓢ","Oscr":"𝒪","oscr":"ℴ","Oslash":"Ø","oslash":"ø","osol":"⊘","Otilde":"Õ","otilde":"õ","otimesas":"⨶","Otimes":"⨷","otimes":"⊗","Ouml":"Ö","ouml":"ö","ovbar":"⌽","OverBar":"‾","OverBrace":"⏞","OverBracket":"⎴","OverParenthesis":"⏜","para":"¶","parallel":"∥","par":"∥","parsim":"⫳","parsl":"⫽","part":"∂","PartialD":"∂","Pcy":"П","pcy":"п","percnt":"%","period":".","permil":"‰","perp":"⊥","pertenk":"‱","Pfr":"𝔓","pfr":"𝔭","Phi":"Φ","phi":"φ","phiv":"ϕ","phmmat":"ℳ","phone":"☎","Pi":"Π","pi":"π","pitchfork":"⋔","piv":"ϖ","planck":"ℏ","planckh":"ℎ","plankv":"ℏ","plusacir":"⨣","plusb":"⊞","pluscir":"⨢","plus":"+","plusdo":"∔","plusdu":"⨥","pluse":"⩲","PlusMinus":"±","plusmn":"±","plussim":"⨦","plustwo":"⨧","pm":"±","Poincareplane":"ℌ","pointint":"⨕","popf":"𝕡","Popf":"ℙ","pound":"£","prap":"⪷","Pr":"⪻","pr":"≺","prcue":"≼","precapprox":"⪷","prec":"≺","preccurlyeq":"≼","Precedes":"≺","PrecedesEqual":"⪯","PrecedesSlantEqual":"≼","PrecedesTilde":"≾","preceq":"⪯","precnapprox":"⪹","precneqq":"⪵","precnsim":"⋨","pre":"⪯","prE":"⪳","precsim":"≾","prime":"′","Prime":"″","primes":"ℙ","prnap":"⪹","prnE":"⪵","prnsim":"⋨","prod":"∏","Product":"∏","profalar":"⌮","profline":"⌒","profsurf":"⌓","prop":"∝","Proportional":"∝","Proportion":"∷","propto":"∝","prsim":"≾","prurel":"⊰","Pscr":"𝒫","pscr":"𝓅","Psi":"Ψ","psi":"ψ","puncsp":" ","Qfr":"𝔔","qfr":"𝔮","qint":"⨌","qopf":"𝕢","Qopf":"ℚ","qprime":"⁗","Qscr":"𝒬","qscr":"𝓆","quaternions":"ℍ","quatint":"⨖","quest":"?","questeq":"≟","quot":"\\"","QUOT":"\\"","rAarr":"⇛","race":"∽̱","Racute":"Ŕ","racute":"ŕ","radic":"√","raemptyv":"⦳","rang":"⟩","Rang":"⟫","rangd":"⦒","range":"⦥","rangle":"⟩","raquo":"»","rarrap":"⥵","rarrb":"⇥","rarrbfs":"⤠","rarrc":"⤳","rarr":"→","Rarr":"↠","rArr":"⇒","rarrfs":"⤞","rarrhk":"↪","rarrlp":"↬","rarrpl":"⥅","rarrsim":"⥴","Rarrtl":"⤖","rarrtl":"↣","rarrw":"↝","ratail":"⤚","rAtail":"⤜","ratio":"∶","rationals":"ℚ","rbarr":"⤍","rBarr":"⤏","RBarr":"⤐","rbbrk":"❳","rbrace":"}","rbrack":"]","rbrke":"⦌","rbrksld":"⦎","rbrkslu":"⦐","Rcaron":"Ř","rcaron":"ř","Rcedil":"Ŗ","rcedil":"ŗ","rceil":"⌉","rcub":"}","Rcy":"Р","rcy":"р","rdca":"⤷","rdldhar":"⥩","rdquo":"”","rdquor":"”","rdsh":"↳","real":"ℜ","realine":"ℛ","realpart":"ℜ","reals":"ℝ","Re":"ℜ","rect":"▭","reg":"®","REG":"®","ReverseElement":"∋","ReverseEquilibrium":"⇋","ReverseUpEquilibrium":"⥯","rfisht":"⥽","rfloor":"⌋","rfr":"𝔯","Rfr":"ℜ","rHar":"⥤","rhard":"⇁","rharu":"⇀","rharul":"⥬","Rho":"Ρ","rho":"ρ","rhov":"ϱ","RightAngleBracket":"⟩","RightArrowBar":"⇥","rightarrow":"→","RightArrow":"→","Rightarrow":"⇒","RightArrowLeftArrow":"⇄","rightarrowtail":"↣","RightCeiling":"⌉","RightDoubleBracket":"⟧","RightDownTeeVector":"⥝","RightDownVectorBar":"⥕","RightDownVector":"⇂","RightFloor":"⌋","rightharpoondown":"⇁","rightharpoonup":"⇀","rightleftarrows":"⇄","rightleftharpoons":"⇌","rightrightarrows":"⇉","rightsquigarrow":"↝","RightTeeArrow":"↦","RightTee":"⊢","RightTeeVector":"⥛","rightthreetimes":"⋌","RightTriangleBar":"⧐","RightTriangle":"⊳","RightTriangleEqual":"⊵","RightUpDownVector":"⥏","RightUpTeeVector":"⥜","RightUpVectorBar":"⥔","RightUpVector":"↾","RightVectorBar":"⥓","RightVector":"⇀","ring":"˚","risingdotseq":"≓","rlarr":"⇄","rlhar":"⇌","rlm":"‏","rmoustache":"⎱","rmoust":"⎱","rnmid":"⫮","roang":"⟭","roarr":"⇾","robrk":"⟧","ropar":"⦆","ropf":"𝕣","Ropf":"ℝ","roplus":"⨮","rotimes":"⨵","RoundImplies":"⥰","rpar":")","rpargt":"⦔","rppolint":"⨒","rrarr":"⇉","Rrightarrow":"⇛","rsaquo":"›","rscr":"𝓇","Rscr":"ℛ","rsh":"↱","Rsh":"↱","rsqb":"]","rsquo":"’","rsquor":"’","rthree":"⋌","rtimes":"⋊","rtri":"▹","rtrie":"⊵","rtrif":"▸","rtriltri":"⧎","RuleDelayed":"⧴","ruluhar":"⥨","rx":"℞","Sacute":"Ś","sacute":"ś","sbquo":"‚","scap":"⪸","Scaron":"Š","scaron":"š","Sc":"⪼","sc":"≻","sccue":"≽","sce":"⪰","scE":"⪴","Scedil":"Ş","scedil":"ş","Scirc":"Ŝ","scirc":"ŝ","scnap":"⪺","scnE":"⪶","scnsim":"⋩","scpolint":"⨓","scsim":"≿","Scy":"С","scy":"с","sdotb":"⊡","sdot":"⋅","sdote":"⩦","searhk":"⤥","searr":"↘","seArr":"⇘","searrow":"↘","sect":"§","semi":";","seswar":"⤩","setminus":"∖","setmn":"∖","sext":"✶","Sfr":"𝔖","sfr":"𝔰","sfrown":"⌢","sharp":"♯","SHCHcy":"Щ","shchcy":"щ","SHcy":"Ш","shcy":"ш","ShortDownArrow":"↓","ShortLeftArrow":"←","shortmid":"∣","shortparallel":"∥","ShortRightArrow":"→","ShortUpArrow":"↑","shy":"­","Sigma":"Σ","sigma":"σ","sigmaf":"ς","sigmav":"ς","sim":"∼","simdot":"⩪","sime":"≃","simeq":"≃","simg":"⪞","simgE":"⪠","siml":"⪝","simlE":"⪟","simne":"≆","simplus":"⨤","simrarr":"⥲","slarr":"←","SmallCircle":"∘","smallsetminus":"∖","smashp":"⨳","smeparsl":"⧤","smid":"∣","smile":"⌣","smt":"⪪","smte":"⪬","smtes":"⪬︀","SOFTcy":"Ь","softcy":"ь","solbar":"⌿","solb":"⧄","sol":"/","Sopf":"𝕊","sopf":"𝕤","spades":"♠","spadesuit":"♠","spar":"∥","sqcap":"⊓","sqcaps":"⊓︀","sqcup":"⊔","sqcups":"⊔︀","Sqrt":"√","sqsub":"⊏","sqsube":"⊑","sqsubset":"⊏","sqsubseteq":"⊑","sqsup":"⊐","sqsupe":"⊒","sqsupset":"⊐","sqsupseteq":"⊒","square":"□","Square":"□","SquareIntersection":"⊓","SquareSubset":"⊏","SquareSubsetEqual":"⊑","SquareSuperset":"⊐","SquareSupersetEqual":"⊒","SquareUnion":"⊔","squarf":"▪","squ":"□","squf":"▪","srarr":"→","Sscr":"𝒮","sscr":"𝓈","ssetmn":"∖","ssmile":"⌣","sstarf":"⋆","Star":"⋆","star":"☆","starf":"★","straightepsilon":"ϵ","straightphi":"ϕ","strns":"¯","sub":"⊂","Sub":"⋐","subdot":"⪽","subE":"⫅","sube":"⊆","subedot":"⫃","submult":"⫁","subnE":"⫋","subne":"⊊","subplus":"⪿","subrarr":"⥹","subset":"⊂","Subset":"⋐","subseteq":"⊆","subseteqq":"⫅","SubsetEqual":"⊆","subsetneq":"⊊","subsetneqq":"⫋","subsim":"⫇","subsub":"⫕","subsup":"⫓","succapprox":"⪸","succ":"≻","succcurlyeq":"≽","Succeeds":"≻","SucceedsEqual":"⪰","SucceedsSlantEqual":"≽","SucceedsTilde":"≿","succeq":"⪰","succnapprox":"⪺","succneqq":"⪶","succnsim":"⋩","succsim":"≿","SuchThat":"∋","sum":"∑","Sum":"∑","sung":"♪","sup1":"¹","sup2":"²","sup3":"³","sup":"⊃","Sup":"⋑","supdot":"⪾","supdsub":"⫘","supE":"⫆","supe":"⊇","supedot":"⫄","Superset":"⊃","SupersetEqual":"⊇","suphsol":"⟉","suphsub":"⫗","suplarr":"⥻","supmult":"⫂","supnE":"⫌","supne":"⊋","supplus":"⫀","supset":"⊃","Supset":"⋑","supseteq":"⊇","supseteqq":"⫆","supsetneq":"⊋","supsetneqq":"⫌","supsim":"⫈","supsub":"⫔","supsup":"⫖","swarhk":"⤦","swarr":"↙","swArr":"⇙","swarrow":"↙","swnwar":"⤪","szlig":"ß","Tab":"\\t","target":"⌖","Tau":"Τ","tau":"τ","tbrk":"⎴","Tcaron":"Ť","tcaron":"ť","Tcedil":"Ţ","tcedil":"ţ","Tcy":"Т","tcy":"т","tdot":"⃛","telrec":"⌕","Tfr":"𝔗","tfr":"𝔱","there4":"∴","therefore":"∴","Therefore":"∴","Theta":"Θ","theta":"θ","thetasym":"ϑ","thetav":"ϑ","thickapprox":"≈","thicksim":"∼","ThickSpace":"  ","ThinSpace":" ","thinsp":" ","thkap":"≈","thksim":"∼","THORN":"Þ","thorn":"þ","tilde":"˜","Tilde":"∼","TildeEqual":"≃","TildeFullEqual":"≅","TildeTilde":"≈","timesbar":"⨱","timesb":"⊠","times":"×","timesd":"⨰","tint":"∭","toea":"⤨","topbot":"⌶","topcir":"⫱","top":"⊤","Topf":"𝕋","topf":"𝕥","topfork":"⫚","tosa":"⤩","tprime":"‴","trade":"™","TRADE":"™","triangle":"▵","triangledown":"▿","triangleleft":"◃","trianglelefteq":"⊴","triangleq":"≜","triangleright":"▹","trianglerighteq":"⊵","tridot":"◬","trie":"≜","triminus":"⨺","TripleDot":"⃛","triplus":"⨹","trisb":"⧍","tritime":"⨻","trpezium":"⏢","Tscr":"𝒯","tscr":"𝓉","TScy":"Ц","tscy":"ц","TSHcy":"Ћ","tshcy":"ћ","Tstrok":"Ŧ","tstrok":"ŧ","twixt":"≬","twoheadleftarrow":"↞","twoheadrightarrow":"↠","Uacute":"Ú","uacute":"ú","uarr":"↑","Uarr":"↟","uArr":"⇑","Uarrocir":"⥉","Ubrcy":"Ў","ubrcy":"ў","Ubreve":"Ŭ","ubreve":"ŭ","Ucirc":"Û","ucirc":"û","Ucy":"У","ucy":"у","udarr":"⇅","Udblac":"Ű","udblac":"ű","udhar":"⥮","ufisht":"⥾","Ufr":"𝔘","ufr":"𝔲","Ugrave":"Ù","ugrave":"ù","uHar":"⥣","uharl":"↿","uharr":"↾","uhblk":"▀","ulcorn":"⌜","ulcorner":"⌜","ulcrop":"⌏","ultri":"◸","Umacr":"Ū","umacr":"ū","uml":"¨","UnderBar":"_","UnderBrace":"⏟","UnderBracket":"⎵","UnderParenthesis":"⏝","Union":"⋃","UnionPlus":"⊎","Uogon":"Ų","uogon":"ų","Uopf":"𝕌","uopf":"𝕦","UpArrowBar":"⤒","uparrow":"↑","UpArrow":"↑","Uparrow":"⇑","UpArrowDownArrow":"⇅","updownarrow":"↕","UpDownArrow":"↕","Updownarrow":"⇕","UpEquilibrium":"⥮","upharpoonleft":"↿","upharpoonright":"↾","uplus":"⊎","UpperLeftArrow":"↖","UpperRightArrow":"↗","upsi":"υ","Upsi":"ϒ","upsih":"ϒ","Upsilon":"Υ","upsilon":"υ","UpTeeArrow":"↥","UpTee":"⊥","upuparrows":"⇈","urcorn":"⌝","urcorner":"⌝","urcrop":"⌎","Uring":"Ů","uring":"ů","urtri":"◹","Uscr":"𝒰","uscr":"𝓊","utdot":"⋰","Utilde":"Ũ","utilde":"ũ","utri":"▵","utrif":"▴","uuarr":"⇈","Uuml":"Ü","uuml":"ü","uwangle":"⦧","vangrt":"⦜","varepsilon":"ϵ","varkappa":"ϰ","varnothing":"∅","varphi":"ϕ","varpi":"ϖ","varpropto":"∝","varr":"↕","vArr":"⇕","varrho":"ϱ","varsigma":"ς","varsubsetneq":"⊊︀","varsubsetneqq":"⫋︀","varsupsetneq":"⊋︀","varsupsetneqq":"⫌︀","vartheta":"ϑ","vartriangleleft":"⊲","vartriangleright":"⊳","vBar":"⫨","Vbar":"⫫","vBarv":"⫩","Vcy":"В","vcy":"в","vdash":"⊢","vDash":"⊨","Vdash":"⊩","VDash":"⊫","Vdashl":"⫦","veebar":"⊻","vee":"∨","Vee":"⋁","veeeq":"≚","vellip":"⋮","verbar":"|","Verbar":"‖","vert":"|","Vert":"‖","VerticalBar":"∣","VerticalLine":"|","VerticalSeparator":"❘","VerticalTilde":"≀","VeryThinSpace":" ","Vfr":"𝔙","vfr":"𝔳","vltri":"⊲","vnsub":"⊂⃒","vnsup":"⊃⃒","Vopf":"𝕍","vopf":"𝕧","vprop":"∝","vrtri":"⊳","Vscr":"𝒱","vscr":"𝓋","vsubnE":"⫋︀","vsubne":"⊊︀","vsupnE":"⫌︀","vsupne":"⊋︀","Vvdash":"⊪","vzigzag":"⦚","Wcirc":"Ŵ","wcirc":"ŵ","wedbar":"⩟","wedge":"∧","Wedge":"⋀","wedgeq":"≙","weierp":"℘","Wfr":"𝔚","wfr":"𝔴","Wopf":"𝕎","wopf":"𝕨","wp":"℘","wr":"≀","wreath":"≀","Wscr":"𝒲","wscr":"𝓌","xcap":"⋂","xcirc":"◯","xcup":"⋃","xdtri":"▽","Xfr":"𝔛","xfr":"𝔵","xharr":"⟷","xhArr":"⟺","Xi":"Ξ","xi":"ξ","xlarr":"⟵","xlArr":"⟸","xmap":"⟼","xnis":"⋻","xodot":"⨀","Xopf":"𝕏","xopf":"𝕩","xoplus":"⨁","xotime":"⨂","xrarr":"⟶","xrArr":"⟹","Xscr":"𝒳","xscr":"𝓍","xsqcup":"⨆","xuplus":"⨄","xutri":"△","xvee":"⋁","xwedge":"⋀","Yacute":"Ý","yacute":"ý","YAcy":"Я","yacy":"я","Ycirc":"Ŷ","ycirc":"ŷ","Ycy":"Ы","ycy":"ы","yen":"¥","Yfr":"𝔜","yfr":"𝔶","YIcy":"Ї","yicy":"ї","Yopf":"𝕐","yopf":"𝕪","Yscr":"𝒴","yscr":"𝓎","YUcy":"Ю","yucy":"ю","yuml":"ÿ","Yuml":"Ÿ","Zacute":"Ź","zacute":"ź","Zcaron":"Ž","zcaron":"ž","Zcy":"З","zcy":"з","Zdot":"Ż","zdot":"ż","zeetrf":"ℨ","ZeroWidthSpace":"​","Zeta":"Ζ","zeta":"ζ","zfr":"𝔷","Zfr":"ℨ","ZHcy":"Ж","zhcy":"ж","zigrarr":"⇝","zopf":"𝕫","Zopf":"ℤ","Zscr":"𝒵","zscr":"𝓏","zwj":"‍","zwnj":"‌"}')},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},function(e){e.exports=JSON.parse('{"amp":"&","apos":"\'","gt":">","lt":"<","quot":"\\""}')},function(e,t,a){var r=a(521),n=e.exports=Object.create(r),i={tagName:"name"};Object.keys(i).forEach((function(e){var t=i[e];Object.defineProperty(n,e,{get:function(){return this[t]||null},set:function(e){return this[t]=e,e}})}))},function(e,t,a){var r=a(520),n=a(522);function i(e,t){this.init(e,t)}function s(e,t){return n.getElementsByTagName(e,t,!0)}function o(e,t){return n.getElementsByTagName(e,t,!0,1)[0]}function c(e,t,a){return n.getText(n.getElementsByTagName(e,t,a,1)).trim()}function l(e,t,a,r,n){var i=c(a,r,n);i&&(e[t]=i)}a(1)(i,r),i.prototype.init=r;var u=function(e){return"rss"===e||"feed"===e||"rdf:RDF"===e};i.prototype.onend=function(){var e,t,a={},n=o(u,this.dom);n&&("feed"===n.name?(t=n.children,a.type="atom",l(a,"id","id",t),l(a,"title","title",t),(e=o("link",t))&&(e=e.attribs)&&(e=e.href)&&(a.link=e),l(a,"description","subtitle",t),(e=c("updated",t))&&(a.updated=new Date(e)),l(a,"author","email",t,!0),a.items=s("entry",t).map((function(e){var t,a={};return l(a,"id","id",e=e.children),l(a,"title","title",e),(t=o("link",e))&&(t=t.attribs)&&(t=t.href)&&(a.link=t),(t=c("summary",e)||c("content",e))&&(a.description=t),(t=c("updated",e))&&(a.pubDate=new Date(t)),a}))):(t=o("channel",n.children).children,a.type=n.name.substr(0,3),a.id="",l(a,"title","title",t),l(a,"link","link",t),l(a,"description","description",t),(e=c("lastBuildDate",t))&&(a.updated=new Date(e)),l(a,"author","managingEditor",t,!0),a.items=s("item",n.children).map((function(e){var t,a={};return l(a,"id","guid",e=e.children),l(a,"title","title",e),l(a,"link","link",e),l(a,"description","description",e),(t=c("pubDate",e))&&(a.pubDate=new Date(t)),a})))),this.dom=a,r.prototype._handleCallback.call(this,n?null:Error("couldn't find root of feed"))},e.exports=i},function(e,t,a){var r=a(100),n=a(1225),i=r.isTag;e.exports={getInnerHTML:function(e,t){return e.children?e.children.map((function(e){return n(e,t)})).join(""):""},getOuterHTML:n,getText:function e(t){return Array.isArray(t)?t.map(e).join(""):i(t)?"br"===t.name?"\n":e(t.children):t.type===r.CDATA?e(t.children):t.type===r.Text?t.data:""}}},function(e,t,a){var r=a(1226),n=a(1227),i=a(1231);i.elementNames.__proto__=null,i.attributeNames.__proto__=null;var s={__proto__:null,style:!0,script:!0,xmp:!0,iframe:!0,noembed:!0,noframes:!0,plaintext:!0,noscript:!0};var o={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},c=e.exports=function(e,t){Array.isArray(e)||e.cheerio||(e=[e]),t=t||{};for(var a="",n=0;n<e.length;n++){var i=e[n];"root"===i.type?a+=c(i.children,t):r.isTag(i)?a+=u(i,t):i.type===r.Directive?a+=d(i):i.type===r.Comment?a+=f(i):i.type===r.CDATA?a+=h(i):a+=p(i,t)}return a},l=["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"];function u(e,t){"foreign"===t.xmlMode&&(e.name=i.elementNames[e.name]||e.name,e.parent&&l.indexOf(e.parent.name)>=0&&(t=Object.assign({},t,{xmlMode:!1}))),!t.xmlMode&&["svg","math"].indexOf(e.name)>=0&&(t=Object.assign({},t,{xmlMode:"foreign"}));var a="<"+e.name,r=function(e,t){if(e){var a,r="";for(var s in e)a=e[s],r&&(r+=" "),"foreign"===t.xmlMode&&(s=i.attributeNames[s]||s),r+=s,(null!==a&&""!==a||t.xmlMode)&&(r+='="'+(t.decodeEntities?n.encodeXML(a):a.replace(/\"/g,"&quot;"))+'"');return r}}(e.attribs,t);return r&&(a+=" "+r),!t.xmlMode||e.children&&0!==e.children.length?(a+=">",e.children&&(a+=c(e.children,t)),o[e.name]&&!t.xmlMode||(a+="</"+e.name+">")):a+="/>",a}function d(e){return"<"+e.data+">"}function p(e,t){var a=e.data||"";return!t.decodeEntities||e.parent&&e.parent.name in s||(a=n.encodeXML(a)),a}function h(e){return"<![CDATA["+e.children[0].data+"]]>"}function f(e){return"\x3c!--"+e.data+"--\x3e"}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTag=function(e){return"tag"===e.type||"script"===e.type||"style"===e.type},t.Text="text",t.Directive="directive",t.Comment="comment",t.Script="script",t.Style="style",t.Tag="tag",t.CDATA="cdata",t.Doctype="doctype"},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(523),n=a(526);t.decode=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTML)(e)},t.decodeStrict=function(e,t){return(!t||t<=0?r.decodeXML:r.decodeHTMLStrict)(e)},t.encode=function(e,t){return(!t||t<=0?n.encodeXML:n.encodeHTML)(e)};var i=a(526);t.encodeXML=i.encodeXML,t.encodeHTML=i.encodeHTML,t.escape=i.escape,t.encodeHTML4=i.encodeHTML,t.encodeHTML5=i.encodeHTML;var s=a(523);t.decodeXML=s.decodeXML,t.decodeHTML=s.decodeHTML,t.decodeHTMLStrict=s.decodeHTMLStrict,t.decodeHTML4=s.decodeHTML,t.decodeHTML5=s.decodeHTML,t.decodeHTML4Strict=s.decodeHTMLStrict,t.decodeHTML5Strict=s.decodeHTMLStrict,t.decodeXMLStrict=s.decodeXML},function(e){e.exports=JSON.parse('{"Aacute":"Á","aacute":"á","Acirc":"Â","acirc":"â","acute":"´","AElig":"Æ","aelig":"æ","Agrave":"À","agrave":"à","amp":"&","AMP":"&","Aring":"Å","aring":"å","Atilde":"Ã","atilde":"ã","Auml":"Ä","auml":"ä","brvbar":"¦","Ccedil":"Ç","ccedil":"ç","cedil":"¸","cent":"¢","copy":"©","COPY":"©","curren":"¤","deg":"°","divide":"÷","Eacute":"É","eacute":"é","Ecirc":"Ê","ecirc":"ê","Egrave":"È","egrave":"è","ETH":"Ð","eth":"ð","Euml":"Ë","euml":"ë","frac12":"½","frac14":"¼","frac34":"¾","gt":">","GT":">","Iacute":"Í","iacute":"í","Icirc":"Î","icirc":"î","iexcl":"¡","Igrave":"Ì","igrave":"ì","iquest":"¿","Iuml":"Ï","iuml":"ï","laquo":"«","lt":"<","LT":"<","macr":"¯","micro":"µ","middot":"·","nbsp":" ","not":"¬","Ntilde":"Ñ","ntilde":"ñ","Oacute":"Ó","oacute":"ó","Ocirc":"Ô","ocirc":"ô","Ograve":"Ò","ograve":"ò","ordf":"ª","ordm":"º","Oslash":"Ø","oslash":"ø","Otilde":"Õ","otilde":"õ","Ouml":"Ö","ouml":"ö","para":"¶","plusmn":"±","pound":"£","quot":"\\"","QUOT":"\\"","raquo":"»","reg":"®","REG":"®","sect":"§","shy":"­","sup1":"¹","sup2":"²","sup3":"³","szlig":"ß","THORN":"Þ","thorn":"þ","times":"×","Uacute":"Ú","uacute":"ú","Ucirc":"Û","ucirc":"û","Ugrave":"Ù","ugrave":"ù","uml":"¨","Uuml":"Ü","uuml":"ü","Yacute":"Ý","yacute":"ý","yen":"¥","yuml":"ÿ"}')},function(e,t,a){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(1230));t.default=function(e){if(e>=55296&&e<=57343||e>1114111)return"�";e in n.default&&(e=n.default[e]);var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e)}},function(e){e.exports=JSON.parse('{"0":65533,"128":8364,"130":8218,"131":402,"132":8222,"133":8230,"134":8224,"135":8225,"136":710,"137":8240,"138":352,"139":8249,"140":338,"142":381,"145":8216,"146":8217,"147":8220,"148":8221,"149":8226,"150":8211,"151":8212,"152":732,"153":8482,"154":353,"155":8250,"156":339,"158":382,"159":376}')},function(e){e.exports=JSON.parse('{"elementNames":{"altglyph":"altGlyph","altglyphdef":"altGlyphDef","altglyphitem":"altGlyphItem","animatecolor":"animateColor","animatemotion":"animateMotion","animatetransform":"animateTransform","clippath":"clipPath","feblend":"feBlend","fecolormatrix":"feColorMatrix","fecomponenttransfer":"feComponentTransfer","fecomposite":"feComposite","feconvolvematrix":"feConvolveMatrix","fediffuselighting":"feDiffuseLighting","fedisplacementmap":"feDisplacementMap","fedistantlight":"feDistantLight","fedropshadow":"feDropShadow","feflood":"feFlood","fefunca":"feFuncA","fefuncb":"feFuncB","fefuncg":"feFuncG","fefuncr":"feFuncR","fegaussianblur":"feGaussianBlur","feimage":"feImage","femerge":"feMerge","femergenode":"feMergeNode","femorphology":"feMorphology","feoffset":"feOffset","fepointlight":"fePointLight","fespecularlighting":"feSpecularLighting","fespotlight":"feSpotLight","fetile":"feTile","feturbulence":"feTurbulence","foreignobject":"foreignObject","glyphref":"glyphRef","lineargradient":"linearGradient","radialgradient":"radialGradient","textpath":"textPath"},"attributeNames":{"definitionurl":"definitionURL","attributename":"attributeName","attributetype":"attributeType","basefrequency":"baseFrequency","baseprofile":"baseProfile","calcmode":"calcMode","clippathunits":"clipPathUnits","diffuseconstant":"diffuseConstant","edgemode":"edgeMode","filterunits":"filterUnits","glyphref":"glyphRef","gradienttransform":"gradientTransform","gradientunits":"gradientUnits","kernelmatrix":"kernelMatrix","kernelunitlength":"kernelUnitLength","keypoints":"keyPoints","keysplines":"keySplines","keytimes":"keyTimes","lengthadjust":"lengthAdjust","limitingconeangle":"limitingConeAngle","markerheight":"markerHeight","markerunits":"markerUnits","markerwidth":"markerWidth","maskcontentunits":"maskContentUnits","maskunits":"maskUnits","numoctaves":"numOctaves","pathlength":"pathLength","patterncontentunits":"patternContentUnits","patterntransform":"patternTransform","patternunits":"patternUnits","pointsatx":"pointsAtX","pointsaty":"pointsAtY","pointsatz":"pointsAtZ","preservealpha":"preserveAlpha","preserveaspectratio":"preserveAspectRatio","primitiveunits":"primitiveUnits","refx":"refX","refy":"refY","repeatcount":"repeatCount","repeatdur":"repeatDur","requiredextensions":"requiredExtensions","requiredfeatures":"requiredFeatures","specularconstant":"specularConstant","specularexponent":"specularExponent","spreadmethod":"spreadMethod","startoffset":"startOffset","stddeviation":"stdDeviation","stitchtiles":"stitchTiles","surfacescale":"surfaceScale","systemlanguage":"systemLanguage","tablevalues":"tableValues","targetx":"targetX","targety":"targetY","textlength":"textLength","viewbox":"viewBox","viewtarget":"viewTarget","xchannelselector":"xChannelSelector","ychannelselector":"yChannelSelector","zoomandpan":"zoomAndPan"}}')},function(e,t){var a=t.getChildren=function(e){return e.children},r=t.getParent=function(e){return e.parent};t.getSiblings=function(e){var t=r(e);return t?a(t):[e]},t.getAttributeValue=function(e,t){return e.attribs&&e.attribs[t]},t.hasAttrib=function(e,t){return!!e.attribs&&hasOwnProperty.call(e.attribs,t)},t.getName=function(e){return e.name}},function(e,t){t.removeElement=function(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}},t.replaceElement=function(e,t){var a=t.prev=e.prev;a&&(a.next=t);var r=t.next=e.next;r&&(r.prev=t);var n=t.parent=e.parent;if(n){var i=n.children;i[i.lastIndexOf(e)]=t}},t.appendChild=function(e,t){if(t.parent=e,1!==e.children.push(t)){var a=e.children[e.children.length-2];a.next=t,t.prev=a,t.next=null}},t.append=function(e,t){var a=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=a,r){if(r.prev=t,a){var n=a.children;n.splice(n.lastIndexOf(r),0,t)}}else a&&a.children.push(t)},t.prepend=function(e,t){var a=e.parent;if(a){var r=a.children;r.splice(r.lastIndexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=a,t.prev=e.prev,t.next=e,e.prev=t}},function(e,t,a){var r=a(100).isTag;function n(e,t,a,r){for(var i,s=[],o=0,c=t.length;o<c&&!(e(t[o])&&(s.push(t[o]),--r<=0))&&(i=t[o].children,!(a&&i&&i.length>0&&(i=n(e,i,a,r),s=s.concat(i),(r-=i.length)<=0)));o++);return s}e.exports={filter:function(e,t,a,r){Array.isArray(t)||(t=[t]);"number"==typeof r&&isFinite(r)||(r=1/0);return n(e,t,!1!==a,r)},find:n,findOneChild:function(e,t){for(var a=0,r=t.length;a<r;a++)if(e(t[a]))return t[a];return null},findOne:function e(t,a){for(var n=null,i=0,s=a.length;i<s&&!n;i++)r(a[i])&&(t(a[i])?n=a[i]:a[i].children.length>0&&(n=e(t,a[i].children)));return n},existsOne:function e(t,a){for(var n=0,i=a.length;n<i;n++)if(r(a[n])&&(t(a[n])||a[n].children.length>0&&e(t,a[n].children)))return!0;return!1},findAll:function(e,t){var a=[],n=t.slice();for(;n.length;){var i=n.shift();r(i)&&(i.children&&i.children.length>0&&n.unshift.apply(n,i.children),e(i)&&a.push(i))}return a}}},function(e,t,a){var r=a(100),n=t.isTag=r.isTag;t.testElement=function(e,t){for(var a in e)if(e.hasOwnProperty(a)){if("tag_name"===a){if(!n(t)||!e.tag_name(t.name))return!1}else if("tag_type"===a){if(!e.tag_type(t.type))return!1}else if("tag_contains"===a){if(n(t)||!e.tag_contains(t.data))return!1}else if(!t.attribs||!e[a](t.attribs[a]))return!1}else;return!0};var i={tag_name:function(e){return"function"==typeof e?function(t){return n(t)&&e(t.name)}:"*"===e?n:function(t){return n(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return!n(t)&&e(t.data)}:function(t){return!n(t)&&t.data===e}}};function s(e,t){return"function"==typeof t?function(a){return a.attribs&&t(a.attribs[e])}:function(a){return a.attribs&&a.attribs[e]===t}}function o(e,t){return function(a){return e(a)||t(a)}}t.getElements=function(e,t,a,r){var n=Object.keys(e).map((function(t){var a=e[t];return t in i?i[t](a):s(t,a)}));return 0===n.length?[]:this.filter(n.reduce(o),t,a,r)},t.getElementById=function(e,t,a){return Array.isArray(t)||(t=[t]),this.findOne(s("id",e),t,!1!==a)},t.getElementsByTagName=function(e,t,a,r){return this.filter(i.tag_name(e),t,a,r)},t.getElementsByTagType=function(e,t,a,r){return this.filter(i.tag_type(e),t,a,r)}},function(e,t){t.removeSubsets=function(e){for(var t,a,r,n=e.length;--n>-1;){for(t=a=e[n],e[n]=null,r=!0;a;){if(e.indexOf(a)>-1){r=!1,e.splice(n,1);break}a=a.parent}r&&(e[n]=t)}return e};var a=1,r=2,n=4,i=8,s=16,o=t.compareDocumentPosition=function(e,t){var o,c,l,u,d,p,h=[],f=[];if(e===t)return 0;for(o=e;o;)h.unshift(o),o=o.parent;for(o=t;o;)f.unshift(o),o=o.parent;for(p=0;h[p]===f[p];)p++;return 0===p?a:(l=(c=h[p-1]).children,u=h[p],d=f[p],l.indexOf(u)>l.indexOf(d)?c===t?n|s:n:c===e?r|i:r)};t.uniqueSort=function(e){var t,a,i=e.length;for(e=e.slice();--i>-1;)t=e[i],(a=e.indexOf(t))>-1&&a<i&&e.splice(i,1);return e.sort((function(e,t){var a=o(e,t);return a&r?-1:a&n?1:0})),e}},function(e,t,a){e.exports=n;var r=a(527);function n(e){r.call(this,new i(this),e)}function i(e){this.scope=e}a(1)(n,r),n.prototype.readable=!0;var s=a(99).EVENTS;Object.keys(s).forEach((function(e){if(0===s[e])i.prototype["on"+e]=function(){this.scope.emit(e)};else if(1===s[e])i.prototype["on"+e]=function(t){this.scope.emit(e,t)};else{if(2!==s[e])throw Error("wrong number of arguments!");i.prototype["on"+e]=function(t,a){this.scope.emit(e,t,a)}}}))},function(e,t){},function(e,t,a){function r(e){this._cbs=e||{}}e.exports=r;var n=a(99).EVENTS;Object.keys(n).forEach((function(e){if(0===n[e])e="on"+e,r.prototype[e]=function(){this._cbs[e]&&this._cbs[e]()};else if(1===n[e])e="on"+e,r.prototype[e]=function(t){this._cbs[e]&&this._cbs[e](t)};else{if(2!==n[e])throw Error("wrong number of arguments");e="on"+e,r.prototype[e]=function(t,a){this._cbs[e]&&this._cbs[e](t,a)}}}))},function(e,t,a){function r(e){this._cbs=e||{},this.events=[]}e.exports=r;var n=a(99).EVENTS;Object.keys(n).forEach((function(e){if(0===n[e])e="on"+e,r.prototype[e]=function(){this.events.push([e]),this._cbs[e]&&this._cbs[e]()};else if(1===n[e])e="on"+e,r.prototype[e]=function(t){this.events.push([e,t]),this._cbs[e]&&this._cbs[e](t)};else{if(2!==n[e])throw Error("wrong number of arguments");e="on"+e,r.prototype[e]=function(t,a){this.events.push([e,t,a]),this._cbs[e]&&this._cbs[e](t,a)}}})),r.prototype.onreset=function(){this.events=[],this._cbs.onreset&&this._cbs.onreset()},r.prototype.restart=function(){this._cbs.onreset&&this._cbs.onreset();for(var e=0,t=this.events.length;e<t;e++)if(this._cbs[this.events[e][0]]){var a=this.events[e].length;1===a?this._cbs[this.events[e][0]]():2===a?this._cbs[this.events[e][0]](this.events[e][1]):this._cbs[this.events[e][0]](this.events[e][1],this.events[e][2])}}},function(e,t,a){var r=a(99),n=a(135);function i(){}i.prototype._score=function(e){var t,a=0;if(e.attribs.src&&(t=e.attribs.src),e.attribs["data-src"]&&(t=e.attribs["data-src"]),e.attribs["data-lazy-src"]&&(t=e.attribs["data-lazy-src"]),!t)return-10;for(var r=[{pattern:/(large|big)/,score:1},{pattern:"upload",score:1},{pattern:"media",score:1},{pattern:"gravatar.com",score:-1},{pattern:"feeds.feedburner.com",score:-1},{pattern:/icon/i,score:-1},{pattern:/logo/i,score:-1},{pattern:/spinner/i,score:-1},{pattern:/loading/i,score:-1},{pattern:"badge",score:-1},{pattern:"1x1",score:-1},{pattern:"pixel",score:-1},{pattern:/ads/i,score:-1},{pattern:/doubleclick/i,score:-1}],n=0,i=r.length;n<i;n++)t.match(r[n].pattern)&&(a+=r[n].score);return a},i.prototype.resolve=function(e,t,a,r){var n=this;r.fetch(e,(function(i,s){n.parseHTML(i,e,t,a,r)}),(function(){t(null)}))},i.prototype.parseHTML=function(e,t,a,i,s){var o=r.DomUtils,c=this,l=new r.DomHandler((function(e,r){if(e)a(null);else{var i,s=o.getElementsByTagName("img",r,!0),l=[];if(s.length){for(var u=0,d=s.length;u<d;u++)if(s[u].attribs["data-src"]&&(s[u].attribs.src=s[u].attribs["data-src"]),s[u].attribs["data-lazy-src"]&&(s[u].attribs.src=s[u].attribs["data-lazy-src"]),s[u].attribs.src){var p=s[u].attribs.width||1,h=s[u].attribs.height||1;s[u].surface=p*h,s[u].score=c._score(s[u]),s[u].surface>256&&l.push(s[u])}if(l.length>0)return l.sort((function(e,t){return e.surface==t.surface?t.score-e.score:t.surface-e.surface})),(i=l[0].attribs.src).match(/^http/)||(i=n.resolve(t,i)),void a(i);a(null)}else a(null)}})),u=new r.Parser(l);u.write(e),u.done()},e.exports=i},function(e,t,a){function r(e,t,a,r,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void a(e)}o.done?t(c):Promise.resolve(c).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,i){var s=e.apply(t,a);function o(e){r(s,n,i,o,c,"next",e)}function c(e){r(s,n,i,o,c,"throw",e)}o(void 0)}))}}var i=a(1243),s=a(1244),o=a(1245),c=a(94);e.exports=HomeHeader={render:function(e){for(var t=document.querySelector(".header"),a=[],r=0;r<e.modules.mods.length;r++)null!=e.modules.mods[r].respondTo("header-dropdown")&&a.push(e.modules.mods[r]);t.innerHTML=i(a),t.classList.add("header-home"),t.append(c(s(a))),t.append(c(o(e)));var l=e.wallet.returnPublicKey();document.querySelector(".profile-photo").src=e.keys.returnIdenticon(l),document.querySelector(".profile-public-key").innerHTML=l;var u='<div class="profile-register-link">anonymous account</div>';e.keys.returnIdentifierByPublicKey(l)?u=e.keys.returnIdentifierByPublicKey(l):document.querySelector(".profile-identifier").onclick=n(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return document.getElementById("settings-dropdown").classList.add("show-right-sidebar-hard"),t.next=3,sprompt("Pick a handle or nickname. <br /><sub>Alphanumeric characters only - Do not include an @</sub.>");case 3:a=t.sent,e.modules.returnModule("Registry").registerIdentifier(a)&&(u='"'.concat(a,'@saito" requested.'),document.getElementById("settings-dropdown").classList.remove("show-right-sidebar-hard"),document.getElementById("settings-dropdown").classList.add("show-right-sidebar"),document.querySelector(".profile-identifier").innerHTML=u);case 6:case"end":return t.stop()}}),t)}))),document.querySelector(".profile-identifier").innerHTML=u},attachEvents:function(e){for(var t=0,a=0,r=0;r<e.modules.mods.length;r++)"Email"==e.modules.mods[r].name&&1==e.modules.mods[r].browser_active&&(t=1),"QRScanner"==e.modules.mods[r].name&&(a=1);document.getElementById("navigator")&&(document.getElementById("navigator").onclick=function(){document.getElementById("modules-dropdown").toggleClass("show-right-sidebar")}),document.getElementById("settings")&&(document.getElementById("settings").onclick=function(){document.getElementById("settings-dropdown").toggleClass("show-right-sidebar")}),document.getElementById("header-dropdown-scan-qr")&&(document.getElementById("header-dropdown-scan-qr").onclick=function(){1==a?e.modules.returnModule("QRScanner").startScanner():salert("QR Scanner not installed or disabled")}),document.getElementById("header-dropdown-my-profile")&&(document.getElementById("header-dropdown-my-profile").onclick=function(){if(1==t)for(var e=document.getElementsByClassName("email-apps-item"),a=0;a<e.length;a++)"Profile"===e[a].innerHTML&&e[a].click();else window.location="/wallet/#page=email_appspace&subpage=Profile"}),document.getElementById("header-dropdown-add-contacts")&&(document.getElementById("header-dropdown-add-contacts").onclick=function(){var t=e.modules.returnModule("Tutorial");t&&t.inviteFriendsModal()}),document.getElementById("header-dropdown-reset-wallet")&&(document.getElementById("header-dropdown-reset-wallet").onclick=function(){e.wallet.resetWallet()}),document.getElementById("header-dropdown-backup-wallet")&&(document.getElementById("header-dropdown-backup-wallet").onclick=function(){e.wallet.backupWallet()}),document.getElementById("header-dropdown-settings")&&(document.getElementById("header-dropdown-settings").onclick=function(){if(1==t)for(var e=document.getElementsByClassName("email-apps-item"),a=0;a<e.length;a++)"Settings"===e[a].innerHTML&&e[a].click();else window.location="/wallet/#page=email_appspace&subpage=Settings"}),document.getElementById("header-dropdown-backup-wallet")&&(document.getElementById("header-dropdown-backup-wallet").onclick=function(){e.wallet.backupWallet()}),document.getElementById("header-dropdown-restore-wallet")&&document.getElementById("header-dropdown-restore-wallet").addEventListener("click",function(){var t=n(regeneratorRuntime.mark((function t(a){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="",n="",t.prev=2,t.next=5,sprompt("Enter Private Key:");case 5:if(""==(r=t.sent)){t.next=17;break}return n=e.crypto.returnPublicKey(r),e.wallet.wallet.privatekey=r,e.wallet.wallet.publickey=n,e.wallet.wallet.inputs=[],e.wallet.wallet.outputs=[],e.wallet.wallet.spends=[],e.wallet.wallet.pending=[],t.next=16,e.wallet.saveWallet();case 16:window.location.reload();case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(2),salert("Restore Private Key ERROR: "+t.t0),console.log("Restore Private Key ERROR: "+t.t0);case 23:case"end":return t.stop()}}),t,null,[[2,19]])})));return function(e){return t.apply(this,arguments)}}());var i=function(e){"navigator"!==e.target.id&&document.getElementById("modules-dropdown").classList.remove("show-right-sidebar"),"settings"!==e.target.id&&document.getElementById("settings-dropdown").classList.remove("show-right-sidebar")};window.removeEventListener("click",i),window.addEventListener("click",i),document.querySelector(".manage-account")&&(document.querySelector(".manage-account").onclick=function(){window.location="/wallet/#page=email_appspace&subpage=Settings"})}}},function(e,t){e.exports=HeaderTemplate=function(e){html='\n\n  <div class="header-wrapper">\n     <a href="/">\n        <img class="logo" src="/saito/img/logo.svg" >\n      </a>\n  ',html+='<div id="header-icon-links" class="header-icon-links">';for(var t=0;t<e.length;t++){var a=1===e[t].browser_active?"javascript:void(0)":e[t].returnLink(),r=1===e[t].browser_active?e[t].icon_fa+" header-icon-disabled":e[t].icon_fa;html+='<a class="header-icon-fullscreen tip" href="'.concat(a,'">\n             <i id="').concat(e[t].returnSlug(),'" class="header-icon icon-med ').concat(r,'">\n             <div class="redicon"></div></i>\n             <div class="tiptext headertip">').concat(e[t].appname?e[t].appname:e[t].name,"</div>\n             </a>")}return html+='\n      <i id="navigator" class="header-icon icon-med fas fa-bars"></i>\n      <i id="settings" class="header-icon icon-med fas fa-cog"></i>\n  ',html+="</div></div>",html}},function(e,t){e.exports=HeaderDropdownTemplate=function(e){for(var t='\n    <div id="modules-dropdown" class="header-dropdown">\n      <ul>\n  ',a=0;a<e.length;a++)null!=e[a].returnLink()&&(t+='<a href="'.concat(e[a].returnLink(),'"><li>').concat(e[a].name,"</li></a>"));return t+="\n    </ul>\n    </div>\n  "}},function(e,t){e.exports=HeaderSettingsDropdownTemplate=function(e){var t=0,a=0;e.modules.returnModule("QRScanner")&&(a=1),e.modules.returnModule("MyQRCode")&&(t=1);var r='\n    <div id="settings-dropdown" class="header-dropdown">\n      <div class="personal-info">\n        <img class="profile-photo" />\n        <div class="account-info">\n          <div class="profile-identifier">anonymous account</div>\n          <div class="profile-public-key"></div>\n        </div>\n    </div>\n\n    <center><hr width="98%" style="color:#888"/></center>\n\n    <div class="wallet-actions">\n  ';return r+='\n      <div class="wallet-action-row" id="header-dropdown-backup-wallet">\n        <span class="scan-qr-info"><i class="settings-fas-icon fas fa-copy"></i> Backup Access Keys</span>\n      </div>\n    ',r+='\n      <div class="wallet-action-row" id="header-dropdown-restore-wallet">\n        <span class="scan-qr-info"><i class="settings-fas-icon fas fa-redo"></i> Restore Access Keys</span>\n      </div>\n    ',r+='\n      <div class="wallet-action-row" id="header-dropdown-my-profile">\n        <span class="scan-qr-info"><i class="settings-fas-icon fas fa-user"></i> Public Profile </span>\n      </div>\n    ',r+='\n      <div class="wallet-action-row" id="header-dropdown-settings">\n        <span class="scan-qr-info"><i class="settings-fas-icon fas fa-wrench"></i> Settings </span>\n      </div>\n    ',r+='\n      <div class="wallet-action-row" id="header-dropdown-add-contacts">\n        <span class="scan-qr-info"><i class="settings-fas-icon fas fa-user-friends"></i> Add Contacts </span>\n      </div>\n    ',t&&(r+='\n      <div class="wallet-action-row" id="header-dropdown-myqrcode">\n        <span class="scan-qr-info"><i class="settings-fas-icon fas fa-barcode"></i> QRCode </span>\n      </div>\n    '),a&&(r+='\n      <div class="wallet-action-row" id="header-dropdown-scan-qr">\n        <span class="scan-qr-info"><i class="settings-fas-icon fas fa-qrcode"></i> Scan </span>\n      </div>\n    '),r+='\n      <div class="wallet-action-row" id="header-dropdown-backup-wallet">\n        <span class="scan-qr-info"><i class="settings-fas-icon fas fa-copy"></i> Backup Wallet</span>\n      </div>\n    ',r+="\n    </div>\n  "}},function(e,t){throw new Error("Module parse failed: Unexpected token (5:10)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| Bugs\n| \n> - Missile Envy + Brezhnev / Containment -- should get all OPS pushed up so Missile Envy provides greater choice of cards for the player who has the bonus\n| \n| Sometimes the influence in the counties highlights in blue like when you highlight text on Word. Not sure how to reproduce it, it just happened sometimes.")},function(e,t){throw new Error("Module parse failed: Unexpected token (2:4)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n| \n> rm ../../web/saito/saito.js\n| \n| ")},function(e,t,a){var r=a(1249),n=a(94);e.exports=GameBoardSizer={render:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"body";if(!document.getElementById("game_board_sizer")){var i=document.querySelector(a);i.append(n(r()))}},attachEvents:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".gameboard",n=document.querySelector(r);if(document.querySelector("#game_board_sizer").addEventListener("change",(function(){a.scaleBoard(t,n)})),t.loadGamePreference(t.returnSlug()+"-board-scale"))try{document.querySelector("#game_board_sizer").value=t.loadGamePreference(t.returnSlug()+"-board-scale"),this.scaleBoard(t,n)}catch(e){}var i=t.loadGamePreference(t.returnSlug()+"-board-offset");i&&$(r).offset(i),$(r).draggable({stop:function(e,a){t.saveGamePreference(t.returnSlug()+"-board-offset",a.offset)}})},scaleBoard:function(e,t){try{e.hammertime.get("pinch").set({enable:!1}),e.hammertime.get("pan").set({enable:!1})}catch(e){}t.style.transform="scale(".concat(document.querySelector("#game_board_sizer").value/100,")"),e.saveGamePreference(e.returnSlug()+"-board-scale",document.querySelector("#game_board_sizer").value);try{e.hammertime.get("pinch").set({enable:!0}),e.hammertime.get("pan").set({enable:!0})}catch(e){}}}},function(e,t){e.exports=GameBoardSizerTemplate=function(){return'\n    <input class="game_board_sizer" id="game_board_sizer" type="range" min="33" max="200" value="100" />\n    '}}]);